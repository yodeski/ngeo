!function(e){function t(t){for(var o,a,s=t[0],l=t[1],u=t[2],g=0,h=[];g<s.length;g++)a=s[g],r[a]&&h.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);h.length;)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={1:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;i.push([497,0]),n()}({369:function(e,t){},471:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div\n  class="ngeo-googlestreetview-instructions"\n  ng-if="$ctrl.location === null"\n  translate>\n  Click on a road on the map to start StreetView.\n</div>\n<div\n  class="ngeo-googlestreetview-nodata"\n  ng-if="$ctrl.noDataAtLocation"\n  translate>\n  Street View data not found for this location.\n</div>\n';return __p}},472:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="ngeo-nominatim-input">\n  <input type="text"\n         class="form-control"\n         placeholder="{{$ctrl.placeholder}}"\n         ng-model="$ctrl.inputValue"\n         ngeo-search="$ctrl.options"\n         ngeo-search-datasets="$ctrl.datasets"\n         ngeo-search-listeners="$ctrl.listeners">\n</div>\n';return __p}},473:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="ngeo-routing-feature">\n    <div class="input-group">\n      <ngeo-nominatim-input\n        ngeo-nominatim-input-value="$ctrl.featureLabel"\n        ngeo-nominatim-input-placeholder="{{\'Search...\' | translate}}"\n        ngeo-nominatim-input-on-select="$ctrl.onSelect">\n      </ngeo-nominatim-input>\n      <div class="input-group-addon btn" ng-click="$ctrl.set()">\n        <span class="fa fa-map-marker"></span>\n      </div>\n    </div>\n</div>\n';return __p}},474:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="ngeo-routing">\n  <div class="ngeo-routing-start form-group">\n    <ngeo-routing-feature\n      ngeo-routing-feature-map="$ctrl.map"\n      ngeo-routing-feature-feature="$ctrl.startFeature_"\n      ngeo-routing-feature-fill-color="$ctrl.colors[\'start.fill\']"\n      ngeo-routing-feature-stroke-color="$ctrl.colors[\'start.stroke\']"\n      ngeo-routing-feature-on-change="$ctrl.handleChange">\n    </ngeo-routing-feature>\n  </div>\n\n    <div class="ngeo-routing-vias form-group" ng-repeat="(index, via) in $ctrl.viaArray">\n      <div class="form-inline">\n        <div class="form-group">\n          <ngeo-routing-feature\n            ngeo-routing-feature-map="$ctrl.map"\n            ngeo-routing-feature-feature="via.feature"\n            ngeo-routing-feature-fill-color="$ctrl.colors[\'via.fill\']"\n            ngeo-routing-feature-stroke-color="$ctrl.colors[\'via.stroke\']"\n            ngeo-routing-feature-on-change="$ctrl.handleChange">\n          </ngeo-routing-feature>\n        </div>\n        <button type="button" class="btn prime delete-via" ng-click="$ctrl.deleteVia(index)">\n          <span class="fa fa-trash-o"></span>\n        </button>\n      </div>\n    </div>\n\n  <div class="ngeo-routing-destination form-group">\n    <ngeo-routing-feature\n      ngeo-routing-feature-map="$ctrl.map"\n      ngeo-routing-feature-feature="$ctrl.targetFeature_"\n      ngeo-routing-feature-fill-color="$ctrl.colors[\'destination.fill\']"\n      ngeo-routing-feature-stroke-color="$ctrl.colors[\'destination.stroke\']"\n      ngeo-routing-feature-on-change="$ctrl.handleChange">\n    </ngeo-routing-feature>\n  </div>\n\n  <div class="form-group pull-right">\n    <button type="button" class="btn prime" ng-click="$ctrl.clearRoute()">\n      <span class="fa fa-trash-o"></span> <span translate>Clear</span>\n    </button>\n    <button type="button" class="btn prime" ng-click="$ctrl.reverseRoute()">\n      <span class="fa fa-exchange"></span> <span translate>Reverse</span>\n    </button>\n    <button type="button" class="btn prime" ng-click="$ctrl.addVia()">\n      <span class="fa fa-plus"></span> <span translate>Add via</span>\n    </button>\n  </div>\n\n  <div class="clearfix"></div>\n\n  <div ng-if="$ctrl.routingProfiles.length > 1">\n    <div class="form-group">\n      <label class="col-form-label col-md-4" translate>Profile</label>\n      <div class="col-md-8">\n        <select class="form-control" ng-model="$ctrl.selectedRoutingProfile">\n          <option ng-repeat="profile in $ctrl.routingProfiles" ng-value="profile">{{profile.label}}</option>\n        </select>\n      </div>\n    </div>\n  </div>\n\n  <div class="ngeo-routing-error form-group clearfix"\n       ng-hide="$ctrl.errorMessage === \'\'">\n    {{$ctrl.errorMessage}}\n  </div>\n\n  <div class="clearfix"></div>\n\n  <div ng-hide="$ctrl.routeDuration === null && $ctrl.routeDistance <= 0">\n    <div class="row">\n      <div class="col-md-12">\n        <strong translate>Route statistics</strong>\n      </div>\n    </div>\n    <div class="row" ng-hide="$ctrl.routeDuration === null">\n      <div class="col-md-4 text-right" translate>\n        Duration\n      </div>\n      <div class="col-md-8">\n        {{$ctrl.routeDuration | ngeoDuration}}\n      </div>\n    </div>\n\n    <div class="row" ng-hide="$ctrl.routeDistance <= 0">\n      <div class="col-md-4 text-right" translate>\n        Distance\n      </div>\n      <div class="col-md-8">\n        {{$ctrl.routeDistance | ngeoUnitPrefix:\'m\'}}\n      </div>\n    </div>\n  </div>\n</div>\n';return __p}},475:function(e,t){},497:function(e,t,n){"use strict";n.r(t);n(369);var o=n(125),r=n(148),i=n(313),a=n(0),s=n(79),l=n(3),u=n(1),c=n(10),g=n(16),h=n(22);var p=angular.module("ngeoGooglestreetview",[s.a.module.name]);function m(e,t){return t(e)}p.value("ngeoGooglestreetviewTemplateUrl",function(e){var t=e.ngeoGooglestreetviewTemplateUrl;return void 0!==t?t:"ngeo/googlestreetview"}),p.run(["$templateCache",function(e){e.put("ngeo/googlestreetview",n(471))}]),m.$inject=["$attrs","ngeoGooglestreetviewTemplateUrl"],p.Controller_=function(){function e(t,n,o){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active,n.$watch(function(){return r.active},this.handleActiveChange_.bind(this)),this.featureStyle,this.map,this.radius,this.scope_=n,this.feature_=new g.a,this.featureOverlay_=a.a.assert(o.getFeatureOverlay()),this.listenerKeys_=[],this.location=null,this.noDataAtLocation=!1,this.panorama_=new google.maps.StreetViewPanorama(t[0],{pov:{heading:0,pitch:0},visible:!1,zoom:1}),this.panoramaListener_=null,this.point_=new h.a([0,0]),this.feature_.setGeometry(this.point_),this.streetViewService_=new google.maps.StreetViewService,this.panoramaPositionChanging_=!1}return e.$inject=["$element","$scope","ngeoFeatureOverlayMgr"],e.prototype.$onInit=function(){var e=this;this.scope_.$watch(function(){return e.location},this.handleLocationChange_.bind(this)),this.scope_.$watch(function(){var t=e.active,n=null!==e.location;return t&&n},this.handleReadyChange_.bind(this)),this.scope_.$watch(function(){var t=e.active,n=null!==e.location,o=!1===e.noDataAtLocation;return t&&n&&o},function(t,n){t!==n&&(e.panorama_.setVisible(t),t?e.panoramaListener_=google.maps.event.addListener(e.panorama_,"position_changed",e.handlePanoramaPositionChange_.bind(e)):e.panoramaListener_&&(google.maps.event.removeListener(e.panoramaListener_),e.panoramaListener_=null))}),this.featureStyle&&this.feature_.setStyle(this.featureStyle)},e.prototype.handleActiveChange_=function(e){var t=this.listenerKeys_;e?t.push(u.a(this.map,"click",this.handleMapClick_,this)):(t.forEach(u.e),t.length=0)},e.prototype.handleLocationChange_=function(e,t){if(!(e===t||Array.isArray(e)&&Array.isArray(t)&&l.b(e,t))&&(this.point_.setCoordinates(e),e&&!this.panoramaPositionChanging_)){var n=this.toLonLat_(e);this.streetViewService_.getPanorama({location:{lat:n[1],lng:n[0]},radius:this.radius},this.handleStreetViewServiceGetPanorama_.bind(this))}},e.prototype.handleMapClick_=function(e){this.location=e.coordinate,this.scope_.$apply()},e.prototype.handleReadyChange_=function(e,t){e!==t&&(e?this.featureOverlay_.addFeature(this.feature_):this.featureOverlay_.removeFeature(this.feature_))},e.prototype.handleStreetViewServiceGetPanorama_=function(e,t){var n=this.panorama_;t===google.maps.StreetViewStatus.OK?(this.noDataAtLocation=!1,n.setPosition(e.location.latLng)):this.noDataAtLocation=!0,this.scope_.$apply()},e.prototype.handlePanoramaPositionChange_=function(){this.panoramaPositionChanging_=!0;var e=this.panorama_.getPosition(),t=[e.lng(),e.lat()],n=this.fromLonLat_(t);this.location=n,this.scope_.$apply(),this.panoramaPositionChanging_=!1},e.prototype.fromLonLat_=function(e){return c.f(e,this.map.getView().getProjection())},e.prototype.toLonLat_=function(e){return c.l(e,this.map.getView().getProjection())},e}(),p.component("ngeoGooglestreetview",{bindings:{active:"<",featureStyle:"<?",map:"<",radius:"<?"},controller:p.Controller_,templateUrl:m});var d=p,f=angular.module("ngeoGooglestreetviewModule",[d.name]),v=n(134),_=n(104),y=function(e,t,n){this.$http_=e,this.ngeoDebounce_=n,this.nominatimUrl_="https://nominatim.openstreetmap.org/",t.has("ngeoNominatimUrl")&&(this.nominatimUrl_=t.get("ngeoNominatimUrl"),"/"!==this.nominatimUrl_.substr(-1)&&(this.nominatimUrl_+="/")),this.searchDefaultParams_={},t.has("ngeoNominatimSearchDefaultParams")&&(this.searchDefaultParams_=t.get("ngeoNominatimSearchDefaultParams")),this.typeaheadDebounceDelay_=500,this.typeaheadSourceDebounced=this.ngeoDebounce_(this.typeaheadSource_.bind(this),this.typeaheadDebounceDelay_,!0)};y.$inject=["$http","$injector","ngeoDebounce"],y.$inject=["$http","$injector","ngeoDebounce"],y.prototype.search=function(e,t){var n=this.nominatimUrl_+"search?q="+e;if(t=t||{},(t=Object.assign({},this.searchDefaultParams_,t)).format="json",t){n+="&";var o=[],r=Object.keys(t),i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var s;if(i){if(a>=r.length)break;s=r[a++]}else{if((a=r.next()).done)break;s=a.value}var l=s;o.push(l+"="+t[l])}n+=o.join("&")}return this.$http_.get(n)},y.prototype.reverse=function(e,t){var n=this.nominatimUrl_+"reverse";if((t=Object.assign({},t)).lon=e[0],t.lat=e[1],t.format="json",t){n+="?";var o=[],r=Object.keys(t),i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var s;if(i){if(a>=r.length)break;s=r[a++]}else{if((a=r.next()).done)break;s=a.value}var l=s;o.push(l+"="+t[l])}n+=o.join("&")}return this.$http_.get(n)},y.prototype.typeaheadSource_=function(e,t,n){this.search(e,{}).then(function(e){n(e.data.map(function(e){return{coordinate:[e.lon,e.lat],name:e.display_name}}))},function(e){n([])})},(y.module=angular.module("ngeoNominatimService",[v.a.name])).service("ngeoNominatimService",y);var b=y,$=function(e,t){this.$http_=e,this.routingOptions_=t.has("ngeoRoutingOptions")?t.get("ngeoRoutingOptions"):{},this.ngeoOsrmBackendUrl_=this.routingOptions_.backendUrl||"https://router.project-osrm.org/","/"!==this.ngeoOsrmBackendUrl_.substr(-1)&&(this.ngeoOsrmBackendUrl_+="/"),this.protocolVersion_="v1"};$.$inject=["$http","$injector"],$.$inject=["$http","$injector"],$.prototype.getRoute=function(e,t){(t=t||{}).service||(t.service="route"),t.profile||(t.profile="car");var n=this.ngeoOsrmBackendUrl_;if(t.instance&&(n+=t.instance+"/"),n+=t.service+"/"+this.protocolVersion_+"/"+t.profile+"/",n+=e.map(function(e){return e.join(",")}).join(";"),t.options){n+="?";var o=[],r=Object.keys(t.options),i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var s;if(i){if(a>=r.length)break;s=r[a++]}else{if((a=r.next()).done)break;s=a.value}var l=s;o.push(l+"="+t.options[l])}n+=o.join("&")}return this.$http_.get(n)},$.prototype.getNearest=function(e,t){(t=t||{}).service="nearest",t.profile||(t.profile="car");var n=this.ngeoOsrmBackendUrl_;if(t.instance&&(n+=t.instance+"/"),n+=t.service+"/"+this.protocolVersion_+"/"+t.profile+"/",n+=e.join(","),t.options){n+="?";var o=[],r=Object.keys(t.options),i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var s;if(i){if(a>=r.length)break;s=r[a++]}else{if((a=r.next()).done)break;s=a.value}var l=s;o.push(l+"="+t.options[l])}n+=o.join("&")}return this.$http_.get(n)},($.module=angular.module("ngeoRoutingService",[])).service("ngeoRoutingService",$);var w=$,C=n(303),S={};function j(e,t){return t(e)}S.module=angular.module("ngeoRoutingNominatimInputComponent",[C.a.module.name,b.module.name]),S.module.run(["$templateCache",function(e){e.put("ngeo/routing/nominatiminput",n(472))}]),S.module.value("ngeoRoutingNominatimInputComponentTemplateUrl",function(e){var t=e.ngeoRoutingNominatimInputComponentTemplateUrl;return void 0!==t?t:"ngeo/routing/nominatiminput"}),j.$inject=["$attrs","ngeoRoutingNominatimInputComponentTemplateUrl"],S.Controller=function(e,t,n,o){this.element_=e,this.$scope_=n,this.ngeoNominatimService=o,this.onSelect,this.inputValue,this.options={},this.datasets=[{name:"nominatim",display:"name",source:this.ngeoNominatimService.typeaheadSourceDebounced}],this.listeners={select:this.select_.bind(this)},this.placeholder=""},S.Controller.$inject=["$element","$injector","$scope","ngeoNominatimService"],S.Controller.prototype.select_=function(e,t,n){this.onSelect&&this.onSelect(t)};var F={controller:S.Controller,bindings:{onSelect:"=?ngeoNominatimInputOnSelect",inputValue:"=?ngeoNominatimInputValue",placeholder:"@?ngeoNominatimInputPlaceholder"},templateUrl:j};S.module.component("ngeoNominatimInput",F);var P=S,L=n(18),R=n(52),k=n(57),A=n(12),O=n(96),D=n(27),x=n(26),V=n(163),U=n(100),N=(n(207),{});function G(e,t){return t(e)}N.module=angular.module("ngeoRoutingFeatureComponent",[b.module.name,P.module.name]),N.module.run(["$templateCache",function(e){e.put("ngeo/routing/routingfeature",n(473))}]),N.module.value("ngeoRoutingFeatureTemplateUrl",function(e){var t=e.ngeoRoutingFeatureTemplateUrl;return void 0!==t?t:"ngeo/routing/routingfeature"}),G.$inject=["$attrs","ngeoRoutingFeatureTemplateUrl"],N.Controller=function(e,t,n,o){this.scope_=e,this.timeout_=t,this.$q_=n,this.ngeoNominatimService_=o,this.map,this.feature,this.featureLabel="",this.fillColor,this.strokeColor,this.onChange,this.vectorFeatures_=new L.b,this.vectorSource_=new R.b({features:this.vectorFeatures_}),this.vectorLayer_=new k.a({source:this.vectorSource_,style:function(e,t){return[new A.c({text:new O.a({fill:new D.a({color:this.fillColor||"#000000"}),font:"normal 30px FontAwesome",offsetY:-15,stroke:new x.a({width:3,color:this.strokeColor||"#000000"}),text:""})})]}.bind(this)}),this.modifyFeature_=new V.a({features:this.vectorFeatures_}),this.draw_=null,this.onSelect=this.onSelect_.bind(this),this.errorMessage=""},N.Controller.$inject=["$scope","$timeout","$q","ngeoNominatimService"],N.Controller.prototype.$onInit=function(){var e=this;this.map.addLayer(this.vectorLayer_),this.modifyFeature_.setActive(!0),this.map.addInteraction(this.modifyFeature_),this.modifyFeature_.on("modifyend",function(t){var n=t.features.getArray()[0];e.vectorSource_.clear(),e.snapFeature_(n)}),this.scope_.$watch(function(){return e.feature},function(t,n){t&&e.onFeatureChange_(),null===t&&(e.vectorSource_.clear(),e.featureLabel="")})},N.Controller.prototype.$onDestroy=function(){this.map.removeLayer(this.vectorLayer_),this.modifyFeature_.setActive(!1),this.map.removeInteraction(this.modifyFeature_)},N.Controller.prototype.set=function(){var e=this;this.draw_&&this.map.removeInteraction(this.draw_),this.draw_=new U.a({features:this.vectorFeatures_,type:"Point"}),this.draw_.on("drawstart",function(){e.feature&&e.vectorSource_.removeFeature(e.feature)}),this.draw_.on("drawend",function(t){e.draw_&&e.map.removeInteraction(e.draw_),e.snapFeature_(t.feature),e.modifyFeature_.setActive(!0)}),this.modifyFeature_.setActive(!1),this.map.addInteraction(this.draw_)},N.Controller.prototype.setFeature_=function(e,t){var n=c.f(e,this.map.getView().getProjection());""===t&&(t=n.join("/")),this.feature=new g.a({geometry:new h.a(n),name:t})},N.Controller.prototype.onFeatureChange_=function(){var e=this;this.featureLabel=this.feature.get("name")||"",this.vectorSource_.clear(),this.vectorSource_.addFeature(this.feature),this.onChange&&this.timeout_(function(){e.onChange(e.feature)})},N.Controller.prototype.onSelect_=function(e){var t=e.coordinate.map(parseFloat),n=e.label;this.setFeature_(t,n);var o=this.feature.getGeometry().getCoordinates();this.map.getView().setCenter(o)},N.Controller.prototype.snapFeature_=function(e){var t=this.getLonLatFromPoint_(e),n=function(e){var t=[parseFloat(e.data.lon),parseFloat(e.data.lat)],n=e.data.display_name;this.setFeature_(t,n)}.bind(this),o=function(e){this.errorMessage="Error: nominatim server not responding.",console.log(e)}.bind(this);this.$q_.when(this.ngeoNominatimService_.reverse(t,{})).then(n.bind(this),o.bind(this))},N.Controller.prototype.getLonLatFromPoint_=function(e){var t=e.getGeometry().getCoordinates(),n=this.map.getView().getProjection();return c.l(t,n)},N.component_={controller:N.Controller,bindings:{map:"<ngeoRoutingFeatureMap",feature:"=ngeoRoutingFeatureFeature",fillColor:"<?ngeoRoutingFeatureFillColor",strokeColor:"<?ngeoRoutingFeatureStrokeColor",onChange:"=?ngeoRoutingFeatureOnChange"},templateUrl:G},N.module.component("ngeoRoutingFeature",N.component_);var M=N,I=n(106),T=n(33),E={};function q(e,t){return t(e)}E.module=angular.module("ngeoRoutingComponent",[v.a.name,_.a.name,b.module.name,w.module.name,M.module.name]),E.module.run(["$templateCache",function(e){e.put("ngeo/routing/routing",n(474))}]),E.module.value("ngeoRoutingTemplateUrl",function(e){var t=e.ngeoRoutingTemplateUrl;return void 0!==t?t:"ngeo/routing/routing"}),q.$inject=["$attrs","ngeoRoutingTemplateUrl"],E.Controller=function(e,t,n,o,r,i){var a=this;this.$scope_=t,this.ngeoRoutingService_=n,this.ngeoNominatimService_=o,this.routingOptions_=e.has("ngeoRoutingOptions")?e.get("ngeoRoutingOptions"):{},this.routingProfiles=this.routingOptions_.profiles||[],this.selectedRoutingProfile=this.routingProfiles.length>0?this.routingProfiles[0]:null,t.$watch(function(){return a.selectedRoutingProfile},this.calculateRoute.bind(this)),this.$q_=r,this.map,this.errorMessage="",this.startFeature_=null,this.targetFeature_=null,this.viaArray=[],this.colors={"start.fill":"#6BE62E","start.stroke":"#4CB01E","destination.fill":"#FF3E13","destination.stroke":"#CD3412","via.fill":"#767676","via.stroke":"#000000"},this.routeSource_=new R.b({features:[]}),this.routeLayer_=new k.a({source:this.routeSource_,style:new A.c({fill:new D.a({color:"rgba(16, 112, 29, 0.6)"}),stroke:new x.a({color:"rgba(16, 112, 29, 0.6)",width:5})})}),this.routeDistance=0,this.routeDuration=null,this.regexIsFormattedCoord=/\d+\.\d+\/\d+\.\d+/,this.draw_=null;this.handleChange=i(this.calculateRoute.bind(this),200,!0)},E.Controller.$inject=["$injector","$scope","ngeoRoutingService","ngeoNominatimService","$q","ngeoDebounce"],E.Controller.prototype.$onInit=function(){this.map.addLayer(this.routeLayer_)},E.Controller.prototype.clearRoute=function(){this.startFeature_=null,this.targetFeature_=null,this.viaArray=[],this.routeDistance=0,this.routeDuration=null,this.routeSource_.clear(),this.errorMessage=""},E.Controller.prototype.getLonLatFromPoint_=function(e){var t=e.getGeometry().getCoordinates(),n=this.map.getView().getProjection();return c.l(t,n)},E.Controller.prototype.reverseRoute=function(){var e=this.startFeature_;this.startFeature_=this.targetFeature_,this.targetFeature_=e,this.viaArray=this.viaArray.reverse()},E.Controller.prototype.parseRoute_=function(e){var t,n=[],o=new I.a,r={dataProjection:"EPSG:4326",featureProjection:this.map.getView().getProjection()};e.legs?(n=e.legs.map(function(e){return e.steps.map(function(e){return new g.a({geometry:o.readGeometry(e.geometry,r)})})}),n=(t=[]).concat.apply(t,n)):e.geometry&&n.push(new g.a({geometry:o.readGeometry(e.geometry,r)}));return n},E.Controller.prototype.calculateRoute=function(){var e=this;if(this.startFeature_&&this.targetFeature_){this.routeSource_.clear();var t=this.getLonLatFromPoint_(this.startFeature_),n=this.getLonLatFromPoint_(this.targetFeature_),o=this.viaArray.filter(function(e){return null!==e.feature}).map(function(t){return e.getLonLatFromPoint_(t.feature)}),r=[t].concat(o,[n]),i=function(e){var t=this.parseRoute_(e.data.routes[0]);if(0!==t.length){this.routeSource_.addFeatures(t),this.map.getView().fit(this.routeSource_.getExtent()),this.routeDistance=parseInt(e.data.routes[0].distance,10),this.routeDuration=e.data.routes[0].duration;var n=t[0].getGeometry().getCoordinateAt(0),o=t[t.length-1].getGeometry().getCoordinateAt(1),r=[this.startFeature_.getGeometry().getCoordinates(),n],i=[o,this.targetFeature_.getGeometry().getCoordinates()],a=[new g.a(new T.a(r)),new g.a(new T.a(i))];this.routeSource_.addFeatures(a)}else console.log("No route or not supported format.")}.bind(this),a=function(e){this.errorMessage="Error: routing server not responding.",console.log(e)}.bind(this),s={steps:!0,overview:!1,geometries:"geojson"},l={};l.options=s,this.selectedRoutingProfile&&(l.instance=this.selectedRoutingProfile.profile),this.$q_.when(this.ngeoRoutingService_.getRoute(r,l)).then(i.bind(this),a.bind(this))}},E.Controller.prototype.addVia=function(){this.viaArray.push({feature:null,onSelect:null})},E.Controller.prototype.deleteVia=function(e){this.viaArray.length>e&&(this.viaArray.splice(e,1),this.calculateRoute())},E.module.component("ngeoRouting",{controller:E.Controller,bindings:{map:"<ngeoRoutingMap"},templateUrl:q});var B=E,z=(n(475),angular.module("ngeoRoutingModule",[B.module.name])),K=n(128),Y=n(113),H=n(5),J=n(149),W=n.n(J),Q=n(150),X=n.n(Q);window.requestAnimationFrame||(alert("Your browser is not supported, please update it or use another one. You will be redirected.\n\nVotre navigateur n'est pas supporté, veuillez le mettre à jour ou en utiliser un autre. Vous allez être redirigé.\n\nIhr Browser wird nicht unterstützt, bitte aktualisieren Sie ihn oder verwenden Sie einen anderen. Sie werden weitergeleitet."),window.location="http://geomapfish.org/");var Z=function(e,t,n,r,i){o.a.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],zoom:3,resolutions:[250,100,50,20,10,5,2,1,.5,.25,.1,.05]}},e,t),this.searchCoordinatesProjections=[Y.a,K.a,"EPSG:4326"],this.searchDelay=500,this.showInfobar=!0,this.scaleSelectorValues=[25e4,1e5,5e4,2e4,1e4,5e3,2e3,1e3,500,250,100,50],this.elevationLayers=["srtm"],this.profileLinesconfiguration={srtm:{}},this.mousePositionProjections=[{code:"EPSG:2056",label:"CH1903+ / LV95",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:21781",label:"CH1903 / LV03",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:4326",label:"WGS84",filter:"ngeoDMSCoordinates:2"}],this.gridMergeTabs={OSM_time_merged:["osm_time","osm_time2"],"transport (merged)":["fuel","parking"],"Learning [merged]":["information","bus_stop"]};var a=t.get("gettextCatalog");if(a.getString("OSM_time_merged"),a.getString("OSM_time (merged)"),a.getString("Learning [merged]"),a.getString("Add a theme"),a.getString("Add a sub theme"),a.getString("Add a layer"),this.bgOpacityOptions="Test aus Olten",t.has("sentryUrl")){var s=t.has("sentryOptions")?t.get("sentryOptions"):void 0;(new W.a).config(t.get("sentryUrl"),s).addPlugin(X.a).install()}};Z.$inject=["$scope","$injector","ngeoFile","gettext","$q"],Z.$inject=["$scope","$injector","ngeoFile","gettext","$q"],H.c(Z,o.a),Z.prototype.onKeydown=function(e){e.ctrlKey&&"p"===e.key&&(this.printPanelActive=!0,e.preventDefault())},(Z.module=angular.module("Appdesktop_alt",[r.a.module.name,o.a.module.name,i.a.name,z.name,f.name])).controller("AlternativeDesktopController",Z);t.default=Z}});
//# sourceMappingURL=desktop_alt.a1ca5b.js.map