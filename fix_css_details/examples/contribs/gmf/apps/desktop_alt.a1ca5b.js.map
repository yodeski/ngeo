{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/googlestreetview/component.html","webpack:///./src/routing/nominatiminput.html","webpack:///./src/routing/routingfeature.html","webpack:///./src/routing/routing.html","webpack:///./src/googlestreetview/component.js","webpack:///./src/googlestreetview/module.js","webpack:///./src/routing/NominatimService.js","webpack:///./src/routing/RoutingService.js","webpack:///./src/routing/NominatimInputComponent.js","webpack:///./src/routing/RoutingFeatureComponent.js","webpack:///./src/routing/RoutingComponent.js","webpack:///./src/routing/module.js","webpack:///./contribs/gmf/apps/desktop_alt/Controller.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","obj","__t","__p","component_exports","angular","FeatureOverlayMgr","ngeoGooglestreetviewTemplateUrl","$attrs","templateUrl","undefined","run","$templateCache","put","Controller_","_class","$element","$scope","ngeoFeatureOverlayMgr","_this","this","_classCallCheck","active","$watch","handleActiveChange_","featureStyle","map","radius","scope_","feature_","Feature","featureOverlay_","goog_asserts_prod","assert","getFeatureOverlay","listenerKeys_","location","noDataAtLocation","panorama_","google","maps","StreetViewPanorama","pov","heading","pitch","visible","zoom","panoramaListener_","point_","Point","setGeometry","streetViewService_","StreetViewService","panoramaPositionChanging_","$inject","$onInit","_this2","handleLocationChange_","isActive","hasLocation","handleReadyChange_","hasData","show","oldShow","setVisible","event","addListener","handlePanoramaPositionChange_","removeListener","setStyle","keys","events","handleMapClick_","forEach","oldLocation","Array","isArray","array","setCoordinates","lonLat","toLonLat_","getPanorama","lat","lng","handleStreetViewServiceGetPanorama_","evt","coordinate","$apply","ready","oldReady","addFeature","removeFeature","status","panorama","StreetViewStatus","OK","setPosition","latLng","position","getPosition","fromLonLat_","proj","getView","getProjection","component","bindings","controller","googlestreetview_module","NominatimService_exports","$http","$injector","ngeoDebounce","$http_","ngeoDebounce_","nominatimUrl_","has","substr","searchDefaultParams_","typeaheadDebounceDelay_","typeaheadSourceDebounced","typeaheadSource_","search","query","params","url","assign","options","_iterator","_isArray","_i","iterator","_ref","next","done","option","join","reverse","_iterator2","_isArray2","_i2","_ref2","syncResults","asyncResults","then","resp","lon","display_name","debounce","service","NominatimService","RoutingService_exports","routingOptions_","ngeoOsrmBackendUrl_","backendUrl","protocolVersion_","getRoute","coordinates","config","getNearest","RoutingService","NominatimInputComponent_exports","ngeoRoutingNominatimInputComponentTemplateUrl","searchDirective","Controller","ngeoNominatimService","element_","$scope_","onSelect","inputValue","datasets","display","source","listeners","select","select_","placeholder","suggestion","dataset","NominatimInputComponent_component","NominatimInputComponent","RoutingFeatureComponent_exports","ngeoRoutingFeatureTemplateUrl","$timeout","$q","timeout_","$q_","ngeoNominatimService_","feature","featureLabel","fillColor","strokeColor","onChange","vectorFeatures_","Collection","vectorSource_","Vector","features","vectorLayer_","layer_Vector","style","resolution","Style","text","Text","fill","Fill","color","font","offsetY","stroke","Stroke","width","modifyFeature_","Modify","draw_","onSelect_","errorMessage","addLayer","setActive","addInteraction","on","getArray","clear","snapFeature_","newVal","oldVal","onFeatureChange_","$onDestroy","removeLayer","removeInteraction","set","Draw","type","setFeature_","label","transformedCoordinate","geometry","_this3","selected","parseFloat","newCoordinates","getGeometry","getCoordinates","setCenter","coord","getLonLatFromPoint_","onSuccess","onError","console","log","when","point","coords","projection","component_","RoutingFeatureComponent","RoutingComponent_exports","ngeoRoutingTemplateUrl","filters","ngeoRoutingService","ngeoRoutingService_","routingProfiles","profiles","selectedRoutingProfile","calculateRoute","startFeature_","targetFeature_","viaArray","colors","start.fill","start.stroke","destination.fill","destination.stroke","via.fill","via.stroke","routeSource_","routeLayer_","routeDistance","routeDuration","regexIsFormattedCoord","handleChange","clearRoute","reverseRoute","tmpFeature","parseRoute_","route","parsedRoutes","format","GeoJSON","formatConfig","dataProjection","featureProjection","legs","leg","steps","step","readGeometry","concat","coordFrom","coordTo","vias","filter","via","onSuccess_","routes","addFeatures","fit","getExtent","parseInt","distance","duration","startRoute","getCoordinateAt","endRoute","startToRoute","routeToEnd","routeConnections","LineString","onError_","addVia","deleteVia","index","RoutingComponent","routing_module","requestAnimationFrame","alert","Controller_exports","ngeoFile","gettext","AbstractDesktopController","srid","mapViewConfig","center","resolutions","searchCoordinatesProjections","EPSG21781","EPSG2056","searchDelay","showInfobar","scaleSelectorValues","elevationLayers","profileLinesconfiguration","srtm","mousePositionProjections","code","gridMergeTabs","OSM_time_merged","transport (merged)","Learning [merged]","gettextCatalog","getString","bgOpacityOptions","raven_default","a","addPlugin","angular_default","install","util","onKeydown","ctrlKey","printPanelActive","preventDefault","appmodule","import_module","__webpack_exports__"],"mappings":"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","file":"desktop_alt.a1ca5b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([497,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div\\n  class=\"ngeo-googlestreetview-instructions\"\\n  ng-if=\"$ctrl.location === null\"\\n  translate>\\n  Click on a road on the map to start StreetView.\\n</div>\\n<div\\n  class=\"ngeo-googlestreetview-nodata\"\\n  ng-if=\"$ctrl.noDataAtLocation\"\\n  translate>\\n  Street View data not found for this location.\\n</div>\\n';\n\n}\nreturn __p\n}","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"ngeo-nominatim-input\">\\n  <input type=\"text\"\\n         class=\"form-control\"\\n         placeholder=\"{{$ctrl.placeholder}}\"\\n         ng-model=\"$ctrl.inputValue\"\\n         ngeo-search=\"$ctrl.options\"\\n         ngeo-search-datasets=\"$ctrl.datasets\"\\n         ngeo-search-listeners=\"$ctrl.listeners\">\\n</div>\\n';\n\n}\nreturn __p\n}","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"ngeo-routing-feature\">\\n    <div class=\"input-group\">\\n      <ngeo-nominatim-input\\n        ngeo-nominatim-input-value=\"$ctrl.featureLabel\"\\n        ngeo-nominatim-input-placeholder=\"{{\\'Search...\\' | translate}}\"\\n        ngeo-nominatim-input-on-select=\"$ctrl.onSelect\">\\n      </ngeo-nominatim-input>\\n      <div class=\"input-group-addon btn\" ng-click=\"$ctrl.set()\">\\n        <span class=\"fa fa-map-marker\"></span>\\n      </div>\\n    </div>\\n</div>\\n';\n\n}\nreturn __p\n}","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"ngeo-routing\">\\n  <div class=\"ngeo-routing-start form-group\">\\n    <ngeo-routing-feature\\n      ngeo-routing-feature-map=\"$ctrl.map\"\\n      ngeo-routing-feature-feature=\"$ctrl.startFeature_\"\\n      ngeo-routing-feature-fill-color=\"$ctrl.colors[\\'start.fill\\']\"\\n      ngeo-routing-feature-stroke-color=\"$ctrl.colors[\\'start.stroke\\']\"\\n      ngeo-routing-feature-on-change=\"$ctrl.handleChange\">\\n    </ngeo-routing-feature>\\n  </div>\\n\\n    <div class=\"ngeo-routing-vias form-group\" ng-repeat=\"(index, via) in $ctrl.viaArray\">\\n      <div class=\"form-inline\">\\n        <div class=\"form-group\">\\n          <ngeo-routing-feature\\n            ngeo-routing-feature-map=\"$ctrl.map\"\\n            ngeo-routing-feature-feature=\"via.feature\"\\n            ngeo-routing-feature-fill-color=\"$ctrl.colors[\\'via.fill\\']\"\\n            ngeo-routing-feature-stroke-color=\"$ctrl.colors[\\'via.stroke\\']\"\\n            ngeo-routing-feature-on-change=\"$ctrl.handleChange\">\\n          </ngeo-routing-feature>\\n        </div>\\n        <button type=\"button\" class=\"btn prime delete-via\" ng-click=\"$ctrl.deleteVia(index)\">\\n          <span class=\"fa fa-trash-o\"></span>\\n        </button>\\n      </div>\\n    </div>\\n\\n  <div class=\"ngeo-routing-destination form-group\">\\n    <ngeo-routing-feature\\n      ngeo-routing-feature-map=\"$ctrl.map\"\\n      ngeo-routing-feature-feature=\"$ctrl.targetFeature_\"\\n      ngeo-routing-feature-fill-color=\"$ctrl.colors[\\'destination.fill\\']\"\\n      ngeo-routing-feature-stroke-color=\"$ctrl.colors[\\'destination.stroke\\']\"\\n      ngeo-routing-feature-on-change=\"$ctrl.handleChange\">\\n    </ngeo-routing-feature>\\n  </div>\\n\\n  <div class=\"form-group pull-right\">\\n    <button type=\"button\" class=\"btn prime\" ng-click=\"$ctrl.clearRoute()\">\\n      <span class=\"fa fa-trash-o\"></span> <span translate>Clear</span>\\n    </button>\\n    <button type=\"button\" class=\"btn prime\" ng-click=\"$ctrl.reverseRoute()\">\\n      <span class=\"fa fa-exchange\"></span> <span translate>Reverse</span>\\n    </button>\\n    <button type=\"button\" class=\"btn prime\" ng-click=\"$ctrl.addVia()\">\\n      <span class=\"fa fa-plus\"></span> <span translate>Add via</span>\\n    </button>\\n  </div>\\n\\n  <div class=\"clearfix\"></div>\\n\\n  <div ng-if=\"$ctrl.routingProfiles.length > 1\">\\n    <div class=\"form-group\">\\n      <label class=\"col-form-label col-md-4\" translate>Profile</label>\\n      <div class=\"col-md-8\">\\n        <select class=\"form-control\" ng-model=\"$ctrl.selectedRoutingProfile\">\\n          <option ng-repeat=\"profile in $ctrl.routingProfiles\" ng-value=\"profile\">{{profile.label}}</option>\\n        </select>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\"ngeo-routing-error form-group clearfix\"\\n       ng-hide=\"$ctrl.errorMessage === \\'\\'\">\\n    {{$ctrl.errorMessage}}\\n  </div>\\n\\n  <div class=\"clearfix\"></div>\\n\\n  <div ng-hide=\"$ctrl.routeDuration === null && $ctrl.routeDistance <= 0\">\\n    <div class=\"row\">\\n      <div class=\"col-md-12\">\\n        <strong translate>Route statistics</strong>\\n      </div>\\n    </div>\\n    <div class=\"row\" ng-hide=\"$ctrl.routeDuration === null\">\\n      <div class=\"col-md-4 text-right\" translate>\\n        Duration\\n      </div>\\n      <div class=\"col-md-8\">\\n        {{$ctrl.routeDuration | ngeoDuration}}\\n      </div>\\n    </div>\\n\\n    <div class=\"row\" ng-hide=\"$ctrl.routeDistance <= 0\">\\n      <div class=\"col-md-4 text-right\" translate>\\n        Distance\\n      </div>\\n      <div class=\"col-md-8\">\\n        {{$ctrl.routeDistance | ngeoUnitPrefix:\\'m\\'}}\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","/**\n * @module ngeo.googlestreetview.component\n */\nimport googAsserts from 'goog/asserts.js';\nimport ngeoMapFeatureOverlayMgr from 'ngeo/map/FeatureOverlayMgr.js';\nimport * as olArray from 'ol/array.js';\nimport * as olEvents from 'ol/events.js';\nimport * as olProj from 'ol/proj.js';\nimport olFeature from 'ol/Feature.js';\nimport olGeomPoint from 'ol/geom/Point.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoGooglestreetview', [\n  ngeoMapFeatureOverlayMgr.module.name\n]);\n\n\nexports.value('ngeoGooglestreetviewTemplateUrl',\n  /**\n   * @param {!angular.Attributes} $attrs Attributes.\n   * @return {string} The template url.\n   */\n  ($attrs) => {\n    const templateUrl = $attrs['ngeoGooglestreetviewTemplateUrl'];\n    return templateUrl !== undefined ? templateUrl :\n      'ngeo/googlestreetview';\n  });\n\nexports.run(/* @ngInject */ ($templateCache) => {\n  $templateCache.put('ngeo/googlestreetview', require('./component.html'));\n});\n\n\n/**\n * @param {!angular.Attributes} $attrs Attributes.\n * @param {!function(!angular.Attributes): string} ngeoGooglestreetviewTemplateUrl Template function.\n * @return {string} Template URL.\n * @ngInject\n */\nfunction ngeoGooglestreetviewTemplateUrl($attrs, ngeoGooglestreetviewTemplateUrl) {\n  return ngeoGooglestreetviewTemplateUrl($attrs);\n}\n\n\n/**\n * @private\n */\nexports.Controller_ = class {\n\n  /**\n   * @param {angular.JQLite} $element Element.\n   * @param {!angular.Scope} $scope Scope.\n   * @param {!ngeo.map.FeatureOverlayMgr} ngeoFeatureOverlayMgr Ngeo FeatureOverlay\n   *     manager.\n   * @private\n   * @ngInject\n   * @ngdoc controller\n   * @ngname NgeoGooglestreetviewController\n   */\n  constructor($element, $scope, ngeoFeatureOverlayMgr) {\n\n    // Binding properties\n\n    /**\n     * @type {boolean}\n     * @export\n     */\n    this.active;\n\n    $scope.$watch(\n      () => this.active,\n      this.handleActiveChange_.bind(this)\n    );\n\n    /**\n     * Style for the feature.\n     * @type {ol.style.Style|Array.<ol.style.Style>|\n     *     ol.FeatureStyleFunction|ol.StyleFunction|undefined}\n     * @export\n     */\n    this.featureStyle;\n\n    /**\n     * @type {!ol.Map}\n     * @export\n     */\n    this.map;\n\n    /**\n     * @type {number|undefined}\n     * @export\n     */\n    this.radius;\n\n\n    // Injected properties\n\n    /**\n     * @type {!angular.Scope}\n     * @private\n     */\n    this.scope_ = $scope;\n\n\n    // Inner properties\n\n    /**\n     * @type {!ol.Feature}\n     * @private\n     */\n    this.feature_ = new olFeature();\n\n    /**\n     * @type {!ngeo.map.FeatureOverlay}\n     * @private\n     */\n    this.featureOverlay_ = googAsserts.assert(\n      ngeoFeatureOverlayMgr.getFeatureOverlay()\n    );\n\n    /**\n     * @type {Array.<!ol.EventsKey>}\n     * @private\n     */\n    this.listenerKeys_ = [];\n\n    /**\n     * The current location in the OpenLayers' map view projection.\n     * @type {?ol.Coordinate}\n     * @private\n     */\n    this.location = null;\n\n    /**\n     * Flag that determines whether there's data at a given location or not.\n     * @type {boolean}\n     * @export\n     */\n    this.noDataAtLocation = false;\n\n    /**\n     * @type {!google.maps.StreetViewPanorama}\n     * @private\n     */\n    this.panorama_ = new google.maps.StreetViewPanorama(\n      $element[0],\n      {\n        pov: {\n          heading: 0,\n          pitch: 0\n        },\n        visible: false,\n        zoom: 1\n      }\n    );\n\n    /**\n     * @type {?google.maps.MapsEventListener}\n     * @private\n     */\n    this.panoramaListener_ = null;\n\n    /**\n     * @type {ol.geom.Point}\n     * @private\n     */\n    this.point_ = new olGeomPoint([0, 0]);\n\n    this.feature_.setGeometry(this.point_);\n\n    /**\n     * @type {google.maps.StreetViewService}\n     * @private\n     */\n    this.streetViewService_ = new google.maps.StreetViewService();\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.panoramaPositionChanging_ = false;\n  }\n\n  /**\n   * Called on initialization of the controller.\n   */\n  $onInit() {\n\n    // === Watchers ===\n\n    // (1) Watch for any change in the location\n    this.scope_.$watch(\n      () => this.location,\n      this.handleLocationChange_.bind(this)\n    );\n\n    // (2) Watch for both the active and location. When we have both, the\n    //     state is considered 'ready'.\n    this.scope_.$watch(\n      () => {\n        const isActive = this.active;\n        const hasLocation = this.location !== null;\n        return isActive && hasLocation;\n      },\n      this.handleReadyChange_.bind(this)\n    );\n\n    // (3) Watcher to manage the visibility of the panorama.\n    this.scope_.$watch(\n      () => {\n        const isActive = this.active;\n        const hasLocation = this.location !== null;\n        const hasData = this.noDataAtLocation === false;\n        return isActive && hasLocation && hasData;\n      },\n      (show, oldShow) => {\n        if (show === oldShow) {\n          return;\n        }\n\n        this.panorama_.setVisible(show);\n\n        if (show) {\n          this.panoramaListener_ = google.maps.event.addListener(\n            this.panorama_,\n            'position_changed',\n            this.handlePanoramaPositionChange_.bind(this)\n          );\n        } else if (this.panoramaListener_) {\n          google.maps.event.removeListener(this.panoramaListener_);\n          this.panoramaListener_ = null;\n        }\n      }\n    );\n\n\n    // Other initialization\n    if (this.featureStyle) {\n      this.feature_.setStyle(this.featureStyle);\n    }\n\n  }\n\n  /**\n   * Called when the 'active' property of this component changes.\n   * @param {boolean} active Active.\n   * @private\n   */\n  handleActiveChange_(active) {\n\n    const keys = this.listenerKeys_;\n\n    if (active) {\n      keys.push(\n        olEvents.listen(this.map, 'click', this.handleMapClick_, this)\n      );\n    } else {\n      keys.forEach(olEvents.unlistenByKey);\n      keys.length = 0;\n    }\n  }\n\n  /**\n   * Called when the 'location' property of this component changes.\n   * @param {?ol.Coordinate} location Location, in OL map view projection.\n   * @param {?ol.Coordinate} oldLocation The previous location.\n   * @private\n   */\n  handleLocationChange_(location, oldLocation) {\n\n    // (1) No need to do anything if the old value equals the new value\n    if (location === oldLocation || (\n      Array.isArray(location) && Array.isArray(oldLocation) &&\n        olArray.equals(location, oldLocation)\n    )) {\n      return;\n    }\n\n    // (2) Update point coordinates\n    this.point_.setCoordinates(location);\n\n    // (3) Update StreetView location\n    if (location && !this.panoramaPositionChanging_) {\n      const lonLat = this.toLonLat_(location);\n      this.streetViewService_.getPanorama({\n        location: {\n          lat: lonLat[1],\n          lng: lonLat[0]\n        },\n        radius: this.radius\n      }, this.handleStreetViewServiceGetPanorama_.bind(this));\n    }\n  }\n\n  /**\n   * Called when the map is clicked while this component is active. Update the\n   * location accordingly.\n   * @param {ol.MapBrowserEvent} evt The map browser event being fired.\n   * @private\n   */\n  handleMapClick_(evt) {\n    this.location = evt.coordinate;\n    this.scope_.$apply();\n  }\n\n  /**\n   * Called when the component 'virtual ready' state changes.\n   *\n   * When ready:\n   *  - add the feature to the overlay\n   *\n   * When not ready:\n   *  - remove the feature from the overlay\n   *\n   * @param {boolean} ready Whether the component is ready or not.\n   * @param {boolean} oldReady Previous ready value.\n   * @private\n   */\n  handleReadyChange_(ready, oldReady) {\n\n    if (ready === oldReady) {\n      return;\n    }\n\n    if (ready) {\n      this.featureOverlay_.addFeature(this.feature_);\n    } else {\n      this.featureOverlay_.removeFeature(this.feature_);\n    }\n  }\n\n  /**\n   * @param {google.maps.StreetViewPanoramaData} data Data.\n   * @param {google.maps.StreetViewStatus} status Status.\n   * @private\n   */\n  handleStreetViewServiceGetPanorama_(data, status) {\n\n    const panorama = this.panorama_;\n\n    if (status === google.maps.StreetViewStatus.OK) {\n      this.noDataAtLocation = false;\n      panorama.setPosition(data.location.latLng);\n    } else {\n      this.noDataAtLocation = true;\n    }\n\n    this.scope_.$apply();\n  }\n\n  /**\n   * Called when the panorama position changes. Update the location.\n   * @private\n   */\n  handlePanoramaPositionChange_() {\n    this.panoramaPositionChanging_ = true;\n    const position = this.panorama_.getPosition();\n    const lonLat = [position.lng(), position.lat()];\n    const location = this.fromLonLat_(lonLat);\n    this.location = location;\n    this.scope_.$apply();\n    this.panoramaPositionChanging_ = false;\n  }\n\n\n  // Utility methods\n\n  /**\n   * @param {!ol.Coordinate} lonLat LonLat coordinate.\n   * @return {ol.Coordinate} Map view projection coordinate.\n   */\n  fromLonLat_(lonLat) {\n    return olProj.fromLonLat(\n      lonLat,\n      this.map.getView().getProjection()\n    );\n  }\n\n  /**\n   * @param {!ol.Coordinate} coordinate Map view projection coordinate.\n   * @return {ol.Coordinate} LonLat coordinate.\n   */\n  toLonLat_(coordinate) {\n    return olProj.toLonLat(\n      coordinate,\n      this.map.getView().getProjection()\n    );\n  }\n};\n\n\nexports.component('ngeoGooglestreetview', {\n  bindings: {\n    'active': '<',\n    'featureStyle': '<?',\n    'map': '<',\n    'radius': '<?'\n  },\n  controller: exports.Controller_,\n  templateUrl: ngeoGooglestreetviewTemplateUrl\n});\n\n\nexport default exports;\n","/**\n * @module ngeo.googlestreetview.module\n */\nimport ngeoGooglestreetviewComponent from 'ngeo/googlestreetview/component.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoGooglestreetviewModule', [\n  ngeoGooglestreetviewComponent.name\n]);\n\n\nexport default exports;\n","/**\n * @module ngeo.routing.NominatimService\n */\nimport ngeoMiscDebounce from 'ngeo/misc/debounce.js';\n\n/**\n * Service to provide access to Nominatim, which allows to search for\n * OSM data by name and address.\n * @param {angular.$http} $http Angular http service.\n * @param {angular.$injector} $injector Main injector.\n * @param {ngeox.miscDebounce} ngeoDebounce ngeo Debounce service.\n * @constructor\n * @struct\n * @ngdoc service\n * @ngInject\n * @export\n * @ngname ngeoNominatimService\n * @see https://wiki.openstreetmap.org/wiki/Nominatim\n */\nconst exports = function($http, $injector, ngeoDebounce) {\n\n  /**\n   * @type {angular.$http}\n   * @private\n   */\n  this.$http_ = $http;\n\n  /**\n   * @type {ngeox.miscDebounce}\n   * @private\n   */\n  this.ngeoDebounce_ = ngeoDebounce;\n\n  /**\n   * URL for Nominatim backend\n   * Defaults openstreetmap instance.\n   * @type {string}\n   * @private\n   */\n  this.nominatimUrl_ = 'https://nominatim.openstreetmap.org/';\n\n  if ($injector.has('ngeoNominatimUrl')) {\n    this.nominatimUrl_ = $injector.get('ngeoNominatimUrl');\n\n    // the url is expected to end with a slash\n    if (this.nominatimUrl_.substr(-1) !== '/') {\n      this.nominatimUrl_ += '/';\n    }\n  }\n\n  /**\n   * @type {Object<string, string>}\n   * @private\n   */\n  this.searchDefaultParams_ = {};\n\n  if ($injector.has('ngeoNominatimSearchDefaultParams')) {\n    this.searchDefaultParams_ = $injector.get('ngeoNominatimSearchDefaultParams');\n  }\n\n  /**\n   * Delay (in milliseconds) to avoid calling the API too often.\n   * Only if there were no calls for that many milliseconds,\n   * the last call will be executed.\n   * @type {number}\n   * @private\n   */\n  this.typeaheadDebounceDelay_ = 500;\n\n  /**\n   * @export\n   * @type {function(string,function(Array.<BloodhoundDatum>),(function(Array.<ol.Feature>)|undefined))}\n   */\n  this.typeaheadSourceDebounced =\n    /** @type{function(string,function(Array.<BloodhoundDatum>),(function(Array.<ol.Feature>)|undefined))} */\n    (this.ngeoDebounce_(/** @type {function(?)} */ (this.typeaheadSource_.bind(this)), this.typeaheadDebounceDelay_, true));\n};\n\n/**\n * Search by name\n * @param {string} query Search query\n * @param {?Object} params Optional parameters\n * @return {!angular.$http.HttpPromise} promise of the Nominatim API request\n * @see https://wiki.openstreetmap.org/wiki/Nominatim#Search\n * @export\n */\nexports.prototype.search = function(query, params) {\n  let url = `${this.nominatimUrl_}search?q=${query}`;\n\n  params = params || {};\n  params = Object.assign({}, this.searchDefaultParams_, params);\n\n  // require JSON response\n  params['format'] = 'json';\n\n  if (params) {\n    url += '&';\n    const options = [];\n    for (const option of Object.keys(params)) {\n      options.push(`${option}=${params[option]}`);\n    }\n    url += options.join('&');\n  }\n\n  return this.$http_.get(url);\n};\n\n/**\n * Reverse Geocoding\n * @param {ol.Coordinate} coordinate Search coordinate in LonLat projection\n * @param {(Object|undefined)} params Optional parameters\n * @return {!angular.$http.HttpPromise} promise of the Nominatim API request\n * @see https://wiki.openstreetmap.org/wiki/Nominatim#Reverse_Geocoding\n * @export\n */\nexports.prototype.reverse = function(coordinate, params) {\n  let url = `${this.nominatimUrl_}reverse`;\n\n  params = Object.assign({}, params);\n\n  // coordinate\n  params['lon'] = coordinate[0];\n  params['lat'] = coordinate[1];\n\n  // require JSON response\n  params['format'] = 'json';\n\n  if (params) {\n    url += '?';\n    const options = [];\n    for (const option of Object.keys(params)) {\n      options.push(`${option}=${params[option]}`);\n    }\n    url += options.join('&');\n  }\n\n  return this.$http_.get(url);\n};\n\n/**\n * @param {string} query Search query\n * @param {function(Array.<BloodhoundDatum>)} syncResults Callback for synchronous execution, unused\n * @param {function(Array.<ngeox.NominatimSearchResult>)} asyncResults Callback for asynchronous execution\n * @private\n */\nexports.prototype.typeaheadSource_ = function(query, syncResults, asyncResults) {\n  const onSuccess_ = function(resp) {\n    /**\n     * Parses result response.\n     * @param {ngeox.NominatimSearchResponseResult} result Result\n     * @return {ngeox.NominatimSearchResult} Parsed result\n     */\n    const parse = function(result) {\n      return /** @type{ngeox.NominatimSearchResult} */({\n        coordinate: [result.lon, result.lat],\n        name: result.display_name\n      });\n    };\n    asyncResults(resp.data.map(parse));\n  };\n\n  const onError_ = function(resp) {\n    asyncResults([]);\n  };\n\n  this.search(query, {}).then(onSuccess_, onError_);\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoNominatimService', [\n  ngeoMiscDebounce.name\n]);\n\nexports.module.service('ngeoNominatimService', exports);\n\n\nexport default exports;\n","/**\n * @module ngeo.routing.RoutingService\n */\n/**\n * Service to provide access to a [Open Source Routing Machine (OSRM) backend](https://github.com/Project-OSRM/osrm-backend)\n * of version 5.8 and higher and its features.\n * @param {angular.$http} $http Angular http service.\n * @param {angular.$injector} $injector Main injector.\n * @constructor\n * @struct\n * @ngdoc service\n * @ngInject\n * @export\n * @ngname ngeoRoutingService\n */\nconst exports = function($http, $injector) {\n\n  /**\n   * @type {angular.$http}\n   * @private\n   */\n  this.$http_ = $http;\n\n  /**\n   * @type {ngeox.RoutingOptions}\n   * @private\n   */\n  this.routingOptions_ = $injector.has('ngeoRoutingOptions') ? $injector.get('ngeoRoutingOptions') : {};\n\n  /**\n   * URL for OSRM backend API.\n   * Defaults to demo backend.\n   * @type {string}\n   * @private\n   */\n  this.ngeoOsrmBackendUrl_ = this.routingOptions_.backendUrl || 'https://router.project-osrm.org/';\n\n  // the url is expected to end with a slash\n  if (this.ngeoOsrmBackendUrl_.substr(-1) !== '/') {\n    this.ngeoOsrmBackendUrl_ += '/';\n  }\n\n  /**\n   * Version of the protocol implemented by the service.\n   * see: https://github.com/Project-OSRM/osrm-backend/blob/master/docs/http.md\n   * @type {string}\n   * @private\n   */\n  this.protocolVersion_ = 'v1';\n\n};\n\n/**\n * Route request\n * @param {Array.<ol.Coordinate>} coordinates coordinates of the route (at least two!)\n * @param {?Object} config optional configuration\n * @return {!angular.$http.HttpPromise} promise of the OSRM API request\n */\nexports.prototype.getRoute = function(coordinates, config) {\n\n  config = config || {};\n\n  // Service\n  // see: https://github.com/Project-OSRM/osrm-backend/blob/master/docs/http.md#requests\n  if (!config['service']) {\n    config['service'] = 'route'; // default to route\n  }\n\n  // Mode of transportation,\n  // can be: car, bike, foot\n  // see: https://github.com/Project-OSRM/osrm-backend/blob/master/docs/http.md#requests\n  //\n  // As of version 5.8.0, OSRM (server) does not support multiple profiles simultaneously.\n  // This means the value actually does not matter.\n  if (!config['profile']) {\n    config['profile'] = 'car'; // default to car\n  }\n\n  // build request URL\n  let url = this.ngeoOsrmBackendUrl_;\n\n  // Common workaround to provide multiple profiles (since it is not supported yet)\n  // Every profile runs on its own instance.\n  if (config['instance']) {\n    url += `${config['instance']}/`;\n  }\n\n  url += `${config['service']}/${this.protocolVersion_}/${config['profile']}/`;\n\n  // [ [a,b] , [c,d] ] -> 'a,b;c,d'\n  const coordinateString = coordinates.map(c => c.join(',')).join(';');\n\n  url += coordinateString;\n\n  // look for route service options\n  // see: https://github.com/Project-OSRM/osrm-backend/blob/master/docs/http.md#route-service\n  if (config.options) {\n    url += '?';\n    const options = [];\n    for (const option of Object.keys(config.options)) {\n      options.push(`${option}=${config.options[option]}`);\n    }\n    url += options.join('&');\n  }\n\n  return this.$http_.get(url);\n};\n\n/**\n * Snaps a coordinate to the street network and returns the nearest match\n * @param {ol.Coordinate} coordinate coordinate to query\n * @param {?Object} config optional configuration\n * @return {!angular.$http.HttpPromise} promise of the OSRM API request\n * @see https://github.com/Project-OSRM/osrm-backend/blob/master/docs/http.md#nearest-service\n */\nexports.prototype.getNearest = function(coordinate, config) {\n  config = config || {};\n\n  // service is always nearest\n  config['service'] = 'nearest';\n\n  // Mode of transportation\n  // If used in combination with a getRoute request, choose the same profile.\n  if (!config['profile']) {\n    config['profile'] = 'car'; // default to car\n  }\n\n  // build request URL\n  let url = this.ngeoOsrmBackendUrl_;\n\n  // Common workaround to provide multiple profiles (since it is not supported yet)\n  // Every profile runs on its own instance.\n  if (config['instance']) {\n    url += `${config['instance']}/`;\n  }\n\n  url += `${config['service']}/${this.protocolVersion_}/${config['profile']}/`;\n\n  // [a,b] -> 'a,b'\n  const coordinateString = coordinate.join(',');\n  url += coordinateString;\n\n  // look for nearest service options\n  if (config.options) {\n    url += '?';\n    const options = [];\n    for (const option of Object.keys(config.options)) {\n      options.push(`${option}=${config.options[option]}`);\n    }\n    url += options.join('&');\n  }\n\n  return this.$http_.get(url);\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoRoutingService', [\n]);\n\nexports.module.service('ngeoRoutingService', exports);\n\n\nexport default exports;\n","/**\n * @module ngeo.routing.NominatimInputComponent\n */\nconst exports = {};\nimport ngeoSearchSearchDirective from 'ngeo/search/searchDirective.js';\nimport ngeoRoutingNominatimService from 'ngeo/routing/NominatimService.js';\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoRoutingNominatimInputComponent', [\n  ngeoSearchSearchDirective.module.name,\n  ngeoRoutingNominatimService.module.name\n]);\n\nexports.module.run(/* @ngInject */ ($templateCache) => {\n  $templateCache.put('ngeo/routing/nominatiminput', require('./nominatiminput.html'));\n});\n\n\nexports.module.value('ngeoRoutingNominatimInputComponentTemplateUrl',\n  /**\n   * @param {!angular.Attributes} $attrs Attributes.\n   * @return {string} Template URL.\n   */\n  ($attrs) => {\n    const templateUrl = $attrs['ngeoRoutingNominatimInputComponentTemplateUrl'];\n    return templateUrl !== undefined ? templateUrl :\n      'ngeo/routing/nominatiminput';\n  }\n);\n\n\n/**\n * @param {!angular.Attributes} $attrs Attributes.\n * @param {!function(!angular.Attributes): string} ngeoRoutingNominatimInputComponentTemplateUrl Template function.\n * @return {string} Template URL.\n * @ngInject\n */\nfunction ngeoRoutingNominatimInputComponentTemplateUrl($attrs, ngeoRoutingNominatimInputComponentTemplateUrl) {\n  return ngeoRoutingNominatimInputComponentTemplateUrl($attrs);\n}\n\n\n/**\n * @param {!angular.JQLite} $element Element.\n * @param {angular.$injector} $injector Main injector.\n * @param {!angular.Scope} $scope Scope.\n * @param {!ngeo.routing.NominatimService} ngeoNominatimService service for Nominatim\n * @constructor\n * @private\n * @ngInject\n * @ngdoc controller\n * @ngname NgeoNominatimInputController\n */\nexports.Controller = function($element, $injector, $scope, ngeoNominatimService) {\n\n  /**\n   * @type {!angular.JQLite}\n   * @private\n   */\n  this.element_ = $element;\n\n  /**\n   * @type {angular.Scope}\n   * @private\n   */\n  this.$scope_ = $scope;\n\n  /**\n   * @type {ngeo.routing.NominatimService}\n   * @export\n   */\n  this.ngeoNominatimService = ngeoNominatimService;\n\n  /**\n   * @type {(function(Object)|undefined)}\n   * @export\n   */\n  this.onSelect;\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.inputValue;\n\n  /**\n   * @type {TypeaheadOptions}\n   * @export\n   */\n  this.options = /** @type {TypeaheadOptions} */ ({\n  });\n\n  /**\n   * @type {Array.<TypeaheadDataset>}\n   * @export\n   */\n  this.datasets = [/** @type {TypeaheadDataset} */({\n    name: 'nominatim',\n    display: 'name',\n    source: this.ngeoNominatimService.typeaheadSourceDebounced\n  })];\n\n  /**\n   * @type {ngeox.SearchDirectiveListeners}\n   * @export\n   */\n  this.listeners = /** @type {ngeox.SearchDirectiveListeners} */({\n    select: this.select_.bind(this)\n  });\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.placeholder = '';\n\n};\n\n/**\n * @param {jQuery.Event} event Event.\n * @param {ngeox.NominatimSearchResult} suggestion Suggestion.\n * @param {TypeaheadDataset} dataset Dataset.\n * @this {ngeo.routing.NominatimInputComponent.Controller}\n * @private\n */\nexports.Controller.prototype.select_ = function(event, suggestion, dataset) {\n  if (this.onSelect) {\n    this.onSelect(suggestion);\n  }\n};\n\n/**\n * Input form field which provides Nominatim typeahead lookup using {@link ngeo.routing.NominatimService}.\n *\n * Example:\n *\n *     <ngeo-nominatim-input\n *         ngeo-nominatim-input-value=\"ctrl.label\"\n *         ngeo-nominatim-input-placeholder=\"type to search\"\n *         ngeo-nominatim-input-on-select=\"ctrl.onSelect\">\n *\n * Is used in in the partial of {@link ngeo.routingFeatureComponent}.\n *\n * See the [../examples/routing.html](../examples/routing.html) example to see it in action.\n *\n * @htmlAttribute {function(ngeox.NominatimSearchResult)} ngeo-nominatim-input-on-select\n *  Event fired when user selects a new suggestion.\n * @htmlAttribute {string} ngeo-nominatim-input-value\n *  Value of input field, will be set to the label of the search result.\n * @htmlAttribute {string} ngeo-nominatim-input-placeholder\n *  Placeholder text, when field is empty.\n * @ngdoc directive\n * @ngname ngeoNominatimInput\n */\nconst component = {\n  controller: exports.Controller,\n  bindings: {\n    'onSelect': '=?ngeoNominatimInputOnSelect',\n    'inputValue': '=?ngeoNominatimInputValue',\n    'placeholder': '@?ngeoNominatimInputPlaceholder'\n  },\n  templateUrl: ngeoRoutingNominatimInputComponentTemplateUrl\n};\n\nexports.module.component('ngeoNominatimInput', component);\n\n\nexport default exports;\n","/**\n * @module ngeo.routing.RoutingFeatureComponent\n */\nconst exports = {};\nimport ngeoRoutingNominatimService from 'ngeo/routing/NominatimService.js';\nimport ngeoRoutingNominatimInputComponent from 'ngeo/routing/NominatimInputComponent.js';\nimport * as olProj from 'ol/proj.js';\nimport olFeature from 'ol/Feature.js';\nimport olCollection from 'ol/Collection.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport olStyleText from 'ol/style/Text.js';\nimport olStyleFill from 'ol/style/Fill.js';\nimport olStyleStroke from 'ol/style/Stroke.js';\nimport olGeomPoint from 'ol/geom/Point.js';\nimport olInteractionModify from 'ol/interaction/Modify.js';\nimport olInteractionDraw from 'ol/interaction/Draw.js';\nimport 'ngeo/sass/font.scss';\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoRoutingFeatureComponent', [\n  ngeoRoutingNominatimService.module.name,\n  ngeoRoutingNominatimInputComponent.module.name\n]);\n\nexports.module.run(/* @ngInject */ ($templateCache) => {\n  $templateCache.put('ngeo/routing/routingfeature', require('./routingfeature.html'));\n});\n\n\nexports.module.value('ngeoRoutingFeatureTemplateUrl',\n  /**\n   * @param {!angular.Attributes} $attrs Attributes.\n   * @return {string} Template URL.\n   */\n  ($attrs) => {\n    const templateUrl = $attrs['ngeoRoutingFeatureTemplateUrl'];\n    return templateUrl !== undefined ? templateUrl :\n      'ngeo/routing/routingfeature';\n  }\n);\n\n/**\n * @param {!angular.Attributes} $attrs Attributes.\n * @param {!function(!angular.Attributes): string} ngeoRoutingFeatureTemplateUrl Template function.\n * @return {string} Template URL.\n * @ngInject\n */\nfunction ngeoRoutingFeatureTemplateUrl($attrs, ngeoRoutingFeatureTemplateUrl) {\n  return ngeoRoutingFeatureTemplateUrl($attrs);\n}\n\n\n/**\n * @param {!angular.Scope} $scope Angular scope.\n * @param {angular.$timeout} $timeout Angular timeout service.\n * @param {!angular.$q} $q Angular q service\n * @param {!ngeo.routing.NominatimService} ngeoNominatimService service for Nominatim\n * @constructor\n * @private\n * @ngInject\n * @ngdoc controller\n * @ngname NgeoRoutingFeatureController\n */\nexports.Controller = function($scope, $timeout, $q, ngeoNominatimService) {\n\n  /**\n   * @type {!angular.Scope}\n   * @private\n   */\n  this.scope_ = $scope;\n\n  /**\n   * @type {angular.$timeout}\n   * @private\n   */\n  this.timeout_ = $timeout;\n\n  /**\n   * @type {angular.$q}\n   * @private\n   */\n  this.$q_ = $q;\n\n  /**\n   * @type {ngeo.routing.NominatimService}\n   * @private\n   */\n  this.ngeoNominatimService_ = ngeoNominatimService;\n\n  /**\n   * @type {ol.Map}\n   * @private\n   */\n  this.map;\n\n  /**\n   * @type {ol.Feature}\n   * @export\n   */\n  this.feature;\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.featureLabel = '';\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.fillColor;\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.strokeColor;\n\n  /**\n   * @type {function(ol.Feature)}\n   * @export\n   */\n  this.onChange;\n\n  /**\n   * @type {ol.Collection}\n   * @private\n   */\n  this.vectorFeatures_ = new olCollection();\n\n  /**\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.vectorSource_ = new olSourceVector({\n    features: this.vectorFeatures_\n  });\n\n  /**\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.vectorLayer_ = new olLayerVector({\n    source: this.vectorSource_,\n    style: (function(feature, resolution) {\n      return [new olStyleStyle({\n        text: new olStyleText({\n          fill: new olStyleFill({\n            color: this.fillColor || '#000000'\n          }),\n          font: 'normal 30px FontAwesome',\n          offsetY: -15,\n          stroke: new olStyleStroke({\n            width: 3,\n            color: this.strokeColor || '#000000'\n          }),\n          text: '\\uf041'\n        })\n      })];\n    }).bind(this)\n  });\n\n  /**\n   * Interaction for moving start and end.\n   * @type {ol.interaction.Modify}\n   * @private\n   */\n  this.modifyFeature_ = new olInteractionModify({\n    features: this.vectorFeatures_\n  });\n\n  /**\n   * @type {ol.interaction.Draw}\n   * @private\n   */\n  this.draw_ = null;\n\n  /**\n   * @param {ngeox.NominatimSearchResult} selected Selected result.\n   * @export\n   */\n  this.onSelect = this.onSelect_.bind(this);\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.errorMessage = '';\n};\n\nexports.Controller.prototype.$onInit = function() {\n  this.map.addLayer(this.vectorLayer_);\n\n  // setup modify interaction\n  this.modifyFeature_.setActive(true);\n  this.map.addInteraction(this.modifyFeature_);\n\n  this.modifyFeature_.on('modifyend', (event) => {\n    const feature = event.features.getArray()[0];\n    this.vectorSource_.clear();\n    this.snapFeature_(feature);\n  });\n\n  this.scope_.$watch(\n    () => this.feature,\n    (newVal, oldVal) => {\n      if (newVal) {\n        this.onFeatureChange_();\n      }\n      if (newVal === null) {\n        this.vectorSource_.clear();\n        this.featureLabel = '';\n      }\n    }\n  );\n};\n\n/**\n * Cleanup, mostly relevant for vias.\n */\nexports.Controller.prototype.$onDestroy = function() {\n  this.map.removeLayer(this.vectorLayer_);\n  this.modifyFeature_.setActive(false);\n  this.map.removeInteraction(this.modifyFeature_);\n};\n\n/**\n * @export\n */\nexports.Controller.prototype.set = function() {\n  if (this.draw_) {\n    this.map.removeInteraction(this.draw_);\n  }\n\n  this.draw_ = new olInteractionDraw({\n    features: this.vectorFeatures_,\n    type: /** @type {ol.geom.GeometryType} */ ('Point')\n  });\n\n  this.draw_.on('drawstart', () => {\n    if (this.feature) {\n      this.vectorSource_.removeFeature(this.feature);\n    }\n  });\n\n  this.draw_.on('drawend', (event) => {\n    if (this.draw_) {\n      this.map.removeInteraction(this.draw_);\n    }\n    this.snapFeature_(event.feature);\n    this.modifyFeature_.setActive(true);\n  });\n\n  this.modifyFeature_.setActive(false);\n  this.map.addInteraction(this.draw_);\n};\n\n/**\n * @param {ol.Coordinate} coordinate LonLat coordinate.\n * @param {string} label Feature name/label.\n * @private\n */\nexports.Controller.prototype.setFeature_ = function(coordinate, label) {\n  const transformedCoordinate = olProj.fromLonLat(coordinate, this.map.getView().getProjection());\n  if (label === '') {\n    label = transformedCoordinate.join('/');\n  }\n  this.feature = new olFeature({\n    geometry: new olGeomPoint(transformedCoordinate),\n    name: label\n  });\n};\n\nexports.Controller.prototype.onFeatureChange_ = function() {\n  // update label\n  this.featureLabel = /** @type{string} */(this.feature.get('name') || '');\n\n  //update vector source\n  this.vectorSource_.clear();\n  this.vectorSource_.addFeature(this.feature);\n\n  // notify others\n  if (this.onChange) {\n    this.timeout_(() => {\n      this.onChange(this.feature);\n    });\n  }\n};\n\n/**\n * @param {ngeox.NominatimSearchResult} selected Selected result.\n * @private\n */\nexports.Controller.prototype.onSelect_ = function(selected) {\n  const coordinate = selected.coordinate.map(parseFloat);\n  const label = selected.label;\n  this.setFeature_(coordinate, label);\n  const newCoordinates = /** @type{ol.geom.Point} */(this.feature.getGeometry()).getCoordinates();\n  this.map.getView().setCenter(newCoordinates);\n};\n\n/**\n * Snaps a feature to the street network using the getNearest\n * function of the routing service. Replaces the feature.\n * @param {ol.Feature} feature Feature to snap\n * @private\n */\nexports.Controller.prototype.snapFeature_ = function(feature) {\n  const coord = this.getLonLatFromPoint_(feature);\n  const config = {};\n\n  const onSuccess = (function(resp) {\n    const lon = parseFloat(resp['data']['lon']);\n    const lat = parseFloat(resp['data']['lat']);\n    const coordinate = [lon, lat];\n    const label = resp['data']['display_name'];\n    this.setFeature_(coordinate, label);\n  }).bind(this);\n\n  const onError = (function(resp) {\n    this.errorMessage = 'Error: nominatim server not responding.';\n    console.log(resp);\n  }).bind(this);\n\n  this.$q_.when(this.ngeoNominatimService_.reverse(coord, config))\n    .then(onSuccess.bind(this), onError.bind(this));\n};\n\n/**\n * Converts feature point into LonLat coordinate.\n * @param {ol.Feature} point Feature point to convert\n * @return {ol.Coordinate} LonLat coordinate\n * @private\n */\nexports.Controller.prototype.getLonLatFromPoint_ = function(point) {\n  const geometry = /** @type {ol.geom.Point} */ (point.getGeometry());\n  const coords = geometry.getCoordinates();\n  const projection = this.map.getView().getProjection();\n  return olProj.toLonLat(coords, projection);\n};\n\n\n/**\n * Provides a text input and draw interaction to allow a user to create and modify a ol.Feature (point geometry).\n *\n * The text input is provided by {@link ngeo.nominatimInputComponent} and includes Nominatim search.\n *\n * Example:\n *\n *     <ngeo-routing-feature\n *         ngeo-routing-feature-map=\"ctrl.map\"\n *         ngeo-routing-feature-feature=\"ctrl.feature\"\n *         ngeo-routing-feature-fill-color=\"#6BE62E\"\n *         ngeo-routing-feature-stroke-color=\"#4CB01E\"\n *         ngeo-routing-feature-on-change=\"ctrl.handleChange\">\n *\n * Is used in in the partial of {@link ngeo.routingComponent}.\n *\n * See the [../examples/routing.html](../examples/routing.html) example for a usage sample.\n *\n * @htmlAttribute {ol.Map} ngeo-routing-feature-map The map.\n * @htmlAttribute {ol.Feature} ngeo-routing-feature-feature The feature.\n * @htmlAttribute {string} ngeo-routing-feature-fill-color The marker fill color.\n * @htmlAttribute {string} ngeo-routing-feature-stroke-color The marker stroke color.\n * @htmlAttribute {function(ol.Feature)} ngeo-routing-feature-on-change Event fired when feature changes.\n * @ngdoc directive\n * @ngname ngeoRoutingFeature\n */\nexports.component_ = {\n  controller: exports.Controller,\n  bindings: {\n    'map': '<ngeoRoutingFeatureMap',\n    'feature': '=ngeoRoutingFeatureFeature',\n    'fillColor': '<?ngeoRoutingFeatureFillColor',\n    'strokeColor': '<?ngeoRoutingFeatureStrokeColor',\n    'onChange': '=?ngeoRoutingFeatureOnChange'\n  },\n  templateUrl: ngeoRoutingFeatureTemplateUrl\n};\n\nexports.module.component('ngeoRoutingFeature', exports.component_);\n\n\nexport default exports;\n","/**\n * @module ngeo.routing.RoutingComponent\n */\nconst exports = {};\nimport ngeoMiscDebounce from 'ngeo/misc/debounce.js';\nimport ngeoMiscFilters from 'ngeo/misc/filters.js';\nimport ngeoRoutingNominatimService from 'ngeo/routing/NominatimService.js';\nimport ngeoRoutingRoutingService from 'ngeo/routing/RoutingService.js';\nimport ngeoRoutingRoutingFeatureComponent from 'ngeo/routing/RoutingFeatureComponent.js';\nimport olFormatGeoJSON from 'ol/format/GeoJSON.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport olStyleFill from 'ol/style/Fill.js';\nimport olStyleStroke from 'ol/style/Stroke.js';\nimport * as olProj from 'ol/proj.js';\nimport olFeature from 'ol/Feature.js';\nimport olGeomLineString from 'ol/geom/LineString.js';\nimport 'ngeo/sass/font.scss';\n\nexports.module = angular.module('ngeoRoutingComponent', [\n  ngeoMiscDebounce.name,\n  ngeoMiscFilters.name,\n  ngeoRoutingNominatimService.module.name,\n  ngeoRoutingRoutingService.module.name,\n  ngeoRoutingRoutingFeatureComponent.module.name\n]);\n\n\nexports.module.run(/* @ngInject */ ($templateCache) => {\n  $templateCache.put('ngeo/routing/routing', require('./routing.html'));\n});\n\n\nexports.module.value('ngeoRoutingTemplateUrl',\n  /**\n   * @param {!angular.Attributes} $attrs Attributes.\n   * @return {string} Template URL.\n   */\n  ($attrs) => {\n    const templateUrl = $attrs['ngeoRoutingTemplateUrl'];\n    return templateUrl !== undefined ? templateUrl :\n      'ngeo/routing/routing';\n  }\n);\n\n\n/**\n * @param {!angular.Attributes} $attrs Attributes.\n * @param {!function(!angular.Attributes): string} ngeoRoutingTemplateUrl Template function.\n * @return {string} Template URL.\n * @ngInject\n */\nfunction ngeoRoutingTemplateUrl($attrs, ngeoRoutingTemplateUrl) {\n  return ngeoRoutingTemplateUrl($attrs);\n}\n\n\n/**\n * The controller for the routing directive.\n * @param {angular.$injector} $injector Main injector.\n * @param {!angular.Scope} $scope Scope.\n * @param {!ngeo.routing.RoutingService} ngeoRoutingService service for OSRM routing\n * @param {!ngeo.routing.NominatimService} ngeoNominatimService service for Nominatim\n * @param {!angular.$q} $q Angular q service\n * @param {ngeox.miscDebounce} ngeoDebounce ngeo Debounce service.\n * @constructor\n * @private\n * @ngInject\n * @ngdoc controller\n * @ngname NgeoRoutingController\n */\nexports.Controller = function($injector, $scope, ngeoRoutingService, ngeoNominatimService, $q, ngeoDebounce) {\n\n  /**\n   * @type {angular.Scope}\n   * @private\n   */\n  this.$scope_ = $scope;\n\n  /**\n   * @type {ngeo.routing.RoutingService}\n   * @private\n   */\n  this.ngeoRoutingService_ = ngeoRoutingService;\n\n  /**\n   * @type {ngeo.routing.NominatimService}\n   * @private\n   */\n  this.ngeoNominatimService_ = ngeoNominatimService;\n\n  /**\n   * @type {ngeox.RoutingOptions}\n   * @private\n   */\n  this.routingOptions_ = $injector.has('ngeoRoutingOptions') ? $injector.get('ngeoRoutingOptions') : {};\n\n  /**\n   * Available routing profiles.\n   * Example: [\n   *            {\n   *              label: 'Car', // used as label in the UI\n   *              profile: 'routed-car' // used as part of the query\n   *            }\n   *          ]\n   * @type {Array<ngeox.RoutingProfile>}\n   * @export\n   */\n  this.routingProfiles = this.routingOptions_.profiles || [];\n\n  /**\n   * @type {?ngeox.RoutingProfile}\n   * @export\n   */\n  this.selectedRoutingProfile = this.routingProfiles.length > 0 ? this.routingProfiles[0] : null;\n\n  $scope.$watch(\n    () => this.selectedRoutingProfile,\n    this.calculateRoute.bind(this)\n  );\n\n  /**\n   * @type {angular.$q}\n   * @private\n   */\n  this.$q_ = $q;\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map;\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.errorMessage = '';\n\n  /**\n   * @type {ol.Feature}\n   * @export\n   */\n  this.startFeature_ = null;\n\n  /**\n   * @type {ol.Feature}\n   * @export\n   */\n  this.targetFeature_ = null;\n\n  /**\n   * @type {Array.<ngeox.RoutingVia>}\n   * @export\n   */\n  this.viaArray = [];\n\n  /**\n   * @type {Object<string, string>}\n   * @export\n   */\n  this.colors = {\n    'start.fill': '#6BE62E',\n    'start.stroke': '#4CB01E',\n    'destination.fill': '#FF3E13',\n    'destination.stroke': '#CD3412',\n    'via.fill': '#767676',\n    'via.stroke': '#000000'\n  };\n\n  /**\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.routeSource_ = new olSourceVector({\n    features: []\n  });\n\n  /**\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.routeLayer_ = new olLayerVector({\n    source: this.routeSource_,\n    style: new olStyleStyle({\n      fill: new olStyleFill({\n        color: 'rgba(16, 112, 29, 0.6)'\n      }),\n      stroke: new olStyleStroke({\n        color: 'rgba(16, 112, 29, 0.6)',\n        width: 5\n      })\n    })\n  });\n\n  /**\n   * Distance of route in meters\n   * @type {number}\n   * @export\n   */\n  this.routeDistance = 0;\n\n  /**\n   * Duration of route in minutes.\n   * @type {?number}\n   * @export\n   */\n  this.routeDuration = null;\n\n  /**\n   * @type {RegExp}\n   * @private\n   */\n  this.regexIsFormattedCoord = /\\d+\\.\\d+\\/\\d+\\.\\d+/;\n\n  /**\n   * @type {ol.interaction.Draw}\n   * @private\n   */\n  this.draw_ = null;\n\n  const debounceDelay = 200; // in milliseconds\n\n  /**\n   * Debounced because in some cases (reverse route) multiple changes are done\n   * at once and spam this function.\n   * @export\n   * @type {function()}\n   */\n  this.handleChange = /** @type {function()} */\n          (ngeoDebounce(\n            /** @type {function(?)} */ (this.calculateRoute.bind(this)),\n            debounceDelay,\n            true));\n};\n\n/**\n * Init the controller\n */\nexports.Controller.prototype.$onInit = function() {\n  this.map.addLayer(this.routeLayer_);\n};\n\n/**\n * Clears start, end and vias. Removes features from map.\n * @export\n */\nexports.Controller.prototype.clearRoute = function() {\n  this.startFeature_ = null;\n  this.targetFeature_ = null;\n  this.viaArray = [];\n  this.routeDistance = 0;\n  this.routeDuration = null;\n  this.routeSource_.clear();\n  this.errorMessage = '';\n};\n\n/**\n * Converts feature point into LonLat coordinate.\n * @param {ol.Feature} point Feature point to convert\n * @return {ol.Coordinate} LonLat coordinate\n * @private\n */\nexports.Controller.prototype.getLonLatFromPoint_ = function(point) {\n  const geometry = /** @type {ol.geom.Point} */ (point.getGeometry());\n  const coords = geometry.getCoordinates();\n  const projection = this.map.getView().getProjection();\n  return olProj.toLonLat(coords, projection);\n};\n\n/**\n * Flip start and target and re-calculate route.\n * @export\n */\nexports.Controller.prototype.reverseRoute = function() {\n  // swap start and target\n  const tmpFeature = this.startFeature_;\n  this.startFeature_ = this.targetFeature_;\n  this.targetFeature_ = tmpFeature;\n\n  // reverse vias\n  this.viaArray = this.viaArray.reverse();\n\n  // recalculation is done by the debounced handleChange\n};\n\n/**\n * @param {Object} route Routes of OSRM response\n * @returns {Array<ol.Feature>} parsed route features\n * @private\n */\nexports.Controller.prototype.parseRoute_ = function(route) {\n  let parsedRoutes = [];\n  const format = new olFormatGeoJSON();\n  const formatConfig = {\n    dataProjection: 'EPSG:4326',\n    featureProjection: this.map.getView().getProjection()\n  };\n  // if there are is useful \"legs\" data, parse this\n  if (route.legs) {\n    parsedRoutes = route.legs.map(leg => leg.steps.map(step => new olFeature({geometry: format.readGeometry(step.geometry, formatConfig)})));\n    // flatten\n    parsedRoutes = [].concat(...parsedRoutes);\n  } else if (route.geometry) {\n  // otherwise parse (overview) geometry\n    parsedRoutes.push(new olFeature({geometry: format.readGeometry(route.geometry, formatConfig)}));\n  }\n  return parsedRoutes;\n};\n\n/**\n * @export\n */\nexports.Controller.prototype.calculateRoute = function() {\n  if (this.startFeature_ && this.targetFeature_) {\n    // remove rendered routes\n    this.routeSource_.clear();\n\n    const coordFrom = this.getLonLatFromPoint_(this.startFeature_);\n    const coordTo = this.getLonLatFromPoint_(this.targetFeature_);\n    const vias = this.viaArray.filter(via => via.feature !== null).map(via => this.getLonLatFromPoint_(via.feature));\n    const route = [coordFrom].concat(vias, [coordTo]);\n\n    const onSuccess_ = (function(resp) {\n      const features = this.parseRoute_(resp.data.routes[0]);\n      if (features.length === 0) {\n        console.log('No route or not supported format.');\n        return;\n      }\n      this.routeSource_.addFeatures(features);\n\n      // recenter map on route\n      this.map.getView().fit(this.routeSource_.getExtent());\n\n      this.routeDistance = parseInt(resp.data.routes[0].distance, 10);\n      this.routeDuration = resp.data.routes[0].duration;\n\n      // get first and last coordinate of route\n      const startRoute = /** @type{ol.geom.LineString} */(features[0].getGeometry()).getCoordinateAt(0);\n      const endRoute = /** @type{ol.geom.LineString} */(features[features.length - 1].getGeometry()).getCoordinateAt(1);\n\n      // build geometries to connect route to start and end point of query\n      const startToRoute = [/** @type {ol.geom.Point} */(this.startFeature_.getGeometry()).getCoordinates(), startRoute];\n      const routeToEnd = [endRoute, /** @type {ol.geom.Point} */(this.targetFeature_.getGeometry()).getCoordinates()];\n      const routeConnections = [\n        new olFeature(new olGeomLineString(startToRoute)),\n        new olFeature(new olGeomLineString(routeToEnd))\n      ];\n\n      // add them to the source\n      this.routeSource_.addFeatures(routeConnections);\n    }).bind(this);\n\n    const onError_ = (function(resp) {\n      this.errorMessage = 'Error: routing server not responding.';\n      console.log(resp);\n    }).bind(this);\n\n    const options = {};\n    options['steps'] = true;\n    options['overview'] = false;\n    options['geometries'] = 'geojson';\n\n    const config = {};\n    config['options'] = options;\n\n    if (this.selectedRoutingProfile) {\n      config['instance'] = this.selectedRoutingProfile['profile'];\n    }\n\n    this.$q_.when(this.ngeoRoutingService_.getRoute(route, config))\n      .then(onSuccess_.bind(this), onError_.bind(this));\n  }\n};\n\n/**\n * @export\n */\nexports.Controller.prototype.addVia = function() {\n  this.viaArray.push(/** @type{ngeox.RoutingVia} */({\n    feature: null,\n    onSelect: null\n  }));\n};\n\n/**\n * @param {number} index Array index.\n * @export\n */\nexports.Controller.prototype.deleteVia = function(index) {\n  if (this.viaArray.length > index) {\n    this.viaArray.splice(index, 1);\n    this.calculateRoute();\n  }\n};\n\n\nexports.module.component('ngeoRouting', {\n  controller: exports.Controller,\n  bindings: {\n    'map': '<ngeoRoutingMap'\n  },\n  templateUrl: ngeoRoutingTemplateUrl\n});\n\n\nexport default exports;\n","/**\n * @module ngeo.routing.module\n */\nimport ngeoRoutingRoutingComponent from 'ngeo/routing/RoutingComponent.js';\n\nimport './routing.scss';\n\n/**\n * @type {angular.Module}\n */\nconst exports = angular.module('ngeoRoutingModule', [\n  ngeoRoutingRoutingComponent.module.name\n]);\n\n\nexport default exports;\n","/**\n * @module app.desktop_alt.Controller\n */\n/**\n * Application entry point.\n *\n * This file includes `goog.require`'s for all the components/directives used\n * by the HTML page and the controller to provide the configuration.\n */\n\nimport './sass/main.scss';\nimport gmfControllersAbstractDesktopController from 'gmf/controllers/AbstractDesktopController.js';\nimport appBase from '../appmodule.js';\nimport gmfImportModule from 'gmf/import/module.js';\nimport ngeoGooglestreetviewModule from 'ngeo/googlestreetview/module.js';\nimport ngeoRoutingModule from 'ngeo/routing/module.js';\nimport ngeoProjEPSG2056 from 'ngeo/proj/EPSG2056.js';\nimport ngeoProjEPSG21781 from 'ngeo/proj/EPSG21781.js';\nimport * as olBase from 'ol/index.js';\nimport Raven from 'raven-js/src/raven.js';\nimport RavenPluginsAngular from 'raven-js/plugins/angular.js';\n\nif (!window.requestAnimationFrame) {\n  alert('Your browser is not supported, please update it or use another one. You will be redirected.\\n\\n'\n    + 'Votre navigateur n\\'est pas supporté, veuillez le mettre à jour ou en utiliser un autre. Vous allez être redirigé.\\n\\n'\n    + 'Ihr Browser wird nicht unterstützt, bitte aktualisieren Sie ihn oder verwenden Sie einen anderen. Sie werden weitergeleitet.');\n  window.location = 'http://geomapfish.org/';\n}\n\n/**\n * @param {angular.Scope} $scope Scope.\n * @param {angular.$injector} $injector Main injector.\n * @param {ngeo.misc.File} ngeoFile The file service.\n * @param {gettext} gettext The gettext service\n * @param {angular.$q} $q Angular $q.\n * @constructor\n * @extends {gmf.controllers.AbstractDesktopController}\n * @ngInject\n * @export\n */\nconst exports = function($scope, $injector, ngeoFile, gettext, $q) {\n  gmfControllersAbstractDesktopController.call(this, {\n    srid: 21781,\n    mapViewConfig: {\n      center: [632464, 185457],\n      zoom: 3,\n      resolutions: [250, 100, 50, 20, 10, 5, 2, 1, 0.5, 0.25, 0.1, 0.05]\n    }\n  }, $scope, $injector);\n\n  /**\n   * @type {Array.<string>}\n   * @export\n   */\n  this.searchCoordinatesProjections = [ngeoProjEPSG21781, ngeoProjEPSG2056, 'EPSG:4326'];\n\n  /**\n   * @type {number}\n   * @export\n   */\n  this.searchDelay = 500;\n\n  /**\n   * @type {boolean}\n   * @export\n   */\n  this.showInfobar = true;\n\n  /**\n   * @type {!Array.<number>}\n   * @export\n   */\n  this.scaleSelectorValues = [250000, 100000, 50000, 20000, 10000, 5000, 2000, 1000, 500, 250, 100, 50];\n\n  /**\n   * @type {Array.<string>}\n   * @export\n   */\n  this.elevationLayers = ['srtm'];\n\n  /**\n   * @type {Object.<string, gmfx.ProfileLineConfiguration>}\n   * @export\n   */\n  this.profileLinesconfiguration = {\n    'srtm': {}\n  };\n\n  /**\n   * @type {Array.<gmfx.MousePositionProjection>}\n   * @export\n   */\n  this.mousePositionProjections = [{\n    code: 'EPSG:2056',\n    label: 'CH1903+ / LV95',\n    filter: 'ngeoNumberCoordinates::{x}, {y} m'\n  }, {\n    code: 'EPSG:21781',\n    label: 'CH1903 / LV03',\n    filter: 'ngeoNumberCoordinates::{x}, {y} m'\n  }, {\n    code: 'EPSG:4326',\n    label: 'WGS84',\n    filter: 'ngeoDMSCoordinates:2'\n  }];\n\n  /**\n   * @type {gmfx.GridMergeTabs}\n   * @export\n   */\n  this.gridMergeTabs = {\n    'OSM_time_merged': ['osm_time', 'osm_time2'],\n    'transport (merged)': ['fuel', 'parking'],\n    'Learning [merged]': ['information', 'bus_stop']\n  };\n\n  // Allow angular-gettext-tools to collect the strings to translate\n  /** @type {angularGettext.Catalog} */\n  const gettextCatalog = $injector.get('gettextCatalog');\n  gettextCatalog.getString('OSM_time_merged');\n  gettextCatalog.getString('OSM_time (merged)');\n  gettextCatalog.getString('Learning [merged]');\n  gettextCatalog.getString('Add a theme');\n  gettextCatalog.getString('Add a sub theme');\n  gettextCatalog.getString('Add a layer');\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.bgOpacityOptions = 'Test aus Olten';\n\n  if ($injector.has('sentryUrl')) {\n    const options = $injector.has('sentryOptions') ? $injector.get('sentryOptions') : undefined;\n    const raven = new Raven();\n    raven.config($injector.get('sentryUrl'), options)\n      .addPlugin(RavenPluginsAngular)\n      .install();\n  }\n};\n\nolBase.inherits(exports, gmfControllersAbstractDesktopController);\n\n\n/**\n * @param {jQuery.Event} event keydown event.\n * @export\n */\nexports.prototype.onKeydown = function(event) {\n  if (event.ctrlKey && event.key === 'p') {\n    this.printPanelActive = true;\n    event.preventDefault();\n  }\n};\n\n\nexports.module = angular.module('Appdesktop_alt', [\n  appBase.module.name,\n  gmfControllersAbstractDesktopController.module.name,\n  gmfImportModule.name,\n  ngeoRoutingModule.name,\n  ngeoGooglestreetviewModule.name,\n]);\n\nexports.module.controller('AlternativeDesktopController', exports);\n\nexport default exports;\n"],"sourceRoot":""}