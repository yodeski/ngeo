!function(e){function t(t){for(var o,i,s=t[0],l=t[1],u=t[2],p=0,d=[];p<s.length;p++)i=s[p],n[i]&&d.push(n[i][0]),n[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);d.length;)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,s=1;s<r.length;s++){var l=r[s];0!==n[l]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var o={},n={32:0},a=[];function i(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=o,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;a.push([488,0]),r()}({488:function(e,t,r){r(53),r(54),e.exports=r(527)},489:function(e,t){},527:function(e,t,r){"use strict";r.r(t);r(489);var o=r(1),n=r(59),a={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"},i=r(100),s=r(19),l=r(15),u=r(77),c=r(8),p=r(71),d=r(298),g=r(29),h=r(40),y=r(88),f=r(103),_=r(105),v=r(27),m=r(28),S=r(73),C=r(34),w=r(35),P=r(14),b=r(117),L=function e(t){d.a.call(this);var r=void 0!==t?t:{};this.accuracy_=void 0!==r.accuracy?r.accuracy:e.ACCURACY_,this.encodeStyles_=void 0===r.encodeStyles||r.encodeStyles,this.propertiesFunction_=void 0!==r.properties?r.properties:e.defaultPropertiesFunction_,this.setStyle_=void 0===r.setStyle||r.setStyle,this.prevX_=0,this.prevY_=0,e.LegacyProperties_=void 0!==r.propertiesType&&r.propertiesType,this.defaultValues_=void 0!==r.defaultValues?r.defaultValues:{}};s.c(L,d.a),L.StyleTypes_={LineString:a.LINE_STRING,Point:a.POINT,Polygon:a.POLYGON,MultiLineString:a.LINE_STRING,MultiPoint:a.POINT,MultiPolygon:a.POLYGON},L.LegacyProperties_={},L.prototype.readFeature,L.prototype.readFeatures,L.prototype.readGeometry,L.prototype.writeFeature,L.prototype.writeFeatures,L.prototype.writeGeometry,L.CHAR64_=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz",L.ACCURACY_=.1,L.defaultPropertiesFunction_=function(e){return e.getProperties()},L.encodeSignedNumber_=function(e){var t=e<<1;return e<0&&(t=~t),L.encodeNumber_(t)},L.encodeNumber_=function(e){for(var t="";e>=32;)t+=L.CHAR64_.charAt(32|31&e),e>>=5;return t+=L.CHAR64_.charAt(e)},L.encodeStyles_=function(e,t,r){var n=L.StyleTypes_[t];o.a.assert(void 0!==n);for(var i=0;i<e.length;++i){var s=e[i],l=s.getFill(),u=s.getImage(),c=s.getStroke(),p=s.getText();n==a.POLYGON?null!==l&&L.encodeStylePolygon_(l,c,r):n==a.LINE_STRING?null!==c&&L.encodeStyleLine_(c,r):n==a.POINT&&null!==u&&L.encodeStylePoint_(u,r),null!==p&&L.encodeStyleText_(p,r)}},L.encodeStyleLine_=function(e,t){L.encodeStyleStroke_(e,t)},L.encodeStylePoint_=function(e,t){if(e instanceof S.a){var r=e.getRadius();t.length>0&&t.push("'"),t.push(encodeURIComponent("pointRadius*"+r));var o=e.getFill();null!==o&&L.encodeStyleFill_(o,t);var n=e.getStroke();null!==n&&L.encodeStyleStroke_(n,t)}},L.encodeStylePolygon_=function(e,t,r){L.encodeStyleFill_(e,r),null!==t&&L.encodeStyleStroke_(t,r)},L.encodeStyleFill_=function(e,t,r){var n=void 0!==r?r:"fillColor",a=e.getColor();if(null!==a){o.a.assert(Array.isArray(a),"only supporting fill colors");var s=u.a(a);o.a.assert(Array.isArray(s),"fill color must be an array");var l=i.a.rgbArrayToHex(s);t.length>0&&t.push("'"),t.push(encodeURIComponent(n+"*"+l))}},L.encodeStyleStroke_=function(e,t){var r=e.getColor();if(null!==r){o.a.assert(Array.isArray(r));var n=u.a(r);o.a.assert(Array.isArray(n),"only supporting stroke colors");var a=i.a.rgbArrayToHex(n);t.length>0&&t.push("'"),t.push(encodeURIComponent("strokeColor*"+a))}var s=e.getWidth();void 0!==s&&(t.length>0&&t.push("'"),t.push(encodeURIComponent("strokeWidth*"+s)))},L.encodeStyleText_=function(e,t){var r=e.getFont();if(void 0!==r){var o=r.split(" ");o.length>=3&&(t.length>0&&t.push("'"),t.push(encodeURIComponent("fontSize*"+o[1])))}var n=e.getFill();null!==n&&L.encodeStyleFill_(n,t,"fontColor")},L.readLineStringGeometry_=function(e){o.a.assert("l("===e.substring(0,2)),o.a.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);return new h.a(t,g.a.XY)},L.readMultiLineStringGeometry_=function(e){o.a.assert("L("===e.substring(0,2)),o.a.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split("'"),a=0,i=n.length;a<i;++a)t=this.decodeCoordinates_(n[a],t),r[a]=t.length;return new y.a(t,g.a.XY,r)},L.readPointGeometry_=function(e){o.a.assert("p("===e.substring(0,2)),o.a.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);return o.a.assert(2===t.length),new v.a(t,g.a.XY)},L.readMultiPointGeometry_=function(e){o.a.assert("P("===e.substring(0,2)),o.a.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);return new f.a(t,g.a.XY)},L.readPolygonGeometry_=function(e){o.a.assert("a("===e.substring(0,2)),o.a.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split("'"),a=0,i=n.length;a<i;++a){var s=(t=this.decodeCoordinates_(n[a],t)).length;0===a?(t[s++]=t[0],t[s++]=t[1]):(t[s++]=t[r[a-1]],t[s++]=t[r[a-1]+1]),r[a]=s}return new m.b(t,g.a.XY,r)},L.readMultiPolygonGeometry_=function(e){o.a.assert("A("===e.substring(0,2)),o.a.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split(")("),a=0,i=n.length;a<i;++a)for(var s=n[a].split("'"),l=r[a]=[],u=0,c=s.length;u<c;++u){var p=(t=this.decodeCoordinates_(s[u],t)).length;0===u?(t[p++]=t[0],t[p++]=t[1]):(t[p++]=t[l[u-1]],t[p++]=t[l[u-1]+1]),l[u]=p}return new _.a(t,g.a.XY,r)},L.setStyleInFeature_=function(e,t){if(""!=e){var r=L.getStyleProperties_(e,t),o=r.fillColor,n=r.fontSize,a=r.fontColor,i=r.pointRadius,s=r.strokeColor,l=r.strokeWidth,u=null;void 0!==o&&(u=new C.a({color:o}));var c=null;void 0!==s&&void 0!==l&&(c=new w.a({color:s,width:l}));var p=null;void 0!==i&&(p=new S.a({radius:i,fill:u,stroke:c}),u=c=null);var d=null;void 0!==n&&void 0!==a&&(d=new b.a({font:n+" sans-serif",fill:new C.a({color:a})}));var g=new P.c({fill:u,image:p,stroke:c,text:d});t.setStyle(g)}},L.setStyleProperties_=function(e,t){var r=L.getStyleProperties_(e,t),o=t.getGeometry();if(o instanceof v.a?r.isLabel||r[n.a.IS_TEXT]?(delete r.strokeColor,delete r.fillColor):(delete r.fontColor,delete r.fontSize):(delete r.fontColor,o instanceof h.a&&(delete r.fillColor,delete r.fillOpacity)),r.fontSize){var a=parseFloat(r.fontSize);-1!==r.fontSize.indexOf("px")&&(a=Math.round(a/1.333333)),r.fontSize=a}var i={};for(var s in r){var l=r[s];L.LegacyProperties_[s]?i[L.LegacyProperties_[s]]=l:i[s]=l}t.setProperties(i)},L.castValue_=function(e,t){var r=[n.a.ANGLE,n.a.OPACITY,n.a.SIZE,n.a.STROKE,"pointRadius","strokeWidth"],o=[n.a.IS_CIRCLE,n.a.IS_RECTANGLE,n.a.IS_TEXT,n.a.SHOW_MEASURE,n.a.SHOW_LABEL,"isCircle","isRectangle","isLabel","showMeasure","showLabel"];return c.f(r,e)?+t:c.f(o,e)?"true"===t:t},L.getStyleProperties_=function(e,t){for(var r=e.split("'"),n={},a=0;a<r.length;++a){var i=decodeURIComponent(r[a]).split("*");o.a.assert(2===i.length);var s=i[0],l=i[1];n[s]=L.castValue_(s,l)}return n},L.writeLineStringGeometry_=function(e){o.a.assertInstanceof(e,h.a);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"l("+this.encodeCoordinates_(t,r,0,n)+")"},L.writeMultiLineStringGeometry_=function(e){o.a.assertInstanceof(e,y.a);for(var t=e.getEnds(),r=t.length,n=e.getFlatCoordinates(),a=e.getStride(),i=0,s=["L("],l=0;l<r;++l){var u=t[l],c=this.encodeCoordinates_(n,a,i,u);0!==l&&s.push("'"),s.push(c),i=u}return s.push(")"),s.join("")},L.writePointGeometry_=function(e){o.a.assertInstanceof(e,v.a);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"p("+this.encodeCoordinates_(t,r,0,n)+")"},L.writeMultiPointGeometry_=function(e){o.a.assertInstanceof(e,f.a);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"P("+this.encodeCoordinates_(t,r,0,n)+")"},L.encodeRings_=function(e,t,r,o,n){for(var a=o.length,i=0;i<a;++i){var s=o[i]-t,l=this.encodeCoordinates_(e,t,r,s);0!==i&&n.push("'"),n.push(l),r=o[i]}return r},L.writePolygonGeometry_=function(e){o.a.assertInstanceof(e,m.b);var t=e.getFlatCoordinates(),r=e.getStride(),n=e.getEnds(),a=["a("];return L.encodeRings_.call(this,t,r,0,n,a),a.push(")"),a.join("")},L.writeMultiPolygonGeometry_=function(e){o.a.assertInstanceof(e,_.a);for(var t=e.getFlatCoordinates(),r=e.getStride(),n=e.getEndss(),a=n.length,i=0,s=["A"],l=0;l<a;++l){var u=n[l];s.push("("),i=L.encodeRings_.call(this,t,r,i,u,s),s.push(")")}return s.join("")},L.GEOMETRY_READERS_={P:L.readMultiPointGeometry_,L:L.readMultiLineStringGeometry_,A:L.readMultiPolygonGeometry_,l:L.readLineStringGeometry_,p:L.readPointGeometry_,a:L.readPolygonGeometry_},L.GEOMETRY_WRITERS_={MultiLineString:L.writeMultiLineStringGeometry_,MultiPoint:L.writeMultiPointGeometry_,MultiPolygon:L.writeMultiPolygonGeometry_,LineString:L.writeLineStringGeometry_,Point:L.writePointGeometry_,Polygon:L.writePolygonGeometry_},L.prototype.decodeCoordinates_=function(e,t){for(var r=e.length,o=0,n=void 0!==t?t:[],a=n.length;o<r;){var i=void 0,s=0,l=0;do{l|=(31&(i=L.CHAR64_.indexOf(e.charAt(o++))))<<s,s+=5}while(i>=32);var u=1&l?~(l>>1):l>>1;this.prevX_+=u,s=0,l=0;do{l|=(31&(i=L.CHAR64_.indexOf(e.charAt(o++))))<<s,s+=5}while(i>=32);var c=1&l?~(l>>1):l>>1;this.prevY_+=c,n[a++]=this.prevX_*this.accuracy_,n[a++]=this.prevY_*this.accuracy_}return n},L.prototype.encodeCoordinates_=function(e,t,r,o){for(var n="",a=r;a<o;a+=t){var i=e[a],s=e[a+1];i=Math.floor(i/this.accuracy_),s=Math.floor(s/this.accuracy_);var l=i-this.prevX_,u=s-this.prevY_;this.prevX_=i,this.prevY_=s,n+=L.encodeSignedNumber_(l)+L.encodeSignedNumber_(u)}return n},L.prototype.readFeatureFromText=function(e,t){o.a.assert(e.length>2),o.a.assert("("===e[1]),o.a.assert(")"===e[e.length-1]);var r=e.indexOf("~"),n=r>=0?e.substring(0,r)+")":e,a=this.readGeometryFromText(n,t),i=new l.a(a);if(r>=0){var s=e.substring(r+1,e.length-1),u=(r=s.indexOf("~"))>=0?s.substring(0,r):s;if(""!=u)for(var c=u.split("'"),p=0;p<c.length;++p){var d=decodeURIComponent(c[p]).split("*");o.a.assert(2===d.length);var g=d[0],h=d[1];!this.setStyle_&&L.LegacyProperties_[g]&&(g=L.LegacyProperties_[g]),i.set(g,L.castValue_(g,h))}if(r>=0){var y=s.substring(r+1);this.setStyle_?L.setStyleInFeature_(y,i):L.setStyleProperties_(y,i)}}return i},L.prototype.readFeaturesFromText=function(e,t){var r=this;o.a.assert("F"===e[0]),this.prevX_=0,this.prevY_=0;var n=[];for(e=e.substring(1);e.length>0;){var a=e.indexOf(")");o.a.assert(a>=0);var i=this.readFeatureFromText(e.substring(0,a+1),t);n.push(i),e=e.substring(a+1)}return n.forEach(function(e){for(var t in r.defaultValues_){var o=L.LegacyProperties_[t];void 0===e.get(o)&&e.set(o,r.defaultValues_[t].call(null,e))}}),n},L.prototype.readGeometryFromText=function(e,t){var r=L.GEOMETRY_READERS_[e[0]];return o.a.assert(void 0!==r),r.call(this,e)},L.prototype.writeFeatureText=function(e,t){var r=[],n="",a=e.getGeometry();a&&(n=this.writeGeometryText(a,t)),n.length>0&&(o.a.assert(")"===n[n.length-1]),n=n.substring(0,n.length-1),r.push(n));var i=[],s=this.propertiesFunction_(e);for(var l in s){var u=s[l];if(void 0!==u&&null!==u&&l!==e.getGeometryName()){0!==i.length&&i.push("'");var c=encodeURIComponent(l.replace(/[()'*]/g,"_")+"*"+u.toString().replace(/[()'*]/g,"_"));i.push(c)}}if(i.length>0&&(r.push("~"),Array.prototype.push.apply(r,i)),this.encodeStyles_){var p=e.getStyleFunction();if(void 0!==p){var d=p.call(e,0);if(null!==d){var g=[];d=Array.isArray(d)?d:[d],L.encodeStyles_(d,a.getType(),g),g.length>0&&(r.push("~"),Array.prototype.push.apply(r,g))}}}return r.push(")"),r.join("")},L.prototype.writeFeaturesText=function(e,t){this.prevX_=0,this.prevY_=0;var r=[];if(e.length>0){r.push("F");for(var o=0,n=e.length;o<n;++o)r.push(this.writeFeatureText(e[o],t))}return r.join("")},L.prototype.writeGeometryText=function(e,t){var r=L.GEOMETRY_WRITERS_[e.getType()];o.a.assert(void 0!==r);var n=p.b(e,!0,t);return r.call(this,n)};var M=L,G=r(22),T=r(138),A=r(91),F=r(277),R=r(18),I=r(70),O=r(17),x=r(42),E=r(31),N=r(38),Y={};Y.module=angular.module("app",["gettext",G.a.name,T.a.name,F.a.name]),Y.mapComponent={controller:"AppMapController as ctrl",bindings:{map:"=appMap"},template:"<div ngeo-map=ctrl.map></div>"},Y.module.component("appMap",Y.mapComponent),Y.MapComponentController=function(e,t){this.map,this.ngeoLocation_=e,this.ngeoDebounce_=t},Y.MapComponentController.$inject=["ngeoLocation","ngeoDebounce"],Y.module.controller("AppMapController",Y.MapComponentController),Y.MapComponentController.prototype.$onInit=function(){var e=this,t=this.map.getView(),r=this.ngeoLocation_.getParam("z");r=void 0!==r?+r:4;var o=this.ngeoLocation_.getParam("x"),n=this.ngeoLocation_.getParam("y"),a=void 0!==o&&void 0!==n?[+o,+n]:[0,0];t.setCenter(a),t.setZoom(r),this.ngeoLocation_.updateParams({z:r,x:Math.round(a[0]),y:Math.round(a[1])}),t.on("propertychange",this.ngeoDebounce_(function(r){var o=t.getCenter(),n={z:t.getZoom(),x:Math.round(o[0]),y:Math.round(o[1])};e.ngeoLocation_.updateParams(n)},300,!0))},Y.drawComponent={controller:"AppDrawController as ctrl",bindings:{map:"=appDrawMap",layer:"=appDrawLayer"},template:'<label>Enable drawing:<input type="checkbox" ng-model="ctrl.interaction.active" /></label><br><button ng-click="ctrl.clearLayer()">Clear layer</button>'},Y.module.component("appDraw",Y.drawComponent),Y.DrawComponentController=function(e,t){this.map,this.layer,this.ngeoLocation_=t,this.scope_=e,this.featureSeq_=0,this.interaction},Y.DrawComponentController.$inject=["$scope","ngeoLocation"],Y.DrawComponentController.prototype.$onInit=function(){var e=this,t=this.layer.getSource();this.interaction=new I.a({type:"LineString",source:t}),this.interaction.setActive(!1),this.map.addInteraction(this.interaction),A.a.interaction(this.interaction),this.interaction.on("drawend",function(e){e.feature.set("id",++this.featureSeq_)},this);var r=new M;t.on("addfeature",function(o){o.feature.setStyle(new P.c({stroke:new w.a({color:[255,0,0,1],width:2})}));var n=t.getFeatures(),a=r.writeFeatures(n);e.scope_.$applyAsync(function(){e.ngeoLocation_.updateParams({features:a})})});var o=this.ngeoLocation_.getParam("features");if(void 0!==o){var n=r.readFeatures(o);this.featureSeq_=n.length,t.addFeatures(n)}},Y.DrawComponentController.prototype.clearLayer=function(){this.layer.getSource().clear(!0),this.featureSeq_=0,this.ngeoLocation_.deleteParam("features")},Y.module.controller("AppDrawController",Y.DrawComponentController),Y.MainController=function(){this.map=new R.a({layers:[new O.a({source:new E.b})]});var e=new N.a;this.vectorLayer=new x.a({source:e}),this.vectorLayer.setMap(this.map)},Y.module.controller("MainController",Y.MainController);t.default=Y}});
//# sourceMappingURL=permalink.66c50d.js.map