{"version":3,"sources":["webpack:///./examples/backgroundlayer.js","webpack:///./src/source/AsitVD.js"],"names":["__webpack_require__","exports","module","angular","ngeoBase","name","ngeoMapModule","backgroundlayerComponent","bindings","map","templateUrl","controller","controllerAs","component","BackgroundlayerController","$http","ngeoBackgroundLayerMgr","_this","this","bgLayers","undefined","bgLayer","get","then","resp","data","backgroundLayerMgr_","prototype","change","layerSpec","layer","getLayer_","set","layerName","olLayerTile","source","ngeoSourceAsitVD","MainController","$scope","olMap","view","olView","projection","resolutions","center","zoom","overlay","olLayerImage","olSourceImageWMS","url","params","LAYERS","serverType","addLayer","asitVDResolutions","asitVDTileGrid","olTilegridWMTS","extent","matrixIds","value","index","options","_classCallCheck","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","attributions","requestEncoding","style","matrixSet","format","tileGrid","_inherits","olSourceWMTS"],"mappings":"gJAKAA,EAAA,KACAA,EAAA,IACA,QAAAA,EAAA,UAGAA,EAAA,OAEAA,EAAA,UACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,QACAA,EAAA,wDAfA,IAAMC,KAmBNA,EAAQC,OAASC,QAAQD,OAAO,OAC9BE,UAASF,OAAOG,KAChBC,UAAcD,OAiBhBJ,EAAQM,0BACNC,UACEC,IAAO,0BAETC,YAAa,gCACbC,WAAY,+BACZC,aAAc,QAIhBX,EAAQC,OAAOW,UAAU,qBAAsBZ,EAAQM,0BAWvDN,EAAQa,0BAA4B,SAASC,EAAOC,GAAwB,IAAAC,EAAAC,KAM1EA,KAAKT,IAMLS,KAAKC,cAAWC,EAMhBF,KAAKG,QAAU,KAEfN,EAAMO,IAAI,8BAA8BC,KACtC,SAACC,GACCP,EAAKE,SAAWK,EAAKC,KAErBR,EAAKI,QAAUJ,EAAKE,SAAS,KAOjCD,KAAKQ,oBAAsBV,GA/B7Bf,EAAQa,qEAyCRb,EAAQa,0BAA0Ba,UAAUC,OAAS,WACnD,IAAMC,EAAYX,KAAKG,QACjBS,EAAQZ,KAAKa,UAAUF,EAAA,MAC7BX,KAAKQ,oBAAoBM,IAAId,KAAKT,IAAKqB,IASzC7B,EAAQa,0BAA0Ba,UAAUI,UAAY,SAASE,GAC/D,GAAkB,UAAdA,EACF,OAAO,IAAIC,UAGb,IAAMC,EAAS,IAAIC,WACjBN,MAAOG,IAET,OAAO,IAAIC,WAAaC,YAI1BlC,EAAQC,OAAOS,WAAW,+BACxBV,EAAQa,2BAQVb,EAAQoC,eAAiB,SAASC,GAMhCpB,KAAKT,IAAM,IAAI8B,WACbC,KAAM,IAAIC,WACRC,WAAY,aACZC,aAAc,IAAM,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,EAAG,IAAK,EAAG,EAAG,IAC7DC,QAAS,IAAQ,KACjBC,KAAM,MAQV,IAAMC,EAAU,IAAIC,WAClBZ,OAAQ,IAAIa,WACVC,IAAK,2BACLC,QAASC,OAAU,oCACnBC,WAAY,gBAIhBlC,KAAKT,IAAI4C,SAASP,IA3BpB7C,EAAQoC,kCAgCRpC,EAAQC,OAAOS,WAAW,iBAAkBV,EAAQoC,0BAGrCpC,wGCxKf,QAAAD,EAAA,wDAOA,IAAMsD,GACJ,IAAM,KAAM,KAAM,KAAM,IAAM,KAAM,KAAM,KAAM,IAAM,KAAM,KAAM,KAClE,IAAM,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAO1DC,EAAiB,MAfvBvD,EAAA,KAe2BwD,UACzBC,QAAS,KAAQ,IAAO,IAAQ,MAChCd,YAAaW,EACbI,UAAWJ,EAAkB7C,IAAI,SAACkD,EAAOC,GAAR,SAAqBA,MASlD3D,cAKJ,SAAAA,EAAY4D,GAAS,mGAAAC,CAAA5C,KAAAjB,oKAAA8D,CAAA7C,MAAAjB,EAAA+D,WAAAC,OAAAC,eAAAjE,IAAAkE,KAAAjD,MAEjBkD,aAAc,sEACdnB,IAAK,6GAELP,WAAY,aACZ2B,gBAAiB,OACjBvC,MAAO+B,EAAQ/B,MACfwC,MAAO,UACPC,UAAW,QACXC,OAAQ,YACRC,SAAUlB,KAhBV,gUAAAmB,CAAAzE,EAAwB0E,WAAxB1E,eAsBSA","file":"backgroundlayer.f334800949c16c8ac994.js","sourcesContent":["/**\n * @module app.backgroundlayer\n*/\nconst exports = {};\n\nimport './backgroundlayer.css';\nimport './common_dependencies.js';\nimport ngeoSourceAsitVD from 'ngeo/source/AsitVD.js';\n\n/** @suppress {extraRequire} */\nimport ngeoProjEPSG21781 from 'ngeo/proj/EPSG21781.js';\n\nimport olMap from 'ol/Map.js';\nimport olView from 'ol/View.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMapModule from 'ngeo/map/module.js';\n\n\n/** @type {!angular.Module} **/\nexports.module = angular.module('app', [\n  ngeoBase.module.name,\n  ngeoMapModule.name\n]);\n\n\n/**\n * The application-specific background layer component.\n *\n * The component is based on Angular's select, ngOptions, ngModel, and\n * ngChange components. ngChange is used to avoid adding a watcher on\n * the ngModel expression.\n *\n * Note: we don't need two-way binding for ngModel here, but using ::\n * for the ngModel expression doesn't actually make a difference. This\n * is because ngModel doesn't actually watch the ngModel expression.\n *\n * @type {!angular.Component}\n */\nexports.backgroundlayerComponent = {\n  bindings: {\n    'map': '=appBackgroundlayerMap'\n  },\n  templateUrl: 'partials/backgroundlayer.html',\n  controller: 'AppBackgroundlayerController',\n  controllerAs: 'ctrl'\n};\n\n\nexports.module.component('appBackgroundlayer', exports.backgroundlayerComponent);\n\n\n/**\n * @constructor\n * @param {angular.$http} $http Angular http service.\n * @param {ngeo.map.BackgroundLayerMgr} ngeoBackgroundLayerMgr Background layer\n *     manager.\n * @export\n * @ngInject\n */\nexports.BackgroundlayerController = function($http, ngeoBackgroundLayerMgr) {\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map;\n\n  /**\n   * @type {Array.<Object>|undefined}\n   * @export\n   */\n  this.bgLayers = undefined;\n\n  /**\n   * @type {Object}\n   * @export\n   */\n  this.bgLayer = null;\n\n  $http.get('data/backgroundlayers.json').then(\n    (resp) => {\n      this.bgLayers = resp.data;\n      // use the first layer by default\n      this.bgLayer = this.bgLayers[0];\n    });\n\n  /**\n   * @type {ngeo.map.BackgroundLayerMgr}\n   * @private\n   */\n  this.backgroundLayerMgr_ = ngeoBackgroundLayerMgr;\n};\n\n\n/**\n * Function called when the user selects a new background layer through\n * the select element. The ngChange directive used in the partial calls\n * it.\n * @export\n */\nexports.BackgroundlayerController.prototype.change = function() {\n  const layerSpec = this.bgLayer;\n  const layer = this.getLayer_(layerSpec['name']);\n  this.backgroundLayerMgr_.set(this.map, layer);\n};\n\n\n/**\n * @param {string} layerName Layer name.\n * @return {ol.layer.Tile} The layer.\n * @private\n */\nexports.BackgroundlayerController.prototype.getLayer_ = function(layerName) {\n  if (layerName === 'blank') {\n    return new olLayerTile();\n  }\n\n  const source = new ngeoSourceAsitVD({\n    layer: layerName\n  });\n  return new olLayerTile({source});\n};\n\n\nexports.module.controller('AppBackgroundlayerController',\n  exports.BackgroundlayerController);\n\n\n/**\n * @constructor\n * @param {angular.Scope} $scope Controller scope.\n * @ngInject\n */\nexports.MainController = function($scope) {\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map = new olMap({\n    view: new olView({\n      projection: 'EPSG:21781',\n      resolutions: [1000, 500, 200, 100, 50, 20, 10, 5, 2.5, 2, 1, 0.5],\n      center: [600000, 200000],\n      zoom: 1\n    })\n  });\n\n  /**\n   * An overlay layer.\n   * @type {ol.layer.Image}\n   */\n  const overlay = new olLayerImage({\n    source: new olSourceImageWMS({\n      url: 'https://wms.geo.admin.ch',\n      params: {'LAYERS': 'ch.swisstopo.dreiecksvermaschung'},\n      serverType: 'mapserver'\n    })\n  });\n\n  this.map.addLayer(overlay);\n\n};\n\n\nexports.module.controller('MainController', exports.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/backgroundlayer.js","/**\n * @module ngeo.source.AsitVD\n*/\nimport olSourceWMTS from 'ol/source/WMTS.js';\nimport olTilegridWMTS from 'ol/tilegrid/WMTS.js';\n\n\n/**\n * @const {!Array.<number>}\n */\nconst asitVDResolutions = [\n  4000, 3750, 3500, 3250, 3000, 2750, 2500, 2250, 2000, 1750, 1500, 1250,\n  1000, 750, 650, 500, 250, 100, 50, 20, 10, 5, 2.5, 2, 1.5, 1, 0.5\n];\n\n\n/**\n * @const {ol.tilegrid.WMTS}\n */\nconst asitVDTileGrid = new olTilegridWMTS({\n  extent: [420000, 30000, 900000, 350000],\n  resolutions: asitVDResolutions,\n  matrixIds: asitVDResolutions.map((value, index) => `${index}`)\n});\n\n\n/**\n * Layer source for the ASIT VD tile server.\n * @see https://www.asitvd.ch/chercher/geoservices/fond-de-plan-asit-vd.html\n *\n */\nconst exports = class extends olSourceWMTS {\n\n  /**\n   * @param {ngeox.source.AsitVDOptions} options WMTS options.\n   */\n  constructor(options) {\n    super({\n      attributions: 'géodonnées &copy; Etat de Vaud & &copy; contributeurs OpenStreetMap',\n      url: 'https://ows{1-4}.asitvd.ch/wmts/1.0.0/{Layer}/default/default/0/' +\n        '21781/{TileMatrix}/{TileRow}/{TileCol}.png',\n      projection: 'EPSG:21781',\n      requestEncoding: 'REST',\n      layer: options.layer,\n      style: 'default',\n      matrixSet: '21781',\n      format: 'image/png',\n      tileGrid: asitVDTileGrid\n    });\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/source/AsitVD.js"],"sourceRoot":""}