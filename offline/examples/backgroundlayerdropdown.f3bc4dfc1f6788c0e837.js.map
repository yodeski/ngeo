{"version":3,"sources":["webpack:///./examples/backgroundlayerdropdown.js","webpack:///./src/source/AsitVD.js"],"names":["__webpack_require__","exports","module","angular","ngeoBase","name","ngeoMapModule","backgroundlayerComponent","bindings","map","templateUrl","controller","controllerAs","component","BackgroundlayerController","$http","ngeoBackgroundLayerMgr","_this","this","get","then","resp","bgLayers","data","setLayer","backgroundLayerMgr_","prototype","layerSpec","layer","createLayer_","set","layerName","olLayerTile","source","ngeoSourceAsitVD","MainController","$scope","olMap","view","olView","projection","resolutions","center","zoom","overlay","olLayerImage","olSourceImageWMS","url","params","LAYERS","serverType","addLayer","asitVDResolutions","asitVDTileGrid","olTilegridWMTS","extent","matrixIds","value","index","options","_classCallCheck","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","attributions","requestEncoding","style","matrixSet","format","tileGrid","_inherits","olSourceWMTS"],"mappings":"gJAKAA,EAAA,KACAA,EAAA,IACA,QAAAA,EAAA,UAGAA,EAAA,OAEAA,EAAA,UACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,QACAA,EAAA,wDAfA,IAAMC,KAmBNA,EAAQC,OAASC,QAAQD,OAAO,OAC9BE,UAASF,OAAOG,KAChBC,UAAcD,OAYhBJ,EAAQM,0BACNC,UACEC,IAAO,0BAETC,YAAa,wCACbC,WAAY,+BACZC,aAAc,QAIhBX,EAAQC,OAAOW,UAAU,qBAAsBZ,EAAQM,0BAWvDN,EAAQa,0BAA4B,SAASC,EAAOC,GAAwB,IAAAC,EAAAC,KAC1EH,EAAMI,IAAI,8BAA8BC,KACtC,SAACC,GACC,IAAMC,EAAWD,EAAKE,KACtBN,EAAA,SAAmBK,EACnBL,EAAKO,SAASF,EAAS,MAO3BJ,KAAKO,oBAAsBT,GAZ7Bf,EAAQa,qEAsBRb,EAAQa,0BAA0BY,UAAUF,SAAW,SAASG,GAC9DT,KAAA,eAAyBS,EACzB,IAAMC,EAAQV,KAAKW,aAAaF,EAAA,MAChCT,KAAKO,oBAAoBK,IAAIZ,KAAA,IAAaU,IAS5C3B,EAAQa,0BAA0BY,UAAUG,aAAe,SAASE,GAClE,GAAkB,UAAdA,EACF,OAAO,IAAIC,UAGb,IAAMC,EAAS,IAAIC,WACjBN,MAAOG,IAET,OAAO,IAAIC,WAAaC,YAI1BhC,EAAQC,OAAOS,WAAW,+BACxBV,EAAQa,2BAQVb,EAAQkC,eAAiB,SAASC,GAKhC,IAAM3B,EAAM,IAAI4B,WACdC,KAAM,IAAIC,WACRC,WAAY,aACZC,aAAc,IAAM,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,EAAG,IAAK,EAAG,EAAG,IAC7DC,QAAS,IAAQ,KACjBC,KAAM,MAGVzB,KAAA,IAAcT,EAMd,IAAMmC,EAAU,IAAIC,WAClBZ,OAAQ,IAAIa,WACVC,IAAK,2BACLC,QAASC,OAAU,oCACnBC,WAAY,gBAIhBzC,EAAI0C,SAASP,IA3Bf3C,EAAQkC,kCAgCRlC,EAAQC,OAAOS,WAAW,iBAAkBV,EAAQkC,0BAGrClC,wGChJf,QAAAD,EAAA,wDAOA,IAAMoD,GACJ,IAAM,KAAM,KAAM,KAAM,IAAM,KAAM,KAAM,KAAM,IAAM,KAAM,KAAM,KAClE,IAAM,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAO1DC,EAAiB,MAfvBrD,EAAA,KAe2BsD,UACzBC,QAAS,KAAQ,IAAO,IAAQ,MAChCd,YAAaW,EACbI,UAAWJ,EAAkB3C,IAAI,SAACgD,EAAOC,GAAR,SAAqBA,MASlDzD,cAKJ,SAAAA,EAAY0D,GAAS,mGAAAC,CAAA1C,KAAAjB,oKAAA4D,CAAA3C,MAAAjB,EAAA6D,WAAAC,OAAAC,eAAA/D,IAAAgE,KAAA/C,MAEjBgD,aAAc,sEACdnB,IAAK,6GAELP,WAAY,aACZ2B,gBAAiB,OACjBvC,MAAO+B,EAAQ/B,MACfwC,MAAO,UACPC,UAAW,QACXC,OAAQ,YACRC,SAAUlB,KAhBV,gUAAAmB,CAAAvE,EAAwBwE,WAAxBxE,eAsBSA","file":"backgroundlayerdropdown.f3bc4dfc1f6788c0e837.js","sourcesContent":["/**\n * @module app.backgroundlayerdropdown\n*/\nconst exports = {};\n\nimport './backgroundlayerdropdown.css';\nimport './common_dependencies.js';\nimport ngeoSourceAsitVD from 'ngeo/source/AsitVD.js';\n\n/** @suppress {extraRequire} */\nimport ngeoProjEPSG21781 from 'ngeo/proj/EPSG21781.js';\n\nimport olMap from 'ol/Map.js';\nimport olView from 'ol/View.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMapModule from 'ngeo/map/module.js';\n\n\n/** @type {!angular.Module} **/\nexports.module = angular.module('app', [\n  ngeoBase.module.name,\n  ngeoMapModule.name\n]);\n\n\n/**\n * The application-specific background layer component.\n *\n * The component is based on Bootstrap's dropdown jQuery plugin and on\n * the ngeoBackgroundLayerMgr service.\n *\n * @type {!angular.Component}\n */\nexports.backgroundlayerComponent = {\n  bindings: {\n    'map': '=appBackgroundlayerMap'\n  },\n  templateUrl: 'partials/backgroundlayerdropdown.html',\n  controller: 'AppBackgroundlayerController',\n  controllerAs: 'ctrl'\n};\n\n\nexports.module.component('appBackgroundlayer', exports.backgroundlayerComponent);\n\n\n/**\n * @constructor\n * @param {angular.$http} $http Angular http service.\n * @param {ngeo.map.BackgroundLayerMgr} ngeoBackgroundLayerMgr Background layer\n *     manager.\n * @export\n * @ngInject\n */\nexports.BackgroundlayerController = function($http, ngeoBackgroundLayerMgr) {\n  $http.get('data/backgroundlayers.json').then(\n    (resp) => {\n      const bgLayers = resp.data;\n      this['bgLayers'] = bgLayers;\n      this.setLayer(bgLayers[0]);\n    });\n\n  /**\n   * @type {ngeo.map.BackgroundLayerMgr}\n   * @private\n   */\n  this.backgroundLayerMgr_ = ngeoBackgroundLayerMgr;\n};\n\n\n/**\n * Function called when the user selects a new background layer in the\n * dropdown. Called by the ng-click directive used in the partial.\n * @param {Object} layerSpec Layer specification object.\n * @export\n */\nexports.BackgroundlayerController.prototype.setLayer = function(layerSpec) {\n  this['currentBgLayer'] = layerSpec;\n  const layer = this.createLayer_(layerSpec['name']);\n  this.backgroundLayerMgr_.set(this['map'], layer);\n};\n\n\n/**\n * @param {string} layerName Layer name.\n * @return {ol.layer.Tile} The layer.\n * @private\n */\nexports.BackgroundlayerController.prototype.createLayer_ = function(layerName) {\n  if (layerName === 'blank') {\n    return new olLayerTile();\n  }\n\n  const source = new ngeoSourceAsitVD({\n    layer: layerName\n  });\n  return new olLayerTile({source});\n};\n\n\nexports.module.controller('AppBackgroundlayerController',\n  exports.BackgroundlayerController);\n\n\n/**\n * @constructor\n * @param {angular.Scope} $scope Controller scope.\n * @ngInject\n */\nexports.MainController = function($scope) {\n\n  /**\n   * @type {ol.Map}\n   */\n  const map = new olMap({\n    view: new olView({\n      projection: 'EPSG:21781',\n      resolutions: [1000, 500, 200, 100, 50, 20, 10, 5, 2.5, 2, 1, 0.5],\n      center: [600000, 200000],\n      zoom: 1\n    })\n  });\n  this['map'] = map;\n\n  /**\n   * An overlay layer.\n   * @type {ol.layer.Image}\n   */\n  const overlay = new olLayerImage({\n    source: new olSourceImageWMS({\n      url: 'https://wms.geo.admin.ch',\n      params: {'LAYERS': 'ch.swisstopo.dreiecksvermaschung'},\n      serverType: 'mapserver'\n    })\n  });\n\n  map.addLayer(overlay);\n\n};\n\n\nexports.module.controller('MainController', exports.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/backgroundlayerdropdown.js","/**\n * @module ngeo.source.AsitVD\n*/\nimport olSourceWMTS from 'ol/source/WMTS.js';\nimport olTilegridWMTS from 'ol/tilegrid/WMTS.js';\n\n\n/**\n * @const {!Array.<number>}\n */\nconst asitVDResolutions = [\n  4000, 3750, 3500, 3250, 3000, 2750, 2500, 2250, 2000, 1750, 1500, 1250,\n  1000, 750, 650, 500, 250, 100, 50, 20, 10, 5, 2.5, 2, 1.5, 1, 0.5\n];\n\n\n/**\n * @const {ol.tilegrid.WMTS}\n */\nconst asitVDTileGrid = new olTilegridWMTS({\n  extent: [420000, 30000, 900000, 350000],\n  resolutions: asitVDResolutions,\n  matrixIds: asitVDResolutions.map((value, index) => `${index}`)\n});\n\n\n/**\n * Layer source for the ASIT VD tile server.\n * @see https://www.asitvd.ch/chercher/geoservices/fond-de-plan-asit-vd.html\n *\n */\nconst exports = class extends olSourceWMTS {\n\n  /**\n   * @param {ngeox.source.AsitVDOptions} options WMTS options.\n   */\n  constructor(options) {\n    super({\n      attributions: 'géodonnées &copy; Etat de Vaud & &copy; contributeurs OpenStreetMap',\n      url: 'https://ows{1-4}.asitvd.ch/wmts/1.0.0/{Layer}/default/default/0/' +\n        '21781/{TileMatrix}/{TileRow}/{TileCol}.png',\n      projection: 'EPSG:21781',\n      requestEncoding: 'REST',\n      layer: options.layer,\n      style: 'default',\n      matrixSet: '21781',\n      format: 'image/png',\n      tileGrid: asitVDTileGrid\n    });\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/source/AsitVD.js"],"sourceRoot":""}