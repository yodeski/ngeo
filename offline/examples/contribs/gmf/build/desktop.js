
/*
 * Auto redirect to https to prevent CORS exceptions
 */
if (window.location.protocol == 'http:' &&
    window.location.port != '3000' &&
    window.location.host != 'localhost') {
  var restOfUrl = window.location.href.substr(5);
  /** @type {Location} */
  window.location = 'https:' + restOfUrl;
}

/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+M+"*\\]",W=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--)h[s]="#"+c+" "+ve(h[s]);v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[me(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))w.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(We.test(i)){if(!n)return i;i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var St=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=Ct.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position"))e=e.offsetParent;return e||be})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),We.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});

/*
 AngularJS v1.6.9
 (c) 2010-2018 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(w){'use strict';function oe(a){if(B(a))u(a.objectMaxDepth)&&(Mc.objectMaxDepth=Wb(a.objectMaxDepth)?a.objectMaxDepth:NaN);else return Mc}function Wb(a){return Y(a)&&0<a}function K(a,b){b=b||Error;return function(){var d=arguments[0],c;c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/1.6.9/"+(a?a+"/":"")+d;for(d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var e=encodeURIComponent,f;f=arguments[d];f="function"==typeof f?f.toString().replace(/ \{[\s\S]*$/,""):"undefined"==
typeof f?"undefined":"string"!=typeof f?JSON.stringify(f):f;c+=e(f)}return new b(c)}}function wa(a){if(null==a||Za(a))return!1;if(I(a)||E(a)||z&&a instanceof z)return!0;var b="length"in Object(a)&&a.length;return Y(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"===typeof a.item)}function r(a,b,d){var c,e;if(a)if(C(a))for(c in a)"prototype"!==c&&"length"!==c&&"name"!==c&&a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else if(I(a)||wa(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in
a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==r)a.forEach(b,d,a);else if(Nc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ra.call(a,c)&&b.call(d,a[c],c,a);return a}function Oc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function Xb(a){return function(b,d){a(d,b)}}function pe(){return++qb}function Yb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=
b[e];if(B(g)||C(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var m=h[k],p=g[m];d&&B(p)?fa(p)?a[m]=new Date(p.valueOf()):$a(p)?a[m]=new RegExp(p):p.nodeName?a[m]=p.cloneNode(!0):Zb(p)?a[m]=p.clone():(B(a[m])||(a[m]=I(p)?[]:{}),Yb(a[m],[p],!0)):a[m]=p}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function O(a){return Yb(a,xa.call(arguments,1),!1)}function qe(a){return Yb(a,xa.call(arguments,1),!0)}function Z(a){return parseInt(a,10)}function $b(a,b){return O(Object.create(a),b)}function D(){}
function ab(a){return a}function la(a){return function(){return a}}function ac(a){return C(a.toString)&&a.toString!==ia}function x(a){return"undefined"===typeof a}function u(a){return"undefined"!==typeof a}function B(a){return null!==a&&"object"===typeof a}function Nc(a){return null!==a&&"object"===typeof a&&!Pc(a)}function E(a){return"string"===typeof a}function Y(a){return"number"===typeof a}function fa(a){return"[object Date]"===ia.call(a)}function bc(a){switch(ia.call(a)){case "[object Error]":return!0;
case "[object Exception]":return!0;case "[object DOMException]":return!0;default:return a instanceof Error}}function C(a){return"function"===typeof a}function $a(a){return"[object RegExp]"===ia.call(a)}function Za(a){return a&&a.window===a}function bb(a){return a&&a.$evalAsync&&a.$watch}function Na(a){return"boolean"===typeof a}function re(a){return a&&Y(a.length)&&se.test(ia.call(a))}function Zb(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function te(a){var b={};a=a.split(",");var d;for(d=
0;d<a.length;d++)b[a[d]]=!0;return b}function ya(a){return L(a.nodeName||a[0]&&a[0].nodeName)}function cb(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function pa(a,b,d){function c(a,b,c){c--;if(0>c)return"...";var d=b.$$hashKey,g;if(I(a)){g=0;for(var f=a.length;g<f;g++)b.push(e(a[g],c))}else if(Nc(a))for(g in a)b[g]=e(a[g],c);else if(a&&"function"===typeof a.hasOwnProperty)for(g in a)a.hasOwnProperty(g)&&(b[g]=e(a[g],c));else for(g in a)ra.call(a,g)&&(b[g]=e(a[g],c));d?b.$$hashKey=d:delete b.$$hashKey;
return b}function e(a,b){if(!B(a))return a;var d=g.indexOf(a);if(-1!==d)return h[d];if(Za(a)||bb(a))throw qa("cpws");var d=!1,e=f(a);void 0===e&&(e=I(a)?[]:Object.create(Pc(a)),d=!0);g.push(a);h.push(e);return d?c(a,e,b):e}function f(a){switch(ia.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(e(a.buffer),
a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(C(a.cloneNode))return a.cloneNode(!0)}
var g=[],h=[];d=Wb(d)?d:NaN;if(b){if(re(b)||"[object ArrayBuffer]"===ia.call(b))throw qa("cpta");if(a===b)throw qa("cpi");I(b)?b.length=0:r(b,function(a,c){"$$hashKey"!==c&&delete b[c]});g.push(a);h.push(b);return c(a,b,d)}return e(a,d)}function cc(a,b){return a===b||a!==a&&b!==b}function sa(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d===typeof b&&"object"===d)if(I(a)){if(!I(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!sa(a[c],
b[c]))return!1;return!0}}else{if(fa(a))return fa(b)?cc(a.getTime(),b.getTime()):!1;if($a(a))return $a(b)?a.toString()===b.toString():!1;if(bb(a)||bb(b)||Za(a)||Za(b)||I(b)||fa(b)||$a(b))return!1;d=S();for(c in a)if("$"!==c.charAt(0)&&!C(a[c])){if(!sa(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&u(b[c])&&!C(b[c]))return!1;return!0}return!1}function db(a,b,d){return a.concat(xa.call(b,d))}function Ra(a,b){var d=2<arguments.length?xa.call(arguments,2):[];return!C(b)||b instanceof
RegExp?b:d.length?function(){return arguments.length?b.apply(a,db(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Qc(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:Za(b)?d="$WINDOW":b&&w.document===b?d="$DOCUMENT":bb(b)&&(d="$SCOPE");return d}function eb(a,b){if(!x(a))return Y(b)||(b=b?2:null),JSON.stringify(a,Qc,b)}function Rc(a){return E(a)?JSON.parse(a):a}function Sc(a,b){a=a.replace(ue,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+
a)/6E4;return U(d)?b:d}function dc(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=Sc(b,c);d*=b-c;a=new Date(a.getTime());a.setMinutes(a.getMinutes()+d);return a}function za(a){a=z(a).clone().empty();var b=z("<div>").append(a).html();try{return a[0].nodeType===Oa?L(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+L(b)})}catch(d){return L(b)}}function Tc(a){try{return decodeURIComponent(a)}catch(b){}}function ec(a){var b={};r((a||"").split("&"),function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,
"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=Tc(e),u(e)&&(f=u(f)?Tc(f):!0,ra.call(b,e)?I(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function fc(a){var b=[];r(a,function(a,c){I(a)?r(a,function(a){b.push(ja(c,!0)+(!0===a?"":"="+ja(a,!0)))}):b.push(ja(c,!0)+(!0===a?"":"="+ja(a,!0)))});return b.length?b.join("&"):""}function fb(a){return ja(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ja(a,b){return encodeURIComponent(a).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ve(a,b){var d,c,e=Ha.length;for(c=0;c<e;++c)if(d=Ha[c]+b,E(d=a.getAttribute(d)))return d;return null}function we(a,b){var d,c,e={};r(Ha,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});r(Ha,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});d&&(xe?(e.strictDi=null!==ve(d,"strict-di"),
b(d,c?[c]:[],e)):w.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function Uc(a,b,d){B(d)||(d={});d=O({strictDi:!1},d);var c=function(){a=z(a);if(a.injector()){var c=a[0]===w.document?"document":za(a);throw qa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);
b.unshift("ng");c=gb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;w&&e.test(w.name)&&(d.debugInfoEnabled=!0,w.name=w.name.replace(e,""));if(w&&!f.test(w.name))return c();w.name=w.name.replace(f,"");$.resumeBootstrap=function(a){r(a,function(a){b.push(a)});return c()};C($.resumeDeferredBootstrap)&&$.resumeDeferredBootstrap()}function ye(){w.name=
"NG_ENABLE_DEBUG_INFO!"+w.name;w.location.reload()}function ze(a){a=$.element(a).injector();if(!a)throw qa("test");return a.get("$$testability")}function Vc(a,b){b=b||"_";return a.replace(Ae,function(a,c){return(c?b:"")+a.toLowerCase()})}function Be(){var a;if(!Wc){var b=rb();(ma=x(b)?w.jQuery:b?w[b]:void 0)&&ma.fn.on?(z=ma,O(ma.fn,{scope:Sa.scope,isolateScope:Sa.isolateScope,controller:Sa.controller,injector:Sa.injector,inheritedData:Sa.inheritedData}),a=ma.cleanData,ma.cleanData=function(b){for(var c,
e=0,f;null!=(f=b[e]);e++)(c=ma._data(f,"events"))&&c.$destroy&&ma(f).triggerHandler("$destroy");a(b)}):z=V;$.element=z;Wc=!0}}function hb(a,b,d){if(!a)throw qa("areq",b||"?",d||"required");return a}function sb(a,b,d){d&&I(a)&&(a=a[a.length-1]);hb(C(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ia(a,b){if("hasOwnProperty"===a)throw qa("badname",b);}function Xc(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=
b[g],a&&(a=(e=a)[c]);return!d&&C(a)?Ra(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==b)c||(c=z(xa.call(a,0,e))),c.push(b);return c||a}function S(){return Object.create(null)}function gc(a){if(null==a)return"";switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=!ac(a)||I(a)||fa(a)?eb(a):a.toString()}return a}function Ce(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=K("$injector"),c=K("ng");a=b(a,"angular",Object);a.$$minErr=
a.$$minErr||K;return b(a,"module",function(){var a={};return function(f,g,h){var k={};if("hasOwnProperty"===f)throw c("badname","module");g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,c,d,g){g||(g=e);return function(){g[d||"push"]([b,c,arguments]);return v}}function b(a,c,d){d||(d=e);return function(b,e){e&&C(e)&&(e.$$moduleName=f);d.push([a,c,arguments]);return v}}if(!g)throw d("nomod",f);var e=[],n=[],F=[],s=a("$injector","invoke","push",n),v={_invokeQueue:e,_configBlocks:n,
_runBlocks:F,info:function(a){if(u(a)){if(!B(a))throw c("aobj","value");k=a;return this}return k},requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator",n),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider",
"component"),config:s,run:function(a){F.push(a);return this}};h&&s(h);return v})}})}function ka(a,b){if(I(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(B(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function De(a,b){var d=[];Wb(b)&&(a=$.copy(a,null,b));return JSON.stringify(a,function(a,b){b=Qc(a,b);if(B(b)){if(0<=d.indexOf(b))return"...";d.push(b)}return b})}function Ee(a){O(a,{errorHandlingConfig:oe,bootstrap:Uc,copy:pa,extend:O,merge:qe,equals:sa,
element:z,forEach:r,injector:gb,noop:D,bind:Ra,toJson:eb,fromJson:Rc,identity:ab,isUndefined:x,isDefined:u,isString:E,isFunction:C,isObject:B,isNumber:Y,isElement:Zb,isArray:I,version:Fe,isDate:fa,lowercase:L,uppercase:ub,callbacks:{$$counter:0},getTestability:ze,reloadWithDebugInfo:ye,$$minErr:K,$$csp:Ja,$$encodeUriSegment:fb,$$encodeUriQuery:ja,$$stringify:gc});ic=Ce(w);ic("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Ge});a.provider("$compile",Yc).directive({a:He,input:Zc,
textarea:Zc,form:Ie,script:Je,select:Ke,option:Le,ngBind:Me,ngBindHtml:Ne,ngBindTemplate:Oe,ngClass:Pe,ngClassEven:Qe,ngClassOdd:Re,ngCloak:Se,ngController:Te,ngForm:Ue,ngHide:Ve,ngIf:We,ngInclude:Xe,ngInit:Ye,ngNonBindable:Ze,ngPluralize:$e,ngRepeat:af,ngShow:bf,ngStyle:cf,ngSwitch:df,ngSwitchWhen:ef,ngSwitchDefault:ff,ngOptions:gf,ngTransclude:hf,ngModel:jf,ngList:kf,ngChange:lf,pattern:$c,ngPattern:$c,required:ad,ngRequired:ad,minlength:bd,ngMinlength:bd,maxlength:cd,ngMaxlength:cd,ngValue:mf,
ngModelOptions:nf}).directive({ngInclude:of}).directive(vb).directive(dd);a.provider({$anchorScroll:pf,$animate:qf,$animateCss:rf,$$animateJs:sf,$$animateQueue:tf,$$AnimateRunner:uf,$$animateAsyncRun:vf,$browser:wf,$cacheFactory:xf,$controller:yf,$document:zf,$$isDocumentHidden:Af,$exceptionHandler:Bf,$filter:ed,$$forceReflow:Cf,$interpolate:Df,$interval:Ef,$http:Ff,$httpParamSerializer:Gf,$httpParamSerializerJQLike:Hf,$httpBackend:If,$xhrFactory:Jf,$jsonpCallbacks:Kf,$location:Lf,$log:Mf,$parse:Nf,
$rootScope:Of,$q:Pf,$$q:Qf,$sce:Rf,$sceDelegate:Sf,$sniffer:Tf,$templateCache:Uf,$templateRequest:Vf,$$testability:Wf,$timeout:Xf,$window:Yf,$$rAF:Zf,$$jqLite:$f,$$Map:ag,$$cookieReader:bg})}]).info({angularVersion:"1.6.9"})}function wb(a,b){return b.toUpperCase()}function xb(a){return a.replace(cg,wb)}function jc(a){a=a.nodeType;return 1===a||!a||9===a}function fd(a,b){var d,c,e=b.createDocumentFragment(),f=[];if(kc.test(a)){d=e.appendChild(b.createElement("div"));c=(dg.exec(a)||["",""])[1].toLowerCase();
c=aa[c]||aa._default;d.innerHTML=c[1]+a.replace(eg,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=db(f,d.childNodes);d=e.firstChild;d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";r(f,function(a){e.appendChild(a)});return e}function V(a){if(a instanceof V)return a;var b;E(a)&&(a=Q(a),b=!0);if(!(this instanceof V)){if(b&&"<"!==a.charAt(0))throw lc("nosel");return new V(a)}if(b){b=w.document;var d;a=(d=fg.exec(a))?[b.createElement(d[1])]:(d=fd(a,b))?d.childNodes:
[];mc(this,a)}else C(a)?gd(a):mc(this,a)}function nc(a){return a.cloneNode(!0)}function yb(a,b){!b&&jc(a)&&z.cleanData([a]);a.querySelectorAll&&z.cleanData(a.querySelectorAll("*"))}function hd(a,b,d,c){if(u(c))throw lc("offargs");var e=(c=zb(a))&&c.events,f=c&&c.handle;if(f)if(b){var g=function(b){var c=e[b];u(d)&&cb(c||[],d);u(d)&&c&&0<c.length||(a.removeEventListener(b,f),delete e[b])};r(b.split(" "),function(a){g(a);Ab[a]&&g(Ab[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f),delete e[b]}
function oc(a,b){var d=a.ng339,c=d&&ib[d];c&&(b?delete c.data[b]:(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),hd(a)),delete ib[d],a.ng339=void 0))}function zb(a,b){var d=a.ng339,d=d&&ib[d];b&&!d&&(a.ng339=d=++gg,d=ib[d]={events:{},data:{},handle:void 0});return d}function pc(a,b,d){if(jc(a)){var c,e=u(d),f=!e&&b&&!B(b),g=!b;a=(a=zb(a,!f))&&a.data;if(e)a[xb(b)]=d;else{if(g)return a;if(f)return a&&a[xb(b)];for(c in b)a[xb(c)]=b[c]}}}function Bb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||
"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Cb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;r(b.split(" "),function(a){a=Q(a);c=c.replace(" "+a+" "," ")});c!==d&&a.setAttribute("class",Q(c))}}function Db(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;r(b.split(" "),function(a){a=Q(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});c!==d&&a.setAttribute("class",Q(c))}}function mc(a,
b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function id(a,b){return Eb(a,"$"+(b||"ngController")+"Controller")}function Eb(a,b,d){9===a.nodeType&&(a=a.documentElement);for(b=I(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(u(d=z.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function jd(a){for(yb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Fb(a,b){b||
yb(a);var d=a.parentNode;d&&d.removeChild(a)}function hg(a,b){b=b||w;if("complete"===b.document.readyState)b.setTimeout(a);else z(b).on("load",a)}function gd(a){function b(){w.document.removeEventListener("DOMContentLoaded",b);w.removeEventListener("load",b);a()}"complete"===w.document.readyState?w.setTimeout(a):(w.document.addEventListener("DOMContentLoaded",b),w.addEventListener("load",b))}function kd(a,b){var d=Gb[b.toLowerCase()];return d&&ld[ya(a)]&&d}function ig(a,b){var d=function(c,d){c.isDefaultPrevented=
function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(x(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var k=f.specialHandlerWrapper||jg;1<g&&(f=ka(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||k(a,c,f[l])}};d.elem=a;return d}function jg(a,
b,d){d.call(a,b)}function kg(a,b,d){var c=b.relatedTarget;c&&(c===a||lg.call(a,c))||d.call(a,b)}function $f(){this.$get=function(){return O(V,{hasClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Db(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Cb(a,b)}})}}function Pa(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||pe)():d+":"+
a}function md(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}function nd(a){a=Function.prototype.toString.call(a).replace(mg,"");return a.match(ng)||a.match(og)}function pg(a){return(a=nd(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function gb(a,b){function d(a){return function(b,c){if(B(b))r(b,Xb(a));else return a(b,c)}}function c(a,b){Ia(a,"service");if(C(b)||I(b))b=n.instantiate(b);if(!b.$get)throw Ba("pget",a);return p[a+"Provider"]=b}function e(a,b){return function(){var c=
v.invoke(b,this);if(x(c))throw Ba("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){hb(x(a)||I(a),"modulesToLoad","not an array");var b=[],c;r(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],g=n.get(e[0]);g[e[1]].apply(g,e[2])}}if(!m.get(a)){m.set(a,!0);try{E(a)?(c=ic(a),v.modules[a]=c,b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):C(a)?b.push(n.invoke(a)):I(a)?b.push(n.invoke(a)):sb(a,"module")}catch(e){throw I(a)&&
(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ba("modulerr",a,e.stack||e.message||e);}}});return b}function h(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===k)throw Ba("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=c(b,e),a[b]}catch(g){throw a[b]===k&&delete a[b],g;}finally{l.shift()}}function e(a,c,g){var f=[];a=gb.$$annotate(a,b,g);for(var k=0,h=a.length;k<h;k++){var l=a[k];if("string"!==typeof l)throw Ba("itkn",
l);f.push(c&&c.hasOwnProperty(l)?c[l]:d(l,g))}return f}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);I(a)&&(a=a[a.length-1]);d=a;if(Ca||"function"!==typeof d)d=!1;else{var g=d.$$ngIsClass;Na(g)||(g=d.$$ngIsClass=/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(d)));d=g}return d?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=I(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,
a))},get:d,annotate:gb.$$annotate,has:function(b){return p.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],m=new Hb,p={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,la(b),!1)}),constant:d(function(a,b){Ia(a,"constant");p[a]=b;F[a]=b}),decorator:function(a,b){var c=n.get(a+"Provider"),d=c.$get;c.$get=function(){var a=v.invoke(d,c);return v.invoke(b,null,{$delegate:a})}}}},
n=p.$injector=h(p,function(a,b){$.isString(b)&&l.push(b);throw Ba("unpr",l.join(" <- "));}),F={},s=h(F,function(a,b){var c=n.get(a+"Provider",b);return v.invoke(c.$get,c,void 0,a)}),v=s;p.$injectorProvider={$get:la(s)};v.modules=n.modules=S();var y=g(a),v=s.get("$injector");v.strictDi=b;r(y,function(a){a&&v.invoke(a)});v.loadNewModules=function(a){r(g(a),function(a){a&&v.invoke(a)})};return v}function pf(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",
function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ya(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;C(c)?c=c():Zb(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):Y(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=E(a)?a:Y(a)?a.toString():d.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&
f(null):f(null)}var h=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||hg(function(){c.$evalAsync(g)})});return g}]}function jb(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;I(a)&&(a=a.join(" "));I(b)&&(b=b.join(" "));return a+" "+b}function qg(a){E(a)&&(a=a.split(" "));var b=S();r(a,function(a){a.length&&(b[a]=!0)});return b}function Ka(a){return B(a)?a:{}}function rg(a,b,d,c){function e(a){try{a.apply(null,xa.call(arguments,1))}finally{if(s--,0===s)for(;v.length;)try{v.pop()()}catch(b){d.error(b)}}}
function f(){A=null;h()}function g(){y=H();y=x(y)?null:y;sa(y,J)&&(y=J);t=J=y}function h(){var a=t;g();if(Aa!==k.url()||a!==y)Aa=k.url(),t=y,r(G,function(a){a(k.url(),y)})}var k=this,l=a.location,m=a.history,p=a.setTimeout,n=a.clearTimeout,F={};k.isMock=!1;var s=0,v=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){s++};k.notifyWhenNoOutstandingRequests=function(a){0===s?a():v.push(a)};var y,t,Aa=l.href,hc=b.find("base"),A=null,H=c.history?function(){try{return m.state}catch(a){}}:
D;g();k.url=function(b,d,e){x(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=t===e;if(Aa===b&&(!c.history||f))return k;var h=Aa&&La(Aa)===La(b);Aa=b;t=e;!c.history||h&&f?(h||(A=b),d?l.replace(b):h?(d=l,e=b.indexOf("#"),e=-1===e?"":b.substr(e),d.hash=e):l.href=b,l.href!==b&&(A=b)):(m[d?"replaceState":"pushState"](e,"",b),g());A&&(A=b);return k}return A||l.href.replace(/%27/g,"'")};k.state=function(){return y};var G=[],ba=!1,J=null;k.onUrlChange=function(b){if(!ba){if(c.history)z(a).on("popstate",
f);z(a).on("hashchange",f);ba=!0}G.push(b);return b};k.$$applicationDestroyed=function(){z(a).off("hashchange popstate",f)};k.$$checkUrlChange=h;k.baseHref=function(){var a=hc.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,""):""};k.defer=function(a,b){var c;s++;c=p(function(){delete F[c];e(a)},b||0);F[c]=!0;return c};k.defer.cancel=function(a){return F[a]?(delete F[a],n(a),e(D),!0):!1}}function wf(){this.$get=["$window","$log","$sniffer","$document",function(a,b,d,c){return new rg(a,c,b,
d)}]}function xf(){this.$get=function(){function a(a,c){function e(a){a!==p&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw K("$cacheFactory")("iid",a);var g=0,h=O({},c,{id:a}),k=S(),l=c&&c.capacity||Number.MAX_VALUE,m=S(),p=null,n=null;return b[a]={put:function(a,b){if(!x(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in k||g++;k[a]=b;g>l&&this.remove(n.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=
m[a];if(!b)return;e(b)}return k[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===p&&(p=b.p);b===n&&(n=b.n);f(b.n,b.p);delete m[a]}a in k&&(delete k[a],g--)},removeAll:function(){k=S();g=0;m=S();p=n=null},destroy:function(){m=h=k=null;delete b[a]},info:function(){return O({},h,{size:g})}}}var b={};a.info=function(){var a={};r(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function Uf(){this.$get=["$cacheFactory",function(a){return a("templates")}]}
function Yc(a,b){function d(a,b,c){var d=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,e=S();r(a,function(a,g){if(a in p)e[g]=p[a];else{var f=a.match(d);if(!f)throw ca("iscp",b,g,a,c?"controller bindings definition":"isolate scope definition");e[g]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||g};f[4]&&(p[a]=e[g])}});return e}function c(a){var b=a.charAt(0);if(!b||b!==L(b))throw ca("baddir",a);if(a!==a.trim())throw ca("baddir",a);}function e(a){var b=a.require||a.controller&&a.name;
!I(b)&&B(b)&&r(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var f={},g=/^\s*directive:\s*([\w-]+)\s+(.*)$/,h=/(([\w-]+)(?::([^;]+))?;?)/,k=te("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,m=/^(on[a-z]+|formaction)$/,p=S();this.directive=function hc(b,d){hb(b,"name");Ia(b,"directive");E(b)?(c(b),hb(d,"directiveFactory"),f.hasOwnProperty(b)||(f[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];r(f[b],function(g,
f){try{var h=a.invoke(g);C(h)?h={compile:la(h)}:!h.compile&&h.link&&(h.compile=la(h.link));h.priority=h.priority||0;h.index=f;h.name=h.name||b;h.require=e(h);var k=h,l=h.restrict;if(l&&(!E(l)||!/[EACM]/.test(l)))throw ca("badrestrict",l,b);k.restrict=l||"EA";h.$$moduleName=g.$$moduleName;d.push(h)}catch(m){c(m)}});return d}])),f[b].push(d)):r(b,Xb(hc));return this};this.component=function A(a,b){function c(a){function e(b){return C(b)||I(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:
b}var g=b.template||b.templateUrl?b.template:"",f={controller:d,controllerAs:sg(b.controller)||b.controllerAs||"$ctrl",template:e(g),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};r(b,function(a,b){"$"===b.charAt(0)&&(f[b]=a)});return f}if(!E(a))return r(a,Xb(Ra(this,A))),this;var d=b.controller||function(){};r(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,C(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,
c)};this.aHrefSanitizationWhitelist=function(a){return u(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var n=!0;this.debugInfoEnabled=function(a){return u(a)?(n=a,this):n};var F=!1;this.preAssignBindingsEnabled=function(a){return u(a)?(F=a,this):F};var s=!1;this.strictComponentBindingsEnabled=function(a){return u(a)?(s=a,this):s};var v=10;this.onChangesTtl=
function(a){return arguments.length?(v=a,this):v};var y=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(y=a,this):y};var t=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(t=a,this):t};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,b,c,e,p,R,M,T,P,q){function N(){try{if(!--Fa)throw ha=void 0,ca("infchng",v);M.$apply(function(){for(var a=[],b=0,
c=ha.length;b<c;++b)try{ha[b]()}catch(d){a.push(d)}ha=void 0;if(a.length)throw a;})}finally{Fa++}}function qc(a,b){if(b){var c=Object.keys(b),d,e,g;d=0;for(e=c.length;d<e;d++)g=c[d],this[g]=b[g]}else this.$attr={};this.$$element=a}function Ta(a,b,c){Ba.innerHTML="<span "+b+">";b=Ba.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function na(a,b){try{a.addClass(b)}catch(c){}}function da(a,b,c,d,e){a instanceof z||(a=z(a));var g=Ua(a,b,a,c,d,e);da.$$addScopeClass(a);
var f=null;return function(b,c,d){if(!a)throw ca("multilink");hb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);f||(f=(d=d&&d[0])?"foreignobject"!==ya(d)&&ia.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==f?z(ka(f,z("<div>").append(a).html())):c?Sa.clone.call(a):a;if(k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);da.$$addScopeInfo(d,b);c&&
c(d,b);g&&g(b,d,d,h);c||(a=g=null);return d}}function Ua(a,b,c,d,e,g){function f(a,c,d,e){var g,k,l,m,p,n,G;if(t)for(G=Array(c.length),m=0;m<h.length;m+=3)g=h[m],G[g]=c[g];else G=c;m=0;for(p=h.length;m<p;)k=G[h[m++]],c=h[m++],g=h[m++],c?(c.scope?(l=a.$new(),da.$$addScopeInfo(z(k),l)):l=a,n=c.transcludeOnThisElement?Ma(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?Ma(a,b):null,c(g,l,k,d,n)):g&&g(a,k.childNodes,void 0,e)}for(var h=[],k=I(a)||a instanceof z,l,m,p,n,t,G=0;G<a.length;G++){l=new qc;
11===Ca&&Da(a,G,k);m=K(a[G],[],l,0===G?d:void 0,e);(g=m.length?Y(m,a[G],l,b,c,null,[],[],g):null)&&g.scope&&da.$$addScopeClass(l.$$element);l=g&&g.terminal||!(p=a[G].childNodes)||!p.length?null:Ua(p,g?(g.transcludeOnThisElement||!g.templateOnThisElement)&&g.transclude:b);if(g||l)h.push(G,g,l),n=!0,t=t||g;g=null}return n?f:null}function Da(a,b,c){var d=a[b],e=d.parentNode,g;if(d.nodeType===Oa)for(;;){g=e?d.nextSibling:a[b+1];if(!g||g.nodeType!==Oa)break;d.nodeValue+=g.nodeValue;g.parentNode&&g.parentNode.removeChild(g);
c&&g===a[b+1]&&a.splice(b+1,1)}}function Ma(a,b,c){function d(e,g,f,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,g,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:h})}var e=d.$$slots=S(),g;for(g in b.$$slots)e[g]=b.$$slots[g]?Ma(a,b.$$slots[g],c):null;return d}function K(a,b,c,d,e){var g=c.$attr,f;switch(a.nodeType){case 1:f=ya(a);U(b,Ea(f),"E",d,e);for(var k,l,m,p,n=a.attributes,t=0,G=n&&n.length;t<G;t++){var H=!1,F=!1;k=n[t];l=k.name;m=k.value;k=Ea(l);(p=Pa.test(k))&&
(l=l.replace(od,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));(k=k.match(Qa))&&$(k[1])&&(H=l,F=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6));k=Ea(l.toLowerCase());g[k]=l;if(p||!c.hasOwnProperty(k))c[k]=m,kd(a,k)&&(c[k]=!0);wa(a,b,m,k,p);U(b,k,"A",d,e,H,F)}"input"===f&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off");if(!La)break;g=a.className;B(g)&&(g=g.animVal);if(E(g)&&""!==g)for(;a=h.exec(g);)k=Ea(a[2]),U(b,k,"C",d,e)&&(c[k]=Q(a[3])),g=g.substr(a.index+
a[0].length);break;case Oa:oa(b,a.nodeValue);break;case 8:if(!Ka)break;rc(a,b,c,d,e)}b.sort(la);return b}function rc(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=Ea(f[1]);U(b,h,"M",d,e)&&(c[h]=Q(f[2]))}}catch(k){}}function pd(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ca("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return z(d)}function V(a,b,c){return function(d,e,g,f,h){e=
pd(e[0],b,c);return a(d,e,g,f,h)}}function W(a,b,c,d,e,g){var f;return a?da(b,c,d,e,g):function(){f||(f=da(b,c,d,e,g),b=c=g=null);return f.apply(this,arguments)}}function Y(a,b,d,e,g,f,h,k,l){function m(a,b,c,d){if(a){c&&(a=V(a,c,d));a.require=s.require;a.directiveName=R;if(J===s||s.$$isolateScope)a=ta(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=V(b,c,d));b.require=s.require;b.directiveName=R;if(J===s||s.$$isolateScope)b=ta(b,{isolateScope:!0});k.push(b)}}function p(a,e,g,f,l){function m(a,b,c,d){var e;
bb(a)||(d=c,c=b,b=a,a=void 0);T&&(e=M);c||(c=T?ga.parent():ga);if(d){var g=l.$$slots[d];if(g)return g(a,b,e,c,N);if(x(g))throw ca("noslot",d,za(ga));}else return l(a,b,e,c,N)}var n,s,v,y,ba,M,R,ga;b===g?(f=d,ga=d.$$element):(ga=z(g),f=new qc(ga,d));ba=e;J?y=e.$new(!0):t&&(ba=e.$parent);l&&(R=m,R.$$boundTransclude=l,R.isSlotFilled=function(a){return!!l.$$slots[a]});H&&(M=ea(ga,f,R,H,y,e,J));J&&(da.$$addScopeInfo(ga,y,!0,!(A&&(A===J||A===J.$$originalDirective))),da.$$addScopeClass(ga,!0),y.$$isolateBindings=
J.$$isolateBindings,s=qa(e,f,y,y.$$isolateBindings,J),s.removeWatches&&y.$on("$destroy",s.removeWatches));for(n in M){s=H[n];v=M[n];var P=s.$$bindings.bindToController;if(F){v.bindingInfo=P?qa(ba,f,v.instance,P,s):{};var q=v();q!==v.instance&&(v.instance=q,ga.data("$"+s.name+"Controller",q),v.bindingInfo.removeWatches&&v.bindingInfo.removeWatches(),v.bindingInfo=qa(ba,f,v.instance,P,s))}else v.instance=v(),ga.data("$"+s.name+"Controller",v.instance),v.bindingInfo=qa(ba,f,v.instance,P,s)}r(H,function(a,
b){var c=a.require;a.bindToController&&!I(c)&&B(c)&&O(M[b].instance,X(b,c,ga,M))});r(M,function(a){var b=a.instance;if(C(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(C(b.$onInit))try{b.$onInit()}catch(e){c(e)}C(b.$doCheck)&&(ba.$watch(function(){b.$doCheck()}),b.$doCheck());C(b.$onDestroy)&&ba.$on("$destroy",function(){b.$onDestroy()})});n=0;for(s=h.length;n<s;n++)v=h[n],va(v,v.isolateScope?y:e,ga,f,v.require&&X(v.directiveName,v.require,ga,M),R);var N=e;J&&(J.template||
null===J.templateUrl)&&(N=y);a&&a(N,g.childNodes,void 0,l);for(n=k.length-1;0<=n;n--)v=k[n],va(v,v.isolateScope?y:e,ga,f,v.require&&X(v.directiveName,v.require,ga,M),R);r(M,function(a){a=a.instance;C(a.$postLink)&&a.$postLink()})}l=l||{};for(var n=-Number.MAX_VALUE,t=l.newScopeDirective,H=l.controllerDirectives,J=l.newIsolateScopeDirective,A=l.templateDirective,y=l.nonTlbTranscludeDirective,ba=!1,M=!1,T=l.hasElementTranscludeDirective,v=d.$$element=z(b),s,R,P,q=e,N,u=!1,Ib=!1,w,Da=0,D=a.length;Da<
D;Da++){s=a[Da];var Ta=s.$$start,E=s.$$end;Ta&&(v=pd(b,Ta,E));P=void 0;if(n>s.priority)break;if(w=s.scope)s.templateUrl||(B(w)?(aa("new/isolated scope",J||t,s,v),J=s):aa("new/isolated scope",J,s,v)),t=t||s;R=s.name;if(!u&&(s.replace&&(s.templateUrl||s.template)||s.transclude&&!s.$$tlb)){for(w=Da+1;u=a[w++];)if(u.transclude&&!u.$$tlb||u.replace&&(u.templateUrl||u.template)){Ib=!0;break}u=!0}!s.templateUrl&&s.controller&&(H=H||S(),aa("'"+R+"' controller",H[R],s,v),H[R]=s);if(w=s.transclude)if(ba=!0,
s.$$tlb||(aa("transclusion",y,s,v),y=s),"element"===w)T=!0,n=s.priority,P=v,v=d.$$element=z(da.$$createComment(R,d[R])),b=v[0],ma(g,xa.call(P,0),b),P[0].$$parentNode=P[0].parentNode,q=W(Ib,P,e,n,f&&f.name,{nonTlbTranscludeDirective:y});else{var na=S();if(B(w)){P=[];var Ua=S(),Ma=S();r(w,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Ua[a]=b;na[b]=null;Ma[b]=c});r(v.contents(),function(a){var b=Ua[Ea(ya(a))];b?(Ma[b]=!0,na[b]=na[b]||[],na[b].push(a)):P.push(a)});r(Ma,function(a,b){if(!a)throw ca("reqslot",
b);});for(var L in na)na[L]&&(na[L]=W(Ib,na[L],e))}else P=z(nc(b)).contents();v.empty();q=W(Ib,P,e,void 0,void 0,{needsNewScope:s.$$isolateScope||s.$$newScope});q.$$slots=na}if(s.template)if(M=!0,aa("template",A,s,v),A=s,w=C(s.template)?s.template(v,d):s.template,w=Ia(w),s.replace){f=s;P=kc.test(w)?qd(ka(s.templateNamespace,Q(w))):[];b=P[0];if(1!==P.length||1!==b.nodeType)throw ca("tplrt",R,"");ma(g,v,b);D={$attr:{}};w=K(b,[],D);var rc=a.splice(Da+1,a.length-(Da+1));(J||t)&&Z(w,J,t);a=a.concat(w).concat(rc);
fa(d,D);D=a.length}else v.html(w);if(s.templateUrl)M=!0,aa("template",A,s,v),A=s,s.replace&&(f=s),p=ja(a.splice(Da,a.length-Da),v,d,g,ba&&q,h,k,{controllerDirectives:H,newScopeDirective:t!==s&&t,newIsolateScopeDirective:J,templateDirective:A,nonTlbTranscludeDirective:y}),D=a.length;else if(s.compile)try{N=s.compile(v,d,q);var U=s.$$originalDirective||s;C(N)?m(null,Ra(U,N),Ta,E):N&&m(Ra(U,N.pre),Ra(U,N.post),Ta,E)}catch($){c($,za(v))}s.terminal&&(p.terminal=!0,n=Math.max(n,s.priority))}p.scope=t&&
!0===t.scope;p.transcludeOnThisElement=ba;p.templateOnThisElement=M;p.transclude=q;l.hasElementTranscludeDirective=T;return p}function X(a,b,c,d){var e;if(E(b)){var g=b.match(l);b=b.substring(g[0].length);var f=g[1]||g[3],g="?"===g[2];"^^"===f?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e=f?c.inheritedData(h):c.data(h)}if(!e&&!g)throw ca("ctreq",b,a);}else if(I(b))for(e=[],f=0,g=b.length;f<g;f++)e[f]=X(a,b[f],c,d);else B(b)&&(e={},r(b,function(b,g){e[g]=X(a,b,c,d)}));return e||
null}function ea(a,b,c,d,e,g,f){var h=S(),k;for(k in d){var l=d[k],m={$scope:l===f||l.$$isolateScope?e:g,$element:a,$attrs:b,$transclude:c},p=l.controller;"@"===p&&(p=b[l.name]);m=R(p,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function Z(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=$b(a[d],{$$isolateScope:b,$$newScope:c})}function U(b,c,e,g,h,k,l){if(c===h)return null;var m=null;if(f.hasOwnProperty(c)){h=a.get(c+"Directive");for(var p=0,n=h.length;p<n;p++)if(c=
h[p],(x(g)||g>c.priority)&&-1!==c.restrict.indexOf(e)){k&&(c=$b(c,{$$start:k,$$end:l}));if(!c.$$bindings){var t=m=c,G=c.name,H={isolateScope:null,bindToController:null};B(t.scope)&&(!0===t.bindToController?(H.bindToController=d(t.scope,G,!0),H.isolateScope={}):H.isolateScope=d(t.scope,G,!1));B(t.bindToController)&&(H.bindToController=d(t.bindToController,G,!0));if(H.bindToController&&!t.controller)throw ca("noctrl",G);m=m.$$bindings=H;B(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c);
m=c}}return m}function $(b){if(f.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function fa(a,b){var c=b.$attr,d=a.$attr;r(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+(("style"===e?";":" ")+b[e]):b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}function ja(a,b,d,g,f,h,k,l){var m=[],p,n,t=b[0],H=a.shift(),s=$b(H,{templateUrl:null,
transclude:null,replace:null,$$originalDirective:H}),F=C(H.templateUrl)?H.templateUrl(b,d):H.templateUrl,v=H.templateNamespace;b.empty();e(F).then(function(c){var e,G;c=Ia(c);if(H.replace){c=kc.test(c)?qd(ka(v,Q(c))):[];e=c[0];if(1!==c.length||1!==e.nodeType)throw ca("tplrt",H.name,F);c={$attr:{}};ma(g,b,e);var J=K(e,[],c);B(H.scope)&&Z(J,!0);a=J.concat(a);fa(d,c)}else e=t,b.html(c);a.unshift(s);p=Y(a,e,d,f,b,H,h,k,l);r(g,function(a,c){a===e&&(g[c]=b[0])});for(n=Ua(b[0].childNodes,f);m.length;){c=
m.shift();G=m.shift();var y=m.shift(),A=m.shift(),J=b[0];if(!c.$$destroyed){if(G!==t){var M=G.className;l.hasElementTranscludeDirective&&H.replace||(J=nc(e));ma(y,z(G),J);na(z(J),M)}G=p.transcludeOnThisElement?Ma(c,p.transclude,A):A;p(n,c,J,g,G)}}m=null}).catch(function(a){bc(a)&&c(a)});return function(a,b,c,d,e){a=e;b.$$destroyed||(m?m.push(b,c,d,a):(p.transcludeOnThisElement&&(a=Ma(b,p.transclude,e)),p(n,b,c,d,a)))}}function la(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<
b.name?-1:1:a.index-b.index}function aa(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw ca("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,za(d));}function oa(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&da.$$addBindingClass(a);return function(a,c){var e=c.parent();b||da.$$addBindingClass(e);da.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ka(a,b){a=L(a||"html");switch(a){case "svg":case "math":var c=
w.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function ua(a,b){if("srcdoc"===b)return T.HTML;var c=ya(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return T.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b||"link"===c&&"href"===b)return T.RESOURCE_URL}function wa(a,c,d,e,g){var f=ua(a,e),h=k[e]||g,l=b(d,!g,f,h);if(l){if("multiple"===e&&"select"===ya(a))throw ca("selmulti",
za(a));if(m.test(e))throw ca("nodomevents");c.push({priority:100,compile:function(){return{pre:function(a,c,g){c=g.$$observers||(g.$$observers=S());var k=g[e];k!==d&&(l=k&&b(k,!0,f,h),d=k);l&&(g[e]=l(a),(c[e]||(c[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||a).$watch(l,function(a,b){"class"===e&&a!==b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function ma(a,b,c){var d=b[0],e=b.length,g=d.parentNode,f,h;if(a)for(f=0,h=a.length;f<h;f++)if(a[f]===d){a[f++]=c;h=f+e-1;for(var k=a.length;f<
k;f++,h++)h<k?a[f]=a[h]:delete a[f];a.length-=e-1;a.context===d&&(a.context=c);break}g&&g.replaceChild(c,d);a=w.document.createDocumentFragment();for(f=0;f<e;f++)a.appendChild(b[f]);z.hasData(d)&&(z.data(c,z.data(d)),z(d).off("$destroy"));z.cleanData(a.querySelectorAll("*"));for(f=1;f<e;f++)delete b[f];b[0]=c;b.length=1}function ta(a,b){return O(function(){return a.apply(null,arguments)},a,b)}function va(a,b,d,e,g,f){try{a(b,d,e,g,f)}catch(h){c(h,za(d))}}function pa(a,b){if(s)throw ca("missingattr",
a,b);}function qa(a,c,d,e,g){function f(b,c,e){C(d.$onChanges)&&!cc(c,e)&&(ha||(a.$$postDigest(N),ha=[]),m||(m={},ha.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Jb(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;r(e,function(e,h){var m=e.attrName,n=e.optional,t,G,s,F;switch(e.mode){case "@":n||ra.call(c,m)||(pa(m,g.name),d[h]=c[m]=void 0);n=c.$observe(m,function(a){if(E(a)||Na(a))f(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;t=c[m];E(t)?d[h]=b(t)(a):Na(t)&&(d[h]=t);l[h]=new Jb(sc,
d[h]);k.push(n);break;case "=":if(!ra.call(c,m)){if(n)break;pa(m,g.name);c[m]=void 0}if(n&&!c[m])break;G=p(c[m]);F=G.literal?sa:cc;s=G.assign||function(){t=d[h]=G(a);throw ca("nonassign",c[m],m,g.name);};t=d[h]=G(a);n=function(b){F(b,d[h])||(F(b,t)?s(a,b=d[h]):d[h]=b);return t=b};n.$stateful=!0;n=e.collection?a.$watchCollection(c[m],n):a.$watch(p(c[m],n),null,G.literal);k.push(n);break;case "<":if(!ra.call(c,m)){if(n)break;pa(m,g.name);c[m]=void 0}if(n&&!c[m])break;G=p(c[m]);var v=G.literal,y=d[h]=
G(a);l[h]=new Jb(sc,d[h]);n=a.$watch(G,function(a,b){if(b===a){if(b===y||v&&sa(b,y))return;b=y}f(h,a,b);d[h]=a},v);k.push(n);break;case "&":n||ra.call(c,m)||pa(m,g.name);G=c.hasOwnProperty(m)?p(c[m]):D;if(G===D&&n)break;d[h]=function(b){return G(a,b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var Ja=/^\w/,Ba=w.document.createElement("div"),Ka=y,La=t,Fa=v,ha;qc.prototype={$normalize:Ea,$addClass:function(a){a&&0<a.length&&P.addClass(this.$$element,
a)},$removeClass:function(a){a&&0<a.length&&P.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=rd(a,b);c&&c.length&&P.addClass(this.$$element,c);(c=rd(b,a))&&c.length&&P.removeClass(this.$$element,c)},$set:function(a,b,d,e){var g=kd(this.$$element[0],a),f=sd[a],h=a;g?(this.$$element.prop(a,b),e=g):f&&(this[f]=b,h=f);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Vc(a,"-"));g=ya(this.$$element);if("a"===g&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=
b=q(b,"src"===a);else if("img"===g&&"srcset"===a&&u(b)){for(var g="",f=Q(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(f)?k:/(,)/,f=f.split(k),k=Math.floor(f.length/2),l=0;l<k;l++)var m=2*l,g=g+q(Q(f[m]),!0),g=g+(" "+Q(f[m+1]));f=Q(f[2*l]).split(/\s/);g+=q(Q(f[0]),!0);2===f.length&&(g+=" "+Q(f[1]));this[a]=b=g}!1!==d&&(null===b||x(b)?this.$$element.removeAttr(e):Ja.test(e)?this.$$element.attr(e,b):Ta(this.$$element[0],e,b));(a=this.$$observers)&&r(a[h],function(a){try{a(b)}catch(d){c(d)}})},
$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=S()),e=d[a]||(d[a]=[]);e.push(b);M.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||x(c[a])||b(c[a])});return function(){cb(e,b)}}};var Ga=b.startSymbol(),Ha=b.endSymbol(),Ia="{{"===Ga&&"}}"===Ha?ab:function(a){return a.replace(/\{\{/g,Ga).replace(/}}/g,Ha)},Pa=/^ngAttr[A-Z]/,Qa=/^(.+)Start$/;da.$$addBindingInfo=n?function(a,b){var c=a.data("$binding")||[];I(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:D;da.$$addBindingClass=
n?function(a){na(a,"ng-binding")}:D;da.$$addScopeInfo=n?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:D;da.$$addScopeClass=n?function(a,b){na(a,b?"ng-isolate-scope":"ng-scope")}:D;da.$$createComment=function(a,b){var c="";n&&(c=" "+(a||"")+": ",b&&(c+=b+" "));return w.document.createComment(c)};return da}]}function Jb(a,b){this.previousValue=a;this.currentValue=b}function Ea(a){return a.replace(od,"").replace(tg,function(a,d,c){return c?d.toUpperCase():d})}function rd(a,
b){var d="",c=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],h=0;h<e.length;h++)if(g===e[h])continue a;d+=(0<d.length?" ":"")+g}return d}function qd(a){a=z(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===Oa&&""===d.nodeValue.trim())&&ug.call(a,b,1)}return a}function sg(a,b){if(b&&E(b))return b;if(E(a)){var d=td.exec(a);if(d)return d[3]}}function yf(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,
c){Ia(b,"controller");B(b)?O(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(d,c){function e(a,b,c,d){if(!a||!B(a.$scope))throw K("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,h,k){var l,m,p;h=!0===h;k&&E(k)&&(p=k);if(E(f)){k=f.match(td);if(!k)throw ud("ctrlfmt",f);m=k[1];p=p||k[3];f=a.hasOwnProperty(m)?a[m]:Xc(g.$scope,m,!0)||(b?Xc(c,m,!0):void 0);if(!f)throw ud("ctrlreg",m);sb(f,m,!0)}if(h)return h=(I(f)?f[f.length-1]:f).prototype,l=Object.create(h||
null),p&&e(g,p,l,m||f.name),O(function(){var a=d.invoke(f,l,g,m);a!==l&&(B(a)||C(a))&&(l=a,p&&e(g,p,l,m||f.name));return l},{instance:l,identifier:p});l=d.instantiate(f,g,m);p&&e(g,p,l,m||f.name);return l}}]}function zf(){this.$get=["$window",function(a){return z(a.document)}]}function Af(){this.$get=["$document","$rootScope",function(a,b){function d(){e=c.hidden}var c=a[0],e=c&&c.hidden;a.on("visibilitychange",d);b.$on("$destroy",function(){a.off("visibilitychange",d)});return function(){return e}}]}
function Bf(){this.$get=["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function tc(a){return B(a)?fa(a)?a.toISOString():eb(a):a}function Gf(){this.$get=function(){return function(a){if(!a)return"";var b=[];Oc(a,function(a,c){null===a||x(a)||C(a)||(I(a)?r(a,function(a){b.push(ja(c)+"="+ja(tc(a)))}):b.push(ja(c)+"="+ja(tc(a))))});return b.join("&")}}}function Hf(){this.$get=function(){return function(a){function b(a,e,f){null===a||x(a)||(I(a)?r(a,function(a,c){b(a,e+"["+(B(a)?
c:"")+"]")}):B(a)&&!fa(a)?Oc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push(ja(e)+"="+ja(tc(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function uc(a,b){if(E(a)){var d=a.replace(vg,"").trim();if(d){var c=b("Content-Type"),c=c&&0===c.indexOf(vd),e;(e=c)||(e=(e=d.match(wg))&&xg[e[0]].test(d));if(e)try{a=Rc(d)}catch(f){if(!c)return a;throw Kb("baddata",a,f);}}}return a}function wd(a){var b=S(),d;E(a)?r(a.split("\n"),function(a){d=a.indexOf(":");var e=L(Q(a.substr(0,d)));a=
Q(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):B(a)&&r(a,function(a,d){var f=L(d),g=Q(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function xd(a){var b;return function(d){b||(b=wd(a));return d?(d=b[L(d)],void 0===d&&(d=null),d):b}}function yd(a,b,d,c){if(C(c))return c(a,b,d);r(c,function(c){a=c(a,b,d)});return a}function Ff(){var a=this.defaults={transformResponse:[uc],transformRequest:[function(a){return B(a)&&"[object File]"!==ia.call(a)&&"[object Blob]"!==ia.call(a)&&"[object FormData]"!==ia.call(a)?
eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ka(vc),put:ka(vc),patch:ka(vc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},b=!1;this.useApplyAsync=function(a){return u(a)?(b=!!a,this):b};var d=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(c,e,f,g,h,k,l,m){function p(b){function d(a,b){for(var c=0,
e=b.length;c<e;){var g=b[c++],f=b[c++];a=a.then(g,f)}b.length=0;return a}function e(a,b){var c,d={};r(a,function(a,e){C(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}function g(a){var b=O({},a);b.data=yd(a.data,a.headers,a.status,f.transformResponse);a=a.status;return 200<=a&&300>a?b:k.reject(b)}if(!B(b))throw K("$http")("badreq",b);if(!E(m.valueOf(b.url)))throw K("$http")("badreq",b.url);var f=O({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,
jsonpCallbackParam:a.jsonpCallbackParam},b);f.headers=function(b){var c=a.headers,d=O({},b.headers),g,f,h,c=O({},c.common,c[L(b.method)]);a:for(g in c){f=L(g);for(h in d)if(L(h)===f)continue a;d[g]=c[g]}return e(d,ka(b))}(b);f.method=ub(f.method);f.paramSerializer=E(f.paramSerializer)?l.get(f.paramSerializer):f.paramSerializer;c.$$incOutstandingRequestCount();var h=[],p=[];b=k.resolve(f);r(y,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&
p.push(a.response,a.responseError)});b=d(b,h);b=b.then(function(b){var c=b.headers,d=yd(b.data,xd(c),void 0,b.transformRequest);x(d)&&r(c,function(a,b){"content-type"===L(b)&&delete c[b]});x(b.withCredentials)&&!x(a.withCredentials)&&(b.withCredentials=a.withCredentials);return n(b,d).then(g,g)});b=d(b,p);return b=b.finally(function(){c.$$completeOutstandingRequest(D)})}function n(c,d){function g(a){if(a){var c={};r(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():
h.$apply(d)}});return c}}function l(a,c,d,e,g){function f(){n(c,a,d,e,g)}M&&(200<=a&&300>a?M.put(N,[a,c,wd(d),e,g]):M.remove(N));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function n(a,b,d,e,g){b=-1<=b?b:0;(200<=b&&300>b?J.resolve:J.reject)({data:a,status:b,headers:xd(d),config:c,statusText:e,xhrStatus:g})}function G(a){n(a.data,a.status,ka(a.headers()),a.statusText,a.xhrStatus)}function y(){var a=p.pendingRequests.indexOf(c);-1!==a&&p.pendingRequests.splice(a,1)}var J=k.defer(),R=J.promise,M,
T,P=c.headers,q="jsonp"===L(c.method),N=c.url;q?N=m.getTrustedResourceUrl(N):E(N)||(N=m.valueOf(N));N=F(N,c.paramSerializer(c.params));q&&(N=s(N,c.jsonpCallbackParam));p.pendingRequests.push(c);R.then(y,y);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(M=B(c.cache)?c.cache:B(a.cache)?a.cache:v);M&&(T=M.get(N),u(T)?T&&C(T.then)?T.then(G,G):I(T)?n(T[1],T[0],ka(T[2]),T[3],T[4]):n(T,200,{},"OK","complete"):M.put(N,R));x(T)&&((T=zd(c.url)?f()[c.xsrfCookieName||a.xsrfCookieName]:
void 0)&&(P[c.xsrfHeaderName||a.xsrfHeaderName]=T),e(c.method,N,d,l,P,c.timeout,c.withCredentials,c.responseType,g(c.eventHandlers),g(c.uploadEventHandlers)));return R}function F(a,b){0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}function s(a,b){var c=a.split("?");if(2<c.length)throw Kb("badjsonp",a);c=ec(c[1]);r(c,function(c,d){if("JSON_CALLBACK"===c)throw Kb("badjsonp",a);if(d===b)throw Kb("badjsonp",b,a);});return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var v=g("$http");
a.paramSerializer=E(a.paramSerializer)?l.get(a.paramSerializer):a.paramSerializer;var y=[];r(d,function(a){y.unshift(E(a)?l.get(a):l.invoke(a))});p.pendingRequests=[];(function(a){r(arguments,function(a){p[a]=function(b,c){return p(O({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){p[a]=function(b,c,d){return p(O({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");p.defaults=a;return p}]}function Jf(){this.$get=function(){return function(){return new w.XMLHttpRequest}}}
function If(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return yg(a,c,a.defer,b,d[0])}]}function yg(a,b,d,c,e){function f(a,b,d){a=a.replace("JSON_CALLBACK",b);var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m);f.removeEventListener("error",m);e.body.removeChild(f);f=null;var g=-1,F="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),F=a.type,g="error"===a.type?404:
200);d&&d(g,F)};f.addEventListener("load",m);f.addEventListener("error",m);e.body.appendChild(f);return m}return function(e,h,k,l,m,p,n,F,s,v){function y(){q&&q();A&&A.abort()}function t(a,b,c,e,g,f){u(G)&&d.cancel(G);q=A=null;a(b,c,e,g,f)}h=h||a.url();if("jsonp"===L(e))var Aa=c.createCallback(h),q=f(h,Aa,function(a,b){var d=200===a&&c.getResponse(Aa);t(l,a,d,"",b,"complete");c.removeCallback(Aa)});else{var A=b(e,h);A.open(e,h,!0);r(m,function(a,b){u(a)&&A.setRequestHeader(b,a)});A.onload=function(){var a=
A.statusText||"",b="response"in A?A.response:A.responseText,c=1223===A.status?204:A.status;0===c&&(c=b?200:"file"===ta(h).protocol?404:0);t(l,c,b,A.getAllResponseHeaders(),a,"complete")};A.onerror=function(){t(l,-1,null,null,"","error")};A.onabort=function(){t(l,-1,null,null,"","abort")};A.ontimeout=function(){t(l,-1,null,null,"","timeout")};r(s,function(a,b){A.addEventListener(b,a)});r(v,function(a,b){A.upload.addEventListener(b,a)});n&&(A.withCredentials=!0);if(F)try{A.responseType=F}catch(H){if("json"!==
F)throw H;}A.send(x(k)?null:k)}if(0<p)var G=d(y,p);else p&&C(p.then)&&p.then(y)}}function Df(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(p,a).replace(n,b)}function h(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function k(f,k,p,n){function t(a){try{var b=a;a=p?e.getTrusted(p,
b):e.valueOf(b);return n&&!u(a)?a:gc(a)}catch(d){c(Fa.interr(f,d))}}if(!f.length||-1===f.indexOf(a)){var r;k||(k=g(f),r=la(k),r.exp=f,r.expressions=[],r.$$watchDelegate=h);return r}n=!!n;var q,A,H=0,G=[],ba=[];r=f.length;for(var J=[],R=[];H<r;)if(-1!==(q=f.indexOf(a,H))&&-1!==(A=f.indexOf(b,q+l)))H!==q&&J.push(g(f.substring(H,q))),H=f.substring(q+l,A),G.push(H),ba.push(d(H,t)),H=A+m,R.push(J.length),J.push("");else{H!==r&&J.push(g(f.substring(H)));break}p&&1<J.length&&Fa.throwNoconcat(f);if(!k||G.length){var M=
function(a){for(var b=0,c=G.length;b<c;b++){if(n&&x(a[b]))return;J[R[b]]=a[b]}return J.join("")};return O(function(a){var b=0,d=G.length,e=Array(d);try{for(;b<d;b++)e[b]=ba[b](a);return M(e)}catch(g){c(Fa.interr(f,g))}},{exp:f,expressions:G,$$watchDelegate:function(a,b){var c;return a.$watchGroup(ba,function(d,e){var g=M(d);b.call(this,g,d!==e?c:g,a);c=g})}})}}var l=a.length,m=b.length,p=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");k.startSymbol=function(){return a};k.endSymbol=
function(){return b};return k}]}function Ef(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,d,c,e){function f(f,k,l,m){function p(){n?f.apply(null,F):f(y)}var n=4<arguments.length,F=n?xa.call(arguments,4):[],s=b.setInterval,v=b.clearInterval,y=0,t=u(m)&&!m,r=(t?c:d).defer(),q=r.promise;l=u(l)?l:0;q.$$intervalId=s(function(){t?e.defer(p):a.$evalAsync(p);r.notify(y++);0<l&&y>=l&&(r.resolve(y),v(q.$$intervalId),delete g[q.$$intervalId]);t||a.$apply()},k);g[q.$$intervalId]=r;return q}
var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].promise.$$state.pur=!0,g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function wc(a){a=a.split("/");for(var b=a.length;b--;)a[b]=fb(a[b].replace(/%2F/g,"/"));return a.join("/")}function Ad(a,b){var d=ta(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=Z(d.port)||zg[d.protocol]||null}function Bd(a,b,d){if(Ag.test(a))throw kb("badpath",a);var c="/"!==
a.charAt(0);c&&(a="/"+a);a=ta(a);for(var c=(c&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname).split("/"),e=c.length;e--;)c[e]=decodeURIComponent(c[e]),d&&(c[e]=c[e].replace(/\//g,"%2F"));d=c.join("/");b.$$path=d;b.$$search=ec(a.search);b.$$hash=decodeURIComponent(a.hash);b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function xc(a,b){return a.slice(0,b.length)===b}function ua(a,b){if(xc(b,a))return b.substr(a.length)}function La(a){var b=a.indexOf("#");return-1===b?a:
a.substr(0,b)}function lb(a){return a.replace(/(#.+)|#$/,"$1")}function yc(a,b,d){this.$$html5=!0;d=d||"";Ad(a,this);this.$$parse=function(a){var d=ua(b,a);if(!E(d))throw kb("ipthprfx",a,b);Bd(d,this,!0);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=fc(this.$$search),d=this.$$hash?"#"+fb(this.$$hash):"";this.$$url=wc(this.$$path)+(a?"?"+a:"")+d;this.$$absUrl=b+this.$$url.substr(1);this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),
!0;var f,g;u(f=ua(a,c))?(g=f,g=d&&u(f=ua(d,f))?b+(ua("/",f)||f):a+g):u(f=ua(b,c))?g=b+f:b===c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function zc(a,b,d){Ad(a,this);this.$$parse=function(c){var e=ua(a,c)||ua(b,c),f;x(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",x(e)&&(a=c,this.replace())):(f=ua(d,e),x(f)&&(f=e));Bd(f,this,!1);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;xc(f,e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};this.$$compose=function(){var b=fc(this.$$search),
e=this.$$hash?"#"+fb(this.$$hash):"";this.$$url=wc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?d+this.$$url:"");this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(b,d){return La(a)===La(b)?(this.$$parse(b),!0):!1}}function Cd(a,b,d){this.$$html5=!0;zc.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a===La(c)?f=c:(g=ua(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=fc(this.$$search),
e=this.$$hash?"#"+fb(this.$$hash):"";this.$$url=wc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+d+this.$$url;this.$$urlUpdatedByLocation=!0}}function Lb(a){return function(){return this[a]}}function Dd(a,b){return function(d){if(x(d))return this[a];this[a]=b(d);this.$$compose();return this}}function Lf(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return u(b)?(a=b,this):a};this.html5Mode=function(a){if(Na(a))return b.enabled=a,this;if(B(a)){Na(a.enabled)&&(b.enabled=
a.enabled);Na(a.requireBase)&&(b.requireBase=a.requireBase);if(Na(a.rewriteLinks)||E(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function h(a,b,d){var e=l.url(),g=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(f){throw l.url(e),l.$$state=g,f;}}function k(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,m;m=c.baseHref();var p=c.url(),n;if(b.enabled){if(!m&&
b.requireBase)throw kb("nobase");n=p.substring(0,p.indexOf("/",p.indexOf("//")+2))+(m||"/");m=e.history?yc:Cd}else n=La(p),m=zc;var F=n.substr(0,La(n).lastIndexOf("/")+1);l=new m(n,F,"#"+a);l.$$parseLinkUrl(p,p);l.$$state=c.state();var s=/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var h=z(a.target);"a"!==ya(h[0]);)if(h[0]===f[0]||!(h=h.parent())[0])return;if(!E(e)||!x(h.attr(e))){var e=h.prop("href"),
k=h.attr("href")||h.attr("xlink:href");B(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=ta(e.animVal).href);s.test(e)||!e||h.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(e,k)||(a.preventDefault(),l.absUrl()!==c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}});lb(l.absUrl())!==lb(p)&&c.url(l.absUrl(),!0);var v=!0;c.onUrlChange(function(a,b){xc(a,F)?(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,g;a=lb(a);l.$$parse(a);l.$$state=b;g=d.$broadcast("$locationChangeStart",
a,c,b,e).defaultPrevented;l.absUrl()===a&&(g?(l.$$parse(c),l.$$state=e,h(c,!1,e)):(v=!1,k(c,e)))}),d.$$phase||d.$digest()):g.location.href=a});d.$watch(function(){if(v||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var a=lb(c.url()),b=lb(l.absUrl()),g=c.state(),f=l.$$replace,m=a!==b||l.$$html5&&e.history&&g!==l.$$state;if(v||m)v=!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,g).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=g):
(m&&h(b,f,g===l.$$state?null:l.$$state),k(a,g)))})}l.$$replace=!1});return l}]}function Mf(){var a=!0,b=this;this.debugEnabled=function(b){return u(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){bc(a)&&(a.stack&&f?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||D;return function(){var a=[];r(arguments,function(b){a.push(c(b))});return Function.prototype.apply.call(e,
b,a)}}var f=Ca||/\bEdge\//.test(d.navigator&&d.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Bg(a){return a+""}function Cg(a,b){return"undefined"!==typeof a?a:b}function Ed(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function Dg(a,b){switch(a.type){case q.MemberExpression:if(a.computed)return!1;break;case q.UnaryExpression:return 1;case q.BinaryExpression:return"+"!==
a.operator?1:!1;case q.CallExpression:return!1}return void 0===b?Fd:b}function W(a,b,d){var c,e,f=a.isPure=Dg(a,d);switch(a.type){case q.Program:c=!0;r(a.body,function(a){W(a.expression,b,f);c=c&&a.expression.constant});a.constant=c;break;case q.Literal:a.constant=!0;a.toWatch=[];break;case q.UnaryExpression:W(a.argument,b,f);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case q.BinaryExpression:W(a.left,b,f);W(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=
a.left.toWatch.concat(a.right.toWatch);break;case q.LogicalExpression:W(a.left,b,f);W(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case q.ConditionalExpression:W(a.test,b,f);W(a.alternate,b,f);W(a.consequent,b,f);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case q.Identifier:a.constant=!1;a.toWatch=[a];break;case q.MemberExpression:W(a.object,b,f);a.computed&&W(a.property,b,f);a.constant=a.object.constant&&
(!a.computed||a.property.constant);a.toWatch=a.constant?[]:[a];break;case q.CallExpression:c=d=a.filter?!b(a.callee.name).$stateful:!1;e=[];r(a.arguments,function(a){W(a,b,f);c=c&&a.constant;e.push.apply(e,a.toWatch)});a.constant=c;a.toWatch=d?e:[a];break;case q.AssignmentExpression:W(a.left,b,f);W(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case q.ArrayExpression:c=!0;e=[];r(a.elements,function(a){W(a,b,f);c=c&&a.constant;e.push.apply(e,a.toWatch)});a.constant=c;
a.toWatch=e;break;case q.ObjectExpression:c=!0;e=[];r(a.properties,function(a){W(a.value,b,f);c=c&&a.value.constant;e.push.apply(e,a.value.toWatch);a.computed&&(W(a.key,b,!1),c=c&&a.key.constant,e.push.apply(e,a.key.toWatch))});a.constant=c;a.toWatch=e;break;case q.ThisExpression:a.constant=!1;a.toWatch=[];break;case q.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Gd(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Hd(a){return a.type===
q.Identifier||a.type===q.MemberExpression}function Id(a){if(1===a.body.length&&Hd(a.body[0].expression))return{type:q.AssignmentExpression,left:a.body[0].expression,right:{type:q.NGValueParameter},operator:"="}}function Jd(a){this.$filter=a}function Kd(a){this.$filter=a}function Mb(a,b,d){this.ast=new q(a,d);this.astCompiler=d.csp?new Kd(b):new Jd(b)}function Ac(a){return C(a.valueOf)?a.valueOf():Eg.call(a)}function Nf(){var a=S(),b={"true":!0,"false":!1,"null":null,undefined:void 0},d,c;this.addLiteral=
function(a,c){b[a]=c};this.setIdentifierFns=function(a,b){d=a;c=b;return this};this.$get=["$filter",function(e){function f(b,c){var d,g;switch(typeof b){case "string":return g=b=b.trim(),d=a[g],d||(d=new Nb(n),d=(new Mb(d,e,n)).parse(b),d.constant?d.$$watchDelegate=m:d.oneTime?d.$$watchDelegate=d.literal?l:k:d.inputs&&(d.$$watchDelegate=h),a[g]=d),p(d,c);case "function":return p(b,c);default:return p(D,c)}}function g(a,b,c){return null==a||null==b?a===b:"object"!==typeof a||(a=Ac(a),"object"!==typeof a||
c)?a===b||a!==a&&b!==b:!1}function h(a,b,c,d,e){var f=d.inputs,h;if(1===f.length){var k=g,f=f[0];return a.$watch(function(a){var b=f(a);g(b,k,f.isPure)||(h=d(a,void 0,void 0,[b]),k=b&&Ac(b));return h},b,c,e)}for(var l=[],m=[],p=0,n=f.length;p<n;p++)l[p]=g,m[p]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var k=f[c](a);if(b||(b=!g(k,l[c],f[c].isPure)))m[c]=k,l[c]=k&&Ac(k)}b&&(h=d(a,void 0,void 0,m));return h},b,c,e)}function k(a,b,c,d,e){function g(a){return d(a)}function f(a,
c,d){l=a;C(b)&&b(a,c,d);u(a)&&d.$$postDigest(function(){u(l)&&k()})}var k,l;return k=d.inputs?h(a,f,c,d,e):a.$watch(g,f,c)}function l(a,b,c,d){function e(a){var b=!0;r(a,function(a){u(a)||(b=!1)});return b}var g,f;return g=a.$watch(function(a){return d(a)},function(a,c,d){f=a;C(b)&&b(a,c,d);e(a)&&d.$$postDigest(function(){e(f)&&g()})},c)}function m(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function p(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,e=c!==l&&c!==k?function(c,
e,g,f){g=d&&f?f[0]:a(c,e,g,f);return b(g,c,e)}:function(c,d,e,g){e=a(c,d,e,g);c=b(e,c,d);return u(e)?c:e},d=!a.inputs;c&&c!==h?(e.$$watchDelegate=c,e.inputs=a.inputs):b.$stateful||(e.$$watchDelegate=h,e.inputs=a.inputs?a.inputs:[a]);e.inputs&&(e.inputs=e.inputs.map(function(a){return a.isPure===Fd?function(b){return a(b)}:a}));return e}var n={csp:Ja().noUnsafeEval,literals:pa(b),isIdentifierStart:C(d)&&d,isIdentifierContinue:C(c)&&c};f.$$getAst=function(a){var b=new Nb(n);return(new Mb(b,e,n)).getAst(a).ast};
return f}]}function Pf(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,d){return Ld(function(a){b.$evalAsync(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Qf(){var a=!0;this.$get=["$browser","$exceptionHandler",function(b,d){return Ld(function(a){b.defer(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Ld(a,b,d){function c(){return new e}function e(){var a=this.promise=new f;this.resolve=function(b){k(a,
b)};this.reject=function(b){m(a,b)};this.notify=function(b){n(a,b)}}function f(){this.$$state={status:0}}function g(){for(;!u&&w.length;){var a=w.shift();if(!a.pur){a.pur=!0;var c=a.value,c="Possibly unhandled rejection: "+("function"===typeof c?c.toString().replace(/ \{[\s\S]*$/,""):x(c)?"undefined":"string"!==typeof c?De(c,void 0):c);bc(a.value)?b(a.value,c):b(c)}}}function h(c){!d||c.pending||2!==c.status||c.pur||(0===u&&0===w.length&&a(g),w.push(c));!c.processScheduled&&c.pending&&(c.processScheduled=
!0,++u,a(function(){var e,f,h;h=c.pending;c.processScheduled=!1;c.pending=void 0;try{for(var l=0,p=h.length;l<p;++l){c.pur=!0;f=h[l][0];e=h[l][c.status];try{C(e)?k(f,e(c.value)):1===c.status?k(f,c.value):m(f,c.value)}catch(n){m(f,n),n&&!0===n.$$passToExceptionHandler&&b(n)}}}finally{--u,d&&0===u&&a(g)}}))}function k(a,b){a.$$state.status||(b===a?p(a,t("qcycle",b)):l(a,b))}function l(a,b){function c(b){g||(g=!0,l(a,b))}function d(b){g||(g=!0,p(a,b))}function e(b){n(a,b)}var f,g=!1;try{if(B(b)||C(b))f=
b.then;C(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,h(a.$$state))}catch(k){d(k)}}function m(a,b){a.$$state.status||p(a,b)}function p(a,b){a.$$state.value=b;a.$$state.status=2;h(a.$$state)}function n(c,d){var e=c.$$state.pending;0>=c.$$state.status&&e&&e.length&&a(function(){for(var a,c,g=0,f=e.length;g<f;g++){c=e[g][0];a=e[g][3];try{n(c,C(a)?a(d):d)}catch(h){b(h)}}})}function F(a){var b=new f;m(b,a);return b}function s(a,b,c){var d=null;try{C(c)&&(d=c())}catch(e){return F(e)}return d&&
C(d.then)?d.then(function(){return b(a)},F):b(a)}function v(a,b,c,d){var e=new f;k(e,a);return e.then(b,c,d)}function q(a){if(!C(a))throw t("norslvr",a);var b=new f;a(function(a){k(b,a)},function(a){m(b,a)});return b}var t=K("$q",TypeError),u=0,w=[];O(f.prototype,{then:function(a,b,c){if(x(a)&&x(b)&&x(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&h(this.$$state);return d},"catch":function(a){return this.then(null,
a)},"finally":function(a,b){return this.then(function(b){return s(b,A,a)},function(b){return s(b,F,a)},b)}});var A=v;q.prototype=f.prototype;q.defer=c;q.reject=F;q.when=v;q.resolve=A;q.all=function(a){var b=new f,c=0,d=I(a)?[]:{};r(a,function(a,e){c++;v(a).then(function(a){d[e]=a;--c||k(b,d)},function(a){m(b,a)})});0===c&&k(b,d);return b};q.race=function(a){var b=c();r(a,function(a){v(a).then(b.resolve,b.reject)});return b.promise};return q}function Zf(){this.$get=["$window","$timeout",function(a,
b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function Of(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++qb;this.$$ChildScope=
null}b.prototype=a;return b}var b=10,d=K("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,h){function k(a){a.currentScope.$$destroyed=!0}function l(a){9===Ca&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++qb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=
this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function p(a){if(t.$$phase)throw d("inprog",t.$$phase);t.$$phase=a}function n(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function F(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function s(){}function v(){for(;A.length;)try{A.shift()()}catch(a){f(a)}e=
null}function q(){null===e&&(e=h.defer(function(){t.$apply(v)}))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on("$destroy",k);return d},$watch:function(a,b,d,e){var f=g(a);b=C(b)?b:D;if(f.$$watchDelegate)return f.$$watchDelegate(this,
b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:s,get:f,exp:e||a,eq:!!d};c=null;k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1);k.unshift(l);k.$$digestWatchIndex++;n(this,1);return function(){var a=cb(k,l);0<=a&&(n(h,-1),a<k.$$digestWatchIndex&&k.$$digestWatchIndex--);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===
a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});r(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!x(e)){if(B(e))if(wa(e))for(f!==p&&(f=p,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==n&&(f=n={},t=0,l++);a=0;for(b in e)ra.call(e,
b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)ra.call(e,b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),p=[],n={},s=!0,t=0;return this.$watch(m,function(){s?(s=!1,b(e,e,d)):b(e,h,d);if(k)if(B(e))if(wa(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ra.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,k,l,m,n,r,F=b,q,A=[],y,x;p("$digest");
h.$$checkUrlChange();this===t&&null!==e&&(h.defer.cancel(e),v());c=null;do{r=!1;q=this;for(n=0;n<u.length;n++){try{x=u[n],l=x.fn,l(x.scope,x.locals)}catch(z){f(z)}c=null}u.length=0;a:do{if(n=q.$$watchers)for(n.$$digestWatchIndex=n.length;n.$$digestWatchIndex--;)try{if(a=n[n.$$digestWatchIndex])if(m=a.get,(g=m(q))!==(k=a.last)&&!(a.eq?sa(g,k):U(g)&&U(k)))r=!0,c=a,a.last=a.eq?pa(g,null):g,l=a.fn,l(g,k===s?g:k,q),5>F&&(y=4-F,A[y]||(A[y]=[]),A[y].push({msg:C(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):
a.exp,newVal:g,oldVal:k}));else if(a===c){r=!1;break a}}catch(D){f(D)}if(!(n=q.$$watchersCount&&q.$$childHead||q!==this&&q.$$nextSibling))for(;q!==this&&!(n=q.$$nextSibling);)q=q.$parent}while(q=n);if((r||u.length)&&!F--)throw t.$$phase=null,d("infdig",b,A);}while(r||u.length);for(t.$$phase=null;H<w.length;)try{w[H++]()}catch(B){f(B)}w.length=H=0;h.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===t&&h.$$applicationDestroyed();
n(this,-this.$$watchersCount);for(var b in this.$$listenerCount)F(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=D;this.$on=this.$watch=this.$watchGroup=function(){return D};this.$$listeners=
{};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){t.$$phase||u.length||h.defer(function(){u.length&&t.$digest()});u.push({scope:this,fn:g(a),locals:b})},$$postDigest:function(a){w.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{t.$$phase=null}}catch(b){f(b)}finally{try{t.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&A.push(b);a=g(a);q()},$on:function(a,b){var c=this.$$listeners[a];
c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(delete c[d],F(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=db([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,
k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)break;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=db([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||
c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var t=new m,u=t.$$asyncQueue=[],w=t.$$postDigestQueue=[],A=t.$$applyAsyncQueue=[],H=0;return t}]}function Ge(){var a=/^\s*(https?|s?ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return u(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:
a,f;f=ta(d&&d.trim()).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function Fg(a){if("self"===a)return a;if(E(a)){if(-1<a.indexOf("***"))throw va("iwcard",a);a=Md(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+a+"$")}if($a(a))return new RegExp("^"+a.source+"$");throw va("imatcher");}function Nd(a){var b=[];u(a)&&r(a,function(a){b.push(Fg(a))});return b}function Sf(){this.SCE_CONTEXTS=oa;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&
(a=Nd(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=Nd(a));return b};this.$get=["$injector",function(d){function c(a,b){return"self"===a?zd(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw va("unsafe");};d.has("$sanitize")&&
(f=d.get("$sanitize"));var g=e(),h={};h[oa.HTML]=e(g);h[oa.CSS]=e(g);h[oa.URL]=e(g);h[oa.JS]=e(g);h[oa.RESOURCE_URL]=e(h[oa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw va("icontext",a,b);if(null===b||x(b)||""===b)return b;if("string"!==typeof b)throw va("itype",a);return new c(b)},getTrusted:function(d,e){if(null===e||x(e)||""===e)return e;var g=h.hasOwnProperty(d)?h[d]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(d===oa.RESOURCE_URL){var g=ta(e.toString()),
p,n,r=!1;p=0;for(n=a.length;p<n;p++)if(c(a[p],g)){r=!0;break}if(r)for(p=0,n=b.length;p<n;p++)if(c(b[p],g)){r=!1;break}if(r)return e;throw va("insecurl",e.toString());}if(d===oa.HTML)return f(e);throw va("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function Rf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>Ca)throw va("iequirks");var c=ka(oa);c.isEnabled=function(){return a};c.trustAs=
d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=ab);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;r(oa,function(a,b){var d=L(b);c[("parse_as_"+d).replace(Bc,wb)]=function(b){return e(a,b)};c[("get_trusted_"+d).replace(Bc,wb)]=function(b){return f(a,b)};c[("trust_as_"+d).replace(Bc,wb)]=function(b){return g(a,b)}});return c}]}
function Tf(){this.$get=["$window","$document",function(a,b){var d={},c=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=Z((/android (\d+)/.exec(L((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h=g.body&&g.body.style,k=!1,l=!1;h&&(k=!!("transition"in h||"webkitTransition"in h),l=!!("animation"in h||"webkitAnimation"in h));return{history:!(!c||
4>e||f),hasEvent:function(a){if("input"===a&&Ca)return!1;if(x(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:Ja(),transitions:k,animations:l,android:e}}]}function Vf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(b,d,c,e,f){function g(h,k){g.totalPendingRequests++;if(!E(h)||x(d.get(h)))h=f.getTrustedResourceUrl(h);var l=c.defaults&&c.defaults.transformResponse;I(l)?l=l.filter(function(a){return a!==
uc}):l===uc&&(l=null);return c.get(h,O({cache:d,transformResponse:l},a)).finally(function(){g.totalPendingRequests--}).then(function(a){d.put(h,a.data);return a.data},function(a){k||(a=Gg("tpload",h,a.status,a.statusText),b(a));return e.reject(a)})}g.totalPendingRequests=0;return g}]}function Wf(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];r(a,function(a){var c=$.element(a).data("$binding");c&&
r(c,function(c){d?(new RegExp("(^|\\s)"+Md(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var k=a.querySelectorAll("["+g[h]+"model"+(d?"=":"*=")+'"'+b+'"]');if(k.length)return k}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Xf(){this.$get=["$rootScope","$browser",
"$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,k,l){C(f)||(l=k,k=f,f=D);var m=xa.call(arguments,3),p=u(l)&&!l,n=(p?c:d).defer(),r=n.promise,s;s=b.defer(function(){try{n.resolve(f.apply(null,m))}catch(b){n.reject(b),e(b)}finally{delete g[r.$$timeoutId]}p||a.$apply()},k);r.$$timeoutId=s;g[s]=n;return r}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].promise.$$state.pur=!0,g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):
!1};return f}]}function ta(a){Ca&&(X.setAttribute("href",a),a=X.href);X.setAttribute("href",a);return{href:X.href,protocol:X.protocol?X.protocol.replace(/:$/,""):"",host:X.host,search:X.search?X.search.replace(/^\?/,""):"",hash:X.hash?X.hash.replace(/^#/,""):"",hostname:X.hostname,port:X.port,pathname:"/"===X.pathname.charAt(0)?X.pathname:"/"+X.pathname}}function zd(a){a=E(a)?ta(a):a;return a.protocol===Od.protocol&&a.host===Od.host}function Yf(){this.$get=la(w)}function Pd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}
var d=a[0]||{},c={},e="";return function(){var a,g,h,k,l;try{a=d.cookie||""}catch(m){a=""}if(a!==e)for(e=a,a=e.split("; "),c={},h=0;h<a.length;h++)g=a[h],k=g.indexOf("="),0<k&&(l=b(g.substring(0,k)),x(c[l])&&(c[l]=b(g.substring(k+1))));return c}}function bg(){this.$get=Pd}function ed(a){function b(d,c){if(B(d)){var e={};r(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",
Qd);b("date",Rd);b("filter",Hg);b("json",Ig);b("limitTo",Jg);b("lowercase",Kg);b("number",Sd);b("orderBy",Td);b("uppercase",Lg)}function Hg(){return function(a,b,d,c){if(!wa(a)){if(null==a)return a;throw K("filter")("notarray",a);}c=c||"$";var e;switch(Cc(b)){case "function":break;case "boolean":case "null":case "number":case "string":e=!0;case "object":b=Mg(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function Mg(a,b,d,c){var e=B(a)&&d in a;!0===b?b=sa:C(b)||(b=function(a,
b){if(x(a))return!1;if(null===a||null===b)return a===b;if(B(b)||B(a)&&!ac(a))return!1;a=L(""+a);b=L(""+b);return-1!==a.indexOf(b)});return function(f){return e&&!B(f)?ha(f,a[d],b,d,!1):ha(f,a,b,d,c)}}function ha(a,b,d,c,e,f){var g=Cc(a),h=Cc(b);if("string"===h&&"!"===b.charAt(0))return!ha(a,b.substring(1),d,c,e);if(I(a))return a.some(function(a){return ha(a,b,d,c,e)});switch(g){case "object":var k;if(e){for(k in a)if(k.charAt&&"$"!==k.charAt(0)&&ha(a[k],b,d,c,!0))return!0;return f?!1:ha(a,b,d,c,!1)}if("object"===
h){for(k in b)if(f=b[k],!C(f)&&!x(f)&&(g=k===c,!ha(g?a:a[k],f,d,c,g,g)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function Cc(a){return null===a?"null":typeof a}function Qd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){x(c)&&(c=b.CURRENCY_SYM);x(e)&&(e=b.PATTERNS[1].maxFrac);var f=c?/\u00A4/g:/\s*\u00A4\s*/g;return null==a?a:Ud(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(f,c)}}function Sd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==
a?a:Ud(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Ng(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Vd))&&(a=a.replace(Vd,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)===Dc;e++);if(e===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===Dc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Wd&&(d=d.splice(0,Wd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function Og(a,b,d,c){var e=a.d,f=e.length-a.i;b=x(b)?Math.min(Math.max(d,f),c):+b;d=
b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Ud(a,b,d,c,e){if(!E(a)&&!Y(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k="\u221e";
else{g=Ng(h);Og(g,e,b.minFrac,b.maxFrac);k=g.d;h=g.i;e=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h,k.length):(f=k,k=[0]);h=[];for(k.length>=b.lgSize&&h.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>b.gSize;)h.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&h.unshift(k.join(""));k=h.join(d);f.length&&(k+=c+f.join(""));e&&(k+="e+"+e)}return 0>a&&!g?b.negPre+k+b.negSuf:b.posPre+k+b.posSuf}function Ob(a,b,d,c){var e="";if(0>a||c&&0>=
a)c?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=Dc+a;d&&(a=a.substr(a.length-b));return e+a}function ea(a,b,d,c,e){d=d||0;return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12===d&&(f=12);return Ob(f,b,c,e)}}function mb(a,b,d){return function(c,e){var f=c["get"+a](),g=ub((d?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Xd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Yd(a){return function(b){var d=Xd(b.getFullYear());b=+new Date(b.getFullYear(),
b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Ob(b,a)}}function Ec(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Rd(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,k=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=Z(b[9]+b[10]),g=Z(b[9]+b[11]));h.call(a,Z(b[1]),Z(b[2])-1,Z(b[3]));f=Z(b[4]||0)-f;g=Z(b[5]||0)-g;h=Z(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));k.call(a,f,g,h,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(c,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;E(c)&&(c=Pg.test(c)?Z(c):b(c));Y(c)&&(c=new Date(c));if(!fa(c)||!isFinite(c.getTime()))return c;for(;d;)(l=Qg.exec(d))?(h=db(h,l,1),d=h.pop()):(h.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=Sc(f,m),c=dc(c,f,!0));r(h,function(b){k=Rg[b];g+=k?k(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Ig(){return function(a,b){x(b)&&(b=2);return eb(a,b)}}function Jg(){return function(a,
b,d){b=Infinity===Math.abs(Number(b))?Number(b):Z(b);if(U(b))return a;Y(a)&&(a=a.toString());if(!wa(a))return a;d=!d||isNaN(d)?0:Z(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?Fc(a,d,d+b):0===d?Fc(a,b,a.length):Fc(a,Math.max(0,d+b),d)}}function Fc(a,b,d){return E(a)?a.slice(b,d):xa.call(a,b,d)}function Td(a){function b(b){return b.map(function(b){var c=1,d=ab;if(C(b))d=b;else if(E(b)){if("+"===b.charAt(0)||"-"===b.charAt(0))c="-"===b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var e=
d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}function c(a,b){var c=0,d=a.type,k=b.type;if(d===k){var k=a.value,l=b.value;"string"===d?(k=k.toLowerCase(),l=l.toLowerCase()):"object"===d&&(B(k)&&(k=a.index),B(l)&&(l=b.index));k!==l&&(c=k<l?-1:1)}else c=d<k?-1:1;return c}return function(a,f,g,h){if(null==a)return a;if(!wa(a))throw K("orderBy")("notarray",a);I(f)||(f=[f]);0===f.length&&
(f=["+"]);var k=b(f),l=g?-1:1,m=C(h)?h:c;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:k.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("object"===c)a:{if(C(e.valueOf)&&(e=e.valueOf(),d(e)))break a;ac(e)&&(e=e.toString(),d(e))}return{value:e,type:c,index:b}})}});a.sort(function(a,b){for(var d=0,e=k.length;d<e;d++){var g=m(a.predicateValues[d],b.predicateValues[d]);if(g)return g*k[d].descending*
l}return(m(a.tieBreaker,b.tieBreaker)||c(a.tieBreaker,b.tieBreaker))*l});return a=a.map(function(a){return a.value})}}function Qa(a){C(a)&&(a={link:a});a.restrict=a.restrict||"AC";return la(a)}function Pb(a,b,d,c,e){this.$$controls=[];this.$error={};this.$$success={};this.$pending=void 0;this.$name=e(b.name||b.ngForm||"")(d);this.$dirty=!1;this.$valid=this.$pristine=!0;this.$submitted=this.$invalid=!1;this.$$parentForm=Qb;this.$$element=a;this.$$animate=c;Zd(this)}function Zd(a){a.$$classCache={};
a.$$classCache[$d]=!(a.$$classCache[nb]=a.$$element.hasClass(nb))}function ae(a){function b(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,b),a.$$classCache[b]=!1)}function d(a,c,d){c=c?"-"+Vc(c,"-"):"";b(a,nb+c,!0===d);b(a,$d+c,!1===d)}var c=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,g,h){x(g)?(this.$pending||(this.$pending={}),c(this.$pending,a,h)):(this.$pending&&e(this.$pending,
a,h),be(this.$pending)&&(this.$pending=void 0));Na(g)?g?(e(this.$error,a,h),c(this.$$success,a,h)):(c(this.$error,a,h),e(this.$$success,a,h)):(e(this.$error,a,h),e(this.$$success,a,h));this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,d(this,"",null)):(b(this,"ng-pending",!1),this.$valid=be(this.$error),this.$invalid=!this.$valid,d(this,"",this.$valid));g=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null;d(this,a,g);this.$$parentForm.$setValidity(a,
g,this)}}function be(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Gc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Va(a,b,d,c,e,f){var g=L(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0});b.on("compositionend",function(){h=!1;l()})}var k,l=function(a){k&&(f.defer.cancel(k),k=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&"false"===d.ngTrim||(e=Q(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&
c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut drop",m)}b.on("change",l);if(ce[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!k){var b=this.validity,c=b.badInput,d=b.typeMismatch;k=f.defer(function(){k=null;b.badInput===c&&
b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Rb(a,b){return function(d,c){var e,f;if(fa(d))return d;if(E(d)){'"'===d.charAt(0)&&'"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(Sg.test(d))return new Date(d);a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,
MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function ob(a,b,d,c){return function(e,f,g,h,k,l,m){function p(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return u(a)&&!fa(a)?d(a)||void 0:a}Hc(e,f,g,h);Va(e,f,g,h,k,l);var r=h&&h.$options.getOption("timezone"),s;h.$$parserName=a;h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a))return a=d(a,s),r&&(a=dc(a,r)),
a});h.$formatters.push(function(a){if(a&&!fa(a))throw pb("datefmt",a);if(p(a))return(s=a)&&r&&(s=dc(s,r,!0)),m("date")(a,c,r);s=null;return""});if(u(g.min)||g.ngMin){var q;h.$validators.min=function(a){return!p(a)||x(q)||d(a)>=q};g.$observe("min",function(a){q=n(a);h.$validate()})}if(u(g.max)||g.ngMax){var y;h.$validators.max=function(a){return!p(a)||x(y)||d(a)<=y};g.$observe("max",function(a){y=n(a);h.$validate()})}}}function Hc(a,b,d,c){(c.$$hasNativeValidators=B(b[0].validity))&&c.$parsers.push(function(a){var c=
b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function de(a){a.$$parserName="number";a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(Tg.test(b))return parseFloat(b)});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!Y(b))throw pb("numfmt",b);b=b.toString()}return b})}function Wa(a){u(a)&&!Y(a)&&(a=parseFloat(a));return U(a)?void 0:a}function Ic(a){var b=a.toString(),d=b.indexOf(".");return-1===d?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function ee(a,
b,d){a=Number(a);var c=(a|0)!==a,e=(b|0)!==b,f=(d|0)!==d;if(c||e||f){var g=c?Ic(a):0,h=e?Ic(b):0,k=f?Ic(d):0,g=Math.max(g,h,k),g=Math.pow(10,g);a*=g;b*=g;d*=g;c&&(a=Math.round(a));e&&(b=Math.round(b));f&&(d=Math.round(d))}return 0===(a-b)%d}function fe(a,b,d,c,e){if(u(c)){a=a(c);if(!a.constant)throw pb("constexpr",d,c);return a(b)}return e}function Jc(a,b){function d(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e===
b[f])continue a;c.push(e)}return c}function c(a){var b=a;I(a)?b=a.map(c).join(" "):B(a)&&(b=Object.keys(a).filter(function(b){return a[b]}).join(" "));return b}function e(a){var b=a;if(I(a))b=a.map(e);else if(B(a)){var c=!1,b=Object.keys(a).filter(function(b){b=a[b];!c&&x(b)&&(c=!0);return b});c&&b.push(void 0)}return b}a="ngClass"+a;var f;return["$parse",function(g){return{restrict:"AC",link:function(h,k,l){function m(a,b){var c=[];r(a,function(a){if(0<b||t[a])t[a]=(t[a]||0)+b,t[a]===+(0<b)&&c.push(a)});
return c.join(" ")}function p(a){if(a===b){var c=w,c=m(c&&c.split(" "),1);l.$addClass(c)}else c=w,c=m(c&&c.split(" "),-1),l.$removeClass(c);u=a}function n(a){a=c(a);a!==w&&q(a)}function q(a){if(u===b){var c=w&&w.split(" "),e=a&&a.split(" "),g=d(c,e),c=d(e,c),g=m(g,-1),c=m(c,1);l.$addClass(c);l.$removeClass(g)}w=a}var s=l[a].trim(),v=":"===s.charAt(0)&&":"===s.charAt(1),s=g(s,v?e:c),y=v?n:q,t=k.data("$classCounts"),u=!0,w;t||(t=S(),k.data("$classCounts",t));"ngClass"!==a&&(f||(f=g("$index",function(a){return a&
1})),h.$watch(f,p));h.$watch(s,y,v)}}}]}function Sb(a,b,d,c,e,f,g,h,k){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=k(d.name||"",!1)(a);this.$$parentForm=Qb;this.$options=Tb;this.$$updateEvents="";
this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=e(d.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=void 0;this.$$currentValidationRunId=0;Object.defineProperty(this,"$$scope",{value:a});this.$$attr=d;this.$$element=c;this.$$animate=f;this.$$timeout=g;this.$$parse=e;this.$$q=h;this.$$exceptionHandler=b;Zd(this);Ug(this)}
function Ug(a){a.$$scope.$watch(function(b){b=a.$$ngModelGet(b);b===a.$modelValue||a.$modelValue!==a.$modelValue&&b!==b||a.$$setModelValue(b);return b})}function Kc(a){this.$$options=a}function ge(a,b){r(b,function(b,c){u(a[c])||(a[c]=b)})}function Ga(a,b){a.prop("selected",b);a.attr("selected",b)}var Mc={objectMaxDepth:5},Vg=/^\/(.+)\/([a-z]*)$/,ra=Object.prototype.hasOwnProperty,L=function(a){return E(a)?a.toLowerCase():a},ub=function(a){return E(a)?a.toUpperCase():a},Ca,z,ma,xa=[].slice,ug=[].splice,
Wg=[].push,ia=Object.prototype.toString,Pc=Object.getPrototypeOf,qa=K("ng"),$=w.angular||(w.angular={}),ic,qb=0;Ca=w.document.documentMode;var U=Number.isNaN||function(a){return a!==a};D.$inject=[];ab.$inject=[];var I=Array.isArray,se=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,Q=function(a){return E(a)?a.trim():a},Md=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ja=function(){if(!u(Ja.rules)){var a=w.document.querySelector("[ng-csp]")||
w.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ja.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ja;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ja.rules},rb=function(){if(u(rb.name_))return rb.name_;var a,b,d=Ha.length,c,e;for(b=0;b<d;++b)if(c=Ha[b],a=w.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+
"jq");break}return rb.name_=e},ue=/:/g,Ha=["ng-","data-ng-","ng:","x-ng-"],xe=function(a){var b=a.currentScript;if(!b)return!0;if(!(b instanceof w.HTMLScriptElement||b instanceof w.SVGScriptElement))return!1;b=b.attributes;return[b.getNamedItem("src"),b.getNamedItem("href"),b.getNamedItem("xlink:href")].every(function(b){if(!b)return!0;if(!b.value)return!1;var c=a.createElement("a");c.href=b.value;if(a.location.origin===c.origin)return!0;switch(c.protocol){case "http:":case "https:":case "ftp:":case "blob:":case "file:":case "data:":return!0;
default:return!1}})}(w.document),Ae=/[A-Z]/g,Wc=!1,Oa=3,Fe={full:"1.6.9",major:1,minor:6,dot:9,codeName:"fiery-basilisk"};V.expando="ng339";var ib=V.cache={},gg=1;V._data=function(a){return this.cache[a[this.expando]]||{}};var cg=/-([a-z])/g,Xg=/^-ms-/,Ab={mouseleave:"mouseout",mouseenter:"mouseover"},lc=K("jqLite"),fg=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,kc=/<|&#?\w+;/,dg=/<([\w:-]+)/,eg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,aa={option:[1,'<select multiple="multiple">',
"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};aa.optgroup=aa.option;aa.tbody=aa.tfoot=aa.colgroup=aa.caption=aa.thead;aa.th=aa.td;var lg=w.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Sa=V.prototype={ready:gd,toString:function(){var a=[];r(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},
eq:function(a){return 0<=a?z(this[a]):z(this[this.length+a])},length:0,push:Wg,sort:[].sort,splice:[].splice},Gb={};r("multiple selected checked disabled readOnly required open".split(" "),function(a){Gb[L(a)]=a});var ld={};r("input select option textarea button form details".split(" "),function(a){ld[a]=!0});var sd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};r({data:pc,removeData:oc,hasData:function(a){for(var b in ib[a.ng339])return!0;
return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)oc(a[b])}},function(a,b){V[b]=a});r({data:pc,inheritedData:Eb,scope:function(a){return z.data(a,"$scope")||Eb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return z.data(a,"$isolateScope")||z.data(a,"$isolateScopeNoTemplate")},controller:id,injector:function(a){return Eb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Bb,css:function(a,b,d){b=xb(b.replace(Xg,"ms-"));if(u(d))a.style[b]=d;
else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Oa&&2!==c&&8!==c&&a.getAttribute){var c=L(b),e=Gb[c];if(u(d))null===d||!1===d&&e?a.removeAttribute(b):a.setAttribute(b,e?c:d);else return a=a.getAttribute(b),e&&null!==a&&(a=c),null===a?void 0:a}},prop:function(a,b,d){if(u(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(x(d)){var c=a.nodeType;return 1===c||c===Oa?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(x(b)){if(a.multiple&&"select"===
ya(a)){var d=[];r(a.options,function(a){a.selected&&d.push(a.value||a.text)});return d}return a.value}a.value=b},html:function(a,b){if(x(b))return a.innerHTML;yb(a,!0);a.innerHTML=b},empty:jd},function(a,b){V.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==jd&&x(2===a.length&&a!==Bb&&a!==id?b:c)){if(B(b)){for(e=0;e<g;e++)if(a===pc)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=a.$dv;g=x(e)?Math.min(g,1):g;for(f=0;f<g;f++){var h=a(this[f],b,c);e=e?e+h:h}return e}for(e=0;e<g;e++)a(this[e],
b,c);return this}});r({removeData:oc,on:function(a,b,d,c){if(u(c))throw lc("onargs");if(jc(a)){c=zb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=ig(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,h=function(b,c,g){var h=e[b];h||(h=e[b]=[],h.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f));h.push(d)};g--;)b=c[g],Ab[b]?(h(Ab[b],kg),h(b,void 0,!0)):h(b)}},off:hd,one:function(a,b,d){a=z(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,
b){var d,c=a.parentNode;yb(a);r(new V(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];r(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new V(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;r(new V(b),function(b){a.insertBefore(b,d)})}},
wrap:function(a,b){var d=z(b).eq(0).clone()[0],c=a.parentNode;c&&c.replaceChild(d,a);d.appendChild(a)},remove:Fb,detach:function(a){Fb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;if(c){b=new V(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}}},addClass:Db,removeClass:Cb,toggleClass:function(a,b,d){b&&r(b.split(" "),function(b){var e=d;x(e)&&(e=!Bb(a,b));(e?Db:Cb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},
find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:nc,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=zb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:D,type:f,target:a},b.type&&(c=O(c,
b)),b=ka(g),e=d?[c].concat(d):[c],r(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){V.prototype[b]=function(b,c,e){for(var f,g=0,h=this.length;g<h;g++)x(f)?(f=a(this[g],b,c,e),u(f)&&(f=z(f))):mc(f,a(this[g],b,c,e));return u(f)?f:this}});V.prototype.bind=V.prototype.on;V.prototype.unbind=V.prototype.off;var Yg=Object.create(null);md.prototype={_idx:function(a){if(a===this._lastKey)return this._lastIndex;this._lastKey=a;return this._lastIndex=this._keys.indexOf(a)},_transformKey:function(a){return U(a)?
Yg:a},get:function(a){a=this._transformKey(a);a=this._idx(a);if(-1!==a)return this._values[a]},set:function(a,b){a=this._transformKey(a);var d=this._idx(a);-1===d&&(d=this._lastIndex=this._keys.length);this._keys[d]=a;this._values[d]=b},delete:function(a){a=this._transformKey(a);a=this._idx(a);if(-1===a)return!1;this._keys.splice(a,1);this._values.splice(a,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};var Hb=md,ag=[function(){this.$get=[function(){return Hb}]}],ng=/^([^(]+?)=>/,og=/^[^(]*\(\s*([^)]*)\)/m,
Zg=/,/,$g=/^\s*(_?)(\S+?)\1\s*$/,mg=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ba=K("$injector");gb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw E(d)&&d||(d=a.name||pg(a)),Ba("strictdi",d);b=nd(a);r(b[1].split(Zg),function(a){a.replace($g,function(a,b,d){c.push(d)})})}a.$inject=c}}else I(a)?(b=a.length-1,sb(a[b],"fn"),c=a.slice(0,b)):sb(a,"fn",!0);return c};var he=K("$animate"),sf=function(){this.$get=D},tf=function(){var a=new Hb,b=[];this.$get=
["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=E(b)?b.split(" "):I(b)?b:[],r(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){r(b,function(b){var c=a.get(b);if(c){var d=qg(b.attr("class")),e="",f="";r(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});r(b,function(a){e&&Db(a,e);f&&Cb(a,f)});a.delete(b)}});b.length=0}return{enabled:D,on:D,off:D,pin:D,push:function(g,h,k,l){l&&l();k=k||{};k.from&&g.css(k.from);k.to&&g.css(k.to);if(k.addClass||
k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(g)||{},h=e(k,h,!0),l=e(k,l,!1),h||l)a.set(g,k),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},qf=["$provide",function(a){var b=this,d=null,c=null;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw he("notcsel",c);var g=c+"-animation";b.$$registeredAnimations[c.substr(1)]=g;a.factory(g,d)};this.customFilter=function(a){1===arguments.length&&(c=C(a)?a:null);return c};
this.classNameFilter=function(a){if(1===arguments.length&&(d=a instanceof RegExp?a:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(d.toString()))throw d=null,he("nongcls","ng-animate");return d};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},
enter:function(c,d,k,l){d=d&&z(d);k=k&&z(k);d=d||k.parent();b(c,d,k);return a.push(c,"enter",Ka(l))},move:function(c,d,k,l){d=d&&z(d);k=k&&z(k);d=d||k.parent();b(c,d,k);return a.push(c,"move",Ka(l))},leave:function(b,c){return a.push(b,"leave",Ka(c),function(){b.remove()})},addClass:function(b,c,d){d=Ka(d);d.addClass=jb(d.addclass,c);return a.push(b,"addClass",d)},removeClass:function(b,c,d){d=Ka(d);d.removeClass=jb(d.removeClass,c);return a.push(b,"removeClass",d)},setClass:function(b,c,d,f){f=Ka(f);
f.addClass=jb(f.addClass,c);f.removeClass=jb(f.removeClass,d);return a.push(b,"setClass",f)},animate:function(b,c,d,f,m){m=Ka(m);m.from=m.from?O(m.from,c):c;m.to=m.to?O(m.to,d):d;m.tempClasses=jb(m.tempClasses,f||"ng-inline-animate");return a.push(b,"animate",m)}}}]}],vf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},uf=function(){this.$get=
["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){c()?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;r(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===
this._state?a():this._doneCallbacks.push(a)},progress:D,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&
this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(r(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},rf=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=
null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);h||k.complete();h=!0});return k}var g=e||{};g.$$prepared||(g=pa(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var h,k=new d;return{start:f,end:f}}}]},ca=K("$compile"),sc=new function(){};Yc.$inject=["$provide","$$sanitizeUriProvider"];Jb.prototype.isFirstChange=function(){return this.previousValue===sc};var od=/^((?:x|data)[:\-_])/i,tg=/[:\-_]+(.)/g,ud=K("$controller"),
td=/^(\S+)(\s+as\s+([\w$]+))?$/,Cf=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof z&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},vd="application/json",vc={"Content-Type":vd+";charset=utf-8"},wg=/^\[|^\{(?!\{)/,xg={"[":/]$/,"{":/}$/},vg=/^\)]\}',?\n/,Kb=K("$http"),Fa=$.$interpolateMinErr=K("$interpolate");Fa.throwNoconcat=function(a){throw Fa("noconcat",a);};Fa.interr=function(a,b){return Fa("interr",a,b.toString())};var Kf=function(){this.$get=function(){function a(a){var b=
function(a){b.data=a;b.called=!0};b.id=a;return b}var b=$.callbacks,d={};return{createCallback:function(c){c="_"+(b.$$counter++).toString(36);var e="angular.callbacks."+c,f=a(c);d[e]=b[c]=f;return e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete b[d[a].id];delete d[a]}}}},ah=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,zg={http:80,https:443,ftp:21},kb=K("$location"),Ag=/^\s*[\\/]{2,}/,bh={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Lb("$$absUrl"),
url:function(a){if(x(a))return this.$$url;var b=ah.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Lb("$$protocol"),host:Lb("$$host"),port:Lb("$$port"),path:Dd("$$path",function(a){a=null!==a?a.toString():"";return"/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(E(a)||Y(a))a=a.toString(),this.$$search=ec(a);else if(B(a))a=pa(a,{}),r(a,function(b,
c){null==b&&delete a[c]}),this.$$search=a;else throw kb("isrcharg");break;default:x(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Dd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};r([Cd,zc,yc],function(a){a.prototype=Object.create(bh);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==yc||!this.$$html5)throw kb("nostate");this.$$state=x(b)?null:b;this.$$urlUpdatedByLocation=
!0;return this}});var Xa=K("$parse"),Eg={}.constructor.prototype.valueOf,Ub=S();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Ub[a]=!0});var ch={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Nb=function(a){this.options=a};Nb.prototype={constructor:Nb,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();
else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Ub[b],e=Ub[d];Ub[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=
a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?
this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===
a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=u(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw Xa("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=L(this.text.charAt(this.index));if("."===d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"===a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||
c&&this.isNumber(c)||"e"!==a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;
for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=ch[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var q=function(a,b){this.lexer=
a;this.options=b};q.Program="Program";q.ExpressionStatement="ExpressionStatement";q.AssignmentExpression="AssignmentExpression";q.ConditionalExpression="ConditionalExpression";q.LogicalExpression="LogicalExpression";q.BinaryExpression="BinaryExpression";q.UnaryExpression="UnaryExpression";q.CallExpression="CallExpression";q.MemberExpression="MemberExpression";q.Identifier="Identifier";q.Literal="Literal";q.ArrayExpression="ArrayExpression";q.Property="Property";q.ObjectExpression="ObjectExpression";
q.ThisExpression="ThisExpression";q.LocalsExpression="LocalsExpression";q.NGValueParameter="NGValueParameter";q.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:q.Program,body:a}},expressionStatement:function(){return{type:q.ExpressionStatement,
expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Hd(a))throw Xa("lval");a={type:q.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:q.ConditionalExpression,
test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:q.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:q.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.relational()};
return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},
unary:function(){var a;return(a=this.expect("+","-","!"))?{type:q.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=pa(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:q.Literal,value:this.options.literals[this.consume().text]}:
this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:q.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:q.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:q.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");
return a},filter:function(a){a=[a];for(var b={type:q.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:q.Identifier,name:a.text}},constant:function(){return{type:q.Literal,value:this.consume().value}},
arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:q.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:q.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?
(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");return{type:q.ObjectExpression,properties:a}},throwError:function(a,b){throw Xa("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw Xa("ueoe",
this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Xa("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:q.ThisExpression},
$locals:{type:q.LocalsExpression}}};var Fd=2;Jd.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};W(a,b.$filter);var d="",c;this.stage="assign";if(c=Id(a))this.state.computing="assign",d=this.nextId(),this.recurse(c,d),this.return_(d),d="fn.assign="+this.generateFunction("assign","s,v,l");c=Gd(a.body);b.stage="inputs";r(c,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}};b.state.computing=d;
var h=b.nextId();b.recurse(a,h);b.return_(h);b.state.inputs.push({name:d,isPure:a.isPure});a.watchId=c});this.state.computing="fn";this.stage="main";this.recurse(a);a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+d+this.watchFns()+"return fn;";a=(new Function("$filter","getStringValue","ifDefined","plus",a))(this.$filter,Bg,Cg,Ed);this.state=this.stage=void 0;return a},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,
d=this;r(b,function(b){a.push("var "+b.name+"="+d.generateFunction(b.name,"s"));b.isPure&&a.push(b.name,".isPure="+JSON.stringify(b.isPure)+";")});b.length&&a.push("fn.inputs=["+b.map(function(a){return a.name}).join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;r(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?
"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,h,k=this,l,m,p;c=c||D;if(!f&&u(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case q.Program:r(a.body,function(b,c){k.recurse(b.expression,void 0,void 0,function(a){h=a});c!==a.body.length-1?k.current().body.push(h,";"):k.return_(h)});break;case q.Literal:m=this.escape(a.value);
this.assign(b,m);c(b||m);break;case q.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){h=a});m=a.operator+"("+this.ifDefined(h,0)+")";this.assign(b,m);c(m);break;case q.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){h=a});m="+"===a.operator?this.plus(g,h):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(h,0):"("+g+")"+a.operator+"("+h+")";this.assign(b,m);c(m);break;case q.LogicalExpression:b=b||this.nextId();
k.recurse(a.left,b);k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,b));c(b);break;case q.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));c(b);break;case q.Identifier:b=b||this.nextId();d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===
k.stage||"s",function(){e&&1!==e&&k.if_(k.isNull(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));c(b);break;case q.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();k.recurse(a.object,g,void 0,function(){k.if_(k.notNull(g),function(){a.computed?(h=k.nextId(),k.recurse(a.property,h),k.getStringValue(h),e&&1!==e&&k.if_(k.not(k.computedMember(g,
h)),k.lazyAssign(k.computedMember(g,h),"{}")),m=k.computedMember(g,h),k.assign(b,m),d&&(d.computed=!0,d.name=h)):(e&&1!==e&&k.if_(k.isNull(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}")),m=k.nonComputedMember(g,a.property.name),k.assign(b,m),d&&(d.computed=!1,d.name=a.property.name))},function(){k.assign(b,"undefined")});c(b)},!!e);break;case q.CallExpression:b=b||this.nextId();a.filter?(h=k.filter(a.callee.name),l=[],r(a.arguments,function(a){var b=
k.nextId();k.recurse(a,b);l.push(b)}),m=h+"("+l.join(",")+")",k.assign(b,m),c(b)):(h=k.nextId(),g={},l=[],k.recurse(a.callee,h,g,function(){k.if_(k.notNull(h),function(){r(a.arguments,function(b){k.recurse(b,a.constant?void 0:k.nextId(),void 0,function(a){l.push(a)})});m=g.name?k.member(g.context,g.name,g.computed)+"("+l.join(",")+")":h+"("+l.join(",")+")";k.assign(b,m)},function(){k.assign(b,"undefined")});c(b)}));break;case q.AssignmentExpression:h=this.nextId();g={};this.recurse(a.left,void 0,
g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,h);m=k.member(g.context,g.name,g.computed)+a.operator+h;k.assign(b,m);c(b||m)})},1);break;case q.ArrayExpression:l=[];r(a.elements,function(b){k.recurse(b,a.constant?void 0:k.nextId(),void 0,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(b||m);break;case q.ObjectExpression:l=[];p=!1;r(a.properties,function(a){a.computed&&(p=!0)});p?(b=b||this.nextId(),this.assign(b,"{}"),r(a.properties,function(a){a.computed?
(g=k.nextId(),k.recurse(a.key,g)):g=a.key.type===q.Identifier?a.key.name:""+a.key.value;h=k.nextId();k.recurse(a.value,h);k.assign(k.member(b,g,a.computed),h)})):(r(a.properties,function(b){k.recurse(b.value,a.constant?void 0:k.nextId(),void 0,function(a){l.push(k.escape(b.key.type===q.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m));c(b||m);break;case q.ThisExpression:this.assign(b,"s");c(b||"s");break;case q.LocalsExpression:this.assign(b,"l");c(b||"l");break;
case q.NGValueParameter:this.assign(b,"v"),c(b||"v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,
b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,
b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(E(a))return"'"+a.replace(this.stringEscapeRegex,
this.stringEscapeFn)+"'";if(Y(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw Xa("esc");},nextId:function(a,b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};Kd.prototype={compile:function(a){var b=this;W(a,b.$filter);var d,c;if(d=Id(a))c=this.recurse(d);d=Gd(a.body);var e;d&&(e=[],r(d,function(a,c){var d=
b.recurse(a);d.isPure=a.isPure;a.input=d;e.push(d);a.watchId=c}));var f=[];r(a.body,function(a){f.push(b.recurse(a.expression))});a=0===a.body.length?D:1===a.body.length?f[0]:function(a,b){var c;r(f,function(d){c=d(a,b)});return c};c&&(a.assign=function(a,b,d){return c(a,d,b)});e&&(a.inputs=e);return a},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case q.Literal:return this.value(a.value,b);case q.UnaryExpression:return e=this.recurse(a.argument),
this["unary"+a.operator](e,b);case q.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case q.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case q.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case q.Identifier:return f.identifier(a.name,b,d);case q.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||
(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d):this.nonComputedMember(c,e,b,d);case q.CallExpression:return g=[],r(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var p=[],n=0;n<g.length;++n)p.push(g[n](a,c,d,f));a=e.apply(void 0,p,f);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,f){var p=e(a,c,d,f),n;if(null!=p.value){n=
[];for(var r=0;r<g.length;++r)n.push(g[r](a,c,d,f));n=p.value.apply(p.context,n)}return b?{value:n}:n};case q.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,f,g){var p=c(a,d,f,g);a=e(a,d,f,g);p.context[p.name]=a;return b?{value:a}:a};case q.ArrayExpression:return g=[],r(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],n=0;n<g.length;++n)f.push(g[n](a,c,d,e));return b?{value:f}:f};case q.ObjectExpression:return g=[],r(a.properties,
function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===q.Identifier?a.key.name:""+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},n=0;n<g.length;++n)g[n].computed?f[g[n].key(a,c,d,e)]=g[n].value(a,c,d,e):f[g[n].key]=g[n].value(a,c,d,e);return b?{value:f}:f};case q.ThisExpression:return function(a){return b?{value:a}:a};case q.LocalsExpression:return function(a,c){return b?{value:c}:c};case q.NGValueParameter:return function(a,
c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=u(d)?+d:0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=u(d)?-d:-0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=Ed(h,c);return d?{value:h}:h}},"binary-":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);
h=(u(h)?h:0)-(u(c)?c:0);return d?{value:h}:h}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,
e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,
g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h)?b(e,f,g,h):d(e,f,g,h);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,
name:void 0,value:a}:a}},identifier:function(a,b,d){return function(c,e,f,g){c=e&&a in e?e:c;d&&1!==d&&c&&null==c[a]&&(c[a]={});e=c?c[a]:void 0;return b?{context:c,name:a,value:e}:e}},computedMember:function(a,b,d,c){return function(e,f,g,h){var k=a(e,f,g,h),l,m;null!=k&&(l=b(e,f,g,h),l+="",c&&1!==c&&k&&!k[l]&&(k[l]={}),m=k[l]);return d?{context:k,name:l,value:m}:m}},nonComputedMember:function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h);c&&1!==c&&e&&null==e[b]&&(e[b]={});f=null!=e?e[b]:void 0;
return d?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};Mb.prototype={constructor:Mb,parse:function(a){a=this.getAst(a);var b=this.astCompiler.compile(a.ast),d=a.ast;b.literal=0===d.body.length||1===d.body.length&&(d.body[0].expression.type===q.Literal||d.body[0].expression.type===q.ArrayExpression||d.body[0].expression.type===q.ObjectExpression);b.constant=a.ast.constant;b.oneTime=a.oneTime;return b},getAst:function(a){var b=!1;a=a.trim();":"===
a.charAt(0)&&":"===a.charAt(1)&&(b=!0,a=a.substring(2));return{ast:this.ast.ast(a),oneTime:b}}};var va=K("$sce"),oa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Bc=/_([a-z])/g,Gg=K("$compile"),X=w.document.createElement("a"),Od=ta(w.location.href);Pd.$inject=["$document"];ed.$inject=["$provide"];var Wd=22,Vd=".",Dc="0";Qd.$inject=["$locale"];Sd.$inject=["$locale"];var Rg={yyyy:ea("FullYear",4,0,!1,!0),yy:ea("FullYear",2,0,!0,!0),y:ea("FullYear",1,0,!1,!0),MMMM:mb("Month"),
MMM:mb("Month",!0),MM:ea("Month",2,1),M:ea("Month",1,1),LLLL:mb("Month",!1,!0),dd:ea("Date",2),d:ea("Date",1),HH:ea("Hours",2),H:ea("Hours",1),hh:ea("Hours",2,-12),h:ea("Hours",1,-12),mm:ea("Minutes",2),m:ea("Minutes",1),ss:ea("Seconds",2),s:ea("Seconds",1),sss:ea("Milliseconds",3),EEEE:mb("Day"),EEE:mb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Ob(Math[0<a?"floor":"ceil"](a/60),2)+Ob(Math.abs(a%60),2))},ww:Yd(2),w:Yd(1),
G:Ec,GG:Ec,GGG:Ec,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},Qg=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Pg=/^-?\d+$/;Rd.$inject=["$locale"];var Kg=la(L),Lg=la(ub);Td.$inject=["$parse"];var He=la({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===ia.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||
a.preventDefault()})}}}}),vb={};r(Gb,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!==a){var c=Ea("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});vb[c]=function(){return{restrict:"A",priority:100,link:e}}}});r(sd,function(a,b){vb[b]=function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"===e.ngPattern.charAt(0)&&(c=e.ngPattern.match(Vg))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,
a)})}}}});r(["src","srcset","href"],function(a){var b=Ea("ng-"+a);vb[b]=function(){return{priority:99,link:function(d,c,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ia.call(c.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),Ca&&f&&c.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Qb={$addControl:D,$$renameControl:function(a,b){a.$name=b},$removeControl:D,$setValidity:D,$setDirty:D,$setPristine:D,$setSubmitted:D};Pb.$inject=["$element",
"$attrs","$scope","$animate","$interpolate"];Pb.prototype={$rollbackViewValue:function(){r(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){r(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){Ia(a.$name,"input");this.$$controls.push(a);a.$name&&(this[a.$name]=a);a.$$parentForm=this},$$renameControl:function(a,b){var d=a.$name;this[d]===a&&delete this[d];this[b]=a;a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name];
r(this.$pending,function(b,d){this.$setValidity(d,null,a)},this);r(this.$error,function(b,d){this.$setValidity(d,null,a)},this);r(this.$$success,function(b,d){this.$setValidity(d,null,a)},this);cb(this.$$controls,a);a.$$parentForm=Qb},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ya);this.$$animate.addClass(this.$$element,Vb);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ya,Vb+" ng-submitted");this.$dirty=
!1;this.$pristine=!0;this.$submitted=!1;r(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){r(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted");this.$submitted=!0;this.$$parentForm.$setSubmitted()}};ae({clazz:Pb,set:function(a,b,d){var c=a[b];c?-1===c.indexOf(d)&&c.push(d):a[b]=[d]},unset:function(a,b,d){var c=a[b];c&&(cb(c,d),0===c.length&&delete a[b])}});var ie=function(a){return["$timeout","$parse",
function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||D}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Pb,compile:function(d,f){d.addClass(Ya).addClass(nb);var g=f.name?"name":a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var p=f[0];if(!("action"in e)){var n=function(b){a.$apply(function(){p.$commitViewValue();p.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",n);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",
n)},0,!1)})}(f[1]||p.$$parentForm).$addControl(p);var r=g?c(p.$name):D;g&&(r(a,p),e.$observe(g,function(b){p.$name!==b&&(r(a,void 0),p.$$parentForm.$$renameControl(p,b),r=c(p.$name),r(a,p))}));d.on("$destroy",function(){p.$$parentForm.$removeControl(p);r(a,void 0);O(p,Qb)})}}}}}]},Ie=ie(),Ue=ie(!0),Sg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,dh=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,
eh=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Tg=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,je=/^(\d{4,})-(\d{2})-(\d{2})$/,ke=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Lc=/^(\d{4,})-W(\d\d)$/,le=/^(\d{4,})-(\d\d)$/,me=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ce=S();r(["date","datetime-local","month","time","week"],function(a){ce[a]=
!0});var ne={text:function(a,b,d,c,e,f){Va(a,b,d,c,e,f);Gc(c)},date:ob("date",je,Rb(je,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ob("datetimelocal",ke,Rb(ke,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:ob("time",me,Rb(me,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ob("week",Lc,function(a,b){if(fa(a))return a;if(E(a)){Lc.lastIndex=0;var d=Lc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=0,h=0,k=Xd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());
return new Date(c,0,k.getDate()+e,d,f,g,h)}}return NaN},"yyyy-Www"),month:ob("month",le,Rb(le,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f){Hc(a,b,d,c);de(c);Va(a,b,d,c,e,f);var g,h;if(u(d.min)||d.ngMin)c.$validators.min=function(a){return c.$isEmpty(a)||x(g)||a>=g},d.$observe("min",function(a){g=Wa(a);c.$validate()});if(u(d.max)||d.ngMax)c.$validators.max=function(a){return c.$isEmpty(a)||x(h)||a<=h},d.$observe("max",function(a){h=Wa(a);c.$validate()});if(u(d.step)||d.ngStep){var k;c.$validators.step=
function(a,b){return c.$isEmpty(b)||x(k)||ee(b,g||0,k)};d.$observe("step",function(a){k=Wa(a);c.$validate()})}},url:function(a,b,d,c,e,f){Va(a,b,d,c,e,f);Gc(c);c.$$parserName="url";c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||dh.test(d)}},email:function(a,b,d,c,e,f){Va(a,b,d,c,e,f);Gc(c);c.$$parserName="email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||eh.test(d)}},radio:function(a,b,d,c){var e=!d.ngTrim||"false"!==Q(d.ngTrim);x(d.name)&&b.attr("name",++qb);
b.on("click",function(a){var g;b[0].checked&&(g=d.value,e&&(g=Q(g)),c.$setViewValue(g,a&&a.type))});c.$render=function(){var a=d.value;e&&(a=Q(a));b[0].checked=a===c.$viewValue};d.$observe("value",c.$render)},range:function(a,b,d,c,e,f){function g(a,c){b.attr(a,d[a]);d.$observe(a,c)}function h(a){p=Wa(a);U(c.$modelValue)||(m?(a=b.val(),p>a&&(a=p,b.val(a)),c.$setViewValue(a)):c.$validate())}function k(a){n=Wa(a);U(c.$modelValue)||(m?(a=b.val(),n<a&&(b.val(n),a=n<p?p:n),c.$setViewValue(a)):c.$validate())}
function l(a){r=Wa(a);U(c.$modelValue)||(m&&c.$viewValue!==b.val()?c.$setViewValue(b.val()):c.$validate())}Hc(a,b,d,c);de(c);Va(a,b,d,c,e,f);var m=c.$$hasNativeValidators&&"range"===b[0].type,p=m?0:void 0,n=m?100:void 0,r=m?1:void 0,q=b[0].validity;a=u(d.min);e=u(d.max);f=u(d.step);var v=c.$render;c.$render=m&&u(q.rangeUnderflow)&&u(q.rangeOverflow)?function(){v();c.$setViewValue(b.val())}:v;a&&(c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||x(p)||b>=p},g("min",h));e&&
(c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||x(n)||b<=n},g("max",k));f&&(c.$validators.step=m?function(){return!q.stepMismatch}:function(a,b){return c.$isEmpty(b)||x(r)||ee(b,p||0,r)},g("step",l))},checkbox:function(a,b,d,c,e,f,g,h){var k=fe(h,a,"ngTrueValue",d.ngTrueValue,!0),l=fe(h,a,"ngFalseValue",d.ngFalseValue,!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===
a};c.$formatters.push(function(a){return sa(a,k)});c.$parsers.push(function(a){return a?k:l})},hidden:D,button:D,submit:D,reset:D,file:D},Zc=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(ne[L(g.type)]||ne.text)(e,f,g,h[0],b,a,d,c)}}}}],fh=/^(true|false|\d+)$/,mf=function(){function a(a,d,c){var e=u(c)?c:9===Ca?"":null;a.prop("value",e);d.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,d){return fh.test(d.ngValue)?
function(b,d,f){b=b.$eval(f.ngValue);a(d,f,b)}:function(b,d,f){b.$watch(f.ngValue,function(b){a(d,f,b)})}}}},Me=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=gc(a)})}}}}],Oe=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);
d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=x(a)?"":a})}}}}],Ne=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){var d=f(b);c.html(a.getTrustedHtml(d)||"")})}}}}],lf=la({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),
Pe=Jc("",!0),Re=Jc("Odd",0),Qe=Jc("Even",1),Se=Qa({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Te=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],dd={},gh={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Ea("ng-"+a);dd[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(e,f){var g=
d(f[b]);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};gh[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var We=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var h,k,l;d.$watch(e.ngIf,function(d){d?k||g(function(d,f){k=f;d[d.length++]=b.$$createComment("end ngIf",e.ngIf);h={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),k&&(k.$destroy(),k=null),h&&(l=
tb(h.clone),a.leave(l).done(function(a){!1!==a&&(l=null)}),h=null))})}}}],Xe=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:$.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(c,e,m,p,n){var r=0,q,v,y,t=function(){v&&(v.remove(),v=null);q&&(q.$destroy(),q=null);y&&(d.leave(y).done(function(a){!1!==a&&(v=null)}),v=y,y=null)};c.$watch(f,function(f){var m=function(a){!1===
a||!u(h)||h&&!c.$eval(h)||b()},v=++r;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&v===r){var b=c.$new();p.template=a;a=n(b,function(a){t();d.enter(a,null,e).done(m)});q=b;y=a;q.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||v!==r||(t(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(t(),p.template=null)})}}}}],of=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,d,c,e){ia.call(d[0]).match(/SVG/)?
(d.empty(),a(fd(e.template,w.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],Ye=Qa({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),kf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=d.ngList||", ",f="false"!==d.ngTrim,g=f?Q(e):e;c.$parsers.push(function(a){if(!x(a)){var b=[];a&&r(a.split(g),function(a){a&&b.push(f?Q(a):a)});return b}});c.$formatters.push(function(a){if(I(a))return a.join(e)});
c.$isEmpty=function(a){return!a||!a.length}}}},nb="ng-valid",$d="ng-invalid",Ya="ng-pristine",Vb="ng-dirty",pb=K("ngModel");Sb.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" ");Sb.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);C(c)&&(c=a(b));return c};this.$$ngModelSet=
function(a,c){C(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw pb("nonassign",this.$$attr.ngModel,za(this.$$element));},$render:D,$isEmpty:function(a){return x(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,
"ng-not-empty"))},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,Vb);this.$$animate.addClass(this.$$element,Ya)},$setDirty:function(){this.$dirty=!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,Ya);this.$$animate.addClass(this.$$element,Vb);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=!0;this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=
!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(!U(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,d=this.$valid,c=this.$modelValue,e=this.$options.getOption("allowInvalid"),f=this;this.$$runValidators(b,a,function(a){e||d===a||(f.$modelValue=a?b:void 0,f.$modelValue!==
c&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,d){function c(){var c=!0;r(k.$validators,function(d,e){var g=Boolean(d(a,b));c=c&&g;f(e,g)});return c?!0:(r(k.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;r(k.$asyncValidators,function(e,g){var k=e(a,b);if(!k||!C(k.then))throw pb("nopromise",k);f(g,void 0);c.push(k.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});c.length?k.$$q.all(c).then(function(){g(d)},D):g(!0)}function f(a,b){h===k.$$currentValidationRunId&&
k.$setValidity(a,b)}function g(a){h===k.$$currentValidationRunId&&d(a)}this.$$currentValidationRunId++;var h=this.$$currentValidationRunId,k=this;(function(){var a=k.$$parserName||"parse";if(x(k.$$parserValid))f(a,null);else return k.$$parserValid||(r(k.$validators,function(a,b){f(b,null)}),r(k.$asyncValidators,function(a,b){f(b,null)})),f(a,k.$$parserValid),k.$$parserValid;return!0})()?c()?e():g(!1):g(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);
if(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate()},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;if(this.$$parserValid=x(a)?void 0:!0)for(var d=0;d<this.$parsers.length;d++)if(a=this.$parsers[d](a),x(a)){this.$$parserValid=!1;break}U(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var c=this.$modelValue,e=this.$options.getOption("allowInvalid");
this.$$rawModelValue=a;e&&(this.$modelValue=a,b.$modelValue!==c&&b.$$writeModelToScope());this.$$runValidators(a,this.$$lastCommittedViewValue,function(d){e||(b.$modelValue=d?a:void 0,b.$modelValue!==c&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);r(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},this)},$setViewValue:function(a,b){this.$viewValue=a;this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},
$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");Y(b[a])?b=b[a]:Y(b["default"])&&(b=b["default"]);this.$$timeout.cancel(this.$$pendingDebounce);var d=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){d.$commitViewValue()},b):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){d.$commitViewValue()})},$overrideModelOptions:function(a){this.$options=this.$options.createChild(a);this.$$setUpdateOnEvents()},$processModelValue:function(){var a=
this.$$format();this.$viewValue!==a&&(this.$$updateEmptyClasses(a),this.$viewValue=this.$$lastCommittedViewValue=a,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,D))},$$format:function(){for(var a=this.$formatters,b=a.length,d=this.$modelValue;b--;)d=a[b](d);return d},$$setModelValue:function(a){this.$modelValue=this.$$rawModelValue=a;this.$$parserValid=void 0;this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,
this.$$updateEventHandler);if(this.$$updateEvents=this.$options.getOption("updateOn"))this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(a){this.$$debounceViewValueCommit(a&&a.type)}};ae({clazz:Sb,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var jf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Sb,priority:1,compile:function(b){b.addClass(Ya).addClass("ng-untouched").addClass(nb);
return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;if(f=f[2])g.$options=f.$options;g.$$initGetterSetters();b.$addControl(g);e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){function g(){h.$setTouched()}var h=f[0];h.$$setUpdateOnEvents();c.on("blur",function(){h.$touched||(a.$$phase?b.$evalAsync(g):b.$apply(g))})}}}}}],Tb,hh=/(\s+|^)default(\s+|$)/;Kc.prototype={getOption:function(a){return this.$$options[a]},
createChild:function(a){var b=!1;a=O({},a);r(a,function(d,c){"$inherit"===d?"*"===c?b=!0:(a[c]=this.$$options[c],"updateOn"===c&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===c&&(a.updateOnDefault=!1,a[c]=Q(d.replace(hh,function(){a.updateOnDefault=!0;return" "})))},this);b&&(delete a["*"],ge(a,this.$$options));ge(a,Tb.$$options);return new Kc(a)}};Tb=new Kc({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var nf=function(){function a(a,
d){this.$$attrs=a;this.$$scope=d}a.$inject=["$attrs","$scope"];a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Tb,d=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(d)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:a}},Ze=Qa({terminal:!0,priority:1E3}),ih=K("ngOptions"),jh=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
gf=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!r&&wa(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var p=a.match(jh);if(!p)throw ih("iexp",a,za(b));var n=p[5]||p[7],r=p[6];a=/ as /.test(p[0])&&p[1];var q=p[9];b=d(p[2]?p[1]:n);var v=a&&d(a)||b,u=q&&d(q),t=q?function(a,b){return u(c,b)}:function(a){return Pa(a)},
w=function(a,b){return t(a,C(a,b))},x=d(p[2]||p[1]),A=d(p[3]||""),H=d(p[4]||""),G=d(p[8]),z={},C=r?function(a,b){z[r]=b;z[n]=a;return z}:function(a){z[n]=a;return z};return{trackBy:q,getTrackByValue:w,getWatchables:d(G,function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var h=a===d?g:d[g],l=a[h],h=C(l,h),l=t(l,h);b.push(l);if(p[2]||p[1])l=x(c,h),b.push(l);p[4]&&(h=H(c,h),b.push(h))}return b}),getOptions:function(){for(var a=[],b={},d=G(c)||[],g=f(d),h=g.length,n=0;n<h;n++){var p=d===
g?n:g[n],r=C(d[p],p),u=v(c,r),p=t(u,r),y=x(c,r),F=A(c,r),r=H(c,r),u=new e(p,u,y,F,r);a.push(u);b[p]=u}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[w(a)]},getViewValueFromOption:function(a){return q?pa(a.viewValue):a.viewValue}}}}}var e=w.document.createElement("option"),f=w.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=D},post:function(d,h,k,l){function m(a){var b=(a=t.getOptionFromViewValue(a))&&
a.element;b&&!b.selected&&(b.selected=!0);return a}function p(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}var n=l[0],q=l[1],s=k.multiple;l=0;for(var v=h.children(),y=v.length;l<y;l++)if(""===v[l].value){n.hasEmptyOption=!0;n.emptyOption=v.eq(l);break}h.empty();l=!!n.emptyOption;z(e.cloneNode(!1)).val("?");var t,w=c(k.ngOptions,h,d),x=b[0].createDocumentFragment();n.generateUnknownOptionValue=function(a){return"?"};s?(n.writeValue=
function(a){if(t){var b=a&&a.map(m)||[];t.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})}},n.readValue=function(){var a=h.val()||[],b=[];r(a,function(a){(a=t.selectValueMap[a])&&!a.disabled&&b.push(t.getViewValueFromOption(a))});return b},w.trackBy&&d.$watchCollection(function(){if(I(q.$viewValue))return q.$viewValue.map(function(a){return w.getTrackByValue(a)})},function(){q.$render()})):(n.writeValue=function(a){if(t){var b=h[0].options[h[0].selectedIndex],
c=t.getOptionFromViewValue(a);b&&b.removeAttribute("selected");c?(h[0].value!==c.selectValue&&(n.removeUnknownOption(),h[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):n.selectUnknownOrEmptyOption(a)}},n.readValue=function(){var a=t.selectValueMap[h.val()];return a&&!a.disabled?(n.unselectEmptyOption(),n.removeUnknownOption(),t.getViewValueFromOption(a)):null},w.trackBy&&d.$watch(function(){return w.getTrackByValue(q.$viewValue)},function(){q.$render()}));
l&&(a(n.emptyOption)(d),h.prepend(n.emptyOption),8===n.emptyOption[0].nodeType?(n.hasEmptyOption=!1,n.registerOption=function(a,b){""===b.val()&&(n.hasEmptyOption=!0,n.emptyOption=b,n.emptyOption.removeClass("ng-scope"),q.$render(),b.on("$destroy",function(){var a=n.$isEmptyOptionSelected();n.hasEmptyOption=!1;n.emptyOption=void 0;a&&q.$render()}))}):n.emptyOption.removeClass("ng-scope"));d.$watchCollection(w.getWatchables,function(){var a=t&&n.readValue();if(t)for(var b=t.items.length-1;0<=b;b--){var c=
t.items[b];u(c.group)?Fb(c.element.parentNode):Fb(c.element)}t=w.getOptions();var d={};t.items.forEach(function(a){var b;if(u(a.group)){b=d[a.group];b||(b=f.cloneNode(!1),x.appendChild(b),b.label=null===a.group?"null":a.group,d[a.group]=b);var c=e.cloneNode(!1);b.appendChild(c);p(a,c)}else b=e.cloneNode(!1),x.appendChild(b),p(a,b)});h[0].appendChild(x);q.$render();q.$isEmpty(a)||(b=n.readValue(),(w.trackBy||s?sa(a,b):a===b)||(q.$setViewValue(b),q.$render()))})}}}}],$e=["$locale","$interpolate","$log",
function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,h){function k(a){g.text(a||"")}var l=h.count,m=h.$attr.when&&g.attr(h.$attr.when),p=h.offset||0,n=f.$eval(m)||{},q={},s=b.startSymbol(),v=b.endSymbol(),u=s+l+"-"+p+v,t=$.noop,w;r(h,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+L(c[2]),n[c]=g.attr(h.$attr[b]))});r(n,function(a,d){q[d]=b(a.replace(c,u))});f.$watch(l,function(b){var c=parseFloat(b),e=U(c);e||c in n||(c=a.pluralCat(c-p));c===w||e&&U(w)||(t(),e=q[c],x(e)?(null!=
b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),t=D,k()):t=f.$watch(e,k),w=c)})}}}],af=["$parse","$animate","$compile",function(a,b,d){var c=K("ngRepeat"),e=function(a,b,c,d,e,m,p){a[c]=d;e&&(a[e]=m);a.$index=b;a.$first=0===b;a.$last=b===p-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,k=d.$$createComment("end ngRepeat",h),l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
if(!l)throw c("iexp",h);var m=l[1],p=l[2],n=l[3],q=l[4],l=m.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!l)throw c("iidexp",m);var s=l[3]||l[1],v=l[2];if(n&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(n)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(n)))throw c("badident",n);var u,t,w,x,z={$id:Pa};q?u=a(q):(w=function(a,b){return Pa(b)},x=function(a){return a});return function(a,d,f,g,l){u&&(t=function(b,c,d){v&&(z[v]=b);z[s]=c;z.$index=
d;return u(a,z)});var m=S();a.$watchCollection(p,function(f){var g,p,q=d[0],u,y=S(),z,F,C,A,D,B,E;n&&(a[n]=f);if(wa(f))D=f,p=t||w;else for(E in p=t||x,D=[],f)ra.call(f,E)&&"$"!==E.charAt(0)&&D.push(E);z=D.length;E=Array(z);for(g=0;g<z;g++)if(F=f===D?g:D[g],C=f[F],A=p(F,C,g),m[A])B=m[A],delete m[A],y[A]=B,E[g]=B;else{if(y[A])throw r(E,function(a){a&&a.scope&&(m[a.id]=a)}),c("dupes",h,A,C);E[g]={id:A,scope:void 0,clone:void 0};y[A]=!0}for(u in m){B=m[u];A=tb(B.clone);b.leave(A);if(A[0].parentNode)for(g=
0,p=A.length;g<p;g++)A[g].$$NG_REMOVED=!0;B.scope.$destroy()}for(g=0;g<z;g++)if(F=f===D?g:D[g],C=f[F],B=E[g],B.scope){u=q;do u=u.nextSibling;while(u&&u.$$NG_REMOVED);B.clone[0]!==u&&b.move(tb(B.clone),null,q);q=B.clone[B.clone.length-1];e(B.scope,g,s,C,v,F,z)}else l(function(a,c){B.scope=c;var d=k.cloneNode(!1);a[a.length++]=d;b.enter(a,null,q);q=d;B.clone=a;y[B.id]=B;e(B.scope,g,s,C,v,F,z)});m=y})}}}}],bf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,
function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ve=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],cf=Qa(function(a,b,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),df=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases=
{}}],link:function(d,c,e,f){var g=[],h=[],k=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(e.ngSwitch||e.on,function(c){for(var d,e;k.length;)a.cancel(k.pop());d=0;for(e=l.length;d<e;++d){var q=tb(h[d].clone);l[d].$destroy();(k[d]=a.leave(q)).done(m(k,d))}h.length=0;l.length=0;(g=f.cases["!"+c]||f.cases["?"])&&r(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");h.push({clone:d});a.enter(d,f.parent(),
f)})})})}}}],ef=Qa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a});r(a,function(a){c.cases["!"+a]=c.cases["!"+a]||[];c.cases["!"+a].push({transclude:e,element:b})})}}),ff=Qa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),kh=K("ngTransclude"),
hf=["$compile",function(a){return{restrict:"EAC",compile:function(b){var d=a(b.contents());b.empty();return function(a,b,f,g,h){function k(){d(a,function(a){b.append(a)})}if(!h)throw kh("orphan",za(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude="");f=f.ngTransclude||f.ngTranscludeSlot;h(function(a,c){var d;if(d=a.length)a:{d=0;for(var f=a.length;d<f;d++){var g=a[d];if(g.nodeType!==Oa||g.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(k(),c.$destroy())},null,f);f&&!h.isSlotFilled(f)&&
k()}}}}],Je=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"===d.type&&a.put(d.id,b[0].text)}}}],lh={$setViewValue:D,$render:D},mh=["$element","$scope",function(a,b){function d(){g||(g=!0,b.$$postDigest(function(){g=!1;e.ngModelCtrl.$render()}))}function c(a){h||(h=!0,b.$$postDigest(function(){b.$$destroyed||(h=!1,e.ngModelCtrl.$setViewValue(e.readValue()),a&&e.ngModelCtrl.$render())}))}var e=this,f=new Hb;e.selectValueMap={};e.ngModelCtrl=lh;
e.multiple=!1;e.unknownOption=z(w.document.createElement("option"));e.hasEmptyOption=!1;e.emptyOption=void 0;e.renderUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);a.prepend(e.unknownOption);Ga(e.unknownOption,!0);a.val(b)};e.updateUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);Ga(e.unknownOption,!0);a.val(b)};e.generateUnknownOptionValue=function(a){return"? "+Pa(a)+" ?"};e.removeUnknownOption=function(){e.unknownOption.parent()&&
e.unknownOption.remove()};e.selectEmptyOption=function(){e.emptyOption&&(a.val(""),Ga(e.emptyOption,!0))};e.unselectEmptyOption=function(){e.hasEmptyOption&&Ga(e.emptyOption,!1)};b.$on("$destroy",function(){e.renderUnknownOption=D});e.readValue=function(){var b=a.val(),b=b in e.selectValueMap?e.selectValueMap[b]:b;return e.hasOption(b)?b:null};e.writeValue=function(b){var c=a[0].options[a[0].selectedIndex];c&&Ga(z(c),!1);e.hasOption(b)?(e.removeUnknownOption(),c=Pa(b),a.val(c in e.selectValueMap?
c:b),Ga(z(a[0].options[a[0].selectedIndex]),!0)):e.selectUnknownOrEmptyOption(b)};e.addOption=function(a,b){if(8!==b[0].nodeType){Ia(a,'"option value"');""===a&&(e.hasEmptyOption=!0,e.emptyOption=b);var c=f.get(a)||0;f.set(a,c+1);d()}};e.removeOption=function(a){var b=f.get(a);b&&(1===b?(f.delete(a),""===a&&(e.hasEmptyOption=!1,e.emptyOption=void 0)):f.set(a,b-1))};e.hasOption=function(a){return!!f.get(a)};e.$hasEmptyOption=function(){return e.hasEmptyOption};e.$isUnknownOptionSelected=function(){return a[0].options[0]===
e.unknownOption[0]};e.$isEmptyOptionSelected=function(){return e.hasEmptyOption&&a[0].options[a[0].selectedIndex]===e.emptyOption[0]};e.selectUnknownOrEmptyOption=function(a){null==a&&e.emptyOption?(e.removeUnknownOption(),e.selectEmptyOption()):e.unknownOption.parent().length?e.updateUnknownOption(a):e.renderUnknownOption(a)};var g=!1,h=!1;e.registerOption=function(a,b,f,g,h){if(f.$attr.ngValue){var q,r=NaN;f.$observe("value",function(a){var d,f=b.prop("selected");u(r)&&(e.removeOption(q),delete e.selectValueMap[r],
d=!0);r=Pa(a);q=a;e.selectValueMap[r]=a;e.addOption(a,b);b.attr("value",r);d&&f&&c()})}else g?f.$observe("value",function(a){e.readValue();var d,f=b.prop("selected");u(q)&&(e.removeOption(q),d=!0);q=a;e.addOption(a,b);d&&f&&c()}):h?a.$watch(h,function(a,d){f.$set("value",a);var g=b.prop("selected");d!==a&&e.removeOption(d);e.addOption(a,b);d&&g&&c()}):e.addOption(f.value,b);f.$observe("disabled",function(a){if("true"===a||a&&b.prop("selected"))e.multiple?c(!0):(e.ngModelCtrl.$setViewValue(null),e.ngModelCtrl.$render())});
b.on("$destroy",function(){var a=e.readValue(),b=f.value;e.removeOption(b);d();(e.multiple&&a&&-1!==a.indexOf(b)||a===b)&&c(!0)})}}],Ke=function(){return{restrict:"E",require:["select","?ngModel"],controller:mh,priority:1,link:{pre:function(a,b,d,c){var e=c[0],f=c[1];if(f){if(e.ngModelCtrl=f,b.on("change",function(){e.removeUnknownOption();a.$apply(function(){f.$setViewValue(e.readValue())})}),d.multiple){e.multiple=!0;e.readValue=function(){var a=[];r(b.find("option"),function(b){b.selected&&!b.disabled&&
(b=b.value,a.push(b in e.selectValueMap?e.selectValueMap[b]:b))});return a};e.writeValue=function(a){r(b.find("option"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,b.value)||-1!==Array.prototype.indexOf.call(a,e.selectValueMap[b.value]));c!==b.selected&&Ga(z(b),c)})};var g,h=NaN;a.$watch(function(){h!==f.$viewValue||sa(g,f.$viewValue)||(g=ka(f.$viewValue),f.$render());h=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}else e.registerOption=D},post:function(a,b,d,c){var e=
c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Le=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){var c,e;u(d.ngValue)||(u(d.value)?c=a(d.value,!0):(e=a(b.text(),!0))||d.$set("value",b.text()));return function(a,b,d){var k=b.parent();(k=k.data("$selectController")||k.parent().data("$selectController"))&&k.registerOption(a,b,d,c,e)}}}}],ad=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=
function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},$c=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe("pattern",function(a){E(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw K("ngPattern")("noregexp",f,a,za(b));e=a||void 0;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||x(e)||e.test(b)}}}}},cd=function(){return{restrict:"A",require:"?ngModel",
link:function(a,b,d,c){if(c){var e=-1;d.$observe("maxlength",function(a){a=Z(a);e=U(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||b.length<=e}}}}},bd=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=0;d.$observe("minlength",function(a){e=Z(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};w.angular.bootstrap?w.console&&console.log("WARNING: Tried to load AngularJS more than once."):
(Be(),Ee($),$.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,
minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),z(function(){we(w.document,Uc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
//# sourceMappingURL=angular.min.js.map

/*
 AngularJS v1.6.9
 (c) 2010-2018 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(S,q){'use strict';function Ea(a,b,c){if(!a)throw Pa("areq",b||"?",c||"required");return a}function Fa(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;V(a)&&(a=a.join(" "));V(b)&&(b=b.join(" "));return a+" "+b}function Qa(a){var b={};a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from);return b}function W(a,b,c){var d="";a=V(a)?a:a&&C(a)&&a.length?a.split(/\s+/):[];t(a,function(a,f){a&&0<a.length&&(d+=0<f?" ":"",d+=c?b+a:a+b)});return d}function Ga(a){if(a instanceof A)switch(a.length){case 0:return a;
case 1:if(1===a[0].nodeType)return a;break;default:return A(ua(a))}if(1===a.nodeType)return A(a)}function ua(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(1===c.nodeType)return c}}function Ra(a,b,c){t(b,function(b){a.addClass(b,c)})}function Sa(a,b,c){t(b,function(b){a.removeClass(b,c)})}function X(a){return function(b,c){c.addClass&&(Ra(a,b,c.addClass),c.addClass=null);c.removeClass&&(Sa(a,b,c.removeClass),c.removeClass=null)}}function oa(a){a=a||{};if(!a.$$prepared){var b=a.domOperation||
O;a.domOperation=function(){a.$$domOperationFired=!0;b();b=O};a.$$prepared=!0}return a}function ha(a,b){Ha(a,b);Ia(a,b)}function Ha(a,b){b.from&&(a.css(b.from),b.from=null)}function Ia(a,b){b.to&&(a.css(b.to),b.to=null)}function T(a,b,c){var d=b.options||{};c=c.options||{};var e=(d.addClass||"")+" "+(c.addClass||""),f=(d.removeClass||"")+" "+(c.removeClass||"");a=Ta(a.attr("class"),e,f);c.preparationClasses&&(d.preparationClasses=ca(c.preparationClasses,d.preparationClasses),delete c.preparationClasses);
e=d.domOperation!==O?d.domOperation:null;va(d,c);e&&(d.domOperation=e);d.addClass=a.addClass?a.addClass:null;d.removeClass=a.removeClass?a.removeClass:null;b.addClass=d.addClass;b.removeClass=d.removeClass;return d}function Ta(a,b,c){function d(a){C(a)&&(a=a.split(" "));var b={};t(a,function(a){a.length&&(b[a]=!0)});return b}var e={};a=d(a);b=d(b);t(b,function(a,b){e[b]=1});c=d(c);t(c,function(a,b){e[b]=1===e[b]?null:-1});var f={addClass:"",removeClass:""};t(e,function(b,c){var d,e;1===b?(d="addClass",
e=!a[c]||a[c+"-remove"]):-1===b&&(d="removeClass",e=a[c]||a[c+"-add"]);e&&(f[d].length&&(f[d]+=" "),f[d]+=c)});return f}function J(a){return a instanceof A?a[0]:a}function Ua(a,b,c){var d="";b&&(d=W(b,"ng-",!0));c.addClass&&(d=ca(d,W(c.addClass,"-add")));c.removeClass&&(d=ca(d,W(c.removeClass,"-remove")));d.length&&(c.preparationClasses=d,a.addClass(d))}function pa(a,b){var c=b?"-"+b+"s":"";ka(a,[la,c]);return[la,c]}function wa(a,b){var c=b?"paused":"",d=Y+"PlayState";ka(a,[d,c]);return[d,c]}function ka(a,
b){a.style[b[0]]=b[1]}function ca(a,b){return a?b?a+" "+b:a:b}function Ja(a,b,c){var d=Object.create(null),e=a.getComputedStyle(b)||{};t(c,function(a,b){var c=e[a];if(c){var l=c.charAt(0);if("-"===l||"+"===l||0<=l)c=Va(c);0===c&&(c=null);d[b]=c}});return d}function Va(a){var b=0;a=a.split(/\s*,\s*/);t(a,function(a){"s"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));a=parseFloat(a)||0;b=b?Math.max(a,b):a});return b}function xa(a){return 0===a||null!=a}function Ka(a,b){var c=Q,d=a+"s";b?c+="Duration":
d+=" linear all";return[c,d]}function La(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){return(b=a[b])?b.total:0},get:function(b){return(b=a[b])&&b.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function Ma(a,b,c){t(c,function(c){a[c]=ya(a[c])?a[c]:b.style.getPropertyValue(c)})}var Q,za,Y,Aa;void 0===S.ontransitionend&&void 0!==S.onwebkittransitionend?(Q="WebkitTransition",za="webkitTransitionEnd transitionend"):(Q="transition",za=
"transitionend");void 0===S.onanimationend&&void 0!==S.onwebkitanimationend?(Y="WebkitAnimation",Aa="webkitAnimationEnd animationend"):(Y="animation",Aa="animationend");var qa=Y+"Delay",Ba=Y+"Duration",la=Q+"Delay",Na=Q+"Duration",Pa=q.$$minErr("ng"),Wa={transitionDuration:Na,transitionDelay:la,transitionProperty:Q+"Property",animationDuration:Ba,animationDelay:qa,animationIterationCount:Y+"IterationCount"},Xa={transitionDuration:Na,transitionDelay:la,animationDuration:Ba,animationDelay:qa},Ca,va,
t,V,ya,Z,Da,ra,C,P,A,O;q.module("ngAnimate",[],function(){O=q.noop;Ca=q.copy;va=q.extend;A=q.element;t=q.forEach;V=q.isArray;C=q.isString;ra=q.isObject;P=q.isUndefined;ya=q.isDefined;Da=q.isFunction;Z=q.isElement}).info({angularVersion:"1.6.9"}).directive("ngAnimateSwap",["$animate","$rootScope",function(a,b){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(b,d,e,f,n){var G,l;b.$watchCollection(e.ngAnimateSwap||e["for"],function(e){G&&a.leave(G);l&&(l.$destroy(),l=null);
if(e||0===e)l=b.$new(),n(l,function(b){G=b;a.enter(b,null,d)})})}}}]).directive("ngAnimateChildren",["$interpolate",function(a){return{link:function(b,c,d){function e(a){c.data("$$ngAnimateChildren","on"===a||"true"===a)}var f=d.ngAnimateChildren;C(f)&&0===f.length?c.data("$$ngAnimateChildren",!0):(e(a(f)(b)),d.$observe("ngAnimateChildren",e))}}}]).factory("$$rAFScheduler",["$$rAF",function(a){function b(a){d=d.concat(a);c()}function c(){if(d.length){for(var b=d.shift(),n=0;n<b.length;n++)b[n]();
e||a(function(){e||c()})}}var d,e;d=b.queue=[];b.waitUntilQuiet=function(b){e&&e();e=a(function(){e=null;b();c()})};return b}]).provider("$$animateQueue",["$animateProvider",function(a){function b(a){if(!a)return null;a=a.split(" ");var b=Object.create(null);t(a,function(a){b[a]=!0});return b}function c(a,c){if(a&&c){var d=b(c);return a.split(" ").some(function(a){return d[a]})}}function d(a,b,c){return f[a].some(function(a){return a(b,c)})}function e(a,b){var c=0<(a.addClass||"").length,d=0<(a.removeClass||
"").length;return b?c&&d:c||d}var f=this.rules={skip:[],cancel:[],join:[]};f.join.push(function(a,b){return!a.structural&&e(a)});f.skip.push(function(a,b){return!a.structural&&!e(a)});f.skip.push(function(a,b){return"leave"===b.event&&a.structural});f.skip.push(function(a,b){return b.structural&&2===b.state&&!a.structural});f.cancel.push(function(a,b){return b.structural&&a.structural});f.cancel.push(function(a,b){return 2===b.state&&a.structural});f.cancel.push(function(a,b){if(b.structural)return!1;
var d=a.addClass,e=a.removeClass,f=b.addClass,sa=b.removeClass;return P(d)&&P(e)||P(f)&&P(sa)?!1:c(d,sa)||c(e,f)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(b,c,f,s,y,sa,da,v,E,g,M){function x(){var a=!1;return function(b){a?b():c.$$postDigest(function(){a=!0;b()})}}function H(a,b,c){var h=[],d=k[c];d&&t(d,function(d){u.call(d.node,b)?h.push(d.callback):"leave"===c&&
u.call(d.node,a)&&h.push(d.callback)});return h}function I(a,b,c){var h=ua(b);return a.filter(function(a){return!(a.node===h&&(!c||a.callback===c))})}function K(a,k,w){function K(a,c,h,k){s(function(){var a=H(na,p,c);a.length?b(function(){t(a,function(a){a(f,h,k)});"close"!==h||p.parentNode||ba.off(p)}):"close"!==h||p.parentNode||ba.off(p)});a.progress(c,h,k)}function I(a){var b=f,c=g;c.preparationClasses&&(b.removeClass(c.preparationClasses),c.preparationClasses=null);c.activeClasses&&(b.removeClass(c.activeClasses),
c.activeClasses=null);Oa(f,g);ha(f,g);g.domOperation();l.complete(!a)}var g=Ca(w),f=Ga(a),p=J(f),na=p&&p.parentNode,g=oa(g),l=new da,s=x();V(g.addClass)&&(g.addClass=g.addClass.join(" "));g.addClass&&!C(g.addClass)&&(g.addClass=null);V(g.removeClass)&&(g.removeClass=g.removeClass.join(" "));g.removeClass&&!C(g.removeClass)&&(g.removeClass=null);g.from&&!ra(g.from)&&(g.from=null);g.to&&!ra(g.to)&&(g.to=null);if(!(h&&p&&Ya(p,k,w)&&D(p,g)))return I(),l;var v=0<=["enter","move","leave"].indexOf(k),u=
M(),y=u||ga.get(p);w=!y&&z.get(p)||{};var E=!!w.state;y||E&&1===w.state||(y=!L(p,na,k));if(y)return u&&K(l,k,"start"),I(),u&&K(l,k,"close"),l;v&&ta(p);u={structural:v,element:f,event:k,addClass:g.addClass,removeClass:g.removeClass,close:I,options:g,runner:l};if(E){if(d("skip",u,w)){if(2===w.state)return I(),l;T(f,w,u);return w.runner}if(d("cancel",u,w))if(2===w.state)w.runner.end();else if(w.structural)w.close();else return T(f,w,u),w.runner;else if(d("join",u,w))if(2===w.state)T(f,u,{});else return Ua(f,
v?k:null,g),k=u.event=w.event,g=T(f,w,u),w.runner}else T(f,u,{});(E=u.structural)||(E="animate"===u.event&&0<Object.keys(u.options.to||{}).length||e(u));if(!E)return I(),m(p),l;var q=(w.counter||0)+1;u.counter=q;F(p,1,u);c.$$postDigest(function(){f=Ga(a);var b=z.get(p),c=!b,b=b||{},h=0<(f.parent()||[]).length&&("animate"===b.event||b.structural||e(b));if(c||b.counter!==q||!h){c&&(Oa(f,g),ha(f,g));if(c||v&&b.event!==k)g.domOperation(),l.end();h||m(p)}else k=!b.structural&&e(b,!0)?"setClass":b.event,
F(p,2),b=sa(f,k,b.options),l.setHost(b),K(l,k,"start",{}),b.done(function(a){I(!a);(a=z.get(p))&&a.counter===q&&m(p);K(l,k,"close",{})})});return l}function ta(a){a=a.querySelectorAll("[data-ng-animate]");t(a,function(a){var b=parseInt(a.getAttribute("data-ng-animate"),10),c=z.get(a);if(c)switch(b){case 2:c.runner.end();case 1:z.delete(a)}})}function m(a){a.removeAttribute("data-ng-animate");z.delete(a)}function L(a,b,c){c=s[0].body;var h=J(f),k=a===c||"HTML"===a.nodeName,d=a===h,g=!1,e=ga.get(a),
p;for((a=A.data(a,"$ngAnimatePin"))&&(b=J(a));b;){d||(d=b===h);if(1!==b.nodeType)break;a=z.get(b)||{};if(!g){var H=ga.get(b);if(!0===H&&!1!==e){e=!0;break}else!1===H&&(e=!1);g=a.structural}if(P(p)||!0===p)a=A.data(b,"$$ngAnimateChildren"),ya(a)&&(p=a);if(g&&!1===p)break;k||(k=b===c);if(k&&d)break;if(!d&&(a=A.data(b,"$ngAnimatePin"))){b=J(a);continue}b=b.parentNode}return(!g||p)&&!0!==e&&d&&k}function F(a,b,c){c=c||{};c.state=b;a.setAttribute("data-ng-animate",b);c=(b=z.get(a))?va(b,c):c;z.set(a,c)}
var z=new y,ga=new y,h=null,p=c.$watch(function(){return 0===v.totalPendingRequests},function(a){a&&(p(),c.$$postDigest(function(){c.$$postDigest(function(){null===h&&(h=!0)})}))}),k=Object.create(null);y=a.customFilter();var na=a.classNameFilter();g=function(){return!0};var Ya=y||g,D=na?function(a,b){var c=[a.getAttribute("class"),b.addClass,b.removeClass].join(" ");return na.test(c)}:g,Oa=X(E),u=S.Node.prototype.contains||function(a){return this===a||!!(this.compareDocumentPosition(a)&16)},ba={on:function(a,
b,c){var h=ua(b);k[a]=k[a]||[];k[a].push({node:h,callback:c});A(b).on("$destroy",function(){z.get(h)||ba.off(a,b,c)})},off:function(a,b,c){if(1!==arguments.length||C(arguments[0])){var h=k[a];h&&(k[a]=1===arguments.length?null:I(h,b,c))}else for(h in b=arguments[0],k)k[h]=I(k[h],b)},pin:function(a,b){Ea(Z(a),"element","not an element");Ea(Z(b),"parentElement","not an element");a.data("$ngAnimatePin",b)},push:function(a,b,c,h){c=c||{};c.domOperation=h;return K(a,b,c)},enabled:function(a,b){var c=arguments.length;
if(0===c)b=!!h;else if(Z(a)){var k=J(a);1===c?b=!ga.get(k):ga.set(k,!b)}else b=h=!!a;return b}};return ba}]}]).provider("$$animation",["$animateProvider",function(a){var b=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(a,d,e,f,n,G){function l(a){function b(a){if(a.processed)return a;a.processed=!0;var d=a.domNode,e=d.parentNode;g.set(d,a);for(var f;e;){if(f=g.get(e)){f.processed||(f=b(f));break}e=e.parentNode}(f||c).children.push(a);
return a}var c={children:[]},d,g=new n;for(d=0;d<a.length;d++){var e=a[d];g.set(e.domNode,a[d]={domNode:e.domNode,fn:e.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return function(a){var b=[],c=[],d;for(d=0;d<a.children.length;d++)c.push(a.children[d]);a=c.length;var g=0,e=[];for(d=0;d<c.length;d++){var f=c[d];0>=a&&(a=g,g=0,b.push(e),e=[]);e.push(f.fn);f.children.forEach(function(a){g++;c.push(a)});a--}e.length&&b.push(e);return b}(c)}var s=[],y=X(a);return function(n,q,v){function E(a){a=a.hasAttribute("ng-animate-ref")?
[a]:a.querySelectorAll("[ng-animate-ref]");var b=[];t(a,function(a){var c=a.getAttribute("ng-animate-ref");c&&c.length&&b.push(a)});return b}function g(a){var b=[],c={};t(a,function(a,d){var k=J(a.element),g=0<=["enter","move"].indexOf(a.event),k=a.structural?E(k):[];if(k.length){var e=g?"to":"from";t(k,function(a){var b=a.getAttribute("ng-animate-ref");c[b]=c[b]||{};c[b][e]={animationID:d,element:A(a)}})}else b.push(a)});var d={},g={};t(c,function(c,e){var f=c.from,p=c.to;if(f&&p){var H=a[f.animationID],
z=a[p.animationID],m=f.animationID.toString();if(!g[m]){var l=g[m]={structural:!0,beforeStart:function(){H.beforeStart();z.beforeStart()},close:function(){H.close();z.close()},classes:M(H.classes,z.classes),from:H,to:z,anchors:[]};l.classes.length?b.push(l):(b.push(H),b.push(z))}g[m].anchors.push({out:f.element,"in":p.element})}else f=f?f.animationID:p.animationID,p=f.toString(),d[p]||(d[p]=!0,b.push(a[f]))});return b}function M(a,b){a=a.split(" ");b=b.split(" ");for(var c=[],d=0;d<a.length;d++){var g=
a[d];if("ng-"!==g.substring(0,3))for(var e=0;e<b.length;e++)if(g===b[e]){c.push(g);break}}return c.join(" ")}function x(a){for(var c=b.length-1;0<=c;c--){var d=e.get(b[c])(a);if(d)return d}}function H(a,b){function c(a){(a=a.data("$$animationRunner"))&&a.setHost(b)}a.from&&a.to?(c(a.from.element),c(a.to.element)):c(a.element)}function I(){var a=n.data("$$animationRunner");!a||"leave"===q&&v.$$domOperationFired||a.end()}function K(b){n.off("$destroy",I);n.removeData("$$animationRunner");y(n,v);ha(n,
v);v.domOperation();F&&a.removeClass(n,F);n.removeClass("ng-animate");m.complete(!b)}v=oa(v);var ta=0<=["enter","move","leave"].indexOf(q),m=new f({end:function(){K()},cancel:function(){K(!0)}});if(!b.length)return K(),m;n.data("$$animationRunner",m);var L=Fa(n.attr("class"),Fa(v.addClass,v.removeClass)),F=v.tempClasses;F&&(L+=" "+F,v.tempClasses=null);var z;ta&&(z="ng-"+q+"-prepare",a.addClass(n,z));s.push({element:n,classes:L,event:q,structural:ta,options:v,beforeStart:function(){n.addClass("ng-animate");
F&&a.addClass(n,F);z&&(a.removeClass(n,z),z=null)},close:K});n.on("$destroy",I);if(1<s.length)return m;d.$$postDigest(function(){var a=[];t(s,function(b){b.element.data("$$animationRunner")?a.push(b):b.close()});s.length=0;var b=g(a),c=[];t(b,function(a){c.push({domNode:J(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var b,c=a.close;if((a.anchors?a.from.element||a.to.element:a.element).data("$$animationRunner")){var d=x(a);d&&(b=d.start)}b?(b=b(),b.done(function(a){c(!a)}),H(a,b)):
c()}})});G(l(c))});return m}}]}]).provider("$animateCss",["$animateProvider",function(a){var b=La(),c=La();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(a,e,f,n,G,l,s,y){function q(a,b){var c=a.parentNode;return(c.$$ngAnimateParentKey||(c.$$ngAnimateParentKey=++M))+"-"+a.getAttribute("class")+"-"+b}function da(g,f,l,n){var m;0<b.count(l)&&(m=c.get(l),m||(f=W(f,"-stagger"),e.addClass(g,f),m=Ja(a,g,n),m.animationDuration=
Math.max(m.animationDuration,0),m.transitionDuration=Math.max(m.transitionDuration,0),e.removeClass(g,f),c.put(l,m)));return m||{}}function v(a){x.push(a);s.waitUntilQuiet(function(){b.flush();c.flush();for(var a=G(),d=0;d<x.length;d++)x[d](a);x.length=0})}function E(c,g,e){g=b.get(e);g||(g=Ja(a,c,Wa),"infinite"===g.animationIterationCount&&(g.animationIterationCount=1));b.put(e,g);c=g;e=c.animationDelay;g=c.transitionDelay;c.maxDelay=e&&g?Math.max(e,g):e||g;c.maxDuration=Math.max(c.animationDuration*
c.animationIterationCount,c.transitionDuration);return c}var g=X(e),M=0,x=[];return function(a,c){function d(){m()}function s(){m(!0)}function m(b){if(!(M||ba&&u)){M=!0;u=!1;h.$$skipPreparationClasses||e.removeClass(a,fa);e.removeClass(a,ca);wa(k,!1);pa(k,!1);t(x,function(a){k.style[a[0]]=""});g(a,h);ha(a,h);Object.keys(p).length&&t(p,function(a,b){a?k.style.setProperty(b,a):k.style.removeProperty(b)});if(h.onDone)h.onDone();ea&&ea.length&&a.off(ea.join(" "),z);var c=a.data("$$animateCss");c&&(n.cancel(c[0].timer),
a.removeData("$$animateCss"));A&&A.complete(!b)}}function L(a){r.blockTransition&&pa(k,a);r.blockKeyframeAnimation&&wa(k,!!a)}function F(){A=new f({end:d,cancel:s});v(O);m();return{$$willAnimate:!1,start:function(){return A},end:d}}function z(a){a.stopPropagation();var b=a.originalEvent||a;b.target===k&&(a=b.$manualTimeStamp||Date.now(),b=parseFloat(b.elapsedTime.toFixed(3)),Math.max(a-T,0)>=P&&b>=N&&(ba=!0,m()))}function ga(){function b(){if(!M){L(!1);t(x,function(a){k.style[a[0]]=a[1]});g(a,h);
e.addClass(a,ca);if(r.recalculateTimingStyles){ma=k.getAttribute("class")+" "+fa;ja=q(k,ma);B=E(k,ma,ja);$=B.maxDelay;w=Math.max($,0);N=B.maxDuration;if(0===N){m();return}r.hasTransitions=0<B.transitionDuration;r.hasAnimations=0<B.animationDuration}r.applyAnimationDelay&&($="boolean"!==typeof h.delay&&xa(h.delay)?parseFloat(h.delay):$,w=Math.max($,0),B.animationDelay=$,aa=[qa,$+"s"],x.push(aa),k.style[aa[0]]=aa[1]);P=1E3*w;S=1E3*N;if(h.easing){var d,f=h.easing;r.hasTransitions&&(d=Q+"TimingFunction",
x.push([d,f]),k.style[d]=f);r.hasAnimations&&(d=Y+"TimingFunction",x.push([d,f]),k.style[d]=f)}B.transitionDuration&&ea.push(za);B.animationDuration&&ea.push(Aa);T=Date.now();var l=P+1.5*S;d=T+l;var f=a.data("$$animateCss")||[],F=!0;if(f.length){var s=f[0];(F=d>s.expectedEndTime)?n.cancel(s.timer):f.push(m)}F&&(l=n(c,l,!1),f[0]={timer:l,expectedEndTime:d},f.push(m),a.data("$$animateCss",f));if(ea.length)a.on(ea.join(" "),z);h.to&&(h.cleanupStyles&&Ma(p,k,Object.keys(h.to)),Ia(a,h))}}function c(){var b=
a.data("$$animateCss");if(b){for(var d=1;d<b.length;d++)b[d]();a.removeData("$$animateCss")}}if(!M)if(k.parentNode){var d=function(a){if(ba)u&&a&&(u=!1,m());else if(u=!a,B.animationDuration)if(a=wa(k,u),u)x.push(a);else{var b=x,c=b.indexOf(a);0<=a&&b.splice(c,1)}},f=0<Z&&(B.transitionDuration&&0===U.transitionDuration||B.animationDuration&&0===U.animationDuration)&&Math.max(U.animationDelay,U.transitionDelay);f?n(b,Math.floor(f*Z*1E3),!1):b();C.resume=function(){d(!0)};C.pause=function(){d(!1)}}else m()}
var h=c||{};h.$$prepared||(h=oa(Ca(h)));var p={},k=J(a);if(!k||!k.parentNode||!y.enabled())return F();var x=[],G=a.attr("class"),D=Qa(h),M,u,ba,A,C,w,P,N,S,T,ea=[];if(0===h.duration||!l.animations&&!l.transitions)return F();var ia=h.event&&V(h.event)?h.event.join(" "):h.event,X="",R="";ia&&h.structural?X=W(ia,"ng-",!0):ia&&(X=ia);h.addClass&&(R+=W(h.addClass,"-add"));h.removeClass&&(R.length&&(R+=" "),R+=W(h.removeClass,"-remove"));h.applyClassesEarly&&R.length&&g(a,h);var fa=[X,R].join(" ").trim(),
ma=G+" "+fa,ca=W(fa,"-active"),G=D.to&&0<Object.keys(D.to).length;if(!(0<(h.keyframeStyle||"").length||G||fa))return F();var ja,U;0<h.stagger?(D=parseFloat(h.stagger),U={transitionDelay:D,animationDelay:D,transitionDuration:0,animationDuration:0}):(ja=q(k,ma),U=da(k,fa,ja,Xa));h.$$skipPreparationClasses||e.addClass(a,fa);h.transitionStyle&&(D=[Q,h.transitionStyle],ka(k,D),x.push(D));0<=h.duration&&(D=0<k.style[Q].length,D=Ka(h.duration,D),ka(k,D),x.push(D));h.keyframeStyle&&(D=[Y,h.keyframeStyle],
ka(k,D),x.push(D));var Z=U?0<=h.staggerIndex?h.staggerIndex:b.count(ja):0;(ia=0===Z)&&!h.skipBlocking&&pa(k,9999);var B=E(k,ma,ja),$=B.maxDelay;w=Math.max($,0);N=B.maxDuration;var r={};r.hasTransitions=0<B.transitionDuration;r.hasAnimations=0<B.animationDuration;r.hasTransitionAll=r.hasTransitions&&"all"===B.transitionProperty;r.applyTransitionDuration=G&&(r.hasTransitions&&!r.hasTransitionAll||r.hasAnimations&&!r.hasTransitions);r.applyAnimationDuration=h.duration&&r.hasAnimations;r.applyTransitionDelay=
xa(h.delay)&&(r.applyTransitionDuration||r.hasTransitions);r.applyAnimationDelay=xa(h.delay)&&r.hasAnimations;r.recalculateTimingStyles=0<R.length;if(r.applyTransitionDuration||r.applyAnimationDuration)N=h.duration?parseFloat(h.duration):N,r.applyTransitionDuration&&(r.hasTransitions=!0,B.transitionDuration=N,D=0<k.style[Q+"Property"].length,x.push(Ka(N,D))),r.applyAnimationDuration&&(r.hasAnimations=!0,B.animationDuration=N,x.push([Ba,N+"s"]));if(0===N&&!r.recalculateTimingStyles)return F();if(null!=
h.delay){var aa;"boolean"!==typeof h.delay&&(aa=parseFloat(h.delay),w=Math.max(aa,0));r.applyTransitionDelay&&x.push([la,aa+"s"]);r.applyAnimationDelay&&x.push([qa,aa+"s"])}null==h.duration&&0<B.transitionDuration&&(r.recalculateTimingStyles=r.recalculateTimingStyles||ia);P=1E3*w;S=1E3*N;h.skipBlocking||(r.blockTransition=0<B.transitionDuration,r.blockKeyframeAnimation=0<B.animationDuration&&0<U.animationDelay&&0===U.animationDuration);h.from&&(h.cleanupStyles&&Ma(p,k,Object.keys(h.from)),Ha(a,h));
r.blockTransition||r.blockKeyframeAnimation?L(N):h.skipBlocking||pa(k,!1);return{$$willAnimate:!0,end:d,start:function(){if(!M)return C={end:d,cancel:s,resume:null,pause:null},A=new f(C),v(ga),A}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(a){a.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,c,d,e,f,n,G){function l(a){return a.replace(/\bng-\S+\b/g,"")}function s(a,b){C(a)&&
(a=a.split(" "));C(b)&&(b=b.split(" "));return a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function y(c,f,e){function n(a){var b={},c=J(a).getBoundingClientRect();t(["width","height","top","left"],function(a){var d=c[a];switch(a){case "top":d+=v.scrollTop;break;case "left":d+=v.scrollLeft}b[a]=Math.floor(d)+"px"});return b}function G(){var c=l(e.attr("class")||""),d=s(c,m),c=s(m,c),d=a(y,{to:n(e),addClass:"ng-anchor-in "+d,removeClass:"ng-anchor-out "+c,delay:!0});return d.$$willAnimate?
d:null}function q(){y.remove();f.removeClass("ng-animate-shim");e.removeClass("ng-animate-shim")}var y=A(J(f).cloneNode(!0)),m=l(y.attr("class")||"");f.addClass("ng-animate-shim");e.addClass("ng-animate-shim");y.addClass("ng-anchor");E.append(y);var L;c=function(){var c=a(y,{addClass:"ng-anchor-out",delay:!0,from:n(f)});return c.$$willAnimate?c:null}();if(!c&&(L=G(),!L))return q();var F=c||L;return{start:function(){function a(){c&&c.end()}var b,c=F.start();c.done(function(){c=null;if(!L&&(L=G()))return c=
L.start(),c.done(function(){c=null;q();b.complete()}),c;q();b.complete()});return b=new d({end:a,cancel:a})}}}function q(a,b,c,f){var e=da(a,O),l=da(b,O),n=[];t(f,function(a){(a=y(c,a.out,a["in"]))&&n.push(a)});if(e||l||0!==n.length)return{start:function(){function a(){t(b,function(a){a.end()})}var b=[];e&&b.push(e.start());l&&b.push(l.start());t(n,function(a){b.push(a.start())});var c=new d({end:a,cancel:a});d.all(b,function(a){c.complete(a)});return c}}}function da(c){var d=c.element,e=c.options||
{};c.structural&&(e.event=c.event,e.structural=!0,e.applyClassesEarly=!0,"leave"===c.event&&(e.onDone=e.domOperation));e.preparationClasses&&(e.event=ca(e.event,e.preparationClasses));c=a(d,e);return c.$$willAnimate?c:null}if(!f.animations&&!f.transitions)return O;var v=G[0].body;c=J(e);var E=A(c.parentNode&&11===c.parentNode.nodeType||v.contains(c)?c:v);return function(a){return a.from&&a.to?q(a.from,a.to,a.classes,a.anchors):da(a)}}]}]).provider("$$animateJs",["$animateProvider",function(a){this.$get=
["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function e(c){c=V(c)?c:c.split(" ");for(var d=[],e={},f=0;f<c.length;f++){var y=c[f],q=a.$$registeredAnimations[y];q&&!e[y]&&(d.push(b.get(q)),e[y]=!0)}return d}var f=X(d);return function(a,b,d,s){function q(){s.domOperation();f(a,s)}function A(a,b,d,e,f){switch(d){case "animate":b=[b,e.from,e.to,f];break;case "setClass":b=[b,g,M,f];break;case "addClass":b=[b,g,f];break;case "removeClass":b=[b,M,f];break;default:b=[b,f]}b.push(e);if(a=a.apply(a,
b))if(Da(a.start)&&(a=a.start()),a instanceof c)a.done(f);else if(Da(a))return a;return O}function C(a,b,d,e,f){var g=[];t(e,function(e){var l=e[f];l&&g.push(function(){var e,f,h=!1,g=function(a){h||(h=!0,(f||O)(a),e.complete(!a))};e=new c({end:function(){g()},cancel:function(){g(!0)}});f=A(l,a,b,d,function(a){g(!1===a)});return e})});return g}function v(a,b,d,e,f){var g=C(a,b,d,e,f);if(0===g.length){var k,l;"beforeSetClass"===f?(k=C(a,"removeClass",d,e,"beforeRemoveClass"),l=C(a,"addClass",d,e,"beforeAddClass")):
"setClass"===f&&(k=C(a,"removeClass",d,e,"removeClass"),l=C(a,"addClass",d,e,"addClass"));k&&(g=g.concat(k));l&&(g=g.concat(l))}if(0!==g.length)return function(a){var b=[];g.length&&t(g,function(a){b.push(a())});b.length?c.all(b,a):a();return function(a){t(b,function(b){a?b.cancel():b.end()})}}}var E=!1;3===arguments.length&&ra(d)&&(s=d,d=null);s=oa(s);d||(d=a.attr("class")||"",s.addClass&&(d+=" "+s.addClass),s.removeClass&&(d+=" "+s.removeClass));var g=s.addClass,M=s.removeClass,x=e(d),H,I;if(x.length){var K,
J;"leave"===b?(J="leave",K="afterLeave"):(J="before"+b.charAt(0).toUpperCase()+b.substr(1),K=b);"enter"!==b&&"move"!==b&&(H=v(a,b,s,x,J));I=v(a,b,s,x,K)}if(H||I){var m;return{$$willAnimate:!0,end:function(){m?m.end():(E=!0,q(),ha(a,s),m=new c,m.complete(!0));return m},start:function(){function b(c){E=!0;q();ha(a,s);m.complete(c)}if(m)return m;m=new c;var d,e=[];H&&e.push(function(a){d=H(a)});e.length?e.push(function(a){q();a(!0)}):q();I&&e.push(function(a){d=I(a)});m.setHost({end:function(){E||((d||
O)(void 0),b(void 0))},cancel:function(){E||((d||O)(!0),b(!0))}});c.chain(e,b);return m}}}}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(a,c){function d(c){return a(c.element,c.event,c.classes,c.options)}return function(a){if(a.from&&a.to){var b=d(a.from),n=d(a.to);if(b||n)return{start:function(){function a(){return function(){t(d,function(a){a.end()})}}var d=[];b&&d.push(b.start());n&&
d.push(n.start());c.all(d,function(a){e.complete(a)});var e=new c({end:a(),cancel:a()});return e}}}else return d(a)}}]}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

/**
 * floatThead wrapper for AngularJS
 * @version v0.1.0 - 2015-10-25
 * @link https://github.com/brandon-barker/angular-floatThead
 * @author Brandon Barker
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function () {
  'use strict';

  angular
    .module('floatThead', [])
    .directive('floatThead', ['$timeout', '$log', floatThead]);

  function floatThead($timeout, $log) {
    // Usage:
    // Specify float-thead on any table element and optionally pass through a floatThead options object to initialize the library.
    // Optionally specify ng-model to have the directive watch any objects for changes and call 'reflow' on floatThead.
    // You can also manually trigger a reflow by triggering an event on the table element called 'update', eg: jQuery('.table').trigger('update');
    var directive = {
      require: '?ngModel',
      scope: {
        floatThead: '=?',
        floatTheadEnabled: '=?'
      },
      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {
        // default float-thead-enabled to true if not present
        if (!$attrs.hasOwnProperty('floatTheadEnabled')) {
          $scope.floatTheadEnabled = $attrs.floatTheadEnabled = true;
        }
        
        // default to empty object
        if (!$attrs.hasOwnProperty('floatThead') || $attrs.floatThead === '') {
          $scope.floatThead = $attrs.floatThead = {};
        }
      }],
      link: link,
      restrict: 'A'
    };
    return directive;

    function link($scope, $element, $attrs, ngModel) {
      $scope.$watch('floatTheadEnabled', function (newVal) {
        if (newVal === true) {
          if (angular.isObject($scope.floatThead)) {
            jQuery($element).floatThead($scope.floatThead);
          }
        } else {
          jQuery($element).floatThead('destroy');
        }
      });
      
      $scope.$watch('floatThead', function (newVal, oldVal) {
        if (newVal === oldVal || !$scope.floatTheadEnabled) {
          return;
        }
        
        // first destroy it so we can recreate with new options
        jQuery($element).floatThead('destroy');
        if (angular.isObject(newVal)) {
          jQuery($element).floatThead(newVal);
        }
      }, true);

      if (ngModel) {
        // hook the model $formatters to get notified when anything changes so we can reflow
        ngModel.$formatters.push(function () {
          // only reflow if enabled
          if ($scope.floatTheadEnabled && angular.isObject($scope.floatThead)) {
            // give time for rerender before reflow
            $timeout(function() {
              jQuery($element).floatThead('reflow');
            });
          }
        });
      } else {
        $log.info('floatThead: ngModel not provided!');
      }

      $element.bind('update', function () {
        $timeout(function () {
          jQuery($element).floatThead('reflow');
        }, 0);
      });

      $element.bind('$destroy', function () {
        jQuery($element).floatThead('destroy');
      });
    }
  }
})();

angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(a){return a}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(a,b,c,d,e,f){function g(){f.$broadcast("gettextLanguageChanged")}var h,i="$$noContext",j='<span id="test" title="test" class="tested">test</span>',k=angular.element("<span>"+j+"</span>").html()!==j,l=function(a){return h.debug&&h.currentLanguage!==h.baseLanguage?h.debugPrefix+a:a},m=function(a){return h.showTranslatedMarkers?h.translatedMarkerPrefix+a+h.translatedMarkerSuffix:a};return h={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:d("strings"),setCurrentLanguage:function(a){this.currentLanguage=a,g()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(b,c){this.strings[b]||(this.strings[b]={});var d=a(b,1);for(var e in c){var f=c[e];if(k&&(e=angular.element("<span>"+e+"</span>").html()),angular.isString(f)||angular.isArray(f)){var h={};h[i]=f,f=h}this.strings[b][e]||(this.strings[b][e]={});for(var j in f){var l=f[j];angular.isArray(l)?this.strings[b][e][j]=l:(this.strings[b][e][j]=[],this.strings[b][e][j][d]=l)}}g()},getStringFormFor:function(b,c,d,e){if(!b)return null;var f=this.strings[b]||{},g=f[c]||{},h=g[e||i]||[];return h[a(b,d)]},getString:function(a,c,d){var f=b(this.currentLanguage);return a=this.getStringFormFor(this.currentLanguage,a,1,d)||this.getStringFormFor(f,a,1,d)||l(a),a=c?e(a)(c):a,m(a)},getPlural:function(a,c,d,f,g){var h=b(this.currentLanguage);return c=this.getStringFormFor(this.currentLanguage,c,a,g)||this.getStringFormFor(h,c,a,g)||l(1===a?c:d),f&&(f.$count=a,c=e(c)(f)),m(c)},loadRemote:function(a){return c({method:"GET",url:a,cache:h.cache}).then(function(a){var b=a.data;for(var c in b)h.setStrings(c,b[c]);return a})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window","gettextUtil",function(a,b,c,d,e,f){function g(a){return f.lcFirst(a.replace(j,""))}function h(a,b,c){var d=Object.keys(b).filter(function(a){return f.startsWith(a,j)&&a!==j});if(!d.length)return null;var e=angular.extend({},a),h=[];return d.forEach(function(d){var f=a.$watch(b[d],function(a){var b=g(d);e[b]=a,c(e)});h.push(f)}),a.$on("$destroy",function(){h.forEach(function(a){a()})}),e}var i=parseInt((/msie (\d+)/.exec(angular.lowercase(e.navigator.userAgent))||[])[1],10),j="translateParams";return{restrict:"AE",terminal:!0,compile:function(e,g){f.assert(!g.translatePlural||g.translateN,"translate-n","translate-plural"),f.assert(!g.translateN||g.translatePlural,"translate-plural","translate-n");var j=f.trim(e.html()),k=g.translatePlural,l=g.translateContext;return 8>=i&&"<!--IE fix-->"===j.slice(-13)&&(j=j.slice(0,-13)),{post:function(e,g,i){function m(b){b=b||null;var h;k?(e=o||(o=e.$new()),e.$count=n(e),h=a.getPlural(e.$count,j,k,b,l)):h=a.getString(j,b,l);var i=g.contents();if(i||h){if(h===f.trim(i.html()))return void(p&&d(i)(e));var m=angular.element("<span>"+h+"</span>");d(m.contents())(e);var q=m.contents();c.enter(q,g),c.leave(i)}}var n=b(i.translateN),o=null,p=!0,q=h(e,i,m);m(q),p=!1,i.translateN&&e.$watch(i.translateN,function(){m(q)}),e.$on("gettextLanguageChanged",function(){m(q)})}}}}}]),angular.module("gettext").factory("gettextFallbackLanguage",function(){var a={},b=/([^_]+)_[^_]+$/;return function(c){if(a[c])return a[c];var d=b.exec(c);return d?(a[c]=d[1],d[1]):null}}),angular.module("gettext").filter("translate",["gettextCatalog",function(a){function b(b,c){return a.getString(b,null,c)}return b.$stateful=!0,b}]),angular.module("gettext").factory("gettextPlurals",function(){function a(a){return b[a]||(b[a]=a.split(/\-|_/).shift()),b[a]}var b={pt_BR:"pt_BR","pt-BR":"pt_BR"};return function(b,c){switch(a(b)){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return c%10!=1||c%100==11?1:0;case"jv":return 0!=c?1:0;case"mk":return 1==c||c%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return c>1?1:0;case"lv":return c%10==1&&c%100!=11?0:0!=c?1:2;case"lt":return c%10==1&&c%100!=11?0:c%10>=2&&(10>c%100||c%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return c%10==1&&c%100!=11?0:c%10>=2&&4>=c%10&&(10>c%100||c%100>=20)?1:2;case"mnk":return 0==c?0:1==c?1:2;case"ro":return 1==c?0:0==c||c%100>0&&20>c%100?1:2;case"pl":return 1==c?0:c%10>=2&&4>=c%10&&(10>c%100||c%100>=20)?1:2;case"cs":case"sk":return 1==c?0:c>=2&&4>=c?1:2;case"sl":return c%100==1?1:c%100==2?2:c%100==3||c%100==4?3:0;case"mt":return 1==c?0:0==c||c%100>1&&11>c%100?1:c%100>10&&20>c%100?2:3;case"gd":return 1==c||11==c?0:2==c||12==c?1:c>2&&20>c?2:3;case"cy":return 1==c?0:2==c?1:8!=c&&11!=c?2:3;case"kw":return 1==c?0:2==c?1:3==c?2:3;case"ga":return 1==c?0:2==c?1:7>c?2:11>c?3:4;case"ar":return 0==c?0:1==c?1:2==c?2:c%100>=3&&10>=c%100?3:c%100>=11?4:5;default:return 1!=c?1:0}}}),angular.module("gettext").factory("gettextUtil",function(){function a(a,b,c){if(!a)throw new Error("You should add a "+b+" attribute whenever you add a "+c+" attribute.")}function b(a,b){return 0===a.indexOf(b)}function c(a){var b=a.charAt(0).toLowerCase();return b+a.substr(1)}var d=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}();return{trim:d,assert:a,startsWith:b,lcFirst:c}});

/*
 AngularJS v1.6.9
 (c) 2010-2018 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(s,d){'use strict';function J(d){var k=[];w(k,B).chars(d);return k.join("")}var x=d.$$minErr("$sanitize"),C,k,D,E,p,B,F,G,w;d.module("ngSanitize",[]).provider("$sanitize",function(){function g(a,e){var c={},b=a.split(","),f;for(f=0;f<b.length;f++)c[e?p(b[f]):b[f]]=!0;return c}function K(a){for(var e={},c=0,b=a.length;c<b;c++){var f=a[c];e[f.name]=f.value}return e}function H(a){return a.replace(/&/g,"&amp;").replace(L,function(a){var c=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(c-
55296)+(a-56320)+65536)+";"}).replace(M,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function I(a){for(;a;){if(a.nodeType===s.Node.ELEMENT_NODE)for(var e=a.attributes,c=0,b=e.length;c<b;c++){var f=e[c],h=f.name.toLowerCase();if("xmlns:ns1"===h||0===h.lastIndexOf("ns1:",0))a.removeAttributeNode(f),c--,b--}(e=a.firstChild)&&I(e);a=t("nextSibling",a)}}function t(a,e){var c=e[a];if(c&&F.call(e,c))throw x("elclob",e.outerHTML||e.outerText);return c}var y=!1;this.$get=
["$$sanitizeUri",function(a){y&&k(n,z);return function(e){var c=[];G(e,w(c,function(b,c){return!/^unsafe:/.test(a(b,c))}));return c.join("")}}];this.enableSvg=function(a){return E(a)?(y=a,this):y};C=d.bind;k=d.extend;D=d.forEach;E=d.isDefined;p=d.lowercase;B=d.noop;G=function(a,e){null===a||void 0===a?a="":"string"!==typeof a&&(a=""+a);var c=u(a);if(!c)return"";var b=5;do{if(0===b)throw x("uinput");b--;a=c.innerHTML;c=u(a)}while(a!==c.innerHTML);for(b=c.firstChild;b;){switch(b.nodeType){case 1:e.start(b.nodeName.toLowerCase(),
K(b.attributes));break;case 3:e.chars(b.textContent)}var f;if(!(f=b.firstChild)&&(1===b.nodeType&&e.end(b.nodeName.toLowerCase()),f=t("nextSibling",b),!f))for(;null==f;){b=t("parentNode",b);if(b===c)break;f=t("nextSibling",b);1===b.nodeType&&e.end(b.nodeName.toLowerCase())}b=f}for(;b=c.firstChild;)c.removeChild(b)};w=function(a,e){var c=!1,b=C(a,a.push);return{start:function(a,h){a=p(a);!c&&A[a]&&(c=a);c||!0!==n[a]||(b("<"),b(a),D(h,function(c,h){var d=p(h),g="img"===a&&"src"===d||"background"===
d;!0!==v[d]||!0===m[d]&&!e(c,g)||(b(" "),b(h),b('="'),b(H(c)),b('"'))}),b(">"))},end:function(a){a=p(a);c||!0!==n[a]||!0===h[a]||(b("</"),b(a),b(">"));a==c&&(c=!1)},chars:function(a){c||b(H(a))}}};F=s.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)};var L=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M=/([^#-~ |!])/g,h=g("area,br,col,hr,img,wbr"),q=g("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),l=g("rp,rt"),r=k({},l,q),q=k({},q,g("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),
l=k({},l,g("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),z=g("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),A=g("script,style"),n=k({},h,q,l,r),m=g("background,cite,href,longdesc,src,xlink:href,xml:base"),r=g("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),
l=g("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0),v=k({},m,l,r),u=function(a,e){function c(b){b="<remove></remove>"+b;try{var c=(new a.DOMParser).parseFromString(b,"text/html").body;c.firstChild.remove();return c}catch(e){}}function b(a){d.innerHTML=a;e.documentMode&&I(d);return d}var h;if(e&&e.implementation)h=e.implementation.createHTMLDocument("inert");else throw x("noinert");var d=(h.documentElement||h.getDocumentElement()).querySelector("body");d.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>';return d.querySelector("svg")?
(d.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',d.querySelector("svg img")?c:b):function(b){b="<remove></remove>"+b;try{b=encodeURI(b)}catch(c){return}var e=new a.XMLHttpRequest;e.responseType="document";e.open("GET","data:text/html;charset=utf-8,"+b,!1);e.send(null);b=e.response.body;b.firstChild.remove();return b}}(s,s.document)}).info({angularVersion:"1.6.9"});d.module("ngSanitize").filter("linky",["$sanitize",function(g){var k=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
p=/^mailto:/i,s=d.$$minErr("linky"),t=d.isDefined,y=d.isFunction,w=d.isObject,x=d.isString;return function(d,q,l){function r(a){a&&m.push(J(a))}function z(a,d){var c,b=A(a);m.push("<a ");for(c in b)m.push(c+'="'+b[c]+'" ');!t(q)||"target"in b||m.push('target="',q,'" ');m.push('href="',a.replace(/"/g,"&quot;"),'">');r(d);m.push("</a>")}if(null==d||""===d)return d;if(!x(d))throw s("notstring",d);for(var A=y(l)?l:w(l)?function(){return l}:function(){return{}},n=d,m=[],v,u;d=n.match(k);)v=d[0],d[2]||
d[4]||(v=(d[3]?"http://":"mailto:")+v),u=d.index,r(n.substr(0,u)),z(v,d[0].replace(p,"")),n=n.substring(u+d[0].length);r(n);return g(m.join(""))}}])})(window,window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map

/*
 AngularJS v1.6.9
 (c) 2010-2018 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(x,p){'use strict';function s(f,k){var e=!1,a=!1;this.ngClickOverrideEnabled=function(b){return p.isDefined(b)?(b&&!a&&(a=!0,t.$$moduleName="ngTouch",k.directive("ngClick",t),f.decorator("ngClickDirective",["$delegate",function(a){if(e)a.shift();else for(var b=a.length-1;0<=b;){if("ngTouch"===a[b].$$moduleName){a.splice(b,1);break}b--}return a}])),e=b,this):e};this.$get=function(){return{ngClickOverrideEnabled:function(){return e}}}}function v(f,k,e){n.directive(f,["$parse","$swipe",function(a,
b){return function(l,u,g){function h(c){if(!d)return!1;var a=Math.abs(c.y-d.y);c=(c.x-d.x)*k;return r&&75>a&&0<c&&30<c&&.3>a/c}var m=a(g[f]),d,r,c=["touch"];p.isDefined(g.ngSwipeDisableMouse)||c.push("mouse");b.bind(u,{start:function(c,a){d=c;r=!0},cancel:function(c){r=!1},end:function(c,d){h(c)&&l.$apply(function(){u.triggerHandler(e);m(l,{$event:d})})}},c)}}])}var n=p.module("ngTouch",[]);n.info({angularVersion:"1.6.9"});n.provider("$touch",s);s.$inject=["$provide","$compileProvider"];n.factory("$swipe",
[function(){function f(a){a=a.originalEvent||a;var b=a.touches&&a.touches.length?a.touches:[a];a=a.changedTouches&&a.changedTouches[0]||b[0];return{x:a.clientX,y:a.clientY}}function k(a,b){var l=[];p.forEach(a,function(a){(a=e[a][b])&&l.push(a)});return l.join(" ")}var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(a,
b,l){var e,g,h,m,d=!1;l=l||["mouse","touch","pointer"];a.on(k(l,"start"),function(c){h=f(c);d=!0;g=e=0;m=h;b.start&&b.start(h,c)});var r=k(l,"cancel");if(r)a.on(r,function(c){d=!1;b.cancel&&b.cancel(c)});a.on(k(l,"move"),function(c){if(d&&h){var a=f(c);e+=Math.abs(a.x-m.x);g+=Math.abs(a.y-m.y);m=a;10>e&&10>g||(g>e?(d=!1,b.cancel&&b.cancel(c)):(c.preventDefault(),b.move&&b.move(a,c)))}});a.on(k(l,"end"),function(c){d&&(d=!1,b.end&&b.end(f(c),c))})}}}]);var t=["$parse","$timeout","$rootElement",function(f,
k,e){function a(a,d,b){for(var c=0;c<a.length;c+=2){var g=a[c+1],e=b;if(25>Math.abs(a[c]-d)&&25>Math.abs(g-e))return a.splice(c,c+2),!0}return!1}function b(b){if(!(2500<Date.now()-u)){var d=b.touches&&b.touches.length?b.touches:[b],e=d[0].clientX,d=d[0].clientY;if(!(1>e&&1>d||h&&h[0]===e&&h[1]===d)){h&&(h=null);var c=b.target;"label"===p.lowercase(c.nodeName||c[0]&&c[0].nodeName)&&(h=[e,d]);a(g,e,d)||(b.stopPropagation(),b.preventDefault(),b.target&&b.target.blur&&b.target.blur())}}}function l(a){a=
a.touches&&a.touches.length?a.touches:[a];var b=a[0].clientX,e=a[0].clientY;g.push(b,e);k(function(){for(var a=0;a<g.length;a+=2)if(g[a]===b&&g[a+1]===e){g.splice(a,a+2);break}},2500,!1)}var u,g,h;return function(h,d,k){var c=f(k.ngClick),n=!1,q,s,t,v;d.on("touchstart",function(a){n=!0;q=a.target?a.target:a.srcElement;3===q.nodeType&&(q=q.parentNode);d.addClass("ng-click-active");s=Date.now();a=a.originalEvent||a;a=(a.touches&&a.touches.length?a.touches:[a])[0];t=a.clientX;v=a.clientY});d.on("touchcancel",
function(a){n=!1;d.removeClass("ng-click-active")});d.on("touchend",function(c){var h=Date.now()-s,f=c.originalEvent||c,m=(f.changedTouches&&f.changedTouches.length?f.changedTouches:f.touches&&f.touches.length?f.touches:[f])[0],f=m.clientX,m=m.clientY,w=Math.sqrt(Math.pow(f-t,2)+Math.pow(m-v,2));n&&750>h&&12>w&&(g||(e[0].addEventListener("click",b,!0),e[0].addEventListener("touchstart",l,!0),g=[]),u=Date.now(),a(g,f,m),q&&q.blur(),p.isDefined(k.disabled)&&!1!==k.disabled||d.triggerHandler("click",
[c]));n=!1;d.removeClass("ng-click-active")});d.onclick=function(a){};d.on("click",function(a,b){h.$apply(function(){c(h,{$event:b||a})})});d.on("mousedown",function(a){d.addClass("ng-click-active")});d.on("mousemove mouseup",function(a){d.removeClass("ng-click-active")})}}];v("ngSwipeLeft",-1,"swipeleft");v("ngSwipeRight",1,"swiperight")})(window,window.angular);
//# sourceMappingURL=angular-touch.min.js.map

/**
 * Angular Dynamic Locale - 0.1.32
 * https://github.com/lgalfaso/angular-dynamic-locale
 * License: MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(a){function b(a){return a.$stateful=!0,a}a.decorator("dateFilter",["$delegate",b]),a.decorator("numberFilter",["$delegate",b]),a.decorator("currencyFilter",["$delegate",b])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(a){function b(a,b,c,d){var f=document.createElement("script"),g=e?e:document.getElementsByTagName("body")[0],h=!1;f.type="text/javascript",f.readyState?f.onreadystatechange=function(){("complete"===f.readyState||"loaded"===f.readyState)&&(f.onreadystatechange=null,d(function(){h||(h=!0,g.removeChild(f),b())},30,!1))}:(f.onload=function(){h||(h=!0,g.removeChild(f),b())},f.onerror=function(){h||(h=!0,g.removeChild(f),c())}),f.src=a,f.async=!0,g.appendChild(f)}function c(a,c,d,e,h,i,l){function m(a,b){g===d&&(angular.forEach(a,function(c,d){b[d]?angular.isArray(b[d])&&(a[d].length=b[d].length):delete a[d]}),angular.forEach(b,function(c,d){angular.isArray(b[d])||angular.isObject(b[d])?(a[d]||(a[d]=angular.isArray(b[d])?[]:{}),m(a[d],b[d])):a[d]=b[d]}))}if(k[d])return g=d,k[d];var n,o=h.defer();return d===g?o.resolve(c):(n=i.get(d))?(g=d,e.$evalAsync(function(){m(c,n),f.put(j,d),e.$broadcast("$localeChangeSuccess",d,c),o.resolve(c)})):(g=d,k[d]=o.promise,b(a,function(){var a=angular.injector(["ngLocale"]),b=a.get("$locale");m(c,b),i.put(d,b),delete k[d],e.$applyAsync(function(){f.put(j,d),e.$broadcast("$localeChangeSuccess",d,c),o.resolve(c)})},function(){delete k[d],e.$applyAsync(function(){g===d&&(g=c.id),e.$broadcast("$localeChangeError",d),o.reject(d)})},l)),o.promise}var d,e,f,g,h="angular/i18n/angular-locale_{{locale}}.js",i="tmhDynamicLocaleStorageCache",j=a,k={},l={};this.localeLocationPattern=function(a){return a?(h=a,this):h},this.appendScriptTo=function(a){e=a},this.useStorage=function(a){i=a},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(a){d=a},this.storageKey=function(a){return a?(j=a,this):j},this.addLocalePatternValue=function(a,b){l[a]=b},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(a,b,e,k,m,n,o){function p(b){var d={locale:b,angularVersion:angular.version.full};return c(q(angular.extend({},l,d)),k,b,a,m,n,o)}var q=e(h);return f=b.get(i),a.$evalAsync(function(){var a;(a=f.get(j)||d)&&p(a)}),{set:p,get:function(){return g}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"});
//# sourceMappingURL=tmhDynamicLocale.min.js.map

(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("jquery"), require("angular"), require("jquery-ui/datepicker"));
	else if(typeof define === 'function' && define.amd)
		define(["jquery", "angular", "jquery-ui/datepicker"], factory);
	else if(typeof exports === 'object')
		exports["angularUiDate"] = factory(require("jquery"), require("angular"), require("jquery-ui/datepicker"));
	else
		root["angularUiDate"] = factory(root["jQuery"], root["angular"], root["jquery-ui/datepicker"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "assets";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _jquery = __webpack_require__(1);

	var _jquery2 = _interopRequireDefault(_jquery);

	var _angular = __webpack_require__(2);

	var _angular2 = _interopRequireDefault(_angular);

	var _datepicker = __webpack_require__(3);

	var _datepicker2 = _interopRequireDefault(_datepicker);

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

	// sets up jQuery with the datepicker plugin

	exports.default = _angular2.default.module('ui.date', []).constant('uiDateConfig', {}).constant('uiDateFormatConfig', '').factory('uiDateConverter', ['uiDateFormatConfig', function (uiDateFormatConfig) {
	  return {
	    stringToDate: stringToDate,
	    dateToString: dateToString
	  };

	  function dateToString(uiDateFormat, value) {
	    var dateFormat = uiDateFormat || uiDateFormatConfig;
	    if (value) {
	      if (dateFormat) {
	        try {
	          return _jquery2.default.datepicker.formatDate(dateFormat, value);
	        } catch (formatException) {
	          return undefined;
	        }
	      }

	      if (value.toISOString) {
	        return value.toISOString();
	      }
	    }
	    return null;
	  }

	  function stringToDate(dateFormat, valueToParse) {
	    dateFormat = dateFormat || uiDateFormatConfig;

	    if (_angular2.default.isDate(valueToParse) && !isNaN(valueToParse)) {
	      return valueToParse;
	    }

	    if (_angular2.default.isString(valueToParse)) {
	      if (dateFormat) {
	        return _jquery2.default.datepicker.parseDate(dateFormat, valueToParse);
	      }

	      var isoDate = new Date(valueToParse);
	      return isNaN(isoDate.getTime()) ? null : isoDate;
	    }

	    if (_angular2.default.isNumber(valueToParse)) {
	      // presumably timestamp to date object
	      return new Date(valueToParse);
	    }

	    return null;
	  }
	}]).directive('uiDate', ['uiDateConfig', 'uiDateConverter', function uiDateDirective(uiDateConfig, uiDateConverter) {

	  return {
	    require: '?ngModel',
	    link: function link(scope, element, attrs, controller) {

	      var $element = (0, _jquery2.default)(element);

	      var getOptions = function getOptions() {
	        return _angular2.default.extend({}, uiDateConfig, scope.$eval(attrs.uiDate));
	      };
	      var initDateWidget = function initDateWidget() {
	        var showing = false;
	        var opts = getOptions();

	        function setVal(forcedUpdate) {
	          var keys = ['Hours', 'Minutes', 'Seconds', 'Milliseconds'];
	          var isDate = _angular2.default.isDate(controller.$modelValue);
	          var preserve = {};

	          if (!forcedUpdate && isDate && controller.$modelValue.toDateString() === $element.datepicker('getDate').toDateString()) {
	            return;
	          }

	          if (isDate) {
	            _angular2.default.forEach(keys, function (key) {
	              preserve[key] = controller.$modelValue['get' + key]();
	            });
	          }

	          var newViewValue = $element.datepicker('getDate');

	          if (isDate) {
	            _angular2.default.forEach(keys, function (key) {
	              newViewValue['set' + key](preserve[key]);
	            });
	          }

	          controller.$setViewValue(newViewValue);
	        }

	        // If we have a controller (i.e. ngModelController) then wire it up
	        if (controller) {
	          // Set the view value in a $apply block when users selects
	          // (calling directive user's function too if provided)
	          var _onSelect = opts.onSelect || _angular2.default.noop;
	          opts.onSelect = function (value, picker) {
	            scope.$apply(function () {
	              showing = true;
	              setVal();
	              $element.blur();
	              _onSelect(value, picker, $element);
	            });
	          };

	          var _beforeShow = opts.beforeShow || _angular2.default.noop;
	          opts.beforeShow = function (input, picker) {
	            showing = true;
	            _beforeShow(input, picker, $element);
	          };

	          var _onClose = opts.onClose || _angular2.default.noop;
	          opts.onClose = function (value, picker) {
	            showing = false;
	            _onClose(value, picker, $element);
	          };

	          element.on('focus', function (focusEvent) {
	            if (attrs.readonly) {
	              focusEvent.stopImmediatePropagation();
	            }
	          });

	          $element.off('blur.datepicker').on('blur.datepicker', function () {
	            if (!showing) {
	              scope.$apply(function () {
	                $element.datepicker('setDate', $element.datepicker('getDate'));
	                setVal();
	              });
	            }
	          });

	          controller.$validators.uiDateValidator = function uiDateValidator(modelValue, viewValue) {
	            return viewValue === null || viewValue === '' || _angular2.default.isDate(uiDateConverter.stringToDate(attrs.uiDateFormat, viewValue));
	          };

	          controller.$parsers.push(function uiDateParser(valueToParse) {
	            return uiDateConverter.stringToDate(attrs.uiDateFormat, valueToParse);
	          });

	          // Update the date picker when the model changes
	          controller.$render = function () {
	            // Force a render to override whatever is in the input text box
	            if (_angular2.default.isDate(controller.$modelValue) === false && _angular2.default.isString(controller.$modelValue)) {
	              controller.$modelValue = uiDateConverter.stringToDate(attrs.uiDateFormat, controller.$modelValue);
	            }
	            $element.datepicker('setDate', controller.$modelValue);
	          };
	        }
	        // Check if the $element already has a datepicker.
	        //

	        if ($element.data('datepicker')) {
	          // Updates the datepicker options
	          $element.datepicker('option', opts);
	          $element.datepicker('refresh');
	        } else {
	          // Creates the new datepicker widget
	          $element.datepicker(opts);

	          // Cleanup on destroy, prevent memory leaking
	          $element.on('$destroy', function () {
	            $element.datepicker('hide');
	            $element.datepicker('destroy');
	          });
	        }

	        if (controller) {
	          controller.$render();
	          // Update the model with the value from the datepicker after parsed
	          setVal(true);
	        }
	      };

	      // Watch for changes to the directives options
	      scope.$watch(getOptions, initDateWidget, true);
	    }
	  };
	}]).directive('uiDateFormat', ['uiDateConverter', function (uiDateConverter) {
	  return {
	    require: 'ngModel',
	    link: function link(scope, element, attrs, modelCtrl) {
	      var dateFormat = attrs.uiDateFormat;

	      // Use the datepicker with the attribute value as the dateFormat string to convert to and from a string
	      modelCtrl.$formatters.unshift(function (value) {
	        return uiDateConverter.stringToDate(dateFormat, value);
	      });

	      modelCtrl.$parsers.push(function (value) {
	        return uiDateConverter.dateToString(dateFormat, value);
	      });
	    }
	  };
	}]);

/***/ },
/* 1 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ },
/* 2 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ },
/* 3 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }
/******/ ])
});
;
//# sourceMappingURL=date.js.map

/*
 jQuery UI Slider plugin wrapper
*/
angular.module('ui.slider', []).value('uiSliderConfig',{}).directive('uiSlider', ['uiSliderConfig', '$timeout', function(uiSliderConfig, $timeout) {
    uiSliderConfig = uiSliderConfig || {};
    return {
        require: 'ngModel',
        compile: function() {
            var preLink = function (scope, elm, attrs, ngModel) {

                function parseNumber(n, decimals) {
                    return (decimals) ? parseFloat(n) : parseInt(n, 10);
                }

                var directiveOptions = angular.copy(scope.$eval(attrs.uiSlider));
                var options = angular.extend(directiveOptions || {}, uiSliderConfig);
                // Object holding range values
                var prevRangeValues = {
                    min: null,
                    max: null
                };

                // convenience properties
                var properties = ['min', 'max', 'step', 'lowerBound', 'upperBound'];
                var useDecimals = (!angular.isUndefined(attrs.useDecimals)) ? true : false;
                var updateOn = (angular.isDefined(options['updateOn'])) ? options['updateOn'] : 'slide'

                var init = function() {
                    // When ngModel is assigned an array of values then range is expected to be true.
                    // Warn user and change range to true else an error occurs when trying to drag handle
                    if (angular.isArray(ngModel.$viewValue) && options.range !== true) {
                        console.warn('Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true.');
                        options.range = true;
                    }

                    // Ensure the convenience properties are passed as options if they're defined
                    // This avoids init ordering issues where the slider's initial state (eg handle
                    // position) is calculated using widget defaults
                    // Note the properties take precedence over any duplicates in options
                    angular.forEach(properties, function(property) {
                        if (angular.isDefined(attrs[property])) {
                            options[property] = parseNumber(attrs[property], useDecimals);
                        }
                    });

                    elm.slider(options);
                    init = angular.noop;
                };

                // Find out if decimals are to be used for slider
                angular.forEach(properties, function(property) {
                    // support {{}} and watch for updates
                    attrs.$observe(property, function(newVal) {
                        if (!!newVal) {
                            init();
                            options[property] = parseNumber(newVal, useDecimals);
                            elm.slider('option', property, parseNumber(newVal, useDecimals));
                            ngModel.$render();
                        }
                    });
                });
                attrs.$observe('disabled', function(newVal) {
                    init();
                    elm.slider('option', 'disabled', !!newVal);
                });

                // Watch ui-slider (byVal) for changes and update
                scope.$watch(attrs.uiSlider, function(newVal) {
                    init();
                    if(newVal !== undefined) {
                      elm.slider('option', newVal);
                    }
                }, true);

                // Late-bind to prevent compiler clobbering
                $timeout(init, 0, true);

                // Update model value from slider
                elm.bind(updateOn, function(event, ui) {
                    var valuesChanged;

                    if (ui.values) {
                        var boundedValues = ui.values.slice();

                        if (options.lowerBound && boundedValues[0] < options.lowerBound) {
                            boundedValues[0] = Math.max(boundedValues[0], options.lowerBound);
                        }
                        if (options.upperBound && boundedValues[1] > options.upperBound) {
                            boundedValues[1] = Math.min(boundedValues[1], options.upperBound);
                        }

                        if (boundedValues[0] !== ui.values[0] || boundedValues[1] !== ui.values[1]) {
                            valuesChanged = true;
                            ui.values = boundedValues;
                        }
                    } else {
                        var boundedValue = ui.value;

                        if (options.lowerBound && boundedValue < options.lowerBound) {
                            boundedValue = Math.max(boundedValue, options.lowerBound);
                        }
                        if (options.upperBound && boundedValue > options.upperBound) {
                            boundedValue = Math.min(boundedValue, options.upperBound);
                        }

                        if (boundedValue !== ui.value) {
                            valuesChanged = true;
                            ui.value = boundedValue;
                        }
                    }


                    ngModel.$setViewValue(ui.values || ui.value);
                    $(ui.handle).find('.ui-slider-tip').text(ui.value);
                    scope.$apply();

                    if (valuesChanged) {
                        setTimeout(function() {
                            elm.slider('value', ui.values || ui.value);
                        }, 0);

                        return false;
                    }
                });

                // Update slider from model value
                ngModel.$render = function() {
                    init();
                    var method = options.range === true ? 'values' : 'value';

                    if (options.range !== true && isNaN(ngModel.$viewValue) && !(ngModel.$viewValue instanceof Array)) {
                        ngModel.$viewValue = 0;
                    }
                    else if (options.range && !angular.isDefined(ngModel.$viewValue)) {
                            ngModel.$viewValue = [0,0];
                    }

                    // Do some sanity check of range values
                    if (options.range === true) {
                        // previously, the model was a string b/c it was in a text input, need to convert to a array.
                        // make sure input exists, comma exists once, and it is a string.
                        if (ngModel.$viewValue && angular.isString(ngModel.$viewValue) && (ngModel.$viewValue.match(/,/g) || []).length === 1) {
                            // transform string model into array.
                            var valueArr = ngModel.$viewValue.split(',');
                            ngModel.$viewValue = [Number(valueArr[0]), Number(valueArr[1])];
                        }
                        // Check outer bounds for min and max values
                        if (angular.isDefined(options.min) && options.min > ngModel.$viewValue[0]) {
                            ngModel.$viewValue[0] = options.min;
                        }
                        if (angular.isDefined(options.max) && options.max < ngModel.$viewValue[1]) {
                            ngModel.$viewValue[1] = options.max;
                        }

                        // Check min and max range values
                        if (ngModel.$viewValue[0] > ngModel.$viewValue[1]) {
                            // Min value should be less to equal to max value
                            if (prevRangeValues.min >= ngModel.$viewValue[1]) {
                                ngModel.$viewValue[1] = prevRangeValues.min;
                            }
                            // Max value should be less to equal to min value
                            if (prevRangeValues.max <= ngModel.$viewValue[0]) {
                                ngModel.$viewValue[0] = prevRangeValues.max;
                            }
                        }

                        // Store values for later user
                        prevRangeValues.min = ngModel.$viewValue[0];
                        prevRangeValues.max = ngModel.$viewValue[1];

                    }
                    elm.slider(method, ngModel.$viewValue);
                };

                scope.$watch(attrs.ngModel, function() {
                    if (options.range === true) {
                        ngModel.$render();

                        $(elm).find('.ui-slider-tip').each(function(i, tipElm) {
                            $(tipElm).text(ngModel.$viewValue[i]);
                        });
                    } else {
                        $(elm).find('.ui-slider-tip').text(ngModel.$viewValue);
                    }
                }, true);

                function destroy() {
                    if (elm.hasClass('ui-slider')) {
                        elm.slider('destroy');
                    }
                }

                scope.$on("$destroy", destroy);
                elm.one('$destroy', destroy);
            };

            var postLink = function (scope, element, attrs, ngModel) {
                // Add tick marks if 'tick' and 'step' attributes have been setted on element.
                // Support horizontal slider bar so far. 'tick' and 'step' attributes are required.
                var options = angular.extend({}, scope.$eval(attrs.uiSlider));
                var properties = ['min', 'max', 'step', 'tick', 'tip'];
                angular.forEach(properties, function(property) {
                    if (angular.isDefined(attrs[property])) {
                        options[property] = attrs[property];
                    }
                });
                if (angular.isDefined(options['tick']) && angular.isDefined(options['step'])) {
                    var total = parseInt( (parseInt(options['max']) - parseInt(options['min'])) /parseInt(options['step']));
                    for (var i = total; i >= 0; i--) {
                        var left = ((i / total) * 100) + '%';
                        $("<div/>").addClass("ui-slider-tick").appendTo(element).css({left: left});
                    };
                }
                if(angular.isDefined(options['tip'])) {
                    $timeout(function(){
                        var handles = element.find('.ui-slider-handle');
                        if(handles && handles.length>1 && ngModel.$viewValue && angular.isArray(ngModel.$viewValue)){
                            $(handles[0]).append('<div class="ui-slider-tip">'+ngModel.$viewValue[0]+'</div>');
                            $(handles[1]).append('<div class="ui-slider-tip">'+ngModel.$viewValue[1]+'</div>');
                        }else{
                            element.find('.ui-slider-handle').append('<div class="ui-slider-tip">'+ngModel.$viewValue+'</div>');
                        }
                    },10);
                }
            }

            return {
                pre: preLink,
                post: postLink
            };
        }
    };
}]);

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){
this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);

/** @preserve jQuery.floatThead 2.0.3 - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2017 Misha Koryak **/
!function(t){function e(t,e){if(8==f){var o=v.width(),n=s.debounce(function(){var t=v.width();o!=t&&(o=t,e())},1);v.on(t,n)}else v.on(t,s.debounce(e,1))}function o(e){var o=e[0],n=o.parentElement;do{var r=window.getComputedStyle(n).getPropertyValue("overflow");if("visible"!=r)break}while(n=n.parentElement);return t(n==document.body?[]:n)}function n(t){window&&window.console&&window.console.error&&window.console.error("jQuery.floatThead: "+t)}function r(t){var e=t.getBoundingClientRect();return e.width||e.right-e.left}function a(){var t=document.createElement("scrolltester");t.style.cssText="width:100px;height:100px;overflow:scroll!important;position:absolute;top:-9999px;display:block",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function i(t){if(t.dataTableSettings)for(var e=0;e<t.dataTableSettings.length;e++){var o=t.dataTableSettings[e].nTable;if(t[0]==o)return!0}return!1}function l(t,e,o){var n=o?"outerWidth":"width";if(p&&t.css("max-width")){var r=0;o&&(r+=parseInt(t.css("borderLeft"),10),r+=parseInt(t.css("borderRight"),10));for(var a=0;a<e.length;a++)r+=e.get(a).offsetWidth;return r}return t[n]()}t.floatThead=t.floatThead||{},t.floatThead.defaults={headerCellSelector:"tr:visible:first>*:visible",zIndex:1001,position:"auto",top:0,bottom:0,scrollContainer:function(){return t([])},responsiveContainer:function(){return t([])},getSizingRow:function(t){return t.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:!0,autoReflow:!1,debug:!1,support:{bootstrap:!0,datatables:!0,jqueryUI:!0,perfectScrollbar:!0}};var s=window._||function(){var e={},o=Object.prototype.hasOwnProperty,n=["Arguments","Function","String","Number","Date","RegExp"];e.has=function(t,e){return o.call(t,e)},e.keys=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var o=[];for(var n in t)e.has(t,n)&&o.push(n);return o};var r=0;return e.uniqueId=function(t){var e=++r+"";return t?t+e:e},t.each(n,function(){var t=this;e["is"+t]=function(e){return Object.prototype.toString.call(e)=="[object "+t+"]"}}),e.debounce=function(t,e,o){var n,r,a,i,l;return function(){a=this,r=arguments,i=new Date;var s=function(){var d=new Date-i;e>d?n=setTimeout(s,e-d):(n=null,o||(l=t.apply(a,r)))},d=o&&!n;return n||(n=setTimeout(s,e)),d&&(l=t.apply(a,r)),l}},e}(),d="undefined"!=typeof MutationObserver,f=function(){for(var t=3,e=document.createElement("b"),o=e.all||[];t=1+t,e.innerHTML="<!--[if gt IE "+t+"]><i><![endif]-->",o[0];);return t>4?t:document.documentMode}(),c=/Gecko\//.test(navigator.userAgent),u=/WebKit\//.test(navigator.userAgent);f||c||u||(f=11);var p=function(){if(u){var e=t("<div>").css("width",0).append(t("<table>").css("max-width","100%").append(t("<tr>").append(t("<th>").append(t("<div>").css("min-width",100).text("X")))));t("body").append(e);var o=0==e.find("table").width();return e.remove(),o}return!1},h=!c&&!f,v=t(window);if(!window.matchMedia){var b=window.onbeforeprint,w=window.onafterprint;window.onbeforeprint=function(){b&&b(),v.triggerHandler("beforeprint")},window.onafterprint=function(){w&&w(),v.triggerHandler("afterprint")}}t.fn.floatThead=function(c){if(c=c||{},8>f)return this;var b=null;if(s.isFunction(p)&&(p=p()),s.isString(c)){var w=c,g=Array.prototype.slice.call(arguments,1),m=this;return this.filter("table").each(function(){var e=t(this),o=e.data("floatThead-lazy");o&&e.floatThead(o);var n=e.data("floatThead-attached");if(n&&s.isFunction(n[w])){var r=n[w].apply(this,g);void 0!==r&&(m=r)}}),m}var y=t.extend({},t.floatThead.defaults||{},c);if(t.each(c,function(e){e in t.floatThead.defaults||!y.debug||n("Used ["+e+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+s.keys(t.floatThead.defaults).join(", "))}),y.debug){var T=t.fn.jquery.split(".");1==parseInt(T[0],10)&&parseInt(T[1],10)<=7&&n("jQuery version "+t.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}return this.filter(":not(."+y.floatTableClass+")").each(function(){function c(t){return t+".fth-"+R+".floatTHead"}function p(){var e=0;if(k.children("tr:visible").each(function(){e+=t(this).outerHeight(!0)}),"collapse"==M.css("border-collapse")){var o=parseInt(M.css("border-top-width"),10),n=parseInt(M.find("thead tr:first").find(">*:first").css("border-top-width"),10);o>n&&(e-=o/2)}st.outerHeight(e),dt.outerHeight(e)}function w(){var t=l(M,ut,!0),e=V?P:U,o=e.width()||t,n="hidden"!=e.css("overflow-y")?o-N.vertical:o;if(at.width(n),G){var r=100*t/n;tt.css("width",r+"%")}else tt.outerWidth(t)}function g(){D=(s.isFunction(y.top)?y.top(M):y.top)||0,O=(s.isFunction(y.bottom)?y.bottom(M):y.bottom)||0}function m(){var e,o=k.find(y.headerCellSelector);if(nt?e=ot.find("col").length:(e=0,o.each(function(){e+=parseInt(t(this).attr("colspan")||1,10)})),e!=Q){Q=e;for(var n,r=[],a=[],i=[],l=0;e>l;l++)n=o.eq(l).text(),r.push('<th class="floatThead-col" aria-label="'+n+'"/>'),a.push("<col/>"),i.push(t("<fthtd>").css({display:"table-cell",height:0,width:"auto"}));a=a.join(""),r=r.join(""),h&&(rt.empty(),rt.append(i),ut=rt.find("fthtd")),st.html(r),dt=st.find("th"),nt||ot.html(a),ft=ot.find("col"),et.html(a),ct=et.find("col")}return e}function T(){if(!F){if(F=!0,X){var t=l(M,ut,!0),e=J.width();t>e&&M.css("minWidth",t)}M.css(vt),tt.css(vt),tt.append(k),E.before(lt),p()}}function C(){F&&(F=!1,X&&M.width(wt),lt.detach(),M.prepend(k),M.css(bt),tt.css(bt),M.css("minWidth",gt),M.css("minWidth",l(M,ut)))}function x(t){mt!=t&&(mt=t,M.triggerHandler("floatThead",[t,at]))}function j(t){X!=t&&(X=t,at.css({position:X?"absolute":"fixed"}))}function S(t,e,o,n){return h?o:n?y.getSizingRow(t,e,o):e}function z(){var t,e=m();return function(){var o=at.scrollLeft();ft=ot.find("col");var n=S(M,ft,ut,f);if(n.length==e&&e>0){if(!nt)for(t=0;e>t;t++)ft.eq(t).css("width","");C();var a=[];for(t=0;e>t;t++)a[t]=r(n.get(t));for(t=0;e>t;t++)ct.eq(t).width(a[t]),ft.eq(t).width(a[t]);T()}else tt.append(k),M.css(bt),tt.css(bt),p();at.scrollLeft(o),M.triggerHandler("reflowed",[at])}}function I(t){var e=U.css("border-"+t+"-width"),o=0;return e&&~e.indexOf("px")&&(o=parseInt(e,10)),o}function L(){return"auto"==P.css("overflow-x")}function W(){var t,e=U.scrollTop(),o=0,n=B?Y.outerHeight(!0):0,r=K?n:-n,a=at.height(),i=M.offset(),l=0,s=0;if(G){var d=U.offset();o=i.top-d.top+e,B&&K&&(o+=n),l=I("left"),s=I("top"),o-=s}else t=i.top-D-a+O+N.horizontal;var f=v.scrollTop(),c=v.scrollLeft(),p=function(){return(L()?P:U).scrollLeft()||0},h=p();return function(d){V=L();var b=M[0].offsetWidth<=0&&M[0].offsetHeight<=0;if(!b&&it)return it=!1,setTimeout(function(){M.triggerHandler("reflow")},1),null;if(b&&(it=!0,!X))return null;if("windowScroll"==d)f=v.scrollTop(),c=v.scrollLeft();else if("containerScroll"==d)if(P.length){if(!V)return;h=P.scrollLeft()}else e=U.scrollTop(),h=U.scrollLeft();else"init"!=d&&(f=v.scrollTop(),c=v.scrollLeft(),e=U.scrollTop(),h=p());if(!u||!(0>f||0>c)){if(Z)j("windowScrollDone"==d?!0:!1);else if("windowScrollDone"==d)return null;i=M.offset(),B&&K&&(i.top+=n);var w,g,m=M.outerHeight();if(G&&X){if(o>=e){var y=o-e+s;w=y>0?y:0,x(!1)}else w=_?s:e,x(!0);g=l}else!G&&X?(f>t+m+r?w=m-a+r:i.top>=f+D?(w=0,C(),x(!1)):(w=D+f-i.top+o+(K?n:0),T(),x(!0)),g=h):G&&!X?(o>e||e-o>m?(w=i.top-f,C(),x(!1)):(w=i.top+e-f-o,T(),x(!0)),g=i.left+h-c):G||X||(f>t+m+r?w=m+D-f+t+r:i.top>f+D?(w=i.top-f,T(),x(!1)):(w=D,x(!0)),g=i.left+h-c);return{top:Math.round(w),left:Math.round(g)}}}}function H(){var t=null,e=null,o=null;return function(n,r,a){if(null!=n&&(t!=n.top||e!=n.left)){if(8===f)at.css({top:n.top,left:n.left});else{var i="translateX("+n.left+"px) translateY("+n.top+"px)";at.css({"-webkit-transform":i,"-moz-transform":i,"-ms-transform":i,"-o-transform":i,transform:i,top:0,left:0})}t=n.top,e=n.left}r&&w(),a&&p();var l=(V?P:U).scrollLeft();X&&o==l||(at.scrollLeft(l),o=l)}}function q(){if(U.length)if(y.support&&y.support.perfectScrollbar&&U.data().perfectScrollbar)N={horizontal:0,vertical:0};else{if("scroll"==U.css("overflow-x"))N.horizontal=A;else{var t=U.width(),e=l(M,ut),o=r>n?A:0;N.horizontal=e>t-o?A:0}if("scroll"==U.css("overflow-y"))N.vertical=A;else{var n=U.height(),r=M.height(),a=e>t?A:0;N.vertical=r>n-a?A:0}}}var R=s.uniqueId(),M=t(this);if(M.data("floatThead-attached"))return!0;if(!M.is("table"))throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');d=y.autoReflow&&d;var k=M.children("thead:first"),E=M.children("tbody:first");if(0==k.length||0==E.length)return y.debug&&n(0==k.length?"The thead element is missing.":"The tbody element is missing."),M.data("floatThead-lazy",y),void M.unbind("reflow").one("reflow",function(){M.floatThead(y)});M.data("floatThead-lazy")&&M.unbind("reflow"),M.data("floatThead-lazy",!1);var D,O,F=!0,N={vertical:0,horizontal:0},A=a(),Q=0;y.scrollContainer===!0&&(y.scrollContainer=o);var U=y.scrollContainer(M)||t([]),G=U.length>0,P=G?t([]):y.responsiveContainer(M)||t([]),V=L(),X=null;"auto"==y.position?X=null:"fixed"==y.position?X=!1:"absolute"==y.position?X=!0:y.debug&&n('Invalid value given to "position" option, valid is "fixed", "absolute" and "auto". You passed: ',y.position),null==X&&(X=G);var Y=M.find("caption"),B=1==Y.length;if(B)var K="top"===(Y.css("caption-side")||Y.attr("align")||"top");var $=t("<fthfoot>").css({display:"table-footer-group","border-spacing":0,height:0,"border-collapse":"collapse",visibility:"hidden"}),_=!1,J=t([]),Z=9>=f&&!G&&X,tt=t("<table/>"),et=t("<colgroup/>"),ot=M.children("colgroup:first"),nt=!0;0==ot.length&&(ot=t("<colgroup/>"),nt=!1);var rt=t("<fthtr>").css({display:"table-row","border-spacing":0,height:0,"border-collapse":"collapse"}),at=t("<div>").css("overflow","hidden").attr("aria-hidden","true"),it=!1,lt=t("<thead/>"),st=t('<tr class="size-row" aria-hidden="true"/>'),dt=t([]),ft=t([]),ct=t([]),ut=t([]);lt.append(st),M.prepend(ot),h&&($.append(rt),M.append($)),tt.append(et),at.append(tt),y.copyTableClass&&tt.attr("class",M.attr("class")),tt.attr({cellpadding:M.attr("cellpadding"),cellspacing:M.attr("cellspacing"),border:M.attr("border")});var pt=M.css("display");if(tt.css({borderCollapse:M.css("borderCollapse"),border:M.css("border"),display:pt}),G||tt.css("width","auto"),"none"==pt&&(it=!0),tt.addClass(y.floatTableClass).css({margin:0,"border-bottom-width":0}),X){var ht=function(e,o){var n=e.css("position"),r="relative"==n||"absolute"==n,a=e;if(!r||o){var i={paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight")};at.css(i),a=e.data("floatThead-containerWrap")||e.wrap(t("<div>").addClass(y.floatWrapperClass).css({position:"relative",clear:"both"})).parent(),e.data("floatThead-containerWrap",a),_=!0}return a};G?(J=ht(U,!0),J.prepend(at)):(J=ht(M),M.before(at))}else M.before(at);at.css({position:X?"absolute":"fixed",marginTop:0,top:X?0:"auto",zIndex:y.zIndex,willChange:"transform"}),at.addClass(y.floatContainerClass),g();var vt={"table-layout":"fixed"},bt={"table-layout":M.css("tableLayout")||"auto"},wt=M[0].style.width||"",gt=M.css("minWidth")||"",mt=!1;q();var yt,Tt=function(){(yt=z())()};Tt();var Ct=W(),xt=H();xt(Ct("init"),!0);var jt,St=s.debounce(function(){xt(Ct("windowScrollDone"),!1)},1),zt=function(){xt(Ct("windowScroll"),!1),Z&&St()},It=function(){xt(Ct("containerScroll"),!1)},Lt=function(){M.is(":hidden")||(g(),q(),Tt(),Ct=W(),(xt=H())(Ct("resize"),!0,!0))},Wt=s.debounce(function(){M.is(":hidden")||(q(),g(),Tt(),Ct=W(),xt(Ct("reflow"),!0))},1),Ht=function(){C()},qt=function(){T()},Rt=function(t){t.matches?Ht():qt()};if(window.matchMedia&&window.matchMedia("print").addListener?(jt=window.matchMedia("print"),jt.addListener(Rt)):(v.on("beforeprint",Ht),v.on("afterprint",qt)),G?X?U.on(c("scroll"),It):(U.on(c("scroll"),It),v.on(c("scroll"),zt)):(P.on(c("scroll"),It),v.on(c("scroll"),zt)),v.on(c("load"),Wt),e(c("resize"),Lt),M.on("reflow",Wt),y.support&&y.support.datatables&&i(M)&&M.on("filter",Wt).on("sort",Wt).on("page",Wt),y.support&&y.support.bootstrap&&v.on(c("shown.bs.tab"),Wt),y.support&&y.support.jqueryUI&&v.on(c("tabsactivate"),Wt),d){var Mt=null;s.isFunction(y.autoReflow)&&(Mt=y.autoReflow(M,U)),Mt||(Mt=U.length?U[0]:M[0]),b=new MutationObserver(function(t){for(var e=function(t){return t&&t[0]&&("THEAD"==t[0].nodeName||"TD"==t[0].nodeName||"TH"==t[0].nodeName)},o=0;o<t.length;o++)if(!e(t[o].addedNodes)&&!e(t[o].removedNodes)){Wt();break}}),b.observe(Mt,{childList:!0,subtree:!0})}M.data("floatThead-attached",{destroy:function(){var t=".fth-"+R;return C(),M.css(bt),ot.remove(),h&&$.remove(),lt.parent().length&&lt.replaceWith(k),x(!1),d&&(b.disconnect(),b=null),M.off("reflow reflowed"),U.off(t),P.off(t),_&&(U.length?U.unwrap():M.unwrap()),G?U.data("floatThead-containerWrap",!1):M.data("floatThead-containerWrap",!1),M.css("minWidth",gt),at.remove(),M.data("floatThead-attached",!1),v.off(t),jt&&jt.removeListener(Rt),Ht=qt=function(){},function(){return M.floatThead(y)}},reflow:function(){Wt()},setHeaderHeight:function(){p()},getFloatContainer:function(){return at},getRowGroups:function(){return F?at.find(">table>thead").add(M.children("tbody,tfoot")):M.children("thead,tbody,tfoot")}})}),this}}(function(){var t=window.jQuery;return"undefined"!=typeof module&&module.exports&&!t&&(t=require("jquery")),t}());

!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.proj4=b()}(this,function(){"use strict";function a(a,b){if(a[b])return a[b];for(var c,d,e=Object.keys(a),f=b.toLowerCase().replace(Ub,""),g=-1;++g<e.length;)if(c=e[g],d=c.toLowerCase().replace(Ub,""),d===f)return a[c]}function b(a){if("string"!=typeof a)throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Wb}function c(a){var c=new b(a);return c.output()}function d(a,b,c){Array.isArray(b)&&(c.unshift(b),b=null);var d=b?{}:a,f=c.reduce(function(a,b){return e(b,a),a},d);b&&(a[b]=f)}function e(a,b){if(!Array.isArray(a))return void(b[a]=!0);var c=a.shift();if("PARAMETER"===c&&(c=a.shift()),1===a.length)return Array.isArray(a[0])?(b[c]={},void e(a[0],b[c])):void(b[c]=a[0]);if(!a.length)return void(b[c]=!0);if("TOWGS84"===c)return void(b[c]=a);Array.isArray(c)||(b[c]={});var f;switch(c){case"UNIT":case"PRIMEM":case"VERT_DATUM":return b[c]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&e(a[2],b[c]));case"SPHEROID":case"ELLIPSOID":return b[c]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&e(a[3],b[c]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void d(b,c,a);default:for(f=-1;++f<a.length;)if(!Array.isArray(a[f]))return e(a,b[c]);return d(b,c,a)}}function f(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function g(a){return a*fc}function h(a){function b(b){var c=a.to_meter||1;return b*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):"object"==typeof a.PROJECTION?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):(a.to_meter=a.UNIT.convert,10)));var c=a.GEOGCS;"GEOGCS"===a.type&&(c=a),c&&(c.DATUM?a.datumCode=c.DATUM.name.toLowerCase():a.datumCode=c.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==a.datumCode&&"new_zealand_1949"!==a.datumCode||(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),c.DATUM&&c.DATUM.SPHEROID&&(a.ellps=c.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=c.DATUM.SPHEROID.a,a.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36"),~a.datumCode.indexOf("osni_1952")&&(a.datumCode="osni52"),(~a.datumCode.indexOf("tm65")||~a.datumCode.indexOf("geodetic_datum_of_1965"))&&(a.datumCode="ire65")),a.b&&!isFinite(a.b)&&(a.b=a.a);var d=function(b){return f(a,b)},e=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",g],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",g],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",g],["lat0","latitude_of_origin",g],["lat0","standard_parallel_1",g],["lat1","standard_parallel_1",g],["lat2","standard_parallel_2",g],["alpha","azimuth",g],["srsCode","name"]];e.forEach(d),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.projName&&"Lambert_Azimuthal_Equal_Area"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName||(a.lat0=g(a.lat1>0?90:-90),a.lat_ts=a.lat1)}function i(a){var b=this;if(2===arguments.length){var c=arguments[1];"string"==typeof c?"+"===c.charAt(0)?i[a]=Vb(arguments[1]):i[a]=gc(arguments[1]):i[a]=c}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?i.apply(b,a):i(a)});if("string"==typeof a){if(a in i)return i[a]}else"EPSG"in a?i["EPSG:"+a.EPSG]=a:"ESRI"in a?i["ESRI:"+a.ESRI]=a:"IAU2000"in a?i["IAU2000:"+a.IAU2000]=a:console.log(a);return}}function j(a){return"string"==typeof a}function k(a){return a in i}function l(a){return hc.some(function(b){return a.indexOf(b)>-1})}function m(a){return"+"===a[0]}function n(a){return j(a)?k(a)?i[a]:l(a)?gc(a):m(a)?Vb(a):void 0:a}function o(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=jc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function p(a){var b=a.x,c=a.y;if(c*Ob>90&&-90>c*Ob&&b*Ob>180&&-180>b*Ob)return null;var d,e;if(Math.abs(Math.abs(c)-Ib)<=Mb)return null;if(this.sphere)d=this.x0+this.a*this.k0*lc(b-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(Pb+.5*c));else{var f=Math.sin(c),g=mc(this.e,c,f);d=this.x0+this.a*this.k0*lc(b-this.long0),e=this.y0-this.a*this.k0*Math.log(g)}return a.x=d,a.y=e,a}function q(a){var b,c,d=a.x-this.x0,e=a.y-this.y0;if(this.sphere)c=Ib-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var f=Math.exp(-e/(this.a*this.k0));if(c=nc(this.e,f),-9999===c)return null}return b=lc(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a}function r(){}function s(a){return a}function t(a,b){var c=uc.length;return a.names?(uc[c]=a,a.names.forEach(function(a){tc[a.toLowerCase()]=c}),this):(console.log(b),!0)}function u(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof tc[b]&&uc[tc[b]]?uc[tc[b]]:void 0}function v(){sc.forEach(t)}function w(a,b,c,d){var e=a*a,f=b*b,g=(e-f)/e,h=0;d?(a*=1-g*(Jb+g*(Kb+g*Lb)),e=a*a,g=0):h=Math.sqrt(g);var i=(e-f)/f;return{es:g,e:h,ep2:i}}function x(b,c,d,e,f){if(!b){var g=a(wc,e);g||(g=xc),b=g.a,c=g.b,d=g.rf}return d&&!c&&(c=(1-1/d)*b),(0===d||Math.abs(b-c)<Mb)&&(f=!0,c=b),{a:b,b:c,rf:d,sphere:f}}function y(a,b,c,d,e,f){var g={};return void 0===a||"none"===a?g.datum_type=Gb:g.datum_type=Fb,b&&(g.datum_params=b.map(parseFloat),0===g.datum_params[0]&&0===g.datum_params[1]&&0===g.datum_params[2]||(g.datum_type=Db),g.datum_params.length>3&&(0===g.datum_params[3]&&0===g.datum_params[4]&&0===g.datum_params[5]&&0===g.datum_params[6]||(g.datum_type=Eb,g.datum_params[3]*=Hb,g.datum_params[4]*=Hb,g.datum_params[5]*=Hb,g.datum_params[6]=g.datum_params[6]/1e6+1))),g.a=c,g.b=d,g.es=e,g.ep2=f,g}function z(b,c){if(!(this instanceof z))return new z(b);c=c||function(a){if(a)throw a};var d=n(b);if("object"!=typeof d)return void c(b);var e=z.projections.get(d.projName);if(!e)return void c(b);if(d.datumCode&&"none"!==d.datumCode){var f=a(yc,d.datumCode);f&&(d.datum_params=f.towgs84?f.towgs84.split(","):null,d.ellps=f.ellipse,d.datumName=f.datumName?f.datumName:d.datumCode)}d.k0=d.k0||1,d.axis=d.axis||"enu",d.ellps=d.ellps||"wgs84";var g=x(d.a,d.b,d.rf,d.ellps,d.sphere),h=w(g.a,g.b,g.rf,d.R_A),i=d.datum||y(d.datumCode,d.datum_params,g.a,g.b,h.es,h.ep2);ic(this,d),ic(this,e),this.a=g.a,this.b=g.b,this.rf=g.rf,this.sphere=g.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=i,this.init(),c(null,this)}function A(a,b){return a.datum_type!==b.datum_type?!1:a.a!==b.a||Math.abs(a.es-b.es)>5e-11?!1:a.datum_type===Db?a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]:a.datum_type===Eb?a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]&&a.datum_params[3]===b.datum_params[3]&&a.datum_params[4]===b.datum_params[4]&&a.datum_params[5]===b.datum_params[5]&&a.datum_params[6]===b.datum_params[6]:!0}function B(a,b,c){var d,e,f,g,h=a.x,i=a.y,j=a.z?a.z:0;if(-Ib>i&&i>-1.001*Ib)i=-Ib;else if(i>Ib&&1.001*Ib>i)i=Ib;else if(-Ib>i||i>Ib)return null;return h>Math.PI&&(h-=2*Math.PI),e=Math.sin(i),g=Math.cos(i),f=e*e,d=c/Math.sqrt(1-b*f),{x:(d+j)*g*Math.cos(h),y:(d+j)*g*Math.sin(h),z:(d*(1-b)+j)*e}}function C(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=1e-12,v=u*u,w=30,x=a.x,y=a.y,z=a.z?a.z:0;if(e=Math.sqrt(x*x+y*y),f=Math.sqrt(x*x+y*y+z*z),u>e/c){if(r=0,u>f/c)return s=Ib,t=-d,{x:a.x,y:a.y,z:a.z}}else r=Math.atan2(y,x);g=z/f,h=e/f,i=1/Math.sqrt(1-b*(2-b)*h*h),l=h*(1-b)*i,m=g*i,q=0;do q++,k=c/Math.sqrt(1-b*m*m),t=e*l+z*m-k*(1-b*m*m),j=b*k/(k+t),i=1/Math.sqrt(1-j*(2-j)*h*h),n=h*(1-j)*i,o=g*i,p=o*l-n*m,l=n,m=o;while(p*p>v&&w>q);return s=Math.atan(o/Math.abs(n)),{x:r,y:s,z:t}}function D(a,b,c){if(b===Db)return{x:a.x+c[0],y:a.y+c[1],z:a.z+c[2]};if(b===Eb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6];return{x:j*(a.x-i*a.y+h*a.z)+d,y:j*(i*a.x+a.y-g*a.z)+e,z:j*(-h*a.x+g*a.y+a.z)+f}}}function E(a,b,c){if(b===Db)return{x:a.x-c[0],y:a.y-c[1],z:a.z-c[2]};if(b===Eb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6],k=(a.x-d)/j,l=(a.y-e)/j,m=(a.z-f)/j;return{x:k+i*l-h*m,y:-i*k+l+g*m,z:h*k-g*l+m}}}function F(a){return a===Db||a===Eb}function G(a){if("function"==typeof Number.isFinite){if(Number.isFinite(a))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof a||a!==a||!isFinite(a))throw new TypeError("coordinates must be finite numbers")}function H(a,b){return(a.datum.datum_type===Db||a.datum.datum_type===Eb)&&"WGS84"!==b.datumCode||(b.datum.datum_type===Db||b.datum.datum_type===Eb)&&"WGS84"!==a.datumCode}function I(a,b,c){var d;return Array.isArray(c)&&(c=Bc(c)),Cc(c),a.datum&&b.datum&&H(a,b)&&(d=new z("WGS84"),c=I(a,d,c),a=d),"enu"!==a.axis&&(c=Ac(a,!1,c)),"longlat"===a.projName?c={x:c.x*Nb,y:c.y*Nb}:(a.to_meter&&(c={x:c.x*a.to_meter,y:c.y*a.to_meter}),c=a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=zc(a.datum,b.datum,c),b.from_greenwich&&(c={x:c.x-b.from_greenwich,y:c.y}),"longlat"===b.projName?c={x:c.x*Ob,y:c.y*Ob}:(c=b.forward(c),b.to_meter&&(c={x:c.x/b.to_meter,y:c.y/b.to_meter})),"enu"!==b.axis?Ac(b,!0,c):c}function J(a,b,c){var d,e,f;return Array.isArray(c)?(d=I(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):(e=I(a,b,c),f=Object.keys(c),2===f.length?e:(f.forEach(function(a){"x"!==a&&"y"!==a&&(e[a]=c[a])}),e))}function K(a){return a instanceof z?a:a.oProj?a.oProj:z(a)}function L(a,b,c){a=K(a);var d,e=!1;return"undefined"==typeof b?(b=a,a=Dc,e=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(c=b,b=a,a=Dc,e=!0),b=K(b),c?J(a,b,c):(d={forward:function(c){return J(a,b,c)},inverse:function(c){return J(b,a,c)}},e&&(d.oProj=b),d)}function M(a,b){return b=b||5,U(R({lat:a[1],lon:a[0]}),b)}function N(a){var b=S(Y(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat,b.lon,b.lat]:[b.left,b.bottom,b.right,b.top]}function O(a){var b=S(Y(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat]:[(b.left+b.right)/2,(b.top+b.bottom)/2]}function P(a){return a*(Math.PI/180)}function Q(a){return 180*(a/Math.PI)}function R(a){var b,c,d,e,f,g,h,i,j,k=a.lat,l=a.lon,m=6378137,n=.00669438,o=.9996,p=P(k),q=P(l);j=Math.floor((l+180)/6)+1,180===l&&(j=60),k>=56&&64>k&&l>=3&&12>l&&(j=32),k>=72&&84>k&&(l>=0&&9>l?j=31:l>=9&&21>l?j=33:l>=21&&33>l?j=35:l>=33&&42>l&&(j=37)),b=6*(j-1)-180+3,i=P(b),c=n/(1-n),d=m/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),e=Math.tan(p)*Math.tan(p),f=c*Math.cos(p)*Math.cos(p),g=Math.cos(p)*(q-i),h=m*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var r=o*d*(g+(1-e+f)*g*g*g/6+(5-18*e+e*e+72*f-58*c)*g*g*g*g*g/120)+5e5,s=o*(h+d*Math.tan(p)*(g*g/2+(5-e+9*f+4*f*f)*g*g*g*g/24+(61-58*e+e*e+600*f-330*c)*g*g*g*g*g*g/720));return 0>k&&(s+=1e7),{northing:Math.round(s),easting:Math.round(r),zoneNumber:j,zoneLetter:T(k)}}function S(a){var b=a.northing,c=a.easting,d=a.zoneLetter,e=a.zoneNumber;if(0>e||e>60)return null;var f,g,h,i,j,k,l,m,n,o,p=.9996,q=6378137,r=.00669438,s=(1-Math.sqrt(1-r))/(1+Math.sqrt(1-r)),t=c-5e5,u=b;"N">d&&(u-=1e7),m=6*(e-1)-180+3,f=r/(1-r),l=u/p,n=l/(q*(1-r/4-3*r*r/64-5*r*r*r/256)),o=n+(3*s/2-27*s*s*s/32)*Math.sin(2*n)+(21*s*s/16-55*s*s*s*s/32)*Math.sin(4*n)+151*s*s*s/96*Math.sin(6*n),g=q/Math.sqrt(1-r*Math.sin(o)*Math.sin(o)),h=Math.tan(o)*Math.tan(o),i=f*Math.cos(o)*Math.cos(o),j=q*(1-r)/Math.pow(1-r*Math.sin(o)*Math.sin(o),1.5),k=t/(g*p);var v=o-g*Math.tan(o)/j*(k*k/2-(5+3*h+10*i-4*i*i-9*f)*k*k*k*k/24+(61+90*h+298*i+45*h*h-252*f-3*i*i)*k*k*k*k*k*k/720);v=Q(v);var w=(k-(1+2*h+i)*k*k*k/6+(5-2*i+28*h-3*i*i+8*f+24*h*h)*k*k*k*k*k/120)/Math.cos(o);w=m+Q(w);var x;if(a.accuracy){var y=S({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});x={top:y.lat,right:y.lon,bottom:v,left:w}}else x={lat:v,lon:w};return x}function T(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function U(a,b){var c="00000"+a.easting,d="00000"+a.northing;return a.zoneNumber+a.zoneLetter+V(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function V(a,b,c){var d=W(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return X(e,f,d)}function W(a){var b=a%Ec;return 0===b&&(b=Ec),b}function X(a,b,c){var d=c-1,e=Fc.charCodeAt(d),f=Gc.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>Lc&&(g=g-Lc+Hc-1,i=!0),(g===Ic||Ic>e&&g>Ic||(g>Ic||Ic>e)&&i)&&g++,(g===Jc||Jc>e&&g>Jc||(g>Jc||Jc>e)&&i)&&(g++,g===Ic&&g++),g>Lc&&(g=g-Lc+Hc-1),h>Kc?(h=h-Kc+Hc-1,i=!0):i=!1,(h===Ic||Ic>f&&h>Ic||(h>Ic||Ic>f)&&i)&&h++,(h===Jc||Jc>f&&h>Jc||(h>Jc||Jc>f)&&i)&&(h++,h===Ic&&h++),h>Kc&&(h=h-Kc+Hc-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function Y(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=W(g),j=Z(d.charAt(0),i),k=$(d.charAt(1),i);k<_(h);)k+=2e6;var l=c-f;if(l%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var m,n,o,p,q,r=l/2,s=0,t=0;return r>0&&(m=1e5/Math.pow(10,r),n=a.substring(f,f+r),s=parseFloat(n)*m,o=a.substring(f+r),t=parseFloat(o)*m),p=s+j,q=t+k,{easting:p,northing:q,zoneLetter:h,zoneNumber:g,accuracy:m}}function Z(a,b){for(var c=Fc.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===Ic&&c++,c===Jc&&c++,c>Lc){if(e)throw"Bad character: "+a;c=Hc,e=!0}d+=1e5}return d}function $(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=Gc.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===Ic&&c++,c===Jc&&c++,c>Kc){if(e)throw"Bad character: "+a;c=Hc,e=!0}d+=1e5}return d}function _(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function aa(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=$c(this.es),this.ml0=_c(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ba(a){var b,c,d,e=a.x,f=a.y,g=lc(e-this.long0),h=Math.sin(f),i=Math.cos(f);if(this.es){var j=i*g,k=Math.pow(j,2),l=this.ep2*Math.pow(i,2),m=Math.pow(l,2),n=Math.abs(i)>Mb?Math.tan(f):0,o=Math.pow(n,2),p=Math.pow(o,2);b=1-this.es*Math.pow(h,2),j/=Math.sqrt(b);var q=_c(f,h,i,this.en);c=this.a*(this.k0*j*(1+k/6*(1-o+l+k/20*(5-18*o+p+14*l-58*o*l+k/42*(61+179*p-p*o-479*o)))))+this.x0,d=this.a*(this.k0*(q-this.ml0+h*g*j/2*(1+k/12*(5-o+9*l+4*m+k/30*(61+p-58*o+270*l-330*o*l+k/56*(1385+543*p-p*o-3111*o))))))+this.y0}else{var r=i*Math.sin(g);if(Math.abs(Math.abs(r)-1)<Mb)return 93;if(c=.5*this.a*this.k0*Math.log((1+r)/(1-r))+this.x0,d=i*Math.cos(g)/Math.sqrt(1-Math.pow(r,2)),r=Math.abs(d),r>=1){if(r-1>Mb)return 93;d=0}else d=Math.acos(d);0>f&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return a.x=c,a.y=d,a}function ca(a){var b,c,d,e,f=(a.x-this.x0)*(1/this.a),g=(a.y-this.y0)*(1/this.a);if(this.es)if(b=this.ml0+g/this.k0,c=bd(b,this.es,this.en),Math.abs(c)<Ib){var h=Math.sin(c),i=Math.cos(c),j=Math.abs(i)>Mb?Math.tan(c):0,k=this.ep2*Math.pow(i,2),l=Math.pow(k,2),m=Math.pow(j,2),n=Math.pow(m,2);b=1-this.es*Math.pow(h,2);var o=f*Math.sqrt(b)/this.k0,p=Math.pow(o,2);b*=j,d=c-b*p/(1-this.es)*.5*(1-p/12*(5+3*m-9*k*m+k-4*l-p/30*(61+90*m-252*k*m+45*n+46*k-p/56*(1385+3633*m+4095*n+1574*n*m)))),e=lc(this.long0+o*(1-p/6*(1+2*m+k-p/20*(5+28*m+24*n+8*k*m+6*k-p/42*(61+662*m+1320*n+720*n*m))))/i)}else d=Ib*kc(g),e=0;else{var q=Math.exp(f/this.k0),r=.5*(q-1/q),s=this.lat0+g/this.k0,t=Math.cos(s);b=Math.sqrt((1-Math.pow(t,2))/(1+Math.pow(r,2))),d=Math.asin(b),0>g&&(d=-d),e=0===r&&0===t?0:lc(Math.atan2(r,t)+this.long0)}return a.x=e,a.y=d,a}function da(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),b=a/(2-a),c=b;this.cgb[0]=b*(2+b*(-2/3+b*(-2+b*(116/45+b*(26/45+b*(-2854/675)))))),this.cbg[0]=b*(-2+b*(2/3+b*(4/3+b*(-82/45+b*(32/45+b*(4642/4725)))))),c*=b,this.cgb[1]=c*(7/3+b*(-1.6+b*(-227/45+b*(2704/315+b*(2323/945))))),this.cbg[1]=c*(5/3+b*(-16/15+b*(-13/9+b*(904/315+b*(-1522/945))))),c*=b,this.cgb[2]=c*(56/15+b*(-136/35+b*(-1262/105+b*(73814/2835)))),this.cbg[2]=c*(-26/15+b*(34/21+b*(1.6+b*(-12686/2835)))),c*=b,this.cgb[3]=c*(4279/630+b*(-332/35+b*(-399572/14175))),this.cbg[3]=c*(1237/630+b*(-2.4+b*(-24832/14175))),c*=b,this.cgb[4]=c*(4174/315+b*(-144838/6237)),this.cbg[4]=c*(-734/315+b*(109598/31185)),c*=b,this.cgb[5]=c*(601676/22275),this.cbg[5]=c*(444337/155925),c=Math.pow(b,2),this.Qn=this.k0/(1+b)*(1+c*(.25+c*(1/64+c/256))),this.utg[0]=b*(-.5+b*(2/3+b*(-37/96+b*(1/360+b*(81/512+b*(-96199/604800)))))),this.gtu[0]=b*(.5+b*(-2/3+b*(5/16+b*(41/180+b*(-127/288+b*(7891/37800)))))),this.utg[1]=c*(-1/48+b*(-1/15+b*(437/1440+b*(-46/105+b*(1118711/3870720))))),this.gtu[1]=c*(13/48+b*(-0.6+b*(557/1440+b*(281/630+b*(-1983433/1935360))))),c*=b,this.utg[2]=c*(-17/480+b*(37/840+b*(209/4480+b*(-5569/90720)))),this.gtu[2]=c*(61/240+b*(-103/140+b*(15061/26880+b*(167603/181440)))),c*=b,this.utg[3]=c*(-4397/161280+b*(11/504+b*(830251/7257600))),this.gtu[3]=c*(49561/161280+b*(-179/168+b*(6601661/7257600))),c*=b,this.utg[4]=c*(-4583/161280+b*(108847/3991680)),this.gtu[4]=c*(34729/80640+b*(-3418889/1995840)),c*=b,this.utg[5]=c*(-20648693/638668800),this.gtu[5]=.6650675310896665*c;var d=id(this.cbg,this.lat0);this.Zb=-this.Qn*(d+jd(this.gtu,2*d))}function ea(a){var b=lc(a.x-this.long0),c=a.y;c=id(this.cbg,c);var d=Math.sin(c),e=Math.cos(c),f=Math.sin(b),g=Math.cos(b);c=Math.atan2(d,g*e),b=Math.atan2(f*e,fd(d,e*g)),b=hd(Math.tan(b));var h=ld(this.gtu,2*c,2*b);c+=h[0],b+=h[1];var i,j;return Math.abs(b)<=2.623395162778?(i=this.a*(this.Qn*b)+this.x0,j=this.a*(this.Qn*c+this.Zb)+this.y0):(i=1/0,j=1/0),a.x=i,a.y=j,a}function fa(a){var b=(a.x-this.x0)*(1/this.a),c=(a.y-this.y0)*(1/this.a);c=(c-this.Zb)/this.Qn,b/=this.Qn;var d,e;if(Math.abs(b)<=2.623395162778){var f=ld(this.utg,2*c,2*b);c+=f[0],b+=f[1],b=Math.atan(ed(b));var g=Math.sin(c),h=Math.cos(c),i=Math.sin(b),j=Math.cos(b);c=Math.atan2(g*j,fd(i,j*h)),b=Math.atan2(i,j*h),d=lc(b+this.long0),e=id(this.cgb,c)}else d=1/0,e=1/0;return a.x=d,a.y=e,a}function ga(){var a=od(this.zone,this.long0);if(void 0===a)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*Nb,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,nd.init.apply(this),this.forward=nd.forward,this.inverse=nd.inverse}function ha(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Pb)/(Math.pow(Math.tan(.5*this.lat0+Pb),this.C)*sd(this.e*a,this.ratexp))}function ia(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+Pb),this.C)*sd(this.e*Math.sin(c),this.ratexp))-Ib,a.x=this.C*b,a}function ja(a){for(var b=1e-14,c=a.x/this.C,d=a.y,e=Math.pow(Math.tan(.5*d+Pb)/this.K,1/this.C),f=td;f>0&&(d=2*Math.atan(e*sd(this.e*Math.sin(a.y),-.5*this.e))-Ib,!(Math.abs(d-a.y)<b));--f)a.y=d;return f?(a.x=c,a.y=d,a):null}function ka(){vd.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function la(a){var b,c,d,e;return a.x=lc(a.x-this.long0),vd.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),d=Math.cos(a.x),e=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*d),a.x=e*c*Math.sin(a.x),a.y=e*(this.cosc0*b-this.sinc0*c*d),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function ma(a){var b,c,d,e,f;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,f=Math.sqrt(a.x*a.x+a.y*a.y)){var g=2*Math.atan2(f,this.R2);b=Math.sin(g),c=Math.cos(g),e=Math.asin(c*this.sinc0+a.y*b*this.cosc0/f),d=Math.atan2(a.x*b,f*this.cosc0*c-a.y*this.sinc0*b)}else e=this.phic0,d=0;return a.x=d,a.y=e,vd.inverse.apply(this,[a]),a.x=lc(a.x+this.long0),a}function na(a,b,c){return b*=c,Math.tan(.5*(Ib+a))*Math.pow((1-b)/(1+b),.5*c)}function oa(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Mb&&(this.k0=.5*(1+kc(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Mb&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Mb&&(this.k0=.5*this.cons*jc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/mc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=jc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ib,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function pa(a){var b,c,d,e,f,g,h=a.x,i=a.y,j=Math.sin(i),k=Math.cos(i),l=lc(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=Mb&&Math.abs(i+this.lat0)<=Mb?(a.x=NaN,a.y=NaN,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*j+this.coslat0*k*Math.cos(l)),a.x=this.a*b*k*Math.sin(l)+this.x0,a.y=this.a*b*(this.coslat0*j-this.sinlat0*k*Math.cos(l))+this.y0,a):(c=2*Math.atan(this.ssfn_(i,j,this.e))-Ib,e=Math.cos(c),d=Math.sin(c),Math.abs(this.coslat0)<=Mb?(f=mc(this.e,i*this.con,this.con*j),g=2*this.a*this.k0*f/this.cons,a.x=this.x0+g*Math.sin(h-this.long0),a.y=this.y0-this.con*g*Math.cos(h-this.long0),a):(Math.abs(this.sinlat0)<Mb?(b=2*this.a*this.k0/(1+e*Math.cos(l)),a.y=b*d):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*d+this.cosX0*e*Math.cos(l))),a.y=b*(this.cosX0*d-this.sinX0*e*Math.cos(l))+this.y0),a.x=b*e*Math.sin(l)+this.x0,a))}function qa(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var h=2*Math.atan(g/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,Mb>=g?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(h)*this.sinlat0+a.y*Math.sin(h)*this.coslat0/g),b=lc(Math.abs(this.coslat0)<Mb?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(h),g*this.coslat0*Math.cos(h)-a.y*this.sinlat0*Math.sin(h))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=Mb){if(Mb>=g)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,d=g*this.cons/(2*this.a*this.k0),c=this.con*nc(this.e,d),b=this.con*lc(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else e=2*Math.atan(g*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,Mb>=g?f=this.X0:(f=Math.asin(Math.cos(e)*this.sinX0+a.y*Math.sin(e)*this.cosX0/g),b=lc(this.long0+Math.atan2(a.x*Math.sin(e),g*this.cosX0*Math.cos(e)-a.y*this.sinX0*Math.sin(e)))),c=-1*nc(this.e,Math.tan(.5*(Ib+f)));return a.x=b,a.y=c,a}function ra(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j}function sa(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a}function ta(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a}function ua(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var d=mc(this.e,this.lat0,a),e=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));1>e*e&&(e=1);var f,g;if(isNaN(this.longc)){var h=mc(this.e,this.lat1,Math.sin(this.lat1)),i=mc(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(e+Math.sqrt(e*e-1))*Math.pow(d,this.bl):this.el=(e-Math.sqrt(e*e-1))*Math.pow(d,this.bl);var j=Math.pow(h,this.bl),k=Math.pow(i,this.bl);f=this.el/j,g=.5*(f-1/f);var l=(this.el*this.el-k*j)/(this.el*this.el+k*j),m=(k-j)/(k+j),n=lc(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*n)/m)/this.bl,this.long0=lc(this.long0);var o=lc(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*o)/g),this.alpha=Math.asin(e*Math.sin(this.gamma0))}else f=this.lat0>=0?e+Math.sqrt(e*e-1):e-Math.sqrt(e*e-1),this.el=f*Math.pow(d,this.bl),g=.5*(f-1/f),this.gamma0=Math.asin(Math.sin(this.alpha)/e),this.long0=this.longc-Math.asin(g*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha))}function va(a){var b,c,d,e=a.x,f=a.y,g=lc(e-this.long0);if(Math.abs(Math.abs(f)-Ib)<=Mb)d=f>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(Pb+d*this.gamma0*.5)),b=-1*d*Ib*this.al/this.bl;else{var h=mc(this.e,f,Math.sin(f)),i=this.el/Math.pow(h,this.bl),j=.5*(i-1/i),k=.5*(i+1/i),l=Math.sin(this.bl*g),m=(j*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/k;c=Math.abs(Math.abs(m)-1)<=Mb?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-m)/(1+m))/this.bl,b=Math.abs(Math.cos(this.bl*g))<=Mb?this.al*this.bl*g:this.al*Math.atan2(j*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*g))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a}function wa(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),e=.5*(d-1/d),f=.5*(d+1/d),g=Math.sin(this.bl*b/this.al),h=(g*Math.cos(this.gamma0)+e*Math.sin(this.gamma0))/f,i=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<Mb?(a.x=this.long0,a.y=Ib):Math.abs(h+1)<Mb?(a.x=this.long0,a.y=-1*Ib):(a.y=nc(this.e,i),a.x=lc(this.long0-Math.atan2(e*Math.cos(this.gamma0)-g*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a}function xa(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Mb)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),d=jc(this.e,b,c),e=mc(this.e,this.lat1,b),f=Math.sin(this.lat2),g=Math.cos(this.lat2),h=jc(this.e,f,g),i=mc(this.e,this.lat2,f),j=mc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Mb?this.ns=Math.log(d/h)/Math.log(e/i):this.ns=b,isNaN(this.ns)&&(this.ns=b),this.f0=d/(this.ns*Math.pow(e,this.ns)),this.rh=this.a*this.f0*Math.pow(j,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function ya(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=Mb&&(c=kc(c)*(Ib-2*Mb));var d,e,f=Math.abs(Math.abs(c)-Ib);if(f>Mb)d=mc(this.e,c,Math.sin(c)),e=this.a*this.f0*Math.pow(d,this.ns);else{if(f=c*this.ns,0>=f)return null;e=0}var g=this.ns*lc(b-this.long0);return a.x=this.k0*(e*Math.sin(g))+this.x0,a.y=this.k0*(this.rh-e*Math.cos(g))+this.y0,a}function za(a){var b,c,d,e,f,g=(a.x-this.x0)/this.k0,h=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(g*g+h*h),c=1):(b=-Math.sqrt(g*g+h*h),c=-1);var i=0;if(0!==b&&(i=Math.atan2(c*g,c*h)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=nc(this.e,d),-9999===e)return null}else e=-Ib;return f=lc(i/this.ns+this.long0),a.x=f,a.y=e,a}function Aa(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,
this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Ba(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=lc(i-this.long0);return b=Math.pow((1+this.e*Math.sin(j))/(1-this.e*Math.sin(j)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(j/2+this.s45),this.alfa)/b)-this.s45),d=-k*this.alfa,e=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(d)),f=Math.asin(Math.cos(c)*Math.sin(d)/Math.cos(e)),g=this.n*f,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n),a.y=h*Math.cos(g)/1,a.x=h*Math.sin(g)/1,this.czech||(a.y*=-1,a.x*=-1),a}function Ca(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&15>k);return k>=15?null:a}function Da(){this.sphere||(this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.ml0=this.a*Id(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Ea(a){var b,c,d=a.x,e=a.y;if(d=lc(d-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(e)*Math.sin(d)),c=this.a*(Math.atan2(Math.tan(e),Math.cos(d))-this.lat0);else{var f=Math.sin(e),g=Math.cos(e),h=Nd(this.a,this.e,f),i=Math.tan(e)*Math.tan(e),j=d*Math.cos(e),k=j*j,l=this.es*g*g/(1-this.es),m=this.a*Id(this.e0,this.e1,this.e2,this.e3,e);b=h*j*(1-k*i*(1/6-(8-i+8*l)*k/120)),c=m-this.ml0+h*f/g*k*(.5+(5-i+6*l)*k/24)}return a.x=b+this.x0,a.y=c+this.y0,a}function Fa(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=Pd(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-Ib)<=Mb)return a.x=this.long0,a.y=Ib,0>e&&(a.y*=-1),a;var i=Nd(this.a,this.e,Math.sin(h)),j=i*i*i/this.a/this.a*(1-this.es),k=Math.pow(Math.tan(h),2),l=d*this.a/i,m=l*l;b=h-i*Math.tan(h)/j*l*l*(.5-(1+3*k)*l*l/24),c=l*(1-m*(k/3+(1+3*k)*k*m/15))/Math.cos(h)}return a.x=lc(c+this.long0),a.y=Od(b),a}function Ga(){var a=Math.abs(this.lat0);if(Math.abs(a-Ib)<Mb?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<Mb?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var b;switch(this.qp=Sd(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ja(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=Sd(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ha(a){var b,c,d,e,f,g,h,i,j,k,l=a.x,m=a.y;if(l=lc(l-this.long0),this.sphere){if(f=Math.sin(m),k=Math.cos(m),d=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+k*d:1+this.sinph0*f+this.cosph0*k*d,Mb>=c)return null;c=Math.sqrt(2/c),b=c*k*Math.sin(l),c*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*k*d}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),Math.abs(m+this.phi0)<Mb)return null;c=Pb-.5*m,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(l),c*=d}}else{switch(h=0,i=0,j=0,d=Math.cos(l),e=Math.sin(l),f=Math.sin(m),g=Sd(this.e,f),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=g/this.qp,i=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:j=1+this.sinb1*h+this.cosb1*i*d;break;case this.EQUIT:j=1+i*d;break;case this.N_POLE:j=Ib+m,g=this.qp-g;break;case this.S_POLE:j=m-Ib,g=this.qp+g}if(Math.abs(j)<Mb)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:j=Math.sqrt(2/j),c=this.mode===this.OBLIQ?this.ymf*j*(this.cosb1*h-this.sinb1*i*d):(j=Math.sqrt(2/(1+i*d)))*h*this.ymf,b=this.xmf*j*i*e;break;case this.N_POLE:case this.S_POLE:g>=0?(b=(j=Math.sqrt(g))*e,c=d*(this.mode===this.S_POLE?j:-j)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a}function Ia(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i=a.x/this.a,j=a.y/this.a;if(this.sphere){var k,l=0,m=0;if(k=Math.sqrt(i*i+j*j),c=.5*k,c>1)return null;switch(c=2*Math.asin(c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(c),l=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(k)<=Mb?0:Math.asin(j*m/k),i*=m,j=l*k;break;case this.OBLIQ:c=Math.abs(k)<=Mb?this.phi0:Math.asin(l*this.sinph0+j*m*this.cosph0/k),i*=m*this.cosph0,j=(l-Math.sin(c)*this.sinph0)*k;break;case this.N_POLE:j=-j,c=Ib-c;break;case this.S_POLE:c-=Ib}b=0!==j||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(i,j):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,j*=this.dd,g=Math.sqrt(i*i+j*j),Mb>g)return a.x=0,a.y=this.phi0,a;e=2*Math.asin(.5*g/this.rq),d=Math.cos(e),i*=e=Math.sin(e),this.mode===this.OBLIQ?(h=d*this.sinb1+j*e*this.cosb1/g,f=this.qp*h,j=g*this.cosb1*d-j*this.sinb1*e):(h=j*e/g,f=this.qp*h,j=g*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(j=-j),f=i*i+j*j,!f)return a.x=0,a.y=this.phi0,a;h=1-f/this.qp,this.mode===this.S_POLE&&(h=-h)}b=Math.atan2(i,j),c=Ka(Math.asin(h),this.apa)}return a.x=lc(this.long0+b),a.y=c,a}function Ja(a){var b,c=[];return c[0]=a*Xd,b=a*a,c[0]+=b*Yd,c[1]=b*$d,b*=a,c[0]+=b*Zd,c[1]+=b*_d,c[2]=b*ae,c}function Ka(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)}function La(){Math.abs(this.lat1+this.lat2)<Mb||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=jc(this.e3,this.sin_po,this.cos_po),this.qs1=Sd(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=jc(this.e3,this.sin_po,this.cos_po),this.qs2=Sd(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Sd(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Mb?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Ma(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=Sd(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,f=this.ns0*lc(b-this.long0),g=e*Math.sin(f)+this.x0,h=this.rh-e*Math.cos(f)+this.y0;return a.x=g,a.y=h,a}function Na(a){var b,c,d,e,f,g;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?g=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,g=this.phi1z(this.e3,c)),f=lc(e/this.ns0+this.long0),a.x=f,a.y=g,a}function Oa(a,b){var c,d,e,f,g,h=de(.5*b);if(Mb>a)return h;for(var i=a*a,j=1;25>=j;j++)if(c=Math.sin(h),d=Math.cos(h),e=a*c,f=1-e*e,g=.5*f*f/d*(b/(1-i)-c/f+.5/a*Math.log((1-e)/(1+e))),h+=g,Math.abs(g)<=1e-7)return h;return null}function Pa(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Qa(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=lc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Mb?(h=this.x0+this.a*f*c*Math.sin(d)/g,i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)/g):(h=this.x0+this.infinity_dist*c*Math.sin(d),i=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function Ra(a){var b,c,d,e,f,g;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(e=Math.atan2(b,this.rc),c=Math.sin(e),d=Math.cos(e),g=de(d*this.sin_p14+a.y*c*this.cos_p14/b),f=Math.atan2(a.x*c,b*this.cos_p14*d-a.y*this.sin_p14*c),f=lc(this.long0+f)):(g=this.phic0,f=0),a.x=f,a.y=g,a}function Sa(){this.sphere||(this.k0=jc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Ta(a){var b,c,d=a.x,e=a.y,f=lc(d-this.long0);if(this.sphere)b=this.x0+this.a*f*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var g=Sd(this.e,Math.sin(e));b=this.x0+this.a*this.k0*f,c=this.y0+this.a*g*.5/this.k0}return a.x=b,a.y=c,a}function Ua(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=lc(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=ie(this.e,2*a.y*this.k0/this.a),b=lc(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a}function Va(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Wa(a){var b=a.x,c=a.y,d=lc(b-this.long0),e=Od(c-this.lat0);return a.x=this.x0+this.a*d*this.rc,a.y=this.y0+this.a*e,a}function Xa(a){var b=a.x,c=a.y;return a.x=lc(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=Od(this.lat0+(c-this.y0)/this.a),a}function Ya(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.ml0=this.a*Id(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Za(a){var b,c,d,e=a.x,f=a.y,g=lc(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=Mb?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(Od(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=Mb)b=this.a*g,c=-1*this.ml0;else{var h=Nd(this.a,this.e,Math.sin(f))/Math.tan(f);b=h*Math.sin(d),c=this.a*Id(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+h*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a}function $a(a){var b,c,d,e,f,g,h,i,j;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=Mb)b=lc(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,h=d*d/this.a/this.a+g*g,i=g;var k;for(f=ne;f;--f)if(k=Math.tan(i),j=-1*(g*(i*k+1)-i-.5*(i*i+h)*k)/((i-g)/k-1),i+=j,Math.abs(j)<=Mb){c=i;break}b=lc(this.long0+Math.asin(d*Math.tan(i)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=Mb)c=0,b=lc(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,h=d*d/this.a/this.a+g*g,i=g;var l,m,n,o,p;for(f=ne;f;--f)if(p=this.e*Math.sin(i),l=Math.sqrt(1-p*p)*Math.tan(i),m=this.a*Id(this.e0,this.e1,this.e2,this.e3,i),n=this.e0-2*this.e1*Math.cos(2*i)+4*this.e2*Math.cos(4*i)-6*this.e3*Math.cos(6*i),o=m/this.a,j=(g*(l*o+1)-o-.5*l*(o*o+h))/(this.es*Math.sin(2*i)*(o*o+h-2*g*o)/(4*l)+(g-o)*(l*n-2/Math.sin(2*i))-n),i-=j,Math.abs(j)<=Mb){c=i;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=lc(this.long0+Math.asin(d*l/this.a)/Math.sin(c))}return a.x=b,a.y=c,a}function _a(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function ab(a){var b,c=a.x,d=a.y,e=d-this.lat0,f=c-this.long0,g=e/Hb*1e-5,h=f,i=1,j=0;for(b=1;10>=b;b++)i*=g,j+=this.A[b]*i;var k,l,m=j,n=h,o=1,p=0,q=0,r=0;for(b=1;6>=b;b++)k=o*m-p*n,l=p*m+o*n,o=k,p=l,q=q+this.B_re[b]*o-this.B_im[b]*p,r=r+this.B_im[b]*o+this.B_re[b]*p;return a.x=r*this.a+this.x0,a.y=q*this.a+this.y0,a}function bb(a){var b,c,d,e=a.x,f=a.y,g=e-this.x0,h=f-this.y0,i=h/this.a,j=g/this.a,k=1,l=0,m=0,n=0;for(b=1;6>=b;b++)c=k*i-l*j,d=l*i+k*j,k=c,l=d,m=m+this.C_re[b]*k-this.C_im[b]*l,n=n+this.C_im[b]*k+this.C_re[b]*l;for(var o=0;o<this.iterations;o++){var p,q,r=m,s=n,t=i,u=j;for(b=2;6>=b;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,t+=(b-1)*(this.B_re[b]*r-this.B_im[b]*s),u+=(b-1)*(this.B_im[b]*r+this.B_re[b]*s);r=1,s=0;var v=this.B_re[1],w=this.B_im[1];for(b=2;6>=b;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,v+=b*(this.B_re[b]*r-this.B_im[b]*s),w+=b*(this.B_im[b]*r+this.B_re[b]*s);var x=v*v+w*w;m=(t*v+u*w)/x,n=(u*v-t*w)/x}var y=m,z=n,A=1,B=0;for(b=1;9>=b;b++)A*=y,B+=this.D[b]*A;var C=this.lat0+B*Hb*1e5,D=this.long0+z;return a.x=D,a.y=C,a}function cb(){}function db(a){var b=a.x,c=a.y,d=lc(b-this.long0),e=this.x0+this.a*d,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=e,a.y=f,a}function eb(a){a.x-=this.x0,a.y-=this.y0;var b=lc(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a}function fb(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=$c(this.es)}function gb(a){var b,c,d=a.x,e=a.y;if(d=lc(d-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(e),g=ue;g;--g){var h=(this.m*e+Math.sin(e)-f)/(this.m+Math.cos(e));if(e-=h,Math.abs(h)<Mb)break}else e=1!==this.n?Math.asin(this.n*Math.sin(e)):e;b=this.a*this.C_x*d*(this.m+Math.cos(e)),c=this.a*this.C_y*e}else{var i=Math.sin(e),j=Math.cos(e);c=this.a*_c(e,i,j,this.en),b=this.a*d*j/Math.sqrt(1-this.es*i*i)}return a.x=b,a.y=c,a}function hb(a){var b,c,d,e;return a.x-=this.x0,d=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,d/=this.C_x*(this.m+Math.cos(b)),this.m?b=de((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=de(Math.sin(b)/this.n)),d=lc(d+this.long0),b=Od(b)):(b=bd(a.y/this.a,this.es,this.en),e=Math.abs(b),Ib>e?(e=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(b)),d=lc(c)):Ib>e-Mb&&(d=this.long0)),a.x=d,a.y=b,a}function ib(){}function jb(a){for(var b=a.x,c=a.y,d=lc(b-this.long0),e=c,f=Math.PI*Math.sin(c);;){var g=-(e+Math.sin(e)-f)/(1+Math.cos(e));if(e+=g,Math.abs(g)<Mb)break}e/=2,Math.PI/2-Math.abs(c)<Mb&&(d=0);var h=.900316316158*this.a*d*Math.cos(e)+this.x0,i=1.4142135623731*this.a*Math.sin(e)+this.y0;return a.x=h,a.y=i,a}function kb(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var d=lc(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));d<-Math.PI&&(d=-Math.PI),d>Math.PI&&(d=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var e=Math.asin(c);return a.x=d,a.y=e,a}function lb(){Math.abs(this.lat1+this.lat2)<Mb||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=jc(this.e,this.sinphi,this.cosphi),this.ml1=Id(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Mb?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=jc(this.e,this.sinphi,this.cosphi),this.ml2=Id(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Id(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function mb(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=Id(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*lc(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a}function nb(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=lc(this.long0+f/this.ns),d=Od(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=Pd(g,this.e0,this.e1,this.e2,this.e3),e=lc(this.long0+f/this.ns),a.x=e,a.y=d,a}function ob(){this.R=this.a}function pb(a){var b,c,d=a.x,e=a.y,f=lc(d-this.long0);Math.abs(e)<=Mb&&(b=this.x0+this.R*f,c=this.y0);var g=de(2*Math.abs(e/Math.PI));(Math.abs(f)<=Mb||Math.abs(Math.abs(e)-Ib)<=Mb)&&(b=this.x0,c=e>=0?this.y0+Math.PI*this.R*Math.tan(.5*g):this.y0+Math.PI*this.R*-Math.tan(.5*g));var h=.5*Math.abs(Math.PI/f-f/Math.PI),i=h*h,j=Math.sin(g),k=Math.cos(g),l=k/(j+k-1),m=l*l,n=l*(2/j-1),o=n*n,p=Math.PI*this.R*(h*(l-o)+Math.sqrt(i*(l-o)*(l-o)-(o+i)*(m-o)))/(o+i);0>f&&(p=-p),b=this.x0+p;var q=i+l;return p=Math.PI*this.R*(n*q-h*Math.sqrt((o+i)*(i+1)-q*q))/(o+i),c=e>=0?this.y0+p:this.y0-p,a.x=b,a.y=c,a}function qb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return a.x-=this.x0,a.y-=this.y0,l=Math.PI*this.R,d=a.x/l,e=a.y/l,f=d*d+e*e,g=-Math.abs(e)*(1+f),h=g-2*e*e+d*d,i=-2*g+1+2*e*e+f*f,n=e*e/i+(2*h*h*h/i/i/i-9*g*h/i/i)/27,j=(g-h*h/3/i)/i,k=2*Math.sqrt(-j/3),l=3*n/j/k,Math.abs(l)>1&&(l=l>=0?1:-1),m=Math.acos(l)/3,c=a.y>=0?(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI:-(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI,b=Math.abs(d)<Mb?this.long0:lc(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(d*d-e*e)+f*f))/2/d),a.x=b,a.y=c,a}function rb(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function sb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=a.x,z=a.y,A=Math.sin(a.y),B=Math.cos(a.y),C=lc(y-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Mb?(a.x=this.x0+this.a*(Ib-z)*Math.sin(C),a.y=this.y0-this.a*(Ib-z)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Mb?(a.x=this.x0+this.a*(Ib+z)*Math.sin(C),a.y=this.y0+this.a*(Ib+z)*Math.cos(C),a):(s=this.sin_p12*A+this.cos_p12*B*Math.cos(C),q=Math.acos(s),r=q/Math.sin(q),a.x=this.x0+this.a*r*B*Math.sin(C),a.y=this.y0+this.a*r*(this.cos_p12*A-this.sin_p12*B*Math.cos(C)),a):(b=Jd(this.es),c=Kd(this.es),d=Ld(this.es),e=Md(this.es),Math.abs(this.sin_p12-1)<=Mb?(f=this.a*Id(b,c,d,e,Ib),g=this.a*Id(b,c,d,e,z),a.x=this.x0+(f-g)*Math.sin(C),a.y=this.y0-(f-g)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Mb?(f=this.a*Id(b,c,d,e,Ib),g=this.a*Id(b,c,d,e,z),a.x=this.x0+(f+g)*Math.sin(C),a.y=this.y0+(f+g)*Math.cos(C),a):(h=A/B,i=Nd(this.a,this.e,this.sin_p12),j=Nd(this.a,this.e,A),k=Math.atan((1-this.es)*h+this.es*i*this.sin_p12/(j*B)),l=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(k)-this.sin_p12*Math.cos(C)),t=0===l?Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.abs(Math.abs(l)-Math.PI)<=Mb?-Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.asin(Math.sin(C)*Math.cos(k)/Math.sin(l)),m=this.e*this.sin_p12/Math.sqrt(1-this.es),n=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es),o=m*n,p=n*n,u=t*t,v=u*t,w=v*t,x=w*t,q=i*t*(1-u*p*(1-p)/6+v/8*o*(1-2*p)+w/120*(p*(4-7*p)-3*m*m*(1-7*p))-x/48*o),a.x=this.x0+q*Math.sin(l),a.y=this.y0+q*Math.cos(l),a))}function tb(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*Ib*this.a)return;return c=b/this.a,d=Math.sin(c),e=Math.cos(c),f=this.long0,Math.abs(b)<=Mb?g=this.lat0:(g=de(e*this.sin_p12+a.y*d*this.cos_p12/b),h=Math.abs(this.lat0)-Ib,f=lc(Math.abs(h)<=Mb?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*d,b*this.cos_p12*e-a.y*this.sin_p12*d))),a.x=f,a.y=g,a}return i=Jd(this.es),j=Kd(this.es),k=Ld(this.es),l=Md(this.es),Math.abs(this.sin_p12-1)<=Mb?(m=this.a*Id(i,j,k,l,Ib),b=Math.sqrt(a.x*a.x+a.y*a.y),n=m-b,g=Pd(n/this.a,i,j,k,l),f=lc(this.long0+Math.atan2(a.x,-1*a.y)),a.x=f,a.y=g,a):Math.abs(this.sin_p12+1)<=Mb?(m=this.a*Id(i,j,k,l,Ib),b=Math.sqrt(a.x*a.x+a.y*a.y),n=b-m,g=Pd(n/this.a,i,j,k,l),f=lc(this.long0+Math.atan2(a.x,a.y)),a.x=f,a.y=g,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),q=Math.atan2(a.x,a.y),o=Nd(this.a,this.e,this.sin_p12),r=Math.cos(q),s=this.e*this.cos_p12*r,t=-s*s/(1-this.es),u=3*this.es*(1-t)*this.sin_p12*this.cos_p12*r/(1-this.es),v=b/o,w=v-t*(1+t)*Math.pow(v,3)/6-u*(1+3*t)*Math.pow(v,4)/24,x=1-t*w*w/2-v*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*r),f=lc(this.long0+Math.asin(Math.sin(q)*Math.sin(w)/Math.cos(p))),g=Math.atan((1-this.es*x*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),a.x=f,a.y=g,a)}function ub(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function vb(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=lc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,(g>0||Math.abs(g)<=Mb)&&(h=this.a*f*c*Math.sin(d),i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function wb(a){var b,c,d,e,f,g,h;return a.x-=this.x0,a.y-=this.y0,b=Math.sqrt(a.x*a.x+a.y*a.y),c=de(b/this.a),d=Math.sin(c),e=Math.cos(c),g=this.long0,Math.abs(b)<=Mb?(h=this.lat0,a.x=g,a.y=h,a):(h=de(e*this.sin_p14+a.y*d*this.cos_p14/b),f=Math.abs(this.lat0)-Ib,Math.abs(f)<=Mb?(g=lc(this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y)),a.x=g,a.y=h,a):(g=lc(this.long0+Math.atan2(a.x*d,b*this.cos_p14*e-a.y*this.sin_p14*d)),a.x=g,a.y=h,a))}function xb(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ib-Pb/2?this.face=He.TOP:this.lat0<=-(Ib-Pb/2)?this.face=He.BOTTOM:Math.abs(this.long0)<=Pb?this.face=He.FRONT:Math.abs(this.long0)<=Ib+Pb?this.face=this.long0>0?He.RIGHT:He.LEFT:this.face=He.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function yb(a){var b,c,d,e,f,g,h={x:0,y:0},i={value:0};if(a.x-=this.long0,b=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(a.y)):a.y,c=a.x,this.face===He.TOP)e=Ib-b,c>=Pb&&Ib+Pb>=c?(i.value=Ie.AREA_0,d=c-Ib):c>Ib+Pb||-(Ib+Pb)>=c?(i.value=Ie.AREA_1,d=c>0?c-Rb:c+Rb):c>-(Ib+Pb)&&-Pb>=c?(i.value=Ie.AREA_2,d=c+Ib):(i.value=Ie.AREA_3,d=c);else if(this.face===He.BOTTOM)e=Ib+b,c>=Pb&&Ib+Pb>=c?(i.value=Ie.AREA_0,d=-c+Ib):Pb>c&&c>=-Pb?(i.value=Ie.AREA_1,d=-c):-Pb>c&&c>=-(Ib+Pb)?(i.value=Ie.AREA_2,d=-c-Ib):(i.value=Ie.AREA_3,d=c>0?-c+Rb:-c-Rb);else{var j,k,l,m,n,o,p;this.face===He.RIGHT?c=Bb(c,+Ib):this.face===He.BACK?c=Bb(c,+Rb):this.face===He.LEFT&&(c=Bb(c,-Ib)),m=Math.sin(b),n=Math.cos(b),o=Math.sin(c),p=Math.cos(c),j=n*p,k=n*o,l=m,this.face===He.FRONT?(e=Math.acos(j),d=Ab(e,l,k,i)):this.face===He.RIGHT?(e=Math.acos(k),d=Ab(e,l,-j,i)):this.face===He.BACK?(e=Math.acos(-j),d=Ab(e,l,-k,i)):this.face===He.LEFT?(e=Math.acos(-k),d=Ab(e,l,j,i)):(e=d=0,i.value=Ie.AREA_0)}return g=Math.atan(12/Rb*(d+Math.acos(Math.sin(d)*Math.cos(Pb))-Ib)),f=Math.sqrt((1-Math.cos(e))/(Math.cos(g)*Math.cos(g))/(1-Math.cos(Math.atan(1/Math.cos(d))))),i.value===Ie.AREA_1?g+=Ib:i.value===Ie.AREA_2?g+=Rb:i.value===Ie.AREA_3&&(g+=1.5*Rb),h.x=f*Math.cos(g),h.y=f*Math.sin(g),h.x=h.x*this.a+this.x0,h.y=h.y*this.a+this.y0,a.x=h.x,a.y=h.y,a}function zb(a){var b,c,d,e,f,g,h,i,j,k={lam:0,phi:0},l={value:0};if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,c=Math.atan(Math.sqrt(a.x*a.x+a.y*a.y)),b=Math.atan2(a.y,a.x),a.x>=0&&a.x>=Math.abs(a.y)?l.value=Ie.AREA_0:a.y>=0&&a.y>=Math.abs(a.x)?(l.value=Ie.AREA_1,b-=Ib):a.x<0&&-a.x>=Math.abs(a.y)?(l.value=Ie.AREA_2,b=0>b?b+Rb:b-Rb):(l.value=Ie.AREA_3,b+=Ib),j=Rb/12*Math.tan(b),f=Math.sin(j)/(Math.cos(j)-1/Math.sqrt(2)),g=Math.atan(f),d=Math.cos(b),e=Math.tan(c),h=1-d*d*e*e*(1-Math.cos(Math.atan(1/Math.cos(g)))),-1>h?h=-1:h>1&&(h=1),this.face===He.TOP)i=Math.acos(h),k.phi=Ib-i,l.value===Ie.AREA_0?k.lam=g+Ib:l.value===Ie.AREA_1?k.lam=0>g?g+Rb:g-Rb:l.value===Ie.AREA_2?k.lam=g-Ib:k.lam=g;else if(this.face===He.BOTTOM)i=Math.acos(h),k.phi=i-Ib,l.value===Ie.AREA_0?k.lam=-g+Ib:l.value===Ie.AREA_1?k.lam=-g:l.value===Ie.AREA_2?k.lam=-g-Ib:k.lam=0>g?-g-Rb:-g+Rb;else{var m,n,o;m=h,j=m*m,o=j>=1?0:Math.sqrt(1-j)*Math.sin(g),j+=o*o,n=j>=1?0:Math.sqrt(1-j),l.value===Ie.AREA_1?(j=n,n=-o,o=j):l.value===Ie.AREA_2?(n=-n,o=-o):l.value===Ie.AREA_3&&(j=n,n=o,o=-j),this.face===He.RIGHT?(j=m,m=-n,n=j):this.face===He.BACK?(m=-m,n=-n):this.face===He.LEFT&&(j=m,m=n,n=-j),k.phi=Math.acos(-o)-Ib,k.lam=Math.atan2(n,m),this.face===He.RIGHT?k.lam=Bb(k.lam,-Ib):this.face===He.BACK?k.lam=Bb(k.lam,-Rb):this.face===He.LEFT&&(k.lam=Bb(k.lam,+Ib))}if(0!==this.es){var p,q,r;p=k.phi<0?1:0,q=Math.tan(k.phi),r=this.b/Math.sqrt(q*q+this.one_minus_f_squared),k.phi=Math.atan(Math.sqrt(this.a*this.a-r*r)/(this.one_minus_f*r)),p&&(k.phi=-k.phi)}return k.lam+=this.long0,a.x=k.lam,a.y=k.phi,a}function Ab(a,b,c,d){var e;return Mb>a?(d.value=Ie.AREA_0,e=0):(e=Math.atan2(b,c),Math.abs(e)<=Pb?d.value=Ie.AREA_0:e>Pb&&Ib+Pb>=e?(d.value=Ie.AREA_1,e-=Ib):e>Ib+Pb||-(Ib+Pb)>=e?(d.value=Ie.AREA_2,e=e>=0?e-Rb:e+Rb):(d.value=Ie.AREA_3,e+=Ib)),e}function Bb(a,b){var c=a+b;return-Rb>c?c+=Qb:c>+Rb&&(c-=Qb),c}var Cb=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]},Db=1,Eb=2,Fb=4,Gb=5,Hb=484813681109536e-20,Ib=Math.PI/2,Jb=.16666666666666666,Kb=.04722222222222222,Lb=.022156084656084655,Mb=1e-10,Nb=.017453292519943295,Ob=57.29577951308232,Pb=Math.PI/4,Qb=2*Math.PI,Rb=3.14159265359,Sb={};Sb.greenwich=0,Sb.lisbon=-9.131906111111,Sb.paris=2.337229166667,Sb.bogota=-74.080916666667,Sb.madrid=-3.687938888889,Sb.rome=12.452333333333,Sb.bern=7.439583333333,Sb.jakarta=106.807719444444,Sb.ferro=-17.666666666667,Sb.brussels=4.367975,Sb.stockholm=18.058277777778,Sb.athens=23.7163375,Sb.oslo=10.722916666667;var Tb={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ub=/[\s_\-\/\(\)]/g,Vb=function(b){var c,d,e,f={},g=b.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,b){var c=b.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),h={proj:"projName",datum:"datumCode",rf:function(a){f.rf=parseFloat(a)},lat_0:function(a){f.lat0=a*Nb},lat_1:function(a){f.lat1=a*Nb},lat_2:function(a){f.lat2=a*Nb},lat_ts:function(a){f.lat_ts=a*Nb},lon_0:function(a){f.long0=a*Nb},lon_1:function(a){f.long1=a*Nb},lon_2:function(a){f.long2=a*Nb},alpha:function(a){f.alpha=parseFloat(a)*Nb},lonc:function(a){f.longc=a*Nb},x_0:function(a){f.x0=parseFloat(a)},y_0:function(a){f.y0=parseFloat(a)},k_0:function(a){f.k0=parseFloat(a)},k:function(a){f.k0=parseFloat(a)},a:function(a){f.a=parseFloat(a)},b:function(a){f.b=parseFloat(a)},r_a:function(){f.R_A=!0},zone:function(a){f.zone=parseInt(a,10)},south:function(){f.utmSouth=!0},towgs84:function(a){f.datum_params=a.split(",").map(function(a){return parseFloat(a)})},to_meter:function(a){f.to_meter=parseFloat(a)},units:function(b){f.units=b;var c=a(Tb,b);c&&(f.to_meter=c.to_meter)},from_greenwich:function(a){f.from_greenwich=a*Nb},pm:function(b){var c=a(Sb,b);f.from_greenwich=(c?c:parseFloat(b))*Nb},nadgrids:function(a){"@null"===a?f.datumCode="none":f.nadgrids=a},axis:function(a){var b="ewnsud";3===a.length&&-1!==b.indexOf(a.substr(0,1))&&-1!==b.indexOf(a.substr(1,1))&&-1!==b.indexOf(a.substr(2,1))&&(f.axis=a)}};for(c in g)d=g[c],c in h?(e=h[c],"function"==typeof e?e(d):f[e]=d):f[c]=d;return"string"==typeof f.datumCode&&"WGS84"!==f.datumCode&&(f.datumCode=f.datumCode.toLowerCase()),f},Wb=1,Xb=2,Yb=3,Zb=4,$b=5,_b=-1,ac=/\s/,bc=/[A-Za-z]/,cc=/[A-Za-z84]/,dc=/[,\]]/,ec=/[\d\.E\-\+]/;b.prototype.readCharicter=function(){var a=this.text[this.place++];if(this.state!==Zb)for(;ac.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case Wb:return this.neutral(a);case Xb:return this.keyword(a);case Zb:return this.quoted(a);case $b:return this.afterquote(a);case Yb:return this.number(a);case _b:return}},b.prototype.afterquote=function(a){if('"'===a)return this.word+='"',void(this.state=Zb);if(dc.test(a))return this.word=this.word.trim(),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in afterquote yet, index '+this.place)},b.prototype.afterItem=function(a){return","===a?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Wb)):"]"===a?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Wb,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=_b))):void 0},b.prototype.number=function(a){if(ec.test(a))return void(this.word+=a);if(dc.test(a))return this.word=parseFloat(this.word),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in number yet, index '+this.place)},b.prototype.quoted=function(a){return'"'===a?void(this.state=$b):void(this.word+=a)},b.prototype.keyword=function(a){if(cc.test(a))return void(this.word+=a);if("["===a){var b=[];return b.push(this.word),this.level++,null===this.root?this.root=b:this.currentObject.push(b),this.stack.push(this.currentObject),this.currentObject=b,void(this.state=Wb)}if(dc.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in keyword yet, index '+this.place)},b.prototype.neutral=function(a){if(bc.test(a))return this.word=a,void(this.state=Xb);if('"'===a)return this.word="",void(this.state=Zb);if(ec.test(a))return this.word=a,void(this.state=Yb);if(dc.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in neutral yet, index '+this.place)},b.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===_b)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var fc=.017453292519943295,gc=function(a){var b=c(a),d=b.shift(),f=b.shift();b.unshift(["name",f]),b.unshift(["type",d]);var g={};return e(b,g),h(g),g};Cb(i);var hc=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ic=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a},jc=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},kc=function(a){return 0>a?-1:1},lc=function(a){return Math.abs(a)<=Rb?a:a-kc(a)*Qb},mc=function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(Ib-b))/d},nc=function(a,b){for(var c,d,e=.5*a,f=Ib-2*Math.atan(b),g=0;15>=g;g++)if(c=a*Math.sin(f),d=Ib-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return-9999},oc=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],pc={init:o,forward:p,inverse:q,names:oc},qc=["longlat","identity"],rc={init:r,forward:s,inverse:s,names:qc},sc=[pc,rc],tc={},uc=[],vc={start:v,add:t,get:u},wc={};wc.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},wc.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},wc.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},wc.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},wc.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"
},wc.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},wc.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},wc.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},wc.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},wc.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},wc.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},wc.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},wc.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},wc.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},wc.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},wc.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},wc.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},wc.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},wc.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},wc.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},wc.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},wc.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},wc.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},wc.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},wc.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},wc.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},wc.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},wc.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},wc.hough={a:6378270,rf:297,ellipseName:"Hough"},wc.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},wc.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},wc.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},wc.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},wc.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},wc.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},wc.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},wc.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},wc.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},wc.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},wc.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},wc.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var xc=wc.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};wc.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var yc={};yc.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},yc.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},yc.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},yc.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},yc.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},yc.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},yc.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},yc.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},yc.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},yc.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},yc.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},yc.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},yc.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},yc.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},yc.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},yc.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},yc.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},z.projections=vc,z.projections.start();var zc=function(a,b,c){return A(a,b)?c:a.datum_type===Gb||b.datum_type===Gb?c:a.es!==b.es||a.a!==b.a||F(a.datum_type)||F(b.datum_type)?(c=B(c,a.es,a.a),F(a.datum_type)&&(c=D(c,a.datum_type,a.datum_params)),F(b.datum_type)&&(c=E(c,b.datum_type,b.datum_params)),C(c,b.es,b.a,b.b)):c},Ac=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0,j={};for(f=0;3>f;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":j[e]=d;break;case"w":j[e]=-d;break;case"n":j[e]=d;break;case"s":j[e]=-d;break;case"u":void 0!==c[e]&&(j.z=d);break;case"d":void 0!==c[e]&&(j.z=-d);break;default:return null}return j},Bc=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b},Cc=function(a){G(a.x),G(a.y)},Dc=z("WGS84"),Ec=6,Fc="AJSAJS",Gc="AFAFAF",Hc=65,Ic=73,Jc=79,Kc=86,Lc=90,Mc={forward:M,inverse:N,toPoint:O};Point.fromMGRS=function(a){return new Point(O(a))},Point.prototype.toMGRS=function(a){return M([this.x,this.y],a)};var Nc="2.4.4",Oc=1,Pc=.25,Qc=.046875,Rc=.01953125,Sc=.01068115234375,Tc=.75,Uc=.46875,Vc=.013020833333333334,Wc=.007120768229166667,Xc=.3645833333333333,Yc=.005696614583333333,Zc=.3076171875,$c=function(a){var b=[];b[0]=Oc-a*(Pc+a*(Qc+a*(Rc+a*Sc))),b[1]=a*(Tc-a*(Qc+a*(Rc+a*Sc)));var c=a*a;return b[2]=c*(Uc-a*(Vc+a*Wc)),c*=a,b[3]=c*(Xc-a*Yc),b[4]=c*a*Zc,b},_c=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},ad=20,bd=function(a,b,c){for(var d=1/(1-b),e=a,f=ad;f;--f){var g=Math.sin(e),h=1-b*g*g;if(h=(_c(e,g,Math.cos(e),c)-a)*(h*Math.sqrt(h))*d,e-=h,Math.abs(h)<Mb)return e}return e},cd=["Transverse_Mercator","Transverse Mercator","tmerc"],dd={init:aa,forward:ba,inverse:ca,names:cd},ed=function(a){var b=Math.exp(a);return b=(b-1/b)/2},fd=function(a,b){a=Math.abs(a),b=Math.abs(b);var c=Math.max(a,b),d=Math.min(a,b)/(c?c:1);return c*Math.sqrt(1+Math.pow(d,2))},gd=function(a){var b=1+a,c=b-1;return 0===c?a:a*Math.log(b)/c},hd=function(a){var b=Math.abs(a);return b=gd(b*(1+b/(fd(1,b)+1))),0>a?-b:b},id=function(a,b){for(var c,d=2*Math.cos(2*b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return b+c*Math.sin(2*b)},jd=function(a,b){for(var c,d=2*Math.cos(b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return Math.sin(b)*c},kd=function(a){var b=Math.exp(a);return b=(b+1/b)/2},ld=function(a,b,c){for(var d,e,f=Math.sin(b),g=Math.cos(b),h=ed(c),i=kd(c),j=2*g*i,k=-2*f*h,l=a.length-1,m=a[l],n=0,o=0,p=0;--l>=0;)d=o,e=n,o=m,n=p,m=-d+j*o-k*n+a[l],p=-e+k*o+j*n;return j=f*i,k=g*h,[j*m-k*p,j*p+k*m]},md=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],nd={init:da,forward:ea,inverse:fa,names:md},od=function(a,b){if(void 0===a){if(a=Math.floor(30*(lc(b)+Math.PI)/Math.PI)+1,0>a)return 0;if(a>60)return 60}return a},pd="etmerc",qd=["Universal Transverse Mercator System","utm"],rd={init:ga,names:qd,dependsOn:pd},sd=function(a,b){return Math.pow((1-a)/(1+a),b)},td=20,ud=["gauss"],vd={init:ha,forward:ia,inverse:ja,names:ud},wd=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],xd={init:ka,forward:la,inverse:ma,names:wd},yd=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],zd={init:oa,forward:pa,inverse:qa,names:yd,ssfn_:na},Ad=["somerc"],Bd={init:ra,forward:sa,inverse:ta,names:Ad},Cd=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],Dd={init:ua,forward:va,inverse:wa,names:Cd},Ed=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],Fd={init:xa,forward:ya,inverse:za,names:Ed},Gd=["Krovak","krovak"],Hd={init:Aa,forward:Ba,inverse:Ca,names:Gd},Id=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},Jd=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},Kd=function(a){return.375*a*(1+.25*a*(1+.46875*a))},Ld=function(a){return.05859375*a*a*(1+.75*a)},Md=function(a){return a*a*a*(35/3072)},Nd=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},Od=function(a){return Math.abs(a)<Ib?a:a-kc(a)*Math.PI},Pd=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return NaN},Qd=["Cassini","Cassini_Soldner","cass"],Rd={init:Da,forward:Ea,inverse:Fa,names:Qd},Sd=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},Td=1,Ud=2,Vd=3,Wd=4,Xd=.3333333333333333,Yd=.17222222222222222,Zd=.10257936507936508,$d=.06388888888888888,_d=.0664021164021164,ae=.016415012942191543,be=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],ce={init:Ga,forward:Ha,inverse:Ia,names:be,S_POLE:Td,N_POLE:Ud,EQUIT:Vd,OBLIQ:Wd},de=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},ee=["Albers_Conic_Equal_Area","Albers","aea"],fe={init:La,forward:Ma,inverse:Na,names:ee,phi1z:Oa},ge=["gnom"],he={init:Pa,forward:Qa,inverse:Ra,names:ge},ie=function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return 0>b?-1*Ib:Ib;for(var d,e,f,g,h=Math.asin(.5*b),i=0;30>i;i++)if(e=Math.sin(h),f=Math.cos(h),g=a*e,d=Math.pow(1-g*g,2)/(2*f)*(b/(1-a*a)-e/(1-g*g)+.5/a*Math.log((1-g)/(1+g))),h+=d,Math.abs(d)<=1e-10)return h;return NaN},je=["cea"],ke={init:Sa,forward:Ta,inverse:Ua,names:je},le=["Equirectangular","Equidistant_Cylindrical","eqc"],me={init:Va,forward:Wa,inverse:Xa,names:le},ne=20,oe=["Polyconic","poly"],pe={init:Ya,forward:Za,inverse:$a,names:oe},qe=["New_Zealand_Map_Grid","nzmg"],re={init:_a,forward:ab,inverse:bb,names:qe},se=["Miller_Cylindrical","mill"],te={init:cb,forward:db,inverse:eb,names:se},ue=20,ve=["Sinusoidal","sinu"],we={init:fb,forward:gb,inverse:hb,names:ve},xe=["Mollweide","moll"],ye={init:ib,forward:jb,inverse:kb,names:xe},ze=["Equidistant_Conic","eqdc"],Ae={init:lb,forward:mb,inverse:nb,names:ze},Be=["Van_der_Grinten_I","VanDerGrinten","vandg"],Ce={init:ob,forward:pb,inverse:qb,names:Be},De=["Azimuthal_Equidistant","aeqd"],Ee={init:rb,forward:sb,inverse:tb,names:De},Fe=["ortho"],Ge={init:ub,forward:vb,inverse:wb,names:Fe},He={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ie={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Je=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],Ke={init:xb,forward:yb,inverse:zb,names:Je},Le=function(proj4){proj4.Proj.projections.add(dd),proj4.Proj.projections.add(nd),proj4.Proj.projections.add(rd),proj4.Proj.projections.add(xd),proj4.Proj.projections.add(zd),proj4.Proj.projections.add(Bd),proj4.Proj.projections.add(Dd),proj4.Proj.projections.add(Fd),proj4.Proj.projections.add(Hd),proj4.Proj.projections.add(Rd),proj4.Proj.projections.add(ce),proj4.Proj.projections.add(fe),proj4.Proj.projections.add(he),proj4.Proj.projections.add(ke),proj4.Proj.projections.add(me),proj4.Proj.projections.add(pe),proj4.Proj.projections.add(re),proj4.Proj.projections.add(te),proj4.Proj.projections.add(we),proj4.Proj.projections.add(ye),proj4.Proj.projections.add(Ae),proj4.Proj.projections.add(Ce),proj4.Proj.projections.add(Ee),proj4.Proj.projections.add(Ge),proj4.Proj.projections.add(Ke)};return L.defaultDatum="WGS84",L.Proj=z,L.WGS84=new L.Proj("WGS84"),L.Point=Point,L.toPoint=Bc,L.defs=i,L.transform=I,L.mgrs=Mc,L.version=Nc,Le(L),L});

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",d=1e3*40,c=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,"writestart progress write writeend".split(" "))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,"_blank");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){define("FileSaver.js",function(){return saveAs})}

// https://d3js.org Version 4.13.0. Copyright 2018 Mike Bostock.
(function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})})(this,function(t){"use strict";function n(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function e(t){return 1===t.length&&(t=function(t){return function(e,r){return n(t(e),r)}}(t)),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function r(t,n){return[t,n]}function i(t){return null===t?NaN:+t}function o(t,n){var e,r,o=t.length,u=0,a=-1,c=0,s=0;if(null==n)for(;++a<o;)isNaN(e=i(t[a]))||(s+=(r=e-c)*(e-(c+=r/++u)));else for(;++a<o;)isNaN(e=i(n(t[a],a,t)))||(s+=(r=e-c)*(e-(c+=r/++u)));if(u>1)return s/(u-1)}function u(t,n){var e=o(t,n);return e?Math.sqrt(e):e}function a(t,n){var e,r,i,o=t.length,u=-1;if(null==n){for(;++u<o;)if(null!=(e=t[u])&&e>=e)for(r=i=e;++u<o;)null!=(e=t[u])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++u<o;)if(null!=(e=n(t[u],u,t))&&e>=e)for(r=i=e;++u<o;)null!=(e=n(t[u],u,t))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]}function c(t){return function(){return t}}function s(t){return t}function f(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}function l(t,n,e){var r,i,o,u,a=-1;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(u=h(t,n,e))||!isFinite(u))return[];if(u>0)for(t=Math.ceil(t/u),n=Math.floor(n/u),o=new Array(i=Math.ceil(n-t+1));++a<i;)o[a]=(t+a)*u;else for(t=Math.floor(t*u),n=Math.ceil(n*u),o=new Array(i=Math.ceil(t-n+1));++a<i;)o[a]=(t-a)/u;return r&&o.reverse(),o}function h(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Hs?10:o>=js?5:o>=Xs?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Hs?10:o>=js?5:o>=Xs?2:1)}function p(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Hs?i*=10:o>=js?i*=5:o>=Xs&&(i*=2),n<t?-i:i}function d(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function v(t,n,e){if(null==e&&(e=i),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,o=(r-1)*n,u=Math.floor(o),a=+e(t[u],u,t);return a+(+e(t[u+1],u+1,t)-a)*(o-u)}}function g(t){for(var n,e,r,i=t.length,o=-1,u=0;++o<i;)u+=t[o].length;for(e=new Array(u);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--u]=r[n];return e}function _(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r>e&&(r=e);return r}function y(t){if(!(i=t.length))return[];for(var n=-1,e=_(t,m),r=new Array(e);++n<e;)for(var i,o=-1,u=r[n]=new Array(i);++o<i;)u[o]=t[o][n];return r}function m(t){return t.length}function x(t){return t}function b(t){return"translate("+(t+.5)+",0)"}function w(t){return"translate(0,"+(t+.5)+")"}function M(){return!this.__axis}function T(t,n){function e(e){var h=null==i?n.ticks?n.ticks.apply(n,r):n.domain():i,p=null==o?n.tickFormat?n.tickFormat.apply(n,r):x:o,d=Math.max(u,0)+c,v=n.range(),g=+v[0]+.5,_=+v[v.length-1]+.5,y=(n.bandwidth?function(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}:function(t){return function(n){return+t(n)}})(n.copy()),m=e.selection?e.selection():e,b=m.selectAll(".domain").data([null]),w=m.selectAll(".tick").data(h,n).order(),T=w.exit(),N=w.enter().append("g").attr("class","tick"),k=w.select("line"),S=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),w=w.merge(N),k=k.merge(N.append("line").attr("stroke","#000").attr(f+"2",s*u)),S=S.merge(N.append("text").attr("fill","#000").attr(f,s*d).attr("dy",t===$s?"0em":t===Zs?"0.71em":"0.32em")),e!==m&&(b=b.transition(e),w=w.transition(e),k=k.transition(e),S=S.transition(e),T=T.transition(e).attr("opacity",Qs).attr("transform",function(t){return isFinite(t=y(t))?l(t):this.getAttribute("transform")}),N.attr("opacity",Qs).attr("transform",function(t){var n=this.parentNode.__axis;return l(n&&isFinite(n=n(t))?n:y(t))})),T.remove(),b.attr("d",t===Gs||t==Ws?"M"+s*a+","+g+"H0.5V"+_+"H"+s*a:"M"+g+","+s*a+"V0.5H"+_+"V"+s*a),w.attr("opacity",1).attr("transform",function(t){return l(y(t))}),k.attr(f+"2",s*u),S.attr(f,s*d).text(p),m.filter(M).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ws?"start":t===Gs?"end":"middle"),m.each(function(){this.__axis=y})}var r=[],i=null,o=null,u=6,a=6,c=3,s=t===$s||t===Gs?-1:1,f=t===Gs||t===Ws?"x":"y",l=t===$s||t===Zs?b:w;return e.scale=function(t){return arguments.length?(n=t,e):n},e.ticks=function(){return r=Vs.call(arguments),e},e.tickArguments=function(t){return arguments.length?(r=null==t?[]:Vs.call(t),e):r.slice()},e.tickValues=function(t){return arguments.length?(i=null==t?null:Vs.call(t),e):i&&i.slice()},e.tickFormat=function(t){return arguments.length?(o=t,e):o},e.tickSize=function(t){return arguments.length?(u=a=+t,e):u},e.tickSizeInner=function(t){return arguments.length?(u=+t,e):u},e.tickSizeOuter=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(c=+t,e):c},e}function N(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new k(r)}function k(t){this._=t}function S(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Js,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function E(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),tf.hasOwnProperty(n)?{space:tf[n],local:t}:t}function A(t){var n=E(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Ks&&n.documentElement.namespaceURI===Ks?n.createElement(t):n.createElementNS(e,t)}})(n)}function C(){}function z(t){return null==t?C:function(){return this.querySelector(t)}}function P(){return[]}function R(t){return null==t?P:function(){return this.querySelectorAll(t)}}function L(t){return new Array(t.length)}function q(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function D(t,n,e,r,i,o){for(var u,a=0,c=n.length,s=o.length;a<s;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new q(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function U(t,n,e,r,i,o,u){var a,c,s,f={},l=n.length,h=o.length,p=new Array(l);for(a=0;a<l;++a)(c=n[a])&&(p[a]=s=uf+u.call(c,c.__data__,a,n),s in f?i[a]=c:f[s]=c);for(a=0;a<h;++a)(c=f[s=uf+u.call(t,o[a],a,o)])?(r[a]=c,c.__data__=o[a],f[s]=null):e[a]=new q(t,o[a]);for(a=0;a<l;++a)(c=n[a])&&f[p[a]]===c&&(i[a]=c)}function O(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function F(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function I(t,n){return t.style.getPropertyValue(n)||F(t).getComputedStyle(t,null).getPropertyValue(n)}function Y(t){return t.trim().split(/^|\s+/)}function B(t){return t.classList||new H(t)}function H(t){this._node=t,this._names=Y(t.getAttribute("class")||"")}function j(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function X(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function V(){this.textContent=""}function $(){this.innerHTML=""}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function Z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G(){return null}function Q(){var t=this.parentNode;t&&t.removeChild(this)}function J(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function K(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function tt(t,n,e){return t=nt(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function nt(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function et(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function rt(t,n,e){var r=af.hasOwnProperty(t.type)?tt:nt;return function(i,o,u){var a,c=this.__on,s=r(n,o,u);if(c)for(var f=0,l=c.length;f<l;++f)if((a=c[f]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=e),void(a.value=n);this.addEventListener(t.type,s,e),a={type:t.type,name:t.name,value:n,listener:s,capture:e},c?c.push(a):this.__on=[a]}}function it(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function ot(t,n,e){var r=F(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function ut(t,n){this._groups=t,this._parents=n}function at(){return new ut([[document.documentElement]],cf)}function ct(t){return"string"==typeof t?new ut([[document.querySelector(t)]],[document.documentElement]):new ut([[t]],cf)}function st(){return new ft}function ft(){this._="@"+(++sf).toString(36)}function lt(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e}function ht(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function pt(t){var n=lt();return n.changedTouches&&(n=n.changedTouches[0]),ht(t,n)}function dt(t,n,e){arguments.length<3&&(e=n,n=lt().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return ht(t,r);return null}function vt(){t.event.stopImmediatePropagation()}function gt(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function _t(t){var n=t.document.documentElement,e=ct(t).on("dragstart.drag",gt,!0);"onselectstart"in n?e.on("selectstart.drag",gt,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function yt(t,n){var e=t.document.documentElement,r=ct(t).on("dragstart.drag",null);n&&(r.on("click.drag",gt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function mt(t){return function(){return t}}function xt(t,n,e,r,i,o,u,a,c,s){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=u,this.dx=a,this.dy=c,this._=s}function bt(){return!t.event.button}function wt(){return this.parentNode}function Mt(n){return null==n?{x:t.event.x,y:t.event.y}:n}function Tt(){return"ontouchstart"in this}function Nt(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function kt(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function St(){}function Et(t){var n;return t=(t+"").trim().toLowerCase(),(n=pf.exec(t))?(n=parseInt(n[1],16),new Rt(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1)):(n=df.exec(t))?At(parseInt(n[1],16)):(n=vf.exec(t))?new Rt(n[1],n[2],n[3],1):(n=gf.exec(t))?new Rt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=_f.exec(t))?Ct(n[1],n[2],n[3],n[4]):(n=yf.exec(t))?Ct(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=mf.exec(t))?Lt(n[1],n[2]/100,n[3]/100,1):(n=xf.exec(t))?Lt(n[1],n[2]/100,n[3]/100,n[4]):bf.hasOwnProperty(t)?At(bf[t]):"transparent"===t?new Rt(NaN,NaN,NaN,0):null}function At(t){return new Rt(t>>16&255,t>>8&255,255&t,1)}function Ct(t,n,e,r){return r<=0&&(t=n=e=NaN),new Rt(t,n,e,r)}function zt(t){return t instanceof St||(t=Et(t)),t?(t=t.rgb(),new Rt(t.r,t.g,t.b,t.opacity)):new Rt}function Pt(t,n,e,r){return 1===arguments.length?zt(t):new Rt(t,n,e,null==r?1:r)}function Rt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Lt(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Dt(t,n,e,r)}function qt(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Dt)return new Dt(t.h,t.s,t.l,t.opacity);if(t instanceof St||(t=Et(t)),!t)return new Dt;if(t instanceof Dt)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,c=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=c<.5?o+i:2-o-i,u*=60):a=c>0&&c<1?0:u,new Dt(u,a,c,t.opacity)}(t):new Dt(t,n,e,null==r?1:r)}function Dt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ut(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Ot(t){if(t instanceof It)return new It(t.l,t.a,t.b,t.opacity);if(t instanceof Vt){var n=t.h*wf;return new It(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof Rt||(t=zt(t));var e=jt(t.r),r=jt(t.g),i=jt(t.b),o=Yt((.4124564*e+.3575761*r+.1804375*i)/Tf),u=Yt((.2126729*e+.7151522*r+.072175*i)/Nf);return new It(116*u-16,500*(o-u),200*(u-Yt((.0193339*e+.119192*r+.9503041*i)/kf)),t.opacity)}function Ft(t,n,e,r){return 1===arguments.length?Ot(t):new It(t,n,e,null==r?1:r)}function It(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Yt(t){return t>Cf?Math.pow(t,1/3):t/Af+Sf}function Bt(t){return t>Ef?t*t*t:Af*(t-Sf)}function Ht(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function jt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Xt(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Vt)return new Vt(t.h,t.c,t.l,t.opacity);t instanceof It||(t=Ot(t));var n=Math.atan2(t.b,t.a)*Mf;return new Vt(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Vt(t,n,e,null==r?1:r)}function Vt(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function $t(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);t instanceof Rt||(t=zt(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Df*r+Lf*n-qf*e)/(Df+Lf-qf),o=r-i,u=(Rf*(e-i)-zf*o)/Pf,a=Math.sqrt(u*u+o*o)/(Rf*i*(1-i)),c=a?Math.atan2(u,o)*Mf-120:NaN;return new Wt(c<0?c+360:c,a,i,t.opacity)}(t):new Wt(t,n,e,null==r?1:r)}function Wt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Zt(t,n,e,r,i){var o=t*t,u=o*t;return((1-3*t+3*o-u)*n+(4-6*o+3*u)*e+(1+3*t+3*o-3*u)*r+u*i)/6}function Gt(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],u=r>0?t[r-1]:2*i-o,a=r<n-1?t[r+2]:2*o-i;return Zt((e-r/n)*n,u,i,o,a)}}function Qt(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],u=t[(r+1)%n],a=t[(r+2)%n];return Zt((e-r/n)*n,i,o,u,a)}}function Jt(t){return function(){return t}}function Kt(t,n){return function(e){return t+e*n}}function tn(t,n){var e=n-t;return e?Kt(t,e>180||e<-180?e-360*Math.round(e/360):e):Jt(isNaN(t)?n:t)}function nn(t){return 1==(t=+t)?en:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):Jt(isNaN(n)?e:n)}}function en(t,n){var e=n-t;return e?Kt(t,e):Jt(isNaN(t)?n:t)}function rn(t){return function(n){var e,r,i=n.length,o=new Array(i),u=new Array(i),a=new Array(i);for(e=0;e<i;++e)r=Pt(n[e]),o[e]=r.r||0,u[e]=r.g||0,a[e]=r.b||0;return o=t(o),u=t(u),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=u(t),r.b=a(t),r+""}}}function on(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),u=new Array(r);for(e=0;e<i;++e)o[e]=fn(t[e],n[e]);for(;e<r;++e)u[e]=n[e];return function(t){for(e=0;e<i;++e)u[e]=o[e](t);return u}}function un(t,n){var e=new Date;return t=+t,n-=t,function(r){return e.setTime(t+n*r),e}}function an(t,n){return t=+t,n-=t,function(e){return t+n*e}}function cn(t,n){var e,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={});for(e in n)e in t?r[e]=fn(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}function sn(t,n){var e,r,i,o=Vf.lastIndex=$f.lastIndex=0,u=-1,a=[],c=[];for(t+="",n+="";(e=Vf.exec(t))&&(r=$f.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,c.push({i:u,x:an(e,r)})),o=$f.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)a[(e=c[r]).i]=e.x(t);return a.join("")})}function fn(t,n){var e,r=typeof n;return null==n||"boolean"===r?Jt(n):("number"===r?an:"string"===r?(e=Et(n))?(n=e,Hf):sn:n instanceof Et?Hf:n instanceof Date?un:Array.isArray(n)?on:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?cn:an)(t,n)}function ln(t,n){return t=+t,n-=t,function(e){return Math.round(t+n*e)}}function hn(t,n,e,r,i,o){var u,a,c;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,c/=a),t*r<n*e&&(t=-t,n=-n,c=-c,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Wf,skewX:Math.atan(c)*Wf,scaleX:u,scaleY:a}}function pn(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,u){var a=[],c=[];return o=t(o),u=t(u),function(t,r,i,o,u,a){if(t!==i||r!==o){var c=u.push("translate(",null,n,null,e);a.push({i:c-4,x:an(t,i)},{i:c-2,x:an(r,o)})}else(i||o)&&u.push("translate("+i+n+o+e)}(o.translateX,o.translateY,u.translateX,u.translateY,a,c),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:an(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,u.rotate,a,c),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:an(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,u.skewX,a,c),function(t,n,e,r,o,u){if(t!==e||n!==r){var a=o.push(i(o)+"scale(",null,",",null,")");u.push({i:a-4,x:an(t,e)},{i:a-2,x:an(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,u.scaleX,u.scaleY,a,c),o=u=null,function(t){for(var n,e=-1,r=c.length;++e<r;)a[(n=c[e]).i]=n.x(t);return a.join("")}}}function dn(t){return((t=Math.exp(t))+1/t)/2}function vn(t,n){var e,r,i=t[0],o=t[1],u=t[2],a=n[0],c=n[1],s=n[2],f=a-i,l=c-o,h=f*f+l*l;if(h<nl)r=Math.log(s/u)/Jf,e=function(t){return[i+t*f,o+t*l,u*Math.exp(Jf*t*r)]};else{var p=Math.sqrt(h),d=(s*s-u*u+tl*h)/(2*u*Kf*p),v=(s*s-u*u-tl*h)/(2*s*Kf*p),g=Math.log(Math.sqrt(d*d+1)-d),_=Math.log(Math.sqrt(v*v+1)-v);r=(_-g)/Jf,e=function(t){var n=t*r,e=dn(g),a=u/(Kf*p)*(e*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Jf*n+g)-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+a*f,o+a*l,u*e/dn(Jf*n+g)]}}return e.duration=1e3*r,e}function gn(t){return function(n,e){var r=t((n=qt(n)).h,(e=qt(e)).h),i=en(n.s,e.s),o=en(n.l,e.l),u=en(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=u(t),n+""}}}function _n(t){return function(n,e){var r=t((n=Xt(n)).h,(e=Xt(e)).h),i=en(n.c,e.c),o=en(n.l,e.l),u=en(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=u(t),n+""}}}function yn(t){return function n(e){function r(n,r){var i=t((n=$t(n)).h,(r=$t(r)).h),o=en(n.s,r.s),u=en(n.l,r.l),a=en(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=u(Math.pow(t,e)),n.opacity=a(t),n+""}}return e=+e,r.gamma=n,r}(1)}function mn(){return pl||(gl(xn),pl=vl.now()+dl)}function xn(){pl=0}function bn(){this._call=this._time=this._next=null}function wn(t,n,e){var r=new bn;return r.restart(t,n,e),r}function Mn(){mn(),++cl;for(var t,n=Yf;n;)(t=pl-n._time)>=0&&n._call.call(null,t),n=n._next;--cl}function Tn(){pl=(hl=vl.now())+dl,cl=sl=0;try{Mn()}finally{cl=0,function(){var t,n,e=Yf,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Yf=n);Bf=t,kn(r)}(),pl=0}}function Nn(){var t=vl.now(),n=t-hl;n>ll&&(dl-=n,hl=t)}function kn(t){if(!cl){sl&&(sl=clearTimeout(sl));t-pl>24?(t<1/0&&(sl=setTimeout(Tn,t-vl.now()-dl)),fl&&(fl=clearInterval(fl))):(fl||(hl=vl.now(),fl=setInterval(Nn,ll)),cl=1,gl(Tn))}}function Sn(t,n,e){var r=new bn;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}function En(t,n,e,r,i,o){var u=t.__transition;if(u){if(e in u)return}else t.__transition={};(function(t,n,e){function r(c){var s,f,l,h;if(e.state!==xl)return o();for(s in a)if((h=a[s]).name===e.name){if(h.state===wl)return Sn(r);h.state===Ml?(h.state=Nl,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete a[s]):+s<n&&(h.state=Nl,h.timer.stop(),delete a[s])}if(Sn(function(){e.state===wl&&(e.state=Ml,e.timer.restart(i,e.delay,e.time),i(c))}),e.state=bl,e.on.call("start",t,t.__data__,e.index,e.group),e.state===bl){for(e.state=wl,u=new Array(l=e.tween.length),s=0,f=-1;s<l;++s)(h=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(u[++f]=h);u.length=f+1}}function i(n){for(var r=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(o),e.state=Tl,1),i=-1,a=u.length;++i<a;)u[i].call(null,r);e.state===Tl&&(e.on.call("end",t,t.__data__,e.index,e.group),o())}function o(){e.state=Nl,e.timer.stop(),delete a[n];for(var r in a)return;delete t.__transition}var u,a=t.__transition;a[n]=e,e.timer=wn(function(t){e.state=xl,e.timer.restart(r,e.delay,e.time),e.delay<=t&&r(t-e.delay)},0,e.time)})(t,e,{name:n,index:r,group:i,on:_l,tween:yl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ml})}function An(t,n){var e=zn(t,n);if(e.state>ml)throw new Error("too late; already scheduled");return e}function Cn(t,n){var e=zn(t,n);if(e.state>bl)throw new Error("too late; already started");return e}function zn(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Pn(t,n){var e,r,i,o=t.__transition,u=!0;if(o){n=null==n?null:n+"";for(i in o)(e=o[i]).name===n?(r=e.state>bl&&e.state<Tl,e.state=Nl,e.timer.stop(),r&&e.on.call("interrupt",t,t.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete t.__transition}}function Rn(t,n,e){var r=t._id;return t.each(function(){var t=Cn(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return zn(t,r).value[n]}}function Ln(t,n){var e;return("number"==typeof n?an:n instanceof Et?Hf:(e=Et(n))?(n=e,Hf):sn)(t,n)}function qn(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Dn(t){return at().transition(t)}function Un(){return++Sl}function On(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Fn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function In(t){return(1-Math.cos(Pl*t))/2}function Yn(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Bn(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Hn(t){return(t=+t)<Ll?Hl*t*t:t<Dl?Hl*(t-=ql)*t+Ul:t<Fl?Hl*(t-=Ol)*t+Il:Hl*(t-=Yl)*t+Bl}function jn(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return Ql.time=mn(),Ql;return e}function Xn(t){return function(){return t}}function Vn(){t.event.stopImmediatePropagation()}function $n(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Wn(t){return{type:t}}function Zn(){return!t.event.button}function Gn(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Qn(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Jn(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Kn(n){function e(t){var e=t.property("__brush",a).selectAll(".overlay").data([Wn("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",uh.overlay).merge(e).each(function(){var t=Qn(this).extent;ct(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Wn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",uh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(n.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return uh[t.type]}),t.each(r).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",u)}function r(){var t=ct(this),n=Qn(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?n[1][0]-h/2:n[0][0]-h/2}).attr("y",function(t){return"s"===t.type[0]?n[1][1]-h/2:n[0][1]-h/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+h:h}).attr("height",function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+h:h})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function i(t,n){return t.__brush.emitter||new o(t,n)}function o(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function u(){function e(){var t=pt(w);!L||x||b||(Math.abs(t[0]-D[0])>Math.abs(t[1]-D[1])?b=!0:x=!0),D=t,m=!0,$n(),o()}function o(){var t;switch(_=D[0]-q[0],y=D[1]-q[1],T){case th:case Kl:N&&(_=Math.max(C-a,Math.min(P-p,_)),s=a+_,d=p+_),k&&(y=Math.max(z-l,Math.min(R-v,y)),h=l+y,g=v+y);break;case nh:N<0?(_=Math.max(C-a,Math.min(P-a,_)),s=a+_,d=p):N>0&&(_=Math.max(C-p,Math.min(P-p,_)),s=a,d=p+_),k<0?(y=Math.max(z-l,Math.min(R-l,y)),h=l+y,g=v):k>0&&(y=Math.max(z-v,Math.min(R-v,y)),h=l,g=v+y);break;case eh:N&&(s=Math.max(C,Math.min(P,a-_*N)),d=Math.max(C,Math.min(P,p+_*N))),k&&(h=Math.max(z,Math.min(R,l-y*k)),g=Math.max(z,Math.min(R,v+y*k)))}d<s&&(N*=-1,t=a,a=p,p=t,t=s,s=d,d=t,M in ah&&F.attr("cursor",uh[M=ah[M]])),g<h&&(k*=-1,t=l,l=v,v=t,t=h,h=g,g=t,M in ch&&F.attr("cursor",uh[M=ch[M]])),S.selection&&(A=S.selection),x&&(s=A[0][0],d=A[1][0]),b&&(h=A[0][1],g=A[1][1]),A[0][0]===s&&A[0][1]===h&&A[1][0]===d&&A[1][1]===g||(S.selection=[[s,h],[d,g]],r.call(w),U.brush())}function u(){if(Vn(),t.event.touches){if(t.event.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500),O.on("touchmove.brush touchend.brush touchcancel.brush",null)}else yt(t.event.view,m),I.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);O.attr("pointer-events","all"),F.attr("cursor",uh.overlay),S.selection&&(A=S.selection),Jn(A)&&(S.selection=null,r.call(w)),U.end()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return $n()}else if(c)return;if(f.apply(this,arguments)){var a,s,l,h,p,d,v,g,_,y,m,x,b,w=this,M=t.event.target.__data__.type,T="selection"===(t.event.metaKey?M="overlay":M)?Kl:t.event.altKey?eh:nh,N=n===ih?null:sh[M],k=n===rh?null:fh[M],S=Qn(w),E=S.extent,A=S.selection,C=E[0][0],z=E[0][1],P=E[1][0],R=E[1][1],L=N&&k&&t.event.shiftKey,q=pt(w),D=q,U=i(w,arguments).beforestart();"overlay"===M?S.selection=A=[[a=n===ih?C:q[0],l=n===rh?z:q[1]],[p=n===ih?P:a,v=n===rh?R:l]]:(a=A[0][0],l=A[0][1],p=A[1][0],v=A[1][1]),s=a,h=l,d=p,g=v;var O=ct(w).attr("pointer-events","none"),F=O.selectAll(".overlay").attr("cursor",uh[M]);if(t.event.touches)O.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",u,!0);else{var I=ct(t.event.view).on("keydown.brush",function(){switch(t.event.keyCode){case 16:L=N&&k;break;case 18:T===nh&&(N&&(p=d-_*N,a=s+_*N),k&&(v=g-y*k,l=h+y*k),T=eh,o());break;case 32:T!==nh&&T!==eh||(N<0?p=d-_:N>0&&(a=s-_),k<0?v=g-y:k>0&&(l=h-y),T=th,F.attr("cursor",uh.selection),o());break;default:return}$n()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:L&&(x=b=L=!1,o());break;case 18:T===eh&&(N<0?p=d:N>0&&(a=s),k<0?v=g:k>0&&(l=h),T=nh,o());break;case 32:T===th&&(t.event.altKey?(N&&(p=d-_*N,a=s+_*N),k&&(v=g-y*k,l=h+y*k),T=eh):(N<0?p=d:N>0&&(a=s),k<0?v=g:k>0&&(l=h),T=nh),F.attr("cursor",uh[M]),o());break;default:return}$n()},!0).on("mousemove.brush",e,!0).on("mouseup.brush",u,!0);_t(t.event.view)}Vn(),Pn(w),r.call(w),U.start()}}function a(){var t=this.__brush||{selection:null};return t.extent=s.apply(this,arguments),t.dim=n,t}var c,s=Gn,f=Zn,l=N(e,"start","brush","end"),h=6;return e.move=function(t,e){t.selection?t.on("start.brush",function(){i(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){i(this,arguments).end()}).tween("brush",function(){function t(t){u.selection=1===t&&Jn(s)?null:f(t),r.call(o),a.brush()}var o=this,u=o.__brush,a=i(o,arguments),c=u.selection,s=n.input("function"==typeof e?e.apply(this,arguments):e,u.extent),f=fn(c,s);return c&&s?t:t(1)}):t.each(function(){var t=arguments,o=this.__brush,u=n.input("function"==typeof e?e.apply(this,t):e,o.extent),a=i(this,t).beforestart();Pn(this),o.selection=null==u||Jn(u)?null:u,r.call(this),a.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){it(new function(t,n,e){this.target=t,this.type=n,this.selection=e}(e,t,n.output(this.state.selection)),l.apply,l,[t,this.that,this.args])}},e.extent=function(t){return arguments.length?(s="function"==typeof t?t:Xn([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):s},e.filter=function(t){return arguments.length?(f="function"==typeof t?t:Xn(!!t),e):f},e.handleSize=function(t){return arguments.length?(h=+t,e):h},e.on=function(){var t=l.on.apply(l,arguments);return t===l?e:t},e}function te(t){return function(){return t}}function ne(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ee(){return new ne}function re(t){return t.source}function ie(t){return t.target}function oe(t){return t.radius}function ue(t){return t.startAngle}function ae(t){return t.endAngle}function ce(){}function se(t,n){var e=new ce;if(t instanceof ce)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}function fe(){return{}}function le(t,n,e){t[n]=e}function he(){return se()}function pe(t,n,e){t.set(n,e)}function de(){}function ve(t,n){var e=new de;if(t instanceof de)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}function ge(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function _e(t){function n(t,n){function e(){if(s)return Mh;if(f)return f=!1,wh;var n,e,r=a;if(t.charCodeAt(r)===Th){for(;a++<u&&t.charCodeAt(a)!==Th||t.charCodeAt(++a)===Th;);return(n=a)>=u?s=!0:(e=t.charCodeAt(a++))===Nh?f=!0:e===kh&&(f=!0,t.charCodeAt(a)===Nh&&++a),t.slice(r+1,n-1).replace(/""/g,'"')}for(;a<u;){if((e=t.charCodeAt(n=a++))===Nh)f=!0;else if(e===kh)f=!0,t.charCodeAt(a)===Nh&&++a;else if(e!==o)continue;return t.slice(r,n)}return s=!0,t.slice(r,u)}var r,i=[],u=t.length,a=0,c=0,s=u<=0,f=!1;for(t.charCodeAt(u-1)===Nh&&--u,t.charCodeAt(u-1)===kh&&--u;(r=e())!==Mh;){for(var l=[];r!==wh&&r!==Mh;)l.push(r),r=e();n&&null==(l=n(l,c++))||i.push(l)}return i}function e(n){return n.map(r).join(t)}function r(t){return null==t?"":i.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var i=new RegExp('["'+t+"\n\r]"),o=t.charCodeAt(0);return{parse:function(t,e){var r,i,o=n(t,function(t,n){if(r)return r(t,n-1);i=t,r=e?function(t,n){var e=ge(t);return function(r,i){return n(e(r),i,t)}}(t,e):ge(t)});return o.columns=i||[],o},parseRows:n,format:function(n,e){return null==e&&(e=function(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}(n)),[e.map(r).join(t)].concat(n.map(function(n){return e.map(function(t){return r(n[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(e).join("\n")}}}function ye(t){return function(){return t}}function me(){return 1e-6*(Math.random()-.5)}function xe(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,u,a,c,s,f,l,h,p=t._root,d={data:r},v=t._x0,g=t._y0,_=t._x1,y=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((s=n>=(o=(v+_)/2))?v=o:_=o,(f=e>=(u=(g+y)/2))?g=u:y=u,i=p,!(p=p[l=f<<1|s]))return i[l]=d,t;if(a=+t._x.call(null,p.data),c=+t._y.call(null,p.data),n===a&&e===c)return d.next=p,i?i[l]=d:t._root=d,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(s=n>=(o=(v+_)/2))?v=o:_=o,(f=e>=(u=(g+y)/2))?g=u:y=u}while((l=f<<1|s)==(h=(c>=u)<<1|a>=o));return i[h]=p,i[l]=d,t}function be(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function we(t){return t[0]}function Me(t){return t[1]}function Te(t,n,e){var r=new Ne(null==n?we:n,null==e?Me:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Ne(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function ke(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}function Se(t){return t.x+t.vx}function Ee(t){return t.y+t.vy}function Ae(t){return t.index}function Ce(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function ze(t){return t.x}function Pe(t){return t.y}function Re(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Le(t){return(t=Re(Math.abs(t)))?t[1]:NaN}function qe(t,n){var e=Re(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function De(t){return new Ue(t)}function Ue(t){if(!(n=Bh.exec(t)))throw new Error("invalid format: "+t);var n,e=n[1]||" ",r=n[2]||">",i=n[3]||"-",o=n[4]||"",u=!!n[5],a=n[6]&&+n[6],c=!!n[7],s=n[8]&&+n[8].slice(1),f=n[9]||"";"n"===f?(c=!0,f="g"):Yh[f]||(f=""),(u||"0"===e&&"="===r)&&(u=!0,e="0",r="="),this.fill=e,this.align=r,this.sign=i,this.symbol=o,this.zero=u,this.width=a,this.comma=c,this.precision=s,this.type=f}function Oe(t){return t}function Fe(t){function n(t){function n(t){var n,r,u,f=g,x=_;if("c"===v)x=y(t)+x,t="";else{var b=(t=+t)<0;if(t=y(Math.abs(t),d),b&&0==+t&&(b=!1),f=(b?"("===s?s:"-":"-"===s||"("===s?"":s)+f,x=("s"===v?jh[8+Oh/3]:"")+x+(b&&"("===s?")":""),m)for(n=-1,r=t.length;++n<r;)if(48>(u=t.charCodeAt(n))||u>57){x=(46===u?i+t.slice(n+1):t.slice(n))+x,t=t.slice(0,n);break}}p&&!l&&(t=e(t,1/0));var w=f.length+t.length+x.length,M=w<h?new Array(h-w+1).join(a):"";switch(p&&l&&(t=e(M+t,M.length?h-x.length:1/0),M=""),c){case"<":t=f+t+x+M;break;case"=":t=f+M+t+x;break;case"^":t=M.slice(0,w=M.length>>1)+f+t+x+M.slice(w);break;default:t=M+f+t+x}return o(t)}var a=(t=De(t)).fill,c=t.align,s=t.sign,f=t.symbol,l=t.zero,h=t.width,p=t.comma,d=t.precision,v=t.type,g="$"===f?r[0]:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===f?r[1]:/[%p]/.test(v)?u:"",y=Yh[v],m=!v||/[defgprs%]/.test(v);return d=null==d?v?6:12:/[gprs]/.test(v)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),n.toString=function(){return t+""},n}var e=t.grouping&&t.thousands?function(t,n){return function(e,r){for(var i=e.length,o=[],u=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(e.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[u=(u+1)%t.length];return o.reverse().join(n)}}(t.grouping,t.thousands):Oe,r=t.currency,i=t.decimal,o=t.numerals?function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(t.numerals):Oe,u=t.percent||"%";return{format:n,formatPrefix:function(t,e){var r=n((t=De(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Le(e)/3))),o=Math.pow(10,-i),u=jh[8+i/3];return function(t){return r(o*t)+u}}}}function Ie(n){return Hh=Fe(n),t.format=Hh.format,t.formatPrefix=Hh.formatPrefix,Hh}function Ye(t){return Math.max(0,-Le(Math.abs(t)))}function Be(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Le(n)/3)))-Le(Math.abs(t)))}function He(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Le(n)-Le(t))+1}function je(){return new Xe}function Xe(){this.reset()}function Ve(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}function $e(t){return t>1?0:t<-1?Np:Math.acos(t)}function We(t){return t>1?kp:t<-1?-kp:Math.asin(t)}function Ze(t){return(t=Fp(t/2))*t}function Ge(){}function Qe(t,n){t&&jp.hasOwnProperty(t.type)&&jp[t.type](t,n)}function Je(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Ke(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Je(t[e],n,1);n.polygonEnd()}function tr(t,n){t&&Hp.hasOwnProperty(t.type)?Hp[t.type](t,n):Qe(t,n)}function nr(){$p.point=rr}function er(){ir(Xh,Vh)}function rr(t,n){$p.point=ir,Xh=t,Vh=n,$h=t*=Cp,Wh=Lp(n=(n*=Cp)/2+Sp),Zh=Fp(n)}function ir(t,n){n=(n*=Cp)/2+Sp;var e=(t*=Cp)-$h,r=e>=0?1:-1,i=r*e,o=Lp(n),u=Fp(n),a=Zh*u,c=Wh*o+a*Lp(i),s=a*r*Fp(i);Xp.add(Rp(s,c)),$h=t,Wh=o,Zh=u}function or(t){return[Rp(t[1],t[0]),We(t[2])]}function ur(t){var n=t[0],e=t[1],r=Lp(e);return[r*Lp(n),r*Fp(n),Fp(e)]}function ar(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function cr(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function sr(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function fr(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function lr(t){var n=Yp(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function hr(t,n){ip.push(op=[Gh=t,Jh=t]),n<Qh&&(Qh=n),n>Kh&&(Kh=n)}function pr(t,n){var e=ur([t*Cp,n*Cp]);if(rp){var r=cr(rp,e),i=cr([r[1],-r[0],0],r);lr(i),i=or(i);var o,u=t-tp,a=u>0?1:-1,c=i[0]*Ap*a,s=zp(u)>180;s^(a*tp<c&&c<a*t)?(o=i[1]*Ap)>Kh&&(Kh=o):(c=(c+360)%360-180,s^(a*tp<c&&c<a*t)?(o=-i[1]*Ap)<Qh&&(Qh=o):(n<Qh&&(Qh=n),n>Kh&&(Kh=n))),s?t<tp?mr(Gh,t)>mr(Gh,Jh)&&(Jh=t):mr(t,Jh)>mr(Gh,Jh)&&(Gh=t):Jh>=Gh?(t<Gh&&(Gh=t),t>Jh&&(Jh=t)):t>tp?mr(Gh,t)>mr(Gh,Jh)&&(Jh=t):mr(t,Jh)>mr(Gh,Jh)&&(Gh=t)}else ip.push(op=[Gh=t,Jh=t]);n<Qh&&(Qh=n),n>Kh&&(Kh=n),rp=e,tp=t}function dr(){Zp.point=pr}function vr(){op[0]=Gh,op[1]=Jh,Zp.point=hr,rp=null}function gr(t,n){if(rp){var e=t-tp;Wp.add(zp(e)>180?e+(e>0?360:-360):e)}else np=t,ep=n;$p.point(t,n),pr(t,n)}function _r(){$p.lineStart()}function yr(){gr(np,ep),$p.lineEnd(),zp(Wp)>Mp&&(Gh=-(Jh=180)),op[0]=Gh,op[1]=Jh,rp=null}function mr(t,n){return(n-=t)<0?n+360:n}function xr(t,n){return t[0]-n[0]}function br(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function wr(t,n){t*=Cp;var e=Lp(n*=Cp);Mr(e*Lp(t),e*Fp(t),Fp(n))}function Mr(t,n,e){cp+=(t-cp)/++up,sp+=(n-sp)/up,fp+=(e-fp)/up}function Tr(){Gp.point=Nr}function Nr(t,n){t*=Cp;var e=Lp(n*=Cp);mp=e*Lp(t),xp=e*Fp(t),bp=Fp(n),Gp.point=kr,Mr(mp,xp,bp)}function kr(t,n){t*=Cp;var e=Lp(n*=Cp),r=e*Lp(t),i=e*Fp(t),o=Fp(n),u=Rp(Yp((u=xp*o-bp*i)*u+(u=bp*r-mp*o)*u+(u=mp*i-xp*r)*u),mp*r+xp*i+bp*o);ap+=u,lp+=u*(mp+(mp=r)),hp+=u*(xp+(xp=i)),pp+=u*(bp+(bp=o)),Mr(mp,xp,bp)}function Sr(){Gp.point=wr}function Er(){Gp.point=Cr}function Ar(){zr(_p,yp),Gp.point=wr}function Cr(t,n){_p=t,yp=n,t*=Cp,n*=Cp,Gp.point=zr;var e=Lp(n);mp=e*Lp(t),xp=e*Fp(t),bp=Fp(n),Mr(mp,xp,bp)}function zr(t,n){t*=Cp;var e=Lp(n*=Cp),r=e*Lp(t),i=e*Fp(t),o=Fp(n),u=xp*o-bp*i,a=bp*r-mp*o,c=mp*i-xp*r,s=Yp(u*u+a*a+c*c),f=We(s),l=s&&-f/s;dp+=l*u,vp+=l*a,gp+=l*c,ap+=f,lp+=f*(mp+(mp=r)),hp+=f*(xp+(xp=i)),pp+=f*(bp+(bp=o)),Mr(mp,xp,bp)}function Pr(t){return function(){return t}}function Rr(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Lr(t,n){return[t>Np?t-Ep:t<-Np?t+Ep:t,n]}function qr(t,n,e){return(t%=Ep)?n||e?Rr(Ur(t),Or(n,e)):Ur(t):n||e?Or(n,e):Lr}function Dr(t){return function(n,e){return n+=t,[n>Np?n-Ep:n<-Np?n+Ep:n,e]}}function Ur(t){var n=Dr(t);return n.invert=Dr(-t),n}function Or(t,n){function e(t,n){var e=Lp(n),a=Lp(t)*e,c=Fp(t)*e,s=Fp(n),f=s*r+a*i;return[Rp(c*o-f*u,a*r-s*i),We(f*o+c*u)]}var r=Lp(t),i=Fp(t),o=Lp(n),u=Fp(n);return e.invert=function(t,n){var e=Lp(n),a=Lp(t)*e,c=Fp(t)*e,s=Fp(n),f=s*o-c*u;return[Rp(c*o+s*u,a*r+f*i),We(f*r-a*i)]},e}function Fr(t){function n(n){return n=t(n[0]*Cp,n[1]*Cp),n[0]*=Ap,n[1]*=Ap,n}return t=qr(t[0]*Cp,t[1]*Cp,t.length>2?t[2]*Cp:0),n.invert=function(n){return n=t.invert(n[0]*Cp,n[1]*Cp),n[0]*=Ap,n[1]*=Ap,n},n}function Ir(t,n,e,r,i,o){if(e){var u=Lp(n),a=Fp(n),c=r*e;null==i?(i=n+r*Ep,o=n-c/2):(i=Yr(u,i),o=Yr(u,o),(r>0?i<o:i>o)&&(i+=r*Ep));for(var s,f=i;r>0?f>o:f<o;f-=c)s=or([u,-a*Lp(f),-a*Fp(f)]),t.point(s[0],s[1])}}function Yr(t,n){(n=ur(n))[0]-=t,lr(n);var e=$e(-n[1]);return((-n[2]<0?-e:e)+Ep-Mp)%Ep}function Br(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:Ge,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Hr(t,n){return zp(t[0]-n[0])<Mp&&zp(t[1]-n[1])<Mp}function jr(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Xr(t,n,e,r,i){var o,u,a=[],c=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(Hr(r,u)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(e=new jr(r,t,null,!0)),c.push(e.o=new jr(r,null,e,!1)),a.push(e=new jr(u,t,null,!1)),c.push(e.o=new jr(u,null,e,!0))}}),a.length){for(c.sort(n),Vr(a),Vr(c),o=0,u=c.length;o<u;++o)c[o].e=e=!e;for(var s,f,l=a[0];;){for(var h=l,p=!0;h.v;)if((h=h.n)===l)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=s.length;o<u;++o)i.point((f=s[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((f=s[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Vr(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function $r(t,n){var e=n[0],r=n[1],i=[Fp(e),-Lp(e),0],o=0,u=0;cd.reset();for(var a=0,c=t.length;a<c;++a)if(f=(s=t[a]).length)for(var s,f,l=s[f-1],h=l[0],p=l[1]/2+Sp,d=Fp(p),v=Lp(p),g=0;g<f;++g,h=y,d=x,v=b,l=_){var _=s[g],y=_[0],m=_[1]/2+Sp,x=Fp(m),b=Lp(m),w=y-h,M=w>=0?1:-1,T=M*w,N=T>Np,k=d*x;if(cd.add(Rp(k*M*Fp(T),v*b+k*Lp(T))),o+=N?w+M*Ep:w,N^h>=e^y>=e){var S=cr(ur(l),ur(_));lr(S);var E=cr(i,S);lr(E);var A=(N^w>=0?-1:1)*We(E[2]);(r>A||r===A&&(S[0]||S[1]))&&(u+=N^w>=0?1:-1)}}return(o<-Mp||o<Mp&&cd<-Mp)^1&u}function Wr(t,n,e,r){return function(i){function o(n,e){t(n,e)&&i.point(n,e)}function u(t,n){v.point(t,n)}function a(){x.point=u,v.lineStart()}function c(){x.point=o,v.lineEnd()}function s(t,n){d.push([t,n]),y.point(t,n)}function f(){y.lineStart(),d=[]}function l(){s(d[0][0],d[0][1]),y.lineEnd();var t,n,e,r,o=y.clean(),u=_.result(),a=u.length;if(d.pop(),h.push(d),d=null,a)if(1&o){if(e=u[0],(n=e.length-1)>0){for(m||(i.polygonStart(),m=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else a>1&&2&o&&u.push(u.pop().concat(u.shift())),p.push(u.filter(Zr))}var h,p,d,v=n(i),_=Br(),y=n(_),m=!1,x={point:o,lineStart:a,lineEnd:c,polygonStart:function(){x.point=s,x.lineStart=f,x.lineEnd=l,p=[],h=[]},polygonEnd:function(){x.point=o,x.lineStart=a,x.lineEnd=c,p=g(p);var t=$r(h,r);p.length?(m||(i.polygonStart(),m=!0),Xr(p,Gr,t,e,i)):t&&(m||(i.polygonStart(),m=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),m&&(i.polygonEnd(),m=!1),p=h=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return x}}function Zr(t){return t.length>1}function Gr(t,n){return((t=t.x)[0]<0?t[1]-kp-Mp:kp-t[1])-((n=n.x)[0]<0?n[1]-kp-Mp:kp-n[1])}function Qr(t){function n(t,n){return Lp(t)*Lp(n)>i}function e(t,n,e){var r=[1,0,0],o=cr(ur(t),ur(n)),u=ar(o,o),a=o[0],c=u-a*a;if(!c)return!e&&t;var s=i*u/c,f=-i*a/c,l=cr(r,o),h=fr(r,s);sr(h,fr(o,f));var p=l,d=ar(h,p),v=ar(p,p),g=d*d-v*(ar(h,h)-1);if(!(g<0)){var _=Yp(g),y=fr(p,(-d-_)/v);if(sr(y,h),y=or(y),!e)return y;var m,x=t[0],b=n[0],w=t[1],M=n[1];b<x&&(m=x,x=b,b=m);var T=b-x,N=zp(T-Np)<Mp;if(!N&&M<w&&(m=w,w=M,M=m),N||T<Mp?N?w+M>0^y[1]<(zp(y[0]-x)<Mp?w:M):w<=y[1]&&y[1]<=M:T>Np^(x<=y[0]&&y[0]<=b)){var k=fr(p,(-d+_)/v);return sr(k,h),[y,or(k)]}}}function r(n,e){var r=u?t:Np-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var i=Lp(t),o=6*Cp,u=i>0,a=zp(i)>Mp;return Wr(n,function(t){var i,o,c,s,f;return{lineStart:function(){s=c=!1,f=1},point:function(l,h){var p,d=[l,h],v=n(l,h),g=u?v?0:r(l,h):v?r(l+(l<0?Np:-Np),h):0;if(!i&&(s=c=v)&&t.lineStart(),v!==c&&(!(p=e(i,d))||Hr(i,p)||Hr(d,p))&&(d[0]+=Mp,d[1]+=Mp,v=n(d[0],d[1])),v!==c)f=0,v?(t.lineStart(),p=e(d,i),t.point(p[0],p[1])):(p=e(i,d),t.point(p[0],p[1]),t.lineEnd()),i=p;else if(a&&i&&u^v){var _;g&o||!(_=e(d,i,!0))||(f=0,u?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!v||i&&Hr(i,d)||t.point(d[0],d[1]),i=d,c=v,o=g},lineEnd:function(){c&&t.lineEnd(),i=null},clean:function(){return f|(s&&c)<<1}}},function(n,e,r,i){Ir(i,t,o,r,n,e)},u?[0,-t]:[-Np,t-Np])}function Jr(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,a,s){var f=0,l=0;if(null==i||(f=u(i,a))!==(l=u(o,a))||c(i,o)<0^a>0)do{s.point(0===f||3===f?t:e,f>1?r:n)}while((f=(f+a+4)%4)!==l);else s.point(o[0],o[1])}function u(r,i){return zp(r[0]-t)<Mp?i>0?0:3:zp(r[0]-e)<Mp?i>0?2:1:zp(r[1]-n)<Mp?i>0?1:0:i>0?3:2}function a(t,n){return c(t.x,n.x)}function c(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function c(t,n){i(t,n)&&w.point(t,n)}function s(o,u){var a=i(o,u);if(l&&h.push([o,u]),x)p=o,d=u,v=a,x=!1,a&&(w.lineStart(),w.point(o,u));else if(a&&m)w.point(o,u);else{var c=[_=Math.max(ld,Math.min(fd,_)),y=Math.max(ld,Math.min(fd,y))],s=[o=Math.max(ld,Math.min(fd,o)),u=Math.max(ld,Math.min(fd,u))];!function(t,n,e,r,i,o){var u,a=t[0],c=t[1],s=0,f=1,l=n[0]-a,h=n[1]-c;if(u=e-a,l||!(u>0)){if(u/=l,l<0){if(u<s)return;u<f&&(f=u)}else if(l>0){if(u>f)return;u>s&&(s=u)}if(u=i-a,l||!(u<0)){if(u/=l,l<0){if(u>f)return;u>s&&(s=u)}else if(l>0){if(u<s)return;u<f&&(f=u)}if(u=r-c,h||!(u>0)){if(u/=h,h<0){if(u<s)return;u<f&&(f=u)}else if(h>0){if(u>f)return;u>s&&(s=u)}if(u=o-c,h||!(u<0)){if(u/=h,h<0){if(u>f)return;u>s&&(s=u)}else if(h>0){if(u<s)return;u<f&&(f=u)}return s>0&&(t[0]=a+s*l,t[1]=c+s*h),f<1&&(n[0]=a+f*l,n[1]=c+f*h),!0}}}}}(c,s,t,n,e,r)?a&&(w.lineStart(),w.point(o,u),b=!1):(m||(w.lineStart(),w.point(c[0],c[1])),w.point(s[0],s[1]),a||w.lineEnd(),b=!1)}_=o,y=u,m=a}var f,l,h,p,d,v,_,y,m,x,b,w=u,M=Br(),T={point:c,lineStart:function(){T.point=s,l&&l.push(h=[]),x=!0,m=!1,_=y=NaN},lineEnd:function(){f&&(s(p,d),v&&m&&M.rejoin(),f.push(M.result())),T.point=c,m&&w.lineEnd()},polygonStart:function(){w=M,f=[],l=[],b=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=l.length;e<i;++e)for(var o,u,a=l[e],c=1,s=a.length,f=a[0],h=f[0],p=f[1];c<s;++c)o=h,u=p,h=(f=a[c])[0],p=f[1],u<=r?p>r&&(h-o)*(r-u)>(p-u)*(t-o)&&++n:p<=r&&(h-o)*(r-u)<(p-u)*(t-o)&&--n;return n}(),e=b&&n,i=(f=g(f)).length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),i&&Xr(f,a,n,o,u),u.polygonEnd()),w=u,f=l=h=null}};return T}}function Kr(){pd.point=pd.lineEnd=Ge}function ti(t,n){Qp=t*=Cp,Jp=Fp(n*=Cp),Kp=Lp(n),pd.point=ni}function ni(t,n){t*=Cp;var e=Fp(n*=Cp),r=Lp(n),i=zp(t-Qp),o=Lp(i),u=r*Fp(i),a=Kp*e-Jp*r*o,c=Jp*e+Kp*r*o;hd.add(Rp(Yp(u*u+a*a),c)),Qp=t,Jp=e,Kp=r}function ei(t){return hd.reset(),tr(t,pd),+hd}function ri(t,n){return dd[0]=t,dd[1]=n,ei(vd)}function ii(t,n){return!(!t||!_d.hasOwnProperty(t.type))&&_d[t.type](t,n)}function oi(t,n){return 0===ri(t,n)}function ui(t,n){var e=ri(t[0],t[1]);return ri(t[0],n)+ri(n,t[1])<=e+Mp}function ai(t,n){return!!$r(t.map(ci),si(n))}function ci(t){return(t=t.map(si)).pop(),t}function si(t){return[t[0]*Cp,t[1]*Cp]}function fi(t,n,e){var r=f(t,n-Mp,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function li(t,n,e){var r=f(t,n-Mp,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function hi(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return f(qp(o/_)*_,i,_).map(p).concat(f(qp(s/y)*y,c,y).map(d)).concat(f(qp(r/v)*v,e,v).filter(function(t){return zp(t%_)>Mp}).map(l)).concat(f(qp(a/g)*g,u,g).filter(function(t){return zp(t%y)>Mp}).map(h))}var e,r,i,o,u,a,c,s,l,h,p,d,v=10,g=v,_=90,y=360,m=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[p(o).concat(d(c).slice(1),p(i).reverse().slice(1),d(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.extentMajor(n).extentMinor(n):t.extentMinor()},t.extentMajor=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],c=+n[1][1],o>i&&(n=o,o=i,i=n),s>c&&(n=s,s=c,c=n),t.precision(m)):[[o,s],[i,c]]},t.extentMinor=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],a=+n[0][1],u=+n[1][1],r>e&&(n=r,r=e,e=n),a>u&&(n=a,a=u,u=n),t.precision(m)):[[r,a],[e,u]]},t.step=function(n){return arguments.length?t.stepMajor(n).stepMinor(n):t.stepMinor()},t.stepMajor=function(n){return arguments.length?(_=+n[0],y=+n[1],t):[_,y]},t.stepMinor=function(n){return arguments.length?(v=+n[0],g=+n[1],t):[v,g]},t.precision=function(n){return arguments.length?(m=+n,l=fi(a,u,90),h=li(r,e,m),p=fi(s,c,90),d=li(o,i,m),t):m},t.extentMajor([[-180,-90+Mp],[180,90-Mp]]).extentMinor([[-180,-80-Mp],[180,80+Mp]])}function pi(t){return t}function di(){xd.point=vi}function vi(t,n){xd.point=gi,td=ed=t,nd=rd=n}function gi(t,n){md.add(rd*t-ed*n),ed=t,rd=n}function _i(){gi(td,nd)}function yi(t,n){kd+=t,Sd+=n,++Ed}function mi(){qd.point=xi}function xi(t,n){qd.point=bi,yi(ud=t,ad=n)}function bi(t,n){var e=t-ud,r=n-ad,i=Yp(e*e+r*r);Ad+=i*(ud+t)/2,Cd+=i*(ad+n)/2,zd+=i,yi(ud=t,ad=n)}function wi(){qd.point=yi}function Mi(){qd.point=Ni}function Ti(){ki(id,od)}function Ni(t,n){qd.point=ki,yi(id=ud=t,od=ad=n)}function ki(t,n){var e=t-ud,r=n-ad,i=Yp(e*e+r*r);Ad+=i*(ud+t)/2,Cd+=i*(ad+n)/2,zd+=i,Pd+=(i=ad*t-ud*n)*(ud+t),Rd+=i*(ad+n),Ld+=3*i,yi(ud=t,ad=n)}function Si(t){this._context=t}function Ei(t,n){Bd.point=Ai,Ud=Fd=t,Od=Id=n}function Ai(t,n){Fd-=t,Id-=n,Yd.add(Yp(Fd*Fd+Id*Id)),Fd=t,Id=n}function Ci(){this._string=[]}function zi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Pi(t){return function(n){var e=new Ri;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Ri(){}function Li(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),tr(e,t.stream(Nd)),n(Nd.result()),null!=r&&t.clipExtent(r),t}function qi(t,n,e){return Li(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),u=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,a=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([u,a])},e)}function Di(t,n,e){return qi(t,[[0,0],n],e)}function Ui(t,n,e){return Li(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,u=-i*e[0][1];t.scale(150*i).translate([o,u])},e)}function Oi(t,n,e){return Li(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],u=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,u])},e)}function Fi(t,n){return+n?function(t,n){function e(r,i,o,u,a,c,s,f,l,h,p,d,v,g){var _=s-r,y=f-i,m=_*_+y*y;if(m>4*n&&v--){var x=u+h,b=a+p,w=c+d,M=Yp(x*x+b*b+w*w),T=We(w/=M),N=zp(zp(w)-1)<Mp||zp(o-l)<Mp?(o+l)/2:Rp(b,x),k=t(N,T),S=k[0],E=k[1],A=S-r,C=E-i,z=y*A-_*C;(z*z/m>n||zp((_*A+y*C)/m-.5)>.3||u*h+a*p+c*d<jd)&&(e(r,i,o,u,a,c,S,E,N,x/=M,b/=M,w,v,g),g.point(S,E),e(S,E,N,x,b,w,s,f,l,h,p,d,v,g))}}return function(n){function r(e,r){e=t(e,r),n.point(e[0],e[1])}function i(){_=NaN,w.point=o,n.lineStart()}function o(r,i){var o=ur([r,i]),u=t(r,i);e(_,y,g,m,x,b,_=u[0],y=u[1],g=r,m=o[0],x=o[1],b=o[2],Hd,n),n.point(_,y)}function u(){w.point=r,n.lineEnd()}function a(){i(),w.point=c,w.lineEnd=s}function c(t,n){o(f=t,n),l=_,h=y,p=m,d=x,v=b,w.point=o}function s(){e(_,y,g,m,x,b,l,h,f,p,d,v,Hd,n),w.lineEnd=u,u()}var f,l,h,p,d,v,g,_,y,m,x,b,w={point:r,lineStart:i,lineEnd:u,polygonStart:function(){n.polygonStart(),w.lineStart=a},polygonEnd:function(){n.polygonEnd(),w.lineStart=i}};return w}}(t,n):function(t){return Pi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}function Ii(t){return Yi(function(){return t})()}function Yi(t){function n(t){return t=s(t[0]*Cp,t[1]*Cp),[t[0]*v+u,a-t[1]*v]}function e(t,n){return t=o(t,n),[t[0]*v+u,a-t[1]*v]}function r(){s=Rr(c=qr(x,b,w),o);var t=o(y,m);return u=g-t[0]*v,a=_+t[1]*v,i()}function i(){return p=d=null,n}var o,u,a,c,s,f,l,h,p,d,v=150,g=480,_=250,y=0,m=0,x=0,b=0,w=0,M=null,T=sd,N=null,k=pi,S=.5,E=Fi(e,S);return n.stream=function(t){return p&&d===t?p:p=Xd(function(t){return Pi({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(c)(T(E(k(d=t)))))},n.preclip=function(t){return arguments.length?(T=t,M=void 0,i()):T},n.postclip=function(t){return arguments.length?(k=t,N=f=l=h=null,i()):k},n.clipAngle=function(t){return arguments.length?(T=+t?Qr(M=t*Cp):(M=null,sd),i()):M*Ap},n.clipExtent=function(t){return arguments.length?(k=null==t?(N=f=l=h=null,pi):Jr(N=+t[0][0],f=+t[0][1],l=+t[1][0],h=+t[1][1]),i()):null==N?null:[[N,f],[l,h]]},n.scale=function(t){return arguments.length?(v=+t,r()):v},n.translate=function(t){return arguments.length?(g=+t[0],_=+t[1],r()):[g,_]},n.center=function(t){return arguments.length?(y=t[0]%360*Cp,m=t[1]%360*Cp,r()):[y*Ap,m*Ap]},n.rotate=function(t){return arguments.length?(x=t[0]%360*Cp,b=t[1]%360*Cp,w=t.length>2?t[2]%360*Cp:0,r()):[x*Ap,b*Ap,w*Ap]},n.precision=function(t){return arguments.length?(E=Fi(e,S=t*t),i()):Yp(S)},n.fitExtent=function(t,e){return qi(n,t,e)},n.fitSize=function(t,e){return Di(n,t,e)},n.fitWidth=function(t,e){return Ui(n,t,e)},n.fitHeight=function(t,e){return Oi(n,t,e)},function(){return o=t.apply(this,arguments),n.invert=o.invert&&function(t){return(t=s.invert((t[0]-u)/v,(a-t[1])/v))&&[t[0]*Ap,t[1]*Ap]},r()}}function Bi(t){var n=0,e=Np/3,r=Yi(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Cp,e=t[1]*Cp):[n*Ap,e*Ap]},i}function Hi(t,n){function e(t,n){var e=Yp(o-2*i*Fp(n))/i;return[e*Fp(t*=i),u-e*Lp(t)]}var r=Fp(t),i=(r+Fp(n))/2;if(zp(i)<Mp)return function(t){function n(t,n){return[t*e,Fp(n)/e]}var e=Lp(t);return n.invert=function(t,n){return[t/e,We(n*e)]},n}(t);var o=1+r*(2*i-r),u=Yp(o)/i;return e.invert=function(t,n){var e=u-n;return[Rp(t,zp(e))/i*Ip(e),We((o-(t*t+e*e)*i*i)/(2*i))]},e}function ji(){return Bi(Hi).scale(155.424).center([0,33.6442])}function Xi(){return ji().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Vi(t){return function(n,e){var r=Lp(n),i=Lp(e),o=t(r*i);return[o*i*Fp(n),o*Fp(e)]}}function $i(t){return function(n,e){var r=Yp(n*n+e*e),i=t(r),o=Fp(i),u=Lp(i);return[Rp(n*o,r*u),We(r&&e*o/r)]}}function Wi(t,n){return[t,Up(Bp((kp+n)/2))]}function Zi(t){function n(){var n=Np*a(),u=o(Fr(o.rotate()).invert([0,0]));return s(null==f?[[u[0]-n,u[1]-n],[u[0]+n,u[1]+n]]:t===Wi?[[Math.max(u[0]-n,f),e],[Math.min(u[0]+n,r),i]]:[[f,Math.max(u[1]-n,e)],[r,Math.min(u[1]+n,i)]])}var e,r,i,o=Ii(t),u=o.center,a=o.scale,c=o.translate,s=o.clipExtent,f=null;return o.scale=function(t){return arguments.length?(a(t),n()):a()},o.translate=function(t){return arguments.length?(c(t),n()):c()},o.center=function(t){return arguments.length?(u(t),n()):u()},o.clipExtent=function(t){return arguments.length?(null==t?f=e=r=i=null:(f=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),n()):null==f?null:[[f,e],[r,i]]},n()}function Gi(t){return Bp((kp+t)/2)}function Qi(t,n){function e(t,n){o>0?n<-kp+Mp&&(n=-kp+Mp):n>kp-Mp&&(n=kp-Mp);var e=o/Op(Gi(n),i);return[e*Fp(i*t),o-e*Lp(i*t)]}var r=Lp(t),i=t===n?Fp(t):Up(r/Lp(n))/Up(Gi(n)/Gi(t)),o=r*Op(Gi(t),i)/i;return i?(e.invert=function(t,n){var e=o-n,r=Ip(i)*Yp(t*t+e*e);return[Rp(t,zp(e))/i*Ip(e),2*Pp(Op(o/r,1/i))-kp]},e):Wi}function Ji(t,n){return[t,n]}function Ki(t,n){function e(t,n){var e=o-n,r=i*t;return[e*Fp(r),o-e*Lp(r)]}var r=Lp(t),i=t===n?Fp(t):(r-Lp(n))/(n-t),o=r/i+t;return zp(i)<Mp?Ji:(e.invert=function(t,n){var e=o-n;return[Rp(t,zp(e))/i*Ip(e),o-Ip(i)*Yp(t*t+e*e)]},e)}function to(t,n){var e=Lp(n),r=Lp(t)*e;return[e*Fp(t)/r,Fp(n)/r]}function no(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?pi:Pi({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}function eo(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function ro(t,n){return[Lp(n)*Fp(t),Fp(n)]}function io(t,n){var e=Lp(n),r=1+Lp(t)*e;return[e*Fp(t)/r,Fp(n)/r]}function oo(t,n){return[Up(Bp((kp+n)/2)),-t]}function uo(t,n){return t.parent===n.parent?1:2}function ao(t,n){return t+n.x}function co(t,n){return Math.max(t,n.y)}function so(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function fo(t,n){var e,r,i,o,u,a=new vo(t),c=+t.value&&(a.value=t.value),s=[a];for(null==n&&(n=lo);e=s.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(u=i.length))for(e.children=new Array(u),o=u-1;o>=0;--o)s.push(r=e.children[o]=new vo(i[o])),r.parent=e,r.depth=e.depth+1;return a.eachBefore(po)}function lo(t){return t.children}function ho(t){t.data=t.data.data}function po(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function vo(t){this.data=t,this.depth=this.height=0,this.parent=null}function go(t){for(var n,e,r=0,i=(t=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}(Wd.call(t))).length,o=[];r<i;)n=t[r],e&&yo(e,n)?++r:(e=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return xo(t[0],t[1]);case 3:return bo(t[0],t[1],t[2])}}(o=function(t,n){var e,r;if(mo(n,t))return[n];for(e=0;e<t.length;++e)if(_o(n,t[e])&&mo(xo(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(_o(xo(t[e],t[r]),n)&&_o(xo(t[e],n),t[r])&&_o(xo(t[r],n),t[e])&&mo(bo(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}(o,n)),r=0);return e}function _o(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function yo(t,n){var e=t.r-n.r+1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function mo(t,n){for(var e=0;e<n.length;++e)if(!yo(t,n[e]))return!1;return!0}function xo(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,u=n.y,a=n.r,c=o-e,s=u-r,f=a-i,l=Math.sqrt(c*c+s*s);return{x:(e+o+c/l*f)/2,y:(r+u+s/l*f)/2,r:(l+i+a)/2}}function bo(t,n,e){var r=t.x,i=t.y,o=t.r,u=n.x,a=n.y,c=n.r,s=e.x,f=e.y,l=e.r,h=r-u,p=r-s,d=i-a,v=i-f,g=c-o,_=l-o,y=r*r+i*i-o*o,m=y-u*u-a*a+c*c,x=y-s*s-f*f+l*l,b=p*d-h*v,w=(d*x-v*m)/(2*b)-r,M=(v*g-d*_)/b,T=(p*m-h*x)/(2*b)-i,N=(h*_-p*g)/b,k=M*M+N*N-1,S=2*(o+w*M+T*N),E=w*w+T*T-o*o,A=-(k?(S+Math.sqrt(S*S-4*k*E))/(2*k):E/S);return{x:r+w+M*A,y:i+T+N*A,r:A}}function wo(t,n,e){var r=t.x,i=t.y,o=n.r+e.r,u=t.r+e.r,a=n.x-r,c=n.y-i,s=a*a+c*c;if(s){var f=.5+((u*=u)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(u+s)-(u-=s)*u-o*o))/(2*s);e.x=r+f*a+l*c,e.y=i+f*c-l*a}else e.x=r+u,e.y=i}function Mo(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return i*i-1e-6>e*e+r*r}function To(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function No(t){this._=t,this.next=null,this.previous=null}function ko(t){if(!(i=t.length))return 0;var n,e,r,i,o,u,a,c,s,f,l;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;wo(e,n,r=t[2]),n=new No(n),e=new No(e),r=new No(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(a=3;a<i;++a){wo(n._,e._,r=t[a]),r=new No(r),c=e.next,s=n.previous,f=e._.r,l=n._.r;do{if(f<=l){if(Mo(c._,r._)){e=c,n.next=e,e.previous=n,--a;continue t}f+=c._.r,c=c.next}else{if(Mo(s._,r._)){(n=s).next=e,e.previous=n,--a;continue t}l+=s._.r,s=s.previous}}while(c!==s.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=To(n);(r=r.next)!==e;)(u=To(r))<o&&(n=r,o=u);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=go(n),a=0;a<i;++a)n=t[a],n.x-=r.x,n.y-=r.y;return r.r}function So(t){if("function"!=typeof t)throw new Error;return t}function Eo(){return 0}function Ao(t){return function(){return t}}function Co(t){return Math.sqrt(t.value)}function zo(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Po(t,n){return function(e){if(r=e.children){var r,i,o,u=r.length,a=t(e)*n||0;if(a)for(i=0;i<u;++i)r[i].r+=a;if(o=ko(r),a)for(i=0;i<u;++i)r[i].r-=a;e.r=o+a}}}function Ro(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function Lo(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function qo(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(r-n)/t.value;++a<c;)(o=u[a]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s}function Do(t){return t.id}function Uo(t){return t.parentId}function Oo(t,n){return t.parent===n.parent?1:2}function Fo(t){var n=t.children;return n?n[0]:t.t}function Io(t){var n=t.children;return n?n[n.length-1]:t.t}function Yo(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Bo(t,n,e){return t.a.parent===n.parent?t.a:e}function Ho(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function jo(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(i-e)/t.value;++a<c;)(o=u[a]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s}function Xo(t,n,e,r,i,o){for(var u,a,c,s,f,l,h,p,d,v,g,_=[],y=n.children,m=0,x=0,b=y.length,w=n.value;m<b;){c=i-e,s=o-r;do{f=y[x++].value}while(!f&&x<b);for(l=h=f,g=f*f*(v=Math.max(s/c,c/s)/(w*t)),d=Math.max(h/g,g/l);x<b;++x){if(f+=a=y[x].value,a<l&&(l=a),a>h&&(h=a),g=f*f*v,(p=Math.max(h/g,g/l))>d){f-=a;break}d=p}_.push(u={value:f,dice:c<s,children:y.slice(m,x)}),u.dice?qo(u,e,r,i,w?r+=s*f/w:o):jo(u,e,r,w?e+=c*f/w:i,o),w-=f,m=x}return _}function Vo(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function $o(t,n){return t[0]-n[0]||t[1]-n[1]}function Wo(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;++i){for(;r>1&&Vo(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function Zo(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Go(t){if(!t._start)try{(function(t){for(;t._start=t._waiting&&t._active<t._size;){var n=t._ended+t._active,e=t._tasks[n],r=e.length-1,i=e[r];e[r]=function(t,n){return function(e,r){t._tasks[n]&&(--t._active,++t._ended,t._tasks[n]=null,null==t._error&&(null!=e?Qo(t,e):(t._data[n]=r,t._waiting?Go(t):Jo(t))))}}(t,n),--t._waiting,++t._active,e=i.apply(null,e),t._tasks[n]&&(t._tasks[n]=e||ev)}})(t)}catch(n){if(t._tasks[t._ended+t._active-1])Qo(t,n);else if(!t._data)throw n}}function Qo(t,n){var e,r=t._tasks.length;for(t._error=n,t._data=void 0,t._waiting=NaN;--r>=0;)if((e=t._tasks[r])&&(t._tasks[r]=null,e.abort))try{e.abort()}catch(n){}t._active=NaN,Jo(t)}function Jo(t){if(!t._active&&t._call){var n=t._data;t._data=void 0,t._call(t._error,n)}}function Ko(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new Zo(t)}function tu(){return Math.random()}function nu(t,n){function e(t){var n,e=s.status;if(!e&&function(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}(s)||e>=200&&e<300||304===e){if(o)try{n=o.call(r,s)}catch(t){return void a.call("error",r,t)}else n=s;a.call("load",r,n)}else a.call("error",r,t)}var r,i,o,u,a=N("beforesend","progress","load","error"),c=se(),s=new XMLHttpRequest,f=null,l=null,h=0;if("undefined"==typeof XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=s.ontimeout=e:s.onreadystatechange=function(t){s.readyState>3&&e(t)},s.onprogress=function(t){a.call("progress",r,t)},r={header:function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?c.get(t):(null==n?c.remove(t):c.set(t,n+""),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",r):i},responseType:function(t){return arguments.length?(u=t,r):u},timeout:function(t){return arguments.length?(h=+t,r):h},user:function(t){return arguments.length<1?f:(f=null==t?null:t+"",r)},password:function(t){return arguments.length<1?l:(l=null==t?null:t+"",r)},response:function(t){return o=t,r},get:function(t,n){return r.send("GET",t,n)},post:function(t,n){return r.send("POST",t,n)},send:function(n,e,o){return s.open(n,t,!0,f,l),null==i||c.has("accept")||c.set("accept",i+",*/*"),s.setRequestHeader&&c.each(function(t,n){s.setRequestHeader(n,t)}),null!=i&&s.overrideMimeType&&s.overrideMimeType(i),null!=u&&(s.responseType=u),h>0&&(s.timeout=h),null==o&&"function"==typeof e&&(o=e,e=null),null!=o&&1===o.length&&(o=function(t){return function(n,e){t(null==n?e:null)}}(o)),null!=o&&r.on("error",o).on("load",function(t){o(null,t)}),a.call("beforesend",r,s),s.send(null==e?null:e),r},abort:function(){return s.abort(),r},on:function(){var t=a.on.apply(a,arguments);return t===a?r:t}},null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return r.get(n)}return r}function eu(t,n){return function(e,r){var i=nu(e).mimeType(t).response(n);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}function ru(t,n){return function(e,r,i){arguments.length<3&&(i=r,r=null);var o=nu(e).mimeType(t);return o.row=function(t){return arguments.length?o.response(function(t,n){return function(e){return t(e.responseText,n)}}(n,r=t)):r},o.row(r),i?o.get(i):o}}function iu(t){function n(n){var o=n+"",u=e.get(o);if(!u){if(i!==yv)return i;e.set(o,u=r.push(n))}return t[(u-1)%t.length]}var e=se(),r=[],i=yv;return t=null==t?[]:_v.call(t),n.domain=function(t){if(!arguments.length)return r.slice();r=[],e=se();for(var i,o,u=-1,a=t.length;++u<a;)e.has(o=(i=t[u])+"")||e.set(o,r.push(i));return n},n.range=function(e){return arguments.length?(t=_v.call(e),n):t.slice()},n.unknown=function(t){return arguments.length?(i=t,n):i},n.copy=function(){return iu().domain(r).range(t).unknown(i)},n}function ou(){function t(){var t=i().length,r=u[1]<u[0],h=u[r-0],p=u[1-r];n=(p-h)/Math.max(1,t-c+2*s),a&&(n=Math.floor(n)),h+=(p-h-n*(t-c))*l,e=n*(1-c),a&&(h=Math.round(h),e=Math.round(e));var d=f(t).map(function(t){return h+n*t});return o(r?d.reverse():d)}var n,e,r=iu().unknown(void 0),i=r.domain,o=r.range,u=[0,1],a=!1,c=0,s=0,l=.5;return delete r.unknown,r.domain=function(n){return arguments.length?(i(n),t()):i()},r.range=function(n){return arguments.length?(u=[+n[0],+n[1]],t()):u.slice()},r.rangeRound=function(n){return u=[+n[0],+n[1]],a=!0,t()},r.bandwidth=function(){return e},r.step=function(){return n},r.round=function(n){return arguments.length?(a=!!n,t()):a},r.padding=function(n){return arguments.length?(c=s=Math.max(0,Math.min(1,n)),t()):c},r.paddingInner=function(n){return arguments.length?(c=Math.max(0,Math.min(1,n)),t()):c},r.paddingOuter=function(n){return arguments.length?(s=Math.max(0,Math.min(1,n)),t()):s},r.align=function(n){return arguments.length?(l=Math.max(0,Math.min(1,n)),t()):l},r.copy=function(){return ou().domain(i()).range(u).round(a).paddingInner(c).paddingOuter(s).align(l)},t()}function uu(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return uu(n())},t}function au(t){return function(){return t}}function cu(t){return+t}function su(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:au(n)}function fu(t,n,e,r){var i=t[0],o=t[1],u=n[0],a=n[1];return o<i?(i=e(o,i),u=r(a,u)):(i=e(i,o),u=r(u,a)),function(t){return u(i(t))}}function lu(t,n,e,r){var i=Math.min(t.length,n.length)-1,o=new Array(i),u=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<i;)o[a]=e(t[a],t[a+1]),u[a]=r(n[a],n[a+1]);return function(n){var e=Os(t,n,1,i)-1;return u[e](o[e](n))}}function hu(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function pu(t,n){function e(){return i=Math.min(a.length,c.length)>2?lu:fu,o=u=null,r}function r(n){return(o||(o=i(a,c,f?function(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=n?0:t>=e?1:r(t)}}}(t):t,s)))(+n)}var i,o,u,a=mv,c=mv,s=fn,f=!1;return r.invert=function(t){return(u||(u=i(c,a,su,f?function(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=0?n:t>=1?e:r(t)}}}(n):n)))(+t)},r.domain=function(t){return arguments.length?(a=gv.call(t,cu),e()):a.slice()},r.range=function(t){return arguments.length?(c=_v.call(t),e()):c.slice()},r.rangeRound=function(t){return c=_v.call(t),s=ln,e()},r.clamp=function(t){return arguments.length?(f=!!t,e()):f},r.interpolate=function(t){return arguments.length?(s=t,e()):s},e()}function du(n){var e=n.domain;return n.ticks=function(t){var n=e();return l(n[0],n[n.length-1],null==t?10:t)},n.tickFormat=function(n,r){return function(n,e,r){var i,o=n[0],u=n[n.length-1],a=p(o,u,null==e?10:e);switch((r=De(null==r?",f":r)).type){case"s":var c=Math.max(Math.abs(o),Math.abs(u));return null!=r.precision||isNaN(i=Be(a,c))||(r.precision=i),t.formatPrefix(r,c);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=He(a,Math.max(Math.abs(o),Math.abs(u))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Ye(a))||(r.precision=i-2*("%"===r.type))}return t.format(r)}(e(),n,r)},n.nice=function(t){null==t&&(t=10);var r,i=e(),o=0,u=i.length-1,a=i[o],c=i[u];return c<a&&(r=a,a=c,c=r,r=o,o=u,u=r),(r=h(a,c,t))>0?r=h(a=Math.floor(a/r)*r,c=Math.ceil(c/r)*r,t):r<0&&(r=h(a=Math.ceil(a*r)/r,c=Math.floor(c*r)/r,t)),r>0?(i[o]=Math.floor(a/r)*r,i[u]=Math.ceil(c/r)*r,e(i)):r<0&&(i[o]=Math.ceil(a*r)/r,i[u]=Math.floor(c*r)/r,e(i)),n},n}function vu(){var t=pu(su,an);return t.copy=function(){return hu(t,vu())},du(t)}function gu(){function t(t){return+t}var n=[0,1];return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=gv.call(e,cu),t):n.slice()},t.copy=function(){return gu().domain(n)},du(t)}function _u(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],u=t[i];return u<o&&(e=r,r=i,i=e,e=o,o=u,u=e),t[r]=n.floor(o),t[i]=n.ceil(u),t}function yu(t,n){return(n=Math.log(n/t))?function(e){return Math.log(e/t)/n}:au(n)}function mu(t,n){return t<0?function(e){return-Math.pow(-n,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(n,e)*Math.pow(t,1-e)}}function xu(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bu(t){return 10===t?xu:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}function wu(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}function Mu(t){return function(n){return-t(-n)}}function Tu(){function n(){return o=wu(i),u=bu(i),r()[0]<0&&(o=Mu(o),u=Mu(u)),e}var e=pu(yu,mu).domain([1,10]),r=e.domain,i=10,o=wu(10),u=bu(10);return e.base=function(t){return arguments.length?(i=+t,n()):i},e.domain=function(t){return arguments.length?(r(t),n()):r()},e.ticks=function(t){var n,e=r(),a=e[0],c=e[e.length-1];(n=c<a)&&(p=a,a=c,c=p);var s,f,h,p=o(a),d=o(c),v=null==t?10:+t,g=[];if(!(i%1)&&d-p<v){if(p=Math.round(p)-1,d=Math.round(d)+1,a>0){for(;p<d;++p)for(f=1,s=u(p);f<i;++f)if(!((h=s*f)<a)){if(h>c)break;g.push(h)}}else for(;p<d;++p)for(f=i-1,s=u(p);f>=1;--f)if(!((h=s*f)<a)){if(h>c)break;g.push(h)}}else g=l(p,d,Math.min(d-p,v)).map(u);return n?g.reverse():g},e.tickFormat=function(n,r){if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=t.format(r)),n===1/0)return r;null==n&&(n=10);var a=Math.max(1,i*n/e.ticks().length);return function(t){var n=t/u(Math.round(o(t)));return n*i<i-.5&&(n*=i),n<=a?r(t):""}},e.nice=function(){return r(_u(r(),{floor:function(t){return u(Math.floor(o(t)))},ceil:function(t){return u(Math.ceil(o(t)))}}))},e.copy=function(){return hu(e,Tu().base(i))},e}function Nu(t,n){return t<0?-Math.pow(-t,n):Math.pow(t,n)}function ku(){var t=1,n=pu(function(n,e){return(e=Nu(e,t)-(n=Nu(n,t)))?function(r){return(Nu(r,t)-n)/e}:au(e)},function(n,e){return e=Nu(e,t)-(n=Nu(n,t)),function(r){return Nu(n+e*r,1/t)}}),e=n.domain;return n.exponent=function(n){return arguments.length?(t=+n,e(e())):t},n.copy=function(){return hu(n,ku().exponent(t))},du(n)}function Su(){function t(){var t=0,n=Math.max(1,i.length);for(o=new Array(n-1);++t<n;)o[t-1]=v(r,t/n);return e}function e(t){if(!isNaN(t=+t))return i[Os(o,t)]}var r=[],i=[],o=[];return e.invertExtent=function(t){var n=i.indexOf(t);return n<0?[NaN,NaN]:[n>0?o[n-1]:r[0],n<o.length?o[n]:r[r.length-1]]},e.domain=function(e){if(!arguments.length)return r.slice();r=[];for(var i,o=0,u=e.length;o<u;++o)null==(i=e[o])||isNaN(i=+i)||r.push(i);return r.sort(n),t()},e.range=function(n){return arguments.length?(i=_v.call(n),t()):i.slice()},e.quantiles=function(){return o.slice()},e.copy=function(){return Su().domain(r).range(i)},e}function Eu(){function t(t){if(t<=t)return u[Os(o,t,0,i)]}function n(){var n=-1;for(o=new Array(i);++n<i;)o[n]=((n+1)*r-(n-i)*e)/(i+1);return t}var e=0,r=1,i=1,o=[.5],u=[0,1];return t.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],n()):[e,r]},t.range=function(t){return arguments.length?(i=(u=_v.call(t)).length-1,n()):u.slice()},t.invertExtent=function(t){var n=u.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,o[0]]:n>=i?[o[i-1],r]:[o[n-1],o[n]]},t.copy=function(){return Eu().domain([e,r]).range(u)},du(t)}function Au(){function t(t){if(t<=t)return e[Os(n,t,0,r)]}var n=[.5],e=[0,1],r=1;return t.domain=function(i){return arguments.length?(n=_v.call(i),r=Math.min(n.length,e.length-1),t):n.slice()},t.range=function(i){return arguments.length?(e=_v.call(i),r=Math.min(n.length,e.length-1),t):e.slice()},t.invertExtent=function(t){var r=e.indexOf(t);return[n[r-1],n[r]]},t.copy=function(){return Au().domain(n).range(e)},t}function Cu(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var u,a=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return a;do{a.push(u=new Date(+e)),n(e,o),t(e)}while(u<e&&e<r);return a},i.filter=function(e){return Cu(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return xv.setTime(+n),bv.setTime(+r),t(xv),t(bv),Math.floor(e(xv,bv))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}function zu(t){return Cu(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Tv)/Nv})}function Pu(t){return Cu(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/Nv})}function Ru(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Lu(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function qu(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Du(t){function n(t,n){return function(e){var r,i,o,u=[],a=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++a<s;)37===t.charCodeAt(a)&&(u.push(t.slice(c,a)),null!=(i=Mg[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),u.push(r),c=a+1);return u.push(t.slice(c,a)),u.join("")}}function e(t,n){return function(e){var i,o,u=qu(1900);if(r(u,t,e+="",0)!=e.length)return null;if("Q"in u)return new Date(u.Q);if("p"in u&&(u.H=u.H%12+12*u.p),"V"in u){if(u.V<1||u.V>53)return null;"w"in u||(u.w=1),"Z"in u?(i=(o=(i=Lu(qu(u.y))).getUTCDay())>4||0===o?og.ceil(i):og(i),i=eg.offset(i,7*(u.V-1)),u.y=i.getUTCFullYear(),u.m=i.getUTCMonth(),u.d=i.getUTCDate()+(u.w+6)%7):(i=(o=(i=n(qu(u.y))).getDay())>4||0===o?qv.ceil(i):qv(i),i=Pv.offset(i,7*(u.V-1)),u.y=i.getFullYear(),u.m=i.getMonth(),u.d=i.getDate()+(u.w+6)%7)}else("W"in u||"U"in u)&&("w"in u||(u.w="u"in u?u.u%7:"W"in u?1:0),o="Z"in u?Lu(qu(u.y)).getUTCDay():n(qu(u.y)).getDay(),u.m=0,u.d="W"in u?(u.w+6)%7+7*u.W-(o+5)%7:u.w+7*u.U-(o+6)%7);return"Z"in u?(u.H+=u.Z/100|0,u.M+=u.Z%100,Lu(u)):n(u)}}function r(t,n,e,r){for(var i,o,u=0,a=n.length,c=e.length;u<a;){if(r>=c)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=T[i in Mg?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}var i=t.dateTime,o=t.date,u=t.time,a=t.periods,c=t.days,s=t.shortDays,f=t.months,l=t.shortMonths,h=Fu(a),p=Iu(a),d=Fu(c),v=Iu(c),g=Fu(s),_=Iu(s),y=Fu(f),m=Iu(f),x=Fu(l),b=Iu(l),w={a:function(t){return s[t.getDay()]},A:function(t){return c[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return f[t.getMonth()]},c:null,d:ua,e:ua,f:la,H:aa,I:ca,j:sa,L:fa,m:ha,M:pa,p:function(t){return a[+(t.getHours()>=12)]},Q:Ya,s:Ba,S:da,u:va,U:ga,V:_a,w:ya,W:ma,x:null,X:null,y:xa,Y:ba,Z:wa,"%":Ia},M={a:function(t){return s[t.getUTCDay()]},A:function(t){return c[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return f[t.getUTCMonth()]},c:null,d:Ma,e:Ma,f:Ea,H:Ta,I:Na,j:ka,L:Sa,m:Aa,M:Ca,p:function(t){return a[+(t.getUTCHours()>=12)]},Q:Ya,s:Ba,S:za,u:Pa,U:Ra,V:La,w:qa,W:Da,x:null,X:null,y:Ua,Y:Oa,Z:Fa,"%":Ia},T={a:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.w=_[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=v[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=x.exec(n.slice(e));return r?(t.m=b[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=y.exec(n.slice(e));return r?(t.m=m[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,n,e){return r(t,i,n,e)},d:Gu,e:Gu,f:ea,H:Ju,I:Ju,j:Qu,L:na,m:Zu,M:Ku,p:function(t,n,e){var r=h.exec(n.slice(e));return r?(t.p=p[r[0].toLowerCase()],e+r[0].length):-1},Q:ia,s:oa,S:ta,u:Bu,U:Hu,V:ju,w:Yu,W:Xu,x:function(t,n,e){return r(t,o,n,e)},X:function(t,n,e){return r(t,u,n,e)},y:$u,Y:Vu,Z:Wu,"%":ra};return w.x=n(o,w),w.X=n(u,w),w.c=n(i,w),M.x=n(o,M),M.X=n(u,M),M.c=n(i,M),{format:function(t){var e=n(t+="",w);return e.toString=function(){return t},e},parse:function(t){var n=e(t+="",Ru);return n.toString=function(){return t},n},utcFormat:function(t){var e=n(t+="",M);return e.toString=function(){return t},e},utcParse:function(t){var n=e(t,Lu);return n.toString=function(){return t},n}}}function Uu(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Ou(t){return t.replace(kg,"\\$&")}function Fu(t){return new RegExp("^(?:"+t.map(Ou).join("|")+")","i")}function Iu(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function Yu(t,n,e){var r=Tg.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Bu(t,n,e){var r=Tg.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Hu(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function ju(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Xu(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Vu(t,n,e){var r=Tg.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function $u(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Wu(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Zu(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Gu(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Qu(t,n,e){var r=Tg.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Ju(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function Ku(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ta(t,n,e){var r=Tg.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function na(t,n,e){var r=Tg.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ea(t,n,e){var r=Tg.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function ra(t,n,e){var r=Ng.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function ia(t,n,e){var r=Tg.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function oa(t,n,e){var r=Tg.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function ua(t,n){return Uu(t.getDate(),n,2)}function aa(t,n){return Uu(t.getHours(),n,2)}function ca(t,n){return Uu(t.getHours()%12||12,n,2)}function sa(t,n){return Uu(1+Pv.count(Gv(t),t),n,3)}function fa(t,n){return Uu(t.getMilliseconds(),n,3)}function la(t,n){return fa(t,n)+"000"}function ha(t,n){return Uu(t.getMonth()+1,n,2)}function pa(t,n){return Uu(t.getMinutes(),n,2)}function da(t,n){return Uu(t.getSeconds(),n,2)}function va(t){var n=t.getDay();return 0===n?7:n}function ga(t,n){return Uu(Lv.count(Gv(t),t),n,2)}function _a(t,n){var e=t.getDay();return t=e>=4||0===e?Ov(t):Ov.ceil(t),Uu(Ov.count(Gv(t),t)+(4===Gv(t).getDay()),n,2)}function ya(t){return t.getDay()}function ma(t,n){return Uu(qv.count(Gv(t),t),n,2)}function xa(t,n){return Uu(t.getFullYear()%100,n,2)}function ba(t,n){return Uu(t.getFullYear()%1e4,n,4)}function wa(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Uu(n/60|0,"0",2)+Uu(n%60,"0",2)}function Ma(t,n){return Uu(t.getUTCDate(),n,2)}function Ta(t,n){return Uu(t.getUTCHours(),n,2)}function Na(t,n){return Uu(t.getUTCHours()%12||12,n,2)}function ka(t,n){return Uu(1+eg.count(xg(t),t),n,3)}function Sa(t,n){return Uu(t.getUTCMilliseconds(),n,3)}function Ea(t,n){return Sa(t,n)+"000"}function Aa(t,n){return Uu(t.getUTCMonth()+1,n,2)}function Ca(t,n){return Uu(t.getUTCMinutes(),n,2)}function za(t,n){return Uu(t.getUTCSeconds(),n,2)}function Pa(t){var n=t.getUTCDay();return 0===n?7:n}function Ra(t,n){return Uu(ig.count(xg(t),t),n,2)}function La(t,n){var e=t.getUTCDay();return t=e>=4||0===e?cg(t):cg.ceil(t),Uu(cg.count(xg(t),t)+(4===xg(t).getUTCDay()),n,2)}function qa(t){return t.getUTCDay()}function Da(t,n){return Uu(og.count(xg(t),t),n,2)}function Ua(t,n){return Uu(t.getUTCFullYear()%100,n,2)}function Oa(t,n){return Uu(t.getUTCFullYear()%1e4,n,4)}function Fa(){return"+0000"}function Ia(){return"%"}function Ya(t){return+t}function Ba(t){return Math.floor(+t/1e3)}function Ha(n){return bg=Du(n),t.timeFormat=bg.format,t.timeParse=bg.parse,t.utcFormat=bg.utcFormat,t.utcParse=bg.utcParse,bg}function ja(t){return new Date(t)}function Xa(t){return t instanceof Date?+t:+new Date(+t)}function Va(t,n,r,i,o,u,a,c,s){function f(e){return(a(e)<e?g:u(e)<e?_:o(e)<e?y:i(e)<e?m:n(e)<e?r(e)<e?x:b:t(e)<e?w:M)(e)}function l(n,r,i,o){if(null==n&&(n=10),"number"==typeof n){var u=Math.abs(i-r)/n,a=e(function(t){return t[2]}).right(T,u);a===T.length?(o=p(r/Dg,i/Dg,n),n=t):a?(o=(a=T[u/T[a-1][2]<T[a][2]/u?a-1:a])[1],n=a[0]):(o=Math.max(p(r,i,n),1),n=c)}return null==o?n:n.every(o)}var h=pu(su,an),d=h.invert,v=h.domain,g=s(".%L"),_=s(":%S"),y=s("%I:%M"),m=s("%I %p"),x=s("%a %d"),b=s("%b %d"),w=s("%B"),M=s("%Y"),T=[[a,1,Cg],[a,5,5*Cg],[a,15,15*Cg],[a,30,30*Cg],[u,1,zg],[u,5,5*zg],[u,15,15*zg],[u,30,30*zg],[o,1,Pg],[o,3,3*Pg],[o,6,6*Pg],[o,12,12*Pg],[i,1,Rg],[i,2,2*Rg],[r,1,Lg],[n,1,qg],[n,3,3*qg],[t,1,Dg]];return h.invert=function(t){return new Date(d(t))},h.domain=function(t){return arguments.length?v(gv.call(t,Xa)):v().map(ja)},h.ticks=function(t,n){var e,r=v(),i=r[0],o=r[r.length-1],u=o<i;return u&&(e=i,i=o,o=e),e=l(t,i,o,n),e=e?e.range(i,o+1):[],u?e.reverse():e},h.tickFormat=function(t,n){return null==n?f:s(n)},h.nice=function(t,n){var e=v();return(t=l(t,e[0],e[e.length-1],n))?v(_u(e,t)):h},h.copy=function(){return hu(h,Va(t,n,r,i,o,u,a,c,s))},h}function $a(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}function Wa(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}function Za(t){function n(n){var o=(n-e)/(r-e);return t(i?Math.max(0,Math.min(1,o)):o)}var e=0,r=1,i=!1;return n.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.clamp=function(t){return arguments.length?(i=!!t,n):i},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Za(t).domain([e,r]).clamp(i)},du(n)}function Ga(t){return function(){return t}}function Qa(t){return t>=1?i_:t<=-1?-i_:Math.asin(t)}function Ja(t){return t.innerRadius}function Ka(t){return t.outerRadius}function tc(t){return t.startAngle}function nc(t){return t.endAngle}function ec(t){return t&&t.padAngle}function rc(t,n,e,r,i,o,u){var a=t-e,c=n-r,s=(u?o:-o)/n_(a*a+c*c),f=s*c,l=-s*a,h=t+f,p=n+l,d=e+f,v=r+l,g=(h+d)/2,_=(p+v)/2,y=d-h,m=v-p,x=y*y+m*m,b=i-o,w=h*v-d*p,M=(m<0?-1:1)*n_(Jg(0,b*b*x-w*w)),T=(w*m-y*M)/x,N=(-w*y-m*M)/x,k=(w*m+y*M)/x,S=(-w*y+m*M)/x,E=T-g,A=N-_,C=k-g,z=S-_;return E*E+A*A>C*C+z*z&&(T=k,N=S),{cx:T,cy:N,x01:-f,y01:-l,x11:T*(i/b-1),y11:N*(i/b-1)}}function ic(t){this._context=t}function oc(t){return new ic(t)}function uc(t){return t[0]}function ac(t){return t[1]}function cc(){function t(t){var a,c,s,f=t.length,l=!1;for(null==i&&(u=o(s=ee())),a=0;a<=f;++a)!(a<f&&r(c=t[a],a,t))===l&&((l=!l)?u.lineStart():u.lineEnd()),l&&u.point(+n(c,a,t),+e(c,a,t));if(s)return u=null,s+""||null}var n=uc,e=ac,r=Ga(!0),i=null,o=oc,u=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Ga(+e),t):n},t.y=function(n){return arguments.length?(e="function"==typeof n?n:Ga(+n),t):e},t.defined=function(n){return arguments.length?(r="function"==typeof n?n:Ga(!!n),t):r},t.curve=function(n){return arguments.length?(o=n,null!=i&&(u=o(i)),t):o},t.context=function(n){return arguments.length?(null==n?i=u=null:u=o(i=n),t):i},t}function sc(){function t(t){var n,f,l,h,p,d=t.length,v=!1,g=new Array(d),_=new Array(d);for(null==a&&(s=c(p=ee())),n=0;n<=d;++n){if(!(n<d&&u(h=t[n],n,t))===v)if(v=!v)f=n,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),l=n-1;l>=f;--l)s.point(g[l],_[l]);s.lineEnd(),s.areaEnd()}v&&(g[n]=+e(h,n,t),_[n]=+i(h,n,t),s.point(r?+r(h,n,t):g[n],o?+o(h,n,t):_[n]))}if(p)return s=null,p+""||null}function n(){return cc().defined(u).curve(c).context(a)}var e=uc,r=null,i=Ga(0),o=ac,u=Ga(!0),a=null,c=oc,s=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Ga(+n),r=null,t):e},t.x0=function(n){return arguments.length?(e="function"==typeof n?n:Ga(+n),t):e},t.x1=function(n){return arguments.length?(r=null==n?null:"function"==typeof n?n:Ga(+n),t):r},t.y=function(n){return arguments.length?(i="function"==typeof n?n:Ga(+n),o=null,t):i},t.y0=function(n){return arguments.length?(i="function"==typeof n?n:Ga(+n),t):i},t.y1=function(n){return arguments.length?(o=null==n?null:"function"==typeof n?n:Ga(+n),t):o},t.lineX0=t.lineY0=function(){return n().x(e).y(i)},t.lineY1=function(){return n().x(e).y(o)},t.lineX1=function(){return n().x(r).y(i)},t.defined=function(n){return arguments.length?(u="function"==typeof n?n:Ga(!!n),t):u},t.curve=function(n){return arguments.length?(c=n,null!=a&&(s=c(a)),t):c},t.context=function(n){return arguments.length?(null==n?a=s=null:s=c(a=n),t):a},t}function fc(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function lc(t){return t}function hc(t){this._curve=t}function pc(t){function n(n){return new hc(t(n))}return n._curve=t,n}function dc(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(pc(t)):n()._curve},t}function vc(){return dc(cc().curve(u_))}function gc(){var t=sc().curve(u_),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return dc(e())},delete t.lineX0,t.lineEndAngle=function(){return dc(r())},delete t.lineX1,t.lineInnerRadius=function(){return dc(i())},delete t.lineY0,t.lineOuterRadius=function(){return dc(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(pc(t)):n()._curve},t}function _c(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}function yc(t){return t.source}function mc(t){return t.target}function xc(t){function n(){var n,a=a_.call(arguments),c=e.apply(this,a),s=r.apply(this,a);if(u||(u=n=ee()),t(u,+i.apply(this,(a[0]=c,a)),+o.apply(this,a),+i.apply(this,(a[0]=s,a)),+o.apply(this,a)),n)return u=null,n+""||null}var e=yc,r=mc,i=uc,o=ac,u=null;return n.source=function(t){return arguments.length?(e=t,n):e},n.target=function(t){return arguments.length?(r=t,n):r},n.x=function(t){return arguments.length?(i="function"==typeof t?t:Ga(+t),n):i},n.y=function(t){return arguments.length?(o="function"==typeof t?t:Ga(+t),n):o},n.context=function(t){return arguments.length?(u=null==t?null:t,n):u},n}function bc(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function wc(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n,e=(e+i)/2,r,e,r,i)}function Mc(t,n,e,r,i){var o=_c(n,e),u=_c(n,e=(e+i)/2),a=_c(r,e),c=_c(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(u[0],u[1],a[0],a[1],c[0],c[1])}function Tc(){}function Nc(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function kc(t){this._context=t}function Sc(t){this._context=t}function Ec(t){this._context=t}function Ac(t,n){this._basis=new kc(t),this._beta=n}function Cc(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function zc(t,n){this._context=t,this._k=(1-n)/6}function Pc(t,n){this._context=t,this._k=(1-n)/6}function Rc(t,n){this._context=t,this._k=(1-n)/6}function Lc(t,n,e){var r=t._x1,i=t._y1,o=t._x2,u=t._y2;if(t._l01_a>e_){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>e_){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-n*t._l12_2a)/f,u=(u*s+t._y1*t._l23_2a-e*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,u,t._x2,t._y2)}function qc(t,n){this._context=t,this._alpha=n}function Dc(t,n){this._context=t,this._alpha=n}function Uc(t,n){this._context=t,this._alpha=n}function Oc(t){this._context=t}function Fc(t){return t<0?-1:1}function Ic(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),u=(e-t._y1)/(i||r<0&&-0),a=(o*i+u*r)/(r+i);return(Fc(o)+Fc(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(a))||0}function Yc(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Bc(t,n,e){var r=t._x0,i=t._y0,o=t._x1,u=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*n,o-a,u-a*e,o,u)}function Hc(t){this._context=t}function jc(t){this._context=new Xc(t)}function Xc(t){this._context=t}function Vc(t){this._context=t}function $c(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),u=new Array(r);for(i[0]=0,o[0]=2,u[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,u[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,u[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,u[n]-=e*u[n-1];for(i[r-1]=u[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(u[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function Wc(t,n){this._context=t,this._t=n}function Zc(t,n){if((i=t.length)>1)for(var e,r,i,o=1,u=t[n[0]],a=u.length;o<i;++o)for(r=u,u=t[n[o]],e=0;e<a;++e)u[e][1]+=u[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function Gc(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function Qc(t,n){return t[n]}function Jc(t){var n=t.map(Kc);return Gc(t).sort(function(t,e){return n[t]-n[e]})}function Kc(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}function ts(t){return function(){return t}}function ns(t){return t[0]}function es(t){return t[1]}function rs(){this._=null}function is(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function os(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function us(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function as(t){for(;t.L;)t=t.L;return t}function cs(t,n,e,r){var i=[null,null],o=D_.push(i)-1;return i.left=t,i.right=n,e&&fs(i,t,n,e),r&&fs(i,n,t,r),L_[t.index].halfedges.push(o),L_[n.index].halfedges.push(o),i}function ss(t,n,e){var r=[n,e];return r.left=t,r}function fs(t,n,e,r){t[0]||t[1]?t.left===e?t[1]=r:t[0]=r:(t[0]=r,t.left=n,t.right=e)}function ls(t,n,e,r,i){var o,u=t[0],a=t[1],c=u[0],s=u[1],f=0,l=1,h=a[0]-c,p=a[1]-s;if(o=n-c,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>f&&(f=o)}if(o=r-c,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<l&&(l=o)}if(o=e-s,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<l&&(l=o)}else if(p>0){if(o>l)return;o>f&&(f=o)}if(o=i-s,p||!(o<0)){if(o/=p,p<0){if(o>l)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<l&&(l=o)}return!(f>0||l<1)||(f>0&&(t[0]=[c+f*h,s+f*p]),l<1&&(t[1]=[c+l*h,s+l*p]),!0)}}}}}function hs(t,n,e,r,i){var o=t[1];if(o)return!0;var u,a,c=t[0],s=t.left,f=t.right,l=s[0],h=s[1],p=f[0],d=f[1],v=(l+p)/2,g=(h+d)/2;if(d===h){if(v<n||v>=r)return;if(l>p){if(c){if(c[1]>=i)return}else c=[v,e];o=[v,i]}else{if(c){if(c[1]<e)return}else c=[v,i];o=[v,e]}}else if(u=(l-p)/(d-h),a=g-u*v,u<-1||u>1)if(l>p){if(c){if(c[1]>=i)return}else c=[(e-a)/u,e];o=[(i-a)/u,i]}else{if(c){if(c[1]<e)return}else c=[(i-a)/u,i];o=[(e-a)/u,e]}else if(h<d){if(c){if(c[0]>=r)return}else c=[n,u*n+a];o=[r,u*r+a]}else{if(c){if(c[0]<n)return}else c=[r,u*r+a];o=[n,u*n+a]}return t[0]=c,t[1]=o,!0}function ps(t,n){var e=t.site,r=n.left,i=n.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=n[1],i=n[0]):(r=n[0],i=n[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function ds(t,n){return n[+(n.left!==t.site)]}function vs(t,n){return n[+(n.left===t.site)]}function gs(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var u=i[0],a=i[1],c=r[0]-u,s=r[1]-a,f=o[0]-u,l=o[1]-a,h=2*(c*l-s*f);if(!(h>=-I_)){var p=c*c+s*s,d=f*f+l*l,v=(l*p-s*d)/h,g=(c*d-f*p)/h,_=U_.pop()||new function(){is(this),this.x=this.y=this.arc=this.site=this.cy=null};_.arc=t,_.site=i,_.x=v+u,_.y=(_.cy=g+a)+Math.sqrt(v*v+g*g),t.circle=_;for(var y=null,m=q_._;m;)if(_.y<m.y||_.y===m.y&&_.x<=m.x){if(!m.L){y=m.P;break}m=m.L}else{if(!m.R){y=m;break}m=m.R}q_.insert(y,_),y||(P_=_)}}}}function _s(t){var n=t.circle;n&&(n.P||(P_=n.N),q_.remove(n),U_.push(n),is(n),t.circle=null)}function ys(t){var n=O_.pop()||new function(){is(this),this.edge=this.site=this.circle=null};return n.site=t,n}function ms(t){_s(t),R_.remove(t),O_.push(t),is(t)}function xs(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],o=t.P,u=t.N,a=[t];ms(t);for(var c=o;c.circle&&Math.abs(e-c.circle.x)<F_&&Math.abs(r-c.circle.cy)<F_;)o=c.P,a.unshift(c),ms(c),c=o;a.unshift(c),_s(c);for(var s=u;s.circle&&Math.abs(e-s.circle.x)<F_&&Math.abs(r-s.circle.cy)<F_;)u=s.N,a.push(s),ms(s),s=u;a.push(s),_s(s);var f,l=a.length;for(f=1;f<l;++f)s=a[f],c=a[f-1],fs(s.edge,c.site,s.site,i);c=a[0],(s=a[l-1]).edge=cs(c.site,s.site,null,i),gs(c),gs(s)}function bs(t){for(var n,e,r,i,o=t[0],u=t[1],a=R_._;a;)if((r=ws(a,u)-o)>F_)a=a.L;else{if(!((i=o-function(t,n){var e=t.N;if(e)return ws(e,n);var r=t.site;return r[1]===n?r[0]:1/0}(a,u))>F_)){r>-F_?(n=a.P,e=a):i>-F_?(n=a,e=a.N):n=e=a;break}if(!a.R){n=a;break}a=a.R}(function(t){L_[t.index]={site:t,halfedges:[]}})(t);var c=ys(t);if(R_.insert(n,c),n||e){if(n===e)return _s(n),e=ys(n.site),R_.insert(c,e),c.edge=e.edge=cs(n.site,c.site),gs(n),void gs(e);if(e){_s(n),_s(e);var s=n.site,f=s[0],l=s[1],h=t[0]-f,p=t[1]-l,d=e.site,v=d[0]-f,g=d[1]-l,_=2*(h*g-p*v),y=h*h+p*p,m=v*v+g*g,x=[(g*y-p*m)/_+f,(h*m-v*y)/_+l];fs(e.edge,s,d,x),c.edge=cs(s,t,null,x),e.edge=cs(t,d,null,x),gs(n),gs(e)}else c.edge=cs(n.site,c.site)}}function ws(t,n){var e=t.site,r=e[0],i=e[1],o=i-n;if(!o)return r;var u=t.P;if(!u)return-1/0;var a=(e=u.site)[0],c=e[1],s=c-n;if(!s)return a;var f=a-r,l=1/o-1/s,h=f/s;return l?(-h+Math.sqrt(h*h-2*l*(f*f/(-2*s)-c+s/2+i-o/2)))/l+r:(r+a)/2}function Ms(t,n,e){return(t[0]-e[0])*(n[1]-t[1])-(t[0]-n[0])*(e[1]-t[1])}function Ts(t,n){return n[1]-t[1]||n[0]-t[0]}function Ns(t,n){var e,r,i,o=t.sort(Ts).pop();for(D_=[],L_=new Array(t.length),R_=new rs,q_=new rs;;)if(i=P_,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===e&&o[1]===r||(bs(o),e=o[0],r=o[1]),o=t.pop();else{if(!i)break;xs(i.arc)}if(function(){for(var t,n,e,r,i=0,o=L_.length;i<o;++i)if((t=L_[i])&&(r=(n=t.halfedges).length)){var u=new Array(r),a=new Array(r);for(e=0;e<r;++e)u[e]=e,a[e]=ps(t,D_[n[e]]);for(u.sort(function(t,n){return a[n]-a[t]}),e=0;e<r;++e)a[e]=n[u[e]];for(e=0;e<r;++e)n[e]=a[e]}}(),n){var u=+n[0][0],a=+n[0][1],c=+n[1][0],s=+n[1][1];(function(t,n,e,r){for(var i,o=D_.length;o--;)hs(i=D_[o],t,n,e,r)&&ls(i,t,n,e,r)&&(Math.abs(i[0][0]-i[1][0])>F_||Math.abs(i[0][1]-i[1][1])>F_)||delete D_[o]})(u,a,c,s),function(t,n,e,r){var i,o,u,a,c,s,f,l,h,p,d,v,g=L_.length,_=!0;for(i=0;i<g;++i)if(o=L_[i]){for(u=o.site,a=(c=o.halfedges).length;a--;)D_[c[a]]||c.splice(a,1);for(a=0,s=c.length;a<s;)d=(p=vs(o,D_[c[a]]))[0],v=p[1],l=(f=ds(o,D_[c[++a%s]]))[0],h=f[1],(Math.abs(d-l)>F_||Math.abs(v-h)>F_)&&(c.splice(a,0,D_.push(ss(u,p,Math.abs(d-t)<F_&&r-v>F_?[t,Math.abs(l-t)<F_?h:r]:Math.abs(v-r)<F_&&e-d>F_?[Math.abs(h-r)<F_?l:e,r]:Math.abs(d-e)<F_&&v-n>F_?[e,Math.abs(l-e)<F_?h:n]:Math.abs(v-n)<F_&&d-t>F_?[Math.abs(h-n)<F_?l:t,n]:null))-1),++s);s&&(_=!1)}if(_){var y,m,x,b=1/0;for(i=0,_=null;i<g;++i)(o=L_[i])&&(x=(y=(u=o.site)[0]-t)*y+(m=u[1]-n)*m)<b&&(b=x,_=o);if(_){var w=[t,n],M=[t,r],T=[e,r],N=[e,n];_.halfedges.push(D_.push(ss(u=_.site,w,M))-1,D_.push(ss(u,M,T))-1,D_.push(ss(u,T,N))-1,D_.push(ss(u,N,w))-1)}}for(i=0;i<g;++i)(o=L_[i])&&(o.halfedges.length||delete L_[i])}(u,a,c,s)}this.edges=D_,this.cells=L_,R_=q_=D_=L_=null}function ks(t){return function(){return t}}function Ss(t,n,e){this.k=t,this.x=n,this.y=e}function Es(t){return t.__zoom||Y_}function As(){t.event.stopImmediatePropagation()}function Cs(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function zs(){return!t.event.button}function Ps(){var t,n,e=this;return e instanceof SVGElement?(t=(e=e.ownerSVGElement||e).width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function Rs(){return this.__zoom||Y_}function Ls(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function qs(){return"ontouchstart"in this}function Ds(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],u=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}var Us=e(n),Os=Us.right,Fs=Us.left,Is=Array.prototype,Ys=Is.slice,Bs=Is.map,Hs=Math.sqrt(50),js=Math.sqrt(10),Xs=Math.sqrt(2),Vs=Array.prototype.slice,$s=1,Ws=2,Zs=3,Gs=4,Qs=1e-6,Js={value:function(){}};k.prototype=N.prototype={constructor:k,on:function(t,n){var e,r=this._,i=function(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}(t+"",r),o=-1,u=i.length;{if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<u;)if(e=(t=i[o]).type)r[e]=S(r[e],t.name,n);else if(null==n)for(e in r)r[e]=S(r[e],t.name,null);return this}for(;++o<u;)if((e=(t=i[o]).type)&&(e=function(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}(r[e],t.name)))return e}},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new k(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Ks="http://www.w3.org/1999/xhtml",tf={svg:"http://www.w3.org/2000/svg",xhtml:Ks,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nf=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var ef=document.documentElement;if(!ef.matches){var rf=ef.webkitMatchesSelector||ef.msMatchesSelector||ef.mozMatchesSelector||ef.oMatchesSelector;nf=function(t){return function(){return rf.call(this,t)}}}}var of=nf;q.prototype={constructor:q,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var uf="$";H.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var af={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(af={mouseenter:"mouseover",mouseleave:"mouseout"})}var cf=[null];ut.prototype=at.prototype={constructor:ut,select:function(t){"function"!=typeof t&&(t=z(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],c=a.length,s=r[i]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),s[f]=u);return new ut(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=R(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],c=a.length,s=0;s<c;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new ut(r,i)},filter:function(t){"function"!=typeof t&&(t=of(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new ut(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var e=n?U:D,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var f=r[s],l=i[s],h=l.length,p=t.call(f,f&&f.__data__,s,r),d=p.length,v=a[s]=new Array(d),g=u[s]=new Array(d);e(f,l,v,g,c[s]=new Array(h),p,n);for(var _,y,m=0,x=0;m<d;++m)if(_=v[m]){for(m>=x&&(x=m+1);!(y=g[x])&&++x<d;);_._next=y||null}}return u=new ut(u,r),u._enter=a,u._exit=c,u},enter:function(){return new ut(this._enter||this._groups.map(L),this._parents)},exit:function(){return new ut(this._exit||this._groups.map(L),this._parents)},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],f=e[a],l=s.length,h=u[a]=new Array(l),p=0;p<l;++p)(c=s[p]||f[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new ut(u,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=O);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],c=a.length,s=i[o]=new Array(c),f=0;f<c;++f)(u=a[f])&&(s[f]=u);s.sort(n)}return new ut(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=E(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):I(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=Y(t+"");if(arguments.length<2){for(var r=B(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?j:X)(this,t)}}:n?function(t){return function(){j(this,t)}}:function(t){return function(){X(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?$:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(Z)},append:function(t){var n="function"==typeof t?t:A(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:A(t),r=null==n?G:"function"==typeof n?n:z(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Q)},clone:function(t){return this.select(t?K:J)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),u=o.length;if(!(arguments.length<2)){for(a=n?rt:et,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,s=0,f=a.length;s<f;++s)for(r=0,c=a[s];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return ot(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return ot(this,t,n)}})(t,n))}};var sf=0;ft.prototype=st.prototype={constructor:ft,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},xt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var ff="\\s*([+-]?\\d+)\\s*",lf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",hf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pf=/^#([0-9a-f]{3})$/,df=/^#([0-9a-f]{6})$/,vf=new RegExp("^rgb\\("+[ff,ff,ff]+"\\)$"),gf=new RegExp("^rgb\\("+[hf,hf,hf]+"\\)$"),_f=new RegExp("^rgba\\("+[ff,ff,ff,lf]+"\\)$"),yf=new RegExp("^rgba\\("+[hf,hf,hf,lf]+"\\)$"),mf=new RegExp("^hsl\\("+[lf,hf,hf]+"\\)$"),xf=new RegExp("^hsla\\("+[lf,hf,hf,lf]+"\\)$"),bf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nt(St,Et,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Nt(Rt,Pt,kt(St,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Rt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Rt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Nt(Dt,qt,kt(St,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Dt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Dt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Rt(Ut(t>=240?t-240:t+120,i,r),Ut(t,i,r),Ut(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var wf=Math.PI/180,Mf=180/Math.PI,Tf=.95047,Nf=1,kf=1.08883,Sf=4/29,Ef=6/29,Af=3*Ef*Ef,Cf=Ef*Ef*Ef;Nt(It,Ft,kt(St,{brighter:function(t){return new It(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new It(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return t=Nf*Bt(t),n=Tf*Bt(n),e=kf*Bt(e),new Rt(Ht(3.2404542*n-1.5371385*t-.4985314*e),Ht(-.969266*n+1.8760108*t+.041556*e),Ht(.0556434*n-.2040259*t+1.0572252*e),this.opacity)}})),Nt(Vt,Xt,kt(St,{brighter:function(t){return new Vt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Vt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ot(this).rgb()}}));var zf=-.29227,Pf=-.90649,Rf=1.97294,Lf=Rf*Pf,qf=1.78277*Rf,Df=1.78277*zf- -.14861*Pf;Nt(Wt,$t,kt(St,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*wf,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Rt(255*(n+e*(-.14861*r+1.78277*i)),255*(n+e*(zf*r+Pf*i)),255*(n+e*(Rf*r)),this.opacity)}}));var Uf,Of,Ff,If,Yf,Bf,Hf=function t(n){function e(t,n){var e=r((t=Pt(t)).r,(n=Pt(n)).r),i=r(t.g,n.g),o=r(t.b,n.b),u=en(t.opacity,n.opacity);return function(n){return t.r=e(n),t.g=i(n),t.b=o(n),t.opacity=u(n),t+""}}var r=nn(n);return e.gamma=t,e}(1),jf=rn(Gt),Xf=rn(Qt),Vf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$f=new RegExp(Vf.source,"g"),Wf=180/Math.PI,Zf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Gf=pn(function(t){return"none"===t?Zf:(Uf||(Uf=document.createElement("DIV"),Of=document.documentElement,Ff=document.defaultView),Uf.style.transform=t,t=Ff.getComputedStyle(Of.appendChild(Uf),null).getPropertyValue("transform"),Of.removeChild(Uf),t=t.slice(7,-1).split(","),hn(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Qf=pn(function(t){return null==t?Zf:(If||(If=document.createElementNS("http://www.w3.org/2000/svg","g")),If.setAttribute("transform",t),(t=If.transform.baseVal.consolidate())?(t=t.matrix,hn(t.a,t.b,t.c,t.d,t.e,t.f)):Zf)},", ",")",")"),Jf=Math.SQRT2,Kf=2,tl=4,nl=1e-12,el=gn(tn),rl=gn(en),il=_n(tn),ol=_n(en),ul=yn(tn),al=yn(en),cl=0,sl=0,fl=0,ll=1e3,hl=0,pl=0,dl=0,vl="object"==typeof performance&&performance.now?performance:Date,gl="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};bn.prototype=wn.prototype={constructor:bn,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?mn():+e)+(null==n?0:+n),this._next||Bf===this||(Bf?Bf._next=this:Yf=this,Bf=this),this._call=t,this._time=e,kn()},stop:function(){this._call&&(this._call=null,this._time=1/0,kn())}};var _l=N("start","end","interrupt"),yl=[],ml=0,xl=1,bl=2,wl=3,Ml=4,Tl=5,Nl=6,kl=at.prototype.constructor,Sl=0,El=at.prototype;qn.prototype=Dn.prototype={constructor:qn,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=z(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a,c,s=r[u],f=s.length,l=o[u]=new Array(f),h=0;h<f;++h)(a=s[h])&&(c=t.call(a,a.__data__,h,s))&&("__data__"in a&&(c.__data__=a.__data__),l[h]=c,En(l[h],n,e,h,l,zn(a,e)));return new qn(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=R(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var c,s=r[a],f=s.length,l=0;l<f;++l)if(c=s[l]){for(var h,p=t.call(c,c.__data__,l,s),d=zn(c,e),v=0,g=p.length;v<g;++v)(h=p[v])&&En(h,n,e,v,p,d);o.push(p),u.push(c)}return new qn(o,u,n,e)},filter:function(t){"function"!=typeof t&&(t=of(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new qn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],f=e[a],l=s.length,h=u[a]=new Array(l),p=0;p<l;++p)(c=s[p]||f[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new qn(u,this._parents,this._name,this._id)},selection:function(){return new kl(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Un(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],c=a.length,s=0;s<c;++s)if(u=a[s]){var f=zn(u,n);En(u,t,e,s,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new qn(r,this._parents,t,e)},call:El.call,nodes:El.nodes,node:El.node,size:El.size,empty:El.empty,each:El.each,on:function(t,n){var e=this._id;return arguments.length<2?zn(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(n)?An:Cn;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(n,e),u.on=i}}(e,t,n))},attr:function(t,n){var e=E(t),r="transform"===e?Qf:Ln;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var u,a=e(this);if(null!=a)return(u=this.getAttributeNS(t.space,t.local))===a?null:u===r&&a===i?o:o=n(r=u,i=a);this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var u,a=e(this);if(null!=a)return(u=this.getAttribute(t))===a?null:u===r&&a===i?o:o=n(r=u,i=a);this.removeAttribute(t)}})(e,r,Rn(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===r?i:i=n(r=o,e)}}:function(t,n,e){var r,i;return function(){var o=this.getAttribute(t);return o===e?null:o===r?i:i=n(r=o,e)}})(e,r,n+""))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=E(t);return this.tween(e,(r.local?function(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttributeNS(t.space,t.local,r(n))}}return e._value=n,e}:function(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttribute(t,r(n))}}return e._value=n,e})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?Gf:Ln;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=I(this,t),u=(this.style.removeProperty(t),I(this,t));return o===u?null:o===e&&u===r?i:i=n(e=o,r=u)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof n?function(t,n,e){var r,i,o;return function(){var u=I(this,t),a=e(this);return null==a&&(this.style.removeProperty(t),a=I(this,t)),u===a?null:u===r&&a===i?o:o=n(r=u,i=a)}}(t,r,Rn(this,"style."+t,n)):function(t,n,e){var r,i;return function(){var o=I(this,t);return o===e?null:o===r?i:i=n(r=o,e)}}(t,r,n+""),e)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){function r(){var r=this,i=n.apply(r,arguments);return i&&function(n){r.style.setProperty(t,i(n),e)}}return r._value=n,r}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Rn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=zn(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=Cn(this,t),o=i.tween;if(o!==e)for(var u=0,a=(r=e=o).length;u<a;++u)if(r[u].name===n){(r=r.slice()).splice(u,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Cn(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:n,value:e},c=0,s=i.length;c<s;++c)if(i[c].name===n){i[c]=a;break}c===s&&i.push(a)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){An(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){An(this,t).delay=n}})(n,t)):zn(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Cn(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Cn(this,t).duration=n}})(n,t)):zn(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){Cn(this,t).ease=n}}(n,t)):zn(this.node(),n).ease}};var Al=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),Cl=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),zl=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Pl=Math.PI,Rl=Pl/2,Ll=4/11,ql=6/11,Dl=8/11,Ul=.75,Ol=9/11,Fl=10/11,Il=.9375,Yl=21/22,Bl=63/64,Hl=1/Ll/Ll,jl=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158),Xl=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),Vl=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),$l=2*Math.PI,Wl=function t(n,e){function r(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=$l);return r.amplitude=function(n){return t(n,e*$l)},r.period=function(e){return t(n,e)},r}(1,.3),Zl=function t(n,e){function r(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=$l);return r.amplitude=function(n){return t(n,e*$l)},r.period=function(e){return t(n,e)},r}(1,.3),Gl=function t(n,e){function r(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((i-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((i+t)/e))/2}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=$l);return r.amplitude=function(n){return t(n,e*$l)},r.period=function(e){return t(n,e)},r}(1,.3),Ql={time:null,delay:0,duration:250,ease:Fn};at.prototype.interrupt=function(t){return this.each(function(){Pn(this,t)})},at.prototype.transition=function(t){var n,e;t instanceof qn?(n=t._id,t=t._name):(n=Un(),(e=Ql).time=mn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],c=a.length,s=0;s<c;++s)(u=a[s])&&En(u,t,n,s,a,e||jn(u,n));return new qn(r,this._parents,t,n)};var Jl=[null],Kl={name:"drag"},th={name:"space"},nh={name:"handle"},eh={name:"center"},rh={name:"x",handles:["e","w"].map(Wn),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ih={name:"y",handles:["n","s"].map(Wn),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},oh={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Wn),input:function(t){return t},output:function(t){return t}},uh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ah={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ch={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},sh={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},fh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},lh=Math.cos,hh=Math.sin,ph=Math.PI,dh=ph/2,vh=2*ph,gh=Math.max,_h=Array.prototype.slice,yh=Math.PI,mh=2*yh,xh=mh-1e-6;ne.prototype=ee.prototype={constructor:ne,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,u=this._y1,a=e-t,c=r-n,s=o-t,f=u-n,l=s*s+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(f*a-c*s)>1e-6&&i){var h=e-o,p=r-u,d=a*a+c*c,v=h*h+p*p,g=Math.sqrt(d),_=Math.sqrt(l),y=i*Math.tan((yh-Math.acos((d+l-v)/(2*g*_)))/2),m=y/_,x=y/g;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*s)+","+(n+m*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>s*p)+","+(this._x1=t+x*a)+","+(this._y1=n+x*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n;var u=(e=+e)*Math.cos(r),a=e*Math.sin(r),c=t+u,s=n+a,f=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+s:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+c+","+s),e&&(l<0&&(l=l%mh+mh),l>xh?this._+="A"+e+","+e+",0,1,"+f+","+(t-u)+","+(n-a)+"A"+e+","+e+",0,1,"+f+","+(this._x1=c)+","+(this._y1=s):l>1e-6&&(this._+="A"+e+","+e+",0,"+ +(l>=yh)+","+f+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};ce.prototype=se.prototype={constructor:ce,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var bh=se.prototype;de.prototype=ve.prototype={constructor:de,has:bh.has,add:function(t){return t+="",this["$"+t]=t,this},remove:bh.remove,clear:bh.clear,values:bh.keys,size:bh.size,empty:bh.empty,each:bh.each};var wh={},Mh={},Th=34,Nh=10,kh=13,Sh=_e(","),Eh=Sh.parse,Ah=Sh.parseRows,Ch=Sh.format,zh=Sh.formatRows,Ph=_e("\t"),Rh=Ph.parse,Lh=Ph.parseRows,qh=Ph.format,Dh=Ph.formatRows,Uh=Te.prototype=Ne.prototype;Uh.copy=function(){var t,n,e=new Ne(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=ke(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=ke(n));return e},Uh.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return xe(this.cover(n,e),n,e,t)},Uh.addAll=function(t){var n,e,r,i,o=t.length,u=new Array(o),a=new Array(o),c=1/0,s=1/0,f=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(u[e]=r,a[e]=i,r<c&&(c=r),r>f&&(f=r),i<s&&(s=i),i>l&&(l=i));for(f<c&&(c=this._x0,f=this._x1),l<s&&(s=this._y0,l=this._y1),this.cover(c,s).cover(f,l),e=0;e<o;++e)xe(this,u[e],a[e],t[e]);return this},Uh.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var u,a,c=i-e,s=this._root;switch(a=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{u=new Array(4),u[a]=s,s=u}while(c*=2,i=e+c,o=r+c,t>i||n>o);break;case 1:do{u=new Array(4),u[a]=s,s=u}while(c*=2,e=i-c,o=r+c,e>t||n>o);break;case 2:do{u=new Array(4),u[a]=s,s=u}while(c*=2,i=e+c,r=o-c,t>i||r>n);break;case 3:do{u=new Array(4),u[a]=s,s=u}while(c*=2,e=i-c,r=o-c,e>t||r>n)}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},Uh.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},Uh.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Uh.find=function(t,n,e){var r,i,o,u,a,c,s,f=this._x0,l=this._y0,h=this._x1,p=this._y1,d=[],v=this._root;for(v&&d.push(new be(v,f,l,h,p)),null==e?e=1/0:(f=t-e,l=n-e,h=t+e,p=n+e,e*=e);c=d.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(o=c.y0)>p||(u=c.x1)<f||(a=c.y1)<l))if(v.length){var g=(i+u)/2,_=(o+a)/2;d.push(new be(v[3],g,_,u,a),new be(v[2],i,_,g,a),new be(v[1],g,o,u,_),new be(v[0],i,o,g,_)),(s=(n>=_)<<1|t>=g)&&(c=d[d.length-1],d[d.length-1]=d[d.length-1-s],d[d.length-1-s]=c)}else{var y=t-+this._x.call(null,v.data),m=n-+this._y.call(null,v.data),x=y*y+m*m;if(x<e){var b=Math.sqrt(e=x);f=t-b,l=n-b,h=t+b,p=n+b,r=v.data}}return r},Uh.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,e,r,i,o,u,a,c,s,f,l,h,p=this._root,d=this._x0,v=this._y0,g=this._x1,_=this._y1;if(!p)return this;if(p.length)for(;;){if((s=o>=(a=(d+g)/2))?d=a:g=a,(f=u>=(c=(v+_)/2))?v=c:_=c,n=p,!(p=p[l=f<<1|s]))return this;if(!p.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(p=n[0]||n[1]||n[2]||n[3])&&p===(n[3]||n[2]||n[1]||n[0])&&!p.length&&(e?e[h]=p:this._root=p),this):(this._root=i,this)},Uh.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},Uh.root=function(){return this._root},Uh.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},Uh.visit=function(t){var n,e,r,i,o,u,a=[],c=this._root;for(c&&a.push(new be(c,this._x0,this._y0,this._x1,this._y1));n=a.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,o=n.x1,u=n.y1)&&c.length){var s=(r+o)/2,f=(i+u)/2;(e=c[3])&&a.push(new be(e,s,f,o,u)),(e=c[2])&&a.push(new be(e,r,f,s,u)),(e=c[1])&&a.push(new be(e,s,i,o,f)),(e=c[0])&&a.push(new be(e,r,i,s,f))}return this},Uh.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new be(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,u=n.x0,a=n.y0,c=n.x1,s=n.y1,f=(u+c)/2,l=(a+s)/2;(o=i[0])&&e.push(new be(o,u,a,f,l)),(o=i[1])&&e.push(new be(o,f,a,c,l)),(o=i[2])&&e.push(new be(o,u,l,f,s)),(o=i[3])&&e.push(new be(o,f,l,c,s))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},Uh.x=function(t){return arguments.length?(this._x=t,this):this._x},Uh.y=function(t){return arguments.length?(this._y=t,this):this._y};var Oh,Fh=10,Ih=Math.PI*(3-Math.sqrt(5)),Yh={"":function(t,n){t:for(var e,r=(t=t.toPrecision(n)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=e=i;break;case"0":0===o&&(o=i),e=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t},"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return qe(100*t,n)},r:qe,s:function(t,n){var e=Re(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Oh=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Re(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Bh=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;De.prototype=Ue.prototype,Ue.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Hh,jh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];Ie({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Xe.prototype={constructor:Xe,reset:function(){this.s=this.t=0},add:function(t){Ve(wp,t,this.t),Ve(this,wp.s,this.s),this.s?this.t+=wp.t:this.s=wp.t},valueOf:function(){return this.s}};var Xh,Vh,$h,Wh,Zh,Gh,Qh,Jh,Kh,tp,np,ep,rp,ip,op,up,ap,cp,sp,fp,lp,hp,pp,dp,vp,gp,_p,yp,mp,xp,bp,wp=new Xe,Mp=1e-6,Tp=1e-12,Np=Math.PI,kp=Np/2,Sp=Np/4,Ep=2*Np,Ap=180/Np,Cp=Np/180,zp=Math.abs,Pp=Math.atan,Rp=Math.atan2,Lp=Math.cos,qp=Math.ceil,Dp=Math.exp,Up=Math.log,Op=Math.pow,Fp=Math.sin,Ip=Math.sign||function(t){return t>0?1:t<0?-1:0},Yp=Math.sqrt,Bp=Math.tan,Hp={Feature:function(t,n){Qe(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Qe(e[r].geometry,n)}},jp={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Je(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Je(e[r],n,0)},Polygon:function(t,n){Ke(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Ke(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Qe(e[r],n)}},Xp=je(),Vp=je(),$p={point:Ge,lineStart:Ge,lineEnd:Ge,polygonStart:function(){Xp.reset(),$p.lineStart=nr,$p.lineEnd=er},polygonEnd:function(){var t=+Xp;Vp.add(t<0?Ep+t:t),this.lineStart=this.lineEnd=this.point=Ge},sphere:function(){Vp.add(Ep)}},Wp=je(),Zp={point:hr,lineStart:dr,lineEnd:vr,polygonStart:function(){Zp.point=gr,Zp.lineStart=_r,Zp.lineEnd=yr,Wp.reset(),$p.polygonStart()},polygonEnd:function(){$p.polygonEnd(),Zp.point=hr,Zp.lineStart=dr,Zp.lineEnd=vr,Xp<0?(Gh=-(Jh=180),Qh=-(Kh=90)):Wp>Mp?Kh=90:Wp<-Mp&&(Qh=-90),op[0]=Gh,op[1]=Jh}},Gp={sphere:Ge,point:wr,lineStart:Tr,lineEnd:Sr,polygonStart:function(){Gp.lineStart=Er,Gp.lineEnd=Ar},polygonEnd:function(){Gp.lineStart=Tr,Gp.lineEnd=Sr}};Lr.invert=Lr;var Qp,Jp,Kp,td,nd,ed,rd,id,od,ud,ad,cd=je(),sd=Wr(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?Np:-Np,c=zp(o-e);zp(c-Np)<Mp?(t.point(e,r=(r+u)/2>0?kp:-kp),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&c>=Np&&(zp(e-i)<Mp&&(e-=i*Mp),zp(o-a)<Mp&&(o-=a*Mp),r=function(t,n,e,r){var i,o,u=Fp(t-e);return zp(u)>Mp?Pp((Fp(n)*(o=Lp(r))*Fp(e)-Fp(r)*(i=Lp(n))*Fp(t))/(i*o*u)):(n+r)/2}(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*kp,r.point(-Np,i),r.point(0,i),r.point(Np,i),r.point(Np,0),r.point(Np,-i),r.point(0,-i),r.point(-Np,-i),r.point(-Np,0),r.point(-Np,i);else if(zp(t[0]-n[0])>Mp){var o=t[0]<n[0]?Np:-Np;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-Np,-kp]),fd=1e9,ld=-fd,hd=je(),pd={sphere:Ge,point:Ge,lineStart:function(){pd.point=ti,pd.lineEnd=Kr},lineEnd:Ge,polygonStart:Ge,polygonEnd:Ge},dd=[null,null],vd={type:"LineString",coordinates:dd},gd={Feature:function(t,n){return ii(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(ii(e[r].geometry,n))return!0;return!1}},_d={Sphere:function(){return!0},Point:function(t,n){return oi(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(oi(e[r],n))return!0;return!1},LineString:function(t,n){return ui(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(ui(e[r],n))return!0;return!1},Polygon:function(t,n){return ai(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(ai(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(ii(e[r],n))return!0;return!1}},yd=je(),md=je(),xd={point:Ge,lineStart:Ge,lineEnd:Ge,polygonStart:function(){xd.lineStart=di,xd.lineEnd=_i},polygonEnd:function(){xd.lineStart=xd.lineEnd=xd.point=Ge,yd.add(zp(md)),md.reset()},result:function(){var t=yd/2;return yd.reset(),t}},bd=1/0,wd=bd,Md=-bd,Td=Md,Nd={point:function(t,n){t<bd&&(bd=t),t>Md&&(Md=t),n<wd&&(wd=n),n>Td&&(Td=n)},lineStart:Ge,lineEnd:Ge,polygonStart:Ge,polygonEnd:Ge,result:function(){var t=[[bd,wd],[Md,Td]];return Md=Td=-(wd=bd=1/0),t}},kd=0,Sd=0,Ed=0,Ad=0,Cd=0,zd=0,Pd=0,Rd=0,Ld=0,qd={point:yi,lineStart:mi,lineEnd:wi,polygonStart:function(){qd.lineStart=Mi,qd.lineEnd=Ti},polygonEnd:function(){qd.point=yi,qd.lineStart=mi,qd.lineEnd=wi},result:function(){var t=Ld?[Pd/Ld,Rd/Ld]:zd?[Ad/zd,Cd/zd]:Ed?[kd/Ed,Sd/Ed]:[NaN,NaN];return kd=Sd=Ed=Ad=Cd=zd=Pd=Rd=Ld=0,t}};Si.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Ep)}},result:Ge};var Dd,Ud,Od,Fd,Id,Yd=je(),Bd={point:Ge,lineStart:function(){Bd.point=Ei},lineEnd:function(){Dd&&Ai(Ud,Od),Bd.point=Ge},polygonStart:function(){Dd=!0},polygonEnd:function(){Dd=null},result:function(){var t=+Yd;return Yd.reset(),t}};Ci.prototype={_radius:4.5,_circle:zi(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=zi(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Ri.prototype={constructor:Ri,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Hd=16,jd=Lp(30*Cp),Xd=Pi({point:function(t,n){this.stream.point(t*Cp,n*Cp)}}),Vd=Vi(function(t){return Yp(2/(1+t))});Vd.invert=$i(function(t){return 2*We(t/2)});var $d=Vi(function(t){return(t=$e(t))&&t/Fp(t)});$d.invert=$i(function(t){return t}),Wi.invert=function(t,n){return[t,2*Pp(Dp(n))-kp]},Ji.invert=Ji,to.invert=$i(Pp),eo.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,u=o*o;r-=e=(r*(1.007226+o*(.015085+u*(.028874*o-.044475-.005916*u)))-n)/(1.007226+o*(.045255+u*(.259866*o-.311325-.005916*11*u)))}while(zp(e)>Mp&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},ro.invert=$i(We),io.invert=$i(function(t){return 2*Pp(t)}),oo.invert=function(t,n){return[-n,2*Pp(Dp(t))-kp]},vo.prototype=fo.prototype={constructor:vo,count:function(){return this.eachAfter(so)},each:function(t){var n,e,r,i,o=this,u=[o];do{for(n=u.reverse(),u=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)u.push(e[r])}while(u.length);return this},eachAfter:function(t){for(var n,e,r,i=this,o=[i],u=[];i=o.pop();)if(u.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=u.pop();)t(i);return this},eachBefore:function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},sum:function(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})},sort:function(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){var t=[];return this.each(function(n){t.push(n)}),t},leaves:function(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t},links:function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n},copy:function(){return fo(this).eachBefore(ho)}};var Wd=Array.prototype.slice,Zd="$",Gd={depth:-1},Qd={};Ho.prototype=Object.create(vo.prototype);var Jd=(1+Math.sqrt(5))/2,Kd=function t(n){function e(t,e,r,i,o){Xo(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Jd),tv=function t(n){function e(t,e,r,i,o){if((u=t._squarify)&&u.ratio===n)for(var u,a,c,s,f,l=-1,h=u.length,p=t.value;++l<h;){for(c=(a=u[l]).children,s=a.value=0,f=c.length;s<f;++s)a.value+=c[s].value;a.dice?qo(a,e,r,i,r+=(o-r)*a.value/p):jo(a,e,r,e+=(i-e)*a.value/p,o),p-=a.value}else t._squarify=u=Xo(n,t,e,r,i,o),u.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Jd),nv=[].slice,ev={};Zo.prototype=Ko.prototype={constructor:Zo,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var n=nv.call(arguments,1);return n.push(t),++this._waiting,this._tasks.push(n),Go(this),this},abort:function(){return null==this._error&&Qo(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(n,e){t.apply(null,[n].concat(e))},Jo(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,Jo(this),this}};var rv=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(tu),iv=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(tu),ov=function t(n){function e(){var t=iv.source(n).apply(this,arguments);return function(){return Math.exp(t())}}return e.source=t,e}(tu),uv=function t(n){function e(t){return function(){for(var e=0,r=0;r<t;++r)e+=n();return e}}return e.source=t,e}(tu),av=function t(n){function e(t){var e=uv.source(n)(t);return function(){return e()/t}}return e.source=t,e}(tu),cv=function t(n){function e(t){return function(){return-Math.log(1-n())/t}}return e.source=t,e}(tu),sv=eu("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),fv=eu("application/json",function(t){return JSON.parse(t.responseText)}),lv=eu("text/plain",function(t){return t.responseText}),hv=eu("application/xml",function(t){var n=t.responseXML;if(!n)throw new Error("parse error");return n}),pv=ru("text/csv",Eh),dv=ru("text/tab-separated-values",Rh),vv=Array.prototype,gv=vv.map,_v=vv.slice,yv={name:"implicit"},mv=[0,1],xv=new Date,bv=new Date,wv=Cu(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});wv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Cu(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):wv:null};var Mv=wv.range,Tv=6e4,Nv=6048e5,kv=Cu(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),Sv=kv.range,Ev=Cu(function(t){t.setTime(Math.floor(t/Tv)*Tv)},function(t,n){t.setTime(+t+n*Tv)},function(t,n){return(n-t)/Tv},function(t){return t.getMinutes()}),Av=Ev.range,Cv=Cu(function(t){var n=t.getTimezoneOffset()*Tv%36e5;n<0&&(n+=36e5),t.setTime(36e5*Math.floor((+t-n)/36e5)+n)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),zv=Cv.range,Pv=Cu(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Tv)/864e5},function(t){return t.getDate()-1}),Rv=Pv.range,Lv=zu(0),qv=zu(1),Dv=zu(2),Uv=zu(3),Ov=zu(4),Fv=zu(5),Iv=zu(6),Yv=Lv.range,Bv=qv.range,Hv=Dv.range,jv=Uv.range,Xv=Ov.range,Vv=Fv.range,$v=Iv.range,Wv=Cu(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Zv=Wv.range,Gv=Cu(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Gv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Cu(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};var Qv=Gv.range,Jv=Cu(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*Tv)},function(t,n){return(n-t)/Tv},function(t){return t.getUTCMinutes()}),Kv=Jv.range,tg=Cu(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),ng=tg.range,eg=Cu(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1}),rg=eg.range,ig=Pu(0),og=Pu(1),ug=Pu(2),ag=Pu(3),cg=Pu(4),sg=Pu(5),fg=Pu(6),lg=ig.range,hg=og.range,pg=ug.range,dg=ag.range,vg=cg.range,gg=sg.range,_g=fg.range,yg=Cu(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),mg=yg.range,xg=Cu(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});xg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Cu(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var bg,wg=xg.range,Mg={"-":"",_:" ",0:"0"},Tg=/^\s*\d+/,Ng=/^%/,kg=/[\\^$*+?|[\]().{}]/g;Ha({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Sg="%Y-%m-%dT%H:%M:%S.%LZ",Eg=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(Sg),Ag=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse(Sg),Cg=1e3,zg=60*Cg,Pg=60*zg,Rg=24*Pg,Lg=7*Rg,qg=30*Rg,Dg=365*Rg,Ug=$a("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Og=$a("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Fg=$a("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Ig=$a("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Yg=al($t(300,.5,0),$t(-240,.5,1)),Bg=al($t(-100,.75,.35),$t(80,1.5,.8)),Hg=al($t(260,.75,.35),$t(80,1.5,.8)),jg=$t(),Xg=Wa($a("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Vg=Wa($a("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),$g=Wa($a("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Wg=Wa($a("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Zg=Math.abs,Gg=Math.atan2,Qg=Math.cos,Jg=Math.max,Kg=Math.min,t_=Math.sin,n_=Math.sqrt,e_=1e-12,r_=Math.PI,i_=r_/2,o_=2*r_;ic.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var u_=pc(oc);hc.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var a_=Array.prototype.slice,c_={draw:function(t,n){var e=Math.sqrt(n/r_);t.moveTo(e,0),t.arc(0,0,e,0,o_)}},s_={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},f_=Math.sqrt(1/3),l_=2*f_,h_={draw:function(t,n){var e=Math.sqrt(n/l_),r=e*f_;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},p_=Math.sin(r_/10)/Math.sin(7*r_/10),d_=Math.sin(o_/10)*p_,v_=-Math.cos(o_/10)*p_,g_={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),r=d_*e,i=v_*e;t.moveTo(0,-e),t.lineTo(r,i);for(var o=1;o<5;++o){var u=o_*o/5,a=Math.cos(u),c=Math.sin(u);t.lineTo(c*e,-a*e),t.lineTo(a*r-c*i,c*r+a*i)}t.closePath()}},__={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},y_=Math.sqrt(3),m_={draw:function(t,n){var e=-Math.sqrt(n/(3*y_));t.moveTo(0,2*e),t.lineTo(-y_*e,-e),t.lineTo(y_*e,-e),t.closePath()}},x_=Math.sqrt(3)/2,b_=1/Math.sqrt(12),w_=3*(b_/2+1),M_={draw:function(t,n){var e=Math.sqrt(n/w_),r=e/2,i=e*b_,o=r,u=e*b_+e,a=-o,c=u;t.moveTo(r,i),t.lineTo(o,u),t.lineTo(a,c),t.lineTo(-.5*r-x_*i,x_*r+-.5*i),t.lineTo(-.5*o-x_*u,x_*o+-.5*u),t.lineTo(-.5*a-x_*c,x_*a+-.5*c),t.lineTo(-.5*r+x_*i,-.5*i-x_*r),t.lineTo(-.5*o+x_*u,-.5*u-x_*o),t.lineTo(-.5*a+x_*c,-.5*c-x_*a),t.closePath()}},T_=[c_,s_,h_,__,g_,m_,M_];kc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Nc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Nc(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Sc.prototype={areaStart:Tc,areaEnd:Tc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Nc(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Nc(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Ac.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],u=t[e]-i,a=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*u),this._beta*n[c]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var N_=function t(n){function e(t){return 1===n?new kc(t):new Ac(t,n)}return e.beta=function(n){return t(+n)},e}(.85);zc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Cc(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Cc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var k_=function t(n){function e(t){return new zc(t,n)}return e.tension=function(n){return t(+n)},e}(0);Pc.prototype={areaStart:Tc,areaEnd:Tc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Cc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var S_=function t(n){function e(t){return new Pc(t,n)}return e.tension=function(n){return t(+n)},e}(0);Rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Cc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var E_=function t(n){function e(t){return new Rc(t,n)}return e.tension=function(n){return t(+n)},e}(0);qc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Lc(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var A_=function t(n){function e(t){return n?new qc(t,n):new zc(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);Dc.prototype={areaStart:Tc,areaEnd:Tc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Lc(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var C_=function t(n){function e(t){return n?new Dc(t,n):new Pc(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);Uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Lc(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var z_=function t(n){function e(t){return n?new Uc(t,n):new Rc(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);Oc.prototype={areaStart:Tc,areaEnd:Tc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},Hc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bc(this,this._t0,Yc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,t!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Bc(this,Yc(this,e=Ic(this,t,n)),e);break;default:Bc(this,this._t0,e=Ic(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(jc.prototype=Object.create(Hc.prototype)).point=function(t,n){Hc.prototype.point.call(this,n,t)},Xc.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},Vc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=$c(t),i=$c(n),o=0,u=1;u<e;++o,++u)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[u],n[u]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},Wc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}},rs.prototype={constructor:rs,insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=as(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(os(this,e),e=(t=e).U),e.C=!1,r.C=!0,us(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(us(this,e),e=(t=e).U),e.C=!1,r.C=!0,os(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,u=t.R;if(e=o?u?as(u):o:u,i?i.L===t?i.L=e:i.R=e:this._=e,o&&u?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==u?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=u,u.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((n=i.R).C&&(n.C=!1,i.C=!0,os(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,us(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,os(this,i),t=this._;break}}else if((n=i.L).C&&(n.C=!1,i.C=!0,us(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,os(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,us(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var P_,R_,L_,q_,D_,U_=[],O_=[],F_=1e-6,I_=1e-12;Ns.prototype={constructor:Ns,polygons:function(){var t=this.edges;return this.cells.map(function(n){var e=n.halfedges.map(function(e){return ds(n,t[e])});return e.data=n.site.data,e})},triangles:function(){var t=[],n=this.edges;return this.cells.forEach(function(e,r){if(o=(i=e.halfedges).length)for(var i,o,u,a=e.site,c=-1,s=n[i[o-1]],f=s.left===a?s.right:s.left;++c<o;)u=f,f=(s=n[i[c]]).left===a?s.right:s.left,u&&f&&r<u.index&&r<f.index&&Ms(a,u,f)<0&&t.push([a.data,u.data,f.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,n,e){for(var r,i,o=this,u=o._found||0,a=o.cells.length;!(i=o.cells[u]);)if(++u>=a)return null;var c=t-i.site[0],s=n-i.site[1],f=c*c+s*s;do{i=o.cells[r=u],u=null,i.halfedges.forEach(function(e){var r=o.edges[e],a=r.left;if(a!==i.site&&a||(a=r.right)){var c=t-a[0],s=n-a[1],l=c*c+s*s;l<f&&(f=l,u=a.index)}})}while(null!==u);return o._found=r,null==e||f<=e*e?i.site:null}},Ss.prototype={constructor:Ss,scale:function(t){return 1===t?this:new Ss(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Ss(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Y_=new Ss(1,0,0);Es.prototype=Ss.prototype,t.version="4.13.0",t.bisect=Os,t.bisectRight=Os,t.bisectLeft=Fs,t.ascending=n,t.bisector=e,t.cross=function(t,n,e){var i,o,u,a,c=t.length,s=n.length,f=new Array(c*s);for(null==e&&(e=r),i=u=0;i<c;++i)for(a=t[i],o=0;o<s;++o,++u)f[u]=e(a,n[o]);return f},t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=u,t.extent=a,t.histogram=function(){function t(t){var i,o,u=t.length,a=new Array(u);for(i=0;i<u;++i)a[i]=n(t[i],i,t);var c=e(a),s=c[0],l=c[1],h=r(a,s,l);Array.isArray(h)||(h=p(s,l,h),h=f(Math.ceil(s/h)*h,Math.floor(l/h)*h,h));for(var d=h.length;h[0]<=s;)h.shift(),--d;for(;h[d-1]>l;)h.pop(),--d;var v,g=new Array(d+1);for(i=0;i<=d;++i)(v=g[i]=[]).x0=i>0?h[i-1]:s,v.x1=i<d?h[i]:l;for(i=0;i<u;++i)s<=(o=a[i])&&o<=l&&g[Os(h,o,0,d)].push(t[i]);return g}var n=s,e=a,r=d;return t.value=function(e){return arguments.length?(n="function"==typeof e?e:c(e),t):n},t.domain=function(n){return arguments.length?(e="function"==typeof n?n:c([n[0],n[1]]),t):e},t.thresholds=function(n){return arguments.length?(r="function"==typeof n?n:Array.isArray(n)?c(Ys.call(n)):c(n),t):r},t},t.thresholdFreedmanDiaconis=function(t,e,r){return t=Bs.call(t,i).sort(n),Math.ceil((r-e)/(2*(v(t,.75)-v(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*u(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=d,t.max=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e>r&&(r=e);return r},t.mean=function(t,n){var e,r=t.length,o=r,u=-1,a=0;if(null==n)for(;++u<r;)isNaN(e=i(t[u]))?--o:a+=e;else for(;++u<r;)isNaN(e=i(n(t[u],u,t)))?--o:a+=e;if(o)return a/o},t.median=function(t,e){var r,o=t.length,u=-1,a=[];if(null==e)for(;++u<o;)isNaN(r=i(t[u]))||a.push(r);else for(;++u<o;)isNaN(r=i(e(t[u],u,t)))||a.push(r);return v(a.sort(n),.5)},t.merge=g,t.min=_,t.pairs=function(t,n){null==n&&(n=r);for(var e=0,i=t.length-1,o=t[0],u=new Array(i<0?0:i);e<i;)u[e]=n(o,o=t[++e]);return u},t.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},t.quantile=v,t.range=f,t.scan=function(t,e){if(r=t.length){var r,i,o=0,u=0,a=t[u];for(null==e&&(e=n);++o<r;)(e(i=t[o],a)<0||0!==e(a,a))&&(a=i,u=o);return 0===e(a,a)?u:void 0}},t.shuffle=function(t,n,e){for(var r,i,o=(null==e?t.length:e)-(n=null==n?0:+n);o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},t.sum=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o},t.ticks=l,t.tickIncrement=h,t.tickStep=p,t.transpose=y,t.variance=o,t.zip=function(){return y(arguments)},t.axisTop=function(t){return T($s,t)},t.axisRight=function(t){return T(Ws,t)},t.axisBottom=function(t){return T(Zs,t)},t.axisLeft=function(t){return T(Gs,t)},t.brush=function(){return Kn(oh)},t.brushX=function(){return Kn(rh)},t.brushY=function(){return Kn(ih)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.chord=function(){function t(t){var o,u,a,c,s,l,h=t.length,p=[],d=f(h),v=[],g=[],_=g.groups=new Array(h),y=new Array(h*h);for(o=0,s=-1;++s<h;){for(u=0,l=-1;++l<h;)u+=t[s][l];p.push(u),v.push(f(h)),o+=u}for(e&&d.sort(function(t,n){return e(p[t],p[n])}),r&&v.forEach(function(n,e){n.sort(function(n,i){return r(t[e][n],t[e][i])})}),c=(o=gh(0,vh-n*h)/o)?n:vh/h,u=0,s=-1;++s<h;){for(a=u,l=-1;++l<h;){var m=d[s],x=v[m][l],b=t[m][x],w=u,M=u+=b*o;y[x*h+m]={index:m,subindex:x,startAngle:w,endAngle:M,value:b}}_[m]={index:m,startAngle:a,endAngle:u,value:p[m]},u+=c}for(s=-1;++s<h;)for(l=s-1;++l<h;){var T=y[l*h+s],N=y[s*h+l];(T.value||N.value)&&g.push(T.value<N.value?{source:N,target:T}:{source:T,target:N})}return i?g.sort(i):g}var n=0,e=null,r=null,i=null;return t.padAngle=function(e){return arguments.length?(n=gh(0,e),t):n},t.sortGroups=function(n){return arguments.length?(e=n,t):e},t.sortSubgroups=function(n){return arguments.length?(r=n,t):r},t.sortChords=function(n){return arguments.length?(null==n?i=null:(i=function(t){return function(n,e){return t(n.source.value+n.target.value,e.source.value+e.target.value)}}(n))._=n,t):i&&i._},t},t.ribbon=function(){function t(){var t,a=_h.call(arguments),c=n.apply(this,a),s=e.apply(this,a),f=+r.apply(this,(a[0]=c,a)),l=i.apply(this,a)-dh,h=o.apply(this,a)-dh,p=f*lh(l),d=f*hh(l),v=+r.apply(this,(a[0]=s,a)),g=i.apply(this,a)-dh,_=o.apply(this,a)-dh;if(u||(u=t=ee()),u.moveTo(p,d),u.arc(0,0,f,l,h),l===g&&h===_||(u.quadraticCurveTo(0,0,v*lh(g),v*hh(g)),u.arc(0,0,v,g,_)),u.quadraticCurveTo(0,0,p,d),u.closePath(),t)return u=null,t+""||null}var n=re,e=ie,r=oe,i=ue,o=ae,u=null;return t.radius=function(n){return arguments.length?(r="function"==typeof n?n:te(+n),t):r},t.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:te(+n),t):i},t.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:te(+n),t):o},t.source=function(e){return arguments.length?(n=e,t):n},t.target=function(n){return arguments.length?(e=n,t):e},t.context=function(n){return arguments.length?(u=null==n?null:n,t):u},t},t.nest=function(){function t(n,i,u,a){if(i>=o.length)return null!=e&&n.sort(e),null!=r?r(n):n;for(var c,s,f,l=-1,h=n.length,p=o[i++],d=se(),v=u();++l<h;)(f=d.get(c=p(s=n[l])+""))?f.push(s):d.set(c,[s]);return d.each(function(n,e){a(v,e,t(n,i,u,a))}),v}function n(t,e){if(++e>o.length)return t;var i,a=u[e-1];return null!=r&&e>=o.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:n(t,e)})})),null!=a?i.sort(function(t,n){return a(t.key,n.key)}):i}var e,r,i,o=[],u=[];return i={object:function(n){return t(n,0,fe,le)},map:function(n){return t(n,0,he,pe)},entries:function(e){return n(t(e,0,he,pe),0)},key:function(t){return o.push(t),i},sortKeys:function(t){return u[o.length-1]=t,i},sortValues:function(t){return e=t,i},rollup:function(t){return r=t,i}}},t.set=ve,t.map=se,t.keys=function(t){var n=[];for(var e in t)n.push(e);return n},t.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},t.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},t.color=Et,t.rgb=Pt,t.hsl=qt,t.lab=Ft,t.hcl=Xt,t.cubehelix=$t,t.dispatch=N,t.drag=function(){function n(t){t.on("mousedown.drag",e).filter(g).on("touchstart.drag",o).on("touchmove.drag",u).on("touchend.drag touchcancel.drag",a).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(){if(!h&&p.apply(this,arguments)){var n=c("mouse",d.apply(this,arguments),pt,this,arguments);n&&(ct(t.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",i,!0),_t(t.event.view),vt(),l=!1,s=t.event.clientX,f=t.event.clientY,n("start"))}}function r(){if(gt(),!l){var n=t.event.clientX-s,e=t.event.clientY-f;l=n*n+e*e>x}_.mouse("drag")}function i(){ct(t.event.view).on("mousemove.drag mouseup.drag",null),yt(t.event.view,l),gt(),_.mouse("end")}function o(){if(p.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=d.apply(this,arguments),o=r.length;for(n=0;n<o;++n)(e=c(r[n].identifier,i,dt,this,arguments))&&(vt(),e("start"))}}function u(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=_[r[n].identifier])&&(gt(),e("drag"))}function a(){var n,e,r=t.event.changedTouches,i=r.length;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),n=0;n<i;++n)(e=_[r[n].identifier])&&(vt(),e("end"))}function c(e,r,i,o,u){var a,c,s,f=i(r,e),l=y.copy();if(it(new xt(n,"beforestart",a,e,m,f[0],f[1],0,0,l),function(){return null!=(t.event.subject=a=v.apply(o,u))&&(c=a.x-f[0]||0,s=a.y-f[1]||0,!0)}))return function t(h){var p,d=f;switch(h){case"start":_[e]=t,p=m++;break;case"end":delete _[e],--m;case"drag":f=i(r,e),p=m}it(new xt(n,h,a,e,p,f[0]+c,f[1]+s,f[0]-d[0],f[1]-d[1],l),l.apply,l,[h,o,u])}}var s,f,l,h,p=bt,d=wt,v=Mt,g=Tt,_={},y=N("start","drag","end"),m=0,x=0;return n.filter=function(t){return arguments.length?(p="function"==typeof t?t:mt(!!t),n):p},n.container=function(t){return arguments.length?(d="function"==typeof t?t:mt(t),n):d},n.subject=function(t){return arguments.length?(v="function"==typeof t?t:mt(t),n):v},n.touchable=function(t){return arguments.length?(g="function"==typeof t?t:mt(!!t),n):g},n.on=function(){var t=y.on.apply(y,arguments);return t===y?n:t},n.clickDistance=function(t){return arguments.length?(x=(t=+t)*t,n):Math.sqrt(x)},n},t.dragDisable=_t,t.dragEnable=yt,t.dsvFormat=_e,t.csvParse=Eh,t.csvParseRows=Ah,t.csvFormat=Ch,t.csvFormatRows=zh,t.tsvParse=Rh,t.tsvParseRows=Lh,t.tsvFormat=qh,t.tsvFormatRows=Dh,t.easeLinear=function(t){return+t},t.easeQuad=On,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=On,t.easeCubic=Fn,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=Fn,t.easePoly=zl,t.easePolyIn=Al,t.easePolyOut=Cl,t.easePolyInOut=zl,t.easeSin=In,t.easeSinIn=function(t){return 1-Math.cos(t*Rl)},t.easeSinOut=function(t){return Math.sin(t*Rl)},t.easeSinInOut=In,t.easeExp=Yn,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=Yn,t.easeCircle=Bn,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=Bn,t.easeBounce=Hn,t.easeBounceIn=function(t){return 1-Hn(1-t)},t.easeBounceOut=Hn,t.easeBounceInOut=function(t){return((t*=2)<=1?1-Hn(1-t):Hn(t-1)+1)/2},t.easeBack=Vl,t.easeBackIn=jl,t.easeBackOut=Xl,t.easeBackInOut=Vl,t.easeElastic=Zl,t.easeElasticIn=Wl,t.easeElasticOut=Zl,t.easeElasticInOut=Gl,t.forceCenter=function(t,n){function e(){var e,i,o=r.length,u=0,a=0;for(e=0;e<o;++e)u+=(i=r[e]).x,a+=i.y;for(u=u/o-t,a=a/o-n,e=0;e<o;++e)(i=r[e]).x-=u,i.y-=a}var r;return null==t&&(t=0),null==n&&(n=0),e.initialize=function(t){r=t},e.x=function(n){return arguments.length?(t=+n,e):t},e.y=function(t){return arguments.length?(n=+t,e):n},e},t.forceCollide=function(t){function n(){for(var t,n,r,c,s,f,l,h=i.length,p=0;p<a;++p)for(n=Te(i,Se,Ee).visitAfter(e),t=0;t<h;++t)r=i[t],f=o[r.index],l=f*f,c=r.x+r.vx,s=r.y+r.vy,n.visit(function(t,n,e,i,o){var a=t.data,h=t.r,p=f+h;if(!a)return n>c+p||i<c-p||e>s+p||o<s-p;if(a.index>r.index){var d=c-a.x-a.vx,v=s-a.y-a.vy,g=d*d+v*v;g<p*p&&(0===d&&(d=me(),g+=d*d),0===v&&(v=me(),g+=v*v),g=(p-(g=Math.sqrt(g)))/g*u,r.vx+=(d*=g)*(p=(h*=h)/(l+h)),r.vy+=(v*=g)*p,a.vx-=d*(p=1-p),a.vy-=v*p)}})}function e(t){if(t.data)return t.r=o[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function r(){if(i){var n,e,r=i.length;for(o=new Array(r),n=0;n<r;++n)e=i[n],o[e.index]=+t(e,n,i)}}var i,o,u=1,a=1;return"function"!=typeof t&&(t=ye(null==t?1:+t)),n.initialize=function(t){i=t,r()},n.iterations=function(t){return arguments.length?(a=+t,n):a},n.strength=function(t){return arguments.length?(u=+t,n):u},n.radius=function(e){return arguments.length?(t="function"==typeof e?e:ye(+e),r(),n):t},n},t.forceLink=function(t){function n(n){for(var e=0,r=t.length;e<p;++e)for(var i,a,c,f,l,h,d,v=0;v<r;++v)a=(i=t[v]).source,f=(c=i.target).x+c.vx-a.x-a.vx||me(),l=c.y+c.vy-a.y-a.vy||me(),f*=h=((h=Math.sqrt(f*f+l*l))-u[v])/h*n*o[v],l*=h,c.vx-=f*(d=s[v]),c.vy-=l*d,a.vx+=f*(d=1-d),a.vy+=l*d}function e(){if(a){var n,e,l=a.length,h=t.length,p=se(a,f);for(n=0,c=new Array(l);n<h;++n)(e=t[n]).index=n,"object"!=typeof e.source&&(e.source=Ce(p,e.source)),"object"!=typeof e.target&&(e.target=Ce(p,e.target)),c[e.source.index]=(c[e.source.index]||0)+1,c[e.target.index]=(c[e.target.index]||0)+1;for(n=0,s=new Array(h);n<h;++n)e=t[n],s[n]=c[e.source.index]/(c[e.source.index]+c[e.target.index]);o=new Array(h),r(),u=new Array(h),i()}}function r(){if(a)for(var n=0,e=t.length;n<e;++n)o[n]=+l(t[n],n,t)}function i(){if(a)for(var n=0,e=t.length;n<e;++n)u[n]=+h(t[n],n,t)}var o,u,a,c,s,f=Ae,l=function(t){return 1/Math.min(c[t.source.index],c[t.target.index])},h=ye(30),p=1;return null==t&&(t=[]),n.initialize=function(t){a=t,e()},n.links=function(r){return arguments.length?(t=r,e(),n):t},n.id=function(t){return arguments.length?(f=t,n):f},n.iterations=function(t){return arguments.length?(p=+t,n):p},n.strength=function(t){return arguments.length?(l="function"==typeof t?t:ye(+t),r(),n):l},n.distance=function(t){return arguments.length?(h="function"==typeof t?t:ye(+t),i(),n):h},n},t.forceManyBody=function(){function t(t){var n,a=i.length,c=Te(i,ze,Pe).visitAfter(e);for(u=t,n=0;n<a;++n)o=i[n],c.visit(r)}function n(){if(i){var t,n,e=i.length;for(a=new Array(e),t=0;t<e;++t)n=i[t],a[n.index]=+c(n,t,i)}}function e(t){var n,e,r,i,o,u=0,c=0;if(t.length){for(r=i=o=0;o<4;++o)(n=t[o])&&(e=Math.abs(n.value))&&(u+=n.value,c+=e,r+=e*n.x,i+=e*n.y);t.x=r/c,t.y=i/c}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=a[n.data.index]}while(n=n.next)}t.value=u}function r(t,n,e,r){if(!t.value)return!0;var i=t.x-o.x,c=t.y-o.y,h=r-n,p=i*i+c*c;if(h*h/l<p)return p<f&&(0===i&&(i=me(),p+=i*i),0===c&&(c=me(),p+=c*c),p<s&&(p=Math.sqrt(s*p)),o.vx+=i*t.value*u/p,o.vy+=c*t.value*u/p),!0;if(!(t.length||p>=f)){(t.data!==o||t.next)&&(0===i&&(i=me(),p+=i*i),0===c&&(c=me(),p+=c*c),p<s&&(p=Math.sqrt(s*p)));do{t.data!==o&&(h=a[t.data.index]*u/p,o.vx+=i*h,o.vy+=c*h)}while(t=t.next)}}var i,o,u,a,c=ye(-30),s=1,f=1/0,l=.81;return t.initialize=function(t){i=t,n()},t.strength=function(e){return arguments.length?(c="function"==typeof e?e:ye(+e),n(),t):c},t.distanceMin=function(n){return arguments.length?(s=n*n,t):Math.sqrt(s)},t.distanceMax=function(n){return arguments.length?(f=n*n,t):Math.sqrt(f)},t.theta=function(n){return arguments.length?(l=n*n,t):Math.sqrt(l)},t},t.forceRadial=function(t,n,e){function r(t){for(var r=0,i=o.length;r<i;++r){var c=o[r],s=c.x-n||1e-6,f=c.y-e||1e-6,l=Math.sqrt(s*s+f*f),h=(a[r]-l)*u[r]*t/l;c.vx+=s*h,c.vy+=f*h}}function i(){if(o){var n,e=o.length;for(u=new Array(e),a=new Array(e),n=0;n<e;++n)a[n]=+t(o[n],n,o),u[n]=isNaN(a[n])?0:+c(o[n],n,o)}}var o,u,a,c=ye(.1);return"function"!=typeof t&&(t=ye(+t)),null==n&&(n=0),null==e&&(e=0),r.initialize=function(t){o=t,i()},r.strength=function(t){return arguments.length?(c="function"==typeof t?t:ye(+t),i(),r):c},r.radius=function(n){return arguments.length?(t="function"==typeof n?n:ye(+n),i(),r):t},r.x=function(t){return arguments.length?(n=+t,r):n},r.y=function(t){return arguments.length?(e=+t,r):e},r},t.forceSimulation=function(t){function n(){e(),p.call("tick",o),u<a&&(h.stop(),p.call("end",o))}function e(){var n,e,r=t.length;for(u+=(s-u)*c,l.each(function(t){t(u)}),n=0;n<r;++n)null==(e=t[n]).fx?e.x+=e.vx*=f:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=f:(e.y=e.fy,e.vy=0)}function r(){for(var n,e=0,r=t.length;e<r;++e){if(n=t[e],n.index=e,isNaN(n.x)||isNaN(n.y)){var i=Fh*Math.sqrt(e),o=e*Ih;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function i(n){return n.initialize&&n.initialize(t),n}var o,u=1,a=.001,c=1-Math.pow(a,1/300),s=0,f=.6,l=se(),h=wn(n),p=N("tick","end");return null==t&&(t=[]),r(),o={tick:e,restart:function(){return h.restart(n),o},stop:function(){return h.stop(),o},nodes:function(n){return arguments.length?(t=n,r(),l.each(i),o):t},alpha:function(t){return arguments.length?(u=+t,o):u},alphaMin:function(t){return arguments.length?(a=+t,o):a},alphaDecay:function(t){return arguments.length?(c=+t,o):+c},alphaTarget:function(t){return arguments.length?(s=+t,o):s},velocityDecay:function(t){return arguments.length?(f=1-t,o):1-f},force:function(t,n){return arguments.length>1?(null==n?l.remove(t):l.set(t,i(n)),o):l.get(t)},find:function(n,e,r){var i,o,u,a,c,s=0,f=t.length;for(null==r?r=1/0:r*=r,s=0;s<f;++s)(u=(i=n-(a=t[s]).x)*i+(o=e-a.y)*o)<r&&(c=a,r=u);return c},on:function(t,n){return arguments.length>1?(p.on(t,n),o):p.on(t)}}},t.forceX=function(t){function n(t){for(var n,e=0,u=r.length;e<u;++e)(n=r[e]).vx+=(o[e]-n.x)*i[e]*t}function e(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)i[n]=isNaN(o[n]=+t(r[n],n,r))?0:+u(r[n],n,r)}}var r,i,o,u=ye(.1);return"function"!=typeof t&&(t=ye(null==t?0:+t)),n.initialize=function(t){r=t,e()},n.strength=function(t){return arguments.length?(u="function"==typeof t?t:ye(+t),e(),n):u},n.x=function(r){return arguments.length?(t="function"==typeof r?r:ye(+r),e(),n):t},n},t.forceY=function(t){function n(t){for(var n,e=0,u=r.length;e<u;++e)(n=r[e]).vy+=(o[e]-n.y)*i[e]*t}function e(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)i[n]=isNaN(o[n]=+t(r[n],n,r))?0:+u(r[n],n,r)}}var r,i,o,u=ye(.1);return"function"!=typeof t&&(t=ye(null==t?0:+t)),n.initialize=function(t){r=t,e()},n.strength=function(t){return arguments.length?(u="function"==typeof t?t:ye(+t),e(),n):u},n.y=function(r){return arguments.length?(t="function"==typeof r?r:ye(+r),e(),n):t},n},t.formatDefaultLocale=Ie,t.formatLocale=Fe,t.formatSpecifier=De,t.precisionFixed=Ye,t.precisionPrefix=Be,t.precisionRound=He,t.geoArea=function(t){return Vp.reset(),tr(t,$p),2*Vp},t.geoBounds=function(t){var n,e,r,i,o,u,a;if(Kh=Jh=-(Gh=Qh=1/0),ip=[],tr(t,Zp),e=ip.length){for(ip.sort(xr),n=1,o=[r=ip[0]];n<e;++n)br(r,(i=ip[n])[0])||br(r,i[1])?(mr(r[0],i[1])>mr(r[0],r[1])&&(r[1]=i[1]),mr(i[0],r[1])>mr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(u=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(a=mr(r[1],i[0]))>u&&(u=a,Gh=i[0],Jh=r[1])}return ip=op=null,Gh===1/0||Qh===1/0?[[NaN,NaN],[NaN,NaN]]:[[Gh,Qh],[Jh,Kh]]},t.geoCentroid=function(t){up=ap=cp=sp=fp=lp=hp=pp=dp=vp=gp=0,tr(t,Gp);var n=dp,e=vp,r=gp,i=n*n+e*e+r*r;return i<Tp&&(n=lp,e=hp,r=pp,ap<Mp&&(n=cp,e=sp,r=fp),(i=n*n+e*e+r*r)<Tp)?[NaN,NaN]:[Rp(e,n)*Ap,We(r/Yp(i))*Ap]},t.geoCircle=function(){function t(){var t=r.apply(this,arguments),a=i.apply(this,arguments)*Cp,c=o.apply(this,arguments)*Cp;return n=[],e=qr(-t[0]*Cp,-t[1]*Cp,0).invert,Ir(u,a,c,1),t={type:"Polygon",coordinates:[n]},n=e=null,t}var n,e,r=Pr([0,0]),i=Pr(90),o=Pr(6),u={point:function(t,r){n.push(t=e(t,r)),t[0]*=Ap,t[1]*=Ap}};return t.center=function(n){return arguments.length?(r="function"==typeof n?n:Pr([+n[0],+n[1]]),t):r},t.radius=function(n){return arguments.length?(i="function"==typeof n?n:Pr(+n),t):i},t.precision=function(n){return arguments.length?(o="function"==typeof n?n:Pr(+n),t):o},t},t.geoClipAntimeridian=sd,t.geoClipCircle=Qr,t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,u=500;return e={stream:function(e){return t&&n===e?t:t=Jr(r,i,o,u)(n=e)},extent:function(a){return arguments.length?(r=+a[0][0],i=+a[0][1],o=+a[1][0],u=+a[1][1],t=n=null,e):[[r,i],[o,u]]}}},t.geoClipRectangle=Jr,t.geoContains=function(t,n){return(t&&gd.hasOwnProperty(t.type)?gd[t.type]:ii)(t,n)},t.geoDistance=ri,t.geoGraticule=hi,t.geoGraticule10=function(){return hi()()},t.geoInterpolate=function(t,n){var e=t[0]*Cp,r=t[1]*Cp,i=n[0]*Cp,o=n[1]*Cp,u=Lp(r),a=Fp(r),c=Lp(o),s=Fp(o),f=u*Lp(e),l=u*Fp(e),h=c*Lp(i),p=c*Fp(i),d=2*We(Yp(Ze(o-r)+u*c*Ze(i-e))),v=Fp(d),g=d?function(t){var n=Fp(t*=d)/v,e=Fp(d-t)/v,r=e*f+n*h,i=e*l+n*p,o=e*a+n*s;return[Rp(i,r)*Ap,Rp(o,Yp(r*r+i*i))*Ap]}:function(){return[e*Ap,r*Ap]};return g.distance=d,g},t.geoLength=ei,t.geoPath=function(t,n){function e(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),tr(t,r(i))),i.result()}var r,i,o=4.5;return e.area=function(t){return tr(t,r(xd)),xd.result()},e.measure=function(t){return tr(t,r(Bd)),Bd.result()},e.bounds=function(t){return tr(t,r(Nd)),Nd.result()},e.centroid=function(t){return tr(t,r(qd)),qd.result()},e.projection=function(n){return arguments.length?(r=null==n?(t=null,pi):(t=n).stream,e):t},e.context=function(t){return arguments.length?(i=null==t?(n=null,new Ci):new Si(n=t),"function"!=typeof o&&i.pointRadius(o),e):n},e.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),e):o},e.projection(t).context(n)},t.geoAlbers=Xi,t.geoAlbersUsa=function(){function t(t){var n=t[0],e=t[1];return a=null,i.point(n,e),a||(o.point(n,e),a)||(u.point(n,e),a)}function n(){return e=r=null,t}var e,r,i,o,u,a,c=Xi(),s=ji().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f=ji().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){a=[t,n]}};return t.invert=function(t){var n=c.scale(),e=c.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?f:c).invert(t)},t.stream=function(t){return e&&r===t?e:e=function(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}([c.stream(r=t),s.stream(t),f.stream(t)])},t.precision=function(t){return arguments.length?(c.precision(t),s.precision(t),f.precision(t),n()):c.precision()},t.scale=function(n){return arguments.length?(c.scale(n),s.scale(.35*n),f.scale(n),t.translate(c.translate())):c.scale()},t.translate=function(t){if(!arguments.length)return c.translate();var e=c.scale(),r=+t[0],a=+t[1];return i=c.translate(t).clipExtent([[r-.455*e,a-.238*e],[r+.455*e,a+.238*e]]).stream(l),o=s.translate([r-.307*e,a+.201*e]).clipExtent([[r-.425*e+Mp,a+.12*e+Mp],[r-.214*e-Mp,a+.234*e-Mp]]).stream(l),u=f.translate([r-.205*e,a+.212*e]).clipExtent([[r-.214*e+Mp,a+.166*e+Mp],[r-.115*e-Mp,a+.234*e-Mp]]).stream(l),n()},t.fitExtent=function(n,e){return qi(t,n,e)},t.fitSize=function(n,e){return Di(t,n,e)},t.fitWidth=function(n,e){return Ui(t,n,e)},t.fitHeight=function(n,e){return Oi(t,n,e)},t.scale(1070)},t.geoAzimuthalEqualArea=function(){return Ii(Vd).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Vd,t.geoAzimuthalEquidistant=function(){return Ii($d).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=$d,t.geoConicConformal=function(){return Bi(Qi).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Qi,t.geoConicEqualArea=ji,t.geoConicEqualAreaRaw=Hi,t.geoConicEquidistant=function(){return Bi(Ki).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Ki,t.geoEquirectangular=function(){return Ii(Ji).scale(152.63)},t.geoEquirectangularRaw=Ji,t.geoGnomonic=function(){return Ii(to).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=to,t.geoIdentity=function(){function t(){return i=o=null,u}var n,e,r,i,o,u,a=1,c=0,s=0,f=1,l=1,h=pi,p=null,d=pi;return u={stream:function(t){return i&&o===t?i:i=h(d(o=t))},postclip:function(i){return arguments.length?(d=i,p=n=e=r=null,t()):d},clipExtent:function(i){return arguments.length?(d=null==i?(p=n=e=r=null,pi):Jr(p=+i[0][0],n=+i[0][1],e=+i[1][0],r=+i[1][1]),t()):null==p?null:[[p,n],[e,r]]},scale:function(n){return arguments.length?(h=no((a=+n)*f,a*l,c,s),t()):a},translate:function(n){return arguments.length?(h=no(a*f,a*l,c=+n[0],s=+n[1]),t()):[c,s]},reflectX:function(n){return arguments.length?(h=no(a*(f=n?-1:1),a*l,c,s),t()):f<0},reflectY:function(n){return arguments.length?(h=no(a*f,a*(l=n?-1:1),c,s),t()):l<0},fitExtent:function(t,n){return qi(u,t,n)},fitSize:function(t,n){return Di(u,t,n)},fitWidth:function(t,n){return Ui(u,t,n)},fitHeight:function(t,n){return Oi(u,t,n)}}},t.geoProjection=Ii,t.geoProjectionMutator=Yi,t.geoMercator=function(){return Zi(Wi).scale(961/Ep)},t.geoMercatorRaw=Wi,t.geoNaturalEarth1=function(){return Ii(eo).scale(175.295)},t.geoNaturalEarth1Raw=eo,t.geoOrthographic=function(){return Ii(ro).scale(249.5).clipAngle(90+Mp)},t.geoOrthographicRaw=ro,t.geoStereographic=function(){return Ii(io).scale(250).clipAngle(142)},t.geoStereographicRaw=io,t.geoTransverseMercator=function(){var t=Zi(oo),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=oo,t.geoRotation=Fr,t.geoStream=tr,t.geoTransform=function(t){return{stream:Pi(t)}},t.cluster=function(){function t(t){var o,u=0;t.eachAfter(function(t){var e=t.children;e?(t.x=function(t){return t.reduce(ao,0)/t.length}(e),t.y=function(t){return 1+t.reduce(co,0)}(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var a=function(t){for(var n;n=t.children;)t=n[0];return t}(t),c=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(t),s=a.x-n(a,c)/2,f=c.x+n(c,a)/2;return t.eachAfter(i?function(n){n.x=(n.x-t.x)*e,n.y=(t.y-n.y)*r}:function(n){n.x=(n.x-s)/(f-s)*e,n.y=(1-(t.y?n.y/t.y:1))*r})}var n=uo,e=1,r=1,i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(n){return arguments.length?(i=!1,e=+n[0],r=+n[1],t):i?null:[e,r]},t.nodeSize=function(n){return arguments.length?(i=!0,e=+n[0],r=+n[1],t):i?[e,r]:null},t},t.hierarchy=fo,t.pack=function(){function t(t){return t.x=e/2,t.y=r/2,n?t.eachBefore(zo(n)).eachAfter(Po(i,.5)).eachBefore(Ro(1)):t.eachBefore(zo(Co)).eachAfter(Po(Eo,1)).eachAfter(Po(i,t.r/Math.min(e,r))).eachBefore(Ro(Math.min(e,r)/(2*t.r))),t}var n=null,e=1,r=1,i=Eo;return t.radius=function(e){return arguments.length?(n=function(t){return null==t?null:So(t)}(e),t):n},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i="function"==typeof n?n:Ao(+n),t):i},t},t.packSiblings=function(t){return ko(t),t},t.packEnclose=go,t.partition=function(){function t(t){var o=t.height+1;return t.x0=t.y0=r,t.x1=n,t.y1=e/o,t.eachBefore(function(t,n){return function(e){e.children&&qo(e,e.x0,t*(e.depth+1)/n,e.x1,t*(e.depth+2)/n);var i=e.x0,o=e.y0,u=e.x1-r,a=e.y1-r;u<i&&(i=u=(i+u)/2),a<o&&(o=a=(o+a)/2),e.x0=i,e.y0=o,e.x1=u,e.y1=a}}(e,o)),i&&t.eachBefore(Lo),t}var n=1,e=1,r=0,i=!1;return t.round=function(n){return arguments.length?(i=!!n,t):i},t.size=function(r){return arguments.length?(n=+r[0],e=+r[1],t):[n,e]},t.padding=function(n){return arguments.length?(r=+n,t):r},t},t.stratify=function(){function t(t){var r,i,o,u,a,c,s,f=t.length,l=new Array(f),h={};for(i=0;i<f;++i)r=t[i],a=l[i]=new vo(r),null!=(c=n(r,i,t))&&(c+="")&&(h[s=Zd+(a.id=c)]=s in h?Qd:a);for(i=0;i<f;++i)if(a=l[i],null!=(c=e(t[i],i,t))&&(c+="")){if(!(u=h[Zd+c]))throw new Error("missing: "+c);if(u===Qd)throw new Error("ambiguous: "+c);u.children?u.children.push(a):u.children=[a],a.parent=u}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=Gd,o.eachBefore(function(t){t.depth=t.parent.depth+1,--f}).eachBefore(po),o.parent=null,f>0)throw new Error("cycle");return o}var n=Do,e=Uo;return t.id=function(e){return arguments.length?(n=So(e),t):n},t.parentId=function(n){return arguments.length?(e=So(n),t):e},t},t.tree=function(){function t(t){var c=function(t){for(var n,e,r,i,o,u=new Ho(t,0),a=[u];n=a.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)a.push(e=n.children[i]=new Ho(r[i],i)),e.parent=n;return(u.parent=new Ho(null,0)).children=[u],u}(t);if(c.eachAfter(n),c.parent.m=-c.z,c.eachBefore(e),a)t.eachBefore(r);else{var s=t,f=t,l=t;t.eachBefore(function(t){t.x<s.x&&(s=t),t.x>f.x&&(f=t),t.depth>l.depth&&(l=t)});var h=s===f?1:i(s,f)/2,p=h-s.x,d=o/(f.x+h+p),v=u/(l.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*v})}return t}function n(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n){(function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)})(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+i(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+i(t._,r._));t.parent.A=function(t,n,e){if(n){for(var r,o=t,u=t,a=n,c=o.parent.children[0],s=o.m,f=u.m,l=a.m,h=c.m;a=Io(a),o=Fo(o),a&&o;)c=Fo(c),(u=Io(u)).a=t,(r=a.z+l-o.z-s+i(a._,o._))>0&&(Yo(Bo(a,t,e),t,r),s+=r,f+=r),l+=a.m,s+=o.m,h+=c.m,f+=u.m;a&&!Io(u)&&(u.t=a,u.m+=l-f),o&&!Fo(c)&&(c.t=o,c.m+=s-h,e=t)}return e}(t,r,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=o,t.y=t.depth*u}var i=Oo,o=1,u=1,a=null;return t.separation=function(n){return arguments.length?(i=n,t):i},t.size=function(n){return arguments.length?(a=!1,o=+n[0],u=+n[1],t):a?null:[o,u]},t.nodeSize=function(n){return arguments.length?(a=!0,o=+n[0],u=+n[1],t):a?[o,u]:null},t},t.treemap=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(n),u=[0],r&&t.eachBefore(Lo),t}function n(t){var n=u[t.depth],r=t.x0+n,i=t.y0+n,o=t.x1-n,h=t.y1-n;o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=h,t.children&&(n=u[t.depth+1]=a(t)/2,r+=l(t)-n,i+=c(t)-n,o-=s(t)-n,h-=f(t)-n,o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),e(t,r,i,o,h))}var e=Kd,r=!1,i=1,o=1,u=[0],a=Eo,c=Eo,s=Eo,f=Eo,l=Eo;return t.round=function(n){return arguments.length?(r=!!n,t):r},t.size=function(n){return arguments.length?(i=+n[0],o=+n[1],t):[i,o]},t.tile=function(n){return arguments.length?(e=So(n),t):e},t.padding=function(n){return arguments.length?t.paddingInner(n).paddingOuter(n):t.paddingInner()},t.paddingInner=function(n){return arguments.length?(a="function"==typeof n?n:Ao(+n),t):a},t.paddingOuter=function(n){return arguments.length?t.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):t.paddingTop()},t.paddingTop=function(n){return arguments.length?(c="function"==typeof n?n:Ao(+n),t):c},t.paddingRight=function(n){return arguments.length?(s="function"==typeof n?n:Ao(+n),t):s},t.paddingBottom=function(n){return arguments.length?(f="function"==typeof n?n:Ao(+n),t):f},t.paddingLeft=function(n){return arguments.length?(l="function"==typeof n?n:Ao(+n),t):l},t},t.treemapBinary=function(t,n,e,r,i){function o(t,n,e,r,i,u,a){if(t>=n-1){var s=c[t];return s.x0=r,s.y0=i,s.x1=u,void(s.y1=a)}for(var l=f[t],h=e/2+l,p=t+1,d=n-1;p<d;){var v=p+d>>>1;f[v]<h?p=v+1:d=v}h-f[p-1]<f[p]-h&&t+1<p&&--p;var g=f[p]-l,_=e-g;if(u-r>a-i){var y=(r*_+u*g)/e;o(t,p,g,r,i,y,a),o(p,n,_,y,i,u,a)}else{var m=(i*_+a*g)/e;o(t,p,g,r,i,u,m),o(p,n,_,r,m,u,a)}}var u,a,c=t.children,s=c.length,f=new Array(s+1);for(f[0]=a=u=0;u<s;++u)f[u+1]=a+=c[u].value;o(0,s,t.value,n,e,r,i)},t.treemapDice=qo,t.treemapSlice=jo,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?jo:qo)(t,n,e,r,i)},t.treemapSquarify=Kd,t.treemapResquarify=tv,t.interpolate=fn,t.interpolateArray=on,t.interpolateBasis=Gt,t.interpolateBasisClosed=Qt,t.interpolateDate=un,t.interpolateNumber=an,t.interpolateObject=cn,t.interpolateRound=ln,t.interpolateString=sn,t.interpolateTransformCss=Gf,t.interpolateTransformSvg=Qf,t.interpolateZoom=vn,t.interpolateRgb=Hf,t.interpolateRgbBasis=jf,t.interpolateRgbBasisClosed=Xf,t.interpolateHsl=el,t.interpolateHslLong=rl,t.interpolateLab=function(t,n){var e=en((t=Ft(t)).l,(n=Ft(n)).l),r=en(t.a,n.a),i=en(t.b,n.b),o=en(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}},t.interpolateHcl=il,t.interpolateHclLong=ol,t.interpolateCubehelix=ul,t.interpolateCubehelixLong=al,t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.path=ee,t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,u=0,a=t[i-1],c=0;++r<i;)n=a,a=t[r],c+=e=n[0]*a[1]-a[0]*n[1],o+=(n[0]+a[0])*e,u+=(n[1]+a[1])*e;return c*=3,[o/c,u/c]},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort($o),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=Wo(r),u=Wo(i),a=u[0]===o[0],c=u[u.length-1]===o[o.length-1],s=[];for(n=o.length-1;n>=0;--n)s.push(t[r[o[n]][2]]);for(n=+a;n<u.length-c;++n)s.push(t[r[u[n]][2]]);return s},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],u=n[0],a=n[1],c=o[0],s=o[1],f=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>a!=s>a&&u<(c-e)*(a-r)/(s-r)+e&&(f=!f),c=e,s=r;return f},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],u=o[0],a=o[1],c=0;++r<i;)n=u,e=a,n-=u=(o=t[r])[0],e-=a=o[1],c+=Math.sqrt(n*n+e*e);return c},t.quadtree=Te,t.queue=Ko,t.randomUniform=rv,t.randomNormal=iv,t.randomLogNormal=ov,t.randomBates=av,t.randomIrwinHall=uv,t.randomExponential=cv,t.request=nu,t.html=sv,t.json=fv,t.text=lv,t.xml=hv,t.csv=pv,t.tsv=dv,t.scaleBand=ou,t.scalePoint=function(){return uu(ou().paddingInner(1))},t.scaleIdentity=gu,t.scaleLinear=vu,t.scaleLog=Tu,t.scaleOrdinal=iu,t.scaleImplicit=yv,t.scalePow=ku,t.scaleSqrt=function(){return ku().exponent(.5)},t.scaleQuantile=Su,t.scaleQuantize=Eu,t.scaleThreshold=Au,t.scaleTime=function(){return Va(Gv,Wv,Lv,Pv,Cv,Ev,kv,wv,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Va(xg,yg,ig,eg,tg,Jv,kv,wv,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=Ug,t.schemeCategory20b=Og,t.schemeCategory20c=Fg,t.schemeCategory20=Ig,t.interpolateCubehelixDefault=Yg,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return jg.h=360*t-100,jg.s=1.5-1.5*n,jg.l=.8-.9*n,jg+""},t.interpolateWarm=Bg,t.interpolateCool=Hg,t.interpolateViridis=Xg,t.interpolateMagma=Vg,t.interpolateInferno=$g,t.interpolatePlasma=Wg,t.scaleSequential=Za,t.create=function(t){return ct(A(t).call(document.documentElement))},t.creator=A,t.local=st,t.matcher=of,t.mouse=pt,t.namespace=E,t.namespaces=tf,t.clientPoint=ht,t.select=ct,t.selectAll=function(t){return"string"==typeof t?new ut([document.querySelectorAll(t)],[document.documentElement]):new ut([null==t?[]:t],cf)},t.selection=at,t.selector=z,t.selectorAll=R,t.style=I,t.touch=dt,t.touches=function(t,n){null==n&&(n=lt().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=ht(t,n[e]);return i},t.window=F,t.customEvent=it,t.arc=function(){function t(){var t,s,f=+n.apply(this,arguments),l=+e.apply(this,arguments),h=o.apply(this,arguments)-i_,p=u.apply(this,arguments)-i_,d=Zg(p-h),v=p>h;if(c||(c=t=ee()),l<f&&(s=l,l=f,f=s),l>e_)if(d>o_-e_)c.moveTo(l*Qg(h),l*t_(h)),c.arc(0,0,l,h,p,!v),f>e_&&(c.moveTo(f*Qg(p),f*t_(p)),c.arc(0,0,f,p,h,v));else{var g,_,y=h,m=p,x=h,b=p,w=d,M=d,T=a.apply(this,arguments)/2,N=T>e_&&(i?+i.apply(this,arguments):n_(f*f+l*l)),k=Kg(Zg(l-f)/2,+r.apply(this,arguments)),S=k,E=k;if(N>e_){var A=Qa(N/f*t_(T)),C=Qa(N/l*t_(T));(w-=2*A)>e_?(A*=v?1:-1,x+=A,b-=A):(w=0,x=b=(h+p)/2),(M-=2*C)>e_?(C*=v?1:-1,y+=C,m-=C):(M=0,y=m=(h+p)/2)}var z=l*Qg(y),P=l*t_(y),R=f*Qg(b),L=f*t_(b);if(k>e_){var q=l*Qg(m),D=l*t_(m),U=f*Qg(x),O=f*t_(x);if(d<r_){var F=w>e_?function(t,n,e,r,i,o,u,a){var c=e-t,s=r-n,f=u-i,l=a-o,h=(f*(n-o)-l*(t-i))/(l*c-f*s);return[t+h*c,n+h*s]}(z,P,U,O,q,D,R,L):[R,L],I=z-F[0],Y=P-F[1],B=q-F[0],H=D-F[1],j=1/t_(function(t){return t>1?0:t<-1?r_:Math.acos(t)}((I*B+Y*H)/(n_(I*I+Y*Y)*n_(B*B+H*H)))/2),X=n_(F[0]*F[0]+F[1]*F[1]);S=Kg(k,(f-X)/(j-1)),E=Kg(k,(l-X)/(j+1))}}M>e_?E>e_?(g=rc(U,O,z,P,l,E,v),_=rc(q,D,R,L,l,E,v),c.moveTo(g.cx+g.x01,g.cy+g.y01),E<k?c.arc(g.cx,g.cy,E,Gg(g.y01,g.x01),Gg(_.y01,_.x01),!v):(c.arc(g.cx,g.cy,E,Gg(g.y01,g.x01),Gg(g.y11,g.x11),!v),c.arc(0,0,l,Gg(g.cy+g.y11,g.cx+g.x11),Gg(_.cy+_.y11,_.cx+_.x11),!v),c.arc(_.cx,_.cy,E,Gg(_.y11,_.x11),Gg(_.y01,_.x01),!v))):(c.moveTo(z,P),c.arc(0,0,l,y,m,!v)):c.moveTo(z,P),f>e_&&w>e_?S>e_?(g=rc(R,L,q,D,f,-S,v),_=rc(z,P,U,O,f,-S,v),c.lineTo(g.cx+g.x01,g.cy+g.y01),S<k?c.arc(g.cx,g.cy,S,Gg(g.y01,g.x01),Gg(_.y01,_.x01),!v):(c.arc(g.cx,g.cy,S,Gg(g.y01,g.x01),Gg(g.y11,g.x11),!v),c.arc(0,0,f,Gg(g.cy+g.y11,g.cx+g.x11),Gg(_.cy+_.y11,_.cx+_.x11),v),c.arc(_.cx,_.cy,S,Gg(_.y11,_.x11),Gg(_.y01,_.x01),!v))):c.arc(0,0,f,b,x,v):c.lineTo(R,L)}else c.moveTo(0,0);if(c.closePath(),t)return c=null,t+""||null}var n=Ja,e=Ka,r=Ga(0),i=null,o=tc,u=nc,a=ec,c=null;return t.centroid=function(){var t=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-r_/2;return[Qg(r)*t,t_(r)*t]},t.innerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Ga(+e),t):n},t.outerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Ga(+n),t):e},t.cornerRadius=function(n){return arguments.length?(r="function"==typeof n?n:Ga(+n),t):r},t.padRadius=function(n){return arguments.length?(i=null==n?null:"function"==typeof n?n:Ga(+n),t):i},t.startAngle=function(n){return arguments.length?(o="function"==typeof n?n:Ga(+n),t):o},t.endAngle=function(n){return arguments.length?(u="function"==typeof n?n:Ga(+n),t):u},t.padAngle=function(n){return arguments.length?(a="function"==typeof n?n:Ga(+n),t):a},t.context=function(n){return arguments.length?(c=null==n?null:n,t):c},t},t.area=sc,t.line=cc,t.pie=function(){function t(t){var a,c,s,f,l,h=t.length,p=0,d=new Array(h),v=new Array(h),g=+i.apply(this,arguments),_=Math.min(o_,Math.max(-o_,o.apply(this,arguments)-g)),y=Math.min(Math.abs(_)/h,u.apply(this,arguments)),m=y*(_<0?-1:1);for(a=0;a<h;++a)(l=v[d[a]=a]=+n(t[a],a,t))>0&&(p+=l);for(null!=e?d.sort(function(t,n){return e(v[t],v[n])}):null!=r&&d.sort(function(n,e){return r(t[n],t[e])}),a=0,s=p?(_-h*m)/p:0;a<h;++a,g=f)c=d[a],f=g+((l=v[c])>0?l*s:0)+m,v[c]={data:t[c],index:a,value:l,startAngle:g,endAngle:f,padAngle:y};return v}var n=lc,e=fc,r=null,i=Ga(0),o=Ga(o_),u=Ga(0);return t.value=function(e){return arguments.length?(n="function"==typeof e?e:Ga(+e),t):n},t.sortValues=function(n){return arguments.length?(e=n,r=null,t):e},t.sort=function(n){return arguments.length?(r=n,e=null,t):r},t.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:Ga(+n),t):i},t.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:Ga(+n),t):o},t.padAngle=function(n){return arguments.length?(u="function"==typeof n?n:Ga(+n),t):u},t},t.areaRadial=gc,t.radialArea=gc,t.lineRadial=vc,t.radialLine=vc,t.pointRadial=_c,t.linkHorizontal=function(){return xc(bc)},t.linkVertical=function(){return xc(wc)},t.linkRadial=function(){var t=xc(Mc);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){function t(){var t;if(r||(r=t=ee()),n.apply(this,arguments).draw(r,+e.apply(this,arguments)),t)return r=null,t+""||null}var n=Ga(c_),e=Ga(64),r=null;return t.type=function(e){return arguments.length?(n="function"==typeof e?e:Ga(e),t):n},t.size=function(n){return arguments.length?(e="function"==typeof n?n:Ga(+n),t):e},t.context=function(n){return arguments.length?(r=null==n?null:n,t):r},t},t.symbols=T_,t.symbolCircle=c_,t.symbolCross=s_,t.symbolDiamond=h_,t.symbolSquare=__,t.symbolStar=g_,t.symbolTriangle=m_,t.symbolWye=M_,t.curveBasisClosed=function(t){return new Sc(t)},t.curveBasisOpen=function(t){return new Ec(t)},t.curveBasis=function(t){return new kc(t)},t.curveBundle=N_,t.curveCardinalClosed=S_,t.curveCardinalOpen=E_,t.curveCardinal=k_,t.curveCatmullRomClosed=C_,t.curveCatmullRomOpen=z_,t.curveCatmullRom=A_,t.curveLinearClosed=function(t){return new Oc(t)},t.curveLinear=oc,t.curveMonotoneX=function(t){return new Hc(t)},t.curveMonotoneY=function(t){return new jc(t)},t.curveNatural=function(t){return new Vc(t)},t.curveStep=function(t){return new Wc(t,.5)},t.curveStepAfter=function(t){return new Wc(t,1)},t.curveStepBefore=function(t){return new Wc(t,0)},t.stack=function(){function t(t){var o,u,a=n.apply(this,arguments),c=t.length,s=a.length,f=new Array(s);for(o=0;o<s;++o){for(var l,h=a[o],p=f[o]=new Array(c),d=0;d<c;++d)p[d]=l=[0,+i(t[d],h,d,t)],l.data=t[d];p.key=h}for(o=0,u=e(f);o<s;++o)f[u[o]].index=o;return r(f,u),f}var n=Ga([]),e=Gc,r=Zc,i=Qc;return t.keys=function(e){return arguments.length?(n="function"==typeof e?e:Ga(a_.call(e)),t):n},t.value=function(n){return arguments.length?(i="function"==typeof n?n:Ga(+n),t):i},t.order=function(n){return arguments.length?(e=null==n?Gc:"function"==typeof n?n:Ga(a_.call(n)),t):e},t.offset=function(n){return arguments.length?(r=null==n?Zc:n,t):r},t},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,u=t[0].length;o<u;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}Zc(t,n)}},t.stackOffsetDiverging=function(t,n){if((a=t.length)>1)for(var e,r,i,o,u,a,c=0,s=t[n[0]].length;c<s;++c)for(o=u=0,e=0;e<a;++e)(i=(r=t[n[e]][c])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=u,r[0]=u+=i):r[0]=o},t.stackOffsetNone=Zc,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var u=0,a=0;u<e;++u)a+=t[u][r][1]||0;i[r][1]+=i[r][0]=-a/2}Zc(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,u=1;u<r;++u){for(var a=0,c=0,s=0;a<i;++a){for(var f=t[n[a]],l=f[u][1]||0,h=(l-(f[u-1][1]||0))/2,p=0;p<a;++p){var d=t[n[p]];h+=(d[u][1]||0)-(d[u-1][1]||0)}c+=l,s+=h*l}e[u-1][1]+=e[u-1][0]=o,c&&(o-=s/c)}e[u-1][1]+=e[u-1][0]=o,Zc(t,n)}},t.stackOrderAscending=Jc,t.stackOrderDescending=function(t){return Jc(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(Kc),o=Gc(t).sort(function(t,n){return i[n]-i[t]}),u=0,a=0,c=[],s=[];for(n=0;n<r;++n)e=o[n],u<a?(u+=i[e],c.push(e)):(a+=i[e],s.push(e));return s.reverse().concat(c)},t.stackOrderNone=Gc,t.stackOrderReverse=function(t){return Gc(t).reverse()},t.timeInterval=Cu,t.timeMillisecond=wv,t.timeMilliseconds=Mv,t.utcMillisecond=wv,t.utcMilliseconds=Mv,t.timeSecond=kv,t.timeSeconds=Sv,t.utcSecond=kv,t.utcSeconds=Sv,t.timeMinute=Ev,t.timeMinutes=Av,t.timeHour=Cv,t.timeHours=zv,t.timeDay=Pv,t.timeDays=Rv,t.timeWeek=Lv,t.timeWeeks=Yv,t.timeSunday=Lv,t.timeSundays=Yv,t.timeMonday=qv,t.timeMondays=Bv,t.timeTuesday=Dv,t.timeTuesdays=Hv,t.timeWednesday=Uv,t.timeWednesdays=jv,t.timeThursday=Ov,t.timeThursdays=Xv,t.timeFriday=Fv,t.timeFridays=Vv,t.timeSaturday=Iv,t.timeSaturdays=$v,t.timeMonth=Wv,t.timeMonths=Zv,t.timeYear=Gv,t.timeYears=Qv,t.utcMinute=Jv,t.utcMinutes=Kv,t.utcHour=tg,t.utcHours=ng,t.utcDay=eg,t.utcDays=rg,t.utcWeek=ig,t.utcWeeks=lg,t.utcSunday=ig,t.utcSundays=lg,t.utcMonday=og,t.utcMondays=hg,t.utcTuesday=ug,t.utcTuesdays=pg,t.utcWednesday=ag,t.utcWednesdays=dg,t.utcThursday=cg,t.utcThursdays=vg,t.utcFriday=sg,t.utcFridays=gg,t.utcSaturday=fg,t.utcSaturdays=_g,t.utcMonth=yg,t.utcMonths=mg,t.utcYear=xg,t.utcYears=wg,t.timeFormatDefaultLocale=Ha,t.timeFormatLocale=Du,t.isoFormat=Eg,t.isoParse=Ag,t.now=mn,t.timer=wn,t.timerFlush=Mn,t.timeout=Sn,t.interval=function(t,n,e){var r=new bn,i=n;return null==n?(r.restart(t,n,e),r):(n=+n,e=null==e?mn():+e,r.restart(function o(u){u+=i,r.restart(o,i+=n,e),t(u)},n,e),r)},t.transition=Dn,t.active=function(t,n){var e,r,i=t.__transition;if(i){n=null==n?null:n+"";for(r in i)if((e=i[r]).state>xl&&e.name===n)return new qn([[t]],Jl,n,+r)}return null},t.interrupt=Pn,t.voronoi=function(){function t(t){return new Ns(t.map(function(r,i){var o=[Math.round(n(r,i,t)/F_)*F_,Math.round(e(r,i,t)/F_)*F_];return o.index=i,o.data=r,o}),r)}var n=ns,e=es,r=null;return t.polygons=function(n){return t(n).polygons()},t.links=function(n){return t(n).links()},t.triangles=function(n){return t(n).triangles()},t.x=function(e){return arguments.length?(n="function"==typeof e?e:ts(+e),t):n},t.y=function(n){return arguments.length?(e="function"==typeof n?n:ts(+n),t):e},t.extent=function(n){return arguments.length?(r=null==n?null:[[+n[0][0],+n[0][1]],[+n[1][0],+n[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(n){return arguments.length?(r=null==n?null:[[0,0],[+n[0],+n[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},t.zoom=function(){function n(t){t.property("__zoom",Rs).on("wheel.zoom",c).on("mousedown.zoom",s).on("dblclick.zoom",f).filter(x).on("touchstart.zoom",l).on("touchmove.zoom",h).on("touchend.zoom touchcancel.zoom",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(t,n){return(n=Math.max(b[0],Math.min(b[1],n)))===t.k?t:new Ss(n,t.x,t.y)}function r(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new Ss(t.k,r,i)}function i(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function o(t,n,e){t.on("start.zoom",function(){u(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){u(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=u(this,t),o=_.apply(this,t),a=e||i(o),c=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),s=this.__zoom,f="function"==typeof n?n.apply(this,t):n,l=T(s.invert(a).concat(c/s.k),f.invert(a).concat(c/f.k));return function(t){if(1===t)t=f;else{var n=l(t),e=c/n[2];t=new Ss(e,a[0]-n[0]*e,a[1]-n[1]*e)}r.zoom(null,t)}})}function u(t,n){for(var e,r=0,i=k.length;r<i;++r)if((e=k[r]).that===t)return e;return new a(t,n)}function a(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=_.apply(t,n)}function c(){if(g.apply(this,arguments)){var t=u(this,arguments),n=this.__zoom,i=Math.max(b[0],Math.min(b[1],n.k*Math.pow(2,m.apply(this,arguments)))),o=pt(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=n.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(n.k===i)return;t.mouse=[o,n.invert(o)],Pn(this),t.start()}Cs(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},A),t.zoom("mouse",y(r(e(n,i),t.mouse[0],t.mouse[1]),t.extent,w))}}function s(){if(!v&&g.apply(this,arguments)){var n=u(this,arguments),e=ct(t.event.view).on("mousemove.zoom",function(){if(Cs(),!n.moved){var e=t.event.clientX-o,i=t.event.clientY-a;n.moved=e*e+i*i>C}n.zoom("mouse",y(r(n.that.__zoom,n.mouse[0]=pt(n.that),n.mouse[1]),n.extent,w))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),yt(t.event.view,n.moved),Cs(),n.end()},!0),i=pt(this),o=t.event.clientX,a=t.event.clientY;_t(t.event.view),As(),n.mouse=[i,this.__zoom.invert(i)],Pn(this),n.start()}}function f(){if(g.apply(this,arguments)){var i=this.__zoom,u=pt(this),a=i.invert(u),c=i.k*(t.event.shiftKey?.5:2),s=y(r(e(i,c),u,a),_.apply(this,arguments),w);Cs(),M>0?ct(this).transition().duration(M).call(o,s,u):ct(this).call(n.transform,s)}}function l(){if(g.apply(this,arguments)){var n,e,r,i,o=u(this,arguments),a=t.event.changedTouches,c=a.length;for(As(),e=0;e<c;++e)i=[i=dt(this,a,(r=a[e]).identifier),this.__zoom.invert(i),r.identifier],o.touch0?o.touch1||(o.touch1=i):(o.touch0=i,n=!0);if(d&&(d=clearTimeout(d),!o.touch1))return o.end(),void((i=ct(this).on("dblclick.zoom"))&&i.apply(this,arguments));n&&(d=setTimeout(function(){d=null},E),Pn(this),o.start())}}function h(){var n,i,o,a,c=u(this,arguments),s=t.event.changedTouches,f=s.length;for(Cs(),d&&(d=clearTimeout(d)),n=0;n<f;++n)o=dt(this,s,(i=s[n]).identifier),c.touch0&&c.touch0[2]===i.identifier?c.touch0[0]=o:c.touch1&&c.touch1[2]===i.identifier&&(c.touch1[0]=o);if(i=c.that.__zoom,c.touch1){var l=c.touch0[0],h=c.touch0[1],p=c.touch1[0],v=c.touch1[1],g=(g=p[0]-l[0])*g+(g=p[1]-l[1])*g,_=(_=v[0]-h[0])*_+(_=v[1]-h[1])*_;i=e(i,Math.sqrt(g/_)),o=[(l[0]+p[0])/2,(l[1]+p[1])/2],a=[(h[0]+v[0])/2,(h[1]+v[1])/2]}else{if(!c.touch0)return;o=c.touch0[0],a=c.touch0[1]}c.zoom("touch",y(r(i,o,a),c.extent,w))}function p(){var n,e,r=u(this,arguments),i=t.event.changedTouches,o=i.length;for(As(),v&&clearTimeout(v),v=setTimeout(function(){v=null},E),n=0;n<o;++n)e=i[n],r.touch0&&r.touch0[2]===e.identifier?delete r.touch0:r.touch1&&r.touch1[2]===e.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}var d,v,g=zs,_=Ps,y=Ds,m=Ls,x=qs,b=[0,1/0],w=[[-1/0,-1/0],[1/0,1/0]],M=250,T=vn,k=[],S=N("start","zoom","end"),E=500,A=150,C=0;return n.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",Rs),t!==e?o(t,n):e.interrupt().each(function(){u(this,arguments).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},n.scaleBy=function(t,e){n.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},n.scaleTo=function(t,o){n.transform(t,function(){var t=_.apply(this,arguments),n=this.__zoom,u=i(t),a=n.invert(u),c="function"==typeof o?o.apply(this,arguments):o;return y(r(e(n,c),u,a),t,w)})},n.translateBy=function(t,e,r){n.transform(t,function(){return y(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof r?r.apply(this,arguments):r),_.apply(this,arguments),w)})},n.translateTo=function(t,e,r){n.transform(t,function(){var t=_.apply(this,arguments),n=this.__zoom,o=i(t);return y(Y_.translate(o[0],o[1]).scale(n.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof r?-r.apply(this,arguments):-r),t,w)})},a.prototype={start:function(){return 1==++this.active&&(this.index=k.push(this)-1,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(k.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){it(new function(t,n,e){this.target=t,this.type=n,this.transform=e}(n,t,this.that.__zoom),S.apply,S,[t,this.that,this.args])}},n.wheelDelta=function(t){return arguments.length?(m="function"==typeof t?t:ks(+t),n):m},n.filter=function(t){return arguments.length?(g="function"==typeof t?t:ks(!!t),n):g},n.touchable=function(t){return arguments.length?(x="function"==typeof t?t:ks(!!t),n):x},n.extent=function(t){return arguments.length?(_="function"==typeof t?t:ks([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):_},n.scaleExtent=function(t){return arguments.length?(b[0]=+t[0],b[1]=+t[1],n):[b[0],b[1]]},n.translateExtent=function(t){return arguments.length?(w[0][0]=+t[0][0],w[1][0]=+t[1][0],w[0][1]=+t[0][1],w[1][1]=+t[1][1],n):[[w[0][0],w[0][1]],[w[1][0],w[1][1]]]},n.constrain=function(t){return arguments.length?(y=t,n):y},n.duration=function(t){return arguments.length?(M=+t,n):M},n.interpolate=function(t){return arguments.length?(T=t,n):T},n.on=function(){var t=S.on.apply(S,arguments);return t===S?n:t},n.clickDistance=function(t){return arguments.length?(C=(t=+t)*t,n):Math.sqrt(C)},n},t.zoomTransform=Es,t.zoomIdentity=Y_,Object.defineProperty(t,"__esModule",{value:!0})});

/*!
 * typeahead.js 1.2.0
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.Bloodhound=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):a.Bloodhound=b(a.jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},guid:function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return"tt-"+a()+a(!0)+a(!0)+a()},noop:function(){}}}(),c="1.2.0",d=function(){"use strict";function a(a){return a=b.toStr(a),a?a.split(/\s+/):[]}function c(a){return a=b.toStr(a),a?a.split(/\W+/):[]}function d(a){a=b.toStr(a);var c=[],d="";return b.each(a.split(""),function(a){a.match(/\s+/)?d="":(c.push(d+a),d+=a)}),c}function e(a){return function(c){return c=b.isArray(c)?c:[].slice.call(arguments,0),function(d){var e=[];return b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))}),e}}}return{nonword:c,whitespace:a,ngram:d,obj:{nonword:e(c),whitespace:e(a),ngram:e(d)}}}(),e=function(){"use strict";function c(c){this.maxSize=b.isNumber(c)?c:100,this.reset(),this.maxSize<=0&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(c.prototype,{set:function(a,b){var c,d=this.list.tail;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key],this.size--),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];if(b)return this.list.moveToFront(b),b.val},reset:function(){this.size=0,this.hash={},this.list=new d}}),b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),c}(),f=function(){"use strict";function c(a,c){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix)),this.ls=c||h,!this.ls&&this._noop()}function d(){return(new Date).getTime()}function e(a){return JSON.stringify(b.isUndefined(a)?null:a)}function f(b){return a.parseJSON(b)}function g(a){var b,c,d=[],e=h.length;for(b=0;b<e;b++)(c=h.key(b)).match(a)&&d.push(c.replace(a,""));return d}var h;try{h=window.localStorage,h.setItem("~~~","!"),h.removeItem("~~~")}catch(a){h=null}return b.mixin(c.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=b.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(a){"QuotaExceededError"===a.name&&(this.clear(),this._noop())}},get:function(a){return this.isExpired(a)&&this.remove(a),f(this.ls.getItem(this._prefix(a)))},set:function(a,c,f){return b.isNumber(f)?this._safeSet(this._ttlKey(a),e(d()+f)):this.ls.removeItem(this._ttlKey(a)),this._safeSet(this._prefix(a),e(c))},remove:function(a){return this.ls.removeItem(this._ttlKey(a)),this.ls.removeItem(this._prefix(a)),this},clear:function(){var a,b=g(this.keyMatcher);for(a=b.length;a--;)this.remove(b[a]);return this},isExpired:function(a){var c=f(this.ls.getItem(this._ttlKey(a)));return!!(b.isNumber(c)&&d()>c)}}),c}(),g=function(){"use strict";function c(a){a=a||{},this.maxPendingRequests=a.maxPendingRequests||6,this.cancelled=!1,this.lastReq=null,this._send=a.transport,this._get=a.limiter?a.limiter(this._get):this._get,this._cache=a.cache===!1?new e(0):g}var d=0,f={},g=new e(10);return c.setMaxPendingRequests=function(a){this.maxPendingRequests=a},c.resetCache=function(){g.reset()},b.mixin(c.prototype,{_fingerprint:function(b){return b=b||{},b.url+b.type+a.param(b.data||{})},_get:function(a,b){function c(a){b(null,a),j._cache.set(h,a)}function e(){b(!0)}function g(){d--,delete f[h],j.onDeckRequestArgs&&(j._get.apply(j,j.onDeckRequestArgs),j.onDeckRequestArgs=null)}var h,i,j=this;h=this._fingerprint(a),this.cancelled||h!==this.lastReq||((i=f[h])?i.done(c).fail(e):d<this.maxPendingRequests?(d++,f[h]=this._send(a).done(c).fail(e).always(g)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,d){var e,f;d=d||a.noop,c=b.isString(c)?{url:c}:c||{},f=this._fingerprint(c),this.cancelled=!1,this.lastReq=f,(e=this._cache.get(f))?d(null,e):this._get(c,d)},cancel:function(){this.cancelled=!0}}),c}(),h=window.SearchIndex=function(){"use strict";function c(c){c=c||{},c.datumTokenizer&&c.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.identify=c.identify||b.stringify,this.datumTokenizer=c.datumTokenizer,this.queryTokenizer=c.queryTokenizer,this.matchAnyQueryToken=c.matchAnyQueryToken,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){var a={};return a[i]=[],a[h]={},a}function f(a){for(var b={},c=[],d=0,e=a.length;d<e;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){var c=0,d=0,e=[];a=a.sort(),b=b.sort();for(var f=a.length,g=b.length;c<f&&d<g;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}var h="c",i="i";return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;c.datums[f=c.identify(a)]=a,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b[h][g]||(b[h][g]=e()),b[i].push(f)})})},get:function(a){var c=this;return b.map(a,function(a){return c.datums[a]})},search:function(a){var c,e,j=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length&&!j.matchAnyQueryToken)return!1;for(b=j.trie,c=a.split("");b&&(d=c.shift());)b=b[h][d];if(b&&0===c.length)f=b[i].slice(0),e=e?g(e,f):f;else if(!j.matchAnyQueryToken)return e=[],!1}),e?b.map(f(e),function(a){return j.datums[a]}):[]},all:function(){var a=[];for(var b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums={},this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){"use strict";function a(a){this.url=a.url,this.ttl=a.ttl,this.cache=a.cache,this.prepare=a.prepare,this.transform=a.transform,this.transport=a.transport,this.thumbprint=a.thumbprint,this.storage=new f(a.cacheKey)}var c;return c={data:"data",protocol:"protocol",thumbprint:"thumbprint"},b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set(c.data,a,this.ttl),this.storage.set(c.protocol,location.protocol,this.ttl),this.storage.set(c.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var a,b={};return this.cache?(b.data=this.storage.get(c.data),b.protocol=this.storage.get(c.protocol),b.thumbprint=this.storage.get(c.thumbprint),a=b.thumbprint!==this.thumbprint||b.protocol!==location.protocol,b.data&&!a?b.data:null):null},fromNetwork:function(a){function b(){a(!0)}function c(b){a(null,e.transform(b))}var d,e=this;a&&(d=this.prepare(this._settings()),this.transport(d).fail(b).done(c))},clear:function(){return this.storage.clear(),this}}),a}(),j=function(){"use strict";function a(a){this.url=a.url,this.prepare=a.prepare,this.transform=a.transform,this.indexResponse=a.indexResponse,this.transport=new g({cache:a.cache,limiter:a.limiter,transport:a.transport,maxPendingRequests:a.maxPendingRequests})}return b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){function c(a,c){b(a?[]:e.transform(c))}var d,e=this;if(b)return a=a||"",d=this.prepare(a,this._settings()),this.transport.get(d,c)},cancelLastRequest:function(){this.transport.cancel()}}),a}(),k=function(){"use strict";function d(d){var e;return d?(e={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:b.identity,transform:b.identity,transport:null},d=b.isString(d)?{url:d}:d,d=b.mixin(e,d),!d.url&&a.error("prefetch requires url to be set"),d.transform=d.filter||d.transform,d.cacheKey=d.cacheKey||d.url,d.thumbprint=c+d.thumbprint,d.transport=d.transport?h(d.transport):a.ajax,d):null}function e(c){var d;if(c)return d={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:b.identity,transport:null},c=b.isString(c)?{url:c}:c,c=b.mixin(d,c),!c.url&&a.error("remote requires url to be set"),c.transform=c.filter||c.transform,c.prepare=f(c),c.limiter=g(c),c.transport=c.transport?h(c.transport):a.ajax,delete c.replace,delete c.wildcard,delete c.rateLimitBy,delete c.rateLimitWait,c}function f(a){function b(a,b){return b.url=f(b.url,a),b}function c(a,b){return b.url=b.url.replace(g,encodeURIComponent(a)),b}function d(a,b){return b}var e,f,g;return e=a.prepare,f=a.replace,g=a.wildcard,e?e:e=f?b:a.wildcard?c:d}function g(a){function c(a){return function(c){return b.debounce(c,a)}}function d(a){return function(c){return b.throttle(c,a)}}var e,f,g;return e=a.limiter,f=a.rateLimitBy,g=a.rateLimitWait,e||(e=/^throttle$/i.test(f)?d(g):c(g)),e}function h(c){return function(d){function e(a){b.defer(function(){g.resolve(a)})}function f(a){b.defer(function(){g.reject(a)})}var g=a.Deferred();return c(d,e,f),g}}return function(c){var f,g;return f={initialize:!0,identify:b.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},c=b.mixin(f,c||{}),!c.datumTokenizer&&a.error("datumTokenizer is required"),!c.queryTokenizer&&a.error("queryTokenizer is required"),g=c.sorter,c.sorter=g?function(a){return a.sort(g)}:b.identity,c.local=b.isFunction(c.local)?c.local():c.local,c.prefetch=d(c.prefetch),c.remote=e(c.remote),c}}(),l=function(){"use strict";function c(a){a=k(a),this.sorter=a.sorter,this.identify=a.identify,this.sufficient=a.sufficient,this.indexRemote=a.indexRemote,this.local=a.local,this.remote=a.remote?new j(a.remote):null,this.prefetch=a.prefetch?new i(a.prefetch):null,this.index=new h({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer}),a.initialize!==!1&&this.initialize()}var e;return e=window&&window.Bloodhound,c.noConflict=function(){return window&&(window.Bloodhound=e),c},c.tokenizers=d,b.mixin(c.prototype,{__ttAdapter:function(){function a(a,b,d){return c.search(a,b,d)}function b(a,b){return c.search(a,b)}var c=this;return this.remote?a:b},_loadPrefetch:function(){function b(a,b){return a?c.reject():(e.add(b),e.prefetch.store(e.index.serialize()),void c.resolve())}var c,d,e=this;return c=a.Deferred(),this.prefetch?(d=this.prefetch.fromCache())?(this.index.bootstrap(d),c.resolve()):this.prefetch.fromNetwork(b):c.resolve(),c.promise()},_initialize:function(){function a(){b.add(b.local)}var b=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(a),this.initPromise},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){return this.index.add(a),this},get:function(a){return a=b.isArray(a)?a:[].slice.call(arguments),this.index.get(a)},search:function(a,c,d){function e(a){var c=[];b.each(a,function(a){!b.some(f,function(b){return g.identify(a)===g.identify(b)})&&c.push(a)}),g.indexRemote&&g.add(c),d(c)}var f,g=this;return c=c||b.noop,d=d||b.noop,f=this.sorter(this.index.search(a)),c(this.remote?f.slice():f),this.remote&&f.length<this.sufficient?this.remote.get(a,e):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return g.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),c}();return l}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},guid:function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return"tt-"+a()+a(!0)+a(!0)+a()},noop:function(){}}}(),c=function(){"use strict";function a(a){var g,h;return h=b.mixin({},f,a),g={css:e(),classes:h,html:c(h),selectors:d(h)},{css:g.css,html:g.html,classes:g.classes,selectors:g.selectors,mixin:function(a){b.mixin(a,g)}}}function c(a){return{wrapper:'<span class="'+a.wrapper+'"></span>',menu:'<div role="listbox" class="'+a.menu+'"></div>'}}function d(a){var c={};return b.each(a,function(a,b){c[b]="."+a}),c}function e(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),a}var f={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return a}(),d=function(){"use strict";function c(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d,e;return d="typeahead:",e={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},b.mixin(c.prototype,{_trigger:function(b,c){var e=a.Event(d+b);return this.$el.trigger.call(this.$el,e,c||[]),e},before:function(a){var b,c;return b=[].slice.call(arguments,1),c=this._trigger("before"+a,b),c.isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1)),(b=e[a])&&this._trigger(b,[].slice.call(arguments,1))}}),c}(),e=function(){"use strict";function a(a,b,c,d){var e;if(!c)return this;for(b=b.split(i),c=d?h(c,d):c,this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(c);return this}function b(b,c,d){return a.call(this,"async",b,c,d)}function c(b,c,d){return a.call(this,"sync",b,c,d)}function d(a){var b;if(!this._callbacks)return this;for(a=a.split(i);b=a.shift();)delete this._callbacks[b];return this}function e(a){var b,c,d,e,g;if(!this._callbacks)return this;for(a=a.split(i),d=[].slice.call(arguments,1);(b=a.shift())&&(c=this._callbacks[b]);)e=f(c.sync,this,[b].concat(d)),g=f(c.async,this,[b].concat(d)),e()&&j(g);return this}function f(a,b,c){function d(){for(var d,e=0,f=a.length;!d&&e<f;e+=1)d=a[e].apply(b,c)===!1;return!d}return d}function g(){var a;return a=window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}function h(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var i=/\s+/,j=g();return{onSync:c,onAsync:b,off:d,trigger:e}}(),f=function(a){"use strict";function c(a){return f[a.toUpperCase()]||a}function d(a,d,e,f){for(var g,h=[],i=0,j=a.length;i<j;i++){var k=b.escapeRegExChars(a[i]);f&&(k=k.replace(/\S/g,c)),h.push(k)}return g=e?"\\b("+h.join("|")+")\\b":"("+h.join("|")+")",d?new RegExp(g):new RegExp(g,"i")}var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},f={A:"[Aa--------]",B:"[Bb--]",C:"[Cc--]",D:"[Dd-----]",E:"[Ee------]",F:"[Ff--]",G:"[Gg--]",H:"[Hh---]",I:"[Ii---------]",J:"[Jj--]",K:"[Kk--]",L:"[Ll----]",M:"[Mm----]",N:"[Nn---]",O:"[Oo-----]",P:"[Pp---]",Q:"[Qq]",R:"[Rr-----]",S:"[Ss---]",T:"[Tt--]",U:"[Uu------]",V:"[Vv----]",W:"[Ww--]",X:"[Xx---]",Y:"[Yy--]",Z:"[Zz----]"};return function(c){function f(b){var d,e,f;return(d=h.exec(b.data))&&(f=a.createElement(c.tagName),c.className&&(f.className=c.className),e=b.splitText(d.index),e.splitText(d[0].length),f.appendChild(e.cloneNode(!0)),b.parentNode.replaceChild(f,e)),!!d}function g(a,b){for(var c,d=3,e=0;e<a.childNodes.length;e++)c=a.childNodes[e],c.nodeType===d?e+=b(c)?1:0:g(c,b)}var h;c=b.mixin({},e,c),c.node&&c.pattern&&(c.pattern=b.isArray(c.pattern)?c.pattern:[c.pattern],h=d(c.pattern,c.caseSensitive,c.wordsOnly,c.diacriticInsensitive),g(c.node,f))}}(window.document),g=function(){"use strict";function c(c,e){c=c||{},c.input||a.error("input is missing"),e.mixin(this),this.$hint=a(c.hint),this.$input=a(c.input),this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"}),a(e.menu).attr("id",this.$input.attr("id")+"_listbox"),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=d(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop),this.onSync("cursorchange",this._updateDescendent)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return c.normalizeQuery(a)===c.normalizeQuery(b)}function g(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var h;return h={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},c.normalizeQuery=function(a){return b.toStr(a).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},b.mixin(c.prototype,e,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(a){var b=h[a.which||a.keyCode];this._managePreventDefault(b,a),b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(a,b){var c;switch(a){case"up":case"down":c=!g(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case"tab":c=!g(b);break;default:c=!0}return c},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,b){var c,d;c=f(a,this.query),d=!!c&&this.query.length!==a.length,this.query=a,b||c?!b&&d&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(a,b){this.$input.attr("aria-activedescendant",b)},bind:function(){var a,c,d,e,f=this;return a=b.bind(this._onBlur,this),c=b.bind(this._onFocus,this),d=b.bind(this._onKeydown,this),e=b.bind(this._onInput,this),this.$input.on("blur.tt",a).on("focus.tt",c).on("keydown.tt",d),!b.isMsie()||b.isMsie()>9?this.$input.on("input.tt",e):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){h[a.which||a.keyCode]||b.defer(b.bind(f._onInput,f,a))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a),this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b,c,d;a=this.getInputValue(),b=this.getHint(),c=a!==b&&0===b.indexOf(a),d=""!==a&&c&&!this.hasOverflow(),!d&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c,d;return a=this.$input.val().length,c=this.$input[0].selectionStart,b.isNumber(c)?c===a:!document.selection||(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=a("<div>")}}),c}(),h=function(){"use strict";function c(c,e){c=c||{},c.templates=c.templates||{},c.templates.notFound=c.templates.notFound||c.templates.empty,c.source||a.error("missing source"),c.node||a.error("missing node"),c.name&&!h(c.name)&&a.error("invalid dataset name: "+c.name),e.mixin(this),this.highlight=!!c.highlight,this.name=b.toStr(c.name||j()),this.limit=c.limit||5,this.displayFn=d(c.display||c.displayKey),this.templates=g(c.templates,this.displayFn),this.source=c.source.__ttAdapter?c.source.__ttAdapter():c.source,this.async=b.isUndefined(c.async)?this.source.length>2:!!c.async,this._resetLastSuggestion(),this.$el=a(c.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function d(a){function c(b){return b[a]}return a=a||b.stringify,b.isFunction(a)?a:c}function g(c,d){function e(c){return a('<div role="option">').attr("id",b.guid()).text(d(c))}return{notFound:c.notFound&&b.templatify(c.notFound),pending:c.pending&&b.templatify(c.pending),header:c.header&&b.templatify(c.header),footer:c.footer&&b.templatify(c.footer),suggestion:c.suggestion||e}}function h(a){return/^[_a-zA-Z0-9-]+$/.test(a)}var i,j;return i={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},j=b.getIdGenerator(),c.extractData=function(b){var c=a(b);return c.data(i.obj)?{dataset:c.data(i.dataset)||"",val:c.data(i.val)||"",obj:c.data(i.obj)||null}:null},b.mixin(c.prototype,e,{_overwrite:function(a,b){b=b||[],b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty(),this.trigger("rendered",b,!1,this.name)},_append:function(a,b){b=b||[],b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a),this.trigger("rendered",b,!0,this.name)},_renderSuggestions:function(a,b){var c;c=this._getSuggestionsFragment(a,b),this.$lastSuggestion=c.children().last(),this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){var c,d;c=this._getSuggestionsFragment(a,b),d=c.children().last(),this.$lastSuggestion.after(c),this.$lastSuggestion=d},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var e,g=this;return e=document.createDocumentFragment(),b.each(d,function(b){var d,f;f=g._injectQuery(c,b),d=a(g.templates.suggestion(f)).data(i.dataset,g.name).data(i.obj,b).data(i.val,g.displayFn(b)).addClass(g.classes.suggestion+" "+g.classes.selectable),e.appendChild(d[0])}),this.highlight&&f({className:this.classes.highlight,node:e,pattern:c}),a(e)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(a,c){return b.isObject(c)?b.mixin({_query:a},c):c},update:function(b){function c(a){g||(g=!0,a=(a||[]).slice(0,e.limit),h=a.length,e._overwrite(b,a),h<e.limit&&e.async&&e.trigger("asyncRequested",b,e.name))}function d(c){if(c=c||[],!f&&h<e.limit){e.cancel=a.noop;var d=Math.abs(h-e.limit);h+=d,e._append(b,c.slice(0,d)),e.async&&e.trigger("asyncReceived",b,e.name)}}var e=this,f=!1,g=!1,h=0;this.cancel(),this.cancel=function(){f=!0,e.cancel=a.noop,e.async&&e.trigger("asyncCanceled",b,e.name)},this.source(b,c,d),!g&&c([])},cancel:a.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=a("<div>")}}),c}(),i=function(){"use strict";function c(c,d){function e(b){var c=f.$node.find(b.node).first();return b.node=c.length?c:a("<div>").appendTo(f.$node),new h(b,d)}var f=this;c=c||{},c.node||a.error("node is required"),d.mixin(this),this.$node=a(c.node),this.query=null,this.datasets=b.map(c.datasets,e)}return b.mixin(c.prototype,e,{_onSelectableClick:function(b){this.trigger("selectableClicked",a(b.currentTarget))},_onRendered:function(a,b,c,d){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",b,c,d)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return b.every(this.datasets,b.bind(function(a){var b=a.isEmpty();return this.$node.attr("aria-expanded",!b),b},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},_ensureVisible:function(a){var b,c,d,e;b=a.position().top,c=b+a.outerHeight(!0),d=this.$node.scrollTop(),e=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),b<0?this.$node.scrollTop(d+b):e<c&&this.$node.scrollTop(d+(c-e))},bind:function(){var c,d=this;return c=b.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,c),this.$node.on("mouseover",this.selectors.selectable,function(){d.setCursor(a(this))}),this.$node.on("mouseleave",function(){d._removeCursor()}),b.each(this.datasets,function(a){a.onSync("asyncRequested",d._propagate,d).onSync("asyncCanceled",d._propagate,d).onSync("asyncReceived",d._propagate,d).onSync("rendered",d._onRendered,d).onSync("cleared",d._onCleared,d)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,c,d,e;return c=this.getActiveSelectable(),b=this._getSelectables(),d=c?b.index(c):-1,e=d+a,e=(e+1)%(b.length+1)-1,e=e<-1?b.length-1:e,e===-1?null:b.eq(e)},setCursor:function(a){this._removeCursor(),(a=a&&a.first())&&(a.addClass(this.classes.cursor),this._ensureVisible(a))},getSelectableData:function(a){return a&&a.length?h.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(a){function c(b){b.update(a)}var d=a!==this.query;return d&&(this.query=a,b.each(this.datasets,c)),d},empty:function(){function a(a){a.clear()}b.each(this.datasets,a),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function c(a){a.destroy()}this.$node.off(".tt"),this.$node=a("<div>"),b.each(this.datasets,c)}}),c}(),j=function(){
"use strict";function c(c){this.$el=a("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),c.$input.after(this.$el),b.each(c.menu.datasets,b.bind(function(a){a.onSync&&(a.onSync("rendered",b.bind(this.update,this)),a.onSync("cleared",b.bind(this.cleared,this)))},this))}return b.mixin(c.prototype,{update:function(a,b){var c,d=b.length;c=1===d?{result:"result",is:"is"}:{result:"results",is:"are"},this.$el.text(d+" "+c.result+" "+c.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),c}(),k=function(){"use strict";function a(){i.apply(this,[].slice.call(arguments,0))}var c=i.prototype;return b.mixin(a.prototype,i.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),c.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),c.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){return this.$node.css("ltr"===a?this.css.ltr:this.css.rtl),c.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),a}(),l=function(){"use strict";function c(c,e){var f,g,h,i,j,k,l,m,n,o,p;c=c||{},c.input||a.error("missing input"),c.menu||a.error("missing menu"),c.eventBus||a.error("missing event bus"),e.mixin(this),this.eventBus=c.eventBus,this.minLength=b.isNumber(c.minLength)?c.minLength:1,this.input=c.input,this.menu=c.menu,this.enabled=!0,this.autoselect=!!c.autoselect,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),f=d(this,"activate","open","_onFocused"),g=d(this,"deactivate","_onBlurred"),h=d(this,"isActive","isOpen","_onEnterKeyed"),i=d(this,"isActive","isOpen","_onTabKeyed"),j=d(this,"isActive","_onEscKeyed"),k=d(this,"isActive","open","_onUpKeyed"),l=d(this,"isActive","open","_onDownKeyed"),m=d(this,"isActive","isOpen","_onLeftKeyed"),n=d(this,"isActive","isOpen","_onRightKeyed"),o=d(this,"_openIfActive","_onQueryChanged"),p=d(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",f,this).onSync("blurred",g,this).onSync("enterKeyed",h,this).onSync("tabKeyed",i,this).onSync("escKeyed",j,this).onSync("upKeyed",k,this).onSync("downKeyed",l,this).onSync("leftKeyed",m,this).onSync("rightKeyed",n,this).onSync("queryChanged",o,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}function d(a){var c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);b.each(c,function(b){return a[b].apply(a,d)})}}return b.mixin(c.prototype,{_hacks:function(){var c,d;c=this.input.$input||a("<div>"),d=this.menu.$node||a("<div>"),c.on("blur.tt",function(a){var e,f,g;e=document.activeElement,f=d.is(e),g=d.has(e).length>0,b.isMsie()&&(f||g)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){c.focus()}))}),d.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,c,d){if(this._updateHint(),this.autoselect){var e=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(e)}this.eventBus.trigger("render",b,c,d)},_onAsyncRequested:function(a,b,c){this.eventBus.trigger("asyncrequest",c,b)},_onAsyncCanceled:function(a,b,c){this.eventBus.trigger("asynccancel",c,b)},_onAsyncReceived:function(a,b,c){this.eventBus.trigger("asyncreceive",c,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&(b.preventDefault(),b.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(b.preventDefault(),b.stopPropagation())},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(a,b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(a){return a=b.isString(a)?a:this.input.getQuery()||"",a.length>=this.minLength},_updateHint:function(){var a,c,d,e,f,h,i;a=this.menu.getTopSelectable(),c=this.menu.getSelectableData(a),d=this.input.getInputValue(),!c||b.isBlankString(d)||this.input.hasOverflow()?this.input.clearHint():(e=g.normalizeQuery(d),f=b.escapeRegExChars(e),h=new RegExp("^(?:"+f+")(.+$)","i"),i=h.exec(c.val),i&&this.input.setHint(d+i[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(a){this.input.setQuery(b.toStr(a))},getVal:function(){return this.input.getQuery()},select:function(a){var b=this.menu.getSelectableData(a);return!(!b||this.eventBus.before("select",b.obj,b.dataset))&&(this.input.setQuery(b.val,!0),this.eventBus.trigger("select",b.obj,b.dataset),this.close(),!0)},autocomplete:function(a){var b,c,d;return b=this.input.getQuery(),c=this.menu.getSelectableData(a),d=c&&b!==c.val,!(!d||this.eventBus.before("autocomplete",c.obj,c.dataset))&&(this.input.setQuery(c.val),this.eventBus.trigger("autocomplete",c.obj,c.dataset),!0)},moveCursor:function(a){var b,c,d,e,f,g,h;return b=this.input.getQuery(),c=this.menu.selectableRelativeToCursor(a),d=this.menu.getSelectableData(c),e=d?d.obj:null,f=d?d.dataset:null,h=c?c.attr("id"):null,this.input.trigger("cursorchange",h),g=this._minLengthMet()&&this.menu.update(b),!g&&!this.eventBus.before("cursorchange",e,f)&&(this.menu.setCursor(c),d?this.input.setInputValue(d.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",e,f),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),c}();!function(){"use strict";function e(b,c){b.each(function(){var b,d=a(this);(b=d.data(q.typeahead))&&c(b,d)})}function f(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(m(a)).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function h(a,b){a.data(q.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")}),a.addClass(b.classes.input).attr({spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(a){}return a}function m(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function n(a){var c,d;c=a.data(q.www),d=a.parent().filter(c.selectors.wrapper),b.each(a.data(q.attrs),function(c,d){b.isUndefined(c)?a.removeAttr(d):a.attr(d,c)}),a.removeData(q.typeahead).removeData(q.www).removeData(q.attr).removeClass(c.classes.input),d.length&&(a.detach().insertAfter(d),d.remove())}function o(c){var d,e;return d=b.isJQuery(c)||b.isElement(c),e=d?a(c).first():[],e.length?e:null}var p,q,r;p=a.fn.typeahead,q={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},r={initialize:function(e,m){function n(){var c,n,r,s,t,u,v,w,x,y,z,A;b.each(m,function(a){a.highlight=!!e.highlight}),c=a(this),n=a(p.html.wrapper),r=o(e.hint),s=o(e.menu),t=e.hint!==!1&&!r,u=e.menu!==!1&&!s,t&&(r=f(c,p)),u&&(s=a(p.html.menu).css(p.css.menu)),r&&r.val(""),c=h(c,p),(t||u)&&(n.css(p.css.wrapper),c.css(t?p.css.input:p.css.inputWithNoHint),c.wrap(n).parent().prepend(t?r:null).append(u?s:null)),A=u?k:i,v=new d({el:c}),w=new g({hint:r,input:c},p),x=new A({node:s,datasets:m},p),y=new j({$input:c,menu:x}),z=new l({input:w,menu:x,eventBus:v,minLength:e.minLength,autoselect:e.autoselect},p),c.data(q.www,p),c.data(q.typeahead,z)}var p;return m=b.isArray(m)?m:[].slice.call(arguments,1),e=e||{},p=c(e.classNames),this.each(n)},isEnabled:function(){var a;return e(this.first(),function(b){a=b.isEnabled()}),a},enable:function(){return e(this,function(a){a.enable()}),this},disable:function(){return e(this,function(a){a.disable()}),this},isActive:function(){var a;return e(this.first(),function(b){a=b.isActive()}),a},activate:function(){return e(this,function(a){a.activate()}),this},deactivate:function(){return e(this,function(a){a.deactivate()}),this},isOpen:function(){var a;return e(this.first(),function(b){a=b.isOpen()}),a},open:function(){return e(this,function(a){a.open()}),this},close:function(){return e(this,function(a){a.close()}),this},select:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.select(d)}),c},autocomplete:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.autocomplete(d)}),c},moveCursor:function(a){var b=!1;return e(this.first(),function(c){b=c.moveCursor(a)}),b},val:function(a){var c;return arguments.length?(e(this,function(c){c.setVal(b.toStr(a))}),this):(e(this.first(),function(a){c=a.getVal()}),c)},destroy:function(){return e(this,function(a,b){n(b),a.destroy()}),this}},a.fn.typeahead=function(a){return r[a]?r[a].apply(this,[].slice.call(arguments,1)):r.initialize.apply(this,arguments)},a.fn.typeahead.noConflict=function(){return a.fn.typeahead=p,this}}()});

/**
 * JSTS. See https://github.com/bjornharrtell/jsts
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EDLv1.txt
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EPLv1.txt
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_LICENSE_ES6_COLLECTIONS.txt
 * @license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.jsts={})}(this,function(t){"use strict";function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function n(){}function i(){}function r(t,e){this.low=0|e,this.high=0|t}function s(){}var o,a,u,l,h,c,f;function g(){}function d(){}function _(){}function p(){}function m(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}function v(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function y(){if(0===arguments.length)m.call(this);else if(1===arguments.length){var t=arguments[0];m.call(this,t)}}function x(){}function E(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)E.call(this,0,0);else if(1===arguments.length){var t=arguments[0];E.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];E.call(this,e,n,E.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.x=i,this.y=r,this.z=s}}function I(){if(this._dimensionsToTest=2,0===arguments.length)I.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new i("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}function N(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function C(){}function S(){}function L(t){this.message=t||""}function w(){}function R(t){this.message=t||""}function T(t){this.message=t||""}function P(){this.array_=[],arguments[0]instanceof S&&this.addAll(arguments[0])}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},e(n.prototype,{interfaces_:function(){return[]},getClass:function(){return n}}),n.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},r.toBinaryString=function(t){for(var e="",n=2147483648;n>0;n>>>=1)e+=(t.high&n)===n?"1":"0";for(n=2147483648;n>0;n>>>=1)e+=(t.low&n)===n?"1":"0";return e},s.isNaN=function(t){return Number.isNaN(t)},s.isInfinite=function(t){return!Number.isFinite(t)},s.MAX_VALUE=Number.MAX_VALUE,"function"==typeof Float64Array&&"function"==typeof Int32Array?(h=2146435072,c=new Float64Array(1),f=new Int32Array(c.buffer),s.doubleToLongBits=function(t){c[0]=t;var e=0|f[0],n=0|f[1];return(n&h)===h&&0!=(1048575&n)&&0!==e&&(e=0,n=2146959360),new r(n,e)},s.longBitsToDouble=function(t){return f[0]=t.low,f[1]=t.high,c[0]}):(o=Math.log2,a=Math.floor,u=Math.pow,l=function(){for(var t=53;t>0;t--){var e=u(2,t)-1;if(a(o(e))+1===t)return e}return 0}(),s.doubleToLongBits=function(t){var e,n,i,s,h,c,f,g,d;if(t<0||1/t===Number.NEGATIVE_INFINITY?(c=1<<31,t=-t):c=0,0===t)return new r(g=c,d=0);if(t===1/0)return new r(g=2146435072|c,d=0);if(t!=t)return new r(g=2146959360,d=0);if(s=0,d=0,(e=a(t))>1)if(e<=l)(s=a(o(e)))<=20?(d=0,g=e<<20-s&1048575):(d=e%(n=u(2,i=s-20))<<32-i,g=e/n&1048575);else for(i=e,d=0;0!==(i=a(n=i/2));)s++,d>>>=1,d|=(1&g)<<31,g>>>=1,n!==i&&(g|=524288);if(f=s+1023,h=0===e,e=t-e,s<52&&0!==e)for(i=0;;){if((n=2*e)>=1?(e=n-1,h?(f--,h=!1):(i<<=1,i|=1,s++)):(e=n,h?0==--f&&(s++,h=!1):(i<<=1,s++)),20===s)g|=i,i=0;else if(52===s){d|=i;break}if(1===n){s<20?g|=i<<20-s:s<52&&(d|=i<<52-s);break}}return g|=f<<20,new r(g|=c,d)},s.longBitsToDouble=function(t){var e,n,i,r,s=t.high,o=t.low;n=s&1<<31?-1:1,i=((2146435072&s)>>20)-1023,r=0,e=1<<19;for(var a=1;a<=20;a++)s&e&&(r+=u(2,-a)),e>>>=1;for(e=1<<31,a=21;a<=52;a++)o&e&&(r+=u(2,-a)),e>>>=1;if(-1023===i){if(0===r)return 0*n;i=-1022}else{if(1024===i)return 0===r?n/0:NaN;r+=1}return n*r*u(2,i)}),m.prototype=Object.create(Error.prototype),m.prototype.constructor=Error,v(y,m),e(y.prototype,{interfaces_:function(){return[]},getClass:function(){return y}}),e(x.prototype,{interfaces_:function(){return[]},getClass:function(){return x}}),x.shouldNeverReachHere=function(){if(0===arguments.length)x.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new y("Should never reach here"+(null!==t?": "+t:""))}},x.isTrue=function(){if(1===arguments.length){var t=arguments[0];x.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new y:new y(n)}},x.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];x.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new y("Expected "+n+" but encountered "+i+(null!==r?": "+r:""))}},e(E.prototype,{setOrdinate:function(t,e){switch(t){case E.X:this.x=e;break;case E.Y:this.y=e;break;case E.Z:this.z=e;break;default:throw new i("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!n.equalsWithTolerance(this.x,e.x,i)&&!!n.equalsWithTolerance(this.y,e.y,i)}},getOrdinate:function(t){switch(t){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new i("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||s.isNaN(this.z)&&s.isNaN(t.z))},equals:function(t){return t instanceof E&&this.equals2D(t)},equalInZ:function(t,e){return n.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return x.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}},copy:function(){return new E(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*(t=37*t+E.hashCode(this.x))+E.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[g,d,p]},getClass:function(){return E}}),E.hashCode=function(){if(1===arguments.length&&"number"==typeof arguments[0]){var t=arguments[0],e=s.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},e(I.prototype,{compare:function(t,e){var n=t,i=e,r=I.compare(n.x,i.x);if(0!==r)return r;var s=I.compare(n.y,i.y);return 0!==s?s:this._dimensionsToTest<=2?0:I.compare(n.z,i.z)},interfaces_:function(){return[_]},getClass:function(){return I}}),I.compare=function(t,e){return t<e?-1:t>e?1:s.isNaN(t)?s.isNaN(e)?0:-1:s.isNaN(e)?1:0},E.DimensionalComparator=I,E.serialVersionUID=0x5cbf2c235c7e5800,E.NULL_ORDINATE=s.NaN,E.X=0,E.Y=1,E.Z=2,C.prototype.hasNext=function(){},C.prototype.next=function(){},C.prototype.remove=function(){},S.prototype.add=function(){},S.prototype.addAll=function(){},S.prototype.isEmpty=function(){},S.prototype.iterator=function(){},S.prototype.size=function(){},S.prototype.toArray=function(){},S.prototype.remove=function(){},L.prototype=new Error,L.prototype.name="IndexOutOfBoundsException",w.prototype=Object.create(S.prototype),w.prototype.constructor=w,w.prototype.get=function(){},w.prototype.set=function(){},w.prototype.isEmpty=function(){},R.prototype=new Error,R.prototype.name="NoSuchElementException",T.prototype=new Error,T.prototype.name="OperationNotSupported",P.prototype=Object.create(w.prototype),P.prototype.constructor=P,P.prototype.ensureCapacity=function(){},P.prototype.interfaces_=function(){return[w,S]},P.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],0,arguments[1]),!0},P.prototype.clear=function(){this.array_=[]},P.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},P.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},P.prototype.iterator=function(){return new O(this)},P.prototype.get=function(t){if(t<0||t>=this.size())throw new L;return this.array_[t]},P.prototype.isEmpty=function(){return 0===this.array_.length},P.prototype.size=function(){return this.array_.length},P.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},P.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var O=function(t){this.arrayList_=t,this.position_=0};function b(){if(P.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function M(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof M){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];this.init(r,s,o,a)}}function D(){}function A(){D.call(this,"Projective point not representable on the Cartesian plane.")}function F(t){this.str=t}function G(t){this.value=t}function q(){}function B(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof B){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];B.call(this,B.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}}function V(){}function z(){}function Y(){}function k(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof k&&arguments[1]instanceof k){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var s=arguments[0],o=arguments[1];this.x=s.y-o.y,this.y=o.x-s.x,this.w=s.x*o.y-o.x*s.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2];this.x=a,this.y=u,this.w=l}else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3],d=h.y-c.y,_=c.x-h.x,p=h.x*c.y-c.x*h.y,m=f.y-g.y,v=g.x-f.x,y=f.x*g.y-g.x*f.y;this.x=_*y-v*p,this.y=m*p-d*y,this.w=d*v-m*_}}function U(){}function X(){}function H(){}function W(){}function j(){}function K(){this._envelope=null,this._factory=null,this._SRID=null,this._userData=null;var t=arguments[0];this._factory=t,this._SRID=t.getSRID()}function Z(){}function Q(){}function J(){}function $(){}function tt(){}function et(){}function nt(){}function it(){}function rt(){}function st(){}function ot(){}function at(){}function ut(){this.array_=[],arguments[0]instanceof S&&this.addAll(arguments[0])}O.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new R;return this.arrayList_.get(this.position_++)},O.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},O.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},O.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},v(b,P),e(b.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&N(arguments[0],S)){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return P.prototype.addAll.apply(this,arguments)},clone:function(){for(var t=P.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t},toCoordinateArray:function(){return this.toArray(b.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];P.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof E&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1])if(this.size()>=1)if(this.get(this.size()-1).equals2D(i))return null;P.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var r=arguments[0],s=arguments[1];return this.add(r,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];if(arguments[2])for(var u=0;u<o.length;u++)this.add(o[u],a);else for(u=o.length-1;u>=0;u--)this.add(o[u],a);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var l=arguments[0],h=arguments[1];if(!arguments[2]){var c=this.size();if(c>0){if(l>0)if(this.get(l-1).equals2D(h))return null;if(l<c)if(this.get(l).equals2D(h))return null}}P.prototype.add.call(this,l,h)}}else if(4===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],_=arguments[3],p=1;d>_&&(p=-1);for(u=d;u!==_;u+=p)this.add(f[u],g);return!0}},closeRing:function(){this.size()>0&&this.add(new E(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return b}}),b.coordArrayType=new Array(0).fill(null),e(M.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof M))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new M;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny;return new M(e,this._maxx<t._maxx?this._maxx:t._maxx,n,this._maxy<t._maxy?this._maxy:t._maxy)},isNull:function(){return this._maxx<this._minx},getMaxX:function(){return this._maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof M){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&(n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy)}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof M){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof E){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],i=arguments[1];return!this.isNull()&&(!((n.x<i.x?n.x:i.x)>this._maxx)&&(!((n.x>i.x?n.x:i.x)<this._minx)&&(!((n.y<i.y?n.y:i.y)>this._maxy)&&!((n.y>i.y?n.y:i.y)<this._miny))))}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],s=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||s>this._maxy||s<this._miny)}}},getMinY:function(){return this._miny},getMinX:function(){return this._minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof M){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this._maxx-this._minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},translate:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},setToNull:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},getHeight:function(){return this.isNull()?0:this._maxy-this._miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof M){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},centre:function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof M){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];r<s?(this._minx=r,this._maxx=s):(this._minx=s,this._maxx=r),o<a?(this._miny=o,this._maxy=a):(this._miny=a,this._maxy=o)}},getMaxY:function(){return this._maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+E.hashCode(this._minx))+E.hashCode(this._maxx))+E.hashCode(this._miny))+E.hashCode(this._maxy)},interfaces_:function(){return[g,p]},getClass:function(){return M}}),M.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=Math.min(s.x,o.x),u=Math.max(s.x,o.x),l=Math.min(i.x,r.x),h=Math.max(i.x,r.x);return!(l>u)&&(!(h<a)&&(a=Math.min(s.y,o.y),u=Math.max(s.y,o.y),l=Math.min(i.y,r.y),h=Math.max(i.y,r.y),!(l>u)&&!(h<a)))}},M.serialVersionUID=0x51845cd552189800,v(A,D),e(A.prototype,{interfaces_:function(){return[]},getClass:function(){return A}}),F.prototype.append=function(t){this.str+=t},F.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},F.prototype.toString=function(t){return this.str},G.prototype.intValue=function(){return this.value},G.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},G.isNaN=function(t){return Number.isNaN(t)},q.isWhitespace=function(t){return t<=32&&t>=0||127==t},q.toUpperCase=function(t){return t.toUpperCase()},e(B.prototype,{le:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=B.magnitude(n._hi),r=B.TEN.pow(i);(n=n.divide(r)).gt(B.TEN)?(n=n.divide(B.TEN),i+=1):n.lt(B.ONE)&&(n=n.multiply(B.TEN),i-=1);for(var s=i+1,o=new F,a=B.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===s&&o.append(".");var l=Math.trunc(n._hi);if(l<0)break;var h=!1,c=0;l>9?(h=!0,c="9"):c="0"+l,o.append(c),n=n.subtract(B.valueOf(l)).multiply(B.TEN),h&&n.selfAdd(B.TEN);var f=!0,g=B.magnitude(n._hi);if(g<0&&Math.abs(g)>=a-u&&(f=!1),!f)break}return e[0]=i,o.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this._hi+this._lo},subtract:function(){if(arguments[0]instanceof B){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length&&arguments[0]instanceof B){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},isZero:function(){return 0===this._hi&&0===this._lo},selfSubtract:function(){if(arguments[0]instanceof B){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,i,r,s,o=arguments[0],a=arguments[1],u=null,l=null,h=null,c=null;return r=this._hi/o,c=(u=(h=B.SPLIT*r)-(u=h-r))*(l=(c=B.SPLIT*o)-(l=c-o))-(s=r*o)+u*(i=o-l)+(n=r-u)*l+n*i,c=r+(h=(this._hi-s-c+this._lo-r*a)/o),this._hi=c,this._lo=r-c+h,this}},dump:function(){return"DD<"+this._hi+", "+this._lo+">"},divide:function(){if(arguments[0]instanceof B){var t,e,n,i,r=arguments[0],o=null,a=null,u=null,l=null;return n=this._hi/r._hi,o=(u=B.SPLIT*n)-n,l=B.SPLIT*r._hi,t=n-(o=u-o),a=l-r._hi,i=n*r._hi,l=o*(a=l-a)-i+o*(e=r._hi-a)+t*a+t*e,new B(l=n+(u=(this._hi-i-l+this._lo-n*r._lo)/r._hi),n-l+u)}if("number"==typeof arguments[0]){var h=arguments[0];return s.isNaN(h)?B.createNaN():B.copy(this).selfDivide(h,0)}},ge:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo},pow:function(t){if(0===t)return B.valueOf(1);var e=new B(this),n=B.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},ceil:function(){if(this.isNaN())return B.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new B(t,e)},compareTo:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},rint:function(){return this.isNaN()?this:this.add(.5).floor()},setValue:function(){if(arguments[0]instanceof B){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return B.valueOf(0);if(this.isNegative())return B.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=B.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,s=null,o=null,a=null;return s=(r=this._hi+e)-(o=r-this._hi),i=(a=(s=e-o+(this._hi-s))+this._lo)+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var u,l=arguments[0],h=arguments[1],c=(n=null,i=null,null);r=null,s=null,o=null,a=null;r=this._hi+l,u=this._lo+h,s=r-(o=r-this._hi),c=u-(a=u-this._lo),s=l-o+(this._hi-s),c=h-a+(this._lo-c);var f=(n=r+(o=s+u))+(o=c+(i=o+(r-n))),g=o+(n-f);return this._hi=f,this._lo=g,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,i,r=arguments[0],s=arguments[1],o=null,a=null,u=null,l=null;o=(u=B.SPLIT*this._hi)-this._hi,l=B.SPLIT*r,o=u-o,n=this._hi-o,a=l-r;var h=(u=this._hi*r)+(l=o*(a=l-a)-u+o*(i=r-a)+n*a+n*i+(this._hi*s+this._lo*r)),c=l+(o=u-h);return this._hi=h,this._lo=c,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return B.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new B(t,e)},negate:function(){return this.isNaN()?this:new B(-this._hi,-this._lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}},multiply:function(){if(arguments[0]instanceof B){var t=arguments[0];return t.isNaN()?B.createNaN():B.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return s.isNaN(e)?B.createNaN():B.copy(this).selfMultiply(e,0)}},isNaN:function(){return s.isNaN(this._hi)},intValue:function(){return Math.trunc(this._hi)},toString:function(){var t=B.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+B.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var s=i-n.length;r=n+B.stringOfChar("0",s)+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t,e,n,i,r=null,s=null,o=null,a=null;n=1/this._hi,r=(o=B.SPLIT*n)-n,a=B.SPLIT*this._hi,t=n-(r=o-r),s=a-this._hi;var u=n+(o=(1-(i=n*this._hi)-(a=r*(s=a-s)-i+r*(e=this._hi-s)+t*s+t*e)-n*this._lo)/this._hi);return new B(u,n-u+o)},toSciNotation:function(){if(this.isZero())return B.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=B.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var s=n.charAt(0)+"."+r;return this.isNegative()?"-"+s+i:s+i},abs:function(){return this.isNaN()?B.NaN:this.isNegative()?this.negate():new B(this)},isPositive:function(){return this._hi>0||0===this._hi&&this._lo>0},lt:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo},add:function(){if(arguments[0]instanceof B){var t=arguments[0];return B.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return B.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof B){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},gt:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo},isNegative:function(){return this._hi<0||0===this._hi&&this._lo<0},trunc:function(){return this.isNaN()?B.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},interfaces_:function(){return[p,g,d]},getClass:function(){return B}}),B.sqr=function(t){return B.valueOf(t).selfMultiply(t)},B.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return B.parse(t)}if("number"==typeof arguments[0])return new B(arguments[0])},B.sqrt=function(t){return B.valueOf(t).sqrt()},B.parse=function(t){for(var e=0,n=t.length;q.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var s=new B,o=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,q.isDigit(l)){var h=l-"0";s.selfMultiply(B.TEN),s.selfAdd(h),o++}else{if("."!==l){if("e"===l||"E"===l){var c=t.substring(e);try{u=G.parseInt(c)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+c+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=o}}var f=s,g=o-a-u;if(0===g)f=s;else if(g>0){var d=B.TEN.pow(g);f=s.divide(d)}else if(g<0){d=B.TEN.pow(-g);f=s.multiply(d)}return i?f.negate():f},B.createNaN=function(){return new B(s.NaN,s.NaN)},B.copy=function(t){return new B(t)},B.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},B.stringOfChar=function(t,e){for(var n=new F,i=0;i<e;i++)n.append(t);return n.toString()},B.PI=new B(3.141592653589793,1.2246467991473532e-16),B.TWO_PI=new B(6.283185307179586,2.4492935982947064e-16),B.PI_2=new B(1.5707963267948966,6.123233995736766e-17),B.E=new B(2.718281828459045,1.4456468917292502e-16),B.NaN=new B(s.NaN,s.NaN),B.EPS=1.23259516440783e-32,B.SPLIT=134217729,B.MAX_PRINT_DIGITS=32,B.TEN=B.valueOf(10),B.ONE=B.valueOf(1),B.SCI_NOT_EXPONENT_CHAR="E",B.SCI_NOT_ZERO="0.0E0",e(V.prototype,{interfaces_:function(){return[]},getClass:function(){return V}}),V.orientationIndex=function(t,e,n){var i=V.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=B.valueOf(e.x).selfAdd(-t.x),s=B.valueOf(e.y).selfAdd(-t.y),o=B.valueOf(n.x).selfAdd(-e.x),a=B.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(s.selfMultiply(o)).signum()},V.signOfDet2x2=function(){if(arguments[0]instanceof B){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];return t.multiply(i).selfSubtract(e.multiply(n)).signum()}if("number"==typeof arguments[0]){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=B.valueOf(r),l=B.valueOf(s),h=B.valueOf(o),c=B.valueOf(a);return u.multiply(c).selfSubtract(l.multiply(h)).signum()}},V.intersection=function(t,e,n,i){var r=B.valueOf(i.y).selfSubtract(n.y).selfMultiply(B.valueOf(e.x).selfSubtract(t.x)),s=B.valueOf(i.x).selfSubtract(n.x).selfMultiply(B.valueOf(e.y).selfSubtract(t.y)),o=r.subtract(s),a=B.valueOf(i.x).selfSubtract(n.x).selfMultiply(B.valueOf(t.y).selfSubtract(n.y)),u=B.valueOf(i.y).selfSubtract(n.y).selfMultiply(B.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(o).doubleValue(),h=B.valueOf(t.x).selfAdd(B.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),c=B.valueOf(e.x).selfSubtract(t.x).selfMultiply(B.valueOf(t.y).selfSubtract(n.y)),f=B.valueOf(e.y).selfSubtract(t.y).selfMultiply(B.valueOf(t.x).selfSubtract(n.x)),g=c.subtract(f).selfDivide(o).doubleValue();return new E(h,B.valueOf(n.y).selfAdd(B.valueOf(i.y).selfSubtract(n.y).selfMultiply(g)).doubleValue())},V.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),s=(t.y-n.y)*(e.x-n.x),o=r-s;if(r>0){if(s<=0)return V.signum(o);i=r+s}else{if(!(r<0))return V.signum(o);if(s>=0)return V.signum(o);i=-r-s}var a=V.DP_SAFE_EPSILON*i;return o>=a||-o>=a?V.signum(o):2},V.signum=function(t){return t>0?1:t<0?-1:0},V.DP_SAFE_EPSILON=1e-15,e(z.prototype,{interfaces_:function(){return[]},getClass:function(){return z}}),z.index=function(t,e,n){return V.orientationIndex(t,e,n)},z.isCCW=function(t){var e=t.length-1;if(e<3)throw new i("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,s=1;s<=e;s++){var o=t[s];o.y>n.y&&(n=o,r=s)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var u=r;do{u=(u+1)%e}while(t[u].equals2D(n)&&u!==r);var l=t[a],h=t[u];if(l.equals2D(n)||h.equals2D(n)||l.equals2D(h))return!1;var c=z.index(l,n,h);return 0===c?l.x>h.x:c>0},z.CLOCKWISE=-1,z.RIGHT=z.CLOCKWISE,z.COUNTERCLOCKWISE=1,z.LEFT=z.COUNTERCLOCKWISE,z.COLLINEAR=0,z.STRAIGHT=z.COLLINEAR,Y.arraycopy=function(t,e,n,i,r){for(var s=0,o=e;o<e+r;o++)n[i+s]=t[o],s++},Y.getProperty=function(t){return{"line.separator":"\n"}[t]},e(k.prototype,{getY:function(){var t=this.y/this.w;if(s.isNaN(t)||s.isInfinite(t))throw new A;return t},getX:function(){var t=this.x/this.w;if(s.isNaN(t)||s.isInfinite(t))throw new A;return t},getCoordinate:function(){var t=new E;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return k}}),k.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,u=n.y-i.y,l=i.x-n.x,h=n.x*i.y-i.x*n.y,c=r*l-u*o,f=(o*h-l*a)/c,g=(u*a-r*h)/c;if(s.isNaN(f)||s.isInfinite(f)||s.isNaN(g)||s.isInfinite(g))throw new A;return new E(f,g)},e(U.prototype,{interfaces_:function(){return[]},getClass:function(){return U}}),U.log10=function(t){var e=Math.log(t);return s.isInfinite(e)?e:s.isNaN(e)?e:e/U.LOG_10},U.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},U.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],s=arguments[2];return i<r?r:i>s?s:i}},U.wrap=function(t,e){return t<0?e- -t%e:t%e},U.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return e>(i=t)&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var i,r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];return s>(i=r)&&(i=s),o>i&&(i=o),a>i&&(i=a),i}},U.average=function(t,e){return(t+e)/2},U.LOG_10=Math.log(10),e(X.prototype,{interfaces_:function(){return[]},getClass:function(){return X}}),X.segmentToSegment=function(t,e,n,i){if(t.equals(e))return X.pointToSegment(t,n,i);if(n.equals(i))return X.pointToSegment(i,t,e);var r=!1;if(M.intersects(t,e,n,i)){var s=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===s)r=!0;else{var o=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/s,u=o/s;(u<0||u>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?U.min(X.pointToSegment(t,n,i),X.pointToSegment(e,n,i),X.pointToSegment(n,t,e),X.pointToSegment(i,t,e)):0},X.pointToSegment=function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;if(r<=0)return t.distance(e);if(r>=1)return t.distance(n);var s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(s)*Math.sqrt(i)},X.pointToLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},X.pointToSegmentString=function(t,e){if(0===e.length)throw new i("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var s=X.pointToSegment(t,e[r],e[r+1]);s<n&&(n=s)}return n},e(H.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[d]},getClass:function(){return H}}),H.X=0,H.Y=1,H.Z=2,H.M=3,e(W.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array||N(arguments[0],H):arguments.length},interfaces_:function(){return[]},getClass:function(){return W}}),e(j.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return j}}),e(K.prototype,{isGeometryCollection:function(){return this.getTypeCode()===K.TYPECODE_GEOMETRYCOLLECTION},getFactory:function(){return this._factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments[0]instanceof K){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof K))return!1;var n=e;return this.equalsExact(n)}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(K.geometryChangedFilter)},geometryChangedAction:function(){this._envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];e=n;return this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}},getUserData:function(){return this._userData},getSRID:function(){return this._SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getTypeCode()===K.TYPECODE_GEOMETRYCOLLECTION)throw new i("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this._factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new M(this._envelope)},setSRID:function(t){this._SRID=t},setUserData:function(t){this._userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),s=i.next(),o=r.compareTo(s);if(0!==o)return o}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getTypeCode()===K.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===K.TYPECODE_MULTIPOINT||this.getTypeCode()===K.TYPECODE_MULTILINESTRING||this.getTypeCode()===K.TYPECODE_MULTIPOLYGON},interfaces_:function(){return[d,g,p]},getClass:function(){return K}}),K.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},K.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},K.serialVersionUID=0x799ea46522854c00,K.TYPECODE_POINT=0,K.TYPECODE_MULTIPOINT=1,K.TYPECODE_LINESTRING=2,K.TYPECODE_LINEARRING=3,K.TYPECODE_MULTILINESTRING=4,K.TYPECODE_POLYGON=5,K.TYPECODE_MULTIPOLYGON=6,K.TYPECODE_GEOMETRYCOLLECTION=7,K.TYPENAME_POINT="Point",K.TYPENAME_MULTIPOINT="MultiPoint",K.TYPENAME_LINESTRING="LineString",K.TYPENAME_LINEARRING="LinearRing",K.TYPENAME_MULTILINESTRING="MultiLineString",K.TYPENAME_POLYGON="Polygon",K.TYPENAME_MULTIPOLYGON="MultiPolygon",K.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",K.geometryChangedFilter={interfaces_:function(){return[j]},filter:function(t){t.geometryChangedAction()}},e(Z.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return Z}}),e(Q.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return Q}}),e(J.prototype,{isInBoundary:function(t){return t%2==1},interfaces_:function(){return[Q]},getClass:function(){return J}}),e($.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[Q]},getClass:function(){return $}}),e(tt.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[Q]},getClass:function(){return tt}}),e(et.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[Q]},getClass:function(){return et}}),Q.Mod2BoundaryNodeRule=J,Q.EndPointBoundaryNodeRule=$,Q.MultiValentEndPointBoundaryNodeRule=tt,Q.MonoValentEndPointBoundaryNodeRule=et,Q.MOD2_BOUNDARY_RULE=new J,Q.ENDPOINT_BOUNDARY_RULE=new $,Q.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new tt,Q.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new et,Q.OGC_SFS_BOUNDARY_RULE=Q.MOD2_BOUNDARY_RULE,e(nt.prototype,{interfaces_:function(){return[]},getClass:function(){return nt}}),nt.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},nt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(nt.indexOf(i,e)<0)return i}return null},nt.scroll=function(t,e){var n=nt.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);Y.arraycopy(t,n,i,0,t.length-n),Y.arraycopy(t,0,i,t.length-n,n),Y.arraycopy(i,0,t,0,t.length)},nt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(n=0;n<i.length;n++)if(0!==s.compare(i[n],r[n]))return!1;return!0}},nt.intersection=function(t,e){for(var n=new b,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},nt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},nt.removeRepeatedPoints=function(t){return nt.hasRepeatedPoints(t)?new b(t,!1).toCoordinateArray():t},nt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},nt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;var r=0;for(n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},nt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new E(t[n]);return e}if(5===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4];for(n=0;n<a;n++)s[o+n]=new E(i[r+n])}},nt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},nt.envelope=function(t){for(var e=new M,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},nt.toCoordinateArray=function(t){return t.toArray(nt.coordArrayType)},nt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},nt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},nt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},nt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},nt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},nt.extract=function(t,e,n){e=U.clamp(e,0,t.length);var i=(n=U.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var s=0,o=e;o<=n;o++)r[s++]=t[o];return r},e(it.prototype,{compare:function(t,e){var n=t,i=e;return nt.compare(n,i)},interfaces_:function(){return[_]},getClass:function(){return it}}),e(rt.prototype,{compare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=nt.compare(n,i);return nt.isEqualReversed(n,i)?0:r},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=nt.increasingDirection(n),s=nt.increasingDirection(i),o=r>0?0:n.length-1,a=s>0?0:n.length-1,u=0;u<n.length;u++){var l=n[o].compareTo(i[a]);if(0!==l)return l;o+=r,a+=s}return 0},interfaces_:function(){return[_]},getClass:function(){return rt}}),nt.ForwardComparator=it,nt.BidirectionalComparator=rt,nt.coordArrayType=new Array(0).fill(null),st.prototype.get=function(){},st.prototype.put=function(){},st.prototype.size=function(){},st.prototype.values=function(){},st.prototype.entrySet=function(){},ot.prototype=new st,at.prototype=new S,at.prototype.contains=function(){},ut.prototype=new at,ut.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},ut.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},ut.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ut.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},ut.prototype.size=function(){return this.array_.length},ut.prototype.isEmpty=function(){return 0===this.array_.length},ut.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ut.prototype.iterator=function(){return new lt(this)};var lt=function(t){this.hashSet_=t,this.position_=0};lt.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new R;return this.hashSet_.array_[this.position_++]},lt.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},lt.prototype.remove=function(){throw new T};var ht=0;function ct(t){return null==t?ht:t.color}function ft(t){return null==t?null:t.parent}function gt(t,e){null!==t&&(t.color=e)}function dt(t){return null==t?null:t.left}function _t(t){return null==t?null:t.right}function pt(){this.root_=null,this.size_=0}function mt(){}function vt(){}function yt(){this.array_=[],arguments[0]instanceof S&&this.addAll(arguments[0])}pt.prototype=new ot,pt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},pt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:ht,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var s=r.value;return r.value=e,s}r=r.right}}while(null!==r);var o={key:t,left:null,right:null,value:e,parent:n,color:ht,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null},pt.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;){var e;if(ft(t)==dt(ft(ft(t))))1==ct(e=_t(ft(ft(t))))?(gt(ft(t),ht),gt(e,ht),gt(ft(ft(t)),1),t=ft(ft(t))):(t==_t(ft(t))&&(t=ft(t),this.rotateLeft(t)),gt(ft(t),ht),gt(ft(ft(t)),1),this.rotateRight(ft(ft(t))));else 1==ct(e=dt(ft(ft(t))))?(gt(ft(t),ht),gt(e,ht),gt(ft(ft(t)),1),t=ft(ft(t))):(t==dt(ft(t))&&(t=ft(t),this.rotateRight(t)),gt(ft(t),ht),gt(ft(ft(t)),1),this.rotateLeft(ft(ft(t))))}this.root_.color=ht},pt.prototype.values=function(){var t=new P,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=pt.successor(e));)t.add(e.value);return t},pt.prototype.entrySet=function(){var t=new ut,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=pt.successor(e));)t.add(e);return t},pt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},pt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},pt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},pt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},pt.prototype.size=function(){return this.size_},e(mt.prototype,{interfaces_:function(){return[]},getClass:function(){return mt}}),vt.prototype=new at,yt.prototype=new vt,yt.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},yt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},yt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},yt.prototype.remove=function(t){throw new T},yt.prototype.size=function(){return this.array_.length},yt.prototype.isEmpty=function(){return 0===this.array_.length},yt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},yt.prototype.iterator=function(){return new Et(this)};var xt,Et=function(t){this.treeSet_=t,this.position_=0};function It(){}function Nt(){}function Ct(){}function St(){}function Lt(){this._geometries=null;var t=arguments[0],e=arguments[1];if(K.call(this,e),null===t&&(t=[]),K.hasNullElements(t))throw new i("geometries must not contain null elements");this._geometries=t}function wt(){var t=arguments[0],e=arguments[1];Lt.call(this,t,e)}function Rt(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0];Rt.call(this,t,Q.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._geom=e,this._geomFact=e.getFactory(),this._bnRule=n}}function Tt(){this.count=null}function Pt(){}function Ot(){}function bt(){}function Mt(t){this.str=t}function Dt(){}function At(){this._points=null;var t=arguments[0],e=arguments[1];K.call(this,e),this.init(t)}function Ft(){}function Gt(){this._coordinates=null;var t=arguments[0],e=arguments[1];K.call(this,e),this.init(t)}function qt(){}function Bt(){}function Vt(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(K.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),K.hasNullElements(e))throw new i("holes must not contain null elements");if(t.isEmpty()&&K.hasNonEmptyElements(e))throw new i("shell is empty but holes are not");this._shell=t,this._holes=e}function zt(){var t=arguments[0],e=arguments[1];Lt.call(this,t,e)}function Yt(){if(arguments[0]instanceof Array&&arguments[1]instanceof se){var t=arguments[0],e=arguments[1];Yt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(N(arguments[0],H)&&arguments[1]instanceof se){var n=arguments[0],i=arguments[1];At.call(this,n,i),this.validateConstruction()}}function kt(){var t=arguments[0],e=arguments[1];Lt.call(this,t,e)}function Ut(){if(this._factory=null,this._isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._factory=t}}function Xt(){}function Ht(){}function Wt(){}function jt(){}function Kt(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Kt.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new E}else if(N(arguments[0],H)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(n=0;n<this._coordinates.length;n++)this._coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1];this._coordinates=r,this._dimension=s,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this._coordinates=new Array(o).fill(null),this._dimension=a;for(n=0;n<o;n++)this._coordinates[n]=new E}}function Zt(){}Et.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new R;return this.treeSet_.array_[this.position_++]},Et.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Et.prototype.remove=function(){throw new T},It.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else{if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t]);return}}},It.asList=function(t){for(var e=new P,n=0,i=t.length;n<i;n++)e.add(t[n]);return e},e(Nt.prototype,{interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.toDimensionSymbol=function(t){switch(t){case Nt.FALSE:return Nt.SYM_FALSE;case Nt.TRUE:return Nt.SYM_TRUE;case Nt.DONTCARE:return Nt.SYM_DONTCARE;case Nt.P:return Nt.SYM_P;case Nt.L:return Nt.SYM_L;case Nt.A:return Nt.SYM_A}throw new i("Unknown dimension value: "+t)},Nt.toDimensionValue=function(t){switch(q.toUpperCase(t)){case Nt.SYM_FALSE:return Nt.FALSE;case Nt.SYM_TRUE:return Nt.TRUE;case Nt.SYM_DONTCARE:return Nt.DONTCARE;case Nt.SYM_P:return Nt.P;case Nt.SYM_L:return Nt.L;case Nt.SYM_A:return Nt.A}throw new i("Unknown dimension symbol: "+t)},Nt.P=0,Nt.L=1,Nt.A=2,Nt.FALSE=-1,Nt.TRUE=-2,Nt.DONTCARE=-3,Nt.SYM_FALSE="F",Nt.SYM_TRUE="T",Nt.SYM_DONTCARE="*",Nt.SYM_P="0",Nt.SYM_L="1",Nt.SYM_A="2",e(Ct.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return Ct}}),e(St.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return St}}),v(Lt,K),e(Lt.prototype,{computeEnvelopeInternal:function(){for(var t=new M,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this._geometries[t]},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof K){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(n._geometries[i],e))return!1;return!0}return K.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();It.sort(this._geometries)},getCoordinate:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=Nt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},getTypeCode:function(){return K.TYPECODE_GEOMETRYCOLLECTION},getDimension:function(){for(var t=Nt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},getNumGeometries:function(){return this._geometries.length},reverse:function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new yt(It.asList(this._geometries)),n=new yt(It.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],s=i,o=this.getNumGeometries(),a=s.getNumGeometries(),u=0;u<o&&u<a;){var l=this.getGeometryN(u),h=s.getGeometryN(u),c=l.compareToSameClass(h,r);if(0!==c)return c;u++}return u<o?1:u<a?-1:0}},apply:function(){if(N(arguments[0],Z))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(N(arguments[0],St)){var n=arguments[0];if(0===this._geometries.length)return null;for(e=0;e<this._geometries.length&&(this._geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],Ct)){var i=arguments[0];i.filter(this);for(e=0;e<this._geometries.length;e++)this._geometries[e].apply(i)}else if(N(arguments[0],j)){var r=arguments[0];r.filter(this);for(e=0;e<this._geometries.length;e++)this._geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),x.shouldNeverReachHere(),null},getGeometryType:function(){return K.TYPENAME_GEOMETRYCOLLECTION},copy:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new Lt(t,this._factory)},isEmpty:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Lt}}),Lt.serialVersionUID=-0x4f07bcb1f857d800,v(wt,Lt),e(wt.prototype,{equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof K){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&Lt.prototype.equalsExact.call(this,t,e)}return Lt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?Nt.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},getTypeCode:function(){return K.TYPECODE_MULTILINESTRING},getDimension:function(){return 1},reverse:function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new Rt(this).getBoundary()},getGeometryType:function(){return K.TYPENAME_MULTILINESTRING},copy:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new wt(t,this._factory)},interfaces_:function(){return[mt]},getClass:function(){return wt}}),wt.serialVersionUID=0x7155d2ab4afa8000,e(Rt.prototype,{boundaryMultiLineString:function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this._geom instanceof At?this.boundaryLineString(this._geom):this._geom instanceof wt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},boundaryLineString:function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this._geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new P;this._endpointMap=new pt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var s=r.next(),o=s.getValue().count;this._bnRule.isInBoundary(o)&&e.add(s.getKey())}return nt.toCoordinateArray(e)},addEndpoint:function(t){var e=this._endpointMap.get(t);null===e&&(e=new Tt,this._endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return Rt}}),Rt.getBoundary=function(){return 1===arguments.length?new Rt(arguments[0]).getBoundary():2===arguments.length?new Rt(arguments[0],arguments[1]).getBoundary():void 0},e(Tt.prototype,{interfaces_:function(){return[]},getClass:function(){return Tt}}),e(Pt.prototype,{interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.ofLine=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new E;t.getCoordinate(0,i);for(var r=i.x,s=i.y,o=1;o<e;o++){t.getCoordinate(o,i);var a=i.x,u=i.y,l=a-r,h=u-s;n+=Math.sqrt(l*l+h*h),r=a,s=u}return n},e(bt.prototype,{interfaces_:function(){return[]},getClass:function(){return bt}}),bt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return new String(n)},bt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],s="",o=new function(){}(new function(){}(bt.getStackTrace(i))),a=0;a<r;a++)try{s+=o.readLine()+bt.NEWLINE}catch(t){if(!(t instanceof Ot))throw t;x.shouldNeverReachHere()}return s}},bt.split=function(t,e){for(var n=e.length,i=new P,r=""+t,s=r.indexOf(e);s>=0;){var o=r.substring(0,s);i.add(o),s=(r=r.substring(s+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},bt.toString=function(){if(1===arguments.length&&"number"==typeof arguments[0]){var t=arguments[0];return bt.SIMPLE_ORDINATE_FORMAT.format(t)}},bt.spaces=function(t){return bt.chars(" ",t)},bt.NEWLINE=Y.getProperty("line.separator"),bt.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),Mt.prototype.append=function(t){this.str+=t},Mt.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Mt.prototype.toString=function(t){return this.str},e(Dt.prototype,{interfaces_:function(){return[]},getClass:function(){return Dt}}),Dt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),s=0;s<r;s++)n.setOrdinate(i,s,t.getOrdinate(e,s))},Dt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,H.X)===t.getOrdinate(e-1,H.X)&&t.getOrdinate(0,H.Y)===t.getOrdinate(e-1,H.Y))},Dt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var a=t.getOrdinate(r,o),u=e.getOrdinate(r,o);if(t.getOrdinate(r,o)!==e.getOrdinate(r,o)&&(!s.isNaN(a)||!s.isNaN(u)))return!1}return!0},Dt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Dt.copy(e,0,i,0,r),r>0)for(var s=r;s<n;s++)Dt.copy(e,r-1,i,s,1);return i},Dt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Dt.swap(t,i,e-i)},Dt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Dt.copy=function(t,e,n,i,r){for(var s=0;s<r;s++)Dt.copyCoord(t,e+s,n,i+s)},Dt.toString=function(){if(1===arguments.length&&N(arguments[0],H)){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new Mt;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var s=0;s<n;s++)s>0&&i.append(","),i.append(bt.toString(t.getOrdinate(r,s)))}return i.append(")"),i.toString()}},Dt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Dt.createClosedRing(t,e,4):e.getOrdinate(0,H.X)===e.getOrdinate(n-1,H.X)&&e.getOrdinate(0,H.Y)===e.getOrdinate(n-1,H.Y)?e:Dt.createClosedRing(t,e,n+1)},Dt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Dt.copy(e,0,i,0,r);for(var s=r;s<n;s++)Dt.copy(e,0,i,s,1);return i},v(At,K),e(At.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new M:this._points.expandEnvelope(new M)},isRing:function(){return this.isClosed()&&this.isSimple()},getCoordinates:function(){return this._points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof K){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),n._points.getCoordinate(i),e))return!1;return!0}return K.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();Dt.reverse(n),this._points=n}return null}}},getCoordinate:function(){return this.isEmpty()?null:this._points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?Nt.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getTypeCode:function(){return K.TYPECODE_LINESTRING},getDimension:function(){return 1},getLength:function(){return Pt.ofLine(this._points)},getNumPoints:function(){return this._points.size()},reverse:function(){var t=this._points.copy();return Dt.reverse(t),this.getFactory().createLineString(t)},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._points,t._points)}},apply:function(){if(N(arguments[0],Z))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(N(arguments[0],St)){var n=arguments[0];if(0===this._points.size())return null;for(e=0;e<this._points.size()&&(n.filter(this._points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],Ct)){arguments[0].filter(this)}else if(N(arguments[0],j)){arguments[0].filter(this)}},getBoundary:function(){return new Rt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof At},getCoordinateN:function(t){return this._points.getCoordinate(t)},getGeometryType:function(){return K.TYPENAME_LINESTRING},copy:function(){return new At(this._points.copy(),this._factory)},getCoordinateSequence:function(){return this._points},isEmpty:function(){return 0===this._points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new i("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},isCoordinate:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},interfaces_:function(){return[mt]},getClass:function(){return At}}),At.serialVersionUID=0x2b2b51ba435c8e00,e(Ft.prototype,{interfaces_:function(){return[]},getClass:function(){return Ft}}),v(Gt,K),e(Gt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new M;var t=new M;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof K){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return K.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return Nt.FALSE},getTypeCode:function(){return K.TYPECODE_POINT},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}},apply:function(){if(N(arguments[0],Z)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(N(arguments[0],St)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],Ct)){arguments[0].filter(this)}else if(N(arguments[0],j)){arguments[0].filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection()},getGeometryType:function(){return K.TYPENAME_POINT},copy:function(){return new Gt(this._coordinates.copy(),this._factory)},getCoordinateSequence:function(){return this._coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this._coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),x.isTrue(t.size()<=1),this._coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[Ft]},getClass:function(){return Gt}}),Gt.serialVersionUID=0x44077bad161cbc00,e(qt.prototype,{interfaces_:function(){return[]},getClass:function(){return qt}}),qt.ofRing=function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(qt.ofRingSigned(t))}if(N(arguments[0],H)){var e=arguments[0];return Math.abs(qt.ofRingSigned(e))}},qt.ofRingSigned=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(N(arguments[0],H)){var o=arguments[0],a=o.size();if(a<3)return 0;var u=new E,l=new E,h=new E;o.getCoordinate(0,l),o.getCoordinate(1,h);n=l.x;h.x-=n;for(e=0,i=1;i<a-1;i++)u.y=l.y,l.x=h.x,l.y=h.y,o.getCoordinate(i+1,h),h.x-=n,e+=l.x*(u.y-h.y);return e/2}},e(Bt.prototype,{interfaces_:function(){return[]},getClass:function(){return Bt}}),v(Vt,K),e(Vt.prototype,{computeEnvelopeInternal:function(){return this._shell.getEnvelopeInternal()},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var s=this._holes[r].getCoordinates(),o=0;o<s.length;o++)t[++e]=s[o];return t},getArea:function(){var t=0;t+=qt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=qt.ofRing(this._holes[e].getCoordinateSequence());return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){if((s=t.getX(n))!==e.getMinX()&&s!==e.getMaxX())return!1;if((o=t.getY(n))!==e.getMinY()&&o!==e.getMaxY())return!1}var i=t.getX(0),r=t.getY(0);for(n=1;n<=4;n++){var s,o;if((s=t.getX(n))!==i===((o=t.getY(n))!==r))return!1;i=s,r=o}return!0},equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof K){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this._shell,r=n._shell;if(!i.equalsExact(r,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(n._holes[s],e))return!1;return!0}return K.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);It.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);Y.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=nt.minCoordinate(e.getCoordinates());nt.scroll(i,r),Y.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],z.isCCW(e.getCoordinates())===n&&nt.reverse(e.getCoordinates())}},getCoordinate:function(){return this._shell.getCoordinate()},getNumInteriorRing:function(){return this._holes.length},getBoundaryDimension:function(){return 1},getTypeCode:function(){return K.TYPECODE_POLYGON},getDimension:function(){return 2},getLength:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},getNumPoints:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],s=i,o=(e=this._shell,n=s._shell,e.compareToSameClass(n,r));if(0!==o)return o;for(var a=this.getNumInteriorRing(),u=s.getNumInteriorRing(),l=0;l<a&&l<u;){var h=this.getInteriorRingN(l),c=s.getInteriorRingN(l),f=h.compareToSameClass(c,r);if(0!==f)return f;l++}return l<a?1:l<u?-1:0}},apply:function(){if(N(arguments[0],Z)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(N(arguments[0],St)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(e=0;e<this._holes.length&&(this._holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],Ct)){arguments[0].filter(this)}else if(N(arguments[0],j)){var i=arguments[0];i.filter(this),this._shell.apply(i);for(e=0;e<this._holes.length;e++)this._holes[e].apply(i)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},getGeometryType:function(){return K.TYPENAME_POLYGON},copy:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new Vt(t,e,this._factory)},getExteriorRing:function(){return this._shell},isEmpty:function(){return this._shell.isEmpty()},getInteriorRingN:function(t){return this._holes[t]},interfaces_:function(){return[Bt]},getClass:function(){return Vt}}),Vt.serialVersionUID=-0x307ffefd8dc97200,v(zt,Lt),e(zt.prototype,{isValid:function(){return!0},equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof K){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&Lt.prototype.equalsExact.call(this,t,e)}return Lt.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return Lt.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return Nt.FALSE},getTypeCode:function(){return K.TYPECODE_MULTIPOINT},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection()},getGeometryType:function(){return K.TYPENAME_MULTIPOINT},copy:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new zt(t,this._factory)},interfaces_:function(){return[Ft]},getClass:function(){return zt}}),zt.serialVersionUID=-0x6fb1ed4162e0fc00,v(Yt,At),e(Yt.prototype,{getBoundaryDimension:function(){return Nt.FALSE},isClosed:function(){return!!this.isEmpty()||At.prototype.isClosed.call(this)},getTypeCode:function(){return K.TYPECODE_LINEARRING},reverse:function(){var t=this._points.copy();return Dt.reverse(t),this.getFactory().createLinearRing(t)},validateConstruction:function(){if(!this.isEmpty()&&!At.prototype.isClosed.call(this))throw new i("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Yt.MINIMUM_VALID_SIZE)throw new i("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return K.TYPENAME_LINEARRING},copy:function(){return new Yt(this._points.copy(),this._factory)},interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.MINIMUM_VALID_SIZE=4,Yt.serialVersionUID=-0x3b229e262367a600,v(kt,Lt),e(kt.prototype,{equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof K){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&Lt.prototype.equalsExact.call(this,t,e)}return Lt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getTypeCode:function(){return K.TYPECODE_MULTIPOLYGON},getDimension:function(){return 2},reverse:function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new P,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},getGeometryType:function(){return K.TYPENAME_MULTIPOLYGON},copy:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new kt(t,this._factory)},interfaces_:function(){return[Bt]},getClass:function(){return kt}}),kt.serialVersionUID=-0x7a5aa1369171980,e(Ut.prototype,{setCopyUserData:function(t){this._isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Lt?this.editGeometryCollection(t,e):t instanceof Vt?this.editPolygon(t,e):t instanceof Gt?e.edit(t,this._factory):t instanceof At?e.edit(t,this._factory):(x.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this._factory),i=new P,r=0;r<n.getNumGeometries();r++){var s=this.edit(n.getGeometryN(r),e);null===s||s.isEmpty()||i.add(s)}return n.getClass()===zt?this._factory.createMultiPoint(i.toArray([])):n.getClass()===wt?this._factory.createMultiLineString(i.toArray([])):n.getClass()===kt?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon()),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new P,s=0;s<n.getNumInteriorRing();s++){var o=this.edit(n.getInteriorRingN(s),e);null===o||o.isEmpty()||r.add(o)}return this._factory.createPolygon(i,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Ut}}),Ut.GeometryEditorOperation=Xt,e(Ht.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Xt]},getClass:function(){return Ht}}),e(Wt.prototype,{edit:function(t,e){var n=this.edit(t.getCoordinates(),t);return t instanceof Yt?null===n?e.createLinearRing():e.createLinearRing(n):t instanceof At?null===n?e.createLineString():e.createLineString(n):t instanceof Gt?null===n||0===n.length?e.createPoint():e.createPoint(n[0]):t},interfaces_:function(){return[Xt]},getClass:function(){return Wt}}),e(jt.prototype,{edit:function(t,e){return t instanceof Yt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof At?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Gt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Xt]},getClass:function(){return jt}}),Ut.NoOpGeometryOperation=Ht,Ut.CoordinateOperation=Wt,Ut.CoordinateSequenceOperation=jt,e(Kt.prototype,{setOrdinate:function(t,e,n){switch(e){case H.X:this._coordinates[t].x=n;break;case H.Y:this._coordinates[t].y=n;break;case H.Z:this._coordinates[t].z=n;break;default:throw new i("invalid ordinateIndex")}},size:function(){return this._coordinates.length},getOrdinate:function(t,e){switch(e){case H.X:return this._coordinates[t].x;case H.Y:return this._coordinates[t].y;case H.Z:return this._coordinates[t].z}return s.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},getCoordinateCopy:function(t){return new E(this._coordinates[t])},getDimension:function(){return this._dimension},getX:function(t){return this._coordinates[t].x},expandEnvelope:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Kt(t,this._dimension)},toString:function(){if(this._coordinates.length>0){var t=new Mt(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this._coordinates[t].y},toCoordinateArray:function(){return this._coordinates},interfaces_:function(){return[H,p]},getClass:function(){return Kt}}),Kt.serialVersionUID=-0xcb44a778db18e00,e(Zt.prototype,{readResolve:function(){return Zt.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Kt(arguments[0]);if(N(arguments[0],H))return new Kt(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Kt(t):new Kt(t,e)}},interfaces_:function(){return[W,p]},getClass:function(){return Zt}}),Zt.instance=function(){return Zt.instanceObject},Zt.serialVersionUID=-0x38e49fa6cf6f2e00,Zt.instanceObject=new Zt;var Qt=Object.defineProperty;var Jt=function(t,e){function n(t){if(!this||this.constructor!==n)return new n(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&function(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}.call(this,t)}e||Qt(t,"size",{get:te});return t.constructor=n,n.prototype=t,n}({delete:function(t){this.has(t)&&(this._keys.splice(xt,1),this._values.splice(xt,1),this._itp.forEach(function(t){xt<t[0]&&t[0]--}));return xt>-1},has:function(t){return function(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(xt=t.length;xt--&&(n=t[xt],i=e,n!==i&&(n==n||i==i)););else xt=t.indexOf(e);var n,i;return xt>-1}.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[xt]:void 0},set:function(t,e){return this.has(t)?this._values[xt]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return $t(this._itp,this._keys)},values:function(){return $t(this._itp,this._values)},entries:function(){return $t(this._itp,this._keys,this._values)},forEach:function(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}});function $t(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var s,o=i[0];return!r&&o<e.length?(s=n?[e[o],n[o]]:e[o],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:s}}}}function te(){return this._values.length}var ee="undefined"!=typeof Map&&Map.prototype.values?Map:Jt;function ne(){this.map_=new ee}function ie(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=ie.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof re){var t=arguments[0];this._modelType=t,t===ie.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this._modelType=ie.FIXED,this.setScale(e)}else if(arguments[0]instanceof ie){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}function re(){this._name=null;var t=arguments[0];this._name=t,re.nameToTypeMap.put(t,this)}function se(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)se.call(this,new ie,0);else if(1===arguments.length){if(N(arguments[0],W)){var t=arguments[0];se.call(this,new ie,0,t)}else if(arguments[0]instanceof ie){var e=arguments[0];se.call(this,e,0,se.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];se.call(this,n,i,se.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this._precisionModel=r,this._coordinateSequenceFactory=o,this._SRID=s}}ne.prototype=new st,ne.prototype.get=function(t){return this.map_.get(t)||null},ne.prototype.put=function(t,e){return this.map_.set(t,e),e},ne.prototype.values=function(){for(var t=new P,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},ne.prototype.entrySet=function(){var t=new ut;return this.map_.entries().forEach(function(e){return t.add(e)}),t},ne.prototype.size=function(){return this.map_.size()},e(ie.prototype,{equals:function(t){if(!(t instanceof ie))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new G(n).compareTo(new G(i))},getScale:function(){return this._scale},isFloating:function(){return this._modelType===ie.FLOATING||this._modelType===ie.FLOATING_SINGLE},getType:function(){return this._modelType},toString:function(){var t="UNKNOWN";return this._modelType===ie.FLOATING?t="Floating":this._modelType===ie.FLOATING_SINGLE?t="Floating-Single":this._modelType===ie.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];return s.isNaN(t)?t:this._modelType===ie.FLOATING_SINGLE?t:this._modelType===ie.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof E){var e=arguments[0];if(this._modelType===ie.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},getMaximumSignificantDigits:function(){var t=16;return this._modelType===ie.FLOATING?t=16:this._modelType===ie.FLOATING_SINGLE?t=6:this._modelType===ie.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this._scale=Math.abs(t)},interfaces_:function(){return[p,g]},getClass:function(){return ie}}),ie.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},e(re.prototype,{readResolve:function(){return re.nameToTypeMap.get(this._name)},toString:function(){return this._name},interfaces_:function(){return[p]},getClass:function(){return re}}),re.serialVersionUID=-552860263173159e4,re.nameToTypeMap=new ne,ie.Type=re,ie.serialVersionUID=0x6bee6404e9a25c00,ie.FIXED=new re("FIXED"),ie.FLOATING=new re("FLOATING"),ie.FLOATING_SINGLE=new re("FLOATING SINGLE"),ie.maximumPreciseValue=9007199254740992,e(se.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new E(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new E(t.getMinX(),t.getMinY()),new E(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new E(t.getMinX(),t.getMinY()),new E(t.getMinX(),t.getMaxY()),new E(t.getMaxX(),t.getMaxY()),new E(t.getMaxX(),t.getMinY()),new E(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],H))return new At(arguments[0],this)}},createMultiLineString:function(){return 0===arguments.length?new wt(null,this):1===arguments.length?new wt(arguments[0],this):void 0},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var s=r.next(),o=s.getClass();null===e&&(e=o),o!==e&&(n=!0),s instanceof Lt&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(se.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Vt)return this.createMultiPolygon(se.toPolygonArray(t));if(a instanceof At)return this.createMultiLineString(se.toLineStringArray(t));if(a instanceof Gt)return this.createMultiPoint(se.toPointArray(t));x.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(N(arguments[0],H))return new Gt(arguments[0],this)}},getCoordinateSequenceFactory:function(){return this._coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(N(arguments[0],H)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Yt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){return new Vt(arguments[0],arguments[1],this)}},getSRID:function(){return this._SRID},createGeometryCollection:function(){return 0===arguments.length?new Lt(null,this):1===arguments.length?new Lt(arguments[0],this):void 0},createGeometry:function(t){return new Ut(this).edit(t,{edit:function(){if(2===arguments.length&&arguments[1]instanceof K&&N(arguments[0],H)){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this._precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],H))return new Yt(arguments[0],this)}},createMultiPolygon:function(){return 0===arguments.length?new kt(null,this):1===arguments.length?new kt(arguments[0],this):void 0},createMultiPoint:function(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new zt(arguments[0],this);if(N(arguments[0],H)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=this.getCoordinateSequenceFactory().create(1,t.getDimension());Dt.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}},interfaces_:function(){return[p]},getClass:function(){return se}}),se.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},se.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},se.getDefaultCoordinateSequenceFactory=function(){return Zt.instance()},se.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},se.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},se.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},se.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},se.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},se.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},se.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},se.serialVersionUID=-0x5ea75f2051eeb400;var oe={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};function ae(t){this.geometryFactory=t||new se,this.precisionModel=this.geometryFactory.getPrecisionModel()}e(ae.prototype,{read:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=oe.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=oe.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],le[n]&&(e=le[n].call(this,i))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!ue[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+ue[e].call(this,t)+")"}});var ue={coordinate:function(t){return t.x+" "+t.y},point:function(t){return ue.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+ue.point.call(this,t._geometries[n])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(ue.coordinate.call(this,t._points._coordinates[n]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(ue.coordinate.call(this,t._points._coordinates[n]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+ue.linestring.call(this,t._geometries[n])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+ue.linestring.call(this,t._shell)+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+ue.linestring.call(this,t._holes[n])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+ue.polygon.call(this,t._geometries[n])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},le={coord:function(t){var e=t.trim().split(oe.spaces),n=new E(Number.parseFloat(e[0]),Number.parseFloat(e[1]));return this.precisionModel.makePrecise(n),n},point:function(t){return void 0===t?this.geometryFactory.createPoint():this.geometryFactory.createPoint(le.coord.call(this,t))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(oe.trimParens,"$1"),i.push(le.point.call(this,e));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e=t.trim().split(","),n=[],i=0,r=e.length;i<r;++i)n.push(le.coord.call(this,e[i]));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e=t.trim().split(","),n=[],i=0,r=e.length;i<r;++i)n.push(le.coord.call(this,e[i]));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(oe.parenComma),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(oe.trimParens,"$1"),i.push(le.linestring.call(this,e));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,s=t.trim().split(oe.parenComma),o=[],a=0,u=s.length;a<u;++a)e=s[a].replace(oe.trimParens,"$1"),n=le.linestring.call(this,e),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:o.push(i);return this.geometryFactory.createPolygon(r,o)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(oe.doubleParenComma),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(oe.trimParens,"$1"),i.push(le.polygon.call(this,e));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};function he(t){this.parser=new ae(t)}function ce(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new E,this._intPt[1]=new E,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}function fe(){ce.apply(this)}function ge(){if(this.p0=null,this.p1=null,0===arguments.length)ge.call(this,new E,new E);else if(1===arguments.length){var t=arguments[0];ge.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];ge.call(this,new E(i,r),new E(s,o))}}function de(){}function _e(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Nt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];_e.call(this),this.set(t)}else if(arguments[0]instanceof _e){var e=arguments[0];_e.call(this),this._matrix[de.INTERIOR][de.INTERIOR]=e._matrix[de.INTERIOR][de.INTERIOR],this._matrix[de.INTERIOR][de.BOUNDARY]=e._matrix[de.INTERIOR][de.BOUNDARY],this._matrix[de.INTERIOR][de.EXTERIOR]=e._matrix[de.INTERIOR][de.EXTERIOR],this._matrix[de.BOUNDARY][de.INTERIOR]=e._matrix[de.BOUNDARY][de.INTERIOR],this._matrix[de.BOUNDARY][de.BOUNDARY]=e._matrix[de.BOUNDARY][de.BOUNDARY],this._matrix[de.BOUNDARY][de.EXTERIOR]=e._matrix[de.BOUNDARY][de.EXTERIOR],this._matrix[de.EXTERIOR][de.INTERIOR]=e._matrix[de.EXTERIOR][de.INTERIOR],this._matrix[de.EXTERIOR][de.BOUNDARY]=e._matrix[de.EXTERIOR][de.BOUNDARY],this._matrix[de.EXTERIOR][de.EXTERIOR]=e._matrix[de.EXTERIOR][de.EXTERIOR]}}function pe(){}function me(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}e(he.prototype,{write:function(t){return this.parser.write(t)}}),e(he,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(ce.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},getTopologySummary:function(){var t=new Mt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this._result},computeIntLineIndex:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this._precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this._intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this._result!==ce.NO_INTERSECTION},getEdgeDistance:function(t,e){return ce.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},isCollinear:function(){return this._result===ce.COLLINEAR_INTERSECTION},toString:function(){return he.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+he.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this._inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return ce}}),ce.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),s=-1;if(t.equals(e))s=0;else if(t.equals(n))s=i>r?i:r;else{var o=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(s=i>r?o:a)||t.equals(e)||(s=Math.max(o,a))}return x.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s},ce.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return x.isTrue(!(0===s&&!t.equals(e)),"Invalid distance calculation"),s},ce.DONT_INTERSECT=0,ce.DO_INTERSECT=1,ce.COLLINEAR=2,ce.NO_INTERSECTION=0,ce.POINT_INTERSECTION=1,ce.COLLINEAR_INTERSECTION=2,v(fe,ce),e(fe.prototype,{isInSegmentEnvelopes:function(t){var e=new M(this._inputLines[0][0],this._inputLines[0][1]),n=new M(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return ce.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,M.intersects(e,n,t)&&0===z.index(e,n,t)&&0===z.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=ce.POINT_INTERSECTION,null;this._result=ce.NO_INTERSECTION},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(t,e,n,i){var r=null;try{r=k.intersection(t,e,n,i)}catch(s){if(!(s instanceof A))throw s;r=fe.nearestEndpoint(t,e,n,i)}return r},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new E(fe.nearestEndpoint(t,e,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,s=Math.abs(r);return Math.abs(e)<s&&(r=e,s=Math.abs(e)),Math.abs(n)<s&&(r=n,s=Math.abs(n)),Math.abs(i)<s&&(r=i),r},checkDD:function(t,e,n,i,r){var s=V.intersection(t,e,n,i),o=this.isInSegmentEnvelopes(s);Y.out.println("DD in env = "+o+"  --------------------- "+s),r.distance(s)>1e-4&&Y.out.println("Distance = "+r.distance(s))},intersectionWithNormalization:function(t,e,n,i){var r=new E(t),s=new E(e),o=new E(n),a=new E(i),u=new E;this.normalizeToEnvCentre(r,s,o,a,u);var l=this.safeHCoordinateIntersection(r,s,o,a);return l.x+=u.x,l.y+=u.y,l},computeCollinearIntersection:function(t,e,n,i){var r=M.intersects(t,e,n),s=M.intersects(t,e,i),o=M.intersects(n,i,t),a=M.intersects(n,i,e);return r&&s?(this._intPt[0]=n,this._intPt[1]=i,ce.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=t,this._intPt[1]=e,ce.COLLINEAR_INTERSECTION):r&&o?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||s||a?ce.COLLINEAR_INTERSECTION:ce.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||o?ce.COLLINEAR_INTERSECTION:ce.POINT_INTERSECTION):s&&o?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?ce.COLLINEAR_INTERSECTION:ce.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||o?ce.COLLINEAR_INTERSECTION:ce.POINT_INTERSECTION):ce.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var s=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,h=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,g=((s>l?s:l)+(a<c?a:c))/2,d=((o>h?o:h)+(u<f?u:f))/2;r.x=g,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!M.intersects(t,e,n,i))return ce.NO_INTERSECTION;var r=z.index(t,e,n),s=z.index(t,e,i);if(r>0&&s>0||r<0&&s<0)return ce.NO_INTERSECTION;var o=z.index(n,i,t),a=z.index(n,i,e);return o>0&&a>0||o<0&&a<0?ce.NO_INTERSECTION:0===r&&0===s&&0===o&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===s||0===o||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new E(n):0===s?this._intPt[0]=new E(i):0===o?this._intPt[0]=new E(t):0===a&&(this._intPt[0]=new E(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),ce.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return fe}}),fe.nearestEndpoint=function(t,e,n,i){var r=t,s=X.pointToSegment(t,n,i),o=X.pointToSegment(e,n,i);return o<s&&(s=o,r=e),(o=X.pointToSegment(n,t,e))<s&&(s=o,r=n),(o=X.pointToSegment(i,t,e))<s&&(s=o,r=i),r},e(ge.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof ge){var t=arguments[0],e=z.index(this.p0,this.p1,t.p0),n=z.index(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof E){var i=arguments[0];return z.index(this.p0,this.p1,i)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof ge))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new fe;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof E){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new E(t);var e=this.projectionFactor(t),n=new E;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof ge){var i=arguments[0],r=this.projectionFactor(i.p0),s=this.projectionFactor(i.p1);if(r>=1&&s>=1)return null;if(r<=0&&s<=0)return null;var o=this.project(i.p0);r<0&&(o=this.p0),r>1&&(o=this.p1);var a=this.project(i.p1);return s<0&&(a=this.p0),s>1&&(a=this.p1),new ge(o,a)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return X.pointToLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return ge.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?s.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=s.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<i&&(i=r,n[0]=a,n[1]=t.p1);var u=t.closestPoint(this.p0);(r=u.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=u);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n},closestPoint:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{return k.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof A))throw t}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,o=Math.sqrt(r*r+s*s),a=0,u=0;if(0!==e){if(o<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/o,u=e*s/o}return new E(n-u,i+a)},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||s.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof ge){var t=arguments[0];return X.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof E){var e=arguments[0];return X.pointToSegment(e,this.p0,this.p1)}},pointAlong:function(t){var e=new E;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);return n^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},interfaces_:function(){return[g,p]},getClass:function(){return ge}}),ge.midPoint=function(t,e){return new E((t.x+e.x)/2,(t.y+e.y)/2)},ge.serialVersionUID=0x2d2172135f411c00,e(de.prototype,{interfaces_:function(){return[]},getClass:function(){return de}}),de.toLocationSymbol=function(t){switch(t){case de.EXTERIOR:return"e";case de.BOUNDARY:return"b";case de.INTERIOR:return"i";case de.NONE:return"-"}throw new i("Unknown location value: "+t)},de.INTERIOR=0,de.BOUNDARY=1,de.EXTERIOR=2,de.NONE=-1,e(_e.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){return(_e.isTrue(this._matrix[de.INTERIOR][de.INTERIOR])||_e.isTrue(this._matrix[de.INTERIOR][de.BOUNDARY])||_e.isTrue(this._matrix[de.BOUNDARY][de.INTERIOR])||_e.isTrue(this._matrix[de.BOUNDARY][de.BOUNDARY]))&&this._matrix[de.EXTERIOR][de.INTERIOR]===Nt.FALSE&&this._matrix[de.EXTERIOR][de.BOUNDARY]===Nt.FALSE},isCoveredBy:function(){return(_e.isTrue(this._matrix[de.INTERIOR][de.INTERIOR])||_e.isTrue(this._matrix[de.INTERIOR][de.BOUNDARY])||_e.isTrue(this._matrix[de.BOUNDARY][de.INTERIOR])||_e.isTrue(this._matrix[de.BOUNDARY][de.BOUNDARY]))&&this._matrix[de.INTERIOR][de.EXTERIOR]===Nt.FALSE&&this._matrix[de.BOUNDARY][de.EXTERIOR]===Nt.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this._matrix[n][i]=Nt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this._matrix[r][s]=o}},isContains:function(){return _e.isTrue(this._matrix[de.INTERIOR][de.INTERIOR])&&this._matrix[de.EXTERIOR][de.INTERIOR]===Nt.FALSE&&this._matrix[de.EXTERIOR][de.BOUNDARY]===Nt.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,Nt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this._matrix[r][s]<o&&(this._matrix[r][s]=o)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return _e.isTrue(this._matrix[de.INTERIOR][de.INTERIOR])&&this._matrix[de.INTERIOR][de.EXTERIOR]===Nt.FALSE&&this._matrix[de.BOUNDARY][de.EXTERIOR]===Nt.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===Nt.A&&e===Nt.A||t===Nt.L&&e===Nt.L||t===Nt.L&&e===Nt.A||t===Nt.P&&e===Nt.A||t===Nt.P&&e===Nt.L)&&(this._matrix[de.INTERIOR][de.INTERIOR]===Nt.FALSE&&(_e.isTrue(this._matrix[de.INTERIOR][de.BOUNDARY])||_e.isTrue(this._matrix[de.BOUNDARY][de.INTERIOR])||_e.isTrue(this._matrix[de.BOUNDARY][de.BOUNDARY])))},isOverlaps:function(t,e){return t===Nt.P&&e===Nt.P||t===Nt.A&&e===Nt.A?_e.isTrue(this._matrix[de.INTERIOR][de.INTERIOR])&&_e.isTrue(this._matrix[de.INTERIOR][de.EXTERIOR])&&_e.isTrue(this._matrix[de.EXTERIOR][de.INTERIOR]):t===Nt.L&&e===Nt.L&&(1===this._matrix[de.INTERIOR][de.INTERIOR]&&_e.isTrue(this._matrix[de.INTERIOR][de.EXTERIOR])&&_e.isTrue(this._matrix[de.EXTERIOR][de.INTERIOR]))},isEquals:function(t,e){return t===e&&(_e.isTrue(this._matrix[de.INTERIOR][de.INTERIOR])&&this._matrix[de.INTERIOR][de.EXTERIOR]===Nt.FALSE&&this._matrix[de.BOUNDARY][de.EXTERIOR]===Nt.FALSE&&this._matrix[de.EXTERIOR][de.INTERIOR]===Nt.FALSE&&this._matrix[de.EXTERIOR][de.BOUNDARY]===Nt.FALSE)},toString:function(){for(var t=new Mt("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,Nt.toDimensionSymbol(this._matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t},get:function(t,e){return this._matrix[t][e]},transpose:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new i("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!_e.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this._matrix[de.INTERIOR][de.INTERIOR]===Nt.FALSE&&this._matrix[de.INTERIOR][de.BOUNDARY]===Nt.FALSE&&this._matrix[de.BOUNDARY][de.INTERIOR]===Nt.FALSE&&this._matrix[de.BOUNDARY][de.BOUNDARY]===Nt.FALSE},isCrosses:function(t,e){return t===Nt.P&&e===Nt.L||t===Nt.P&&e===Nt.A||t===Nt.L&&e===Nt.A?_e.isTrue(this._matrix[de.INTERIOR][de.INTERIOR])&&_e.isTrue(this._matrix[de.INTERIOR][de.EXTERIOR]):t===Nt.L&&e===Nt.P||t===Nt.A&&e===Nt.P||t===Nt.A&&e===Nt.L?_e.isTrue(this._matrix[de.INTERIOR][de.INTERIOR])&&_e.isTrue(this._matrix[de.EXTERIOR][de.INTERIOR]):t===Nt.L&&e===Nt.L&&0===this._matrix[de.INTERIOR][de.INTERIOR]},interfaces_:function(){return[d]},getClass:function(){return _e}}),_e.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===Nt.SYM_DONTCARE||(e===Nt.SYM_TRUE&&(t>=0||t===Nt.TRUE)||(e===Nt.SYM_FALSE&&t===Nt.FALSE||(e===Nt.SYM_P&&t===Nt.P||(e===Nt.SYM_L&&t===Nt.L||e===Nt.SYM_A&&t===Nt.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return new _e(n).matches(i)}},_e.isTrue=function(t){return t>=0||t===Nt.TRUE},e(pe.prototype,{interfaces_:function(){return[]},getClass:function(){return pe}}),pe.toDegrees=function(t){return 180*t/Math.PI},pe.normalize=function(t){for(;t>Math.PI;)t-=pe.PI_TIMES_2;for(;t<=-Math.PI;)t+=pe.PI_TIMES_2;return t},pe.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},pe.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},pe.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},pe.interiorAngle=function(t,e,n){var i=pe.angle(e,t),r=pe.angle(e,n);return Math.abs(r-i)},pe.normalizePositive=function(t){if(t<0){for(;t<0;)t+=pe.PI_TIMES_2;t>=pe.PI_TIMES_2&&(t=0)}else{for(;t>=pe.PI_TIMES_2;)t-=pe.PI_TIMES_2;t<0&&(t=0)}return t},pe.angleBetween=function(t,e,n){var i=pe.angle(e,t),r=pe.angle(e,n);return pe.diff(i,r)},pe.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},pe.toRadians=function(t){return t*Math.PI/180},pe.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?pe.COUNTERCLOCKWISE:n<0?pe.CLOCKWISE:pe.NONE},pe.angleBetweenOriented=function(t,e,n){var i=pe.angle(e,t),r=pe.angle(e,n)-i;return r<=-Math.PI?r+pe.PI_TIMES_2:r>Math.PI?r-pe.PI_TIMES_2:r},pe.PI_TIMES_2=2*Math.PI,pe.PI_OVER_2=Math.PI/2,pe.PI_OVER_4=Math.PI/4,pe.COUNTERCLOCKWISE=z.COUNTERCLOCKWISE,pe.CLOCKWISE=z.CLOCKWISE,pe.NONE=z.COLLINEAR,e(me.prototype,{area:function(){return me.area(this.p0,this.p1,this.p2)},signedArea:function(){return me.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new i("Supplied point is null.");return me.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return me.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return me.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return me.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return me.area3D(this.p0,this.p1,this.p2)},centroid:function(){return me.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return me.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return me}}),me.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},me.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},me.det=function(t,e,n,i){return t*i-e*n},me.interpolateZ=function(t,e,n,i){var r=e.x,s=e.y,o=n.x-r,a=i.x-r,u=n.y-s,l=i.y-s,h=o*l-a*u,c=t.x-r,f=t.y-s,g=(l*c-a*f)/h,d=(-u*c+o*f)/h;return e.z+g*(n.z-e.z)+d*(i.z-e.z)},me.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),s=n.distance(t),o=i;return r>o&&(o=r),s>o&&(o=s),o},me.isAcute=function(t,e,n){return!!pe.isAcute(t,e,n)&&(!!pe.isAcute(e,n,t)&&!!pe.isAcute(n,t,e))},me.circumcentre=function(t,e,n){var i=n.x,r=n.y,s=t.x-i,o=t.y-r,a=e.x-i,u=e.y-r,l=2*me.det(s,o,a,u);return new E(i-me.det(o,s*s+o*o,u,a*a+u*u)/l,r+me.det(s,s*s+o*o,a,a*a+u*u)/l)},me.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y;return new k(new k(t.x+n/2,t.y+i/2,1),new k(t.x-i+n/2,t.y+n+i/2,1))},me.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),s=n.x-t.x,o=n.y-t.y;return new E(t.x+r*s,t.y+r*o)},me.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=e.z-t.z,o=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-s*a,h=s*o-i*u,c=i*a-r*o,f=l*l+h*h+c*c;return Math.sqrt(f)/2},me.centroid=function(t,e,n){return new E((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},me.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),s=t.distance(e),o=i+r+s;return new E((i*t.x+r*e.x+s*n.x)/o,(i*t.y+r*e.y+s*n.y)/o)};var ve=Object.freeze({Coordinate:E,CoordinateList:b,Envelope:M,LineSegment:ge,GeometryFactory:se,Geometry:K,Point:Gt,LineString:At,LinearRing:Yt,Polygon:Vt,GeometryCollection:Lt,MultiPoint:zt,MultiLineString:wt,MultiPolygon:kt,Dimension:Nt,IntersectionMatrix:_e,PrecisionModel:ie,Location:de,Triangle:me});function ye(){this._pt=[new E,new E],this._distance=s.NaN,this._isNull=!0}function xe(){}function Ee(){this._g0=null,this._g1=null,this._ptDist=new ye,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e}function Ie(){this._maxPtDist=new ye,this._minPtDist=new ye,this._euclideanDist=new xe,this._geom=null;var t=arguments[0];this._geom=t}function Ne(){this._maxPtDist=new ye,this._minPtDist=new ye,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))}function Ce(){}function Se(){}function Le(){this._min=s.POSITIVE_INFINITY,this._max=s.NEGATIVE_INFINITY}function we(){}function Re(){Le.apply(this),this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n}e(ye.prototype,{getCoordinates:function(){return this._pt},getCoordinate:function(t){return this._pt[t]},setMinimum:function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},initialize:function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},toString:function(){return he.toLineString(this._pt[0],this._pt[1])},getDistance:function(){return this._distance},setMaximum:function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},interfaces_:function(){return[]},getClass:function(){return ye}}),e(xe.prototype,{interfaces_:function(){return[]},getClass:function(){return xe}}),xe.computeDistance=function(){if(arguments[2]instanceof ye&&arguments[0]instanceof At&&arguments[1]instanceof E)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new ge,r=t.getCoordinates(),s=0;s<r.length-1;s++){i.setCoordinates(r[s],r[s+1]);var o=i.closestPoint(e);n.setMinimum(o,e)}else if(arguments[2]instanceof ye&&arguments[0]instanceof Vt&&arguments[1]instanceof E){var a=arguments[0],u=arguments[1],l=arguments[2];xe.computeDistance(a.getExteriorRing(),u,l);for(s=0;s<a.getNumInteriorRing();s++)xe.computeDistance(a.getInteriorRingN(s),u,l)}else if(arguments[2]instanceof ye&&arguments[0]instanceof K&&arguments[1]instanceof E){var h=arguments[0],c=arguments[1],f=arguments[2];if(h instanceof At)xe.computeDistance(h,c,f);else if(h instanceof Vt)xe.computeDistance(h,c,f);else if(h instanceof Lt){var g=h;for(s=0;s<g.getNumGeometries();s++){var d=g.getGeometryN(s);xe.computeDistance(d,c,f)}}else f.setMinimum(h.getCoordinate(),c)}else if(arguments[2]instanceof ye&&arguments[0]instanceof ge&&arguments[1]instanceof E){var _=arguments[0],p=arguments[1],m=arguments[2];o=_.closestPoint(p);m.setMinimum(o,p)}},e(Ee.prototype,{getCoordinates:function(){return this._ptDist.getCoordinates()},setDensifyFraction:function(t){if(t>1||t<=0)throw new i("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},compute:function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},distance:function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},computeOrientedDistance:function(t,e,n){var i=new Ie(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Ne(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},orientedDistance:function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.distance=function(){if(2===arguments.length)return(t=new Ee(arguments[0],arguments[1])).distance();if(3===arguments.length){var t,e=arguments[0],n=arguments[1],i=arguments[2];return(t=new Ee(e,n)).setDensifyFraction(i),t.distance()}},e(Ie.prototype,{filter:function(t){this._minPtDist.initialize(),xe.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},getMaxPointDistance:function(){return this._maxPtDist},interfaces_:function(){return[Z]},getClass:function(){return Ie}}),e(Ne.prototype,{filter:function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,s=(i.y-n.y)/this._numSubSegs,o=0;o<this._numSubSegs;o++){var a=new E(n.x+o*r,n.y+o*s);this._minPtDist.initialize(),xe.computeDistance(this._geom,a,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},isDone:function(){return!1},isGeometryChanged:function(){return!1},getMaxPointDistance:function(){return this._maxPtDist},interfaces_:function(){return[St]},getClass:function(){return Ne}}),Ee.MaxPointDistanceFilter=Ie,Ee.MaxDensifiedByFractionDistanceFilter=Ne,e(Ce.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return Ce}}),e(Se.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Se}}),e(Le.prototype,{getMin:function(){return this._min},intersects:function(t,e){return!(this._min>e||this._max<t)},getMax:function(){return this._max},toString:function(){return he.toLineString(new E(this._min,0),new E(this._max,0))},interfaces_:function(){return[]},getClass:function(){return Le}}),e(we.prototype,{compare:function(t,e){var n=t,i=e,r=(n._min+n._max)/2,s=(i._min+i._max)/2;return r<s?-1:r>s?1:0},interfaces_:function(){return[_]},getClass:function(){return we}}),Le.NodeComparator=we,v(Re,Le),e(Re.prototype,{query:function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},interfaces_:function(){return[]},getClass:function(){return Re}});var Te={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Te.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?It.sort(n,e):It.sort(n);for(var i=t.iterator(),r=0,s=n.length;r<s;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new P;return e.add(t),e}};function Pe(){Le.apply(this),this._node1=null,this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}function Oe(){this._leaves=new P,this._root=null,this._level=0}function be(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}}function Me(){this._items=new P}function De(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}function Ae(){this._index=null;var t=arguments[0];if(!(N(t,Bt)||t instanceof Yt))throw new i("Argument must be Polygonal or LinearRing");this._index=new Ge(t)}function Fe(){this._counter=null;var t=arguments[0];this._counter=t}function Ge(){this._index=new Oe;var t=arguments[0];this.init(t)}function qe(){}function Be(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}function Ve(){this._geom=null;var t=arguments[0];this._geom=t}function ze(){}function Ye(){}function ke(){}function Ue(){}function Xe(){this._areaBasePt=null,this._triangleCent3=new E,this._areasum2=0,this._cg3=new E,this._lineCentSum=new E,this._totalLength=0,this._ptCount=0,this._ptCentSum=new E;var t=arguments[0];this._areaBasePt=null,this.add(t)}function He(){}function We(t){this.message=t||""}function je(){this.array_=[]}function Ke(){this.treeSet=new yt,this.list=new P}function Ze(){if(this._geomFactory=null,this._inputPts=null,1===arguments.length){var t=arguments[0];Ze.call(this,Ze.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._inputPts=Ke.filterCoordinates(e),this._geomFactory=n}}function Qe(){this._origin=null;var t=arguments[0];this._origin=t}function Je(){this._factory=null,this._interiorPoint=null,this._maxWidth=0;var t=arguments[0];this._factory=t.getFactory(),this.add(t)}function $e(){this._poly=null,this._centreY=null,this._hiY=s.MAX_VALUE,this._loY=-s.MAX_VALUE;var t=arguments[0];this._poly=t,this._hiY=t.getEnvelopeInternal().getMaxY(),this._loY=t.getEnvelopeInternal().getMinY(),this._centreY=Je.avg(this._loY,this._hiY)}function tn(){this._centroid=null,this._minDistance=s.MAX_VALUE,this._interiorPoint=null;var t=arguments[0];this._centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this._interiorPoint&&this.addEndpoints(t)}function en(){this._centroid=null,this._minDistance=s.MAX_VALUE,this._interiorPoint=null;var t=arguments[0];this._centroid=t.getCentroid().getCoordinate(),this.add(t)}function nn(){this.selectedSegment=new ge}function rn(){this._items=new P,this._subnode=new Array(2).fill(null)}function sn(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function on(){}function an(){this._pt=0,this._level=0,this._interval=null;var t=arguments[0];this.computeKey(t)}function un(){rn.apply(this),this._interval=null,this._centre=null,this._level=null;var t=arguments[0],e=arguments[1];this._interval=t,this._level=e,this._centre=(t.getMin()+t.getMax())/2}function ln(){}function hn(){rn.apply(this)}function cn(){this._root=null,this._minExtent=1,this._root=new hn}function fn(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i}function gn(){}function dn(){}function _n(){}function pn(){}function mn(){this._ring=null,this._tree=null,this._crossings=0,this._interval=new sn;var t=arguments[0];this._ring=t,this.buildIndex()}function vn(){nn.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function yn(){this._input=null,this._extremalPts=null,this._centre=null,this._radius=0;var t=arguments[0];this._input=t}function xn(){if(this._inputGeom=null,this._isConvex=null,this._convexHullPts=null,this._minBaseSeg=new ge,this._minWidthPt=null,this._minPtIndex=null,this._minWidth=0,1===arguments.length){var t=arguments[0];xn.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._inputGeom=e,this._isConvex=n}}v(Pe,Le),e(Pe.prototype,{buildExtent:function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},query:function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},interfaces_:function(){return[]},getClass:function(){return Pe}}),e(Oe.prototype,{buildTree:function(){Te.sort(this._leaves,new Le.NodeComparator);for(var t=this._leaves,e=null,n=new P;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new Re(t,e,n))},query:function(t,e,n){this.init(),this._root.query(t,e,n)},buildRoot:function(){if(null!==this._root)return null;this._root=this.buildTree()},printNode:function(t){Y.out.println(he.toLineString(new E(t._min,this._level),new E(t._max,this._level)))},init:function(){if(null!==this._root)return null;this.buildRoot()},buildLevel:function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new Pe(t.get(n),t.get(n+1));e.add(r)}}},interfaces_:function(){return[]},getClass:function(){return Oe}}),e(be.prototype,{filter:function(t){if(this._isForcedToLineString&&t instanceof Yt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof At&&this._lines.add(t)},setForceToLineString:function(t){this._isForcedToLineString=t},interfaces_:function(){return[j]},getClass:function(){return be}}),be.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(be.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(be.getLines(e,n))}},be.getLines=function(){if(1===arguments.length){var t=arguments[0];return be.getLines(t,!1)}if(2===arguments.length){if(N(arguments[0],S)&&N(arguments[1],S)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();be.getLines(r,n)}return n}if(arguments[0]instanceof K&&"boolean"==typeof arguments[1]){var s=arguments[0],o=arguments[1],a=new P;return s.apply(new be(a,o)),a}if(arguments[0]instanceof K&&N(arguments[1],S)){var u=arguments[0],l=arguments[1];return u instanceof At?l.add(u):u.apply(new be(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&N(arguments[0],S)&&N(arguments[1],S)){var h=arguments[0],c=arguments[1],f=arguments[2];for(i=h.iterator();i.hasNext();){r=i.next();be.getLines(r,c,f)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof K&&N(arguments[1],S)){var g=arguments[0],d=arguments[1],_=arguments[2];return g.apply(new be(d,_)),d}}},e(Me.prototype,{visitItem:function(t){this._items.add(t)},getItems:function(){return this._items},interfaces_:function(){return[Ce]},getClass:function(){return Me}}),e(De.prototype,{countSegment:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=z.index(t,e,this._p);if(r===z.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===z.LEFT&&this._crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==de.EXTERIOR},getLocation:function(){return this._isPointOnSegment?de.BOUNDARY:this._crossingCount%2==1?de.INTERIOR:de.EXTERIOR},isOnSegment:function(){return this._isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return De}}),De.locatePointInRing=function(){if(arguments[0]instanceof E&&N(arguments[1],H)){for(var t=arguments[0],e=arguments[1],n=new De(t),i=new E,r=new E,s=1;s<e.size();s++)if(e.getCoordinate(s,i),e.getCoordinate(s-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof E&&arguments[1]instanceof Array){var o=arguments[0],a=arguments[1];for(n=new De(o),s=1;s<a.length;s++){i=a[s],r=a[s-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()}},e(Ae.prototype,{locate:function(t){var e=new De(t),n=new Fe(e);return this._index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[Se]},getClass:function(){return Ae}}),e(Fe.prototype,{visitItem:function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[Ce]},getClass:function(){return Fe}}),e(Ge.prototype,{init:function(t){for(var e=be.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new ge(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Me;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this._index.query(i,r,s)}},interfaces_:function(){return[]},getClass:function(){return Ge}}),Ae.SegmentVisitor=Fe,Ae.IntervalIndexedGeometry=Ge,e(qe.prototype,{interfaces_:function(){return[]},getClass:function(){return qe}}),qe.isOnLine=function(){if(arguments[0]instanceof E&&N(arguments[1],H)){for(var t=arguments[0],e=arguments[1],n=new fe,i=new E,r=new E,s=e.size(),o=1;o<s;o++)if(e.getCoordinate(o-1,i),e.getCoordinate(o,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof E&&arguments[1]instanceof Array){var a=arguments[0],u=arguments[1];for(n=new fe,o=1;o<u.length;o++){i=u[o-1],r=u[o];if(n.computeIntersection(a,i,r),n.hasIntersection())return!0}return!1}},qe.locateInRing=function(t,e){return De.locatePointInRing(t,e)},qe.isInRing=function(t,e){return qe.locateInRing(t,e)!==de.EXTERIOR},e(Be.prototype,{next:function(){if(this._atStart)return this._atStart=!1,Be.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new R;var t=this._parent.getGeometryN(this._index++);return t instanceof Lt?(this._subcollectionIterator=new Be(t),this._subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},interfaces_:function(){return[C]},getClass:function(){return Be}}),Be.isAtomic=function(t){return!(t instanceof Lt)},e(Ve.prototype,{locate:function(t){return Ve.locate(t,this._geom)},interfaces_:function(){return[Se]},getClass:function(){return Ve}}),Ve.locatePointInPolygon=function(t,e){if(e.isEmpty())return de.EXTERIOR;var n=e.getExteriorRing(),i=Ve.locatePointInRing(t,n);if(i!==de.INTERIOR)return i;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r),o=Ve.locatePointInRing(t,s);if(o===de.BOUNDARY)return de.BOUNDARY;if(o===de.INTERIOR)return de.EXTERIOR}return de.INTERIOR},Ve.locatePointInRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?qe.locateInRing(t,e.getCoordinates()):de.EXTERIOR},Ve.containsPointInPolygon=function(t,e){return de.EXTERIOR!==Ve.locatePointInPolygon(t,e)},Ve.locateInGeometry=function(t,e){if(e instanceof Vt)return Ve.locatePointInPolygon(t,e);if(e instanceof Lt)for(var n=new Be(e);n.hasNext();){var i=n.next();if(i!==e){var r=Ve.locateInGeometry(t,i);if(r!==de.EXTERIOR)return r}}return de.EXTERIOR},Ve.locate=function(t,e){return e.isEmpty()?de.EXTERIOR:Ve.locateInGeometry(t,e)},e(ze.prototype,{measure:function(t,e){},interfaces_:function(){return[]},getClass:function(){return ze}}),e(Ye.prototype,{measure:function(t,e){return t.intersection(e).getArea()/t.union(e).getArea()},interfaces_:function(){return[ze]},getClass:function(){return Ye}}),e(ke.prototype,{measure:function(t,e){var n=Ee.distance(t,e,ke.DENSIFY_FRACTION),i=new M(t.getEnvelopeInternal());i.expandToInclude(e.getEnvelopeInternal());var r=1-n/ke.diagonalSize(i);return r},interfaces_:function(){return[ze]},getClass:function(){return ke}}),ke.diagonalSize=function(t){if(t.isNull())return 0;var e=t.getWidth(),n=t.getHeight();return Math.sqrt(e*e+n*n)},ke.DENSIFY_FRACTION=.25,e(Ue.prototype,{interfaces_:function(){return[]},getClass:function(){return Ue}}),Ue.combine=function(t,e){return Math.min(t,e)},e(Xe.prototype,{setAreaBasePoint:function(t){this._areaBasePt=t},addPoint:function(t){this._ptCount+=1,this._ptCentSum.x+=t.x,this._ptCentSum.y+=t.y},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this._lineCentSum.x+=i*r;var s=(t[n].y+t[n+1].y)/2;this._lineCentSum.y+=i*s}}this._totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=z.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this._areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new E;if(Math.abs(this._areasum2)>0)t.x=this._cg3.x/3/this._areasum2,t.y=this._cg3.y/3/this._areasum2;else if(this._totalLength>0)t.x=this._lineCentSum.x/this._totalLength,t.y=this._lineCentSum.y/this._totalLength;else{if(!(this._ptCount>0))return null;t.x=this._ptCentSum.x/this._ptCount,t.y=this._ptCentSum.y/this._ptCount}return t},addShell:function(t){t.length>0&&this.setAreaBasePoint(t[0]);for(var e=!z.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this._areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){var r=i?1:-1;Xe.centroid3(t,e,n,this._triangleCent3);var s=Xe.area2(t,e,n);this._cg3.x+=r*s*this._triangleCent3.x,this._cg3.y+=r*s*this._triangleCent3.y,this._areasum2+=r*s},add:function(){if(arguments[0]instanceof Vt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof K){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Gt)this.addPoint(n.getCoordinate());else if(n instanceof At)this.addLineSegments(n.getCoordinates());else if(n instanceof Vt){var i=n;this.add(i)}else if(n instanceof Lt){var r=n;for(e=0;e<r.getNumGeometries();e++)this.add(r.getGeometryN(e))}}},interfaces_:function(){return[]},getClass:function(){return Xe}}),Xe.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},Xe.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},Xe.getCentroid=function(t){return new Xe(t).getCentroid()},e(He.prototype,{interfaces_:function(){return[]},getClass:function(){return He}}),He.orientationIndex=function(t,e,n){return V.orientationIndex(t,e,n)},He.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(N(arguments[0],H)){var o=arguments[0],a=o.size();if(a<3)return 0;var u=new E,l=new E,h=new E;o.getCoordinate(0,l),o.getCoordinate(1,h);n=l.x;h.x-=n;for(e=0,i=1;i<a-1;i++)u.y=l.y,l.x=h.x,l.y=h.y,o.getCoordinate(i+1,h),h.x-=n,e+=l.x*(u.y-h.y);return e/2}},He.distanceLineLine=function(t,e,n,i){if(t.equals(e))return He.distancePointLine(t,n,i);if(n.equals(i))return He.distancePointLine(i,t,e);var r=!1;if(M.intersects(t,e,n,i)){var s=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===s)r=!0;else{var o=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/s,u=o/s;(u<0||u>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?U.min(He.distancePointLine(t,n,i),He.distancePointLine(e,n,i),He.distancePointLine(n,t,e),He.distancePointLine(i,t,e)):0},He.isPointInRing=function(t,e){return He.locatePointInRing(t,e)!==de.EXTERIOR},He.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new E;t.getCoordinate(0,i);for(var r=i.x,s=i.y,o=1;o<e;o++){t.getCoordinate(o,i);var a=i.x,u=i.y,l=a-r,h=u-s;n+=Math.sqrt(l*l+h*h),r=a,s=u}return n},He.isCCW=function(t){var e=t.length-1;if(e<3)throw new i("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,s=1;s<=e;s++){var o=t[s];o.y>n.y&&(n=o,r=s)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var u=r;do{u=(u+1)%e}while(t[u].equals2D(n)&&u!==r);var l=t[a],h=t[u];if(l.equals2D(n)||h.equals2D(n)||l.equals2D(h))return!1;var c=He.computeOrientation(l,n,h);return 0===c?l.x>h.x:c>0},He.locatePointInRing=function(t,e){return De.locatePointInRing(t,e)},He.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},He.computeOrientation=function(t,e,n){return He.orientationIndex(t,e,n)},He.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new i("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var s=He.distancePointLine(t,e[r],e[r+1]);s<n&&(n=s)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2];if(a.x===u.x&&a.y===u.y)return o.distance(a);var l=(u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y),h=((o.x-a.x)*(u.x-a.x)+(o.y-a.y)*(u.y-a.y))/l;if(h<=0)return o.distance(a);if(h>=1)return o.distance(u);var c=((a.y-o.y)*(u.x-a.x)-(a.x-o.x)*(u.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},He.isOnLine=function(t,e){for(var n=new fe,i=1;i<e.length;i++){var r=e[i-1],s=e[i];if(n.computeIntersection(t,r,s),n.hasIntersection())return!0}return!1},He.CLOCKWISE=-1,He.RIGHT=He.CLOCKWISE,He.COUNTERCLOCKWISE=1,He.LEFT=He.COUNTERCLOCKWISE,He.COLLINEAR=0,He.STRAIGHT=He.COLLINEAR,We.prototype=new Error,We.prototype.name="EmptyStackException",je.prototype=new w,je.prototype.add=function(t){return this.array_.push(t),!0},je.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},je.prototype.push=function(t){return this.array_.push(t),t},je.prototype.pop=function(t){if(0===this.array_.length)throw new We;return this.array_.pop()},je.prototype.peek=function(){if(0===this.array_.length)throw new We;return this.array_[this.array_.length-1]},je.prototype.empty=function(){return 0===this.array_.length},je.prototype.isEmpty=function(){return this.empty()},je.prototype.search=function(t){return this.array_.indexOf(t)},je.prototype.size=function(){return this.array_.length},je.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e(Ke.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[Z]},getClass:function(){return Ke}}),Ke.filterCoordinates=function(t){for(var e=new Ke,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e(Ze.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return It.sort(t,1,t.length,new Qe(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new b;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(3===(t=this.cleanRing(t)).length)return this._geomFactory.createLineString([t[0],t[1]]);var e=this._geomFactory.createLinearRing(t);return this._geomFactory.createPolygon(e)},cleanRing:function(t){x.equals(t[0],t[t.length-1]);for(var e=new P,n=null,i=0;i<=t.length-2;i++){var r=t[i],s=t[i+1];r.equals(s)||(null!==n&&this.isBetween(n,r,s)||(e.add(r),n=r))}e.add(t[t.length-1]);var o=new Array(e.size()).fill(null);return e.toArray(o)},isBetween:function(t,e,n){if(0!==z.index(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new yt,i=0;i<e.length;i++)n.add(e[i]);for(i=0;i<t.length;i++)qe.isInRing(t[i],e)||n.add(t[i]);var r=nt.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this._inputPts.length)return this._geomFactory.createGeometryCollection();if(1===this._inputPts.length)return this._geomFactory.createPoint(this._inputPts[0]);if(2===this._inputPts.length)return this._geomFactory.createLineString(this._inputPts);var t=this._inputPts;this._inputPts.length>50&&(t=this.reduce(this._inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new je;n.push(t[0]),n.push(t[1]),n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&z.index(n.peek(),e,t[i])>0;)e=n.pop();n.push(e),n.push(t[i])}return n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return Ze}}),Ze.extractCoordinates=function(t){var e=new Ke;return t.apply(e),e.getCoordinates()},e(Qe.prototype,{compare:function(t,e){var n=t,i=e;return Qe.polarCompare(this._origin,n,i)},interfaces_:function(){return[_]},getClass:function(){return Qe}}),Qe.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=n.x-t.x,o=n.y-t.y,a=z.index(t,e,n);if(a===z.COUNTERCLOCKWISE)return 1;if(a===z.CLOCKWISE)return-1;var u=i*i+r*r,l=s*s+o*o;return u<l?-1:u>l?1:0},Ze.RadialComparator=Qe,e(Je.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=null,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=i.intersection(t),s=this.widestGeometry(r);n=s.getEnvelopeInternal().getWidth(),e=Je.centre(s.getEnvelopeInternal())}(null===this._interiorPoint||n>this._maxWidth)&&(this._interiorPoint=e,this._maxWidth=n)},getInteriorPoint:function(){return this._interiorPoint},widestGeometry:function(){if(arguments[0]instanceof Lt){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++)t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));return e}if(arguments[0]instanceof K){var i=arguments[0];return i instanceof Lt?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=$e.getBisectorY(t);return this._factory.createLineString([new E(e.getMinX(),n),new E(e.getMaxX(),n)])},add:function(t){if(t instanceof Vt)this.addPolygon(t);else if(t instanceof Lt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return Je}}),Je.centre=function(t){return new E(Je.avg(t.getMinX(),t.getMaxX()),Je.avg(t.getMinY(),t.getMaxY()))},Je.avg=function(t,e){return(t+e)/2},e($e.prototype,{updateInterval:function(t){t<=this._centreY?t>this._loY&&(this._loY=t):t>this._centreY&&t<this._hiY&&(this._hiY=t)},getBisectorY:function(){this.process(this._poly.getExteriorRing());for(var t=0;t<this._poly.getNumInteriorRing();t++)this.process(this._poly.getInteriorRingN(t));return Je.avg(this._hiY,this._loY)},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return $e}}),$e.getBisectorY=function(t){return new $e(t).getBisectorY()},Je.SafeBisectorFinder=$e,e(tn.prototype,{addEndpoints:function(){if(arguments[0]instanceof K){var t=arguments[0];if(t instanceof At)this.addEndpoints(t.getCoordinates());else if(t instanceof Lt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}},getInteriorPoint:function(){return this._interiorPoint},addInterior:function(){if(arguments[0]instanceof K){var t=arguments[0];if(t instanceof At)this.addInterior(t.getCoordinates());else if(t instanceof Lt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];for(n=1;n<i.length-1;n++)this.add(i[n])}},add:function(t){var e=t.distance(this._centroid);e<this._minDistance&&(this._interiorPoint=new E(t),this._minDistance=e)},interfaces_:function(){return[]},getClass:function(){return tn}}),e(en.prototype,{getInteriorPoint:function(){return this._interiorPoint},add:function(){if(arguments[0]instanceof K){var t=arguments[0];if(t instanceof Gt)this.add(t.getCoordinate());else if(t instanceof Lt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof E){var i=arguments[0],r=i.distance(this._centroid);r<this._minDistance&&(this._interiorPoint=new E(i),this._minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return en}}),e(nn.prototype,{select:function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return nn}}),e(rn.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(null!==this._subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this._items);for(var e=0;e<2;e++)null!==this._subnode[e]&&this._subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;e<2;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+this._items.size()},addAllItemsFromOverlapping:function(t,e){if(null!==t&&!this.isSearchMatch(t))return null;e.addAll(this._items),null!==this._subnode[0]&&this._subnode[0].addAllItemsFromOverlapping(t,e),null!==this._subnode[1]&&this._subnode[1].addAllItemsFromOverlapping(t,e)},hasItems:function(){return!this._items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<2;i++)if(null!==this._subnode[i]&&(n=this._subnode[i].remove(t,e))){this._subnode[i].isPrunable()&&(this._subnode[i]=null);break}return n||(n=this._items.remove(e))},getItems:function(){return this._items},depth:function(){for(var t=0,e=0;e<2;e++)if(null!==this._subnode[e]){var n=this._subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)null!==this._subnode[e]&&(t+=this._subnode[e].nodeSize());return t+1},add:function(t){this._items.add(t)},interfaces_:function(){return[]},getClass:function(){return rn}}),rn.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(sn.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof sn){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return sn}}),on.exponent=function(t){return function(t,e){var n,i,r,s,o={32:8,64:11}[t];s||(n=e<0||1/e<0,isFinite(e)||(s={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}}[t],n&&(s.d+=1<<t/4-1),i=Math.pow(2,o)-1,r=0));if(!s){for(i={32:127,64:1023}[t],r=Math.abs(e);r>=2;)i++,r/=2;for(;r<1&&i>0;)i--,r*=2;i<=0&&(r/=2),32===t&&i>254&&(s={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,o)-1,r=0)}return i}(64,t)-1023},on.powerOf2=function(t){return Math.pow(2,t)},e(an.prototype,{getInterval:function(){return this._interval},getLevel:function(){return this._level},computeKey:function(t){for(this._level=an.computeLevel(t),this._interval=new sn,this.computeInterval(this._level,t);!this._interval.contains(t);)this._level+=1,this.computeInterval(this._level,t)},computeInterval:function(t,e){var n=on.powerOf2(t);this._pt=Math.floor(e.getMin()/n)*n,this._interval.init(this._pt,this._pt+n)},getPoint:function(){return this._pt},interfaces_:function(){return[]},getClass:function(){return an}}),an.computeLevel=function(t){var e=t.getWidth();return on.exponent(e)+1},v(un,rn),e(un.prototype,{getInterval:function(){return this._interval},find:function(t){var e=rn.getSubnodeIndex(t,this._centre);return-1===e?this:null!==this._subnode[e]?this._subnode[e].find(t):this},insert:function(t){x.isTrue(null===this._interval||this._interval.contains(t._interval));var e=rn.getSubnodeIndex(t._interval,this._centre);if(t._level===this._level-1)this._subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this._subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this._interval)},getSubnode:function(t){return null===this._subnode[t]&&(this._subnode[t]=this.createSubnode(t)),this._subnode[t]},getNode:function(t){var e=rn.getSubnodeIndex(t,this._centre);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this._interval.getMin(),n=this._centre;break;case 1:e=this._centre,n=this._interval.getMax()}return new un(new sn(e,n),this._level-1)},interfaces_:function(){return[]},getClass:function(){return un}}),un.createNode=function(t){var e=new an(t);return new un(e.getInterval(),e.getLevel())},un.createExpanded=function(t,e){var n=new sn(e);null!==t&&n.expandToInclude(t._interval);var i=un.createNode(n);return null!==t&&i.insert(t),i},e(ln.prototype,{interfaces_:function(){return[]},getClass:function(){return ln}}),ln.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=n/Math.max(Math.abs(t),Math.abs(e));return on.exponent(i)<=ln.MIN_BINARY_EXPONENT},ln.MIN_BINARY_EXPONENT=-50,v(hn,rn),e(hn.prototype,{insert:function(t,e){var n=rn.getSubnodeIndex(t,hn.origin);if(-1===n)return this.add(e),null;var i=this._subnode[n];if(null===i||!i.getInterval().contains(t)){var r=un.createExpanded(i,t);this._subnode[n]=r}this.insertContained(this._subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){x.isTrue(t.getInterval().contains(e));(ln.isZeroWidth(e.getMin(),e.getMax())?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return hn}}),hn.origin=0,e(cn.prototype,{size:function(){return null!==this._root?this._root.size():0},insert:function(t,e){this.collectStats(t);var n=cn.ensureExtent(t,this._minExtent);this._root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new sn(t,t))}if(arguments[0]instanceof sn){var e=arguments[0],n=new P;return this.query(e,n),n}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this._root.addAllItemsFromOverlapping(i,r)}},iterator:function(){var t=new P;return this._root.addAllItems(t),t.iterator()},remove:function(t,e){var n=cn.ensureExtent(t,this._minExtent);return this._root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this._minExtent&&e>0&&(this._minExtent=e)},depth:function(){return null!==this._root?this._root.depth():0},nodeSize:function(){return null!==this._root?this._root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return cn}}),cn.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(i=(n-=e/2)+e/2),new sn(n,i))},e(fn.prototype,{getLineSegment:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},computeSelect:function(t,e,n,i){var r=this._pts[e],s=this._pts[n];if(n-e==1)return i.select(this,e),null;if(!t.intersects(r,s))return null;var o=Math.trunc((e+n)/2);e<o&&this.computeSelect(t,e,o,i),o<n&&this.computeSelect(t,o,n,i)},getCoordinates:function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},computeOverlaps:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],a=arguments[5];if(i-n==1&&o-s==1)return a.overlap(this,n,r,s),null;if(!this.overlaps(n,i,r,s,o))return null;var u=Math.trunc((n+i)/2),l=Math.trunc((s+o)/2);n<u&&(s<l&&this.computeOverlaps(n,u,r,s,l,a),l<o&&this.computeOverlaps(n,u,r,l,o,a)),u<i&&(s<l&&this.computeOverlaps(u,i,r,s,l,a),l<o&&this.computeOverlaps(u,i,r,l,o,a))}},setId:function(t){this._id=t},select:function(t,e){this.computeSelect(t,this._start,this._end,e)},getEnvelope:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new M(t,e)}return this._env},overlaps:function(t,e,n,i,r){return M.intersects(this._pts[t],this._pts[e],n._pts[i],n._pts[r])},getEndIndex:function(){return this._end},getStartIndex:function(){return this._start},getContext:function(){return this._context},getId:function(){return this._id},interfaces_:function(){return[]},getClass:function(){return fn}}),e(gn.prototype,{interfaces_:function(){return[]},getClass:function(){return gn}}),gn.isNorthern=function(t){return t===gn.NE||t===gn.NW},gn.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},gn.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},gn.isInHalfPlane=function(t,e){return e===gn.SE?t===gn.SE||t===gn.SW:t===e||t===e+1},gn.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?gn.NE:gn.SE:e>=0?gn.NW:gn.SW}if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new i("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?gn.NE:gn.SE:r.y>=n.y?gn.NW:gn.SW}},gn.NE=0,gn.NW=1,gn.SW=2,gn.SE=3,e(dn.prototype,{interfaces_:function(){return[]},getClass:function(){return dn}}),dn.getChainStartIndices=function(t){var e=0,n=new P;n.add(new G(e));do{var i=dn.findChainEnd(t,e);n.add(new G(i)),e=i}while(e<t.length-1);return dn.toIntArray(n)},dn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=gn.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r]))if(gn.quadrant(t[r-1],t[r])!==i)break;r++}return r-1},dn.getChains=function(){if(1===arguments.length){var t=arguments[0];return dn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new P,r=dn.getChainStartIndices(e),s=0;s<r.length-1;s++){var o=new fn(e,r[s],r[s+1],n);i.add(o)}return i}},dn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(_n.prototype,{interfaces_:function(){return[]},getClass:function(){return _n}}),_n.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=n.x-e.x,o=n.y-e.y;return _n.signOfDet2x2(i,r,s,o)},_n.signOfDet2x2=function(t,e,n,i){var r=null,s=null,o=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(0<e?0<i?e<=i||(r=-r,s=t,t=n,n=s,s=e,e=i,i=s):e<=-i?(r=-r,n=-n,i=-i):(s=t,t=-n,n=s,s=e,e=-i,i=s):0<i?-e<=i?(r=-r,t=-t,e=-e):(s=-t,t=n,n=s,s=-e,e=i,i=s):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,s=-t,t=-n,n=s,s=-e,e=-i,i=s),0<t){if(!(0<n))return r;if(!(t<=n))return r}else{if(0<n)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(n-=(o=Math.floor(n/t))*t,(i-=o*e)<0)return-r;if(i>e)return r;if(t>n+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(t-=(o=Math.floor(t/n))*n,(e-=o*i)<0)return r;if(e>i)return-r;if(n>t+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},e(pn.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return pn}}),e(mn.prototype,{testLineSegment:function(t,e){var n,i,r,s,o=e.p0,a=e.p1;n=o.x-t.x,i=o.y-t.y,r=a.x-t.x,s=a.y-t.y,(i>0&&s<=0||s>0&&i<=0)&&0<_n.signOfDet2x2(n,i,r,s)/(s-i)&&this._crossings++},buildIndex:function(){this._tree=new cn;for(var t=nt.removeRepeatedPoints(this._ring.getCoordinates()),e=dn.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this._interval.min=r.getMinY(),this._interval.max=r.getMaxY(),this._tree.insert(this._interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this._crossings=0;var e=new M(s.NEGATIVE_INFINITY,s.POSITIVE_INFINITY,t.y,t.y);this._interval.min=t.y,this._interval.max=t.y;for(var n=this._tree.query(this._interval),i=new vn(this,t),r=n.iterator();r.hasNext();){var o=r.next();this.testMonotoneChain(e,i,o)}return this._crossings%2==1},interfaces_:function(){return[pn]},getClass:function(){return mn}}),v(vn,nn),e(vn.prototype,{select:function(){if(1!==arguments.length)return nn.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return vn}}),mn.MCSelecter=vn,e(yn.prototype,{getRadius:function(){return this.compute(),this._radius},getDiameter:function(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}var t=this._extremalPts[0],e=this._extremalPts[1];return this._input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this._extremalPts},computeCirclePoints:function(){if(this._input.isEmpty())return this._extremalPts=new Array(0).fill(null),null;if(1===this._input.getNumPoints()){var t=this._input.getCoordinates();return this._extremalPts=[new E(t[0])],null}var e=this._input.convexHull().getCoordinates();t=e;if(e[0].equals2D(e[e.length-1])&&(t=new Array(e.length-1).fill(null),nt.copyDeep(e,0,t,0,e.length-1)),t.length<=2)return this._extremalPts=nt.copyDeep(t),null;for(var n=yn.lowestPoint(t),i=yn.pointWitMinAngleWithX(t,n),r=0;r<t.length;r++){var s=yn.pointWithMinAngleWithSegment(t,n,i);if(pe.isObtuse(n,s,i))return this._extremalPts=[new E(n),new E(i)],null;if(pe.isObtuse(s,n,i))n=s;else{if(!pe.isObtuse(s,i,n))return this._extremalPts=[new E(n),new E(i),new E(s)],null;i=s}}x.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){if(null!==this._extremalPts)return null;this.computeCirclePoints(),this.computeCentre(),null!==this._centre&&(this._radius=this._centre.distance(this._extremalPts[0]))},getFarthestPoints:function(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}var t=this._extremalPts[0],e=this._extremalPts[this._extremalPts.length-1];return this._input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this._centre)return this._input.getFactory().createPolygon();var t=this._input.getFactory().createPoint(this._centre);return 0===this._radius?t:t.buffer(this._radius)},getCentre:function(){return this.compute(),this._centre},computeCentre:function(){switch(this._extremalPts.length){case 0:this._centre=null;break;case 1:this._centre=this._extremalPts[0];break;case 2:this._centre=new E((this._extremalPts[0].x+this._extremalPts[1].x)/2,(this._extremalPts[0].y+this._extremalPts[1].y)/2);break;case 3:this._centre=me.circumcentre(this._extremalPts[0],this._extremalPts[1],this._extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return yn}}),yn.pointWitMinAngleWithX=function(t,e){for(var n=s.MAX_VALUE,i=null,r=0;r<t.length;r++){var o=t[r];if(o!==e){var a=o.x-e.x,u=o.y-e.y;u<0&&(u=-u);var l=u/Math.sqrt(a*a+u*u);l<n&&(n=l,i=o)}}return i},yn.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},yn.pointWithMinAngleWithSegment=function(t,e,n){for(var i=s.MAX_VALUE,r=null,o=0;o<t.length;o++){var a=t[o];if(a!==e&&a!==n){var u=pe.angleBetween(e,a,n);u<i&&(i=u,r=a)}}return r},e(xn.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this._minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this._inputGeom.getFactory().createLineString([this._minBaseSeg.p0,this._minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this._minWidthPt)return this._inputGeom.getFactory().createLineString();var t=this._minBaseSeg.project(this._minWidthPt);return this._inputGeom.getFactory().createLineString([t,this._minWidthPt])},computeWidthConvex:function(t){this._convexHullPts=t instanceof Vt?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=null,this._minBaseSeg=null):1===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[0]):2===this._convexHullPts.length||3===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[1]):this.computeConvexRingMinDiameter(this._convexHullPts)},computeConvexRingMinDiameter:function(t){this._minWidth=s.MAX_VALUE;for(var e=1,n=new ge,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this._minWidthPt)return null;if(this._isConvex)this.computeWidthConvex(this._inputGeom);else{var t=new Ze(this._inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this._minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,s=n,o=s;r>=i;)i=r,s=o,o=xn.nextIndex(t,s),r=e.distancePerpendicular(t[o]);return i<this._minWidth&&(this._minPtIndex=s,this._minWidth=i,this._minWidthPt=t[this._minPtIndex],this._minBaseSeg=new ge(e)),s},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this._minWidth)return this._minBaseSeg.p0.equals2D(this._minBaseSeg.p1)?this._inputGeom.getFactory().createPoint(this._minBaseSeg.p0):this._minBaseSeg.toGeometry(this._inputGeom.getFactory());for(var t=this._minBaseSeg.p1.x-this._minBaseSeg.p0.x,e=this._minBaseSeg.p1.y-this._minBaseSeg.p0.y,n=s.MAX_VALUE,i=-s.MAX_VALUE,r=s.MAX_VALUE,o=-s.MAX_VALUE,a=0;a<this._convexHullPts.length;a++){var u=xn.computeC(t,e,this._convexHullPts[a]);u>i&&(i=u),u<n&&(n=u);var l=xn.computeC(-e,t,this._convexHullPts[a]);l>o&&(o=l),l<r&&(r=l)}var h=xn.computeSegmentForLine(-t,-e,o),c=xn.computeSegmentForLine(-t,-e,r),f=xn.computeSegmentForLine(-e,t,i),g=xn.computeSegmentForLine(-e,t,n),d=f.lineIntersection(h),_=g.lineIntersection(h),p=g.lineIntersection(c),m=f.lineIntersection(c),v=this._inputGeom.getFactory().createLinearRing([d,_,p,m,d]);return this._inputGeom.getFactory().createPolygon(v)},interfaces_:function(){return[]},getClass:function(){return xn}}),xn.nextIndex=function(t,e){return++e>=t.length&&(e=0),e},xn.computeC=function(t,e,n){return t*n.y-e*n.x},xn.getMinimumDiameter=function(t){return new xn(t).getDiameter()},xn.getMinimumRectangle=function(t){return new xn(t).getMinimumRectangle()},xn.computeSegmentForLine=function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new E(0,n/e),r=new E(1,n/e-t/e)):(i=new E(n/t,0),r=new E(n/t-e/t,1)),new ge(i,r)};var En=Object.freeze({Angle:pe,Centroid:Xe,CGAlgorithms:He,ConvexHull:Ze,Distance:X,InteriorPointArea:Je,InteriorPointLine:tn,InteriorPointPoint:en,RobustLineIntersector:fe,MCPointInRing:mn,MinimumBoundingCircle:yn,MinimumDiameter:xn});function In(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}function Nn(){this._inputGeom=null,this._distanceTolerance=null;var t=arguments[0];this._inputGeom=t}function Cn(){In.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}e(In.prototype,{transformPoint:function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Yt&&!i.isEmpty()||(n=!1);for(var r=new P,s=0;s<t.getNumInteriorRing();s++){var o=this.transformLinearRing(t.getInteriorRingN(s),t);null===o||o.isEmpty()||(o instanceof Yt||(n=!1),r.add(o))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new P;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},createCoordinateSequence:function(t){return this._factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this._inputGeom},transformMultiLineString:function(t,e){for(var n=new P,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new P,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new P,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new P,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(se.toGeometryArray(n)):this._factory.buildGeometry(n)},transform:function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Gt)return this.transformPoint(t,null);if(t instanceof zt)return this.transformMultiPoint(t,null);if(t instanceof Yt)return this.transformLinearRing(t,null);if(t instanceof At)return this.transformLineString(t,null);if(t instanceof wt)return this.transformMultiLineString(t,null);if(t instanceof Vt)return this.transformPolygon(t,null);if(t instanceof kt)return this.transformMultiPolygon(t,null);if(t instanceof Lt)return this.transformGeometryCollection(t,null);throw new i("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return In}}),e(Nn.prototype,{getResultGeometry:function(){return new Cn(this._distanceTolerance).transform(this._inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new i("Tolerance must be positive");this._distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Nn}}),Nn.densifyPoints=function(t,e,n){for(var i=new ge,r=new b,s=0;s<t.length-1;s++){i.p0=t[s],i.p1=t[s+1],r.add(i.p0,!1);var o=i.getLength(),a=Math.trunc(o/e)+1;if(a>1)for(var u=o/a,l=1;l<a;l++){var h=l*u/o,c=i.pointAlong(h);n.makePrecise(c),r.add(c,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},Nn.densify=function(t,e){var n=new Nn(t);return n.setDistanceTolerance(e),n.getResultGeometry()},v(Cn,In),e(Cn.prototype,{transformMultiPolygon:function(t,e){var n=In.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=In.prototype.transformPolygon.call(this,t,e);return e instanceof kt?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=Nn.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof At&&1===i.length&&(i=new Array(0).fill(null)),this._factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Cn}}),Nn.DensifyTransformer=Cn;var Sn=Object.freeze({Densifier:Nn});function Ln(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function wn(){this._isMarked=!1;var t=arguments[0];Ln.call(this,t)}function Rn(){this._vertexMap=new ne}function Tn(){this._isStart=!1;var t=arguments[0];wn.call(this,t)}function Pn(){Rn.apply(this)}function On(){this._result=null,this._factory=null,this._graph=null,this._lines=new P,this._nodeEdgeStack=new je,this._ringStartEdge=null,this._graph=new Pn}e(Ln.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext();if(i.compareTo(t)!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);x.shouldNeverReachHere()},insertAfter:function(t){x.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var t=0,e=this;do{t++,e=e.oNext()}while(e!==this);return t},equals:function(){if(2===arguments.length&&arguments[1]instanceof E&&arguments[0]instanceof E){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var s=gn.quadrant(e,n),o=gn.quadrant(i,r);return s>o?1:s<o?-1:z.index(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t},compareTo:function(t){var e=t;return this.compareAngularDirection(e)},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Ln}}),Ln.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},Ln.create=function(t,e){var n=new Ln(t),i=new Ln(e);return n.init(i),n},v(wn,Ln),e(wn.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return wn}}),wn.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},wn.isMarked=function(t){return t.isMarked()},wn.setMark=function(t,e){t.setMark(e)},wn.markBoth=function(t){t.mark(),t.sym().mark()},wn.mark=function(t){t.mark()},e(Rn.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this._vertexMap.put(t,i);var r=this._vertexMap.get(e);return null!==r?r.insert(i.sym()):this._vertexMap.put(e,i.sym()),i},create:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return Ln.init(n,i),n},createEdge:function(t){return new Ln(t)},addEdge:function(t,e){if(!Rn.isValidEdge(t,e))return null;var n=this._vertexMap.get(t),i=null;return null!==n&&(i=n.find(e)),null!==i?i:this.insert(t,e,n)},getVertexEdges:function(){return this._vertexMap.values()},findEdge:function(t,e){var n=this._vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return Rn}}),Rn.isValidEdge=function(t,e){return 0!==e.compareTo(t)},v(Tn,wn),e(Tn.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return Tn}}),v(Pn,Rn),e(Pn.prototype,{createEdge:function(t){return new Tn(t)},interfaces_:function(){return[]},getClass:function(){return Pn}}),e(On.prototype,{addLine:function(t){this._lines.add(this._factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this._ringStartEdge?(this._ringStartEdge=t,null):void(t.orig().compareTo(this._ringStartEdge.orig())<0&&(this._ringStartEdge=t)):null},getResult:function(){return null===this._result&&this.computeResult(),this._result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new b,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new b,n=t;for(this._ringStartEdge=null,wn.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this._ringStartEdge),null;e.add(i.orig().copy(),!1),n=i,wn.markBoth(n)}e.add(n.dest().clone(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do{wn.isMarked(e)||this._nodeEdgeStack.add(e),e=e.oNext()}while(e!==t)},computeResult:function(){for(var t=this._graph.getVertexEdges().iterator();t.hasNext();){var e=t.next();wn.isMarked(e)||this.process(e)}this._result=this._factory.buildGeometry(this._lines)},buildLines:function(){for(;!this._nodeEdgeStack.empty();){var t=this._nodeEdgeStack.pop();wn.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof K)arguments[0].apply({interfaces_:function(){return[j]},filter:function(t){t instanceof At&&this.add(t)}});else if(N(arguments[0],S))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof At){var n=arguments[0];null===this._factory&&(this._factory=n.getFactory());var i=n.getCoordinateSequence(),r=!1;for(t=1;t<i.size();t++){var s=this._graph.addEdge(i.getCoordinate(t-1),i.getCoordinate(t));null!==s&&(r||(s.setStart(),r=!0))}}},interfaces_:function(){return[]},getClass:function(){return On}}),On.dissolve=function(t){var e=new On;return e.add(t),e.getResult()};var bn=Object.freeze({LineDissolver:On});function Mn(){if(this._boundaryRule=Q.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new i("Rule must be non-null");this._boundaryRule=t}}function Dn(){}function An(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function Fn(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this._eventType=Fn.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._eventType=Fn.INSERT,this._label=n,this._xValue=i,this._obj=r}}function Gn(){}function qn(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n}function Bn(){Gn.apply(this),this.events=new P,this.nOverlaps=null}function Vn(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Dn.ON]=e}else if(arguments[0]instanceof Vn){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.init(3),this.location[Dn.ON]=r,this.location[Dn.LEFT]=s,this.location[Dn.RIGHT]=o}}function zn(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Vn(t),this.elt[1]=new Vn(t)}else if(arguments[0]instanceof zn){var e=arguments[0];this.elt[0]=new Vn(e.elt[0]),this.elt[1]=new Vn(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Vn(de.NONE),this.elt[1]=new Vn(de.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.elt[0]=new Vn(r,s,o),this.elt[1]=new Vn(r,s,o)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new Vn(de.NONE,de.NONE,de.NONE),this.elt[1]=new Vn(de.NONE,de.NONE,de.NONE),this.elt[a].setLocations(u,l,h)}}function Yn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new E(t),this.segmentIndex=e,this.dist=n}function kn(){this._nodeMap=new pt,this.edge=null;var t=arguments[0];this.edge=t}function Un(){}function Xn(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Un;this.startIndex=e.getChainStartIndices(this.pts)}function Hn(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=Hn.NULL_VALUE}function Wn(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}}function jn(){if(Wn.apply(this),this.pts=null,this._env=null,this.eiList=new kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Hn,this._depthDelta=0,1===arguments.length){var t=arguments[0];jn.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}function Kn(){Wn.apply(this),this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new zn(0,de.NONE)}function Zn(){this.nodeMap=new pt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function Qn(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];Qn.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];Qn.call(this,r),this.init(s,o),this._label=a}}function Jn(){if(this.pt=null,1===arguments.length){var t=arguments[0];m.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];m.call(this,Jn.msgWithCoord(e,n)),this.name="TopologyException",this.pt=new E(n)}}function $n(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Qn.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function ti(){}function ei(){if(this._edges=new P,this._nodes=null,this._edgeEndList=new P,0===arguments.length)this._nodes=new Zn(new ti);else if(1===arguments.length){var t=arguments[0];this._nodes=new Zn(t)}}function ni(){if(ei.apply(this),this._parentGeom=null,this._lineEdgeMap=new ne,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Mn,2===arguments.length){var t=arguments[0],e=arguments[1];ni.call(this,t,e,Q.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._argIndex=n,this._parentGeom=i,this._boundaryNodeRule=r,null!==i&&this.add(i)}}e(Mn.prototype,{locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?qe.locateInRing(t,e.getCoordinates()):de.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==de.EXTERIOR},updateLocationInfo:function(t){t===de.INTERIOR&&(this._isIn=!0),t===de.BOUNDARY&&this._numBoundaries++},computeLocation:function(t,e){if(e instanceof Gt&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof At)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof Vt)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof wt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateOnLineString(t,r))}else if(e instanceof kt){var s=e;for(i=0;i<s.getNumGeometries();i++){var o=s.getGeometryN(i);this.updateLocationInfo(this.locateInPolygon(t,o))}}else if(e instanceof Lt)for(var a=new Be(e);a.hasNext();){var u=a.next();u!==e&&this.computeLocation(t,u)}},locateOnPoint:function(t,e){return e.getCoordinate().equals2D(t)?de.INTERIOR:de.EXTERIOR},locateOnLineString:function(t,e){if(!e.getEnvelopeInternal().intersects(t))return de.EXTERIOR;var n=e.getCoordinateSequence();return e.isClosed()||!t.equals(n.getCoordinate(0))&&!t.equals(n.getCoordinate(n.size()-1))?qe.isOnLine(t,n)?de.INTERIOR:de.EXTERIOR:de.BOUNDARY},locateInPolygon:function(t,e){if(e.isEmpty())return de.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===de.EXTERIOR)return de.EXTERIOR;if(i===de.BOUNDARY)return de.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r),o=this.locateInPolygonRing(t,s);if(o===de.INTERIOR)return de.EXTERIOR;if(o===de.BOUNDARY)return de.BOUNDARY}return de.INTERIOR},locate:function(t,e){return e.isEmpty()?de.EXTERIOR:e instanceof At?this.locateOnLineString(t,e):e instanceof Vt?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?de.BOUNDARY:this._numBoundaries>0||this._isIn?de.INTERIOR:de.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Mn}}),e(Dn.prototype,{interfaces_:function(){return[]},getClass:function(){return Dn}}),Dn.opposite=function(t){return t===Dn.LEFT?Dn.RIGHT:t===Dn.RIGHT?Dn.LEFT:t},Dn.ON=0,Dn.LEFT=1,Dn.RIGHT=2,e(An.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return An}}),e(Fn.prototype,{isDelete:function(){return this._eventType===Fn.DELETE},setDeleteEventIndex:function(t){this._deleteEventIndex=t},getObject:function(){return this._obj},compareTo:function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},getInsertEvent:function(){return this._insertEvent},isInsert:function(){return this._eventType===Fn.INSERT},isSameLabel:function(t){return null!==this._label&&this._label===t._label},getDeleteEventIndex:function(){return this._deleteEventIndex},interfaces_:function(){return[g]},getClass:function(){return Fn}}),Fn.INSERT=1,Fn.DELETE=2,e(Gn.prototype,{interfaces_:function(){return[]},getClass:function(){return Gn}}),e(qn.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(qn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this._properIntersectionPoint},setIsDoneIfProperInt:function(t){this._isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this._hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},hasProperIntersection:function(){return this._hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return qn}}),qn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},v(Bn,Gn),e(Bn.prototype,{prepareEvents:function(){Te.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof qn&&N(arguments[0],w)&&N(arguments[1],w)){var i=arguments[0],r=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&N(arguments[0],w)&&arguments[1]instanceof qn){var o=arguments[0],a=arguments[1];arguments[2]?this.addEdges(o,null):this.addEdges(o),this.computeIntersections(a)}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var s=new An(n,r),o=new Fn(e,n.getMinX(r),s);this.events.add(o),this.events.add(new Fn(n.getMaxX(r),o))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),s=t;s<e;s++){var o=this.events.get(s);if(o.isInsert()){var a=o.getObject();n.isSameLabel(o)||(r.computeIntersections(a,i),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];for(t=n.iterator();t.hasNext();){e=t.next();this.addEdge(e,i)}}},interfaces_:function(){return[]},getClass:function(){return Bn}}),e(Vn.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==de.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===de.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Dn.ON]=this.location[Dn.ON],e[Dn.LEFT]=de.NONE,e[Dn.RIGHT]=de.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===de.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[Dn.LEFT];this.location[Dn.LEFT]=this.location[Dn.RIGHT],this.location[Dn.RIGHT]=t},toString:function(){var t=new F;return this.location.length>1&&t.append(de.toLocationSymbol(this.location[Dn.LEFT])),t.append(de.toLocationSymbol(this.location[Dn.ON])),this.location.length>1&&t.append(de.toLocationSymbol(this.location[Dn.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[Dn.ON]=t,this.location[Dn.LEFT]=e,this.location[Dn.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:de.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===de.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Dn.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(de.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Vn}}),e(zn.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Vn(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Dn.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new F;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Dn.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new Vn(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return zn}}),zn.toLineLabel=function(t){for(var e=new zn(de.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},e(Yn.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[g]},getClass:function(){return Yn}}),e(kn.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this._nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new E(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this.edge.pts[a];return r&&(s[o]=e.coord),new jn(s,new zn(this.edge._label))},add:function(t,e,n){var i=new Yn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return kn}}),e(Un.prototype,{getChainStartIndices:function(t){var e=0,n=new P;n.add(new G(e));do{var i=this.findChainEnd(t,e);n.add(new G(i)),e=i}while(e<t.length-1);return Un.toIntArray(n)},findChainEnd:function(t,e){for(var n=gn.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){if(gn.quadrant(t[i-1],t[i])!==n)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return Un}}),Un.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(Xn.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5];if(s-r==1&&u-a==1)return l.addIntersections(this.e,r,o.e,a),null;if(!this.overlaps(r,s,o,a,u))return null;var h=Math.trunc((r+s)/2),c=Math.trunc((a+u)/2);r<h&&(a<c&&this.computeIntersectsForChain(r,h,o,a,c,l),c<u&&this.computeIntersectsForChain(r,h,o,c,u,l)),h<s&&(a<c&&this.computeIntersectsForChain(h,s,o,a,c,l),c<u&&this.computeIntersectsForChain(h,s,o,c,u,l))}},overlaps:function(t,e,n,i,r){return M.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return Xn}}),e(Hn.prototype,{getDepth:function(t,e){return this._depth[t][e]},setDepth:function(t,e,n){this._depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Hn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Hn.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===Hn.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},getDelta:function(t){return this._depth[t][Dn.RIGHT]-this._depth[t][Dn.LEFT]},getLocation:function(t,e){return this._depth[t][e]<=0?de.EXTERIOR:de.INTERIOR},toString:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==de.EXTERIOR&&i!==de.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Hn.depthAtLocation(i):this._depth[e][n]+=Hn.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],s=arguments[1];arguments[2]===de.INTERIOR&&this._depth[r][s]++}},interfaces_:function(){return[]},getClass:function(){return Hn}}),Hn.depthAtLocation=function(t){return t===de.EXTERIOR?0:t===de.INTERIOR?1:Hn.NULL_VALUE},Hn.NULL_VALUE=-1,e(Wn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this._label=t},getLabel:function(){return this._label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){x.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Wn}}),v(jn,Wn),e(jn.prototype,{getDepth:function(){return this._depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new jn(t,zn.toLineLabel(this._label))},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this._name=t},equals:function(t){if(!(t instanceof jn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(e.pts[s])||(n=!1),this.pts[s].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},computeIM:function(t){jn.updateIM(this._label,t)},isCollapsed:function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this._depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this._mce&&(this._mce=new Xn(this)),this._mce},getEnvelope:function(){if(null===this._env){this._env=new M;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},addIntersection:function(t,e,n,i){var r=new E(t.getIntersection(i)),s=e,o=t.getEdgeDistance(n,i),a=s+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(s=a,o=0)}this.eiList.add(r,s,o)},toString:function(){var t=new Mt;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this._depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return jn}}),jn.updateIM=function(){if(!(2===arguments.length&&arguments[1]instanceof _e&&arguments[0]instanceof zn))return Wn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Dn.ON),t.getLocation(1,Dn.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Dn.LEFT),t.getLocation(1,Dn.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Dn.RIGHT),t.getLocation(1,Dn.RIGHT),2))},v(Kn,Wn),e(Kn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this._label.getGeometryCount()},getCoordinate:function(){return this._coord},print:function(t){t.println("node "+this._coord+" lbl: "+this._label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=de.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==de.BOUNDARY&&(n=i)}return n},setLabel:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return Wn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new zn(t,e):this._label.setLocation(t,e)},getEdges:function(){return this._edges},mergeLabel:function(){if(arguments[0]instanceof Kn){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof zn)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n);this._label.getLocation(n)===de.NONE&&this._label.setLocation(n,i)}},add:function(t){this._edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this._label)return null;var e=de.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case de.BOUNDARY:n=de.INTERIOR;break;case de.INTERIOR:default:n=de.BOUNDARY}this._label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return Kn}}),e(Zn.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof E){var t=arguments[0];return null===(e=this.nodeMap.get(t))&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Kn){var e,n=arguments[0];return null===(e=this.nodeMap.get(n.getCoordinate()))?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new P,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===de.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate();this.addNode(e).add(t)},interfaces_:function(){return[]},getClass:function(){return Zn}}),e(Qn.prototype,{compareDirection:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:z.index(t._p0,t._p1,this._p1)},getDy:function(){return this._dy},getCoordinate:function(){return this._p0},setNode:function(t){this._node=t},print:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this._p1},getDx:function(){return this._dx},getLabel:function(){return this._label},getEdge:function(){return this._edge},getQuadrant:function(){return this._quadrant},getNode:function(){return this._node},toString:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},computeLabel:function(t){},init:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=gn.quadrant(this._dx,this._dy),x.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[g]},getClass:function(){return Qn}}),v(Jn,m),e(Jn.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Jn}}),Jn.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},v($n,Qn),e($n.prototype,{getNextMin:function(){return this._nextMin},getDepth:function(t){return this._depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this._label=new zn(this._edge.getLabel()),this._isForward||this._label.flip()},getNext:function(){return this._next},setDepth:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Jn("assigned depths do not match",this.getCoordinate());this._depth[t]=e},isInteriorAreaEdge:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Dn.LEFT)===de.INTERIOR&&this._label.getLocation(e,Dn.RIGHT)===de.INTERIOR||(t=!1);return t},setNextMin:function(t){this._nextMin=t},print:function(t){Qn.prototype.print.call(this,t),t.print(" "+this._depth[Dn.LEFT]+"/"+this._depth[Dn.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this._minEdgeRing=t},isLineEdge:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,de.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,de.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this._edgeRing=t},getMinEdgeRing:function(){return this._minEdgeRing},getDepthDelta:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this._sym},isForward:function(){return this._isForward},getEdge:function(){return this._edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},setSym:function(t){this._sym=t},setVisitedEdge:function(t){this.setVisited(t),this._sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Dn.LEFT&&(i=-1);var r=Dn.opposite(t),s=e+n*i;this.setDepth(t,e),this.setDepth(r,s)},getEdgeRing:function(){return this._edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this._next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.depthFactor=function(t,e){return t===de.EXTERIOR&&e===de.INTERIOR?1:t===de.INTERIOR&&e===de.EXTERIOR?-1:0},e(ti.prototype,{createNode:function(t){return new Kn(t,null)},interfaces_:function(){return[]},getClass:function(){return ti}}),e(ei.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this._nodes.find(t)},addNode:function(){if(arguments[0]instanceof Kn){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof E){var e=arguments[0];return this._nodes.addNode(e)}},getNodeIterator:function(){return this._nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){Y.out.println(t)},isBoundaryNode:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===de.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&(z.index(t,e,i)===z.COLLINEAR&&gn.quadrant(t,e)===gn.quadrant(n,i))},getEdgeEnds:function(){return this._edgeEndList},debugPrint:function(t){Y.out.print(t)},getEdgeIterator:function(){return this._edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this._edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new $n(n,!0),r=new $n(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},add:function(t){this._nodes.add(t),this._edgeEndList.add(t)},getNodes:function(){return this._nodes.values()},findEdge:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return ei}}),ei.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}},v(ni,ei),e(ni.prototype,{insertBoundaryPoint:function(t,e){var n=this._nodes.addNode(e).getLabel(),i=1;de.NONE;n.getLocation(t,Dn.ON)===de.BOUNDARY&&i++;var r=ni.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,r)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=new qn(n,!0,!1);s.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof Yt||this._parentGeom instanceof Vt||this._parentGeom instanceof kt,u=i||!a;return o.computeIntersections(this._edges,s,u),this.addSelfIntersectionNodes(this._argIndex),s}},computeSplitEdges:function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var i=new qn(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},getGeometry:function(){return this._parentGeom},getBoundaryNodeRule:function(){return this._boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Gt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,de.INTERIOR)}else if(arguments[0]instanceof E){var e=arguments[0];this.insertPoint(this._argIndex,e,de.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),de.EXTERIOR,de.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,de.INTERIOR,de.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],de.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],de.BOUNDARY)},addLineString:function(t){var e=nt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new jn(e,new zn(this._argIndex,de.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),x.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},getInvalidPoint:function(){return this._invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},addSelfIntersectionNode:function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===de.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=nt.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,s=n;z.isCCW(i)&&(r=n,s=e);var o=new jn(i,new zn(this._argIndex,de.BOUNDARY,r,s));this._lineEdgeMap.put(t,o),this.insertEdge(o),this.insertPoint(this._argIndex,i[0],de.BOUNDARY)},insertPoint:function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new zn(t,n):r.setLocation(t,n)},createEdgeSetIntersector:function(){return new Bn},addSelfIntersectionNodes:function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var s=r.next();this.addSelfIntersectionNode(t,s.coord,i)}},add:function(){if(!(1===arguments.length&&arguments[0]instanceof K))return ei.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof kt&&(this._useBoundaryDeterminationRule=!1),t instanceof Vt)this.addPolygon(t);else if(t instanceof At)this.addLineString(t);else if(t instanceof Gt)this.addPoint(t);else if(t instanceof zt)this.addCollection(t);else if(t instanceof wt)this.addCollection(t);else if(t instanceof kt)this.addCollection(t);else{if(!(t instanceof Lt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return N(this._parentGeom,Bt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ae(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},findEdge:function(){if(1===arguments.length&&arguments[0]instanceof At){var t=arguments[0];return this._lineEdgeMap.get(t)}return ei.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return ni}}),ni.determineBoundary=function(t,e){return t.isInBoundary(e)?de.BOUNDARY:de.INTERIOR};var ii=Object.freeze({GeometryGraph:ni});function ri(){}function si(){if(this._p=null,this._data=null,this._left=null,this._right=null,this._count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this._p=new E(t),this._left=null,this._right=null,this._count=1,this._data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._p=new E(n,i),this._left=null,this._right=null,this._count=1,this._data=r}}function oi(){if(this._root=null,this._numberOfNodes=null,this._tolerance=null,0===arguments.length)oi.call(this,0);else if(1===arguments.length){var t=arguments[0];this._tolerance=t}}function ai(){this._tolerance=null,this._matchNode=null,this._matchDist=0,this._p=null;var t=arguments[0],e=arguments[1];this._p=t,this._tolerance=e}e(ri.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return ri}}),e(si.prototype,{isRepeated:function(){return this._count>1},getRight:function(){return this._right},getCoordinate:function(){return this._p},setLeft:function(t){this._left=t},getX:function(){return this._p.x},getData:function(){return this._data},getCount:function(){return this._count},getLeft:function(){return this._left},getY:function(){return this._p.y},increment:function(){this._count=this._count+1},setRight:function(t){this._right=t},interfaces_:function(){return[]},getClass:function(){return si}}),e(oi.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this._root)return this._root=new si(e,n),this._root;if(this._tolerance>0){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}},query:function(){if(1===arguments.length){var t=arguments[0],e=new P;return this.query(t,e),e}if(2===arguments.length)if(arguments[0]instanceof M&&N(arguments[1],w)){var n=arguments[0],i=arguments[1];this.queryNode(this._root,n,!0,{interfaces_:function(){return[ri]},visit:function(t){i.add(t)}})}else if(arguments[0]instanceof M&&N(arguments[1],ri)){var r=arguments[0],s=arguments[1];this.queryNode(this._root,r,!0,s)}},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,s=null,o=null;n?(r=e.getMinX(),s=e.getMaxX(),o=t.getX()):(r=e.getMinY(),s=e.getMaxY(),o=t.getY());var a=o<=s;r<o&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),a&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){var e=new ai(t,this._tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this._root},insertExact:function(t,e){for(var n=this._root,i=this._root,r=!0,s=!0;null!==n;){if(null!==n)if(t.distance(n.getCoordinate())<=this._tolerance)return n.increment(),n;i=n,n=(s=r?t.x<n.getX():t.y<n.getY())?n.getLeft():n.getRight(),r=!r}this._numberOfNodes=this._numberOfNodes+1;var o=new si(t,e);return s?i.setLeft(o):i.setRight(o),o},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return oi.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new b,r=e.iterator();r.hasNext();)for(var s=r.next(),o=n?s.getCount():1,a=0;a<o;a++)i.add(s.getCoordinate(),!0);return i.toCoordinateArray()}},e(ai.prototype,{visit:function(t){var e=this._p.distance(t.getCoordinate());if(!(e<=this._tolerance))return null;var n=!1;(null===this._matchNode||e<this._matchDist||null!==this._matchNode&&e===this._matchDist&&t.getCoordinate().compareTo(this._matchNode.getCoordinate())<1)&&(n=!0),n&&(this._matchNode=t,this._matchDist=e)},queryEnvelope:function(){var t=new M(this._p);return t.expandBy(this._tolerance),t},getNode:function(){return this._matchNode},interfaces_:function(){return[ri]},getClass:function(){return ai}}),oi.BestMatchVisitor=ai;var ui=Object.freeze({KdTree:oi});function li(){this._items=new P,this._subnode=new Array(4).fill(null)}function hi(){this._pt=new E,this._level=0,this._env=null;var t=arguments[0];this.computeKey(t)}function ci(){li.apply(this),this._env=null,this._centrex=null,this._centrey=null,this._level=null;var t=arguments[0],e=arguments[1];this._env=t,this._level=e,this._centrex=(t.getMinX()+t.getMaxX())/2,this._centrey=(t.getMinY()+t.getMaxY())/2}function fi(){li.apply(this)}function gi(){}function di(){this._root=null,this._minExtent=1,this._root=new fi}e(li.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(null!==this._subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this._items);for(var e=0;e<4;e++)null!==this._subnode[e]&&this._subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+this._items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this._items);for(var n=0;n<4;n++)null!==this._subnode[n]&&this._subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this._items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this._items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<4;i++)if(null!==this._subnode[i]&&(n=this._subnode[i].remove(t,e))){this._subnode[i].isPrunable()&&(this._subnode[i]=null);break}return n||(n=this._items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)null!==this._subnode[n]&&this._subnode[n].visit(t,e)},getItems:function(){return this._items},depth:function(){for(var t=0,e=0;e<4;e++)if(null!==this._subnode[e]){var n=this._subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var t=!0;if(this._items.isEmpty()){for(var e=0;e<4;e++)if(null!==this._subnode[e]&&!this._subnode[e].isEmpty()){t=!1;break}}else t=!1;return t},add:function(t){this._items.add(t)},interfaces_:function(){return[p]},getClass:function(){return li}}),li.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},e(hi.prototype,{getLevel:function(){return this._level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this._level=hi.computeQuadLevel(t),this._env=new M,this.computeKey(this._level,t);!this._env.contains(t);)this._level+=1,this.computeKey(this._level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=on.powerOf2(e);this._pt.x=Math.floor(n.getMinX()/i)*i,this._pt.y=Math.floor(n.getMinY()/i)*i,this._env.init(this._pt.x,this._pt.x+i,this._pt.y,this._pt.y+i)}},getEnvelope:function(){return this._env},getCentre:function(){return new E((this._env.getMinX()+this._env.getMaxX())/2,(this._env.getMinY()+this._env.getMaxY())/2)},getPoint:function(){return this._pt},interfaces_:function(){return[]},getClass:function(){return hi}}),hi.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n;return on.exponent(i)+1},v(ci,li),e(ci.prototype,{find:function(t){var e=li.getSubnodeIndex(t,this._centrex,this._centrey);return-1===e?this:null!==this._subnode[e]?this._subnode[e].find(t):this},isSearchMatch:function(t){return null!==t&&this._env.intersects(t)},getSubnode:function(t){return null===this._subnode[t]&&(this._subnode[t]=this.createSubnode(t)),this._subnode[t]},getEnvelope:function(){return this._env},getNode:function(t){var e=li.getSubnodeIndex(t,this._centrex,this._centrey);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this._env.getMinX(),n=this._centrex,i=this._env.getMinY(),r=this._centrey;break;case 1:e=this._centrex,n=this._env.getMaxX(),i=this._env.getMinY(),r=this._centrey;break;case 2:e=this._env.getMinX(),n=this._centrex,i=this._centrey,r=this._env.getMaxY();break;case 3:e=this._centrex,n=this._env.getMaxX(),i=this._centrey,r=this._env.getMaxY()}return new ci(new M(e,n,i,r),this._level-1)},insertNode:function(t){x.isTrue(null===this._env||this._env.contains(t._env));var e=li.getSubnodeIndex(t._env,this._centrex,this._centrey);if(t._level===this._level-1)this._subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this._subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return ci}}),ci.createNode=function(t){var e=new hi(t);return new ci(e.getEnvelope(),e.getLevel())},ci.createExpanded=function(t,e){var n=new M(e);null!==t&&n.expandToInclude(t._env);var i=ci.createNode(n);return null!==t&&i.insertNode(t),i},v(fi,li),e(fi.prototype,{insert:function(t,e){var n=li.getSubnodeIndex(t,fi.origin.x,fi.origin.y);if(-1===n)return this.add(e),null;var i=this._subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=ci.createExpanded(i,t);this._subnode[n]=r}this.insertContained(this._subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){x.isTrue(t.getEnvelope().contains(e));var i=ln.isZeroWidth(e.getMinX(),e.getMaxX()),r=ln.isZeroWidth(e.getMinY(),e.getMaxY());(i||r?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.origin=new E(0,0),e(gi.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){},interfaces_:function(){return[]},getClass:function(){return gi}}),e(di.prototype,{size:function(){return null!==this._root?this._root.size():0},insert:function(t,e){this.collectStats(t);var n=di.ensureExtent(t,this._minExtent);this._root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Me;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this._root.visit(n,i)}},queryAll:function(){var t=new P;return this._root.addAllItems(t),t},remove:function(t,e){var n=di.ensureExtent(t,this._minExtent);return this._root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this._minExtent&&e>0&&(this._minExtent=e);var n=t.getHeight();n<this._minExtent&&n>0&&(this._minExtent=n)},depth:function(){return null!==this._root?this._root.depth():0},isEmpty:function(){return null===this._root||this._root.isEmpty()},interfaces_:function(){return[gi,p]},getClass:function(){return di}}),di.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),s=t.getMaxY();return n!==i&&r!==s?t:(n===i&&(i=(n-=e/2)+e/2),r===s&&(s=(r-=e/2)+e/2),new M(n,i,r,s))},di.serialVersionUID=-0x678b60c967a25400;var _i=Object.freeze({Quadtree:di});function pi(){}function mi(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}function vi(){this._size=null,this._items=null,this._size=0,this._items=new P,this._items.add(null)}function yi(){this.normalOrder=null;var t=arguments[0];this.normalOrder=t}function xi(){if(this._childBoundables=new P,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}}function Ei(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}function Ii(){if(this._root=null,this._built=!1,this._itemBoundables=new P,this._nodeCapacity=null,0===arguments.length)Ii.call(this,Ii.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];x.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}function Ni(){}function Ci(){if(0===arguments.length)Ci.call(this,Ci.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Ii.call(this,t)}}function Si(){var t=arguments[0];xi.call(this,t)}e(pi.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return pi}}),e(mi.prototype,{getItem:function(){return this._item},getBounds:function(){return this._bounds},interfaces_:function(){return[pi,p]},getClass:function(){return mi}}),e(vi.prototype,{poll:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},clear:function(){this._size=0,this._items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return vi}}),e(yi.prototype,{compare:function(t,e){var n=t.getDistance(),i=e.getDistance();return this.normalOrder?n>i?1:n===i?0:-1:n>i?-1:n===i?0:1},interfaces_:function(){return[_,p]},getClass:function(){return yi}}),e(xi.prototype,{getLevel:function(){return this._level},size:function(){return this._childBoundables.size()},getChildBoundables:function(){return this._childBoundables},addChildBoundable:function(t){x.isTrue(null===this._bounds),this._childBoundables.add(t)},isEmpty:function(){return this._childBoundables.isEmpty()},getBounds:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},interfaces_:function(){return[pi,p]},getClass:function(){return xi}}),xi.serialVersionUID=0x5a1e55ec41369800,e(Ei.prototype,{expandToQueue:function(t,e){var n=Ei.isComposite(this._boundable1),r=Ei.isComposite(this._boundable2);if(n&&r)return Ei.area(this._boundable1)>Ei.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new i("neither boundable is composite")},isLeaves:function(){return!(Ei.isComposite(this._boundable1)||Ei.isComposite(this._boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var s=new Ei(r.next(),e,this._itemDistance);s.getDistance()<i&&n.add(s)}},getBoundable:function(t){return 0===t?this._boundable1:this._boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},interfaces_:function(){return[g]},getClass:function(){return Ei}}),Ei.area=function(t){return t.getBounds().getArea()},Ei.isComposite=function(t){return t instanceof xi},e(Ii.prototype,{queryInternal:function(){if(N(arguments[2],Ce)&&arguments[0]instanceof Object&&arguments[1]instanceof xi)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=e.getChildBoundables(),r=0;r<i.size();r++){var s=i.get(r);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof xi?this.queryInternal(t,s,n):s instanceof mi?n.visitItem(s.getItem()):x.shouldNeverReachHere())}else if(N(arguments[2],w)&&arguments[0]instanceof Object&&arguments[1]instanceof xi){var o=arguments[0],a=arguments[1],u=arguments[2];for(i=a.getChildBoundables(),r=0;r<i.size();r++){s=i.get(r);this.getIntersectsOp().intersects(s.getBounds(),o)&&(s instanceof xi?this.queryInternal(o,s,u):s instanceof mi?u.add(s.getItem()):x.shouldNeverReachHere())}}},getNodeCapacity:function(){return this._nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof xi?t+=this.size(n):n instanceof mi&&(t+=1)}return t}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof mi&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new P:t}if(1===arguments.length){for(var e=arguments[0],n=new P,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof xi){var s=this.itemsTree(r);null!==s&&n.add(s)}else r instanceof mi?n.add(r.getItem()):x.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){x.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new mi(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new P;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(x.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();o instanceof xi?this.boundablesAtLevel(n,o,r):(x.isTrue(o instanceof mi),-1===n&&r.add(o))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new P;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}},build:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},getRoot:function(){return this.build(),this._root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=this.removeItem(i,r);if(s)return!0;for(var o=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&(u instanceof xi&&(s=this.remove(n,u,r)))){o=u;break}}return null!==o&&o.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(o),s}},createHigherLevels:function(t,e){x.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof xi){var i=this.depth(n);i>t&&(t=i)}}return t+1}},createParentBoundables:function(t,e){x.isTrue(!t.isEmpty());var n=new P;n.add(this.createNode(e));var i=new P(t);Te.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var s=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(s)}return n},isEmpty:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},interfaces_:function(){return[p]},getClass:function(){return Ii}}),Ii.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Ii.IntersectsOp=function(){},Ii.serialVersionUID=-0x35ef64c82d4c5400,Ii.DEFAULT_NODE_CAPACITY=10,e(Ni.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ni}}),v(Ci,Ii),e(Ci.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){x.isTrue(t.length>0);for(var n=new P,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new Si(t)},size:function(){return 0===arguments.length?Ii.prototype.size.call(this):Ii.prototype.size.apply(this,arguments)},insert:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof M))return Ii.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;Ii.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Ci.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),s=0;s<e;s++){i[s]=new P;for(var o=0;r.hasNext()&&o<n;){var a=r.next();i[s].add(a),o++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return Ii.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];Ii.prototype.query.call(this,e,n)}},getComparator:function(){return Ci.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Ii.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof M){var t=arguments[0],e=arguments[1];return Ii.prototype.remove.call(this,t,e)}return Ii.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?Ii.prototype.depth.call(this):Ii.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){x.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new P(t);Te.sort(i,Ci.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(N(arguments[0],Ni)){var t=arguments[0],e=new Ei(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ei){var n=arguments[0];return this.nearestNeighbour(n,s.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Ci&&N(arguments[1],Ni)){var i=arguments[0],r=arguments[1];e=new Ei(this.getRoot(),i.getRoot(),r);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ei&&"number"==typeof arguments[1]){var o=arguments[0],a=arguments[1],u=null;for((_=new vi).add(o);!_.isEmpty()&&a>0;){if((E=(x=_.poll()).getDistance())>=a)break;x.isLeaves()?(a=E,u=x):x.expandToQueue(_,a)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}if(arguments[0]instanceof Ei&&Number.isInteger(arguments[1])){var l=arguments[0],h=arguments[1];return this.nearestNeighbour(l,s.POSITIVE_INFINITY,h)}}else if(3===arguments.length){if(N(arguments[2],Ni)&&arguments[0]instanceof M&&arguments[1]instanceof Object){var c=arguments[0],f=arguments[1],g=arguments[2],d=new mi(c,f);e=new Ei(this.getRoot(),d,g);return this.nearestNeighbour(e)[0]}if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ei&&"number"==typeof arguments[1]){var _,p=arguments[0],m=arguments[1],v=arguments[2];a=m;(_=new vi).add(p);for(var y=new java.util.PriorityQueue<Ei>new yi(!1);!_.isEmpty()&&a>=0;){var x,E;if((E=(x=_.poll()).getDistance())>=a)break;x.isLeaves()?y.size()<v?y.add(x):(y.peek().getDistance()>E&&(y.poll(),y.add(x)),a=y.peek().getDistance()):x.expandToQueue(_,a)}return Ci.getItems(y)}}else if(4===arguments.length){var I=arguments[0],C=arguments[1],S=arguments[2],L=arguments[3];d=new mi(I,C),e=new Ei(this.getRoot(),d,S);return this.nearestNeighbour(e,L)}},interfaces_:function(){return[gi,p]},getClass:function(){return Ci}}),Ci.centreX=function(t){return Ci.avg(t.getMinX(),t.getMaxX())},Ci.avg=function(t,e){return(t+e)/2},Ci.getItems=function(t){for(var e=new Array(t.size()).fill(null),n=t.iterator(),i=0;n.hasNext();)e[i]=n.next().getBoundable(0).getItem(),i++;return e},Ci.centreY=function(t){return Ci.avg(t.getMinY(),t.getMaxY())},v(Si,xi),e(Si.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new M(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Si}}),Ci.STRtreeNode=Si,Ci.serialVersionUID=0x39920f7d5f261e0,Ci.xComparator={interfaces_:function(){return[_]},compare:function(t,e){return Ii.compareDoubles(Ci.centreX(t.getBounds()),Ci.centreX(e.getBounds()))}},Ci.yComparator={interfaces_:function(){return[_]},compare:function(t,e){return Ii.compareDoubles(Ci.centreY(t.getBounds()),Ci.centreY(e.getBounds()))}},Ci.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Ci.DEFAULT_NODE_CAPACITY=10;var Li=Object.freeze({STRtree:Ci}),wi=Object.freeze({kdtree:ui,quadtree:_i,strtree:Li}),Ri=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];function Ti(t){this.geometryFactory=t||new se}e(Ti.prototype,{read:function(t){var e=void 0,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Pi[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Ri.indexOf(n)?Pi[n].call(this,e.coordinates):"GeometryCollection"===n?Pi[n].call(this,e.geometries):Pi[n].call(this,e)},write:function(t){var e=t.getGeometryType();if(!Oi[e])throw new Error("Geometry is not supported");return Oi[e].call(this,t)}});var Pi={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!Pi[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Pi.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new E(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new E(t[0],t[1]),new E(t[2],t[1]),new E(t[2],t[3]),new E(t[0],t[3]),new E(t[0],t[1])])},Point:function(t){var e=new E(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Pi.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Pi.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Pi.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Pi.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var s=t[r],o=Pi.coordinates.call(this,s),a=this.geometryFactory.createLinearRing(o);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(Pi.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},Oi={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Oi.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Oi.Point.call(this,i);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(Oi.coordinate.call(this,r))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Oi.LineString.call(this,i);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Oi.LineString.call(this,t._shell);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],s=Oi.LineString.call(this,r);e.push(s.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Oi.Polygon.call(this,i);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Oi[r].call(this,i))}return{type:"GeometryCollection",geometries:e}}};function bi(t){this.parser=new Ti(t||new se)}function Mi(){this.parser=new Ti(this.geometryFactory)}function Di(t){this.parser=new ae(t||new se)}function Ai(t){return[t.x,t.y]}function Fi(t,e){this.geometryFactory=t||new se,this.ol=e||"undefined"!=typeof ol&&ol}e(bi.prototype,{read:function(t){return this.parser.read(t)}}),e(Mi.prototype,{write:function(t){return this.parser.write(t)}}),e(Di.prototype,{read:function(t){return this.parser.read(t)}}),e(Fi.prototype,{inject:function(t,e,n,i,r,s,o,a){this.ol={geom:{Point:t,LineString:e,LinearRing:n,Polygon:i,MultiPoint:r,MultiLineString:s,MultiPolygon:o,GeometryCollection:a}}},read:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new E(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new E(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new E(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var s=this.convertFromLinearRing(e[r]);0===r?n=s:i.push(s)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new this.ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t._points._coordinates.map(Ai);return new this.ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t._points._coordinates.map(Ai);return new this.ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t._shell._points._coordinates.map(Ai)],n=0;n<t._holes.length;n++)e.push(t._holes[n]._points._coordinates.map(Ai));return new this.ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(Ai))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;n++)e.push(this.convertToLineString(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;n++)e.push(this.convertToPolygon(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t._geometries.length;n++){var i=t._geometries[n];e.push(this.write(i))}return new this.ol.geom.GeometryCollection(e)}});var Gi=Object.freeze({GeoJSONReader:bi,GeoJSONWriter:Mi,OL3Parser:Fi,WKTReader:Di,WKTWriter:he});function qi(){}function Bi(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new E(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function Vi(){this._nodeMap=new pt,this._edge=null;var t=arguments[0];this._edge=t}function zi(){this._nodeList=null,this._edge=null,this._nodeIt=null,this._currNode=null,this._nextNode=null,this._currSegIndex=0;var t=arguments[0];this._nodeList=t,this._edge=t.getEdge(),this._nodeIt=t.iterator(),this.readNextNode()}function Yi(){}function ki(){}function Ui(){}function Xi(){this._nodeList=new Vi(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}function Hi(){this._overlapSeg1=new ge,this._overlapSeg2=new ge}function Wi(){}function ji(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function Ki(){if(this._monoChains=new P,this._index=new Ci,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];ji.call(this,t)}}function Zi(){Hi.apply(this),this._si=null;var t=arguments[0];this._si=t}function Qi(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];Qi.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];this._noder=n,this._scaleFactor=i,this._isScaled=!this.isIntegerPrecision()}}e(qi.prototype,{interfaces_:function(){return[]},getClass:function(){return qi}}),qi.relativeSign=function(t,e){return t<e?-1:t>e?1:0},qi.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=qi.relativeSign(e.x,n.x),r=qi.relativeSign(e.y,n.y);switch(t){case 0:return qi.compareValue(i,r);case 1:return qi.compareValue(r,i);case 2:return qi.compareValue(r,-i);case 3:return qi.compareValue(-i,r);case 4:return qi.compareValue(-i,-r);case 5:return qi.compareValue(-r,-i);case 6:return qi.compareValue(-r,i);case 7:return qi.compareValue(i,-r)}return x.shouldNeverReachHere("invalid octant value"),0},qi.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0},e(Bi.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:qi.compare(this._segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[g]},getClass:function(){return Bi}}),e(Vi.prototype,{getSplitCoordinates:function(){var t=new b;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new P;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=(this._edge.getCoordinate(e+1),this._edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new G(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex,t.segmentIndex;var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new E(t.coord),!1);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)n.add(this._edge.getCoordinate(s));r&&n.add(new E(e.coord))},iterator:function(){return this._nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new G(e[0])),i=r}},getEdge:function(){return this._edge},addEndpoints:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new E(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this._edge.getCoordinate(a);return r&&(s[o]=new E(e.coord)),new Xi(s,this._edge.getData())},add:function(t,e){var n=new Bi(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(x.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new m("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new m("bad split edge end point at "+r)},interfaces_:function(){return[]},getClass:function(){return Vi}}),e(zi.prototype,{next:function(){return null===this._currNode?(this._currNode=this._nextNode,this._currSegIndex=this._currNode.segmentIndex,this.readNextNode(),this._currNode):null===this._nextNode?null:this._nextNode.segmentIndex===this._currNode.segmentIndex?(this._currNode=this._nextNode,this._currSegIndex=this._currNode.segmentIndex,this.readNextNode(),this._currNode):(this._nextNode.segmentIndex,this._currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this._nextNode},readNextNode:function(){this._nodeIt.hasNext()?this._nextNode=this._nodeIt.next():this._nextNode=null},interfaces_:function(){return[C]},getClass:function(){return zi}}),e(Yi.prototype,{interfaces_:function(){return[]},getClass:function(){return Yi}}),Yi.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof E&&arguments[1]instanceof E){var s=arguments[0],o=arguments[1],a=o.x-s.x,u=o.y-s.y;if(0===a&&0===u)throw new i("Cannot compute the octant for two identical points "+s);return Yi.octant(a,u)}},e(ki.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return ki}}),e(Ui.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[ki]},getClass:function(){return Ui}}),e(Xi.prototype,{getCoordinates:function(){return this._pts},size:function(){return this._pts.length},getCoordinate:function(t){return this._pts[t]},isClosed:function(){return this._pts[0].equals(this._pts[this._pts.length-1])},getSegmentOctant:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this._data=t},safeOctant:function(t,e){return t.equals2D(e)?0:Yi.octant(t,e)},getData:function(){return this._data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),s=new E(n.getIntersection(r));this.addIntersection(s,i)}},toString:function(){return he.toLineString(new Kt(this._pts))},getNodeList:function(){return this._nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[Ui]},getClass:function(){return Xi}}),Xi.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new P;return Xi.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){r.next().getNodeList().addSplitEdges(i)}},e(Hi.prototype,{overlap:function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return Hi}}),e(Wi.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Wi}}),e(ji.prototype,{setSegmentIntersector:function(t){this._segInt=t},interfaces_:function(){return[Wi]},getClass:function(){return ji}}),v(Ki,ji),e(Ki.prototype,{getMonotoneChains:function(){return this._monoChains},getNodedSubstrings:function(){return Xi.getNodedSubstrings(this._nodedSegStrings)},getIndex:function(){return this._index},add:function(t){for(var e=dn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},computeNodes:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new Zi(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Ki}}),v(Zi,Hi),e(Zi.prototype,{overlap:function(){if(4!==arguments.length)return Hi.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),s=n.getContext();this._si.processIntersections(r,e,s,i)},interfaces_:function(){return[]},getClass:function(){return Zi}}),Ki.SegmentOverlapAction=Zi,e(Qi.prototype,{rescale:function(){if(N(arguments[0],S))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){var n=arguments[0];2===n.length&&(new E(n[0]),new E(n[1]));for(t=0;t<n.length;t++)n[t].x=n[t].x/this._scaleFactor+this._offsetX,n[t].y=n[t].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Y.out.println(n)}},scale:function(){if(N(arguments[0],S)){for(var t=arguments[0],e=new P(t.size()),n=t.iterator();n.hasNext();){var i=n.next();e.add(new Xi(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){var r=arguments[0],s=new Array(r.length).fill(null);for(n=0;n<r.length;n++)s[n]=new E(Math.round((r[n].x-this._offsetX)*this._scaleFactor),Math.round((r[n].y-this._offsetY)*this._scaleFactor),r[n].z);return nt.removeRepeatedPoints(s)}},isIntegerPrecision:function(){return 1===this._scaleFactor},getNodedSubstrings:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},interfaces_:function(){return[Wi]},getClass:function(){return Qi}});var Ji=Object.freeze({MCIndexNoder:Ki,ScaledNoder:Qi,SegmentString:ki});function $i(){if(this._inputGeom=null,this._isClosedEndpointsInInterior=!0,this._nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this._inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._inputGeom=e,this._isClosedEndpointsInInterior=!n.isInBoundary(2)}}function tr(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function er(){if(this._quadrantSegments=er.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=er.CAP_ROUND,this._joinStyle=er.JOIN_ROUND,this._mitreLimit=er.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=er.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(s),this.setMitreLimit(o)}}function nr(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}function ir(){this.array_=[]}function rr(){this._finder=null,this._dirEdgeList=new P,this._nodes=new P,this._rightMostCoord=null,this._env=null,this._finder=new nr}function sr(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new P,this._pts=new P,this._label=new zn(de.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new P,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}function or(){var t=arguments[0],e=arguments[1];sr.call(this,t,e)}function ar(){var t=arguments[0],e=arguments[1];sr.call(this,t,e)}function ur(){this._geometryFactory=null,this._shellList=new P;var t=arguments[0];this._geometryFactory=t}function lr(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=z.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}function hr(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new P}function cr(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ge,this._seg1=new ge,this._offset0=new ge,this._offset1=new ge,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new fe,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===er.JOIN_ROUND&&(this._closingSegLengthFactor=cr.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function fr(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}function gr(){this._subgraphs=null,this._seg=new ge;var t=arguments[0];this._subgraphs=t}function dr(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new ge(t),this._leftDepth=e}function _r(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new P;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}function pr(){this._edgeMap=new pt,this._edgeList=null,this._ptInAreaLocation=[de.NONE,de.NONE]}function mr(){pr.apply(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}function vr(){ti.apply(this)}function yr(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=yr.orientation(t)}function xr(){this._edges=new P,this._ocaMap=new pt}function Er(){}function Ir(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}function Nr(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new xr;var t=arguments[0];this._bufParams=t}function Cr(){this._li=new fe,this._segStrings=null;var t=arguments[0];this._segStrings=t}function Sr(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new i("Scale factor must be non-zero");1!==e&&(this._pt=new E(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new E,this._p1Scaled=new E),this.initCorners(this._pt)}function Lr(){this._index=null;var t=arguments[0];this._index=t}function wr(){nn.apply(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}function Rr(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new P}function Tr(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new fe,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}function Pr(){if(this._argGeom=null,this._distance=null,this._bufParams=new er,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}e($i.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new yt,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n).getCoordinate();if(e.contains(i))return this._nonSimpleLocation=i,!1;e.add(i)}return!0},isSimplePolygonal:function(t){for(var e=be.getLines(t).iterator();e.hasNext();){var n=e.next();if(!this.isSimpleLinearGeometry(n))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new pt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),s=i.getCoordinate(0);this.addEndpoint(e,s,r);var o=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,o,r)}for(n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!==a.degree)return this._nonSimpleLocation=a.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this._nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new ni(0,t),n=new fe,i=e.computeSelfNodes(n,!0);return!i.hasIntersection()||(i.hasProperIntersection()?(this._nonSimpleLocation=i.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(e)&&(!this._isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next();if(!s.isEndPoint(i))return this._nonSimpleLocation=s.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new tr(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this._nonSimpleLocation=null,!!t.isEmpty()||(t instanceof At?this.isSimpleLinearGeometry(t):t instanceof wt?this.isSimpleLinearGeometry(t):t instanceof zt?this.isSimpleMultiPoint(t):N(t,Bt)?this.isSimplePolygonal(t):!(t instanceof Lt)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this._nonSimpleLocation=null,this.computeSimple(this._inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return $i}}),$i.isSimple=function(){return 1===arguments.length?new $i(arguments[0]).isSimple():2===arguments.length?new $i(arguments[0],arguments[1]).isSimple():void 0},e(tr.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return tr}}),$i.EndpointInfo=tr,e(er.prototype,{getEndCapStyle:function(){return this._endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=er.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=er.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==er.JOIN_ROUND&&(this._quadrantSegments=er.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this._joinStyle},setJoinStyle:function(t){this._joinStyle=t},setSimplifyFactor:function(t){this._simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this._simplifyFactor},getQuadrantSegments:function(){return this._quadrantSegments},setEndCapStyle:function(t){this._endCapStyle=t},getMitreLimit:function(){return this._mitreLimit},setMitreLimit:function(t){this._mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return er}}),er.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},er.CAP_ROUND=1,er.CAP_FLAT=2,er.CAP_SQUARE=3,er.JOIN_ROUND=1,er.JOIN_MITRE=2,er.JOIN_BEVEL=3,er.DEFAULT_QUADRANT_SEGMENTS=8,er.DEFAULT_MITRE_LIMIT=5,er.DEFAULT_SIMPLIFY_FACTOR=.01,e(nr.prototype,{getCoordinate:function(){return this._minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this._minDe.getEdge().getCoordinates();x.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=z.index(this._minCoord,n,e),r=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===z.COUNTERCLOCKWISE?r=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===z.CLOCKWISE&&(r=!0),r&&(this._minIndex=this._minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Dn.LEFT;return n[e].y<n[e+1].y&&(i=Dn.RIGHT),i},getEdge:function(){return this._orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}x.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Dn.LEFT&&(this._orientedDe=this._minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return nr}}),ir.prototype.addLast=function(t){this.array_.push(t)},ir.prototype.removeFirst=function(){return this.array_.shift()},ir.prototype.isEmpty=function(){return 0===this.array_.length},e(rr.prototype,{clearVisitedEdges:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},getRightmostCoordinate:function(){return this._rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){if((i=n.next()).isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Jn("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(n=t.getEdges().iterator();n.hasNext();){var i;(i=n.next()).setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel();e.setEdgeDepths(Dn.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},findResultEdges:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Dn.RIGHT)>=1&&e.getDepth(Dn.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new ut,n=new ir,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var o=s.next().getSym();if(!o.isVisited()){var a=o.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},compareTo:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},getEnvelope:function(){if(null===this._env){for(var t=new M,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},addReachable:function(t){var e=new je;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(Dn.LEFT,t.getDepth(Dn.RIGHT)),e.setDepth(Dn.RIGHT,t.getDepth(Dn.LEFT))},add:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},getNodes:function(){return this._nodes},getDirectedEdges:function(){return this._dirEdgeList},interfaces_:function(){return[g]},getClass:function(){return rr}}),e(sr.prototype,{computeRing:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=z.isCCW(this._ring.getCoordinates())},isIsolated:function(){return 1===this._label.getGeometryCount()},computePoints:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Jn("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Jn("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();x.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},getLinearRing:function(){return this._ring},getCoordinate:function(t){return this._pts.get(t)},computeMaxNodeDegree:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var s=r;s<i.length;s++)this._pts.add(i[s])}else{r=i.length-2;n&&(r=i.length-1);for(s=r;s>=0;s--)this._pts.add(i[s])}},isHole:function(){return this._isHole},setInResult:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},containsPoint:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!qe.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},addHole:function(t){this._holes.add(t)},isShell:function(){return null===this._shell},getLabel:function(){return this._label},getEdges:function(){return this._edges},getMaxNodeDegree:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},getShell:function(){return this._shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Dn.RIGHT);if(i===de.NONE)return null;if(this._label.getLocation(n)===de.NONE)return this._label.setLocation(n,i),null}},setShell:function(t){this._shell=t,null!==t&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},interfaces_:function(){return[]},getClass:function(){return sr}}),v(or,sr),e(or.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return or}}),v(ar,sr),e(ar.prototype,{buildMinimalRings:function(){var t=new P,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new or(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return ar}}),e(ur.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},computePolygons:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Jn("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new P,r=t.iterator();r.hasNext();){var s=r.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var o=s.buildMinimalRings(),a=this.findShell(o);null!==a?(this.placePolygonHoles(a,o),e.add(a)):n.addAll(o)}else i.add(s)}return i},containsPoint:function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new ar(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){return this.computePolygons(this._shellList)},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();null!==s&&(o=s.getLinearRing().getEnvelopeInternal());var c=!1;h.contains(i)&&qe.isInRing(r,l.getCoordinates())&&(c=!0),c&&(null===s||o.contains(h))&&(s=u)}return s},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return x.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ei.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new P,s=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(s,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},interfaces_:function(){return[]},getClass:function(){return ur}}),e(lr.prototype,{isDeletable:function(t,e,n,i){var r=this._inputLine[t],s=this._inputLine[e],o=this._inputLine[n];return!!this.isConcave(r,s,o)&&(!!this.isShallow(r,s,o,i)&&this.isShallowSampled(r,s,t,n,i))},deleteShallowConcavities:function(){for(var t=1,e=(this._inputLine.length,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=lr.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){return z.index(t,e,n)===this._angleOrientation&&X.pointToSegment(e,t,n)<i},isShallowSampled:function(t,e,n,i,r){var s=Math.trunc((i-n)/lr.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var o=n;o<i;o+=s)if(!this.isShallow(t,e,this._inputLine[o],r))return!1;return!0},isConcave:function(t,e,n){var i=z.index(t,e,n)===this._angleOrientation;return i},simplify:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=z.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===lr.DELETE;)e++;return e},isShallow:function(t,e,n,i){return X.pointToSegment(e,t,n)<i},collapseLine:function(){for(var t=new b,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==lr.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.simplify=function(t,e){return new lr(t).simplify(e)},lr.INIT=0,lr.DELETE=1,lr.KEEP=1,lr.NUM_PTS_TO_CHECK=10,e(hr.prototype,{getCoordinates:function(){return this._ptList.toArray(hr.COORDINATE_ARRAY_TYPE)},setPrecisionModel:function(t){this._precisionModel=t},addPt:function(t){var e=new E(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},toString:function(){return(new se).createLineString(this.getCoordinates()).toString()},closeRing:function(){if(this._ptList.size()<1)return null;var t=new E(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(this._ptList.size()>=2&&this._ptList.get(this._ptList.size()-2),t.equals(e))return null;this._ptList.add(t)},setMinimumVertexDistance:function(t){this._minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return hr}}),hr.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(cr.prototype,{addNextSegment:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=z.index(this._s0,this._s1,this._s2),i=n===z.CLOCKWISE&&this._side===Dn.LEFT||n===z.COUNTERCLOCKWISE&&this._side===Dn.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new ge(t,e),i=new ge;this.computeOffsetSegment(n,Dn.LEFT,this._distance,i);var r=new ge;this.computeOffsetSegment(n,Dn.RIGHT,this._distance,r);var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s);switch(this._bufParams.getEndCapStyle()){case er.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,z.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case er.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case er.CAP_SQUARE:var u=new E;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new E(i.p1.x+u.x,i.p1.y+u.y),h=new E(r.p1.x+u.x,r.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(h)}},getCoordinates:function(){return this._segList.getCoordinates()},addMitreJoin:function(t,e,n,i){var r=!0,s=null;try{s=k.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:s.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof A))throw t;s=new E(0,0),r=!1}r?this._segList.addPt(s):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},addOutsideTurn:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*cr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===er.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===er.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},createSquare:function(t){this._segList.addPt(new E(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new E(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},addSegments:function(t,e){this._segList.addPts(t,e)},addFirstSegment:function(){this._segList.addPt(this._offset1.p0)},addCornerFillet:function(t,e,n,i,r){var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s),u=n.x-t.x,l=n.y-t.y,h=Math.atan2(l,u);i===z.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,h,i,r),this._segList.addPt(n)},addLastSegment:function(){this._segList.addPt(this._offset1.p1)},initSideSegments:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this._seg0.p1,s=pe.angle(r,this._seg0.p0),o=(pe.angle(r,this._seg1.p1),pe.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2),a=pe.normalize(s+o),u=pe.normalize(a+Math.PI),l=i*n,h=n-l*Math.abs(Math.sin(o)),c=new ge(r,new E(r.x+l*Math.cos(u),r.y+l*Math.sin(u))),f=c.pointAlongOffset(1,h),g=c.pointAlongOffset(1,-h);this._side===Dn.LEFT?(this._segList.addPt(f),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(f))},addDirectedFillet:function(t,e,n,i,r){var s=i===z.CLOCKWISE?-1:1,o=Math.abs(e-n),a=Math.trunc(o/this._filletAngleQuantum+.5);if(a<1)return null;var u;u=o/a;for(var l=0,h=new E;l<o;){var c=e+s*l;h.x=t.x+r*Math.cos(c),h.y=t.y+r*Math.sin(c),this._segList.addPt(h),l+=u}},computeOffsetSegment:function(t,e,n,i){var r=e===Dn.LEFT?1:-1,s=t.p1.x-t.p0.x,o=t.p1.y-t.p0.y,a=Math.sqrt(s*s+o*o),u=r*n*s/a,l=r*n*o/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},addInsideTurn:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*cr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new E((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new E((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},createCircle:function(t){var e=new E(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},addBevelJoin:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},init:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new hr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*cr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===er.JOIN_BEVEL||this._bufParams.getJoinStyle()===er.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,z.CLOCKWISE,this._distance))},closeRing:function(){this._segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return cr}}),cr.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,cr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,cr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,cr.MAX_CLOSING_SEG_LEN_FACTOR=80,e(fr.prototype,{getOffsetCurve:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var s=r.getCoordinates();return n&&nt.reverse(s),s},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=lr.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],Dn.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(r[o],!0)}else{n.addSegments(t,!1);var a=lr.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Dn.LEFT),n.addFirstSegment();for(o=2;o<=u;o++)n.addNextSegment(a[o],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Dn.RIGHT&&(i=-i);var r=lr.simplify(t,i),s=r.length-1;n.initSideSegments(r[s-1],r[0],e);for(var o=1;o<=s;o++){var a=1!==o;n.addNextSegment(r[o],a)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this._distance),i=lr.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Dn.LEFT);for(var s=2;s<=r;s++)e.addNextSegment(i[s],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var o=lr.simplify(t,-n),a=o.length-1;e.initSideSegments(o[a],o[a-1],Dn.LEFT);for(s=a-2;s>=0;s--)e.addNextSegment(o[s],!0);e.addLastSegment(),e.addLineEndCap(o[1],o[0]),e.closeRing()},computePointCurve:function(t,e){switch(this._bufParams.getEndCapStyle()){case er.CAP_ROUND:e.createCircle(t);break;case er.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},getBufferParameters:function(){return this._bufParams},simplifyTolerance:function(t){return t*this._bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return fr.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=lr.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],Dn.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(r[o],!0)}else{var a=lr.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Dn.LEFT),n.addFirstSegment();for(o=2;o<=u;o++)n.addNextSegment(a[o],!0)}n.addLastSegment()},getSegGen:function(t){return new cr(this._precisionModel,this._bufParams,t)},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new E(t[n]);return e},e(gr.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new P,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(N(arguments[2],w)&&arguments[0]instanceof E&&arguments[1]instanceof $n){var s=arguments[0],o=arguments[1],a=arguments[2],u=o.getEdge().getCoordinates();for(n=0;n<u.length-1;n++){if(this._seg.p0=u[n],this._seg.p1=u[n+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<s.x||this._seg.isHorizontal()||s.y<this._seg.p0.y||s.y>this._seg.p1.y||z.index(this._seg.p0,this._seg.p1,s)===z.RIGHT)){var l=o.getDepth(Dn.LEFT);this._seg.p0.equals(u[n])||(l=o.getDepth(Dn.RIGHT));var h=new dr(this._seg,l);a.add(h)}}}else if(N(arguments[2],w)&&arguments[0]instanceof E&&N(arguments[1],w)){var c=arguments[0],f=arguments[1],g=arguments[2];for(n=f.iterator();n.hasNext();){var d=n.next();d.isForward()&&this.findStabbedSegments(c,d,g)}}},getDepth:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Te.min(e)._leftDepth},interfaces_:function(){return[]},getClass:function(){return gr}}),e(dr.prototype,{compareTo:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this._upwardSeg.toString()},interfaces_:function(){return[g]},getClass:function(){return dr}}),gr.DepthSegment=dr,e(_r.prototype,{addPoint:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,de.EXTERIOR,de.INTERIOR)},addPolygon:function(t){var e=this._distance,n=Dn.LEFT;this._distance<0&&(e=-this._distance,n=Dn.RIGHT);var i=t.getExteriorRing(),r=nt.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,de.EXTERIOR,de.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),a=nt.removeRepeatedPoints(o.getCoordinates());this._distance>0&&this.isErodedCompletely(o,-this._distance)||this.addPolygonRing(a,e,Dn.opposite(n),de.INTERIOR,de.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new me(t[0],t[1],t[2]),i=n.inCentre();return X.pointToSegment(i,n.p0,n.p1)<Math.abs(e)},addLineString:function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=nt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,de.EXTERIOR,de.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var i=new Xi(t,new zn(0,de.BOUNDARY,e,n));this._curveList.add(i)},getCurves:function(){return this.add(this._inputGeom),this._curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<Yt.MINIMUM_VALID_SIZE)return null;var s=i,o=r;t.length>=Yt.MINIMUM_VALID_SIZE&&z.isCCW(t)&&(s=r,o=i,n=Dn.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,s,o)},add:function(t){if(t.isEmpty())return null;if(t instanceof Vt)this.addPolygon(t);else if(t instanceof At)this.addLineString(t);else if(t instanceof Gt)this.addPoint(t);else if(t instanceof zt)this.addCollection(t);else if(t instanceof wt)this.addCollection(t);else if(t instanceof kt)this.addCollection(t);else{if(!(t instanceof Lt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return _r}}),e(pr.prototype,{getNextCW:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},propagateSideLabels:function(t){for(var e=de.NONE,n=this.iterator();n.hasNext();){(s=(r=n.next()).getLabel()).isArea(t)&&s.getLocation(t,Dn.LEFT)!==de.NONE&&(e=s.getLocation(t,Dn.LEFT))}if(e===de.NONE)return null;var i=e;for(n=this.iterator();n.hasNext();){var r,s;if((s=(r=n.next()).getLabel()).getLocation(t,Dn.ON)===de.NONE&&s.setLocation(t,Dn.ON,i),s.isArea(t)){var o=s.getLocation(t,Dn.LEFT),a=s.getLocation(t,Dn.RIGHT);if(a!==de.NONE){if(a!==i)throw new Jn("side location conflict",r.getCoordinate());o===de.NONE&&x.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),i=o}else x.isTrue(s.getLocation(t,Dn.LEFT)===de.NONE,"found single null side"),s.setLocation(t,Dn.RIGHT,i),s.setLocation(t,Dn.LEFT,i)}}},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},print:function(t){Y.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Dn.LEFT);x.isTrue(i!==de.NONE,"Found unlabelled area edge");for(var r=i,s=this.iterator();s.hasNext();){var o=s.next().getLabel();x.isTrue(o.isArea(t),"Found non-area edge");var a=o.getLocation(t,Dn.LEFT),u=o.getLocation(t,Dn.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this._edgeList&&(this._edgeList=new P(this._edgeMap.values())),this._edgeList},getLocation:function(t,e,n){return this._ptInAreaLocation[t]===de.NONE&&(this._ptInAreaLocation[t]=Ve.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},toString:function(){var t=new F;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=(s=n.next()).getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===de.BOUNDARY&&(e[r]=!0);for(n=this.iterator();n.hasNext();){var s;for(i=(s=n.next()).getLabel(),r=0;r<2;r++)if(i.isAnyNull(r)){var o=de.NONE;if(e[r])o=de.EXTERIOR;else{var a=s.getCoordinate();o=this.getLocation(r,a,t)}i.setAllLocationsIfNull(r,o)}}},getDegree:function(){return this._edgeMap.size()},insertEdgeEnd:function(t,e){this._edgeMap.put(t,e),this._edgeList=null},interfaces_:function(){return[]},getClass:function(){return pr}}),v(mr,pr),e(mr.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Jn("no outgoing dirEdge found",this.getCoordinate());x.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),s=i.getQuadrant();return gn.isNorthern(r)&&gn.isNorthern(s)?n:gn.isNorthern(r)||gn.isNorthern(s)?0!==n.getDy()?n:0!==i.getDy()?i:(x.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},print:function(t){Y.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new P;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(Dn.LEFT)),i=t.getDepth(Dn.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Jn("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],o=arguments[1],a=arguments[2],u=s;u<o;u++){var l=this._edgeList.get(u);l.getLabel();l.setEdgeDepths(Dn.RIGHT,a),a=l.getDepth(Dn.LEFT)}return a}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var s=this._resultAreaEdgeList.get(r),o=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this._SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==t)continue;n=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(x.isTrue(null!==e,"found null for first outgoing dirEdge"),x.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){var n=arguments[0];for(t=0,e=this.iterator();e.hasNext();){e.next().getEdgeRing()===n&&t++}return t}},getLabel:function(){return this._label},findCoveredLineEdges:function(){for(var t=de.NONE,e=this.iterator();e.hasNext();){var n=(r=e.next()).getSym();if(!r.isLineEdge()){if(r.isInResult()){t=de.INTERIOR;break}if(n.isInResult()){t=de.EXTERIOR;break}}}if(t===de.NONE)return null;var i=t;for(e=this.iterator();e.hasNext();){var r;n=(r=e.next()).getSym();r.isLineEdge()?r.getEdge().setCovered(i===de.INTERIOR):(r.isInResult()&&(i=de.EXTERIOR),n.isInResult()&&(i=de.INTERIOR))}},computeLabelling:function(t){pr.prototype.computeLabelling.call(this,t),this._label=new zn(de.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),i=0;i<2;i++){var r=n.getLocation(i);r!==de.INTERIOR&&r!==de.BOUNDARY||this._label.setLocation(i,de.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return mr}}),v(vr,ti),e(vr.prototype,{createNode:function(t){return new Kn(t,new mr)},interfaces_:function(){return[]},getClass:function(){return vr}}),e(yr.prototype,{compareTo:function(t){var e=t;return yr.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},interfaces_:function(){return[g]},getClass:function(){return yr}}),yr.orientation=function(t){return 1===nt.increasingDirection(t)},yr.compareOriented=function(t,e,n,i){for(var r=e?1:-1,s=i?1:-1,o=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=r)===o,f=(l+=s)===a;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}},e(xr.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},iterator:function(){return this._edges.iterator()},getEdges:function(){return this._edges},get:function(t){return this._edges.get(t)},findEqualEdge:function(t){var e=new yr(t.getCoordinates());return this._ocaMap.get(e)},add:function(t){this._edges.add(t);var e=new yr(t.getCoordinates());this._ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return xr}}),e(Er.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Er}}),e(Ir.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Ir.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this._properIntersectionPoint},hasProperInteriorIntersection:function(){return this._hasProperInterior},getLineIntersector:function(){return this._li},hasProperIntersection:function(){return this._hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this._hasInterior},interfaces_:function(){return[Er]},getClass:function(){return Ir}}),Ir.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(Nr.prototype,{setWorkingPrecisionModel:function(t){this._workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new zn(t.getLabel())).flip(),n.merge(i);var r=Nr.depthDelta(i),s=e.getDepthDelta()+r;e.setDepthDelta(s)}else this._edgeList.add(t),t.setDepthDelta(Nr.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new P,i=t.iterator();i.hasNext();){var r=i.next(),s=r.getRightmostCoordinate(),o=new gr(n).getDepth(s);r.computeDepth(o),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new P,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new rr;r.create(i),e.add(r)}}return Te.sort(e,Te.reverseOrder()),e},createEmptyResultGeometry:function(){return this._geomFact.createPolygon()},getNoder:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Ki,n=new fe;return n.setPrecisionModel(t),e.setSegmentIntersector(new Ir(n)),e},buffer:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new _r(t,e,new fr(n,this._bufParams)).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new ei(new vr),this._graph.addEdges(this._edgeList.getEdges());var r=this.createSubgraphs(this._graph),s=new ur(this._geomFact);this.buildSubgraphs(r,s);var o=s.getPolygons();return o.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(o)},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),s=r.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var o=r.getData(),a=new jn(r.getCoordinates(),new zn(o));this.insertUniqueEdge(a)}}},setNoder:function(t){this._workingNoder=t},interfaces_:function(){return[]},getClass:function(){return Nr}}),Nr.depthDelta=function(t){var e=t.getLocation(0,Dn.LEFT),n=t.getLocation(0,Dn.RIGHT);return e===de.INTERIOR&&n===de.EXTERIOR?1:e===de.EXTERIOR&&n===de.INTERIOR?-1:0},Nr.convertSegStrings=function(t){for(var e=new se,n=new P;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)},e(Cr.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length){var n=arguments[0];for(t=arguments[1].iterator();t.hasNext();){e=t.next().getCoordinates();for(var i=1;i<e.length-1;i++)if(e[i].equals(n))throw new m("found endpt/interior pt intersection at index "+i+" :pt "+n)}}},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],s=arguments[1],o=r.getCoordinates(),a=s.getCoordinates(),u=0;u<o.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,u,s,l);else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3];if(h===f&&c===g)return null;var d=h.getCoordinates()[c],_=h.getCoordinates()[c+1],p=f.getCoordinates()[g],v=f.getCoordinates()[g+1];if(this._li.computeIntersection(d,_,p,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,_)||this.hasInteriorIntersection(this._li,p,v)))throw new m("found non-noded intersection at "+d+"-"+_+" and "+p+"-"+v)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length){var n=arguments[0].getCoordinates();for(t=0;t<n.length-2;t++)this.checkCollapse(n[t],n[t+1],n[t+2])}},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new m("found non-noded collapse at "+Cr.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return Cr}}),Cr.fact=new se,e(Sr.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),s=Math.max(t.y,e.y),o=this._maxx<n||this._minx>i||this._maxy<r||this._miny>s;if(o)return!1;var a=this.intersectsToleranceSquare(t,e);return x.isTrue(!(o&&a),"Found bad envelope test"),a},initCorners:function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new E(this._maxx,this._maxy),this._corner[1]=new E(this._minx,this._maxy),this._corner[2]=new E(this._minx,this._miny),this._corner[3]=new E(this._maxx,this._miny)},intersects:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},scale:function(t){return Math.round(t*this._scaleFactor)},getCoordinate:function(){return this._originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this._safeEnv){var t=Sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new M(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},intersectsPixelClosure:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!i)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return Sr}}),Sr.SAFE_ENV_EXPANSION_FACTOR=.75,e(Lr.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),s=new wr(e,n,i);return this._index.query(r,{interfaces_:function(){return[Ce]},visitItem:function(t){t.select(r,s)}}),s.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Lr}}),v(wr,nn),e(wr.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof fn))return nn.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},interfaces_:function(){return[]},getClass:function(){return wr}}),Lr.HotPixelSnapAction=wr,e(Rr.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this._interiorIntersections},interfaces_:function(){return[Er]},getClass:function(){return Rr}}),e(Tr.prototype,{checkCorrectness:function(t){var e=new Cr(Xi.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof D))throw t;t.printStackTrace()}},getNodedSubstrings:function(){return Xi.getNodedSubstrings(this._nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new Rr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(N(arguments[0],S))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Xi)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var s=new Sr(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(s,n,r)&&n.addIntersection(i[r],r)}},computeNodes:function(t){this._nodedSegStrings=t,this._noder=new Ki,this._pointSnapper=new Lr(this._noder.getIndex()),this.snapRound(t,this._li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=new Sr(e.next(),this._scaleFactor,this._li);this._pointSnapper.snap(n)}},interfaces_:function(){return[Wi]},getClass:function(){return Tr}}),e(Pr.prototype,{bufferFixedPrecision:function(t){var e=new Qi(new Tr(new ie(1)),t.getScale()),n=new Nr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=Pr.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Jn))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var e=arguments[0],n=new ie(Pr.precisionScaleFactor(this._argGeom,this._distance,e));this.bufferFixedPrecision(n)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ie.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this._bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new Nr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof m))throw t;this._saveException=t}},getResultGeometry:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},setEndCapStyle:function(t){this._bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Pr(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof K&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2];return(a=new Pr(n)).setQuadrantSegments(r),a.getResultGeometry(i)}if(arguments[2]instanceof er&&arguments[0]instanceof K&&"number"==typeof arguments[1]){var s=arguments[0],o=arguments[1];return(a=new Pr(s,arguments[2])).getResultGeometry(o)}}else if(4===arguments.length){var a,u=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];return(a=new Pr(u)).setQuadrantSegments(h),a.setEndCapStyle(c),a.getResultGeometry(l)}},Pr.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=U.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),s=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,s)},Pr.CAP_ROUND=er.CAP_ROUND,Pr.CAP_BUTT=er.CAP_FLAT,Pr.CAP_FLAT=er.CAP_FLAT,Pr.CAP_SQUARE=er.CAP_SQUARE,Pr.MAX_PRECISION_DIGITS=12;var Or=Object.freeze({BufferOp:Pr,BufferParameters:er});function br(){this._comps=null;var t=arguments[0];this._comps=t}function Mr(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];Mr.call(this,t,Mr.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._component=n,this._segIndex=i,this._pt=r}}function Dr(){this._pts=null;var t=arguments[0];this._pts=t}function Ar(){this._locations=null;var t=arguments[0];this._locations=t}function Fr(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Mn,this._minDistanceLocation=null,this._minDistance=s.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];Fr.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}}e(br.prototype,{filter:function(t){t instanceof Vt&&this._comps.add(t)},interfaces_:function(){return[Ct]},getClass:function(){return br}}),br.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return br.getPolygons(t,new P)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Vt?n.add(e):e instanceof Lt&&e.apply(new br(n)),n}},e(Mr.prototype,{isInsideArea:function(){return this._segIndex===Mr.INSIDE_AREA},getCoordinate:function(){return this._pt},getGeometryComponent:function(){return this._component},getSegmentIndex:function(){return this._segIndex},interfaces_:function(){return[]},getClass:function(){return Mr}}),Mr.INSIDE_AREA=-1,e(Dr.prototype,{filter:function(t){t instanceof Gt&&this._pts.add(t)},interfaces_:function(){return[Ct]},getClass:function(){return Dr}}),Dr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Gt?Te.singletonList(t):Dr.getPoints(t,new P)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Gt?n.add(e):e instanceof Lt&&e.apply(new Dr(n)),n}},e(Ar.prototype,{filter:function(t){(t instanceof Gt||t instanceof At||t instanceof Vt)&&this._locations.add(new Mr(t,0,t.getCoordinate()))},interfaces_:function(){return[Ct]},getClass:function(){return Ar}}),Ar.getLocations=function(t){var e=new P;return t.apply(new Ar(e)),e},e(Fr.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=this._geom[e];if(i.getDimension()<2)return null;var r=1-e,s=br.getPolygons(i);if(s.size()>0){var o=Ar.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,s,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&N(arguments[0],w)&&N(arguments[1],w)){for(var a=arguments[0],u=arguments[1],l=arguments[2],h=0;h<a.size();h++)for(var c=a.get(h),f=0;f<u.size();f++)if(this.computeContainmentDistance(c,u.get(f),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Mr&&arguments[1]instanceof Vt){var g=arguments[0],d=arguments[1],_=arguments[2],p=g.getCoordinate();if(de.EXTERIOR!==this._ptLocator.locate(p,d))return this._minDistance=0,_[0]=g,_[1]=new Mr(d,p),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this._minDistance<=this._terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=be.getLines(this._geom[0]),n=be.getLines(this._geom[1]),i=Dr.getPoints(this._geom[0]),r=Dr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this._minDistanceLocation},updateMinDistance:function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},nearestPoints:function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},computeMinDistance:function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof At&&arguments[1]instanceof Gt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),s=0;s<i.length-1;s++){if((f=X.pointToSegment(r,i[s],i[s+1]))<this._minDistance){this._minDistance=f;var o=new ge(i[s],i[s+1]).closestPoint(r);n[0]=new Mr(t,s,o),n[1]=new Mr(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof At&&arguments[1]instanceof At){var a=arguments[0],u=arguments[1],l=arguments[2];if(a.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;i=a.getCoordinates();var h=u.getCoordinates();for(s=0;s<i.length-1;s++)for(var c=0;c<h.length-1;c++){var f;if((f=X.segmentToSegment(i[s],i[s+1],h[c],h[c+1]))<this._minDistance){this._minDistance=f;var g=new ge(i[s],i[s+1]),d=new ge(h[c],h[c+1]),_=g.closestPoints(d);l[0]=new Mr(a,s,_[0]),l[1]=new Mr(u,c,_[1])}if(this._minDistance<=this._terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s),a=r.getCoordinate().distance(o.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Mr(r,0,r.getCoordinate()),n[1]=new Mr(o,0,o.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},distance:function(){if(null===this._geom[0]||null===this._geom[1])throw new i("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this._minDistance<=this._terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.distance=function(t,e){return new Fr(t,e).distance()},Fr.isWithinDistance=function(t,e,n){return!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>n)&&new Fr(t,e,n).distance()<=n},Fr.nearestPoints=function(t,e){return new Fr(t,e).nearestPoints()};var Gr=Object.freeze({DistanceOp:Fr});function qr(){this._factory=null,this._directedEdges=new P,this._coordinates=null;var t=arguments[0];this._factory=t}function Br(){this._isMarked=!1,this._isVisited=!1,this._data=null}function Vr(){Br.apply(this),this._parentEdge=null,this._from=null,this._to=null,this._p0=null,this._p1=null,this._sym=null,this._edgeDirection=null,this._quadrant=null,this._angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._from=t,this._to=e,this._edgeDirection=i,this._p0=t.getCoordinate(),this._p1=n;var r=this._p1.x-this._p0.x,s=this._p1.y-this._p0.y;this._quadrant=gn.quadrant(r,s),this._angle=Math.atan2(s,r)}function zr(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];Vr.call(this,t,e,n,i)}function Yr(){if(Br.apply(this),this._dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function kr(){this._outEdges=new P,this._sorted=!1}function Ur(){if(Br.apply(this),this._pt=null,this._deStar=null,1===arguments.length){var t=arguments[0];Ur.call(this,t,new kr)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._pt=e,this._deStar=n}}function Xr(){Yr.apply(this),this._line=null;var t=arguments[0];this._line=t}function Hr(){this._nodeMap=new pt}function Wr(){this._edges=new ut,this._dirEdges=new ut,this._nodeMap=new Hr}function jr(){Wr.apply(this)}function Kr(){this._graph=new jr,this._mergedLineStrings=null,this._factory=null,this._edgeStrings=null}e(qr.prototype,{getCoordinates:function(){if(null===this._coordinates){for(var t=0,e=0,n=new b,i=this._directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this._coordinates=n.toCoordinateArray(),e>t&&nt.reverse(this._coordinates)}return this._coordinates},toLineString:function(){return this._factory.createLineString(this.getCoordinates())},add:function(t){this._directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return qr}}),e(Br.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this._data=t},getData:function(){return this._data},setMarked:function(t){this._isMarked=t},getContext:function(){return this._data},isVisited:function(){return this._isVisited},setContext:function(t){this._data=t},interfaces_:function(){return[]},getClass:function(){return Br}}),Br.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},Br.setVisited=function(t,e){for(;t.hasNext();){t.next().setVisited(e)}},Br.setMarked=function(t,e){for(;t.hasNext();){t.next().setMarked(e)}},v(Vr,Br),e(Vr.prototype,{isRemoved:function(){return null===this._parentEdge},compareDirection:function(t){return this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:z.index(t._p0,t._p1,this._p1)},getCoordinate:function(){return this._from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+this._angle)},getDirectionPt:function(){return this._p1},getAngle:function(){return this._angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this._from},getSym:function(){return this._sym},setEdge:function(t){this._parentEdge=t},remove:function(){this._sym=null,this._parentEdge=null},getEdge:function(){return this._parentEdge},getQuadrant:function(){return this._quadrant},setSym:function(t){this._sym=t},getToNode:function(){return this._to},getEdgeDirection:function(){return this._edgeDirection},interfaces_:function(){return[g]},getClass:function(){return Vr}}),Vr.toEdges=function(t){for(var e=new P,n=t.iterator();n.hasNext();)e.add(n.next()._parentEdge);return e},v(zr,Vr),e(zr.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(x.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return zr}}),v(Yr,Br),e(Yr.prototype,{isRemoved:function(){return null===this._dirEdge},setDirectedEdges:function(t,e){this._dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this._dirEdge[t]}if(arguments[0]instanceof Ur){var e=arguments[0];return this._dirEdge[0].getFromNode()===e?this._dirEdge[0]:this._dirEdge[1].getFromNode()===e?this._dirEdge[1]:null}},remove:function(){this._dirEdge=null},getOppositeNode:function(t){return this._dirEdge[0].getFromNode()===t?this._dirEdge[0].getToNode():this._dirEdge[1].getFromNode()===t?this._dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Yr}}),e(kr.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this._outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},iterator:function(){return this.sortEdges(),this._outEdges.iterator()},sortEdges:function(){this._sorted||(Te.sort(this._outEdges),this._sorted=!0)},remove:function(t){this._outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this._outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this._outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Yr){var t=arguments[0];this.sortEdges();for(var e=0;e<this._outEdges.size();e++){if(this._outEdges.get(e).getEdge()===t)return e}return-1}if(arguments[0]instanceof Vr){var n=arguments[0];this.sortEdges();for(e=0;e<this._outEdges.size();e++){if(this._outEdges.get(e)===n)return e}return-1}if(Number.isInteger(arguments[0])){var i=arguments[0]%this._outEdges.size();return i<0&&(i+=this._outEdges.size()),i}},add:function(t){this._outEdges.add(t),this._sorted=!1},getDegree:function(){return this._outEdges.size()},interfaces_:function(){return[]},getClass:function(){return kr}}),v(Ur,Br),e(Ur.prototype,{isRemoved:function(){return null===this._pt},addOutEdge:function(t){this._deStar.add(t)},getCoordinate:function(){return this._pt},getOutEdges:function(){return this._deStar},remove:function(){if(0===arguments.length)this._pt=null;else if(1===arguments.length){var t=arguments[0];this._deStar.remove(t)}},getIndex:function(t){return this._deStar.getIndex(t)},getDegree:function(){return this._deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.getEdgesBetween=function(t,e){var n=new ut(Vr.toEdges(t.getOutEdges().getEdges())),i=Vr.toEdges(e.getOutEdges().getEdges());return n.retainAll(i),n},v(Xr,Yr),e(Xr.prototype,{getLine:function(){return this._line},interfaces_:function(){return[]},getClass:function(){return Xr}}),e(Hr.prototype,{find:function(t){return this._nodeMap.get(t)},iterator:function(){return this._nodeMap.values().iterator()},remove:function(t){return this._nodeMap.remove(t)},values:function(){return this._nodeMap.values()},add:function(t){return this._nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return Hr}}),e(Wr.prototype,{findNodesOfDegree:function(t){for(var e=new P,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this._dirEdges.iterator()},edgeIterator:function(){return this._edges.iterator()},remove:function(){if(arguments[0]instanceof Yr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this._edges.remove(t),t.remove()}else if(arguments[0]instanceof Vr){var e=arguments[0];null!==(r=e.getSym())&&r.setSym(null),e.getFromNode().remove(e),e.remove(),this._dirEdges.remove(e)}else if(arguments[0]instanceof Ur){for(var n=arguments[0],i=n.getOutEdges().getEdges().iterator();i.hasNext();){var r,s=i.next();null!==(r=s.getSym())&&this.remove(r),this._dirEdges.remove(s);var o=s.getEdge();null!==o&&this._edges.remove(o)}this._nodeMap.remove(n.getCoordinate()),n.remove()}},findNode:function(t){return this._nodeMap.find(t)},getEdges:function(){return this._edges},nodeIterator:function(){return this._nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Yr){var t=arguments[0];return this._edges.contains(t)}if(arguments[0]instanceof Vr){var e=arguments[0];return this._dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof Ur){var t=arguments[0];this._nodeMap.add(t)}else if(arguments[0]instanceof Yr){var e=arguments[0];this._edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof Vr){var n=arguments[0];this._dirEdges.add(n)}},getNodes:function(){return this._nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return Wr}}),v(jr,Wr),e(jr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=nt.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),s=this.getNode(i),o=new zr(r,s,e[1],!0),a=new zr(s,r,e[e.length-2],!1),u=new Xr(t);u.setDirectedEdges(o,a),this.add(u)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Ur(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return jr}}),e(Kr.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(x.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this._mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this._edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this._mergedLineStrings)return null;Br.setMarked(this._graph.nodeIterator(),!1),Br.setMarked(this._graph.edgeIterator(),!1),this._edgeStrings=new P,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this._mergedLineStrings=new P;for(var t=this._edgeStrings.iterator();t.hasNext();){var e=t.next();this._mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new qr(this._factory),n=t;do{e.add(n),n.getEdge().setMarked(!0),n=n.getNext()}while(null!==n&&n!==t);return e},add:function(){if(arguments[0]instanceof K)arguments[0].apply({interfaces_:function(){return[j]},filter:function(t){t instanceof At&&this.add(t)}});else if(N(arguments[0],S)){var t=arguments[0];this._mergedLineStrings=null;for(var e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}}else if(arguments[0]instanceof At){var i=arguments[0];null===this._factory&&(this._factory=i.getFactory()),this._graph.addEdge(i)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Kr}});var Zr=Object.freeze({LineMerger:Kr});function Qr(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}function Jr(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new P,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null}function $r(){this._li=new fe,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t}function ts(){this._nv=null;var t=arguments[0];this._nv=new $r(ts.toSegmentStrings(t))}function es(){this._mapOp=null;var t=arguments[0];this._mapOp=t}function ns(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new P,this._resultLineList=new P;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n}function is(){this._op=null,this._geometryFactory=null,this._resultPointList=new P;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e}function rs(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ge,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof At&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];rs.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=rs.isClosed(n),this._snapTolerance=i}}function ss(){this._srcGeom=null;var t=arguments[0];this._srcGeom=t}function os(){if(In.apply(this),this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._snapTolerance=t,this._snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._snapTolerance=n,this._snapPts=i,this._isSelfSnap=r}}function as(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new r,this._commonSignExp=null}function us(){this._commonCoord=null,this._ccFilter=new ls}function ls(){this._commonBitsX=new as,this._commonBitsY=new as}function hs(){this.trans=null;var t=arguments[0];this.trans=t}function cs(){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null;var t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}function fs(){this._geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e}function gs(){if(this._li=new fe,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ni(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];gs.call(this,e,n,Q.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ni(0,i,s),this._arg[1]=new ni(1,r,s)}}function ds(){this._ptLocator=new Mn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new xr,this._resultPolyList=new P,this._resultLineList=new P,this._resultPointList=new P;var t=arguments[0],e=arguments[1];gs.call(this,t,e),this._graph=new ei(new vr),this._geomFact=t.getFactory()}e(Qr.prototype,{getCoordinates:function(){return this._pts},size:function(){return this._pts.length},getCoordinate:function(t){return this._pts[t]},isClosed:function(){return this._pts[0].equals(this._pts[this._pts.length-1])},getSegmentOctant:function(t){return t===this._pts.length-1?-1:Yi.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this._data=t},getData:function(){return this._data},toString:function(){return he.toLineString(new Kt(this._pts))},interfaces_:function(){return[ki]},getClass:function(){return Qr}}),e(Jr.prototype,{getInteriorIntersection:function(){return this._interiorIntersection},setCheckEndSegmentsOnly:function(t){this._isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this._intSegments},count:function(){return this._intersectionCount},getIntersections:function(){return this._intersections},setFindAllIntersections:function(t){this._findAllIntersections=t},setKeepIntersections:function(t){this._keepIntersections=t},processIntersections:function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,i)))return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=s,this._intSegments[2]=o,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this._interiorIntersection},isDone:function(){return!this._findAllIntersections&&null!==this._interiorIntersection},interfaces_:function(){return[Er]},getClass:function(){return Jr}}),Jr.createAllIntersectionsFinder=function(t){var e=new Jr(t);return e.setFindAllIntersections(!0),e},Jr.createAnyIntersectionFinder=function(t){return new Jr(t)},Jr.createIntersectionCounter=function(t){var e=new Jr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},e($r.prototype,{execute:function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},getIntersections:function(){return this._segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this._findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this._segInt=new Jr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Ki;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new Jn(this.getErrorMessage(),this._segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+he.toLineString(t[0],t[1])+" and "+he.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return $r}}),$r.computeIntersections=function(t){var e=new $r(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},e(ts.prototype,{checkValid:function(){this._nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return ts}}),ts.toSegmentStrings=function(t){for(var e=new P,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Qr(i.getCoordinates(),i))}return e},ts.checkValid=function(t){new ts(t).checkValid()},e(es.prototype,{map:function(t){for(var e=new P,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(se.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return es}}),es.map=function(t,e){return new es(e).map(t)},e(ns.prototype,{collectLines:function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ds.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this._geometryFactory.createLineString(n.getCoordinates()));this._resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(x.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ds.isResultOfOp(i,e)&&e===ds.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return ns}}),e(is.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&(!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===ds.INTERSECTION))){var i=n.getLabel();ds.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},interfaces_:function(){return[]},getClass:function(){return is}}),e(rs.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),s=this.findSnapForVertex(r,e);null!==s&&(t.set(i,new E(s)),0===i&&this._isClosed&&t.set(t.size()-1,new E(s)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},snapTo:function(t){var e=new b(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],s=this.findSegmentIndexToSnap(r,t);s>=0&&t.add(s+1,new E(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=s.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},setAllowSnappingToSourceVertices:function(t){this._allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return rs}}),rs.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(ss.prototype,{snapTo:function(t,e){return new os(e,this.extractTargetCoordinates(t)).transform(this._srcGeom)},snapToSelf:function(t,e){var n=new os(t,this.extractTargetCoordinates(this._srcGeom),!0).transform(this._srcGeom),i=n;return e&&N(i,Bt)&&(i=n.buffer(0)),i},computeSnapTolerance:function(t){return this.computeMinimumSegmentLength(t)/10},extractTargetCoordinates:function(t){for(var e=new yt,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=s.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},interfaces_:function(){return[]},getClass:function(){return ss}}),ss.snap=function(t,e,n){var i=new Array(2).fill(null),r=new ss(t);i[0]=r.snapTo(e,n);var s=new ss(e);return i[1]=s.snapTo(i[0],n),i},ss.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=ss.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ie.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],s=arguments[1];return Math.min(ss.computeOverlaySnapTolerance(r),ss.computeOverlaySnapTolerance(s))}},ss.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*ss.SNAP_PRECISION_FACTOR},ss.snapToSelf=function(t,e,n){return new ss(t).snapToSelf(e,n)},ss.SNAP_PRECISION_FACTOR=1e-9,v(os,In),e(os.prototype,{snapLine:function(t,e){var n=new rs(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return os}}),e(as.prototype,{getCommon:function(){return s.longBitsToDouble(this._commonBits)},add:function(t){var e=s.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=as.signExpBits(this._commonBits),this._isFirst=!1,null):as.signExpBits(e)!==this._commonSignExp?(this._commonBits.high=0,this._commonBits.low=0,null):(this._commonMantissaBitsCount=as.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=as.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=s.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+r.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},interfaces_:function(){return[]},getClass:function(){return as}}),as.getBit=function(t,e){var n=1<<e%32;return e<32?0!=(t.low&n)?1:0:0!=(t.high&n)?1:0},as.signExpBits=function(t){return t.high>>>20},as.zeroLowerBits=function(t,e){var n="low";if(e>32&&(t.low=0,e%=32,n="high"),e>0){var i=e<32?~((1<<e)-1):0;t[n]&=i}return t},as.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(as.getBit(t,i)!==as.getBit(e,i))return n;n++}return 52},e(us.prototype,{addCommonBits:function(t){var e=new hs(this._commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new E(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new hs(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this._commonCoord},add:function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return us}}),e(ls.prototype,{filter:function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},getCommonCoordinate:function(){return new E(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},interfaces_:function(){return[Z]},getClass:function(){return ls}}),e(hs.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[St]},getClass:function(){return hs}}),us.CommonCoordinateFilter=ls,us.Translater=hs,e(cs.prototype,{selfSnap:function(t){return new ss(t).snapTo(t,this._snapTolerance)},removeCommonBits:function(t){this._cbr=new us,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this._cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this._geom),n=ds.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||Y.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this._snapTolerance=ss.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},snap:function(t){var e=this.removeCommonBits(t);return ss.snap(e[0],e[1],this._snapTolerance)},interfaces_:function(){return[]},getClass:function(){return cs}}),cs.overlayOp=function(t,e,n){return new cs(t,e).getResultGeometry(n)},cs.union=function(t,e){return cs.overlayOp(t,e,ds.UNION)},cs.intersection=function(t,e){return cs.overlayOp(t,e,ds.INTERSECTION)},cs.symDifference=function(t,e){return cs.overlayOp(t,e,ds.SYMDIFFERENCE)},cs.difference=function(t,e){return cs.overlayOp(t,e,ds.DIFFERENCE)},e(fs.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=ds.overlayOp(this._geom[0],this._geom[1],t);n=!0}catch(t){if(!(t instanceof m))throw t;i=t}if(!n)try{e=cs.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof m?i:t}return e},interfaces_:function(){return[]},getClass:function(){return fs}}),fs.overlayOp=function(t,e,n){return new fs(t,e).getResultGeometry(n)},fs.union=function(t,e){return fs.overlayOp(t,e,ds.UNION)},fs.intersection=function(t,e){return fs.overlayOp(t,e,ds.INTERSECTION)},fs.symDifference=function(t,e){return fs.overlayOp(t,e,ds.SYMDIFFERENCE)},fs.difference=function(t,e){return fs.overlayOp(t,e,ds.DIFFERENCE)},e(gs.prototype,{getArgGeometry:function(t){return this._arg[t].getGeometry()},setComputationPrecision:function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return gs}}),v(ds,gs),e(ds.prototype,{insertUniqueEdge:function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new zn(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},getGraph:function(){return this._graph},cancelDuplicateResultEdges:function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},computeGeometry:function(t,e,n,i){var r=new P;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?ds.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==de.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new P,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this._resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new P;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ts.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new ur(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new ns(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new is(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&ds.isResultOfOp(i.getLocation(0,Dn.RIGHT),i.getLocation(1,Dn.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(x.isTrue(!i.isNull(r,Dn.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Dn.LEFT,i.getLocation(r,Dn.LEFT)),x.isTrue(!i.isNull(r,Dn.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Dn.RIGHT,i.getLocation(r,Dn.RIGHT))))}}},computeLabelling:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},isCoveredByA:function(t){return!!this.isCovered(t,this._resultPolyList)},interfaces_:function(){return[]},getClass:function(){return ds}}),ds.overlayOp=function(t,e,n){return new ds(t,e).getResultGeometry(n)},ds.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ds.createEmptyResult(ds.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new i("This method does not support GeometryCollection arguments");return fs.overlayOp(t,e,ds.UNION)},ds.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ds.createEmptyResult(ds.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return es.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}if(t.isGeometryCollection()||e.isGeometryCollection())throw new i("This method does not support GeometryCollection arguments");return fs.overlayOp(t,e,ds.INTERSECTION)},ds.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ds.createEmptyResult(ds.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new i("This method does not support GeometryCollection arguments");return fs.overlayOp(t,e,ds.SYMDIFFERENCE)},ds.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),s=-1;switch(t){case ds.INTERSECTION:s=Math.min(i,r);break;case ds.UNION:s=Math.max(i,r);break;case ds.DIFFERENCE:s=i;break;case ds.SYMDIFFERENCE:s=Math.max(i,r)}return s},ds.createEmptyResult=function(t,e,n,i){var r=null;switch(ds.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection();break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},ds.difference=function(t,e){if(t.isEmpty())return ds.createEmptyResult(ds.DIFFERENCE,t,e,t.getFactory());if(e.isEmpty())return t.copy();if(t.isGeometryCollection()||e.isGeometryCollection())throw new i("This method does not support GeometryCollection arguments");return fs.overlayOp(t,e,ds.DIFFERENCE)},ds.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return ds.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];switch(r===de.BOUNDARY&&(r=de.INTERIOR),s===de.BOUNDARY&&(s=de.INTERIOR),o){case ds.INTERSECTION:return r===de.INTERIOR&&s===de.INTERIOR;case ds.UNION:return r===de.INTERIOR||s===de.INTERIOR;case ds.DIFFERENCE:return r===de.INTERIOR&&s!==de.INTERIOR;case ds.SYMDIFFERENCE:return r===de.INTERIOR&&s!==de.INTERIOR||r!==de.INTERIOR&&s===de.INTERIOR}return!1}},ds.INTERSECTION=1,ds.UNION=2,ds.DIFFERENCE=3,ds.SYMDIFFERENCE=4;var _s=Object.freeze({OverlayOp:ds});function ps(){this._edgeRing=null,this._next=null,this._label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];Vr.call(this,t,e,n,i)}function ms(){Yr.apply(this),this._line=null;var t=arguments[0];this._line=t}function vs(){this._factory=null,this._deList=new P,this._lowestEdge=null,this._ring=null,this._ringPts=null,this._holes=null,this._shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this._factory=t}function ys(){}function xs(){Wr.apply(this),this._factory=null;var t=arguments[0];this._factory=t}function Es(){if(this._lineStringAdder=new Is(this),this._graph=null,this._dangles=new P,this._cutEdges=new P,this._invalidRingLines=new P,this._holeList=null,this._shellList=null,this._polyList=null,this._isCheckingRingsValid=!0,this._extractOnlyPolygonal=null,this._geomFactory=null,0===arguments.length)Es.call(this,!1);else if(1===arguments.length){var t=arguments[0];this._extractOnlyPolygonal=t}}function Is(){this.p=null;var t=arguments[0];this.p=t}v(ps,Vr),e(ps.prototype,{getNext:function(){return this._next},isInRing:function(){return null!==this._edgeRing},setRing:function(t){this._edgeRing=t},setLabel:function(t){this._label=t},getLabel:function(){return this._label},setNext:function(t){this._next=t},getRing:function(){return this._edgeRing},interfaces_:function(){return[]},getClass:function(){return ps}}),v(ms,Yr),e(ms.prototype,{getLine:function(){return this._line},interfaces_:function(){return[]},getClass:function(){return ms}}),e(vs.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this._ringPts){for(var t=new b,e=this._deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();vs.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this._ringPts=t.toCoordinateArray()}return this._ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this._ringPts.length<=3)&&(this.getRing(),this._ring.isValid())},build:function(t){var e=t;do{this.add(e),e.setRing(this),e=e.getNext(),x.isTrue(null!==e,"found null DE in ring"),x.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this._holes){t=new Array(this._holes.size()).fill(null);for(var e=0;e<this._holes.size();e++)t[e]=this._holes.get(e)}return this._factory.createPolygon(this._ring,t)},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Yt){var t=arguments[0];null===this._holes&&(this._holes=new P),this._holes.add(t)}else if(arguments[0]instanceof vs){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this._holes&&(this._holes=new P),this._holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this._deList.size();t++){var e=this._deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null},computeHole:function(){var t=this.getRing();this._isHole=z.isCCW(t.getCoordinates())},hasShell:function(){return null!==this._shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this._factory.createLineString(this._ringPts)},toString:function(){return he.toLineString(new Kt(this.getCoordinates()))},getShell:function(){return this.isHole()?this._shell:this},add:function(t){this._deList.add(t)},getRing:function(){if(null!==this._ring)return this._ring;this.getCoordinates(),this._ringPts.length<3&&Y.out.println(this._ringPts);try{this._ring=this._factory.createLinearRing(this._ringPts)}catch(t){if(!(t instanceof D))throw t;Y.out.println(this._ringPts)}return this._ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this._deList.size();t++){var e=this._deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}},setShell:function(t){this._shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return vs}}),vs.findDirEdgesInRing=function(t){var e=t,n=new P;do{n.add(e),e=e.getNext(),x.isTrue(null!==e,"found null DE in ring"),x.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t);return n},vs.addEdge=function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(i=t.length-1;i>=0;i--)n.add(t[i],!1)},vs.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getRing(),h=l.getEnvelopeInternal();if(!h.equals(i)&&h.contains(i)){r=nt.ptNotInList(n.getCoordinates(),l.getCoordinates());var c=!1;qe.isInRing(r,l.getCoordinates())&&(c=!0),c&&(null===s||o.contains(h))&&(o=(s=u).getRing().getEnvelopeInternal())}}return s},e(ys.prototype,{compare:function(t,e){var n=e;return t.getRing().getEnvelope().compareTo(n.getRing().getEnvelope())},interfaces_:function(){return[_]},getClass:function(){return ys}}),vs.EnvelopeComparator=ys,v(xs,Wr),e(xs.prototype,{findEdgeRing:function(t){var e=new vs(this._factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;){return null}else arguments.length},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();xs.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=nt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),s=this.getNode(i),o=new ps(r,s,e[1],!0),a=new ps(s,r,e[e.length-2],!1),u=new ms(t);u.setDirectedEdges(o,a),this.add(u)},deleteCutEdges:function(){this.computeNextCWEdges(),xs.findLabeledEdgeRings(this._dirEdges);for(var t=new P,e=this._dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var i=n.getSym();if(n.getLabel()===i.getLabel()){n.setMarked(!0),i.setMarked(!0);var r=n.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),xs.label(this._dirEdges,-1);var t=xs.findLabeledEdgeRings(this._dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new P,n=this._dirEdges.iterator();n.hasNext();){var i=n.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Ur(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),r=xs.findIntersectionNodes(n,i);if(null!==r)for(var s=r.iterator();s.hasNext();){var o=s.next();xs.computeNextCCWEdges(o,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new ut,n=new je,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();xs.deleteAllEdges(r);for(i=r.getOutEdges().getEdges().iterator();i.hasNext();){var s=i.next();s.setMarked(!0);var o=s.getSym();null!==o&&o.setMarked(!0);var a=s.getEdge();e.add(a.getLine());var u=s.getToNode();1===xs.getDegreeNonDeleted(u)&&n.push(u)}}return e},interfaces_:function(){return[]},getClass:function(){return xs}}),xs.findLabeledEdgeRings=function(t){for(var e=new P,n=1,i=t.iterator();i.hasNext();){var r=i.next();if(!r.isMarked()&&!(r.getLabel()>=0)){e.add(r);var s=vs.findDirEdgesInRing(r);xs.label(s,n),n++}}return e},xs.getDegreeNonDeleted=function(t){for(var e=0,n=t.getOutEdges().getEdges().iterator();n.hasNext();){n.next().isMarked()||e++}return e},xs.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges().iterator();e.hasNext();){var n=e.next();n.setMarked(!0);var i=n.getSym();null!==i&&i.setMarked(!0)}},xs.label=function(t,e){for(var n=t.iterator();n.hasNext();){n.next().setLabel(e)}},xs.computeNextCWEdges=function(t){for(var e=null,n=null,i=t.getOutEdges().getEdges().iterator();i.hasNext();){var r=i.next();if(!r.isMarked()){if(null===e&&(e=r),null!==n)n.getSym().setNext(r);n=r}}null!==n&&n.getSym().setNext(e)},xs.computeNextCCWEdges=function(t,e){for(var n=null,i=null,r=t.getOutEdges().getEdges(),s=r.size()-1;s>=0;s--){var o=r.get(s),a=o.getSym(),u=null;o.getLabel()===e&&(u=o);var l=null;a.getLabel()===e&&(l=a),null===u&&null===l||(null!==l&&(i=l),null!==u&&(null!==i&&(i.setNext(u),i=null),null===n&&(n=u)))}null!==i&&(x.isTrue(null!==n),i.setNext(n))},xs.getDegree=function(t,e){for(var n=0,i=t.getOutEdges().getEdges().iterator();i.hasNext();){i.next().getLabel()===e&&n++}return n},xs.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode();xs.getDegree(r,e)>1&&(null===i&&(i=new P),i.add(r)),n=n.getNext(),x.isTrue(null!==n,"found null DE in ring"),x.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return i},e(Es.prototype,{getGeometry:function(){return null===this._geomFactory&&(this._geomFactory=new se),this.polygonize(),this._extractOnlyPolygonal?this._geomFactory.buildGeometry(this._polyList):this._geomFactory.createGeometryCollection(se.toGeometryArray(this._polyList))},getInvalidRingLines:function(){return this.polygonize(),this._invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this._polyList)return null;if(this._polyList=new P,null===this._graph)return null;this._dangles=this._graph.deleteDangles(),this._cutEdges=this._graph.deleteCutEdges();var t=this._graph.getEdgeRings(),e=new P;this._invalidRingLines=new P,this._isCheckingRingsValid?this.findValidRings(t,e,this._invalidRingLines):e=t,this.findShellsAndHoles(e),Es.assignHolesToShells(this._holeList,this._shellList),Te.sort(this._shellList,new vs.EnvelopeComparator);var n=!0;this._extractOnlyPolygonal&&(Es.findDisjointShells(this._shellList),n=!1),this._polyList=Es.extractPolygons(this._shellList,n)},getDangles:function(){return this.polygonize(),this._dangles},getCutEdges:function(){return this.polygonize(),this._cutEdges},getPolygons:function(){return this.polygonize(),this._polyList},add:function(){if(N(arguments[0],S))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof At){var n=arguments[0];this._geomFactory=n.getFactory(),null===this._graph&&(this._graph=new xs(this._geomFactory)),this._graph.addEdge(n)}else if(arguments[0]instanceof K){arguments[0].apply(this._lineStringAdder)}},setCheckRingsValid:function(t){this._isCheckingRingsValid=t},findShellsAndHoles:function(t){this._holeList=new P,this._shellList=new P;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this._holeList.add(n):this._shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return Es}}),Es.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},Es.extractPolygons=function(t,e){for(var n=new P,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},Es.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();Es.assignHoleToShell(i,e)}},Es.assignHoleToShell=function(t,e){var n=vs.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},Es.findDisjointShells=function(t){Es.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},e(Is.prototype,{filter:function(t){t instanceof At&&this.p.add(t)},interfaces_:function(){return[j]},getClass:function(){return Is}}),Es.LineStringAdder=Is;var Ns=Object.freeze({Polygonizer:Es});function Cs(){}function Ss(){if(this._edgeEnds=new P,1===arguments.length){var t=arguments[0];Ss.call(this,null,t)}else if(2===arguments.length){arguments[0];var e=arguments[1];Qn.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new zn(e.getLabel())),this.insert(e)}}function Ls(){pr.apply(this)}function ws(){var t=arguments[0],e=arguments[1];Kn.call(this,t,e)}function Rs(){ti.apply(this)}function Ts(){this._li=new fe,this._ptLocator=new Mn,this._arg=null,this._nodes=new Zn(new Rs),this._im=null,this._isolatedEdges=new P,this._invalidPoint=null;var t=arguments[0];this._arg=t}function Ps(){this._rectEnv=null;var t=arguments[0];this._rectEnv=t.getEnvelopeInternal()}function Os(){this._li=new fe,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;var t=arguments[0];this._rectEnv=t,this._diagUp0=new E(t.getMinX(),t.getMinY()),this._diagUp1=new E(t.getMaxX(),t.getMaxY()),this._diagDown0=new E(t.getMinX(),t.getMaxY()),this._diagDown1=new E(t.getMaxX(),t.getMinY())}function bs(){this._isDone=!1}function Ms(){this._rectangle=null,this._rectEnv=null;var t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()}function Ds(){bs.apply(this),this._rectEnv=null,this._intersects=!1;var t=arguments[0];this._rectEnv=t}function As(){bs.apply(this),this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;var t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()}function Fs(){bs.apply(this),this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new E,this._p1=new E;var t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new Os(this._rectEnv)}function Gs(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];gs.call(this,t,e),this._relate=new Ts(this._arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];gs.call(this,n,i,r),this._relate=new Ts(this._arg)}}e(Cs.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var s=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(s=i.coord);var o=new Qn(t,n.coord,s,new zn(t.getLabel()));e.add(o)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var s=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(s=i.coord);var o=new zn(t.getLabel());o.flip();var a=new Qn(t,n.coord,s,o);e.add(a)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new P,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],s=arguments[1],o=r.getEdgeIntersectionList();o.addEndpoints();var a=o.iterator(),u=null,l=null;if(!a.hasNext())return null;var h=a.next();do{u=l,l=h,h=null,a.hasNext()&&(h=a.next()),null!==l&&(this.createEdgeEndForPrev(r,s,l,u),this.createEdgeEndForNext(r,s,l,h))}while(null!==l)}},interfaces_:function(){return[]},getClass:function(){return Cs}}),v(Ss,Qn),e(Ss.prototype,{insert:function(t){this._edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println()}},iterator:function(){return this._edgeEnds.iterator()},getEdgeEnds:function(){return this._edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){(s=r.next().getLabel().getLocation(t))===de.BOUNDARY&&n++,s===de.INTERIOR&&(i=!0)}var s=de.NONE;i&&(s=de.INTERIOR),n>0&&(s=ni.determineBoundary(e,n)),this._label.setLocation(t,s)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===de.INTERIOR)return this._label.setLocation(t,e,de.INTERIOR),null;r===de.EXTERIOR&&this._label.setLocation(t,e,de.EXTERIOR)}}},getLabel:function(){return this._label},computeLabelSides:function(t){this.computeLabelSide(t,Dn.LEFT),this.computeLabelSide(t,Dn.RIGHT)},updateIM:function(t){jn.updateIM(this._label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){n.next().getLabel().isArea()&&(e=!0)}this._label=e?new zn(de.NONE,de.NONE,de.NONE):new zn(de.NONE);for(var i=0;i<2;i++)this.computeLabelOn(i,t),e&&this.computeLabelSides(i)},interfaces_:function(){return[]},getClass:function(){return Ss}}),v(Ls,pr),e(Ls.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}},insert:function(t){var e=this._edgeMap.get(t);null===e?(e=new Ss(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Ls}}),v(ws,Kn),e(ws.prototype,{updateIMFromEdges:function(t){this._edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return ws}}),v(Rs,ti),e(Rs.prototype,{createNode:function(t){return new ws(t,new Ls)},interfaces_:function(){return[]},getClass:function(){return Rs}}),e(Ts.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this._arg[0].getGeometry().getDimension(),i=this._arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),s=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),s&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),s&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&s&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this._arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this._arg[e].getGeometry()),this._isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var i=this._ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,de.EXTERIOR)},computeIM:function(){var t=new _e;if(t.set(de.EXTERIOR,de.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);var e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new Cs,i=n.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}},copyNodesAndLabels:function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),o=this._nodes.find(s.coord);o.getLabel().isNull(t)&&(i===de.BOUNDARY?o.setLabelBoundary(t):o.setLabel(t,de.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),o=this._nodes.addNode(s.coord);i===de.BOUNDARY?o.setLabelBoundary(t):o.getLabel().isNull(t)&&o.setLabel(t,de.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();x.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this._isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var n=this._nodes.iterator();n.hasNext();){var i=n.next();i.updateIM(t),i.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this._arg[0].getGeometry();e.isEmpty()||(t.set(de.INTERIOR,de.EXTERIOR,e.getDimension()),t.set(de.BOUNDARY,de.EXTERIOR,e.getBoundaryDimension()));var n=this._arg[1].getGeometry();n.isEmpty()||(t.set(de.EXTERIOR,de.INTERIOR,n.getDimension()),t.set(de.EXTERIOR,de.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Ts}}),e(Ps.prototype,{isContainedInBoundary:function(t){if(t instanceof Vt)return!1;if(t instanceof Gt)return this.isPointContainedInBoundary(t);if(t instanceof At)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new E,i=new E,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Gt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof E){var e=arguments[0];return e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX()||e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY()}},contains:function(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return Ps}}),Ps.contains=function(t,e){return new Ps(t).contains(e)},e(Os.prototype,{intersects:function(t,e){var n=new M(t,e);if(!this._rectEnv.intersects(n))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Os}}),e(bs.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof Lt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return bs}}),e(Ms.prototype,{intersects:function(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Ds(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new As(this._rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new Fs(this._rectangle);return i.applyTo(t),!!i.intersects()},interfaces_:function(){return[]},getClass:function(){return Ms}}),Ms.intersects=function(t,e){return new Ms(t).intersects(e)},v(Ds,bs),e(Ds.prototype,{isDone:function(){return!0===this._intersects},visit:function(t){var e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Ds}}),v(As,bs),e(As.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(t){if(!(t instanceof Vt))return null;var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;for(var n=new E,i=0;i<4;i++)if(this._rectSeq.getCoordinate(i,n),e.contains(n)&&Ve.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return As}}),v(Fs,bs),e(Fs.prototype,{intersects:function(){return this._hasIntersection},isDone:function(){return!0===this._hasIntersection},visit:function(t){var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;var n=be.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this._hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this._p0),e.getCoordinate(n,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Fs}}),v(Gs,gs),e(Gs.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return Gs}}),Gs.covers=function(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new Gs(t,e).getIntersectionMatrix().isCovers())))},Gs.intersects=function(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return Ms.intersects(t,e);if(e.isRectangle())return Ms.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(var n=0;n<t.getNumGeometries();n++)for(var i=0;i<e.getNumGeometries();i++)if(t.getGeometryN(n).intersects(e.getGeometryN(i)))return!0;return!1}return new Gs(t,e).getIntersectionMatrix().isIntersects()},Gs.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new Gs(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())},Gs.relate=function(){return 2===arguments.length?new Gs(arguments[0],arguments[1]).getIntersectionMatrix():3===arguments.length?new Gs(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix():void 0},Gs.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new Gs(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())},Gs.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new Gs(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())},Gs.contains=function(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Ps.contains(t,e):new Gs(t,e).getIntersectionMatrix().isContains())))};var qs=Object.freeze({RelateOp:Gs});function Bs(){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null;var t=arguments[0];this._geomFactory=Bs.extractFactory(t),this._inputGeoms=t}function Vs(){this._pointGeom=null,this._otherGeom=null,this._geomFact=null;var t=arguments[0],e=arguments[1];this._pointGeom=t,this._otherGeom=e,this._geomFact=e.getFactory()}function zs(){this._geometryType=null,this._comps=null;var t=arguments[0],e=arguments[1];this._geometryType=t,this._comps=e}function Ys(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new P)}function ks(){if(this._polygons=new P,this._lines=new P,this._points=new P,this._geomFact=null,1===arguments.length){if(N(arguments[0],S)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof K){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geomFact=i,this.extract(n)}}e(Bs.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new P,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection():null:this._geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return Bs}}),Bs.combine=function(){if(1===arguments.length)return new Bs(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Bs(Bs.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return new Bs(Bs.createList(n,i,r)).combine()}},Bs.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Bs.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return(n=new P).add(t),n.add(e),n}if(3===arguments.length){var n,i=arguments[0],r=arguments[1],s=arguments[2];return(n=new P).add(i),n.add(r),n.add(s),n}},e(Vs.prototype,{union:function(){for(var t=new Mn,e=new yt,n=0;n<this._pointGeom.getNumGeometries();n++){var i=this._pointGeom.getGeometryN(n).getCoordinate();t.locate(i,this._otherGeom)===de.EXTERIOR&&e.add(i)}if(0===e.size())return this._otherGeom;var r=null,s=nt.toCoordinateArray(e);return r=1===s.length?this._geomFact.createPoint(s[0]):this._geomFact.createMultiPointFromCoords(s),Bs.combine(r,this._otherGeom)},interfaces_:function(){return[]},getClass:function(){return Vs}}),Vs.union=function(t,e){return new Vs(t,e).union()},e(zs.prototype,{filter:function(t){(null===this._geometryType||zs.isOfType(t,this._geometryType))&&this._comps.add(t)},interfaces_:function(){return[Ct]},getClass:function(){return zs}}),zs.isOfType=function(t,e){return t.getGeometryType()===e||e===K.TYPENAME_LINESTRING&&t.getGeometryType()===K.TYPENAME_LINEARRING},zs.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return zs.extract(t,e,new P)}if(3===arguments.length){if(N(arguments[2],w)&&arguments[0]instanceof K&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getGeometryType()===i?r.add(n):n instanceof Lt&&n.apply(new zs(i,r)),r}if(N(arguments[2],w)&&arguments[0]instanceof K&&arguments[1]instanceof Class){var s=arguments[0],o=arguments[1],a=arguments[2];return zs.extract(s,zs.toGeometryType(o),a)}}},e(Ys.prototype,{reduceToGeometries:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var i=n.next(),r=null;N(i,w)?r=this.unionTree(i):i instanceof K&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new P,r=0;r<e.getNumGeometries();r++){var s=e.getGeometryN(r);s.getEnvelopeInternal().intersects(t)?i.add(s):n.add(s)}return this._geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Bs.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},union:function(){if(null===this._inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Ci(Ys.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Ys.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Ys.getGeometry(e,n),Ys.getGeometry(e,n+1));var s=Math.trunc((i+n)/2),o=(r=this.binaryUnion(e,n,s),this.binaryUnion(e,s,i));return this.unionSafe(r,o)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Ys.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},unionUsingEnvelopeIntersection:function(t,e,n){var i=new P,r=this.extractByEnvelope(n,t,i),s=this.extractByEnvelope(n,e,i),o=this.unionActual(r,s);return i.add(o),Bs.combine(i)},bufferUnion:function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},interfaces_:function(){return[]},getClass:function(){return Ys}}),Ys.restrictToPolygons=function(t){if(N(t,Bt))return t;var e=br.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(se.toPolygonArray(e))},Ys.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ys.union=function(t){return new Ys(t).union()},Ys.STRTREE_NODE_CAPACITY=4,e(ks.prototype,{unionNoOpt:function(t){var e=this._geomFact.createPoint();return fs.overlayOp(t,e,ds.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(N(arguments[0],S))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.extract(e)}else if(arguments[0]instanceof K){var n=arguments[0];null===this._geomFact&&(this._geomFact=n.getFactory()),zs.extract(n,K.TYPENAME_POLYGON,this._polygons),zs.extract(n,K.TYPENAME_LINESTRING,this._lines),zs.extract(n,K.TYPENAME_POINT,this._points)}},union:function(){if(null===this._geomFact)return null;var t=null;if(this._points.size()>0){var e=this._geomFact.buildGeometry(this._points);t=this.unionNoOpt(e)}var n=null;if(this._lines.size()>0){var i=this._geomFact.buildGeometry(this._lines);n=this.unionNoOpt(i)}var r=null;this._polygons.size()>0&&(r=Ys.union(this._polygons));var s=this.unionWithNull(n,r),o=null;return o=null===t?s:null===s?t:Vs.union(t,s),null===o?this._geomFact.createGeometryCollection():o},interfaces_:function(){return[]},getClass:function(){return ks}}),ks.union=function(){if(1===arguments.length){if(N(arguments[0],S))return new ks(arguments[0]).union();if(arguments[0]instanceof K)return new ks(arguments[0]).union()}else if(2===arguments.length){return new ks(arguments[0],arguments[1]).union()}};var Us=Object.freeze({UnaryUnionOp:ks});function Xs(){this._geometryFactory=new se,this._geomGraph=null,this._disconnectedRingcoord=null;var t=arguments[0];this._geomGraph=t}function Hs(){this._nodes=new Zn(new Rs)}function Ws(){this._li=new fe,this._geomGraph=null,this._nodeGraph=new Hs,this._invalidPoint=null;var t=arguments[0];this._geomGraph=t}function js(){this._graph=null,this._rings=new P,this._totalEnv=new M,this._index=null,this._nestedPt=null;var t=arguments[0];this._graph=t}function Ks(){if(this._errorType=null,this._pt=null,1===arguments.length){var t=arguments[0];Ks.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._errorType=e,null!==n&&(this._pt=n.copy())}}function Zs(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null;var t=arguments[0];this._parentGeometry=t}e(Xs.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),i=n[0],r=Xs.findDifferentPoint(n,i),s=e.findEdgeInSameDirection(i,r),o=e.findEdgeEnd(s),a=null;o.getLabel().getLocation(0,Dn.RIGHT)===de.INTERIOR?a=o:o.getSym().getLabel().getLocation(0,Dn.RIGHT)===de.INTERIOR&&(a=o.getSym()),x.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)},visitShellInteriors:function(t,e){if(t instanceof Vt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof kt)for(var i=t,r=0;r<i.getNumGeometries();r++){n=i.getGeometryN(r);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this._disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,Dn.RIGHT)===de.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do{x.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext()}while(n!==e)},buildEdgeRings:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new ar(i,this._geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var s=r.buildMinimalRings();e.addAll(s)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,Dn.RIGHT)===de.INTERIOR)for(var s=0;s<i.size();s++)if(!(r=i.get(s)).isVisited())return this._disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new P;this._geomGraph.computeSplitEdges(t);var e=new ei(new vr);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Xs}}),Xs.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(Hs.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._nodes.add(n)}},getNodeIterator:function(){return this._nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next();this._nodes.addNode(i.getCoordinate()).setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=(new Cs).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),s=i.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),a=this._nodes.addNode(o.coord);r===de.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,de.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Hs}}),e(Ws.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this._nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this._invalidPoint},hasDuplicateRings:function(){for(var t=this._nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next().getEdges().iterator();e.hasNext();){var n=e.next();if(n.getEdgeEnds().size()>1)return this._invalidPoint=n.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this._geomGraph.computeSelfNodes(this._li,!0,!0);return t.hasProperIntersection()?(this._invalidPoint=t.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Ws}}),e(js.prototype,{buildIndex:function(){this._index=new Ci;for(var t=0;t<this._rings.size();t++){var e=this._rings.get(t),n=e.getEnvelopeInternal();this._index.insert(n,e)}},getNestedPoint:function(){return this._nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this._rings.size();t++)for(var e=this._rings.get(t),n=e.getCoordinates(),i=this._index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var s=i.get(r),o=s.getCoordinates();if(e!==s&&e.getEnvelopeInternal().intersects(s.getEnvelopeInternal())){var a=Zs.findPtNotNode(n,s,this._graph);if(null!==a)if(qe.isInRing(a,o))return this._nestedPt=a,!1}}return!0},add:function(t){this._rings.add(t),this._totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return js}}),e(Ks.prototype,{getErrorType:function(){return this._errorType},getMessage:function(){return Ks.errMsg[this._errorType]},getCoordinate:function(){return this._pt},toString:function(){var t="";return null!==this._pt&&(t=" at or near point "+this._pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Ks}}),Ks.ERROR=0,Ks.REPEATED_POINT=1,Ks.HOLE_OUTSIDE_SHELL=2,Ks.NESTED_HOLES=3,Ks.DISCONNECTED_INTERIOR=4,Ks.SELF_INTERSECTION=5,Ks.RING_SELF_INTERSECTION=6,Ks.NESTED_SHELLS=7,Ks.DUPLICATE_RINGS=8,Ks.TOO_FEW_POINTS=9,Ks.INVALID_COORDINATE=10,Ks.RING_NOT_CLOSED=11,Ks.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(Zs.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Zs.isValid(t[e]))return this._validErr=new Ks(Ks.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Vt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this._validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new js(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}n.isNonNested()||(this._validErr=new Ks(Ks.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Ws(t);if(!e.isNodeConsistentArea())return this._validErr=new Ks(Ks.SELF_INTERSECTION,e.getInvalidPoint()),null;e.hasDuplicateRings()&&(this._validErr=new Ks(Ks.DUPLICATE_RINGS,e.getInvalidPoint()))},isValid:function(){return this.checkValid(this._parentGeometry),null===this._validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),s=Zs.findPtNotNode(i,e,n);if(null!==s&&!qe.isInRing(s,r))return s;var o=Zs.findPtNotNode(r,t,n);return null!==o?qe.isInRing(o,i)?o:null:(x.shouldNeverReachHere("points in shell and hole appear to be equal"),null)},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this._validErr)return null}},checkConnectedInteriors:function(t){var e=new Xs(t);e.isInteriorsConnected()||(this._validErr=new Ks(Ks.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new yt,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this._validErr=new Ks(Ks.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new Ae(n),r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r),o=Zs.findPtNotNode(s.getCoordinates(),n,e);if(null===o)return null;if(de.EXTERIOR===i.locate(o))return this._validErr=new Ks(Ks.HOLE_OUTSIDE_SHELL,o),null}},checkTooFewPoints:function(t){if(t.hasTooFewPoints())return this._validErr=new Ks(Ks.TOO_FEW_POINTS,t.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this._parentGeometry),this._validErr},checkValid:function(){if(arguments[0]instanceof Gt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof zt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Yt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this._validErr)return null;if(this.checkClosedRing(n),null!==this._validErr)return null;var i=new ni(0,n);if(this.checkTooFewPoints(i),null!==this._validErr)return null;var r=new fe;i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof At){var s=arguments[0];if(this.checkInvalidCoordinates(s.getCoordinates()),null!==this._validErr)return null;i=new ni(0,s);this.checkTooFewPoints(i)}else if(arguments[0]instanceof Vt){var o=arguments[0];if(this.checkInvalidCoordinates(o),null!==this._validErr)return null;if(this.checkClosedRings(o),null!==this._validErr)return null;i=new ni(0,o);if(this.checkTooFewPoints(i),null!==this._validErr)return null;if(this.checkConsistentArea(i),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this._validErr))return null;if(this.checkHolesInShell(o,i),null!==this._validErr)return null;if(this.checkHolesNotNested(o,i),null!==this._validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof kt){for(var a=arguments[0],u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkInvalidCoordinates(l),null!==this._validErr)return null;if(this.checkClosedRings(l),null!==this._validErr)return null}i=new ni(0,a);if(this.checkTooFewPoints(i),null!==this._validErr)return null;if(this.checkConsistentArea(i),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this._validErr))return null;for(u=0;u<a.getNumGeometries();u++){l=a.getGeometryN(u);if(this.checkHolesInShell(l,i),null!==this._validErr)return null}for(u=0;u<a.getNumGeometries();u++){l=a.getGeometryN(u);if(this.checkHolesNotNested(l,i),null!==this._validErr)return null}if(this.checkShellsNotNested(a,i),null!==this._validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof Lt){var h=arguments[0];for(u=0;u<h.getNumGeometries();u++){var c=h.getGeometryN(u);if(this.checkValid(c),null!==this._validErr)return null}}else if(arguments[0]instanceof K){var f=arguments[0];if(this._validErr=null,f.isEmpty())return null;if(f instanceof Gt)this.checkValid(f);else if(f instanceof zt)this.checkValid(f);else if(f instanceof Yt)this.checkValid(f);else if(f instanceof At)this.checkValid(f);else if(f instanceof Vt)this.checkValid(f);else if(f instanceof kt)this.checkValid(f);else{if(!(f instanceof Lt))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f)}}},setSelfTouchingRingFormingHoleValid:function(t){this._isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),s=r.getCoordinates(),o=Zs.findPtNotNode(i,r,n);if(null===o)return null;if(!qe.isInRing(o,s))return null;if(e.getNumInteriorRing()<=0)return this._validErr=new Ks(Ks.NESTED_SHELLS,o),null;for(var a=null,u=0;u<e.getNumInteriorRing();u++){var l=e.getInteriorRingN(u);if(null===(a=this.checkShellInsideHole(t,l,n)))return null}this._validErr=new Ks(Ks.NESTED_SHELLS,a)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this._validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this._validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this._validErr=new Ks(Ks.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n).getExteriorRing(),r=0;r<t.getNumGeometries();r++)if(n!==r){var s=t.getGeometryN(r);if(this.checkShellNotNested(i,s,e),null!==this._validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Zs}}),Zs.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e).getEdgeIntersectionList(),r=0;r<t.length;r++){var s=t[r];if(!i.isIntersection(s))return s}return null},Zs.isValid=function(){if(arguments[0]instanceof K)return new Zs(arguments[0]).isValid();if(arguments[0]instanceof E){var t=arguments[0];return!s.isNaN(t.x)&&(!s.isInfinite(t.x)&&(!s.isNaN(t.y)&&!s.isInfinite(t.y)))}};var Qs=Object.freeze({IsValidOp:Zs,ConsistentAreaTester:Ws}),Js=Object.freeze({BoundaryOp:Rt,IsSimpleOp:$i,buffer:Or,distance:Gr,linemerge:Zr,overlay:_s,polygonize:Ns,relate:qs,union:Us,valid:Qs});function $s(){Ut.CoordinateOperation.apply(this),this._targetPM=null,this._removeCollapsed=!0;var t=arguments[0],e=arguments[1];this._targetPM=t,this._removeCollapsed=e}function to(){this._targetPM=null,this._removeCollapsed=!0,this._changePrecisionModel=!1,this._isPointwise=!1;var t=arguments[0];this._targetPM=t}v($s,Ut.CoordinateOperation),e($s.prototype,{edit:function(){if(2===arguments.length&&arguments[1]instanceof K&&arguments[0]instanceof Array){var t=arguments[0],e=arguments[1];if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new E(t[i]);this._targetPM.makePrecise(r),n[i]=r}var s=new b(n,!1).toCoordinateArray(),o=0;e instanceof At&&(o=2),e instanceof Yt&&(o=4);var a=n;return this._removeCollapsed&&(a=null),s.length<o?a:s}return Ut.CoordinateOperation.prototype.edit.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return $s}}),e(to.prototype,{fixPolygonalTopology:function(t){var e=t;this._changePrecisionModel||(e=this.changePM(t,this._targetPM));var n=Pr.bufferOp(e,0),i=n;return this._changePrecisionModel||(i=n.copy(),this.changePM(i,t.getPrecisionModel())),i},reducePointwise:function(t){var e=null;this._changePrecisionModel?e=new Ut(this.createFactory(t.getFactory(),this._targetPM)):e=new Ut;var n=this._removeCollapsed;return t.getDimension()>=2&&(n=!0),e.edit(t,new $s(this._targetPM,n))},changePM:function(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Ut.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this._removeCollapsed=t},createFactory:function(t,e){return new se(e,t.getSRID(),t.getCoordinateSequenceFactory())},setChangePrecisionModel:function(t){this._changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this._isPointwise?e:N(e,Bt)?Zs.isValid(e)?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this._isPointwise=t},createEditor:function(t,e){return t.getPrecisionModel()===e?new Ut:new Ut(this.createFactory(t,e))},interfaces_:function(){return[]},getClass:function(){return to}}),to.reduce=function(t,e){return new to(e).reduce(t)},to.reducePointwise=function(t,e){var n=new to(e);return n.setPointwise(!0),n.reduce(t)};var eo=Object.freeze({GeometryPrecisionReducer:to});function no(){this._pts=null,this._usePt=null,this._distanceTolerance=null,this._seg=new ge;var t=arguments[0];this._pts=t}function io(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;var t=arguments[0];this._inputGeom=t}function ro(){In.apply(this),this._isEnsureValidTopology=!0,this._distanceTolerance=null;var t=arguments[0],e=arguments[1];this._isEnsureValidTopology=t,this._distanceTolerance=e}function so(){if(this._parent=null,this._index=null,2===arguments.length){var t=arguments[0],e=arguments[1];so.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];ge.call(this,n,i),this._parent=r,this._index=s}}function oo(){if(this._parentLine=null,this._segs=null,this._resultSegs=new P,this._minimumSize=null,1===arguments.length){var t=arguments[0];oo.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._parentLine=e,this._minimumSize=n,this.init()}}function ao(){this._index=new di}function uo(){this._querySeg=null,this._items=new P;var t=arguments[0];this._querySeg=t}function lo(){this._li=new fe,this._inputIndex=new ao,this._outputIndex=new ao,this._line=null,this._linePts=null,this._distanceTolerance=0;var t=arguments[0],e=arguments[1];this._inputIndex=t,this._outputIndex=e}function ho(){this._inputIndex=new ao,this._outputIndex=new ao,this._distanceTolerance=0}function co(){this._inputGeom=null,this._lineSimplifier=new ho,this._linestringMap=null;var t=arguments[0];this._inputGeom=t}function fo(){In.apply(this),this._linestringMap=null;var t=arguments[0];this._linestringMap=t}function go(){this.tps=null;var t=arguments[0];this.tps=t}e(no.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this._seg.p0=this._pts[t],this._seg.p1=this._pts[e];for(var n=-1,i=t,r=t+1;r<e;r++){var s=this._seg.distance(this._pts[r]);s>n&&(n=s,i=r)}if(n<=this._distanceTolerance)for(r=t+1;r<e;r++)this._usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this._distanceTolerance=t},simplify:function(){this._usePt=new Array(this._pts.length).fill(null);for(var t=0;t<this._pts.length;t++)this._usePt[t]=!0;this.simplifySection(0,this._pts.length-1);var e=new b;for(t=0;t<this._pts.length;t++)this._usePt[t]&&e.add(new E(this._pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return no}}),no.simplify=function(t,e){var n=new no(t);return n.setDistanceTolerance(e),n.simplify()},e(io.prototype,{setEnsureValid:function(t){this._isEnsureValidTopology=t},getResultGeometry:function(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new ro(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new i("Tolerance must be non-negative");this._distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return io}}),io.simplify=function(t,e){var n=new io(t);return n.setDistanceTolerance(e),n.getResultGeometry()},v(ro,In),e(ro.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=In.prototype.transformPolygon.call(this,t,e);return e instanceof kt?n:this.createValidArea(n)},createValidArea:function(t){return this._isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=null;return i=0===n.length?new Array(0).fill(null):no.simplify(n,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(i)},transformMultiPolygon:function(t,e){var n=In.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Vt,i=In.prototype.transformLinearRing.call(this,t,e);return!n||i instanceof Yt?i:null},interfaces_:function(){return[]},getClass:function(){return ro}}),io.DPTransformer=ro,v(so,ge),e(so.prototype,{getIndex:function(){return this._index},getParent:function(){return this._parent},interfaces_:function(){return[]},getClass:function(){return so}}),e(oo.prototype,{addToResult:function(t){this._resultSegs.add(t)},asLineString:function(){return this._parentLine.getFactory().createLineString(oo.extractCoordinates(this._resultSegs))},getResultSize:function(){var t=this._resultSegs.size();return 0===t?0:t+1},getParent:function(){return this._parentLine},getSegment:function(t){return this._segs[t]},getParentCoordinates:function(){return this._parentLine.getCoordinates()},getMinimumSize:function(){return this._minimumSize},asLinearRing:function(){return this._parentLine.getFactory().createLinearRing(oo.extractCoordinates(this._resultSegs))},getSegments:function(){return this._segs},init:function(){var t=this._parentLine.getCoordinates();this._segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new so(t[e],t[e+1],this._parentLine,e);this._segs[e]=n}},getResultCoordinates:function(){return oo.extractCoordinates(this._resultSegs)},interfaces_:function(){return[]},getClass:function(){return oo}}),oo.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},e(ao.prototype,{remove:function(t){this._index.remove(new M(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof oo)for(var t=arguments[0].getSegments(),e=0;e<t.length;e++){var n=t[e];this.add(n)}else if(arguments[0]instanceof ge){var i=arguments[0];this._index.insert(new M(i.p0,i.p1),i)}},query:function(t){var e=new M(t.p0,t.p1),n=new uo(t);return this._index.query(e,n),n.getItems()},interfaces_:function(){return[]},getClass:function(){return ao}}),e(uo.prototype,{visitItem:function(t){var e=t;M.intersects(e.p0,e.p1,this._querySeg.p0,this._querySeg.p1)&&this._items.add(t)},getItems:function(){return this._items},interfaces_:function(){return[Ce]},getClass:function(){return uo}}),e(lo.prototype,{flatten:function(t,e){var n=new ge(this._linePts[t],this._linePts[e]);return this.remove(this._line,t,e),this._outputIndex.add(n),n},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this._distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this._line.getSegment(t);return this._line.addToResult(r),null}var s=!0;this._line.getResultSize()<this._line.getMinimumSize()&&(n+1<this._line.getMinimumSize()&&(s=!1));var o=new Array(1).fill(null),a=this.findFurthestPoint(this._linePts,t,e,o);o[0]>this._distanceTolerance&&(s=!1);var u=new ge;if(u.p0=this._linePts[t],u.p1=this._linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this._line,i,u)&&(s=!1),s){r=this.flatten(t,e);return this._line.addToResult(r),null}this.simplifySection(t,a,n),this.simplifySection(a,e,n)},hasBadOutputIntersection:function(t){for(var e=this._outputIndex.query(t).iterator();e.hasNext();){var n=e.next();if(this.hasInteriorIntersection(n,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new ge;r.p0=t[e],r.p1=t[n];for(var s=-1,o=e,a=e+1;a<n;a++){var u=t[a],l=r.distance(u);l>s&&(s=l,o=a)}return i[0]=s,o},simplify:function(t){this._line=t,this._linePts=t.getParentCoordinates(),this.simplifySection(0,this._linePts.length-1,0)},remove:function(t,e,n){for(var i=e;i<n;i++){var r=t.getSegment(i);this._inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this._li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this._li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this._inputIndex.query(n).iterator();i.hasNext();){var r=i.next();if(this.hasInteriorIntersection(r,n)){if(lo.isInLineSection(t,e,r))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return lo}}),lo.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]},e(ho.prototype,{setDistanceTolerance:function(t){this._distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this._inputIndex.add(e.next());for(e=t.iterator();e.hasNext();){var n=new lo(this._inputIndex,this._outputIndex);n.setDistanceTolerance(this._distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return ho}}),e(co.prototype,{getResultGeometry:function(){return this._inputGeom.isEmpty()?this._inputGeom.copy():(this._linestringMap=new ne,this._inputGeom.apply(new go(this)),this._lineSimplifier.simplify(this._linestringMap.values()),new fo(this._linestringMap).transform(this._inputGeom))},setDistanceTolerance:function(t){if(t<0)throw new i("Tolerance must be non-negative");this._lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return co}}),co.simplify=function(t,e){var n=new co(t);return n.setDistanceTolerance(e),n.getResultGeometry()},v(fo,In),e(fo.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof At){var n=this._linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return In.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return fo}}),e(go.prototype,{filter:function(t){if(t instanceof At){var e=t;if(e.isEmpty())return null;var n=new oo(e,e.isClosed()?4:2);this.tps._linestringMap.put(e,n)}},interfaces_:function(){return[j]},getClass:function(){return go}}),co.LineStringTransformer=fo,co.LineStringMapBuilderFilter=go;var _o=Object.freeze({DouglasPeuckerSimplifier:io,TopologyPreservingSimplifier:co});function po(){this._seg=null,this._segLen=null,this._splitPt=null,this._minimumLen=0;var t=arguments[0];this._seg=t,this._segLen=t.getLength()}function mo(){}function vo(){}function yo(){}function xo(){if(this._p=null,1===arguments.length){var t=arguments[0];this._p=new E(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._p=new E(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this._p=new E(i,r,s)}}function Eo(){this._isOnConstraint=null,this._constraint=null;var t=arguments[0];xo.call(this,t)}function Io(){this._rot=null,this._vertex=null,this._next=null,this._data=null}function No(){this._subdiv=null,this._isUsingTolerance=!1;var t=arguments[0];this._subdiv=t,this._isUsingTolerance=t.getTolerance()>0}function Co(){}function So(){this._subdiv=null,this._lastEdge=null;var t=arguments[0];this._subdiv=t,this.init()}function Lo(){if(this._seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];m.call(this,t)}else if(arguments[0]instanceof ge){var e=arguments[0];m.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this._seg=new ge(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];m.call(this,Lo.msgWithSpatial(n,i)),this._seg=new ge(i)}}function wo(){}function Ro(){this._visitedKey=0,this._quadEdges=new P,this._startingEdge=null,this._tolerance=null,this._edgeCoincidenceTolerance=null,this._frameVertex=new Array(3).fill(null),this._frameEnv=null,this._locator=null,this._seg=new ge,this._triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this._tolerance=e,this._edgeCoincidenceTolerance=e/Ro.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this._startingEdge=this.initSubdiv(),this._locator=new So(this)}function To(){}function Po(){this._triList=new P}function Oo(){this._triList=new P}function bo(){this._coordList=new b,this._triCoords=new P}function Mo(){if(this._ls=null,this._data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this._ls=new ge(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._ls=new ge(n,i),this._data=r}else if(6===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2],u=arguments[3],l=arguments[4],h=arguments[5];Mo.call(this,new E(s,o,a),new E(u,l,h))}else if(7===arguments.length){var c=arguments[0],f=arguments[1],g=arguments[2],d=arguments[3],_=arguments[4],p=arguments[5],m=arguments[6];Mo.call(this,new E(c,f,g),new E(d,_,p),m)}}function Do(){this._initialVertices=null,this._segVertices=null,this._segments=new P,this._subdiv=null,this._incDel=null,this._convexHull=null,this._splitFinder=new vo,this._kdt=null,this._vertexFactory=null,this._computeAreaEnv=null,this._splitPt=null,this._tolerance=null;var t=arguments[0],e=arguments[1];this._initialVertices=new P(t),this._tolerance=e,this._kdt=new oi(e)}function Ao(){this._siteCoords=null,this._tolerance=0,this._subdiv=null}function Fo(){this._siteCoords=null,this._constraintLines=null,this._tolerance=0,this._subdiv=null,this._constraintVertexMap=new pt}function Go(){this._siteCoords=null,this._tolerance=0,this._subdiv=null,this._clipEnv=null,this._diagramEnv=null}e(po.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this._minimumLen/this._segLen;if(t.distance(this._seg.p0)<this._minimumLen)return this._splitPt=this._seg.pointAlong(e),null;if(t.distance(this._seg.p1)<this._minimumLen)return this._splitPt=po.pointAlongReverse(this._seg,e),null;this._splitPt=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.getConstrainedLength(n)/this._segLen;i.equals2D(this._seg.p0)?this._splitPt=this._seg.pointAlong(r):this._splitPt=po.pointAlongReverse(this._seg,r)}},setMinimumLength:function(t){this._minimumLen=t},getConstrainedLength:function(t){return t<this._minimumLen?this._minimumLen:t},getSplitPoint:function(){return this._splitPt},interfaces_:function(){return[]},getClass:function(){return po}}),po.pointAlongReverse=function(t,e){var n=new E;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(mo.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return mo}}),e(vo.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength()/2,r=new po(n),s=vo.projectedSplitPoint(t,e),o=2*s.distance(e)*.8;return o>i&&(o=i),r.setMinimumLength(o),r.splitAt(s),r.getSplitPoint()},interfaces_:function(){return[mo]},getClass:function(){return vo}}),vo.projectedSplitPoint=function(t,e){return t.getLineSegment().project(e)},e(yo.prototype,{interfaces_:function(){return[]},getClass:function(){return yo}}),yo.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},yo.isInCircleDDNormalized=function(t,e,n,i){var r=B.valueOf(t.x).selfSubtract(i.x),s=B.valueOf(t.y).selfSubtract(i.y),o=B.valueOf(e.x).selfSubtract(i.x),a=B.valueOf(e.y).selfSubtract(i.y),u=B.valueOf(n.x).selfSubtract(i.x),l=B.valueOf(n.y).selfSubtract(i.y),h=r.multiply(a).selfSubtract(o.multiply(s)),c=o.multiply(l).selfSubtract(u.multiply(a)),f=u.multiply(s).selfSubtract(r.multiply(l)),g=r.multiply(r).selfAdd(s.multiply(s)),d=o.multiply(o).selfAdd(a.multiply(a)),_=u.multiply(u).selfAdd(l.multiply(l));return g.selfMultiply(c).selfAdd(d.selfMultiply(f)).selfAdd(_.selfMultiply(h)).doubleValue()>0},yo.checkRobustInCircle=function(t,e,n,i){var r=yo.isInCircleNonRobust(t,e,n,i),s=yo.isInCircleDDSlow(t,e,n,i),o=yo.isInCircleCC(t,e,n,i),a=me.circumcentre(t,e,n);Y.out.println("p radius diff a = "+Math.abs(i.distance(a)-t.distance(a))/t.distance(a)),r===s&&r===o||(Y.out.println("inCircle robustness failure (double result = "+r+", DD result = "+s+", CC result = "+o+")"),Y.out.println(he.toLineString(new Kt([t,e,n,i]))),Y.out.println("Circumcentre = "+he.toPoint(a)+" radius = "+t.distance(a)),Y.out.println("p radius diff a = "+Math.abs(i.distance(a)/t.distance(a)-1)),Y.out.println("p radius diff b = "+Math.abs(i.distance(a)/e.distance(a)-1)),Y.out.println("p radius diff c = "+Math.abs(i.distance(a)/n.distance(a)-1)),Y.out.println())},yo.isInCircleDDFast=function(t,e,n,i){var r=B.sqr(t.x).selfAdd(B.sqr(t.y)).selfMultiply(yo.triAreaDDFast(e,n,i)),s=B.sqr(e.x).selfAdd(B.sqr(e.y)).selfMultiply(yo.triAreaDDFast(t,n,i)),o=B.sqr(n.x).selfAdd(B.sqr(n.y)).selfMultiply(yo.triAreaDDFast(t,e,i)),a=B.sqr(i.x).selfAdd(B.sqr(i.y)).selfMultiply(yo.triAreaDDFast(t,e,n));return r.selfSubtract(s).selfAdd(o).selfSubtract(a).doubleValue()>0},yo.isInCircleCC=function(t,e,n,i){var r=me.circumcentre(t,e,n),s=t.distance(r);return i.distance(r)-s<=0},yo.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,s=t.y-i.y,o=e.x-i.x,a=e.y-i.y,u=n.x-i.x,l=n.y-i.y;return(r*r+s*s)*(o*l-u*a)+(o*o+a*a)*(u*s-r*l)+(u*u+l*l)*(r*a-o*s)>0},yo.isInCircleDDSlow=function(t,e,n,i){var r=B.valueOf(i.x),s=B.valueOf(i.y),o=B.valueOf(t.x),a=B.valueOf(t.y),u=B.valueOf(e.x),l=B.valueOf(e.y),h=B.valueOf(n.x),c=B.valueOf(n.y),f=o.multiply(o).add(a.multiply(a)).multiply(yo.triAreaDDSlow(u,l,h,c,r,s)),g=u.multiply(u).add(l.multiply(l)).multiply(yo.triAreaDDSlow(o,a,h,c,r,s)),d=h.multiply(h).add(c.multiply(c)).multiply(yo.triAreaDDSlow(o,a,u,l,r,s)),_=r.multiply(r).add(s.multiply(s)).multiply(yo.triAreaDDSlow(o,a,u,l,h,c));return f.subtract(g).add(d).subtract(_).doubleValue()>0},yo.isInCircleNonRobust=function(t,e,n,i){return(t.x*t.x+t.y*t.y)*yo.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*yo.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*yo.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*yo.triArea(t,e,n)>0},yo.isInCircleRobust=function(t,e,n,i){return yo.isInCircleNormalized(t,e,n,i)},yo.triAreaDDSlow=function(t,e,n,i,r,s){return n.subtract(t).multiply(s.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},yo.triAreaDDFast=function(t,e,n){var i=B.valueOf(e.x).selfSubtract(t.x).selfMultiply(B.valueOf(n.y).selfSubtract(t.y)),r=B.valueOf(e.y).selfSubtract(t.y).selfMultiply(B.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)},e(xo.prototype,{circleCenter:function(t,e){var n=new xo(this.getX(),this.getY()),i=new k(this.bisector(n,t),this.bisector(t,e)),r=null;try{r=new xo(i.getX(),i.getY())}catch(i){if(!(i instanceof A))throw i;Y.err.println("a: "+n+"  b: "+t+"  c: "+e),Y.err.println(i)}return r},dot:function(t){return this._p.x*t.getX()+this._p.y*t.getY()},magn:function(){return Math.sqrt(this._p.x*this._p.x+this._p.y*this._p.y)},getZ:function(){return this._p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY();return new k(new k(t.getX()+n/2,t.getY()+i/2,1),new k(t.getX()-i+n/2,t.getY()+n+i/2,1))},equals:function(){if(1===arguments.length){var t=arguments[0];return this._p.x===t.getX()&&this._p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this._p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this._p},isInCircle:function(t,e,n){return yo.isInCircleRobust(t._p,e._p,n._p,this._p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),s=e.getX()-i,o=n.getX()-i,a=e.getY()-r,u=n.getY()-r,l=s*u-o*a,h=this.getX()-i,c=this.getY()-r,f=(u*h-o*c)/l,g=(-a*h+s*c)/l;return t.getZ()+f*(e.getZ()-t.getZ())+g*(n.getZ()-t.getZ())},midPoint:function(t){return new xo((this._p.x+t.getX())/2,(this._p.y+t.getY())/2,(this._p.z+t.getZ())/2)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t._p.x-this._p.x)*(e._p.y-this._p.y)-(t._p.y-this._p.y)*(e._p.x-this._p.x)>0},getX:function(){return this._p.x},crossProduct:function(t){return this._p.x*t.getY()-this._p.y*t.getX()},setZ:function(t){this._p.z=t},times:function(t){return new xo(t*this._p.x,t*this._p.y)},cross:function(){return new xo(this._p.y,-this._p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this._p.x+" "+this._p.y+")"},sub:function(t){return new xo(this._p.x-t.getX(),this._p.y-t.getY())},getY:function(){return this._p.y},classify:function(t,e){var n=e.sub(t),i=this.sub(t),r=n.crossProduct(i);return r>0?xo.LEFT:r<0?xo.RIGHT:n.getX()*i.getX()<0||n.getY()*i.getY()<0?xo.BEHIND:n.magn()<i.magn()?xo.BEYOND:t.equals(this)?xo.ORIGIN:e.equals(this)?xo.DESTINATION:xo.BETWEEN},sum:function(t){return new xo(this._p.x+t.getX(),this._p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),s=this.distance(t,e);return s<r&&(r=s),(s=this.distance(e,this))<r&&(r=s),i/r},interfaces_:function(){return[]},getClass:function(){return xo}}),xo.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),s=n.z-e.z;return e.z+s*(r/i)}if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3],h=a.x,c=a.y,f=u.x-h,g=l.x-h,d=u.y-c,_=l.y-c,p=f*_-g*d,m=o.x-h,v=o.y-c,y=(_*m-g*v)/p,x=(-d*m+f*v)/p;return a.z+y*(u.z-a.z)+x*(l.z-a.z)}},xo.LEFT=0,xo.RIGHT=1,xo.BEYOND=2,xo.BEHIND=3,xo.BETWEEN=4,xo.ORIGIN=5,xo.DESTINATION=6,v(Eo,xo),e(Eo.prototype,{getConstraint:function(){return this._constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this._constraint=t._constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this._constraint=t},interfaces_:function(){return[]},getClass:function(){return Eo}}),e(Io.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new ge(this._vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this._next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this._next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot._next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this._vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this._data=t},getData:function(){return this._data},delete:function(){this._rot=null},orig:function(){return this._vertex},rNext:function(){return this._rot._next.invRot()},toString:function(){var t=this._vertex.getCoordinate(),e=this.dest().getCoordinate();return he.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this._next=t},interfaces_:function(){return[]},getClass:function(){return Io}}),Io.makeEdge=function(t,e){var n=new Io,i=new Io,r=new Io,s=new Io;n._rot=i,i._rot=r,r._rot=s,s._rot=n,n.setNext(n),i.setNext(s),r.setNext(r),s.setNext(i);var o=n;return o.setOrig(t),o.setDest(e),o},Io.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();Io.splice(t,e),Io.splice(t.sym(),n),Io.splice(t,e.lNext()),Io.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},Io.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),s=t.oNext(),o=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(s),n.setNext(o),i.setNext(a)},Io.connect=function(t,e){var n=Io.makeEdge(t.dest(),e.orig());return Io.splice(n,t.lNext()),Io.splice(n.sym(),e),n},e(No.prototype,{insertSite:function(t){var e=this._subdiv.locate(t);if(this._subdiv.isVertexOfEdge(e,t))return e;this._subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this._subdiv.delete(e.oNext()));var n=this._subdiv.makeEdge(e.orig(),t);Io.splice(n,e);var i=n;do{e=(n=this._subdiv.connect(e,n.sym())).oPrev()}while(e.lNext()!==i);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))Io.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return No}}),e(Co.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Co}}),e(So.prototype,{init:function(){this._lastEdge=this.findEdge()},locate:function(t){this._lastEdge.isLive()||this.init();var e=this._subdiv.locateFromEdge(t,this._lastEdge);return this._lastEdge=e,e},findEdge:function(){return this._subdiv.getEdges().iterator().next()},interfaces_:function(){return[Co]},getClass:function(){return So}}),v(Lo,m),e(Lo.prototype,{getSegment:function(){return this._seg},interfaces_:function(){return[]},getClass:function(){return Lo}}),Lo.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(wo.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return wo}}),e(Ro.prototype,{getTriangleVertices:function(t){var e=new Oo;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this._frameVertex[0])||(!!t.equals(this._frameVertex[1])||!!t.equals(this._frameVertex[2]))},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this._tolerance)&&!e.equals(t.dest(),this._tolerance))},connect:function(t,e){var n=Io.connect(t,e);return this._quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new P,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var s=new b;s.addAll(n,!1),s.closeRing(),s.size()<4&&(Y.out.println(s),s.add(s.get(s.size()-1),!0));var o=s.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(o)),u=i.orig();return a.setUserData(u.getCoordinate()),a},setLocator:function(t){this._locator=t},initSubdiv:function(){var t=this.makeEdge(this._frameVertex[0],this._frameVertex[1]),e=this.makeEdge(this._frameVertex[1],this._frameVertex[2]);Io.splice(t.sym(),e);var n=this.makeEdge(this._frameVertex[2],this._frameVertex[0]);return Io.splice(e.sym(),n),Io.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Ro.getTriangleEdges(t,e);var n=new Array(3).fill(null);Ro.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var n=Io.makeEdge(t,e);return this._quadEdges.add(n),n},visitTriangles:function(t,e){this._visitedKey++;var n=new je;n.push(this._startingEdge);for(var i=new ut;!n.empty();){var r=n.pop();if(!i.contains(r)){var s=this.fetchTriangleToVisit(r,n,e,i);null!==s&&t.visit(s)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){return this._seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this._seg.distance(e)<this._edgeCoincidenceTolerance},getEnvelope:function(){return new M(this._frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),i=0;i=e>n?10*e:10*n,this._frameVertex[0]=new xo((t.getMaxX()+t.getMinX())/2,t.getMaxY()+i),this._frameVertex[1]=new xo(t.getMinX()-i,t.getMinY()-i),this._frameVertex[2]=new xo(t.getMaxX()+i,t.getMinY()-i),this._frameEnv=new M(this._frameVertex[0].getCoordinate(),this._frameVertex[1].getCoordinate()),this._frameEnv.expandToInclude(this._frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new bo;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new ut,n=this._quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var s=i.dest();!t&&this.isFrameVertex(s)||e.add(s)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,s=0,o=!1;do{this._triEdges[s]=r,this.isFrameEdge(r)&&(o=!0);var a=r.sym();i.contains(a)||e.push(a),i.add(r),s++,r=r.lNext()}while(r!==t);return o&&!n?null:this._triEdges},getEdges:function(){if(0===arguments.length)return this._quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createLineString([s.orig().getCoordinate(),s.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new P,n=new ut,i=this._quadEdges.iterator();i.hasNext();){var r=i.next(),s=r.orig();n.contains(s)||(n.add(s),!t&&this.isFrameVertex(s)||e.add(r));var o=r.sym(),a=o.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(o))}return e},getTriangleEdges:function(t){var e=new Po;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this._visitedKey++;var e=new P,n=new je;n.push(this._startingEdge);for(var i=new ut;!n.empty();){var r=n.pop();if(!i.contains(r)){var s=r.getPrimary();!t&&this.isFrameEdge(s)||e.add(s),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e},delete:function(t){Io.splice(t,t.oPrev()),Io.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this._quadEdges.remove(t),this._quadEdges.remove(e),this._quadEdges.remove(n),this._quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this._quadEdges.size(),r=e;;){if(++n>i)throw new Lo(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this._tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new To,!0);for(var e=new P,n=this.getVertexUniqueEdges(!1).iterator();n.hasNext();){var i=n.next();e.add(this.getVoronoiCellPolygon(i,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(se.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createPolygon(t.createLinearRing(s))}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this._tolerance)||t.equals(e.dest(),this._tolerance))return e;var n=this.makeEdge(e.orig(),t);Io.splice(n,e);var i=n;do{e=(n=this.connect(e,n.sym())).oPrev()}while(e.lNext()!==i);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof xo){var t=arguments[0];return this._locator.locate(t)}if(arguments[0]instanceof E){var e=arguments[0];return this._locator.locate(new xo(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this._locator.locate(new xo(n));if(null===r)return null;var s=r;r.dest().getCoordinate().equals2D(n)&&(s=r.sym());var o=s;do{if(o.dest().getCoordinate().equals2D(i))return o;o=o.oNext()}while(o!==s);return null}},interfaces_:function(){return[]},getClass:function(){return Ro}}),Ro.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new i("Edges do not form a triangle")},e(To.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=new xo(me.circumcentre(e,n,i)),s=0;s<3;s++)t[s].rot().setOrig(r)},interfaces_:function(){return[wo]},getClass:function(){return To}}),e(Po.prototype,{getTriangleEdges:function(){return this._triList},visit:function(t){this._triList.add(t)},interfaces_:function(){return[wo]},getClass:function(){return Po}}),e(Oo.prototype,{visit:function(t){this._triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this._triList},interfaces_:function(){return[wo]},getClass:function(){return Oo}}),e(bo.prototype,{checkTriangleSize:function(t){t.length>=2?he.toLineString(t[0],t[1]):t.length>=1&&he.toPoint(t[0])},visit:function(t){this._coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this._coordList.add(n.getCoordinate())}if(this._coordList.size()>0){this._coordList.closeRing();var i=this._coordList.toCoordinateArray();if(4!==i.length)return null;this._triCoords.add(i)}},getTriangles:function(){return this._triCoords},interfaces_:function(){return[wo]},getClass:function(){return bo}}),Ro.TriangleCircumcentreVisitor=To,Ro.TriangleEdgesListVisitor=Po,Ro.TriangleVertexListVisitor=Oo,Ro.TriangleCoordinatesVisitor=bo,Ro.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(Mo.prototype,{getLineSegment:function(){return this._ls},getEndZ:function(){return this._ls.getCoordinate(1).z},getStartZ:function(){return this._ls.getCoordinate(0).z},intersection:function(t){return this._ls.intersection(t.getLineSegment())},getStart:function(){return this._ls.getCoordinate(0)},getEnd:function(){return this._ls.getCoordinate(1)},getEndY:function(){return this._ls.getCoordinate(1).y},getStartX:function(){return this._ls.getCoordinate(0).x},equalsTopo:function(t){return this._ls.equalsTopo(t.getLineSegment())},getStartY:function(){return this._ls.getCoordinate(0).y},setData:function(t){this._data=t},getData:function(){return this._data},getEndX:function(){return this._ls.getCoordinate(1).x},toString:function(){return this._ls.toString()},interfaces_:function(){return[]},getClass:function(){return Mo}}),e(Do.prototype,{getInitialVertices:function(){return this._initialVertices},getKDT:function(){return this._kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do{e=this.enforceGabriel(this._segments),t++}while(e>0&&t<Do.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this._vertexFactory},getPointArray:function(){for(var t=new Array(this._initialVertices.size()+this._segVertices.size()).fill(null),e=0,n=this._initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this._segVertices.iterator();r.hasNext();){i=r.next();t[e++]=i.getCoordinate()}return t},setConstraints:function(t,e){this._segments=t,this._segVertices=e},computeConvexHull:function(){var t=new se,e=new Ze(this.getPointArray(),t);this._convexHull=e.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this._segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),i=new E((e.x+n.x)/2,(e.y+n.y)/2),r=e.distance(i),o=new M(i);o.expandBy(r);for(var a=this._kdt.query(o),u=null,l=s.MAX_VALUE,h=a.iterator();h.hasNext();){var c=h.next().getCoordinate();if(!c.equals2D(e)&&!c.equals2D(n)){var f=i.distance(c);if(f<r){(null===u||f<l)&&(u=c,l=f)}}}return u},getConstraintSegments:function(){return this._segments},setSplitPointFinder:function(t){this._splitFinder=t},getConvexHull:function(){return this._convexHull},getTolerance:function(){return this._tolerance},enforceGabriel:function(t){for(var e=new P,n=0,i=new P,r=t.iterator();r.hasNext();){var s=r.next(),o=this.findNonGabrielPoint(s);if(null!==o){this._splitPt=this._splitFinder.findSplitPoint(s,o);var a=this.createVertex(this._splitPt,s);this.insertSite(a).getCoordinate().equals2D(this._splitPt);var u=new Mo(s.getStartX(),s.getStartY(),s.getStartZ(),a.getX(),a.getY(),a.getZ(),s.getData()),l=new Mo(a.getX(),a.getY(),a.getZ(),s.getEndX(),s.getEndY(),s.getEndZ(),s.getData());e.add(u),e.add(l),i.add(s),n+=1}}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return e=null!==this._vertexFactory?this._vertexFactory.createVertex(t,null):new Eo(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];e=null;return(e=null!==this._vertexFactory?this._vertexFactory.createVertex(n,i):new Eo(n)).setOnConstraint(!0),e}},getSubdivision:function(){return this._subdiv},computeBoundingBox:function(){var t=Do.computeVertexEnvelope(this._initialVertices),e=Do.computeVertexEnvelope(this._segVertices),n=new M(t);n.expandToInclude(e);var i=.2*n.getWidth(),r=.2*n.getHeight(),s=Math.max(i,r);this._computeAreaEnv=new M(n),this._computeAreaEnv.expandBy(s)},setVertexFactory:function(t){this._vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this._subdiv=new Ro(this._computeAreaEnv,this._tolerance),this._subdiv.setLocator(new So(this._subdiv)),this._incDel=new No(this._subdiv),this.insertSites(this._initialVertices)},insertSite:function(){if(arguments[0]instanceof Eo){var t=arguments[0],e=this._kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this._incDel.insertSite(t),t}if(arguments[0]instanceof E){var i=arguments[0];this.insertSite(this.createVertex(i))}},interfaces_:function(){return[]},getClass:function(){return Do}}),Do.computeVertexEnvelope=function(t){for(var e=new M,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},Do.MAX_SPLIT_ITER=99,e(Ao.prototype,{create:function(){if(null!==this._subdiv)return null;var t=Ao.envelope(this._siteCoords),e=Ao.toVertices(this._siteCoords);this._subdiv=new Ro(t,this._tolerance),new No(this._subdiv).insertSites(e)},setTolerance:function(t){this._tolerance=t},setSites:function(){if(arguments[0]instanceof K){var t=arguments[0];this._siteCoords=Ao.extractUniqueCoordinates(t)}else if(N(arguments[0],S)){var e=arguments[0];this._siteCoords=Ao.unique(nt.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this._subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this._subdiv},getTriangles:function(t){return this.create(),this._subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Ao}}),Ao.extractUniqueCoordinates=function(t){if(null===t)return new b;var e=t.getCoordinates();return Ao.unique(e)},Ao.envelope=function(t){for(var e=new M,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},Ao.unique=function(t){var e=nt.copyDeep(t);return It.sort(e),new b(e,!1)},Ao.toVertices=function(t){for(var e=new P,n=t.iterator();n.hasNext();){var i=n.next();e.add(new xo(i))}return e},e(Fo.prototype,{createSiteVertices:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var i=n.next();this._constraintVertexMap.containsKey(i)||e.add(new Eo(i))}return e},create:function(){if(null!==this._subdiv)return null;var t=Ao.envelope(this._siteCoords),e=new P;null!==this._constraintLines&&(t.expandToInclude(this._constraintLines.getEnvelopeInternal()),this.createVertices(this._constraintLines),e=Fo.createConstraintSegments(this._constraintLines));var n=new Do(this.createSiteVertices(this._siteCoords),this._tolerance);n.setConstraints(e,new P(this._constraintVertexMap.values())),n.formInitialDelaunay(),n.enforceConstraints(),this._subdiv=n.getSubdivision()},setTolerance:function(t){this._tolerance=t},setConstraints:function(t){this._constraintLines=t},setSites:function(t){this._siteCoords=Ao.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this._subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this._subdiv},getTriangles:function(t){return this.create(),this._subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new Eo(e[n]);this._constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return Fo}}),Fo.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=be.getLines(t),n=new P,i=e.iterator();i.hasNext();){var r=i.next();Fo.createConstraintSegments(r,n)}return n}if(2===arguments.length){var s=arguments[0],o=arguments[1],a=s.getCoordinates();for(i=1;i<a.length;i++)o.add(new Mo(a[i-1],a[i]))}},e(Go.prototype,{create:function(){if(null!==this._subdiv)return null;var t=Ao.envelope(this._siteCoords);this._diagramEnv=t;var e=Math.max(this._diagramEnv.getWidth(),this._diagramEnv.getHeight());this._diagramEnv.expandBy(e),null!==this._clipEnv&&this._diagramEnv.expandToInclude(this._clipEnv);var n=Ao.toVertices(this._siteCoords);this._subdiv=new Ro(t,this._tolerance),new No(this._subdiv).insertSites(n)},getDiagram:function(t){this.create();var e=this._subdiv.getVoronoiDiagram(t);return Go.clipGeometryCollection(e,this._diagramEnv)},setTolerance:function(t){this._tolerance=t},setSites:function(){if(arguments[0]instanceof K){var t=arguments[0];this._siteCoords=Ao.extractUniqueCoordinates(t)}else if(N(arguments[0],S)){var e=arguments[0];this._siteCoords=Ao.unique(nt.toCoordinateArray(e))}},setClipEnvelope:function(t){this._clipEnv=t},getSubdivision:function(){return this.create(),this._subdiv},interfaces_:function(){return[]},getClass:function(){return Go}}),Go.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new P,r=0;r<t.getNumGeometries();r++){var s=t.getGeometryN(r),o=null;e.contains(s.getEnvelopeInternal())?o=s:e.intersects(s.getEnvelopeInternal())&&(o=n.intersection(s)).setUserData(s.getUserData()),null===o||o.isEmpty()||i.add(o)}return t.getFactory().createGeometryCollection(se.toGeometryArray(i))};var qo=Object.freeze({Vertex:xo}),Bo=Object.freeze({ConformingDelaunayTriangulationBuilder:Fo,DelaunayTriangulationBuilder:Ao,VoronoiDiagramBuilder:Go,quadedge:qo});function Vo(){if(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._componentIndex=t._componentIndex,this._segmentIndex=t._segmentIndex,this._segmentFraction=t._segmentFraction}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Vo.call(this,0,e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this._componentIndex=i,this._segmentIndex=r,this._segmentFraction=s,this.normalize()}else if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3];this._componentIndex=o,this._segmentIndex=a,this._segmentFraction=u,l&&this.normalize()}}function zo(){if(this._linearGeom=null,this._numLines=null,this._currentLine=null,this._componentIndex=0,this._vertexIndex=0,1===arguments.length){var t=arguments[0];zo.call(this,t,0,0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];zo.call(this,e,n.getComponentIndex(),zo.segmentEndVertexIndex(n))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];if(!N(r,mt))throw new i("Lineal geometry is required");this._linearGeom=r,this._numLines=r.getNumGeometries(),this._componentIndex=s,this._vertexIndex=o,this.loadCurrentLine()}}function Yo(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t}function ko(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t}function Uo(){this._geomFact=null,this._lines=new P,this._coordList=null,this._ignoreInvalidLines=!1,this._fixInvalidLines=!1,this._lastPt=null;var t=arguments[0];this._geomFact=t}function Xo(){this._line=null;var t=arguments[0];this._line=t}function Ho(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t,this.checkGeometryType()}function Wo(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t}function jo(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t}function Ko(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t}e(Vo.prototype,{getSegmentIndex:function(){return this._segmentIndex},getComponentIndex:function(){return this._componentIndex},isEndpoint:function(t){var e=t.getGeometryN(this._componentIndex).getNumPoints()-1;return this._segmentIndex>=e||this._segmentIndex===e&&this._segmentFraction>=1},isValid:function(t){if(this._componentIndex<0||this._componentIndex>=t.getNumGeometries())return!1;var e=t.getGeometryN(this._componentIndex);return!(this._segmentIndex<0||this._segmentIndex>e.getNumPoints())&&((this._segmentIndex!==e.getNumPoints()||0===this._segmentFraction)&&!(this._segmentFraction<0||this._segmentFraction>1))},normalize:function(){this._segmentFraction<0&&(this._segmentFraction=0),this._segmentFraction>1&&(this._segmentFraction=1),this._componentIndex<0&&(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0),this._segmentIndex<0&&(this._segmentIndex=0,this._segmentFraction=0),1===this._segmentFraction&&(this._segmentFraction=0,this._segmentIndex+=1)},toLowest:function(t){var e=t.getGeometryN(this._componentIndex).getNumPoints()-1;return this._segmentIndex<e?this:new Vo(this._componentIndex,e,1,!1)},getCoordinate:function(t){var e=t.getGeometryN(this._componentIndex),n=e.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=e.getNumPoints()-1)return n;var i=e.getCoordinateN(this._segmentIndex+1);return Vo.pointAlongSegmentByFraction(n,i,this._segmentFraction)},getSegmentFraction:function(){return this._segmentFraction},getSegment:function(t){var e=t.getGeometryN(this._componentIndex),n=e.getCoordinateN(this._segmentIndex);return this._segmentIndex>=e.getNumPoints()-1?new ge(e.getCoordinateN(e.getNumPoints()-2),n):new ge(n,e.getCoordinateN(this._segmentIndex+1))},clamp:function(t){if(this._componentIndex>=t.getNumGeometries())return this.setToEnd(t),null;if(this._segmentIndex>=t.getNumPoints()){var e=t.getGeometryN(this._componentIndex);this._segmentIndex=e.getNumPoints()-1,this._segmentFraction=1}},setToEnd:function(t){this._componentIndex=t.getNumGeometries()-1;var e=t.getGeometryN(this._componentIndex);this._segmentIndex=e.getNumPoints()-1,this._segmentFraction=1},compareTo:function(t){var e=t;return this._componentIndex<e._componentIndex?-1:this._componentIndex>e._componentIndex?1:this._segmentIndex<e._segmentIndex?-1:this._segmentIndex>e._segmentIndex?1:this._segmentFraction<e._segmentFraction?-1:this._segmentFraction>e._segmentFraction?1:0},copy:function(){return new Vo(this._componentIndex,this._segmentIndex,this._segmentFraction)},toString:function(){return"LinearLoc["+this._componentIndex+", "+this._segmentIndex+", "+this._segmentFraction+"]"},isOnSameSegment:function(t){return this._componentIndex===t._componentIndex&&(this._segmentIndex===t._segmentIndex||(t._segmentIndex-this._segmentIndex==1&&0===t._segmentFraction||this._segmentIndex-t._segmentIndex==1&&0===this._segmentFraction))},snapToVertex:function(t,e){if(this._segmentFraction<=0||this._segmentFraction>=1)return null;var n=this.getSegmentLength(t),i=this._segmentFraction*n,r=n-i;i<=r&&i<e?this._segmentFraction=0:r<=i&&r<e&&(this._segmentFraction=1)},compareLocationValues:function(t,e,n){return this._componentIndex<t?-1:this._componentIndex>t?1:this._segmentIndex<e?-1:this._segmentIndex>e?1:this._segmentFraction<n?-1:this._segmentFraction>n?1:0},getSegmentLength:function(t){var e=t.getGeometryN(this._componentIndex),n=this._segmentIndex;this._segmentIndex>=e.getNumPoints()-1&&(n=e.getNumPoints()-2);var i=e.getCoordinateN(n),r=e.getCoordinateN(n+1);return i.distance(r)},isVertex:function(){return this._segmentFraction<=0||this._segmentFraction>=1},interfaces_:function(){return[g]},getClass:function(){return Vo}}),Vo.getEndLocation=function(t){var e=new Vo;return e.setToEnd(t),e},Vo.pointAlongSegmentByFraction=function(t,e,n){return n<=0?t:n>=1?e:new E((e.x-t.x)*n+t.x,(e.y-t.y)*n+t.y,(e.z-t.z)*n+t.z)},Vo.compareLocationValues=function(t,e,n,i,r,s){return t<i?-1:t>i?1:e<r?-1:e>r?1:n<s?-1:n>s?1:0},e(zo.prototype,{getComponentIndex:function(){return this._componentIndex},getLine:function(){return this._currentLine},getVertexIndex:function(){return this._vertexIndex},getSegmentEnd:function(){return this._vertexIndex<this.getLine().getNumPoints()-1?this._currentLine.getCoordinateN(this._vertexIndex+1):null},next:function(){if(!this.hasNext())return null;this._vertexIndex++,this._vertexIndex>=this._currentLine.getNumPoints()&&(this._componentIndex++,this.loadCurrentLine(),this._vertexIndex=0)},loadCurrentLine:function(){if(this._componentIndex>=this._numLines)return this._currentLine=null,null;this._currentLine=this._linearGeom.getGeometryN(this._componentIndex)},getSegmentStart:function(){return this._currentLine.getCoordinateN(this._vertexIndex)},isEndOfLine:function(){return!(this._componentIndex>=this._numLines)&&!(this._vertexIndex<this._currentLine.getNumPoints()-1)},hasNext:function(){return!(this._componentIndex>=this._numLines)&&!(this._componentIndex===this._numLines-1&&this._vertexIndex>=this._currentLine.getNumPoints())},interfaces_:function(){return[]},getClass:function(){return zo}}),zo.segmentEndVertexIndex=function(t){return t.getSegmentFraction()>0?t.getSegmentIndex()+1:t.getSegmentIndex()},e(Yo.prototype,{indexOf:function(t){return this.indexOfFromStart(t,null)},indexOfFromStart:function(t,e){for(var n=s.MAX_VALUE,i=0,r=0,o=-1,a=new ge,u=new zo(this._linearGeom);u.hasNext();u.next())if(!u.isEndOfLine()){a.p0=u.getSegmentStart(),a.p1=u.getSegmentEnd();var l=a.distance(t),h=a.segmentFraction(t),c=u.getComponentIndex(),f=u.getVertexIndex();l<n&&(null===e||e.compareLocationValues(c,f,h)<0)&&(i=c,r=f,o=h,n=l)}return n===s.MAX_VALUE?new Vo(e):new Vo(i,r,o)},indexOfAfter:function(t,e){if(null===e)return this.indexOf(t);var n=Vo.getEndLocation(this._linearGeom);if(n.compareTo(e)<=0)return n;var i=this.indexOfFromStart(t,e);return x.isTrue(i.compareTo(e)>=0,"computed location is before specified minimum location"),i},interfaces_:function(){return[]},getClass:function(){return Yo}}),Yo.indexOf=function(t,e){return new Yo(t).indexOf(e)},Yo.indexOfAfter=function(t,e,n){return new Yo(t).indexOfAfter(e,n)},e(ko.prototype,{indicesOf:function(t){var e=t.getGeometryN(0).getCoordinateN(0),n=t.getGeometryN(t.getNumGeometries()-1),i=n.getCoordinateN(n.getNumPoints()-1),r=new Yo(this._linearGeom),s=new Array(2).fill(null);return s[0]=r.indexOf(e),0===t.getLength()?s[1]=s[0].copy():s[1]=r.indexOfAfter(i,s[0]),s},interfaces_:function(){return[]},getClass:function(){return ko}}),ko.indicesOf=function(t,e){return new ko(t).indicesOf(e)},e(Uo.prototype,{getGeometry:function(){return this.endLine(),this._geomFact.buildGeometry(this._lines)},getLastCoordinate:function(){return this._lastPt},endLine:function(){if(null===this._coordList)return null;if(this._ignoreInvalidLines&&this._coordList.size()<2)return this._coordList=null,null;var t=this._coordList.toCoordinateArray(),e=t;this._fixInvalidLines&&(e=this.validCoordinateSequence(t)),this._coordList=null;var n=null;try{n=this._geomFact.createLineString(e)}catch(t){if(!(t instanceof i))throw t;if(!this._ignoreInvalidLines)throw t}null!==n&&this._lines.add(n)},setFixInvalidLines:function(t){this._fixInvalidLines=t},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];null===this._coordList&&(this._coordList=new b),this._coordList.add(e,n),this._lastPt=e}},setIgnoreInvalidLines:function(t){this._ignoreInvalidLines=t},validCoordinateSequence:function(t){return t.length>=2?t:[t[0],t[0]]},interfaces_:function(){return[]},getClass:function(){return Uo}}),e(Xo.prototype,{computeLinear:function(t,e){var n=new Uo(this._line.getFactory());n.setFixInvalidLines(!0),t.isVertex()||n.add(t.getCoordinate(this._line));for(var i=new zo(this._line,t);i.hasNext()&&!(e.compareLocationValues(i.getComponentIndex(),i.getVertexIndex(),0)<0);i.next()){var r=i.getSegmentStart();n.add(r),i.isEndOfLine()&&n.endLine()}return e.isVertex()||n.add(e.getCoordinate(this._line)),n.getGeometry()},computeLine:function(t,e){var n=this._line.getCoordinates(),i=new b,r=t.getSegmentIndex();t.getSegmentFraction()>0&&(r+=1);var s=e.getSegmentIndex();1===e.getSegmentFraction()&&(s+=1),s>=n.length&&(s=n.length-1),t.isVertex()||i.add(t.getCoordinate(this._line));for(var o=r;o<=s;o++)i.add(n[o]);e.isVertex()||i.add(e.getCoordinate(this._line)),i.size()<=0&&i.add(t.getCoordinate(this._line));var a=i.toCoordinateArray();return a.length<=1&&(a=[a[0],a[0]]),this._line.getFactory().createLineString(a)},extract:function(t,e){return e.compareTo(t)<0?this.reverse(this.computeLinear(e,t)):this.computeLinear(t,e)},reverse:function(t){return t instanceof At?t.reverse():t instanceof wt?t.reverse():(x.shouldNeverReachHere("non-linear geometry encountered"),null)},interfaces_:function(){return[]},getClass:function(){return Xo}}),Xo.extract=function(t,e,n){return new Xo(t).extract(e,n)},e(Ho.prototype,{clampIndex:function(t){var e=t.copy();return e.clamp(this._linearGeom),e},project:function(t){return Yo.indexOf(this._linearGeom,t)},checkGeometryType:function(){if(!(this._linearGeom instanceof At||this._linearGeom instanceof wt))throw new i("Input geometry must be linear")},extractPoint:function(){if(1===arguments.length)return arguments[0].getCoordinate(this._linearGeom);if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.toLowest(this._linearGeom);return n.getSegment(this._linearGeom).pointAlongOffset(n.getSegmentFraction(),e)}},isValidIndex:function(t){return t.isValid(this._linearGeom)},getEndIndex:function(){return Vo.getEndLocation(this._linearGeom)},getStartIndex:function(){return new Vo},indexOfAfter:function(t,e){return Yo.indexOfAfter(this._linearGeom,t,e)},extractLine:function(t,e){return Xo.extract(this._linearGeom,t,e)},indexOf:function(t){return Yo.indexOf(this._linearGeom,t)},indicesOf:function(t){return ko.indicesOf(this._linearGeom,t)},interfaces_:function(){return[]},getClass:function(){return Ho}}),e(Wo.prototype,{indexOf:function(t){return this.indexOfFromStart(t,-1)},indexOfFromStart:function(t,e){for(var n=s.MAX_VALUE,i=e,r=0,o=new ge,a=new zo(this._linearGeom);a.hasNext();){if(!a.isEndOfLine()){o.p0=a.getSegmentStart(),o.p1=a.getSegmentEnd();var u=o.distance(t),l=this.segmentNearestMeasure(o,t,r);u<n&&l>e&&(i=l,n=u),r+=o.getLength()}a.next()}return i},indexOfAfter:function(t,e){if(e<0)return this.indexOf(t);var n=this._linearGeom.getLength();if(n<e)return n;var i=this.indexOfFromStart(t,e);return x.isTrue(i>=e,"computed index is before specified minimum index"),i},segmentNearestMeasure:function(t,e,n){var i=t.projectionFactor(e);return i<=0?n:i<=1?n+i*t.getLength():n+t.getLength()},interfaces_:function(){return[]},getClass:function(){return Wo}}),Wo.indexOf=function(t,e){return new Wo(t).indexOf(e)},Wo.indexOfAfter=function(t,e,n){return new Wo(t).indexOfAfter(e,n)},e(jo.prototype,{getLength:function(t){for(var e=0,n=new zo(this._linearGeom);n.hasNext();){if(!n.isEndOfLine()){var i=n.getSegmentStart(),r=n.getSegmentEnd().distance(i);if(t.getComponentIndex()===n.getComponentIndex()&&t.getSegmentIndex()===n.getVertexIndex())return e+r*t.getSegmentFraction();e+=r}n.next()}return e},resolveHigher:function(t){if(!t.isEndpoint(this._linearGeom))return t;var e=t.getComponentIndex();if(e>=this._linearGeom.getNumGeometries()-1)return t;do{e++}while(e<this._linearGeom.getNumGeometries()-1&&0===this._linearGeom.getGeometryN(e).getLength());return new Vo(e,0,0)},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.getLocation(t,!0)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e;if(e<0)i=this._linearGeom.getLength()+e;var r=this.getLocationForward(i);return n?r:this.resolveHigher(r)}},getLocationForward:function(t){if(t<=0)return new Vo;for(var e=0,n=new zo(this._linearGeom);n.hasNext();){if(n.isEndOfLine()){if(e===t)return new Vo(n.getComponentIndex(),n.getVertexIndex(),0)}else{var i=n.getSegmentStart(),r=n.getSegmentEnd().distance(i);if(e+r>t){var s=(t-e)/r;return new Vo(n.getComponentIndex(),n.getVertexIndex(),s)}e+=r}n.next()}return Vo.getEndLocation(this._linearGeom)},interfaces_:function(){return[]},getClass:function(){return jo}}),jo.getLength=function(t,e){return new jo(t).getLength(e)},jo.getLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new jo(t).getLocation(e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return new jo(n).getLocation(i,r)}},e(Ko.prototype,{clampIndex:function(t){var e=this.positiveIndex(t),n=this.getStartIndex();if(e<n)return n;var i=this.getEndIndex();return e>i?i:e},locationOf:function(){if(1===arguments.length){var t=arguments[0];return jo.getLocation(this._linearGeom,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return jo.getLocation(this._linearGeom,e,n)}},project:function(t){return Wo.indexOf(this._linearGeom,t)},positiveIndex:function(t){return t>=0?t:this._linearGeom.getLength()+t},extractPoint:function(){if(1===arguments.length){var t=arguments[0];return jo.getLocation(this._linearGeom,t).getCoordinate(this._linearGeom)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=jo.getLocation(this._linearGeom,e).toLowest(this._linearGeom);return i.getSegment(this._linearGeom).pointAlongOffset(i.getSegmentFraction(),n)}},isValidIndex:function(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()},getEndIndex:function(){return this._linearGeom.getLength()},getStartIndex:function(){return 0},indexOfAfter:function(t,e){return Wo.indexOfAfter(this._linearGeom,t,e)},extractLine:function(t,e){new Ho(this._linearGeom);var n=this.clampIndex(t),i=this.clampIndex(e),r=n===i,s=this.locationOf(n,r),o=this.locationOf(i);return Xo.extract(this._linearGeom,s,o)},indexOf:function(t){return Wo.indexOf(this._linearGeom,t)},indicesOf:function(t){var e=ko.indicesOf(this._linearGeom,t);return[jo.getLength(this._linearGeom,e[0]),jo.getLength(this._linearGeom,e[1])]},interfaces_:function(){return[]},getClass:function(){return Ko}});var Zo=Object.freeze({LengthIndexedLine:Ko,LengthLocationMap:jo,LinearGeometryBuilder:Uo,LinearIterator:zo,LinearLocation:Vo,LocationIndexedLine:Ho});function Qo(){}e(Qo.prototype,{interfaces_:function(){return[]},getClass:function(){return Qo}}),Qo.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ds.createEmptyResult(ds.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),fs.overlayOp(t,e,ds.UNION)},e(K.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Gs.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return ks.union(this);if(1===arguments.length){var t=arguments[0];return Qo.union(this,t)}},isValid:function(){return Zs.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return ds.createEmptyResult(ds.INTERSECTION,this,t,this._factory);if(this.isGeometryCollection()){var e=t;return es.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),fs.overlayOp(this,t,ds.INTERSECTION)},covers:function(t){return Gs.covers(this,t)},coveredBy:function(t){return Gs.covers(t,this)},touches:function(t){return Gs.touches(this,t)},intersects:function(t){return Gs.intersects(this,t)},within:function(t){return Gs.within(this,t)},overlaps:function(t){return Gs.overlaps(this,t)},disjoint:function(t){return Gs.disjoint(this,t)},crosses:function(t){return Gs.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return Pr.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Pr.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];return Pr.bufferOp(this,i,r,s)}},convexHull:function(){return new Ze(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===arguments.length){var i=arguments[0];return Gs.relate(this,i)}if(2===arguments.length){var r=arguments[0],s=arguments[1];return Gs.relate(this,r).matches(s)}},getCentroid:function(){if(this.isEmpty())return this._factory.createPoint();var t=Xe.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this._factory.createPoint();var t=null,e=this.getDimension();if(0===e)t=new en(this).getInteriorPoint();else if(1===e){t=new tn(this).getInteriorPoint()}else{t=new Je(this).getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return ds.createEmptyResult(ds.SYMDIFFERENCE,this,t,this._factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),fs.overlayOp(this,t,ds.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){return(new he).write(this)},toString:function(){this.toText()},contains:function(t){return Gs.contains(this,t)},difference:function(t){return this.isEmpty()?ds.createEmptyResult(ds.DIFFERENCE,this,t,this._factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),fs.overlayOp(this,t,ds.DIFFERENCE))},isSimple:function(){return new $i(this).isSimple()},isWithinDistance:function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&Fr.isWithinDistance(this,t,e)},distance:function(t){return Fr.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});t.version="1.6.0 (ac4d0f6)",t.algorithm=En,t.densify=Sn,t.dissolve=bn,t.geom=ve,t.geomgraph=ii,t.index=wi,t.io=Gi,t.noding=Ji,t.operation=Js,t.precision=eo,t.simplify=_o,t.triangulate=Bo,t.linearref=Zo,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=jsts.min.js.map

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return Qe.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e){return void 0===e}function i(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,n,s){return ge(e,t,n,s,!0).utc()}function d(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function h(e){if(null==e._isValid){var t=d(e),n=Xe.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function c(e){var t=l(NaN);return null!=e?u(d(t),e):d(t).userInvalidated=!0,t}function f(e,t){var n,i,r;if(s(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),s(t._i)||(e._i=t._i),s(t._f)||(e._f=t._f),s(t._l)||(e._l=t._l),s(t._strict)||(e._strict=t._strict),s(t._tzm)||(e._tzm=t._tzm),s(t._isUTC)||(e._isUTC=t._isUTC),s(t._offset)||(e._offset=t._offset),s(t._pf)||(e._pf=d(t)),s(t._locale)||(e._locale=t._locale),Ke.length>0)for(n=0;n<Ke.length;n++)s(r=t[i=Ke[n]])||(e[i]=r);return e}function m(t){f(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===et&&(et=!0,e.updateOffset(this),et=!1)}function _(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=y(t)),n}function p(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&g(e[s])!==g(t[s]))&&a++;return a+r}function w(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function v(t,n){var s=!0;return u(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),s){for(var i,r=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var o in arguments[0])i+=o+": "+arguments[0][o]+", ";i=i.slice(0,-2)}else i=arguments[a];r.push(i)}w(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),s=!1}return n.apply(this,arguments)},n)}function M(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),tt[t]||(w(n),tt[t]=!0)}function S(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var s,i=u({},e);for(s in t)o(t,s)&&(n(e[s])&&n(t[s])?(i[s]={},u(i[s],e[s]),u(i[s],t[s])):null!=t[s]?i[s]=t[s]:delete i[s]);for(s in e)o(e,s)&&!o(t,s)&&n(e[s])&&(i[s]=u({},i[s]));return i}function k(e){null!=e&&this.set(e)}function Y(e,t){var n=e.toLowerCase();st[n]=st[n+"s"]=st[t]=e}function O(e){return"string"==typeof e?st[e]||st[e.toLowerCase()]:void 0}function T(e){var t,n,s={};for(n in e)o(e,n)&&(t=O(n))&&(s[t]=e[n]);return s}function x(e,t){it[e]=t}function b(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}function P(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(ut[e]=i),t&&(ut[t[0]]=function(){return b(i.apply(this,arguments),t[1],t[2])}),n&&(ut[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function W(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function H(e,t){return e.isValid()?(t=R(t,e.localeData()),ot[t]=ot[t]||function(e){var t,n,s=e.match(rt);for(t=0,n=s.length;t<n;t++)ut[s[t]]?s[t]=ut[s[t]]:s[t]=W(s[t]);return function(t){var i,r="";for(i=0;i<n;i++)r+=S(s[i])?s[i].call(t,e):s[i];return r}}(t),ot[t](e)):e.localeData().invalidDate()}function R(e,t){function n(e){return t.longDateFormat(e)||e}var s=5;for(at.lastIndex=0;s>=0&&at.test(e);)e=e.replace(at,n),at.lastIndex=0,s-=1;return e}function C(e,t,n){Yt[e]=S(t)?t:function(e,s){return e&&n?n:t}}function F(e,t){return o(Yt,e)?Yt[e](t._strict,t._locale):new RegExp(function(e){return U(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i}))}(e))}function U(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function L(e,t){var n,s=t;for("string"==typeof e&&(e=[e]),i(t)&&(s=function(e,n){n[t]=g(e)}),n=0;n<e.length;n++)Ot[e[n]]=s}function N(e,t){L(e,function(e,n,s,i){s._w=s._w||{},t(e,s._w,s,i)})}function G(e,t,n){null!=t&&o(Ot,e)&&Ot[e](t,n._a,n,e)}function V(e){return E(e)?366:365}function E(e){return e%4==0&&e%100!=0||e%400==0}function I(t,n){return function(s){return null!=s?(j(this,t,s),e.updateOffset(this,n),this):A(this,t)}}function A(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function j(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&E(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Z(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Z(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=function(e,t){return(e%t+t)%t}(t,12);return e+=(t-n)/12,1===n?E(e)?29:28:31-n%7%2}function z(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=g(t);else if(t=e.localeData().monthsParse(t),!i(t))return e;return n=Math.min(e.date(),Z(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function $(t){return null!=t?(z(this,t),e.updateOffset(this,!0),this):A(this,"Month")}function q(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++)n=l([2e3,t]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++)s[t]=U(s[t]),i[t]=U(i[t]);for(t=0;t<24;t++)r[t]=U(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function J(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function B(e,t,n){var s=7+t-n;return-((7+J(e,0,s).getUTCDay()-t)%7)+s-1}function Q(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+B(e,s,i);return o<=0?a=V(r=e-1)+o:o>V(e)?(r=e+1,a=o-V(e)):(r=e,a=o),{year:r,dayOfYear:a}}function X(e,t,n){var s,i,r=B(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+K(i=e.year()-1,t,n):a>K(e.year(),t,n)?(s=a-K(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function K(e,t,n){var s=B(e,t,n),i=B(e+1,t,n);return(V(e)-s+i)/7}function ee(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],d=[];for(t=0;t<7;t++)n=l([2e3,1]).day(t),s=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),r=this.weekdays(n,""),a.push(s),o.push(i),u.push(r),d.push(s),d.push(i),d.push(r);for(a.sort(e),o.sort(e),u.sort(e),d.sort(e),t=0;t<7;t++)o[t]=U(o[t]),u[t]=U(u[t]),d[t]=U(d[t]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function te(){return this.hours()%12||12}function ne(e,t){P(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function se(e,t){return t._meridiemParse}function ie(e){return e?e.toLowerCase().replace("_","-"):e}function re(e){var t=null;if(!Xt[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Jt._abbr;require("./locale/"+e),ae(t)}catch(e){}return Xt[e]}function ae(e,t){var n;return e&&(n=s(t)?ue(e):oe(e,t))&&(Jt=n),Jt._abbr}function oe(e,t){if(null!==t){var n=Qt;if(t.abbr=e,null!=Xt[e])M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Xt[e]._config;else if(null!=t.parentLocale){if(null==Xt[t.parentLocale])return Kt[t.parentLocale]||(Kt[t.parentLocale]=[]),Kt[t.parentLocale].push({name:e,config:t}),null;n=Xt[t.parentLocale]._config}return Xt[e]=new k(D(n,t)),Kt[e]&&Kt[e].forEach(function(e){oe(e.name,e.config)}),ae(e),Xt[e]}return delete Xt[e],null}function ue(e){var n;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Jt;if(!t(e)){if(n=re(e))return n;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=ie(e[r]).split("-")).length,n=(n=ie(e[r+1]))?n.split("-"):null;t>0;){if(s=re(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&p(i,n,!0)>=t-1)break;t--}r++}return null}(e)}function le(e){var t,n=e._a;return n&&-2===d(e).overflow&&(t=n[xt]<0||n[xt]>11?xt:n[bt]<1||n[bt]>Z(n[Tt],n[xt])?bt:n[Pt]<0||n[Pt]>24||24===n[Pt]&&(0!==n[Wt]||0!==n[Ht]||0!==n[Rt])?Pt:n[Wt]<0||n[Wt]>59?Wt:n[Ht]<0||n[Ht]>59?Ht:n[Rt]<0||n[Rt]>999?Rt:-1,d(e)._overflowDayOfYear&&(t<Tt||t>bt)&&(t=bt),d(e)._overflowWeeks&&-1===t&&(t=Ct),d(e)._overflowWeekday&&-1===t&&(t=Ft),d(e).overflow=t),e}function de(e,t,n){return null!=e?e:null!=t?t:n}function he(t){var n,s,i,r,a,o=[];if(!t._d){for(i=function(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}(t),t._w&&null==t._a[bt]&&null==t._a[xt]&&function(e){var t,n,s,i,r,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,a=4,n=de(t.GG,e._a[Tt],X(pe(),1,4).year),s=de(t.W,1),((i=de(t.E,1))<1||i>7)&&(u=!0);else{r=e._locale._week.dow,a=e._locale._week.doy;var l=X(pe(),r,a);n=de(t.gg,e._a[Tt],l.year),s=de(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||t.e>6)&&(u=!0)):i=r}s<1||s>K(n,r,a)?d(e)._overflowWeeks=!0:null!=u?d(e)._overflowWeekday=!0:(o=Q(n,s,i,r,a),e._a[Tt]=o.year,e._dayOfYear=o.dayOfYear)}(t),null!=t._dayOfYear&&(a=de(t._a[Tt],i[Tt]),(t._dayOfYear>V(a)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),s=J(a,0,t._dayOfYear),t._a[xt]=s.getUTCMonth(),t._a[bt]=s.getUTCDate()),n=0;n<3&&null==t._a[n];++n)t._a[n]=o[n]=i[n];for(;n<7;n++)t._a[n]=o[n]=null==t._a[n]?2===n?1:0:t._a[n];24===t._a[Pt]&&0===t._a[Wt]&&0===t._a[Ht]&&0===t._a[Rt]&&(t._nextDay=!0,t._a[Pt]=0),t._d=(t._useUTC?J:function(e,t,n,s,i,r,a){var o=new Date(e,t,n,s,i,r,a);return e<100&&e>=0&&isFinite(o.getFullYear())&&o.setFullYear(e),o}).apply(null,o),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Pt]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(d(t).weekdayMismatch=!0)}}function ce(e){var t,n,s,i,r,a,o=e._i,u=en.exec(o)||tn.exec(o);if(u){for(d(e).iso=!0,t=0,n=sn.length;t<n;t++)if(sn[t][1].exec(u[1])){i=sn[t][0],s=!1!==sn[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=rn.length;t<n;t++)if(rn[t][1].exec(u[3])){r=(u[2]||" ")+rn[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!nn.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),_e(e)}else e._isValid=!1}function fe(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),Vt.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}function me(e){var t=on.exec(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e._i));if(t){var n=fe(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function(e,t,n){if(e&&jt.indexOf(e)!==new Date(t[0],t[1],t[2]).getDay())return d(n).weekdayMismatch=!0,n._isValid=!1,!1;return!0}(t[1],n,e))return;e._a=n,e._tzm=function(e,t,n){if(e)return un[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(t[8],t[9],t[10]),e._d=J.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),d(e).rfc2822=!0}else e._isValid=!1}function _e(t){if(t._f!==e.ISO_8601)if(t._f!==e.RFC_2822){t._a=[],d(t).empty=!0;var n,s,i,r,a,o=""+t._i,u=o.length,l=0;for(i=R(t._f,t._locale).match(rt)||[],n=0;n<i.length;n++)r=i[n],(s=(o.match(F(r,t))||[])[0])&&((a=o.substr(0,o.indexOf(s))).length>0&&d(t).unusedInput.push(a),o=o.slice(o.indexOf(s)+s.length),l+=s.length),ut[r]?(s?d(t).empty=!1:d(t).unusedTokens.push(r),G(r,s,t)):t._strict&&!s&&d(t).unusedTokens.push(r);d(t).charsLeftOver=u-l,o.length>0&&d(t).unusedInput.push(o),t._a[Pt]<=12&&!0===d(t).bigHour&&t._a[Pt]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[Pt]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0),t):t}(t._locale,t._a[Pt],t._meridiem),he(t),le(t)}else me(t);else ce(t)}function ye(o){var l=o._i,y=o._f;return o._locale=o._locale||ue(o._l),null===l||void 0===y&&""===l?c({nullInput:!0}):("string"==typeof l&&(o._i=l=o._locale.preparse(l)),_(l)?new m(le(l)):(r(l)?o._d=l:t(y)?function(e){var t,n,s,i,r;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)r=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],_e(t),h(t)&&(r+=d(t).charsLeftOver,r+=10*d(t).unusedTokens.length,d(t).score=r,(null==s||r<s)&&(s=r,n=t));u(e,n||t)}(o):y?_e(o):function(o){var u=o._i;s(u)?o._d=new Date(e.now()):r(u)?o._d=new Date(u.valueOf()):"string"==typeof u?function(t){var n=an.exec(t._i);null===n?(ce(t),!1===t._isValid&&(delete t._isValid,me(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t)))):t._d=new Date(+n[1])}(o):t(u)?(o._a=a(u.slice(0),function(e){return parseInt(e,10)}),he(o)):n(u)?function(e){if(!e._d){var t=T(e._i);e._a=a([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),he(e)}}(o):i(u)?o._d=new Date(u):e.createFromInputFallback(o)}(o),h(o)||(o._d=null),o))}function ge(e,s,i,r,a){var o={};return!0!==i&&!1!==i||(r=i,i=void 0),(n(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||t(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=a,o._l=i,o._i=e,o._f=s,o._strict=r,function(e){var t=new m(le(ye(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(o)}function pe(e,t,n,s){return ge(e,t,n,s,!1)}function we(e,n){var s,i;if(1===n.length&&t(n[0])&&(n=n[0]),!n.length)return pe();for(s=n[0],i=1;i<n.length;++i)n[i].isValid()&&!n[i][e](s)||(s=n[i]);return s}function ve(e){var t=T(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Ut.call(hn,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,s=0;s<hn.length;++s)if(e[hn[s]]){if(n)return!1;parseFloat(e[hn[s]])!==g(e[hn[s]])&&(n=!0)}return!0}(t),this._milliseconds=+d+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=ue(),this._bubble()}function Me(e){return e instanceof ve}function Se(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function De(e,t){P(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+b(~~(e/60),2)+t+b(~~e%60,2)})}function ke(e,t){var n=(t||"").match(e);if(null===n)return null;var s=((n[n.length-1]||[])+"").match(cn)||["-",0,0],i=60*s[1]+g(s[2]);return 0===i?0:"+"===s[0]?i:-i}function Ye(t,n){var s,i;return n._isUTC?(s=n.clone(),i=(_(t)||r(t)?t.valueOf():pe(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+i),e.updateOffset(s,!1),s):pe(t).local()}function Oe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Te(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function xe(e,t){var n,s,r,a=e,u=null;return Me(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:i(e)?(a={},t?a[t]=e:a.milliseconds=e):(u=fn.exec(e))?(n="-"===u[1]?-1:1,a={y:0,d:g(u[bt])*n,h:g(u[Pt])*n,m:g(u[Wt])*n,s:g(u[Ht])*n,ms:g(Se(1e3*u[Rt]))*n}):(u=mn.exec(e))?(n="-"===u[1]?-1:(u[1],1),a={y:be(u[2],n),M:be(u[3],n),w:be(u[4],n),d:be(u[5],n),h:be(u[6],n),m:be(u[7],n),s:be(u[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Ye(t,e),e.isBefore(t)?n=Pe(e,t):((n=Pe(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(pe(a.from),pe(a.to)),(a={}).ms=r.milliseconds,a.M=r.months),s=new ve(a),Me(e)&&o(e,"_locale")&&(s._locale=e._locale),s}function be(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Pe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function We(e,t){return function(n,s){var i,r;return null===s||isNaN(+s)||(M(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=s,s=r),n="string"==typeof n?+n:n,i=xe(n,s),He(this,i,e),this}}function He(t,n,s,i){var r=n._milliseconds,a=Se(n._days),o=Se(n._months);t.isValid()&&(i=null==i||i,o&&z(t,A(t,"Month")+o*s),a&&j(t,"Date",A(t,"Date")+a*s),r&&t._d.setTime(t._d.valueOf()+r*s),i&&e.updateOffset(t,a||o))}function Re(e,t){var n,s=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(s,"months");return n=t-i<0?(t-i)/(i-e.clone().add(s-1,"months")):(t-i)/(e.clone().add(s+1,"months")-i),-(s+n)||0}function Ce(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ue(e))&&(this._locale=t),this)}function Fe(){return this._locale}function Ue(e,t){P(0,[e,e.length],0,t)}function Le(e,t,n,s,i){var r;return null==e?X(this,s,i).year:(r=K(e,s,i),t>r&&(t=r),function(e,t,n,s,i){var r=Q(e,t,n,s,i),a=J(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}function Ne(e,t){t[Rt]=g(1e3*("0."+e))}function Ge(e){return e}function Ve(e,t,n,s){var i=ue(),r=l().set(s,t);return i[n](r,e)}function Ee(e,t,n){if(i(e)&&(t=e,e=void 0),e=e||"",null!=t)return Ve(e,t,n,"month");var s,r=[];for(s=0;s<12;s++)r[s]=Ve(e,s,n,"month");return r}function Ie(e,t,n,s){"boolean"==typeof e?(i(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,i(t)&&(n=t,t=void 0),t=t||"");var r=ue(),a=e?r._week.dow:0;if(null!=n)return Ve(t,(n+a)%7,s,"day");var o,u=[];for(o=0;o<7;o++)u[o]=Ve(t,(o+a)%7,s,"day");return u}function Ae(e,t,n,s){var i=xe(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function je(e){return e<0?Math.floor(e):Math.ceil(e)}function Ze(e){return 4800*e/146097}function ze(e){return 146097*e/4800}function $e(e){return function(){return this.as(e)}}function qe(e){return function(){return this.isValid()?this._data[e]:NaN}}function Je(e){return(e>0)-(e<0)||+e}function Be(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=An(this._milliseconds)/1e3,s=An(this._days),i=An(this._months);t=y((e=y(n/60))/60),n%=60,e%=60;var r=y(i/12),a=i%=12,o=s,u=t,l=e,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var c=h<0?"-":"",f=Je(this._months)!==Je(h)?"-":"",m=Je(this._days)!==Je(h)?"-":"",_=Je(this._milliseconds)!==Je(h)?"-":"";return c+"P"+(r?f+r+"Y":"")+(a?f+a+"M":"")+(o?m+o+"D":"")+(u||l||d?"T":"")+(u?_+u+"H":"")+(l?_+l+"M":"")+(d?_+d+"S":"")}var Qe,Xe;Xe=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var Ke=e.momentProperties=[],et=!1,tt={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var nt;nt=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};var st={},it={},rt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,at=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ot={},ut={},lt=/\d/,dt=/\d\d/,ht=/\d{3}/,ct=/\d{4}/,ft=/[+-]?\d{6}/,mt=/\d\d?/,_t=/\d\d\d\d?/,yt=/\d\d\d\d\d\d?/,gt=/\d{1,3}/,pt=/\d{1,4}/,wt=/[+-]?\d{1,6}/,vt=/\d+/,Mt=/[+-]?\d+/,St=/Z|[+-]\d\d:?\d\d/gi,Dt=/Z|[+-]\d\d(?::?\d\d)?/gi,kt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Yt={},Ot={},Tt=0,xt=1,bt=2,Pt=3,Wt=4,Ht=5,Rt=6,Ct=7,Ft=8;P("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),P(0,["YY",2],0,function(){return this.year()%100}),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),Y("year","y"),x("year",1),C("Y",Mt),C("YY",mt,dt),C("YYYY",pt,ct),C("YYYYY",wt,ft),C("YYYYYY",wt,ft),L(["YYYYY","YYYYYY"],Tt),L("YYYY",function(t,n){n[Tt]=2===t.length?e.parseTwoDigitYear(t):g(t)}),L("YY",function(t,n){n[Tt]=e.parseTwoDigitYear(t)}),L("Y",function(e,t){t[Tt]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var Ut,Lt=I("FullYear",!0);Ut=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},P("M",["MM",2],"Mo",function(){return this.month()+1}),P("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),P("MMMM",0,0,function(e){return this.localeData().months(this,e)}),Y("month","M"),x("month",8),C("M",mt),C("MM",mt,dt),C("MMM",function(e,t){return t.monthsShortRegex(e)}),C("MMMM",function(e,t){return t.monthsRegex(e)}),L(["M","MM"],function(e,t){t[xt]=g(e)-1}),L(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[xt]=i:d(n).invalidMonth=e});var Nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Vt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Et=kt,It=kt;P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),Y("week","w"),Y("isoWeek","W"),x("week",5),x("isoWeek",5),C("w",mt),C("ww",mt,dt),C("W",mt),C("WW",mt,dt),N(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=g(e)});P("d",0,"do","day"),P("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),P("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),P("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),Y("day","d"),Y("weekday","e"),Y("isoWeekday","E"),x("day",11),x("weekday",11),x("isoWeekday",11),C("d",mt),C("e",mt),C("E",mt),C("dd",function(e,t){return t.weekdaysMinRegex(e)}),C("ddd",function(e,t){return t.weekdaysShortRegex(e)}),C("dddd",function(e,t){return t.weekdaysRegex(e)}),N(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:d(n).invalidWeekday=e}),N(["d","e","E"],function(e,t,n,s){t[s]=g(e)});var At="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),jt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Zt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),zt=kt,$t=kt,qt=kt;P("H",["HH",2],0,"hour"),P("h",["hh",2],0,te),P("k",["kk",2],0,function(){return this.hours()||24}),P("hmm",0,0,function(){return""+te.apply(this)+b(this.minutes(),2)}),P("hmmss",0,0,function(){return""+te.apply(this)+b(this.minutes(),2)+b(this.seconds(),2)}),P("Hmm",0,0,function(){return""+this.hours()+b(this.minutes(),2)}),P("Hmmss",0,0,function(){return""+this.hours()+b(this.minutes(),2)+b(this.seconds(),2)}),ne("a",!0),ne("A",!1),Y("hour","h"),x("hour",13),C("a",se),C("A",se),C("H",mt),C("h",mt),C("k",mt),C("HH",mt,dt),C("hh",mt,dt),C("kk",mt,dt),C("hmm",_t),C("hmmss",yt),C("Hmm",_t),C("Hmmss",yt),L(["H","HH"],Pt),L(["k","kk"],function(e,t,n){var s=g(e);t[Pt]=24===s?0:s}),L(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),L(["h","hh"],function(e,t,n){t[Pt]=g(e),d(n).bigHour=!0}),L("hmm",function(e,t,n){var s=e.length-2;t[Pt]=g(e.substr(0,s)),t[Wt]=g(e.substr(s)),d(n).bigHour=!0}),L("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Pt]=g(e.substr(0,s)),t[Wt]=g(e.substr(s,2)),t[Ht]=g(e.substr(i)),d(n).bigHour=!0}),L("Hmm",function(e,t,n){var s=e.length-2;t[Pt]=g(e.substr(0,s)),t[Wt]=g(e.substr(s))}),L("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Pt]=g(e.substr(0,s)),t[Wt]=g(e.substr(s,2)),t[Ht]=g(e.substr(i))});var Jt,Bt=I("Hours",!0),Qt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Gt,monthsShort:Vt,week:{dow:0,doy:6},weekdays:At,weekdaysMin:Zt,weekdaysShort:jt,meridiemParse:/[ap]\.?m?\.?/i},Xt={},Kt={},en=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nn=/Z|[+-]\d\d(?::?\d\d)?/,sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],rn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],an=/^\/?Date\((\-?\d+)/i,on=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,un={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};e.createFromInputFallback=v("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var ln=v("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=pe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:c()}),dn=v("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=pe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:c()}),hn=["year","quarter","month","week","day","hour","minute","second","millisecond"];De("Z",":"),De("ZZ",""),C("Z",Dt),C("ZZ",Dt),L(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=ke(Dt,e)});var cn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var fn=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,mn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;xe.fn=ve.prototype,xe.invalid=function(){return xe(NaN)};var _n=We(1,"add"),yn=We(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var gn=v("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});P(0,["gg",2],0,function(){return this.weekYear()%100}),P(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ue("gggg","weekYear"),Ue("ggggg","weekYear"),Ue("GGGG","isoWeekYear"),Ue("GGGGG","isoWeekYear"),Y("weekYear","gg"),Y("isoWeekYear","GG"),x("weekYear",1),x("isoWeekYear",1),C("G",Mt),C("g",Mt),C("GG",mt,dt),C("gg",mt,dt),C("GGGG",pt,ct),C("gggg",pt,ct),C("GGGGG",wt,ft),C("ggggg",wt,ft),N(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=g(e)}),N(["gg","GG"],function(t,n,s,i){n[i]=e.parseTwoDigitYear(t)}),P("Q",0,"Qo","quarter"),Y("quarter","Q"),x("quarter",7),C("Q",lt),L("Q",function(e,t){t[xt]=3*(g(e)-1)}),P("D",["DD",2],"Do","date"),Y("date","D"),x("date",9),C("D",mt),C("DD",mt,dt),C("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),L(["D","DD"],bt),L("Do",function(e,t){t[bt]=g(e.match(mt)[0])});var pn=I("Date",!0);P("DDD",["DDDD",3],"DDDo","dayOfYear"),Y("dayOfYear","DDD"),x("dayOfYear",4),C("DDD",gt),C("DDDD",ht),L(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),P("m",["mm",2],0,"minute"),Y("minute","m"),x("minute",14),C("m",mt),C("mm",mt,dt),L(["m","mm"],Wt);var wn=I("Minutes",!1);P("s",["ss",2],0,"second"),Y("second","s"),x("second",15),C("s",mt),C("ss",mt,dt),L(["s","ss"],Ht);var vn=I("Seconds",!1);P("S",0,0,function(){return~~(this.millisecond()/100)}),P(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,function(){return 10*this.millisecond()}),P(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),P(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),P(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),P(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),P(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Y("millisecond","ms"),x("millisecond",16),C("S",gt,lt),C("SS",gt,dt),C("SSS",gt,ht);var Mn;for(Mn="SSSS";Mn.length<=9;Mn+="S")C(Mn,vt);for(Mn="S";Mn.length<=9;Mn+="S")L(Mn,Ne);var Sn=I("Milliseconds",!1);P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var Dn=m.prototype;Dn.add=_n,Dn.calendar=function(t,n){var s=t||pe(),i=Ye(s,this).startOf("day"),r=e.calendarFormat(this,i)||"sameElse",a=n&&(S(n[r])?n[r].call(this,s):n[r]);return this.format(a||this.localeData().calendar(r,this,pe(s)))},Dn.clone=function(){return new m(this)},Dn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Ye(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=O(t)){case"year":r=Re(this,s)/12;break;case"month":r=Re(this,s);break;case"quarter":r=Re(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:y(r)},Dn.endOf=function(e){return void 0===(e=O(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},Dn.format=function(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=H(this,t);return this.localeData().postformat(n)},Dn.from=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||pe(e).isValid())?xe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Dn.fromNow=function(e){return this.from(pe(),e)},Dn.to=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||pe(e).isValid())?xe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Dn.toNow=function(e){return this.to(pe(),e)},Dn.get=function(e){return e=O(e),S(this[e])?this[e]():this},Dn.invalidAt=function(){return d(this).overflow},Dn.isAfter=function(e,t){var n=_(e)?e:pe(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=O(s(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Dn.isBefore=function(e,t){var n=_(e)?e:pe(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=O(s(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Dn.isBetween=function(e,t,n,s){return("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n))},Dn.isSame=function(e,t){var n,s=_(e)?e:pe(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=O(t||"millisecond"))?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Dn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Dn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Dn.isValid=function(){return h(this)},Dn.lang=gn,Dn.locale=Ce,Dn.localeData=Fe,Dn.max=dn,Dn.min=ln,Dn.parsingFlags=function(){return u({},d(this))},Dn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:it[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=T(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(e=O(e),S(this[e]))return this[e](t);return this},Dn.startOf=function(e){switch(e=O(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},Dn.subtract=yn,Dn.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},Dn.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},Dn.toDate=function(){return new Date(this.valueOf())},Dn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):S(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Dn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+s+"-MM-DD[T]HH:mm:ss.SSS"+i)},Dn.toJSON=function(){return this.isValid()?this.toISOString():null},Dn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Dn.unix=function(){return Math.floor(this.valueOf()/1e3)},Dn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Dn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Dn.year=Lt,Dn.isLeapYear=function(){return E(this.year())},Dn.weekYear=function(e){return Le.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Dn.isoWeekYear=function(e){return Le.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Dn.quarter=Dn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Dn.month=$,Dn.daysInMonth=function(){return Z(this.year(),this.month())},Dn.week=Dn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Dn.isoWeek=Dn.isoWeeks=function(e){var t=X(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Dn.weeksInYear=function(){var e=this.localeData()._week;return K(this.year(),e.dow,e.doy)},Dn.isoWeeksInYear=function(){return K(this.year(),1,4)},Dn.date=pn,Dn.day=Dn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Dn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Dn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Dn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Dn.hour=Dn.hours=Bt,Dn.minute=Dn.minutes=wn,Dn.second=Dn.seconds=vn,Dn.millisecond=Dn.milliseconds=Sn,Dn.utcOffset=function(t,n,s){var i,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=ke(Dt,t)))return this}else Math.abs(t)<16&&!s&&(t*=60);return!this._isUTC&&n&&(i=Oe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!n||this._changeInProgress?He(this,xe(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Oe(this)},Dn.utc=function(e){return this.utcOffset(0,e)},Dn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Oe(this),"m")),this},Dn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=ke(St,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Dn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?pe(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Dn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Dn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Dn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Dn.isUtc=Te,Dn.isUTC=Te,Dn.zoneAbbr=function(){return this._isUTC?"UTC":""},Dn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Dn.dates=v("dates accessor is deprecated. Use date instead.",pn),Dn.months=v("months accessor is deprecated. Use month instead",$),Dn.years=v("years accessor is deprecated. Use year instead",Lt),Dn.zone=v("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),Dn.isDSTShifted=v("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var e={};if(f(e,this),(e=ye(e))._a){var t=e._isUTC?l(e._a):pe(e._a);this._isDSTShifted=this.isValid()&&p(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var kn=k.prototype;kn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return S(s)?s.call(t,n):s},kn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},kn.invalidDate=function(){return this._invalidDate},kn.ordinal=function(e){return this._ordinal.replace("%d",e)},kn.preparse=Ge,kn.postformat=Ge,kn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return S(i)?i(e,t,n,s):i.replace(/%d/i,e)},kn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return S(n)?n(t):n.replace(/%s/i,t)},kn.set=function(e){var t,n;for(n in e)S(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},kn.months=function(e,n){return e?t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Nt).test(n)?"format":"standalone"][e.month()]:t(this._months)?this._months:this._months.standalone},kn.monthsShort=function(e,n){return e?t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Nt.test(n)?"format":"standalone"][e.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},kn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=l([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ut.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ut.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ut.call(this._shortMonthsParse,a))?i:-1!==(i=Ut.call(this._longMonthsParse,a))?i:null:-1!==(i=Ut.call(this._longMonthsParse,a))?i:-1!==(i=Ut.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=l([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},kn.monthsRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||q.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=It),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},kn.monthsShortRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||q.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=Et),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},kn.week=function(e){return X(e,this._week.dow,this._week.doy).week},kn.firstDayOfYear=function(){return this._week.doy},kn.firstDayOfWeek=function(){return this._week.dow},kn.weekdays=function(e,n){return e?t(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(n)?"format":"standalone"][e.day()]:t(this._weekdays)?this._weekdays:this._weekdays.standalone},kn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},kn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},kn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=l([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ut.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ut.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ut.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ut.call(this._weekdaysParse,a))?i:-1!==(i=Ut.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ut.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ut.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ut.call(this._weekdaysParse,a))?i:-1!==(i=Ut.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ut.call(this._minWeekdaysParse,a))?i:-1!==(i=Ut.call(this._weekdaysParse,a))?i:-1!==(i=Ut.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=l([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},kn.weekdaysRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ee.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=zt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},kn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ee.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=$t),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},kn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ee.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},kn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},kn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ae("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=v("moment.lang is deprecated. Use moment.locale instead.",ae),e.langData=v("moment.langData is deprecated. Use moment.localeData instead.",ue);var Yn=Math.abs,On=$e("ms"),Tn=$e("s"),xn=$e("m"),bn=$e("h"),Pn=$e("d"),Wn=$e("w"),Hn=$e("M"),Rn=$e("y"),Cn=qe("milliseconds"),Fn=qe("seconds"),Un=qe("minutes"),Ln=qe("hours"),Nn=qe("days"),Gn=qe("months"),Vn=qe("years"),En=Math.round,In={ss:44,s:45,m:45,h:22,d:26,M:11},An=Math.abs,jn=ve.prototype;return jn.isValid=function(){return this._isValid},jn.abs=function(){var e=this._data;return this._milliseconds=Yn(this._milliseconds),this._days=Yn(this._days),this._months=Yn(this._months),e.milliseconds=Yn(e.milliseconds),e.seconds=Yn(e.seconds),e.minutes=Yn(e.minutes),e.hours=Yn(e.hours),e.months=Yn(e.months),e.years=Yn(e.years),this},jn.add=function(e,t){return Ae(this,e,t,1)},jn.subtract=function(e,t){return Ae(this,e,t,-1)},jn.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=O(e))||"year"===e)return t=this._days+s/864e5,n=this._months+Ze(t),"month"===e?n:n/12;switch(t=this._days+Math.round(ze(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},jn.asMilliseconds=On,jn.asSeconds=Tn,jn.asMinutes=xn,jn.asHours=bn,jn.asDays=Pn,jn.asWeeks=Wn,jn.asMonths=Hn,jn.asYears=Rn,jn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12):NaN},jn._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return r>=0&&a>=0&&o>=0||r<=0&&a<=0&&o<=0||(r+=864e5*je(ze(o)+a),a=0,o=0),u.milliseconds=r%1e3,e=y(r/1e3),u.seconds=e%60,t=y(e/60),u.minutes=t%60,n=y(t/60),u.hours=n%24,a+=y(n/24),i=y(Ze(a)),o+=i,a-=je(ze(i)),s=y(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},jn.clone=function(){return xe(this)},jn.get=function(e){return e=O(e),this.isValid()?this[e+"s"]():NaN},jn.milliseconds=Cn,jn.seconds=Fn,jn.minutes=Un,jn.hours=Ln,jn.days=Nn,jn.weeks=function(){return y(this.days()/7)},jn.months=Gn,jn.years=Vn,jn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var s=xe(e).abs(),i=En(s.as("s")),r=En(s.as("m")),a=En(s.as("h")),o=En(s.as("d")),u=En(s.as("M")),l=En(s.as("y")),d=i<=In.ss&&["s",i]||i<In.s&&["ss",i]||r<=1&&["m"]||r<In.m&&["mm",r]||a<=1&&["h"]||a<In.h&&["hh",a]||o<=1&&["d"]||o<In.d&&["dd",o]||u<=1&&["M"]||u<In.M&&["MM",u]||l<=1&&["y"]||["yy",l];return d[2]=t,d[3]=+e>0,d[4]=n,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,d)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},jn.toISOString=Be,jn.toString=Be,jn.toJSON=Be,jn.locale=Ce,jn.localeData=Fe,jn.toIsoString=v("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Be),jn.lang=gn,P("X",0,0,"unix"),P("x",0,0,"valueOf"),C("x",Mt),C("X",/[+-]?\d+(\.\d{1,3})?/),L("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),L("x",function(e,t,n){n._d=new Date(g(e))}),e.version="2.20.1",function(e){Qe=e}(pe),e.fn=Dn,e.min=function(){return we("isBefore",[].slice.call(arguments,0))},e.max=function(){return we("isAfter",[].slice.call(arguments,0))},e.now=function(){return Date.now?Date.now():+new Date},e.utc=l,e.unix=function(e){return pe(1e3*e)},e.months=function(e,t){return Ee(e,t,"months")},e.isDate=r,e.locale=ae,e.invalid=c,e.duration=xe,e.isMoment=_,e.weekdays=function(e,t,n){return Ie(e,t,n,"weekdays")},e.parseZone=function(){return pe.apply(null,arguments).parseZone()},e.localeData=ue,e.isDuration=Me,e.monthsShort=function(e,t){return Ee(e,t,"monthsShort")},e.weekdaysMin=function(e,t,n){return Ie(e,t,n,"weekdaysMin")},e.defineLocale=oe,e.updateLocale=function(e,t){if(null!=t){var n,s,i=Qt;null!=(s=re(e))&&(i=s._config),(n=new k(t=D(i,t))).parentLocale=Xt[e],Xt[e]=n,ae(e)}else null!=Xt[e]&&(null!=Xt[e].parentLocale?Xt[e]=Xt[e].parentLocale:null!=Xt[e]&&delete Xt[e]);return Xt[e]},e.locales=function(){return nt(Xt)},e.weekdaysShort=function(e,t,n){return Ie(e,t,n,"weekdaysShort")},e.normalizeUnits=O,e.relativeTimeRounding=function(e){return void 0===e?En:"function"==typeof e&&(En=e,!0)},e.relativeTimeThreshold=function(e,t){return void 0!==In[e]&&(void 0===t?In[e]:(In[e]=t,"s"===e&&(In.ss=t-1),!0))},e.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},e.prototype=Dn,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},e});

(function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return false}};var n=t();var r=function(e){var t={next:function(){var t=e.shift();return{done:t===void 0,value:t}}};if(n){t[Symbol.iterator]=function(){return t}}return t};var i=function(){var t=function(e){Object.defineProperty(this,"_entries",{value:{}});if(typeof e==="string"){if(e!==""){e=e.replace(/^\?/,"");var n=e.split("&");var r;for(var i=0;i<n.length;i++){r=n[i].split("=");this.append(decodeURIComponent(r[0]),r.length>1?decodeURIComponent(r[1]):"")}}}else if(e instanceof t){var o=this;e.forEach(function(e,t){o.append(e,t)})}};var i=t.prototype;i.append=function(e,t){if(e in this._entries){this._entries[e].push(t.toString())}else{this._entries[e]=[t.toString()]}};i.delete=function(e){delete this._entries[e]};i.get=function(e){return e in this._entries?this._entries[e][0]:null};i.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]};i.has=function(e){return e in this._entries};i.set=function(e,t){this._entries[e]=[t.toString()]};i.forEach=function(e,t){var n;for(var r in this._entries){if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var i=0;i<n.length;i++){e.call(t,n[i],r,this)}}}};i.keys=function(){var e=[];this.forEach(function(t,n){e.push(n)});return r(e)};i.values=function(){var e=[];this.forEach(function(t){e.push(t)});return r(e)};i.entries=function(){var e=[];this.forEach(function(t,n){e.push([n,t])});return r(e)};if(n){i[Symbol.iterator]=i.entries}i.toString=function(){var e="";this.forEach(function(t,n){if(e.length>0)e+="&";e+=encodeURIComponent(n)+"="+encodeURIComponent(t)});return e};e.URLSearchParams=t};if(!("URLSearchParams"in e)||new URLSearchParams("?a=1").toString()!=="a=1"){i()}})(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:this);(function(e){var t=function(){try{var e=new URL("b","http://a");e.pathname="c%20d";return e.href==="http://a/c%20d"&&e.searchParams}catch(e){return false}};var n=function(){var t=e.URL;var n=function(e,t){if(typeof e!=="string")e=String(e);var n=document.implementation.createHTMLDocument("");window.doc=n;if(t){var r=n.createElement("base");r.href=t;n.head.appendChild(r)}var i=n.createElement("a");i.href=e;n.body.appendChild(i);i.href=i.href;if(i.protocol===":"||!/:/.test(i.href)){throw new TypeError("Invalid URL")}Object.defineProperty(this,"_anchorElement",{value:i})};var r=n.prototype;var i=function(e){Object.defineProperty(r,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:true})};["hash","host","hostname","port","protocol","search"].forEach(function(e){i(e)});Object.defineProperties(r,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e},enumerable:true},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:true},origin:{get:function(){return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(this._anchorElement.port?":"+this._anchorElement.port:"")},enumerable:true},password:{get:function(){return""},set:function(e){},enumerable:true},username:{get:function(){return""},set:function(e){},enumerable:true},searchParams:{get:function(){var e=new URLSearchParams(this.search);var t=this;["append","delete","set"].forEach(function(n){var r=e[n];e[n]=function(){r.apply(e,arguments);t.search=e.toString()}});return e},enumerable:true}});n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)};n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)};e.URL=n};if(!t()){n()}if(e.location!==void 0&&!("origin"in e.location)){var r=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:r,enumerable:true})}catch(t){setInterval(function(){e.location.origin=r()},100)}}})(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:this);

/*! jQuery UI - v1.12.1 - 2017-11-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/resizable.js, widgets/sortable.js, widgets/datepicker.js, widgets/mouse.js, widgets/slider.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}function i(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,o)}function o(){t.datepicker._isDisabledDatepicker(c.inline?c.dpDiv.parent()[0]:c.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.ui=t.ui||{},t.ui.version="1.12.1";var r=0,l=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var h=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,s,n=l.call(arguments,1),o=0,a=n.length;a>o;o++)for(i in n[o])s=n[o][i],n[o].hasOwnProperty(i)&&void 0!==s&&(e[i]=t.isPlainObject(s)?t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var o="string"==typeof n,a=l.call(arguments,1),r=this;return o?this.length||"instance"!==n?this.each(function(){var i,o=t.data(this,s);return"instance"===n?(r=o,!1):o?t.isFunction(o[n])&&"_"!==n.charAt(0)?(i=o[n].apply(o,a),i!==o&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+n+"'")}):r=void 0:(a.length&&(n=t.widget.extend.apply(null,[n].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,r):i.on(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var n,o=Math.max,a=Math.abs,r=/left|center|right/,l=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType,o=!s&&!n;return{element:i,isWindow:s,isDocument:n,offset:o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return d.apply(this,arguments);n=t.extend({},n);var u,p,f,g,m,_,v=t(n.of),b=t.position.getWithinInfo(n.within),y=t.position.getScrollInfo(b),w=(n.collision||"flip").split(" "),k={};return _=s(v),v[0].preventDefault&&(n.at="left top"),p=_.width,f=_.height,g=_.offset,m=t.extend({},g),t.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",t=h.exec(i[0]),e=h.exec(i[1]),k[this]=[t?t[0]:0,e?e[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===n.at[0]?m.left+=p:"center"===n.at[0]&&(m.left+=p/2),"bottom"===n.at[1]?m.top+=f:"center"===n.at[1]&&(m.top+=f/2),u=e(k.at,p,f),m.left+=u[0],m.top+=u[1],this.each(function(){var s,r,l=t(this),h=l.outerWidth(),c=l.outerHeight(),d=i(this,"marginLeft"),_=i(this,"marginTop"),x=h+d+i(this,"marginRight")+y.width,C=c+_+i(this,"marginBottom")+y.height,D=t.extend({},m),T=e(k.my,l.outerWidth(),l.outerHeight());"right"===n.my[0]?D.left-=h:"center"===n.my[0]&&(D.left-=h/2),"bottom"===n.my[1]?D.top-=c:"center"===n.my[1]&&(D.top-=c/2),D.left+=T[0],D.top+=T[1],s={marginLeft:d,marginTop:_},t.each(["left","top"],function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](D,{targetWidth:p,targetHeight:f,elemWidth:h,elemHeight:c,collisionPosition:s,collisionWidth:x,collisionHeight:C,offset:[u[0]+T[0],u[1]+T[1]],my:n.my,at:n.at,within:b,elem:l})}),n.using&&(r=function(t){var e=g.left-D.left,i=e+p-h,s=g.top-D.top,r=s+f-c,u={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:l,left:D.left,top:D.top,width:h,height:c},horizontal:0>i?"left":e>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};h>p&&p>a(e+i)&&(u.horizontal="center"),c>f&&f>a(s+r)&&(u.vertical="middle"),u.important=o(a(e),a(i))>o(a(s),a(r))?"horizontal":"vertical",n.using.call(this,t,u)}),l.offset(t.extend(D,{using:r}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,l=n-r,h=r+e.collisionWidth-a-n;e.collisionWidth>a?l>0&&0>=h?(i=t.left+l+e.collisionWidth-a-n,t.left+=l-i):t.left=h>0&&0>=l?n:l>h?n+a-e.collisionWidth:n:l>0?t.left+=l:h>0?t.left-=h:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,l=n-r,h=r+e.collisionHeight-a-n;e.collisionHeight>a?l>0&&0>=h?(i=t.top+l+e.collisionHeight-a-n,t.top+=l-i):t.top=h>0&&0>=l?n:l>h?n+a-e.collisionHeight:n:l>0?t.top+=l:h>0?t.top-=h:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,r=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-r-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-r-o,(0>i||a(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-l,(s>0||u>a(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,r=n.height,l=n.isWindow?n.scrollTop:n.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-r-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-r-o,(0>s||a(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-l,(i>0||u>a(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(i,s){var n,o,a,r,l,h=i.nodeName.toLowerCase();return"area"===h?(n=i.parentNode,o=n.name,i.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap='#"+o+"']"),a.length>0&&a.is(":visible")):!1):(/^(input|select|textarea|button|object)$/.test(h)?(r=!i.disabled,r&&(l=t(i).closest("fieldset")[0],l&&(r=!l.disabled))):r="a"===h?i.href||s:s,r&&t(i).is(":visible")&&e(t(i)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var i=e.data("ui-form-reset-instances");t.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,i){function s(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),t.fn.labels=function(){var e,i,s,n,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),s=this.attr("id"),s&&(e=this.eq(0).parents().last(),o=e.add(e.length?e.siblings():this.siblings()),i="label[for='"+t.ui.escapeSelector(s)+"']",n=n.add(o.find(i).addBack(i))),this.pushStack(n))},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),s=null!=i;return(!s||i>=0)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var h=!1;t(document).on("mouseup",function(){h=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!h){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),h=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,h=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)
},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,l,h,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)l=s.snapElements[d].left-s.margins.left,h=l+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,l-g>_||m>h+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(l-_),r=g>=Math.abs(h-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(l-m),r=g>=Math.abs(h-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,l=this._change[o];return this._updatePrevProperties(),l?(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(a,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),a&&c&&(t.top=l-e.minHeight),n&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,l=t(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(l.containerElement=t(d),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,n=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(d,"left")?d.scrollWidth:o,r=l._hasScroll(d)?d.scrollHeight:n,l.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,h=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=l),h.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?l.left:0),h.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-l.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-l.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,h=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,u=Math.round((n.width-o.width)/h)*h,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=l,_&&(p+=h),v&&(f+=c),g&&(p-=h),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-h>0?(i.size.width=p,i.position.left=a.left-u):(p=h-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;
this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+h>r&&l>s+h,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&l>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;return o?(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1)):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],l=[],h=this._connectWith();if(h&&e)for(s=h.length-1;s>=0;s--)for(o=t(h[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=l.length-1;s>=0;s--)l[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,l,h,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,h=r.length;h>s;s++)l=t(r[s]),l.data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]);return e._addClass(n,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,l,h,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(l=this.items[s].item.offset()[a],h=!1,e[u]-l>this.items[s][r]/2&&(h=!0),n>Math.abs(e[u]-l)&&(n=Math.abs(e[u]-l),o=this.items[s],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.extend(t.ui,{datepicker:{version:"1.12.1"}});var c;t.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.on("focus",this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.on("click",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,o){var r,l,h,c,u,d=this._dialogInst;return d||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),a(d.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,h=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),c===n&&(c=null))},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var n,o,r,l,h=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),h&&(this._curInst===h&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(h,"min"),l=this._getMinMaxDate(h,"max"),a(h.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(h.settings.minDate=this._formatDate(h,r)),null!==l&&void 0!==n.dateFormat&&void 0===n.maxDate&&(h.settings.maxDate=this._formatDate(h,l)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,o),this._updateAlternate(h),this._updateDatepicker(h)),void 0)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,n=t.datepicker._getInst(e.target);return t.datepicker._get(n,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var s,n,o,r,l,h,c;s=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==s&&(t.datepicker._curInst.dpDiv.stop(!0,!0),s&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(s,"beforeShow"),o=n?n.apply(e,[e,s]):{},o!==!1&&(a(s.settings,o),s.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(s),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(s),l=t.datepicker._checkOffset(s,l,r),s.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),s.inline||(h=t.datepicker._get(s,"showAnim"),c=t.datepicker._get(s,"duration"),s.dpDiv.css("z-index",i(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?s.dpDiv.show(h,t.datepicker._get(s,"showOptions"),c):s.dpDiv[h||"show"](h?c:null),t.datepicker._shouldFocusInput(s)&&s.input.trigger("focus"),t.datepicker._curInst=s))}},_updateDatepicker:function(e){this.maxRows=4,c=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],a=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+o>h&&h>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),s=this._get(a,"duration"),n=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),s,n):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)
},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).val(n))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,o,a,r,l=0,h=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,d=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,_=-1,v=-1,b=!1,y=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},w=function(t){var e=y(t),s="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n="y"===t?s:1,o=RegExp("^\\d{"+n+","+s+"}"),a=i.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},k=function(e,s,n){var o=-1,a=t.map(y(e)?n:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var s=e[1];return i.substr(l,s.length).toLowerCase()===s.toLowerCase()?(o=e[0],l+=s.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==e.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;e.length>n;n++)if(b)"'"!==e.charAt(n)||y("'")?x():b=!1;else switch(e.charAt(n)){case"d":_=w("d");break;case"D":k("D",u,d);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":r=new Date(w("@")),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(i.length>l&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),v>-1)for(m=1,_=v;;){if(o=this._getDaysInMonth(g,m-1),o>=_)break;m++,_-=o}if(r=this._daylightSavingAdjust(new Date(g,m-1,_)),r.getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==_)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},h=function(t,e,i){var s=""+e;if(l(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return l(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||l("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=l("y")?e.getFullYear():(10>e.getFullYear()%100?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=l.exec(i);h;){switch(h[2]||"d"){case"d":case"D":r+=parseInt(h[1],10);break;case"w":case"W":r+=7*parseInt(h[1],10);break;case"m":case"M":a+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}h=l.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,l,h,c,u,d,p,f,g,m,_,v,b,y,w,k,x,C,D,T,I,M,P,S,N,H,z,A,O,E,W,F,L,R=new Date,Y=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),B=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),$=1!==U[0]||1!==U[1],G=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-U[0]*U[1]+1,Q.getDate())),e=J&&J>e?J:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-X,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+X,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?G:Y,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(B?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,C=0;U[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),T=" ui-corner-all",I="",$){if(I+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:I+=" ui-datepicker-group-first",T=" ui-corner-"+(B?"right":"left");break;case U[1]-1:I+=" ui-datepicker-group-last",T=" ui-corner-"+(B?"left":"right");break;default:I+=" ui-datepicker-group-middle",T=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===k?B?o:s:"")+(/all|right/.test(T)&&0===k?B?s:o:"")+this._generateMonthYearHeader(t,Z,te,J,Q,k>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)P=(w+c)%7,M+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[P]+"'>"+p[P]+"</span></th>";for(I+=M+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),N=(this._getFirstDayOfMonth(te,Z)-c+7)%7,H=Math.ceil((N+S)/7),z=$?this.maxRows>H?this.maxRows:H:H,this.maxRows=z,A=this._daylightSavingAdjust(new Date(te,Z,1-N)),O=0;z>O;O++){for(I+="<tr>",E=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(A)+"</td>":"",w=0;7>w;w++)W=m?m.apply(t.input?t.input[0]:null,[A]):[!0,""],F=A.getMonth()!==Z,L=F&&!v||!W[0]||J&&J>A||Q&&A>Q,E+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(A.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===A.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!_?"":" "+W[1]+(A.getTime()===G.getTime()?" "+this._currentClass:"")+(A.getTime()===Y.getTime()?" ui-datepicker-today":""))+"'"+(F&&!_||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+A.getMonth()+"' data-year='"+A.getFullYear()+"'")+">"+(F&&!_?"&#xa0;":L?"<span class='ui-state-default'>"+A.getDate()+"</span>":"<a class='ui-state-default"+(A.getTime()===Y.getTime()?" ui-state-highlight":"")+(A.getTime()===G.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+A.getDate()+"</a>")+"</td>",A.setDate(A.getDate()+1),A=this._daylightSavingAdjust(A);I+=E+"</tr>"}Z++,Z>11&&(Z=0,te++),I+="</tbody></table>"+($?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=I}y+=x}return y+=h,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var l,h,c,u,d,p,f,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(l=s&&s.getFullYear()===i,h=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=s.getMonth())&&(!h||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(v||(b+=y+(!o&&m&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!_)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!o&&m&&_?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),n=t.selectedMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new s,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker,t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===e.range||"max"===e.range)&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,l,h,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),l=o.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,n,o=this.value(),a=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&this.options.range===!0&&(i=0===e?Math.min(n,i):Math.max(n,i)),a[e]=i),i!==o&&(s=this._trigger("slide",t,this._uiHash(e,i,a)),s!==!1&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=n-1;s>=0;s--)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,s=Math.round((t-e)/i)*i;t=s+e,t>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,l=this,h=this._animateOff?!1:r.animate,c={};this._hasMultipleValues()?this.handles.each(function(s){i=100*((l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},r.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(e){var i,s,n,o,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),i=this._start(e,a),i===!1))return}switch(o=this.options.step,s=n=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-o)}this._slide(e,a,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}})});

/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);

var DateFormatter;!function(){"use strict";var e,t,a,n,r,o,i;o=864e5,i=3600,e=function(e,t){return"string"==typeof e&&"string"==typeof t&&e.toLowerCase()===t.toLowerCase()},t=function(e,a,n){var r=n||"0",o=e.toString();return o.length<a?t(r+o,a):o},a=function(e){var t,n;for(e=e||{},t=1;t<arguments.length;t++)if(n=arguments[t])for(var r in n)n.hasOwnProperty(r)&&("object"==typeof n[r]?a(e[r],n[r]):e[r]=n[r]);return e},n=function(e,t){for(var a=0;a<t.length;a++)if(t[a].toLowerCase()===e.toLowerCase())return a;return-1},r={dateSettings:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["AM","PM"],ordinal:function(e){var t=e%10,a={1:"st",2:"nd",3:"rd"};return 1!==Math.floor(e%100/10)&&a[t]?a[t]:"th"}},separators:/[ \-+\/\.T:@]/g,validParts:/[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,intParts:/[djwNzmnyYhHgGis]/g,tzParts:/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,tzClip:/[^-+\dA-Z]/g},(DateFormatter=function(e){var t=this,n=a(r,e);t.dateSettings=n.dateSettings,t.separators=n.separators,t.validParts=n.validParts,t.intParts=n.intParts,t.tzParts=n.tzParts,t.tzClip=n.tzClip}).prototype={constructor:DateFormatter,getMonth:function(e){var t,a=this;return 0===(t=n(e,a.dateSettings.monthsShort)+1)&&(t=n(e,a.dateSettings.months)+1),t},parseDate:function(t,a){var n,r,o,i,s,d,u,l,f,c,h=this,m=!1,g=!1,p=h.dateSettings,y={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0};if(!t)return null;if(t instanceof Date)return t;if("U"===a)return(o=parseInt(t))?new Date(1e3*o):t;switch(typeof t){case"number":return new Date(t);case"string":break;default:return null}if(!(n=a.match(h.validParts))||0===n.length)throw new Error("Invalid date format definition.");for(r=t.replace(h.separators,"\0").split("\0"),o=0;o<r.length;o++)switch(i=r[o],s=parseInt(i),n[o]){case"y":case"Y":if(!s)return null;f=i.length,y.year=2===f?parseInt((70>s?"20":"19")+i):s,m=!0;break;case"m":case"n":case"M":case"F":if(isNaN(s)){if(!((d=h.getMonth(i))>0))return null;y.month=d}else{if(!(s>=1&&12>=s))return null;y.month=s}m=!0;break;case"d":case"j":if(!(s>=1&&31>=s))return null;y.day=s,m=!0;break;case"g":case"h":if(u=n.indexOf("a")>-1?n.indexOf("a"):n.indexOf("A")>-1?n.indexOf("A"):-1,c=r[u],u>-1)l=e(c,p.meridiem[0])?0:e(c,p.meridiem[1])?12:-1,s>=1&&12>=s&&l>-1?y.hour=s+l-1:s>=0&&23>=s&&(y.hour=s);else{if(!(s>=0&&23>=s))return null;y.hour=s}g=!0;break;case"G":case"H":if(!(s>=0&&23>=s))return null;y.hour=s,g=!0;break;case"i":if(!(s>=0&&59>=s))return null;y.min=s,g=!0;break;case"s":if(!(s>=0&&59>=s))return null;y.sec=s,g=!0}if(!0===m&&y.year&&y.month&&y.day)y.date=new Date(y.year,y.month-1,y.day,y.hour,y.min,y.sec,0);else{if(!0!==g)return null;y.date=new Date(0,0,0,y.hour,y.min,y.sec,0)}return y.date},guessDate:function(e,t){if("string"!=typeof e)return e;var a,n,r,o,i,s,d=this,u=e.replace(d.separators,"\0").split("\0"),l=/^[djmn]/g,f=t.match(d.validParts),c=new Date,h=0;if(!l.test(f[0]))return e;for(r=0;r<u.length;r++){if(h=2,i=u[r],s=parseInt(i.substr(0,2)),isNaN(s))return null;switch(r){case 0:"m"===f[0]||"n"===f[0]?c.setMonth(s-1):c.setDate(s);break;case 1:"m"===f[0]||"n"===f[0]?c.setDate(s):c.setMonth(s-1);break;case 2:if(n=c.getFullYear(),a=i.length,h=4>a?a:4,!(n=parseInt(4>a?n.toString().substr(0,4-a)+i:i.substr(0,4))))return null;c.setFullYear(n);break;case 3:c.setHours(s);break;case 4:c.setMinutes(s);break;case 5:c.setSeconds(s)}(o=i.substr(h)).length>0&&u.splice(r+1,0,o)}return c},parseFormat:function(e,a){var n,r=this,s=r.dateSettings,d=/\\?(.?)/gi,u=function(e,t){return n[e]?n[e]():t};return n={d:function(){return t(n.j(),2)},D:function(){return s.daysShort[n.w()]},j:function(){return a.getDate()},l:function(){return s.days[n.w()]},N:function(){return n.w()||7},w:function(){return a.getDay()},z:function(){var e=new Date(n.Y(),n.n()-1,n.j()),t=new Date(n.Y(),0,1);return Math.round((e-t)/o)},W:function(){var e=new Date(n.Y(),n.n()-1,n.j()-n.N()+3),a=new Date(e.getFullYear(),0,4);return t(1+Math.round((e-a)/o/7),2)},F:function(){return s.months[a.getMonth()]},m:function(){return t(n.n(),2)},M:function(){return s.monthsShort[a.getMonth()]},n:function(){return a.getMonth()+1},t:function(){return new Date(n.Y(),n.n(),0).getDate()},L:function(){var e=n.Y();return e%4==0&&e%100!=0||e%400==0?1:0},o:function(){var e=n.n(),t=n.W();return n.Y()+(12===e&&9>t?1:1===e&&t>9?-1:0)},Y:function(){return a.getFullYear()},y:function(){return n.Y().toString().slice(-2)},a:function(){return n.A().toLowerCase()},A:function(){var e=n.G()<12?0:1;return s.meridiem[e]},B:function(){var e=a.getUTCHours()*i,n=60*a.getUTCMinutes(),r=a.getUTCSeconds();return t(Math.floor((e+n+r+i)/86.4)%1e3,3)},g:function(){return n.G()%12||12},G:function(){return a.getHours()},h:function(){return t(n.g(),2)},H:function(){return t(n.G(),2)},i:function(){return t(a.getMinutes(),2)},s:function(){return t(a.getSeconds(),2)},u:function(){return t(1e3*a.getMilliseconds(),6)},e:function(){return/\((.*)\)/.exec(String(a))[1]||"Coordinated Universal Time"},I:function(){return new Date(n.Y(),0)-Date.UTC(n.Y(),0)!=new Date(n.Y(),6)-Date.UTC(n.Y(),6)?1:0},O:function(){var e=a.getTimezoneOffset(),n=Math.abs(e);return(e>0?"-":"+")+t(100*Math.floor(n/60)+n%60,4)},P:function(){var e=n.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return(String(a).match(r.tzParts)||[""]).pop().replace(r.tzClip,"")||"UTC"},Z:function(){return 60*-a.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(d,u)},r:function(){return"D, d M Y H:i:s O".replace(d,u)},U:function(){return a.getTime()/1e3||0}},u(e,e)},formatDate:function(e,t){var a,n,r,o,i,s=this,d="";if("string"==typeof e&&!(e=s.parseDate(e,t)))return null;if(e instanceof Date){for(r=t.length,a=0;r>a;a++)"S"!==(i=t.charAt(a))&&"\\"!==i&&(a>0&&"\\"===t.charAt(a-1)?d+=i:(o=s.parseFormat(i,e),a!==r-1&&s.intParts.test(i)&&"S"===t.charAt(a+1)&&(n=parseInt(o)||0,o+=s.dateSettings.ordinal(n)),d+=o));return d}return""}}}();var datetimepickerFactory=function(e){"use strict";function t(e,t,a){this.date=e,this.desc=t,this.style=a}var a={i18n:{ar:{months:[" ","","","","","","","",""," "," "," "],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","","",""]},ro:{months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],dayOfWeekShort:["Du","Lu","Ma","Mi","Jo","Vi","S"],dayOfWeek:["Duminic","Luni","Mari","Miercuri","Joi","Vineri","Smbt"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeekShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],dayOfWeek:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},is:{months:["Janar","Febrar","Mars","Aprl","Ma","Jn","Jl","gst","September","Oktber","Nvember","Desember"],dayOfWeekShort:["Sun","Mn","ri","Mi","Fim","Fs","Lau"],dayOfWeek:["Sunnudagur","Mnudagur","rijudagur","Mivikudagur","Fimmtudagur","Fstudagur","Laugardagur"]},bg:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},fa:{months:["","","","","","","","","","","",""],dayOfWeekShort:["",""," ","","","",""],dayOfWeek:["","","","","","","",""]},ru:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},uk:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","'",""]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},el:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},de:{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeekShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayOfWeek:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeekShort:["zo","ma","di","wo","do","vr","za"],dayOfWeek:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},tr:{months:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],dayOfWeekShort:["Paz","Pts","Sal","ar","Per","Cum","Cts"],dayOfWeek:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},fr:{months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],dayOfWeekShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayOfWeek:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeekShort:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],dayOfWeek:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"]},th:{months:["","","","","","","","","","","",""],dayOfWeekShort:[".",".",".",".",".",".","."],dayOfWeek:["","","","","","","",""]},pl:{months:["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie"],dayOfWeekShort:["nd","pn","wt","r","cz","pt","sb"],dayOfWeek:["niedziela","poniedziaek","wtorek","roda","czwartek","pitek","sobota"]},pt:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayOfWeek:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"]},ch:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},km:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},kr:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayOfWeek:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"]},da:{months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],dayOfWeekShort:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dayOfWeek:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeekShort:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dayOfWeek:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"]},ja:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},vi:{months:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12"],dayOfWeekShort:["CN","T2","T3","T4","T5","T6","T7"],dayOfWeek:["Ch nht","Th hai","Th ba","Th t","Th nm","Th su","Th by"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeekShort:["Ned","Pon","Tor","Sre","et","Pet","Sob"],dayOfWeek:["Nedelja","Ponedeljek","Torek","Sreda","etrtek","Petek","Sobota"]},cs:{months:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],dayOfWeekShort:["Ne","Po","t","St","t","P","So"]},hu:{months:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],dayOfWeekShort:["Va","H","Ke","Sze","Cs","P","Szo"],dayOfWeek:["vasrnap","htf","kedd","szerda","cstrtk","pntek","szombat"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeekShort:["B","Be","a","","Ca","C",""],dayOfWeek:["Bazar","Bazar ertsi","rnb axam","rnb","Cm axam","Cm","nb"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sri","et","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","etvrtak","Petak","Subota"]},ca:{months:["Gener","Febrer","Mar","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeekShort:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],dayOfWeek:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},et:{months:["Jaanuar","Veebruar","Mrts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeekShort:["P","E","T","K","N","R","L"],dayOfWeek:["Phapev","Esmaspev","Teisipev","Kolmapev","Neljapev","Reede","Laupev"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeekShort:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."],dayOfWeek:["Igandea","Astelehena","Asteartea","Asteazkena","Osteguna","Ostirala","Larunbata"]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Keskuu","Heinkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeekShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayOfWeek:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"],dayOfWeek:["Domingo","Luns","Martes","Mrcores","Xoves","Venres","Sbado"]},hr:{months:["Sijeanj","Veljaa","Oujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeekShort:["Ned","Pon","Uto","Sri","et","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","etvrtak","Petak","Subota"]},ko:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},lt:{months:["Sausio","Vasario","Kovo","Balandio","Gegus","Birelio","Liepos","Rugpjio","Rugsjo","Spalio","Lapkriio","Gruodio"],dayOfWeekShort:["Sek","Pir","Ant","Tre","Ket","Pen","e"],dayOfWeek:["Sekmadienis","Pirmadienis","Antradienis","Treiadienis","Ketvirtadienis","Penktadienis","etadienis"]},lv:{months:["Janvris","Februris","Marts","Aprlis ","Maijs","Jnijs","Jlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeekShort:["Sv","Pr","Ot","Tr","Ct","Pk","St"],dayOfWeek:["Svtdiena","Pirmdiena","Otrdiena","Trediena","Ceturtdiena","Piektdiena","Sestdiena"]},mk:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},mn:{months:["1- ","2- ","3- ","4- ","5- ","6- ","7- ","8- ","9- ","10- ","11- ","12- "],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},"pt-BR":{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dayOfWeek:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"]},sk:{months:["Janur","Februr","Marec","Aprl","Mj","Jn","Jl","August","September","Oktber","November","December"],dayOfWeekShort:["Ne","Po","Ut","St","t","Pi","So"],dayOfWeek:["Nedea","Pondelok","Utorok","Streda","tvrtok","Piatok","Sobota"]},sq:{months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nntor","Dhjetor"],dayOfWeekShort:["Die","Hn","Mar","Mr","Enj","Pre","Shtu"],dayOfWeek:["E Diel","E Hn","E Mart","E Mrkur","E Enjte","E Premte","E Shtun"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sre","et","Pet","Sub"],dayOfWeek:["Nedelja","Ponedeljak","Utorak","Sreda","etvrtak","Petak","Subota"]},sr:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"],dayOfWeek:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"]},"zh-TW":{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},zh:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},ug:{months:["1-","2-","3-","4-","5-","6-","7-","8-","9-","10-","11-","12-"],dayOfWeek:["","","","","","",""]},he:{months:["","","","","","","","","","","",""],dayOfWeekShort:["'","'","'","'","'","'",""],dayOfWeek:["","","","","","","",""]},hy:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},kg:{months:[" "," "," "," ","","",""," "," "," "," "," "],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},rm:{months:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],dayOfWeekShort:["Du","Gli","Ma","Me","Gie","Ve","So"],dayOfWeek:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"]},ka:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]}},ownerDocument:document,contentWindow:window,value:"",rtl:!1,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,openOnFocus:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,minDateTime:!1,disabledMinTime:!1,disabledMaxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",touchMovedThreshold:5,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0,showApplyButton:!1},n=null,r="en",o={meridiem:["AM","PM"]},i=function(){var t=a.i18n[r],i={days:t.dayOfWeek,daysShort:t.dayOfWeekShort,months:t.months,monthsShort:e.map(t.months,function(e){return e.substring(0,3)})};"function"==typeof DateFormatter&&(n=new DateFormatter({dateSettings:e.extend({},o,i)}))};e.datetimepicker={setLocale:function(e){var t=a.i18n[e]?e:"en";r!==t&&(r=t,i())},setDateFormatter:function(e){n=e},RFC_2822:"D, d M Y H:i:s O",ATOM:"Y-m-dTH:i:sP",ISO_8601:"Y-m-dTH:i:sO",RFC_822:"D, d M y H:i:s O",RFC_850:"l, d-M-y H:i:s T",RFC_1036:"D, d M y H:i:s O",RFC_1123:"D, d M Y H:i:s O",RSS:"D, d M Y H:i:s O",W3C:"Y-m-dTH:i:sP"},i(),window.getComputedStyle||(window.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var a=/(-([a-z]))/g;return"float"===t&&(t="styleFloat"),a.test(t)&&(t=t.replace(a,function(e,t,a){return a.toUpperCase()})),e.currentStyle[t]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var a,n;for(a=t||0,n=this.length;a<n;a+=1)if(this[a]===e)return a;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t,a){return this.each(function(){var n,r,o,i,s,d=e(this),u=function(e){var t,a={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],a.x=t.clientX,a.y=t.clientY):"mousedown"!==e.type&&"mouseup"!==e.type&&"mousemove"!==e.type&&"mouseover"!==e.type&&"mouseout"!==e.type&&"mouseenter"!==e.type&&"mouseleave"!==e.type||(a.x=e.clientX,a.y=e.clientY),a},l=100,f=!1,c=0,h=0,m=0,g=!1,p=0,y=function(){};"hide"!==a?(e(this).hasClass("xdsoft_scroller_box")||(n=d.children().eq(0),r=d[0].clientHeight,o=n[0].offsetHeight,i=e('<div class="xdsoft_scrollbar"></div>'),s=e('<div class="xdsoft_scroller"></div>'),i.append(s),d.addClass("xdsoft_scroller_box").append(i),y=function(e){var t=u(e).y-c+p;t<0&&(t=0),t+s[0].offsetHeight>m&&(t=m-s[0].offsetHeight),d.trigger("scroll_element.xdsoft_scroller",[l?t/l:0])},s.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(n){r||d.trigger("resize_scroll.xdsoft_scroller",[a]),c=u(n).y,p=parseInt(s.css("margin-top"),10),m=i[0].offsetHeight,"mousedown"===n.type||"touchstart"===n.type?(t.ownerDocument&&e(t.ownerDocument.body).addClass("xdsoft_noselect"),e([t.ownerDocument.body,t.contentWindow]).on("touchend mouseup.xdsoft_scroller",function a(){e([t.ownerDocument.body,t.contentWindow]).off("touchend mouseup.xdsoft_scroller",a).off("mousemove.xdsoft_scroller",y).removeClass("xdsoft_noselect")}),e(t.ownerDocument.body).on("mousemove.xdsoft_scroller",y)):(g=!0,n.stopPropagation(),n.preventDefault())}).on("touchmove",function(e){g&&(e.preventDefault(),y(e))}).on("touchend touchcancel",function(){g=!1,p=0}),d.on("scroll_element.xdsoft_scroller",function(e,t){r||d.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:t<0||isNaN(t)?0:t,s.css("margin-top",l*t),setTimeout(function(){n.css("marginTop",-parseInt((n[0].offsetHeight-r)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,a){var u,f;r=d[0].clientHeight,o=n[0].offsetHeight,f=(u=r/o)*i[0].offsetHeight,u>1?s.hide():(s.show(),s.css("height",parseInt(f>10?f:10,10)),l=i[0].offsetHeight-s[0].offsetHeight,!0!==a&&d.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(n.css("marginTop"),10))/(o-r)]))}),d.on("mousewheel",function(e){var t=Math.abs(parseInt(n.css("marginTop"),10));return(t-=20*e.deltaY)<0&&(t=0),d.trigger("scroll_element.xdsoft_scroller",[t/(o-r)]),e.stopPropagation(),!1}),d.on("touchstart",function(e){f=u(e),h=Math.abs(parseInt(n.css("marginTop"),10))}),d.on("touchmove",function(e){if(f){e.preventDefault();var t=u(e);d.trigger("scroll_element.xdsoft_scroller",[(h-(t.y-f.y))/(o-r)])}}),d.on("touchend touchcancel",function(){f=!1,h=0})),d.trigger("resize_scroll.xdsoft_scroller",[a])):d.find(".xdsoft_scrollbar").hide()})},e.fn.datetimepicker=function(o,i){var s,d,u=this,l=48,f=57,c=96,h=105,m=17,g=46,p=13,y=27,v=8,D=37,b=38,k=39,x=40,T=9,S=116,w=65,M=67,O=86,W=90,_=89,F=!1,C=e.isPlainObject(o)||!o?e.extend(!0,{},a,o):e.extend(!0,{},a),P=0,A=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function t(){e.is(":disabled")||e.data("xdsoft_datetimepicker")||(clearTimeout(P),P=setTimeout(function(){e.data("xdsoft_datetimepicker")||s(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",t).trigger("open.xdsoft")},100))})};return s=function(a){function i(){var e,t=!1;return C.startDate?t=Y.strToDate(C.startDate):(t=C.value||(a&&a.val&&a.val()?a.val():""))?t=Y.strToDateTime(t):C.defaultDate&&(t=Y.strToDateTime(C.defaultDate),C.defaultTime&&(e=Y.strtotime(C.defaultTime),t.setHours(e.getHours()),t.setMinutes(e.getMinutes()))),t&&Y.isValidDate(t)?H.data("changed",!0):t="",t||0}function s(t){var n=function(e,t){var a=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(a).test(t)},r=function(e,a){if(!(e="string"==typeof e||e instanceof String?t.ownerDocument.getElementById(e):e))return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd("character",a),n.moveStart("character",a),n.select(),!0}return!!e.setSelectionRange&&(e.setSelectionRange(a,a),!0)};t.mask&&a.off("keydown.xdsoft"),!0===t.mask&&("undefined"!=typeof moment?t.mask=t.format.replace(/Y{4}/g,"9999").replace(/Y{2}/g,"99").replace(/M{2}/g,"19").replace(/D{2}/g,"39").replace(/H{2}/g,"29").replace(/m{2}/g,"59").replace(/s{2}/g,"59"):t.mask=t.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===e.type(t.mask)&&(n(t.mask,a.val())||(a.val(t.mask.replace(/[0-9]/g,"_")),r(a[0],0)),a.on("paste.xdsoft",function(o){var i=(o.clipboardData||o.originalEvent.clipboardData||window.clipboardData).getData("text"),s=this.value,d=this.selectionStart;return s=s.substr(0,d)+i+s.substr(d+i.length),d+=i.length,n(t.mask,s)?(this.value=s,r(this,d)):""===e.trim(s)?this.value=t.mask.replace(/[0-9]/g,"_"):a.trigger("error_input.xdsoft"),o.preventDefault(),!1}),a.on("keydown.xdsoft",function(o){var i,s=this.value,d=o.which,u=this.selectionStart,C=this.selectionEnd,P=u!==C;if(d>=l&&d<=f||d>=c&&d<=h||d===v||d===g){for(i=d===v||d===g?"_":String.fromCharCode(c<=d&&d<=h?d-l:d),d===v&&u&&!P&&(u-=1);;){var A=t.mask.substr(u,1),Y=u<t.mask.length,j=u>0;if(!(/[^0-9_]/.test(A)&&Y&&j))break;u+=d!==v||P?1:-1}if(P){var H=C-u,J=t.mask.replace(/[0-9]/g,"_"),z=J.substr(u,H).substr(1);s=s.substr(0,u)+(i+z)+s.substr(u+H)}else s=s.substr(0,u)+i+s.substr(u+1);if(""===e.trim(s))s=J;else if(u===t.mask.length)return o.preventDefault(),!1;for(u+=d===v?0:1;/[^0-9_]/.test(t.mask.substr(u,1))&&u<t.mask.length&&u>0;)u+=d===v?0:1;n(t.mask,s)?(this.value=s,r(this,u)):""===e.trim(s)?this.value=t.mask.replace(/[0-9]/g,"_"):a.trigger("error_input.xdsoft")}else if(-1!==[w,M,O,W,_].indexOf(d)&&F||-1!==[y,b,x,D,k,S,m,T,p].indexOf(d))return!0;return o.preventDefault(),!1}))}var d,u,P,A,Y,j,H=e('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),J=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),z=e('<div class="xdsoft_datepicker active"></div>'),I=e('<div class="xdsoft_monthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),N=e('<div class="xdsoft_calendar"></div>'),L=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),E=L.find(".xdsoft_time_box").eq(0),R=e('<div class="xdsoft_time_variant"></div>'),V=e('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),B=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),G=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),U=!1,q=0;C.id&&H.attr("id",C.id),C.style&&H.attr("style",C.style),C.weeks&&H.addClass("xdsoft_showweeks"),C.rtl&&H.addClass("xdsoft_rtl"),H.addClass("xdsoft_"+C.theme),H.addClass(C.className),I.find(".xdsoft_month span").after(B),I.find(".xdsoft_year span").after(G),I.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(t){var a,n,r=e(this).find(".xdsoft_select").eq(0),o=0,i=0,s=r.is(":visible");for(I.find(".xdsoft_select").hide(),Y.currentTime&&(o=Y.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),r[s?"hide":"show"](),a=r.find("div.xdsoft_option"),n=0;n<a.length&&a.eq(n).data("value")!==o;n+=1)i+=a[0].offsetHeight;return r.xdsoftScroller(C,i/(r.children()[0].offsetHeight-r[0].clientHeight)),t.stopPropagation(),!1});var X=function(e){this.touchStartPosition=this.touchStartPosition||e.originalEvent.touches[0];var t=e.originalEvent.touches[0],a=Math.abs(this.touchStartPosition.clientX-t.clientX),n=Math.abs(this.touchStartPosition.clientY-t.clientY);Math.sqrt(a*a+n*n)>C.touchMovedThreshold&&(this.touchMoved=!0)};I.find(".xdsoft_select").xdsoftScroller(C).on("touchstart mousedown.xdsoft",function(e){this.touchMoved=!1,this.touchStartPosition=e.originalEvent.touches[0],e.stopPropagation(),e.preventDefault()}).on("touchmove",".xdsoft_option",X).on("touchend mousedown.xdsoft",".xdsoft_option",function(){if(!this.touchMoved){void 0!==Y.currentTime&&null!==Y.currentTime||(Y.currentTime=Y.now());var t=Y.currentTime.getFullYear();Y&&Y.currentTime&&Y.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),H.trigger("xchange.xdsoft"),C.onChangeMonth&&e.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(H,Y.currentTime,H.data("input")),t!==Y.currentTime.getFullYear()&&e.isFunction(C.onChangeYear)&&C.onChangeYear.call(H,Y.currentTime,H.data("input"))}}),H.getValue=function(){return Y.getCurrentTime()},H.setOptions=function(r){var o={};C=e.extend(!0,{},C,r),r.allowTimes&&e.isArray(r.allowTimes)&&r.allowTimes.length&&(C.allowTimes=e.extend(!0,[],r.allowTimes)),r.weekends&&e.isArray(r.weekends)&&r.weekends.length&&(C.weekends=e.extend(!0,[],r.weekends)),r.allowDates&&e.isArray(r.allowDates)&&r.allowDates.length&&(C.allowDates=e.extend(!0,[],r.allowDates)),r.allowDateRe&&"[object String]"===Object.prototype.toString.call(r.allowDateRe)&&(C.allowDateRe=new RegExp(r.allowDateRe)),r.highlightedDates&&e.isArray(r.highlightedDates)&&r.highlightedDates.length&&(e.each(r.highlightedDates,function(a,r){var i,s=e.map(r.split(","),e.trim),d=new t(n.parseDate(s[0],C.formatDate),s[1],s[2]),u=n.formatDate(d.date,C.formatDate);void 0!==o[u]?(i=o[u].desc)&&i.length&&d.desc&&d.desc.length&&(o[u].desc=i+"\n"+d.desc):o[u]=d}),C.highlightedDates=e.extend(!0,[],o)),r.highlightedPeriods&&e.isArray(r.highlightedPeriods)&&r.highlightedPeriods.length&&(o=e.extend(!0,[],C.highlightedDates),e.each(r.highlightedPeriods,function(a,r){var i,s,d,u,l,f,c;if(e.isArray(r))i=r[0],s=r[1],d=r[2],c=r[3];else{var h=e.map(r.split(","),e.trim);i=n.parseDate(h[0],C.formatDate),s=n.parseDate(h[1],C.formatDate),d=h[2],c=h[3]}for(;i<=s;)u=new t(i,d,c),l=n.formatDate(i,C.formatDate),i.setDate(i.getDate()+1),void 0!==o[l]?(f=o[l].desc)&&f.length&&u.desc&&u.desc.length&&(o[l].desc=f+"\n"+u.desc):o[l]=u}),C.highlightedDates=e.extend(!0,[],o)),r.disabledDates&&e.isArray(r.disabledDates)&&r.disabledDates.length&&(C.disabledDates=e.extend(!0,[],r.disabledDates)),r.disabledWeekDays&&e.isArray(r.disabledWeekDays)&&r.disabledWeekDays.length&&(C.disabledWeekDays=e.extend(!0,[],r.disabledWeekDays)),!C.open&&!C.opened||C.inline||a.trigger("open.xdsoft"),C.inline&&(U=!0,H.addClass("xdsoft_inline"),a.after(H).hide()),C.inverseButton&&(C.next="xdsoft_prev",C.prev="xdsoft_next"),C.datepicker?z.addClass("active"):z.removeClass("active"),C.timepicker?L.addClass("active"):L.removeClass("active"),C.value&&(Y.setCurrentTime(C.value),a&&a.val&&a.val(Y.str)),isNaN(C.dayOfWeekStart)?C.dayOfWeekStart=0:C.dayOfWeekStart=parseInt(C.dayOfWeekStart,10)%7,C.timepickerScrollbar||E.xdsoftScroller(C,"hide"),C.minDate&&/^[\+\-](.*)$/.test(C.minDate)&&(C.minDate=n.formatDate(Y.strToDateTime(C.minDate),C.formatDate)),C.maxDate&&/^[\+\-](.*)$/.test(C.maxDate)&&(C.maxDate=n.formatDate(Y.strToDateTime(C.maxDate),C.formatDate)),C.minDateTime&&/^\+(.*)$/.test(C.minDateTime)&&(C.minDateTime=Y.strToDateTime(C.minDateTime).dateFormat(C.formatDate)),V.toggle(C.showApplyButton),I.find(".xdsoft_today_button").css("visibility",C.todayButton?"visible":"hidden"),I.find("."+C.prev).css("visibility",C.prevButton?"visible":"hidden"),I.find("."+C.next).css("visibility",C.nextButton?"visible":"hidden"),s(C),C.validateOnBlur&&a.off("blur.xdsoft").on("blur.xdsoft",function(){if(C.allowBlank&&(!e.trim(e(this).val()).length||"string"==typeof C.mask&&e.trim(e(this).val())===C.mask.replace(/[0-9]/g,"_")))e(this).val(null),H.data("xdsoft_datetime").empty();else{var t=n.parseDate(e(this).val(),C.format);if(t)e(this).val(n.formatDate(t,C.format));else{var a=+[e(this).val()[0],e(this).val()[1]].join(""),r=+[e(this).val()[2],e(this).val()[3]].join("");!C.datepicker&&C.timepicker&&a>=0&&a<24&&r>=0&&r<60?e(this).val([a,r].map(function(e){return e>9?e:"0"+e}).join(":")):e(this).val(n.formatDate(Y.now(),C.format))}H.data("xdsoft_datetime").setCurrentTime(e(this).val())}H.trigger("changedatetime.xdsoft"),H.trigger("close.xdsoft")}),C.dayOfWeekStartPrev=0===C.dayOfWeekStart?6:C.dayOfWeekStart-1,H.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},H.data("options",C).on("touchstart mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),G.hide(),B.hide(),!1}),E.append(R),E.xdsoftScroller(C),H.on("afterOpen.xdsoft",function(){E.xdsoftScroller(C)}),H.append(z).append(L),!0!==C.withoutCopyright&&H.append(J),z.append(I).append(N).append(V),e(C.parentID).append(H),Y=new function(){var t=this;t.now=function(e){var a,n,r=new Date;return!e&&C.defaultDate&&(a=t.strToDateTime(C.defaultDate),r.setFullYear(a.getFullYear()),r.setMonth(a.getMonth()),r.setDate(a.getDate())),C.yearOffset&&r.setFullYear(r.getFullYear()+C.yearOffset),!e&&C.defaultTime&&(n=t.strtotime(C.defaultTime),r.setHours(n.getHours()),r.setMinutes(n.getMinutes()),r.setSeconds(n.getSeconds()),r.setMilliseconds(n.getMilliseconds())),r},t.isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t.setCurrentTime=function(e,a){"string"==typeof e?t.currentTime=t.strToDateTime(e):t.isValidDate(e)?t.currentTime=e:e||a||!C.allowBlank||C.inline?t.currentTime=t.now():t.currentTime=null,H.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(){return t.currentTime},t.nextMonth=function(){void 0!==t.currentTime&&null!==t.currentTime||(t.currentTime=t.now());var a,n=t.currentTime.getMonth()+1;return 12===n&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),n=0),a=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),n+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(n),C.onChangeMonth&&e.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(H,Y.currentTime,H.data("input")),a!==t.currentTime.getFullYear()&&e.isFunction(C.onChangeYear)&&C.onChangeYear.call(H,Y.currentTime,H.data("input")),H.trigger("xchange.xdsoft"),n},t.prevMonth=function(){void 0!==t.currentTime&&null!==t.currentTime||(t.currentTime=t.now());var a=t.currentTime.getMonth()-1;return-1===a&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),a=11),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),a+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(a),C.onChangeMonth&&e.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(H,Y.currentTime,H.data("input")),H.trigger("xchange.xdsoft"),a},t.getWeekOfYear=function(t){if(C.onGetWeekOfYear&&e.isFunction(C.onGetWeekOfYear)){var a=C.onGetWeekOfYear.call(H,t);if(void 0!==a)return a}var n=new Date(t.getFullYear(),0,1);return 4!==n.getDay()&&n.setMonth(0,1+(4-n.getDay()+7)%7),Math.ceil(((t-n)/864e5+n.getDay()+1)/7)},t.strToDateTime=function(e){var a,r,o=[];return e&&e instanceof Date&&t.isValidDate(e)?e:((o=/^([+-]{1})(.*)$/.exec(e))&&(o[2]=n.parseDate(o[2],C.formatDate)),o&&o[2]?(a=o[2].getTime()-6e4*o[2].getTimezoneOffset(),r=new Date(t.now(!0).getTime()+parseInt(o[1]+"1",10)*a)):r=e?n.parseDate(e,C.format):t.now(),t.isValidDate(r)||(r=t.now()),r)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var a=e?n.parseDate(e,C.formatDate):t.now(!0);return t.isValidDate(a)||(a=t.now(!0)),a},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var a=e?n.parseDate(e,C.formatTime):t.now(!0);return t.isValidDate(a)||(a=t.now(!0)),a},t.str=function(){return n.formatDate(t.currentTime,C.format)},t.currentTime=this.now()},V.on("touchend click",function(e){e.preventDefault(),H.data("changed",!0),Y.setCurrentTime(i()),a.val(Y.str()),H.trigger("close.xdsoft")}),I.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){H.data("changed",!0),Y.setCurrentTime(0,!0),H.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e,t,n=Y.getCurrentTime();n=new Date(n.getFullYear(),n.getMonth(),n.getDate()),e=Y.strToDate(C.minDate),n<(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()))||(t=Y.strToDate(C.maxDate),n>(t=new Date(t.getFullYear(),t.getMonth(),t.getDate()))||(a.val(Y.str()),a.trigger("change"),H.trigger("close.xdsoft")))}),I.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),a=0,n=!1;!function e(r){t.hasClass(C.next)?Y.nextMonth():t.hasClass(C.prev)&&Y.prevMonth(),C.monthChangeSpinner&&(n||(a=setTimeout(e,r||100)))}(500),e([C.ownerDocument.body,C.contentWindow]).on("touchend mouseup.xdsoft",function t(){clearTimeout(a),n=!0,e([C.ownerDocument.body,C.contentWindow]).off("touchend mouseup.xdsoft",t)})}),L.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),a=0,n=!1,r=110;!function e(o){var i=E[0].clientHeight,s=R[0].offsetHeight,d=Math.abs(parseInt(R.css("marginTop"),10));t.hasClass(C.next)&&s-i-C.timeHeightInTimePicker>=d?R.css("marginTop","-"+(d+C.timeHeightInTimePicker)+"px"):t.hasClass(C.prev)&&d-C.timeHeightInTimePicker>=0&&R.css("marginTop","-"+(d-C.timeHeightInTimePicker)+"px"),E.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(R[0].style.marginTop,10)/(s-i))]),r=r>10?10:r-10,n||(a=setTimeout(e,o||r))}(500),e([C.ownerDocument.body,C.contentWindow]).on("touchend mouseup.xdsoft",function t(){clearTimeout(a),n=!0,e([C.ownerDocument.body,C.contentWindow]).off("touchend mouseup.xdsoft",t)})}),d=0,H.on("xchange.xdsoft",function(t){clearTimeout(d),d=setTimeout(function(){void 0!==Y.currentTime&&null!==Y.currentTime||(Y.currentTime=Y.now());for(var t,i,s,d,u,l,f,c,h,m,g="",p=new Date(Y.currentTime.getFullYear(),Y.currentTime.getMonth(),1,12,0,0),y=0,v=Y.now(),D=!1,b=!1,k=!1,x=[],T=!0,S="";p.getDay()!==C.dayOfWeekStart;)p.setDate(p.getDate()-1);for(g+="<table><thead><tr>",C.weeks&&(g+="<th></th>"),t=0;t<7;t+=1)g+="<th>"+C.i18n[r].dayOfWeekShort[(t+C.dayOfWeekStart)%7]+"</th>";for(g+="</tr></thead>",g+="<tbody>",!1!==C.maxDate&&(D=Y.strToDate(C.maxDate),D=new Date(D.getFullYear(),D.getMonth(),D.getDate(),23,59,59,999)),!1!==C.minDate&&(b=Y.strToDate(C.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate())),!1!==C.minDateTime&&(k=Y.strToDate(C.minDateTime),k=new Date(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours(),k.getMinutes(),k.getSeconds()));y<Y.currentTime.countDaysInMonth()||p.getDay()!==C.dayOfWeekStart||Y.currentTime.getMonth()===p.getMonth();)x=[],y+=1,s=p.getDay(),d=p.getDate(),u=p.getFullYear(),l=p.getMonth(),f=Y.getWeekOfYear(p),m="",x.push("xdsoft_date"),c=C.beforeShowDay&&e.isFunction(C.beforeShowDay.call)?C.beforeShowDay.call(H,p):null,C.allowDateRe&&"[object RegExp]"===Object.prototype.toString.call(C.allowDateRe)&&(C.allowDateRe.test(n.formatDate(p,C.formatDate))||x.push("xdsoft_disabled")),C.allowDates&&C.allowDates.length>0&&-1===C.allowDates.indexOf(n.formatDate(p,C.formatDate))&&x.push("xdsoft_disabled"),(!1!==D&&p>D||!1!==k&&p<k||!1!==b&&p<b||c&&!1===c[0])&&x.push("xdsoft_disabled"),-1!==C.disabledDates.indexOf(n.formatDate(p,C.formatDate))&&x.push("xdsoft_disabled"),-1!==C.disabledWeekDays.indexOf(s)&&x.push("xdsoft_disabled"),a.is("[disabled]")&&x.push("xdsoft_disabled"),c&&""!==c[1]&&x.push(c[1]),Y.currentTime.getMonth()!==l&&x.push("xdsoft_other_month"),(C.defaultSelect||H.data("changed"))&&n.formatDate(Y.currentTime,C.formatDate)===n.formatDate(p,C.formatDate)&&x.push("xdsoft_current"),n.formatDate(v,C.formatDate)===n.formatDate(p,C.formatDate)&&x.push("xdsoft_today"),0!==p.getDay()&&6!==p.getDay()&&-1===C.weekends.indexOf(n.formatDate(p,C.formatDate))||x.push("xdsoft_weekend"),void 0!==C.highlightedDates[n.formatDate(p,C.formatDate)]&&(i=C.highlightedDates[n.formatDate(p,C.formatDate)],x.push(void 0===i.style?"xdsoft_highlighted_default":i.style),m=void 0===i.desc?"":i.desc),C.beforeShowDay&&e.isFunction(C.beforeShowDay)&&x.push(C.beforeShowDay(p)),T&&(g+="<tr>",T=!1,C.weeks&&(g+="<th>"+f+"</th>")),g+='<td data-date="'+d+'" data-month="'+l+'" data-year="'+u+'" class="xdsoft_date xdsoft_day_of_week'+p.getDay()+" "+x.join(" ")+'" title="'+m+'"><div>'+d+"</div></td>",p.getDay()===C.dayOfWeekStartPrev&&(g+="</tr>",T=!0),p.setDate(d+1);if(g+="</tbody></table>",N.html(g),I.find(".xdsoft_label span").eq(0).text(C.i18n[r].months[Y.currentTime.getMonth()]),I.find(".xdsoft_label span").eq(1).text(Y.currentTime.getFullYear()),S="","",l="",h=function(t,r){var o,i,s=Y.now(),d=C.allowTimes&&e.isArray(C.allowTimes)&&C.allowTimes.length;s.setHours(t),t=parseInt(s.getHours(),10),s.setMinutes(r),r=parseInt(s.getMinutes(),10),(o=new Date(Y.currentTime)).setHours(t),o.setMinutes(r),x=[],!1!==C.minDateTime&&C.minDateTime>o||!1!==C.maxTime&&Y.strtotime(C.maxTime).getTime()<s.getTime()||!1!==C.minTime&&Y.strtotime(C.minTime).getTime()>s.getTime()?x.push("xdsoft_disabled"):!1!==C.minDateTime&&C.minDateTime>o||!1!==C.disabledMinTime&&s.getTime()>Y.strtotime(C.disabledMinTime).getTime()&&!1!==C.disabledMaxTime&&s.getTime()<Y.strtotime(C.disabledMaxTime).getTime()?x.push("xdsoft_disabled"):a.is("[disabled]")&&x.push("xdsoft_disabled"),(i=new Date(Y.currentTime)).setHours(parseInt(Y.currentTime.getHours(),10)),d||i.setMinutes(Math[C.roundTime](Y.currentTime.getMinutes()/C.step)*C.step),(C.initTime||C.defaultSelect||H.data("changed"))&&i.getHours()===parseInt(t,10)&&(!d&&C.step>59||i.getMinutes()===parseInt(r,10))&&(C.defaultSelect||H.data("changed")?x.push("xdsoft_current"):C.initTime&&x.push("xdsoft_init_time")),parseInt(v.getHours(),10)===parseInt(t,10)&&parseInt(v.getMinutes(),10)===parseInt(r,10)&&x.push("xdsoft_today"),S+='<div class="xdsoft_time '+x.join(" ")+'" data-hour="'+t+'" data-minute="'+r+'">'+n.formatDate(s,C.formatTime)+"</div>"},C.allowTimes&&e.isArray(C.allowTimes)&&C.allowTimes.length)for(y=0;y<C.allowTimes.length;y+=1)h(Y.strtotime(C.allowTimes[y]).getHours(),l=Y.strtotime(C.allowTimes[y]).getMinutes());else for(y=0,t=0;y<(C.hours12?12:24);y+=1)for(t=0;t<60;t+=C.step)h((y<10?"0":"")+y,l=(t<10?"0":"")+t);for(R.html(S),o="",y=parseInt(C.yearStart,10)+C.yearOffset;y<=parseInt(C.yearEnd,10)+C.yearOffset;y+=1)o+='<div class="xdsoft_option '+(Y.currentTime.getFullYear()===y?"xdsoft_current":"")+'" data-value="'+y+'">'+y+"</div>";for(G.children().eq(0).html(o),y=parseInt(C.monthStart,10),o="";y<=parseInt(C.monthEnd,10);y+=1)o+='<div class="xdsoft_option '+(Y.currentTime.getMonth()===y?"xdsoft_current":"")+'" data-value="'+y+'">'+C.i18n[r].months[y]+"</div>";B.children().eq(0).html(o),e(H).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(C.timepicker){var e,t,a,n;R.find(".xdsoft_current").length?e=".xdsoft_current":R.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=E[0].clientHeight,(a=R[0].offsetHeight)-t<(n=R.find(e).index()*C.timeHeightInTimePicker+1)&&(n=a-t),E.trigger("scroll_element.xdsoft_scroller",[parseInt(n,10)/(a-t)])):E.trigger("scroll_element.xdsoft_scroller",[0])}}),u=0,N.on("touchend click.xdsoft","td",function(t){t.stopPropagation(),u+=1;var n=e(this),r=Y.currentTime;if(void 0!==r&&null!==r||(Y.currentTime=Y.now(),r=Y.currentTime),n.hasClass("xdsoft_disabled"))return!1;r.setDate(1),r.setFullYear(n.data("year")),r.setMonth(n.data("month")),r.setDate(n.data("date")),H.trigger("select.xdsoft",[r]),a.val(Y.str()),C.onSelectDate&&e.isFunction(C.onSelectDate)&&C.onSelectDate.call(H,Y.currentTime,H.data("input"),t),H.data("changed",!0),H.trigger("xchange.xdsoft"),H.trigger("changedatetime.xdsoft"),(u>1||!0===C.closeOnDateSelect||!1===C.closeOnDateSelect&&!C.timepicker)&&!C.inline&&H.trigger("close.xdsoft"),setTimeout(function(){u=0},200)}),R.on("touchstart","div",function(e){this.touchMoved=!1}).on("touchmove","div",X).on("touchend click.xdsoft","div",function(t){if(!this.touchMoved){t.stopPropagation();var a=e(this),n=Y.currentTime;if(void 0!==n&&null!==n||(Y.currentTime=Y.now(),n=Y.currentTime),a.hasClass("xdsoft_disabled"))return!1;n.setHours(a.data("hour")),n.setMinutes(a.data("minute")),H.trigger("select.xdsoft",[n]),H.data("input").val(Y.str()),C.onSelectTime&&e.isFunction(C.onSelectTime)&&C.onSelectTime.call(H,Y.currentTime,H.data("input"),t),H.data("changed",!0),H.trigger("xchange.xdsoft"),H.trigger("changedatetime.xdsoft"),!0!==C.inline&&!0===C.closeOnTimeSelect&&H.trigger("close.xdsoft")}}),z.on("mousewheel.xdsoft",function(e){return!C.scrollMonth||(e.deltaY<0?Y.nextMonth():Y.prevMonth(),!1)}),a.on("mousewheel.xdsoft",function(e){return!C.scrollInput||(!C.datepicker&&C.timepicker?((P=R.find(".xdsoft_current").length?R.find(".xdsoft_current").eq(0).index():0)+e.deltaY>=0&&P+e.deltaY<R.children().length&&(P+=e.deltaY),R.children().eq(P).length&&R.children().eq(P).trigger("mousedown"),!1):C.datepicker&&!C.timepicker?(z.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),a.val&&a.val(Y.str()),H.trigger("changedatetime.xdsoft"),!1):void 0)}),H.on("changedatetime.xdsoft",function(t){if(C.onChangeDateTime&&e.isFunction(C.onChangeDateTime)){var a=H.data("input");C.onChangeDateTime.call(H,Y.currentTime,a,t),delete C.value,a.trigger("change")}}).on("generate.xdsoft",function(){C.onGenerate&&e.isFunction(C.onGenerate)&&C.onGenerate.call(H,Y.currentTime,H.data("input")),U&&(H.trigger("afterOpen.xdsoft"),U=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),P=0,j=function(e,t){do{if(!(e=e.parentNode)||!1===t(e))break}while("HTML"!==e.nodeName)},A=function(){var t,a,n,r,o,i,s,d,u,l,f,c,h;if(d=H.data("input"),t=d.offset(),a=d[0],l="top",n=t.top+a.offsetHeight-1,r=t.left,o="absolute",u=e(C.contentWindow).width(),c=e(C.contentWindow).height(),h=e(C.contentWindow).scrollTop(),C.ownerDocument.documentElement.clientWidth-t.left<z.parent().outerWidth(!0)){var m=z.parent().outerWidth(!0)-a.offsetWidth;r-=m}"rtl"===d.parent().css("direction")&&(r-=H.outerWidth()-d.outerWidth()),C.fixed?(n-=h,r-=e(C.contentWindow).scrollLeft(),o="fixed"):(s=!1,j(a,function(e){return null!==e&&("fixed"===C.contentWindow.getComputedStyle(e).getPropertyValue("position")?(s=!0,!1):void 0)}),s?(o="fixed",n+H.outerHeight()>c+h?(l="bottom",n=c+h-t.top):n-=h):n+H[0].offsetHeight>c+h&&(n=t.top-H[0].offsetHeight+1),n<0&&(n=0),r+a.offsetWidth>u&&(r=u-a.offsetWidth)),i=H[0],j(i,function(e){if("relative"===C.contentWindow.getComputedStyle(e).getPropertyValue("position")&&u>=e.offsetWidth)return r-=(u-e.offsetWidth)/2,!1}),(f={position:o,left:r,top:"",bottom:""})[l]=n,H.css(f)},H.on("open.xdsoft",function(t){var a=!0;C.onShow&&e.isFunction(C.onShow)&&(a=C.onShow.call(H,Y.currentTime,H.data("input"),t)),!1!==a&&(H.show(),A(),e(C.contentWindow).off("resize.xdsoft",A).on("resize.xdsoft",A),C.closeOnWithoutClick&&e([C.ownerDocument.body,C.contentWindow]).on("touchstart mousedown.xdsoft",function t(){H.trigger("close.xdsoft"),e([C.ownerDocument.body,C.contentWindow]).off("touchstart mousedown.xdsoft",t)}))}).on("close.xdsoft",function(t){var a=!0;I.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),C.onClose&&e.isFunction(C.onClose)&&(a=C.onClose.call(H,Y.currentTime,H.data("input"),t)),!1===a||C.opened||C.inline||H.hide(),t.stopPropagation()}).on("toggle.xdsoft",function(){H.is(":visible")?H.trigger("close.xdsoft"):H.trigger("open.xdsoft")}).data("input",a),q=0,H.data("xdsoft_datetime",Y),H.setOptions(C),Y.setCurrentTime(i()),a.data("xdsoft_datetimepicker",H).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(){a.is(":disabled")||a.data("xdsoft_datetimepicker").is(":visible")&&C.closeOnInputClick||C.openOnFocus&&(clearTimeout(q),q=setTimeout(function(){a.is(":disabled")||(U=!0,Y.setCurrentTime(i(),!0),C.mask&&s(C),H.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var a,n=t.which;return-1!==[p].indexOf(n)&&C.enterLikeTab?(a=e("input:visible,textarea:visible,button:visible,a:visible"),H.trigger("close.xdsoft"),a.eq(a.index(this)+1).focus(),!1):-1!==[T].indexOf(n)?(H.trigger("close.xdsoft"),!0):void 0}).on("blur.xdsoft",function(){H.trigger("close.xdsoft")})},d=function(t){var a=t.data("xdsoft_datetimepicker");a&&(a.data("xdsoft_datetime",null),a.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(C.contentWindow).off("resize.xdsoft"),e([C.contentWindow,C.ownerDocument.body]).off("mousedown.xdsoft touchstart"),t.unmousewheel&&t.unmousewheel())},e(C.ownerDocument).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===m&&(F=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===m&&(F=!1)}),this.each(function(){var t=e(this).data("xdsoft_datetimepicker");if(t){if("string"===e.type(o))switch(o){case"show":e(this).select().focus(),t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"toggle":t.trigger("toggle.xdsoft");break;case"destroy":d(e(this));break;case"reset":this.value=this.defaultValue,this.value&&t.data("xdsoft_datetime").isValidDate(n.parseDate(this.value,C.format))||t.data("changed",!1),t.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":t.data("input").trigger("blur.xdsoft");break;default:t[o]&&e.isFunction(t[o])&&(u=t[o](i))}else t.setOptions(o);return 0}"string"!==e.type(o)&&(!C.lazyInit||C.open||C.inline?s(e(this)):A(e(this)))}),u},e.fn.datetimepicker.defaults=a};!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-mousewheel"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(datetimepickerFactory),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var i=t||window.event,s=d.call(arguments,1),u=0,f=0,c=0,h=0,m=0,g=0;if(t=e.event.fix(i),t.type="mousewheel","detail"in i&&(c=-1*i.detail),"wheelDelta"in i&&(c=i.wheelDelta),"wheelDeltaY"in i&&(c=i.wheelDeltaY),"wheelDeltaX"in i&&(f=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(f=-1*c,c=0),u=0===c?f:c,"deltaY"in i&&(u=c=-1*i.deltaY),"deltaX"in i&&(f=i.deltaX,0===c&&(u=-1*f)),0!==c||0!==f){if(1===i.deltaMode){var p=e.data(this,"mousewheel-line-height");u*=p,c*=p,f*=p}else if(2===i.deltaMode){var y=e.data(this,"mousewheel-page-height");u*=y,c*=y,f*=y}if(h=Math.max(Math.abs(c),Math.abs(f)),(!o||h<o)&&(o=h,n(i,h)&&(o/=40)),n(i,h)&&(u/=40,f/=40,c/=40),u=Math[u>=1?"floor":"ceil"](u/o),f=Math[f>=1?"floor":"ceil"](f/o),c=Math[c>=1?"floor":"ceil"](c/o),l.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();m=t.clientX-v.left,g=t.clientY-v.top}return t.deltaX=f,t.deltaY=c,t.deltaFactor=o,t.offsetX=m,t.offsetY=g,t.deltaMode=0,s.unshift(t,u,f,c),r&&clearTimeout(r),r=setTimeout(a,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function a(){o=null}function n(e,t){return l.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var r,o,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice;if(e.event.fixHooks)for(var u=i.length;u;)e.event.fixHooks[i[--u]]=e.event.mouseHooks;var l=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var a=s.length;a;)this.addEventListener(s[--a],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",l.getLineHeight(this)),e.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=s.length;a;)this.removeEventListener(s[--a],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var a=e(t),n=a["offsetParent"in e.fn?"offsetParent":"parent"]();return n.length||(n=e("body")),parseInt(n.css("fontSize"),10)||parseInt(a.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});

(function() {
  // Hack for ios Safari browser (UI overlapping on iOS 10)
  var userAgent = window.navigator.userAgent;
  var regEx = /iP(hone|od|ad)/;
  var iOS = regEx.test(userAgent);
  var webkit = /WebKit/i.test(userAgent);
  var chromeiOS = /(Chrome|CriOS|OPiOS)/i.test(userAgent);
  var platform = regEx.test(window.navigator.platform);

  var iosChecker = function() {
    var v = (window.navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
    return [parseInt(v[1], 10), parseInt(v  [2], 10), parseInt(v[3] || 0, 10)];
  };

  /**
  * iOS is true on iOS or emulators (user-agent)
  * webkit is true on Safari/Chrome, etc
  * platform is true on iOS, not emulator (platform)
  * chromeiOS is true on other browsers (chrome/opera)
  */
  if (iOS && webkit && platform && !chromeiOS) {
    var iosVersion = iosChecker()[0];
    if (iosVersion >= 10) {
      var interval = setInterval(function() {
        if ($('div.ol-zoom').get(0)) {
          clearInterval(interval);
          $('body').addClass('ios-margin');
        }
      }, 100);
    }
  }
})();

(function(){'use strict';var m,aa="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},da;if("function"==typeof Object.setPrototypeOf)da=Object.setPrototypeOf;else{var ea;a:{var fa={sl:!0},ha={};try{ha.__proto__=fa;ea=ha.sl;break a}catch(a){}ea=!1}da=ea?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}
var ia=da;function ja(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ia)ia(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Yq=b.prototype}var ka="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function la(){la=function(){};aa.Symbol||(aa.Symbol=ma)}
var ma=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function na(){la();var a=aa.Symbol.iterator;a||(a=aa.Symbol.iterator=aa.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ka(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return oa(this)}});na=function(){}}function oa(a){var b=0;return pa(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function pa(a){na();a={next:a};a[aa.Symbol.iterator]=function(){return this};return a}
function t(a){na();var b=a[Symbol.iterator];return b?b.call(a):oa(a)}function qa(a){if(!(a instanceof Array)){a=t(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function ra(a,b){if(b){var c=aa;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ka(c,a,{configurable:!0,writable:!0,value:b})}}ra("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){a=Number(a);return(b(a)+b(-a))/2}});
ra("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});ra("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}});
function sa(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}ra("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==sa(this,a,"includes").indexOf(a,c||0)}});
ra("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=sa(this,a,"startsWith");a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var g=0;g<f&&c<e;)if(b[c++]!=a[g++])return!1;return g>=f}});ra("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(a[f]=e[f])}return a}});
ra("Promise",function(a){function b(a){this.c=0;this.g=void 0;this.b=[];var b=this.f();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}}function c(){this.c=null}function d(a){return a instanceof b?a:new b(function(b){b(a)})}if(a)return a;c.prototype.b=function(a){null==this.c&&(this.c=[],this.f());this.c.push(a)};c.prototype.f=function(){var a=this;this.g(function(){a.i()})};var e=aa.setTimeout;c.prototype.g=function(a){e(a,0)};c.prototype.i=function(){for(;this.c&&this.c.length;){var a=this.c;this.c=
[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(l){this.j(l)}}}this.c=null};c.prototype.j=function(a){this.g(function(){throw a;})};b.prototype.f=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.B),reject:a(this.j)}};b.prototype.B=function(a){if(a===this)this.j(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.C(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=
!0;break a;default:c=!1}c?this.v(a):this.i(a)}};b.prototype.v=function(a){var b=void 0;try{b=a.then}catch(k){this.j(k);return}"function"==typeof b?this.K(b,a):this.i(a)};b.prototype.j=function(a){this.o(2,a)};b.prototype.i=function(a){this.o(1,a)};b.prototype.o=function(a,b){if(0!=this.c)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.c);this.c=a;this.g=b;this.u()};b.prototype.u=function(){if(null!=this.b){for(var a=this.b,b=0;b<a.length;++b)a[b].call(),a[b]=null;
this.b=null}};var f=new c;b.prototype.C=function(a){var b=this.f();a.be(b.resolve,b.reject)};b.prototype.K=function(a,b){var c=this.f();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};b.prototype.then=function(a,c){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(w){f(w)}}:b}var e,f,g=new b(function(a,b){e=a;f=b});this.be(d(a,e),d(c,f));return g};b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.be=function(a,b){function c(){switch(d.c){case 1:a(d.g);
break;case 2:b(d.g);break;default:throw Error("Unexpected state: "+d.c);}}var d=this;null==this.b?f.b(c):this.b.push(function(){f.b(c)})};b.resolve=d;b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,c){for(var e=t(a),f=e.next();!f.done;f=e.next())d(f.value).be(b,c)})};b.all=function(a){var c=t(a),e=c.next();return e.done?d([]):new b(function(a,b){function f(b){return function(c){g[b]=c;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,d(e.value).be(f(g.length-
1),b),e=c.next();while(!e.done)})};return b});ra("Number.isFinite",function(a){return a?a:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}});ra("Number.isInteger",function(a){return a?a:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}});var ta=this;
function ua(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function va(a,b){a=a.split(".");var c=ta;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}
function wa(a,b){function c(){}c.prototype=b.prototype;a.Yq=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ts=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function u(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function xa(){}function x(a){return a.Fj||(a.Fj=++ya)}var ya=0;function za(a){this.message="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}u(za,Error);function Aa(a,b){if(!a)throw new za(b);};var z="function"===typeof Object.assign?Object.assign:function(a,b){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function Ba(a){for(var b in a)delete a[b]}function Ca(a){var b=[],c;for(c in a)b.push(a[c]);return b}function Da(a){for(var b in a)return!1;return!b};function Ea(a){function b(b){var c=a.listener,e=a.bindTo||a.target;a.Dh&&A(a);return c.call(e,b)}return a.Ch=b}function Fa(a,b,c,d){for(var e,f=0,g=a.length;f<g;++f)if(e=a[f],e.listener===b&&e.bindTo===c)return d&&(e.deleteIndex=f),e}function Ga(a,b){return(a=a.wa)?a[b]:void 0}function Ha(a){var b=a.wa;b||(b=a.wa={});return b}
function Ia(a,b){var c=Ga(a,b);if(c){for(var d=0,e=c.length;d<e;++d)a.removeEventListener(b,c[d].Ch),Ba(c[d]);c.length=0;if(c=a.wa)delete c[b],0===Object.keys(c).length&&delete a.wa}}function D(a,b,c,d,e){var f=Ha(a),g=f[b];g||(g=f[b]=[]);(f=Fa(g,c,d,!1))?e||(f.Dh=!1):(f={bindTo:d,Dh:!!e,listener:c,target:a,type:b},a.addEventListener(b,Ea(f)),g.push(f));return f}function La(a,b,c,d){(a=Ga(a,b))&&(c=Fa(a,c,d,!0))&&A(c)}
function A(a){if(a&&a.target){a.target.removeEventListener(a.type,a.Ch);var b=Ga(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);0===b.length&&Ia(a.target,a.type)}Ba(a)}};function Ma(){}Ma.prototype.Qa=!1;function Oa(a){a.Qa||(a.Qa=!0,a.Ba())}Ma.prototype.Ba=xa;function Pa(a){this.type=a;this.target=null}Pa.prototype.preventDefault=Pa.prototype.stopPropagation=function(){this.Nj=!0};function Qa(a){a.stopPropagation()};function Ra(){this.Y={};this.S={};this.K={}}u(Ra,Ma);Ra.prototype.addEventListener=function(a,b){var c=this.K[a];c||(c=this.K[a]=[]);-1===c.indexOf(b)&&c.push(b)};function F(a,b){var c="string"===typeof b?new Pa(b):b;b=c.type;c.target=a;var d=a.K[b];if(d){b in a.S||(a.S[b]=0,a.Y[b]=0);++a.S[b];for(var e=0,f=d.length;e<f;++e)if(!1===d[e].call(a,c)||c.Nj){var g=!1;break}--a.S[b];if(0===a.S[b]){c=a.Y[b];for(delete a.Y[b];c--;)a.removeEventListener(b,xa);delete a.S[b]}return g}}
Ra.prototype.Ba=function(){var a=Ha(this),b;for(b in a)Ia(this,b)};function Sa(a,b){return b?b in a.K:0<Object.keys(a.K).length}Ra.prototype.removeEventListener=function(a,b){var c=this.K[a];c&&(b=c.indexOf(b),a in this.Y?(c[b]=xa,++this.Y[a]):(c.splice(b,1),0===c.length&&delete this.K[a]))};function Ta(){Ra.call(this);this.g=0}u(Ta,Ra);function Ua(a){if(Array.isArray(a))for(var b=0,c=a.length;b<c;++b)A(a[b]);else A(a)}Ta.prototype.c=function(){++this.g;F(this,"change")};Ta.prototype.on=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=D(this,a[f],b,c);return e}return D(this,a,b,c)};Ta.prototype.once=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=D(this,a[f],b,c,!0);return e}return D(this,a,b,c,!0)};function Va(a){Ta.call(this);x(this);this.Zb={};void 0!==a&&Wa(this,a)}u(Va,Ta);var Xa={};function Ya(a){return Xa.hasOwnProperty(a)?Xa[a]:Xa[a]="change:"+a}Va.prototype.get=function(a){var b;this.Zb.hasOwnProperty(a)&&(b=this.Zb[a]);return b};Va.prototype.Sa=function(){return z({},this.Zb)};Va.prototype.notify=function(a,b){var c=Ya(a);F(this,new Za(c,a,b));F(this,new Za("propertychange",a,b))};Va.prototype.set=function(a,b,c){c?this.Zb[a]=b:(c=this.Zb[a],this.Zb[a]=b,c!==b&&this.notify(a,c))};
function Wa(a,b,c){for(var d in b)a.set(d,b[d],c)}function Za(a,b,c){Pa.call(this,a);this.key=b;this.oldValue=c}u(Za,Pa);function $a(a){for(var b=ab(),c=0,d=a.length;c<d;++c)bb(b,a[c]);return b}function cb(a,b,c){return c?(c[0]=a[0]-b,c[1]=a[1]-b,c[2]=a[2]+b,c[3]=a[3]+b,c):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function db(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function eb(a,b,c){b=b<a[0]?a[0]-b:a[2]<b?b-a[2]:0;a=c<a[1]?a[1]-c:a[3]<c?c-a[3]:0;return b*b+a*a}function fb(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function gb(a,b,c){return a[0]<=b&&b<=a[2]&&a[1]<=c&&c<=a[3]}
function hb(a,b){var c=a[1],d=a[2],e=a[3],f=b[0];b=b[1];var g=0;f<a[0]?g|=16:f>d&&(g|=4);b<c?g|=8:b>e&&(g|=2);0===g&&(g=1);return g}function ab(){return[Infinity,Infinity,-Infinity,-Infinity]}function ib(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function jb(a){return ib(Infinity,Infinity,-Infinity,-Infinity,a)}function kb(a,b){var c=a[0];a=a[1];return ib(c,a,c,a,b)}function lb(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}
function mb(a,b){b[0]<a[0]&&(a[0]=b[0]);b[2]>a[2]&&(a[2]=b[2]);b[1]<a[1]&&(a[1]=b[1]);b[3]>a[3]&&(a[3]=b[3])}function bb(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}function nb(a,b,c,d,e){for(;c<d;c+=e){var f=a,g=b[c],h=b[c+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],h);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],h)}return a}
function ob(a,b,c){var d;return(d=b.call(c,[a[0],a[1]]))||(d=b.call(c,[a[2],a[1]]))||(d=b.call(c,[a[2],a[3]]))?d:(d=b.call(c,[a[0],a[3]]))?d:!1}function pb(a){var b=0;qb(a)||(b=rb(a)*sb(a));return b}function tb(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}
function ub(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2;b=Math.cos(c);var g=Math.sin(c);c=f*b;f*=g;b*=d;var h=d*g,k=a[0],l=a[1];a=k-c+h;d=k-c-h;g=k+c-h;c=k+c+h;h=l-f-b;k=l-f+b;var n=l+f+b;f=l+f-b;return ib(Math.min(a,d,g,c),Math.min(h,k,n,f),Math.max(a,d,g,c),Math.max(h,k,n,f),e)}function sb(a){return a[3]-a[1]}function vb(a,b){var c=ab();wb(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}function rb(a){return a[2]-a[0]}
function wb(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function qb(a){return a[2]<a[0]||a[3]<a[1]};function xb(){return!0}function yb(){return!1};function zb(a,b,c,d,e,f){for(var g=f?f:[],h=0;b<c;b+=d){var k=a[b],l=a[b+1];g[h++]=e[0]*k+e[2]*l+e[4];g[h++]=e[1]*k+e[3]*l+e[5]}f&&g.length!=h&&(g.length=h);return g};function Ab(a,b,c){return Math.min(Math.max(a,b),c)}var Bb=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function Cb(a,b,c,d){a=c-a;b=d-b;return a*a+b*b}function Db(a){return a*Math.PI/180}function Eb(a,b){a%=b;return 0>a*b?a+b:a}function Fb(a,b,c){return a+c*(b-a)};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function Gb(a){this.radius=a}Gb.prototype.offset=function(a,b,c){var d=Db(a[1]);b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(Db(a[0])+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};function Hb(a,b,c){var d=Db(a[1]),e=Db(b[1]),f=(e-d)/2;a=Db(b[0]-a[0])/2;d=Math.sin(f)*Math.sin(f)+Math.sin(a)*Math.sin(a)*Math.cos(d)*Math.cos(e);return 2*c*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))};var Ib={};Ib.degrees=12741994*Math.PI/360;Ib.ft=.3048;Ib.m=1;Ib["us-ft"]=1200/3937;var Jb=null;function Kb(){return Jb||window.proj4};function Lb(a){this.c=a.code;this.g=a.units;this.i=void 0!==a.extent?a.extent:null;this.Jk=void 0!==a.gh?a.gh:null;this.b=void 0!==a.lf?a.lf:"enu";this.j=void 0!==a.global?a.global:!1;this.f=!(!this.j||!this.i);this.v=a.sm;this.o=null;this.u=a.cj;var b=a.code,c=Kb();"function"==typeof c&&(b=c.defs(b),void 0!==b&&(void 0!==b.axis&&void 0===a.lf&&(this.b=b.axis),void 0===a.cj&&(this.u=b.to_meter),void 0===a.units&&(this.g=b.units)))}Lb.prototype.I=function(){return this.i};
function Mb(a){return a.u||Ib[a.g]}function Nb(a,b){a.i=b;a.f=!(!a.j||!b)};function Ob(a){Lb.call(this,{code:a,units:"m",extent:Pb,global:!0,gh:Qb,sm:function(a,c){return a/Bb(c[1]/6378137)}})}u(Ob,Lb);var Rb=6378137*Math.PI,Pb=[-Rb,-Rb,Rb,Rb],Qb=[-180,-85,180,85],Sb=[new Ob("EPSG:3857"),new Ob("EPSG:102100"),new Ob("EPSG:102113"),new Ob("EPSG:900913"),new Ob("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Ob("urn:ogc:def:crs:EPSG::3857"),new Ob("http://www.opengis.net/gml/srs/epsg.xml#3857")];
function Tb(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c){b[e]=Rb*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>Rb?f=Rb:f<-Rb&&(f=-Rb);b[e+1]=f}return b}function Ub(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/Rb,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};function Vb(a,b){Lb.call(this,{code:a,units:"degrees",extent:Wb,lf:b,global:!0,cj:Xb,gh:Wb})}u(Vb,Lb);var Wb=[-180,-90,180,90],Xb=6378137*Math.PI/180,Yb=[new Vb("CRS:84"),new Vb("EPSG:4326","neu"),new Vb("urn:ogc:def:crs:EPSG::4326","neu"),new Vb("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Vb("urn:ogc:def:crs:OGC:1.3:CRS84"),new Vb("urn:ogc:def:crs:OGC:2:84"),new Vb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Vb("urn:x-ogc:def:crs:EPSG:4326","neu")];var Zb={};var $b={};function ac(a,b,c){a=a.c;b=b.c;a in $b||($b[a]={});$b[a][b]=c}function bc(a,b){var c;a in $b&&b in $b[a]&&(c=$b[a][b]);return c};var cc=new Gb(6371008.8);function dc(a,b,c,d){a=fc(a);var e=a.v;e?b=e(b,c):"degrees"==a.g&&!d||"degrees"==d||(e=gc(a,fc("EPSG:4326")),b=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],b=e(b,b,2),b=(Hb(b.slice(0,2),b.slice(2,4),cc.radius)+Hb(b.slice(4,6),b.slice(6,8),cc.radius))/2,a=d?Ib[d]:Mb(a),void 0!==a&&(b/=a));return b}function hc(a){a.forEach(ic);a.forEach(function(b){a.forEach(function(a){b!==a&&ac(b,a,jc)})})}function ic(a){Zb[a.c]=a;ac(a,a,jc)}
function kc(a){return a?"string"===typeof a?fc(a):a:fc("EPSG:3857")}function lc(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f;for(f=0;f<e;f+=d){var g=a([b[f],b[f+1]]);c[f]=g[0];c[f+1]=g[1];for(g=d-1;2<=g;--g)c[f+g]=b[f+g]}return c}}function fc(a){var b=null;if(a instanceof Lb)b=a;else if("string"===typeof a&&(b=Zb[a]||null,!b)){var c=Kb();"function"==typeof c&&void 0!==c.defs(a)&&(b=new Lb({code:a}),ic(b))}return b}
function mc(a,b){if(a===b)return!0;var c=a.g===b.g;return a.c===b.c?c:gc(a,b)===jc&&c}function nc(a,b){a=fc(a);b=fc(b);return gc(a,b)}function gc(a,b){var c=a.c,d=b.c,e=bc(c,d);if(!e){var f=Kb();if("function"==typeof f){var g=f.defs(c),h=f.defs(d);void 0!==g&&void 0!==h&&(g===h?hc([b,a]):(f=f(d,c),e=f.forward,f=f.inverse,b=fc(b),a=fc(a),ac(b,a,lc(e)),ac(a,b,lc(f))),e=bc(c,d))}}e||(e=oc);return e}function oc(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}
function jc(a,b){if(void 0!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}else a=a.slice();return a}function pc(a,b,c){return nc(b,c)(a,void 0,a.length)}function qc(a,b,c){b=nc(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,d);c=Math.max.apply(null,c);d=Math.max.apply(null,d);return ib(a,b,c,d,void 0)}hc(Sb);hc(Yb);Yb.forEach(function(a){Sb.forEach(function(b){ac(a,b,Tb);ac(b,a,Ub)})});var rc=Array(6);function sc(){return[1,0,0,1,0,0]}function tc(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=b[0],l=b[1],n=b[2],p=b[3],q=b[4];b=b[5];a[0]=c*k+e*l;a[1]=d*k+f*l;a[2]=c*n+e*p;a[3]=d*n+f*p;a[4]=c*q+e*b+g;a[5]=d*q+f*b+h}function uc(a,b,c,d,e){a[0]=b;a[1]=0;a[2]=0;a[3]=c;a[4]=d;a[5]=e;return a}function vc(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function wc(a,b){var c=b[0],d=b[1];b[0]=a[0]*c+a[2]*d+a[4];b[1]=a[1]*c+a[3]*d+a[5];return b}
function xc(a,b,c,d,e,f,g,h){var k=Math.sin(f);f=Math.cos(f);a[0]=d*f;a[1]=e*k;a[2]=-d*k;a[3]=e*f;a[4]=g*d*f-h*d*k+b;a[5]=g*e*k+h*e*f+c;return a};function yc(){Va.call(this);this.v=ab();this.B=-1;this.j={};this.u=this.i=0;this.W=sc()}u(yc,Va);function zc(a,b){var c=[NaN,NaN];a.sb(b[0],b[1],c,Infinity);return c}yc.prototype.U=function(a){return this.kc(a[0],a[1])};yc.prototype.kc=yb;yc.prototype.I=function(a){this.B!=this.g&&(this.v=this.de(this.v),this.B=this.g);var b=this.v;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};
yc.prototype.transform=function(a,b){var c=this.W;a=fc(a);var d="tile-pixels"==a.g?function(d,f,g){var e=a.I(),k=a.Jk;e=sb(k)/sb(e);xc(c,k[0],k[3],e,-e,0,0,0);zb(d,0,d.length,g,c,f);return nc(a,b)(d,f,g)}:nc(a,b);this.Vd(d);return this};var Ac=/^#(?:[0-9a-f]{3,4}){1,2}$/i,Bc=/^([a-z]*)$/i;function Cc(a){return Array.isArray(a)?a:Dc(a)}function Ec(a){if("string"!==typeof a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var c=a[1];c!=(c|0)&&(c=c+.5|0);var d=a[2];d!=(d|0)&&(d=d+.5|0);a="rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"}return a}
var Dc=function(){var a={},b=0;return function(c){if(a.hasOwnProperty(c))var d=a[c];else{if(1024<=b){d=0;for(var e in a)0===(d++&3)&&(delete a[e],--b)}d=c;Bc.exec(d)&&(e=document.createElement("div"),e.style.color=d,document.body.appendChild(e),d=getComputedStyle(e).color,document.body.removeChild(e));if(Ac.exec(d)){e=d.length-1;var f=4>=e?1:2;var g=4===e||8===e;e=parseInt(d.substr(1+0*f,f),16);var h=parseInt(d.substr(1+1*f,f),16);var k=parseInt(d.substr(1+2*f,f),16);d=g?parseInt(d.substr(1+3*f,f),
16):255;1==f&&(e=(e<<4)+e,h=(h<<4)+h,k=(k<<4)+k,g&&(d=(d<<4)+d));f=[e,h,k,d/255]}else 0==d.indexOf("rgba(")?(d=d.slice(5,-1).split(",").map(Number),f=Fc(d)):0==d.indexOf("rgb(")?(d=d.slice(4,-1).split(",").map(Number),d.push(1),f=Fc(d)):Aa(!1,14);d=f;a[c]=d;++b}return d}}();function Fc(a){var b=[];b[0]=Ab(a[0]+.5|0,0,255);b[1]=Ab(a[1]+.5|0,0,255);b[2]=Ab(a[2]+.5|0,0,255);b[3]=Ab(a[3],0,1);return b};function Gc(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:Ec(a)};function Hc(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}function Ic(a){a&&a.parentNode&&a.parentNode.removeChild(a)};var Jc="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",Kc=-1!==Jc.indexOf("firefox"),Lc=-1!==Jc.indexOf("safari")&&-1==Jc.indexOf("chrom"),Mc=-1!==Jc.indexOf("webkit")&&-1==Jc.indexOf("edge"),Nc=-1!==Jc.indexOf("macintosh"),Oc=window.devicePixelRatio||1,Qc=!1;(function(){if(!("HTMLCanvasElement"in window))return!1;try{var a=document.createElement("CANVAS").getContext("2d");return a?(void 0!==a.setLineDash&&(Qc=!0),!0):!1}catch(b){return!1}})();
var Rc="ontouchstart"in window,Sc="PointerEvent"in window,Tc=!!navigator.msPointerEnabled;var Uc=function(){var a,b={};return function(c){a||(a=document.createElement("div").style);if(!(c in b)){a.font=c;var d=a.fontFamily;a.font="";if(!d)return null;b[c]=d.split(/,\s?/)}return b[c]}}();function Vc(a){Ra.call(this);this.highWaterMark=void 0!==a?a:2048;this.f=0;this.g={};this.c=this.b=null}u(Vc,Ra);function Wc(a){return a.f>a.highWaterMark}m=Vc.prototype;m.clear=function(){this.f=0;this.g={};this.c=this.b=null;F(this,"clear")};m.forEach=function(a,b){for(var c=this.b;c;)a.call(b,c.xc,c.Rb,this),c=c.Ta};
m.get=function(a){a=this.g[a];Aa(void 0!==a,15);if(a===this.c)return a.xc;a===this.b?(this.b=this.b.Ta,this.b.ob=null):(a.Ta.ob=a.ob,a.ob.Ta=a.Ta);a.Ta=null;a.ob=this.c;this.c=this.c.Ta=a;return a.xc};m.remove=function(a){var b=this.g[a];Aa(void 0!==b,15);if(b===this.c){if(this.c=b.ob)this.c.Ta=null}else if(b===this.b){if(this.b=b.Ta)this.b.ob=null}else b.Ta.ob=b.ob,b.ob.Ta=b.Ta;delete this.g[a];--this.f;return b.xc};
m.pop=function(){var a=this.b;delete this.g[a.Rb];a.Ta&&(a.Ta.ob=null);this.b=a.Ta;this.b||(this.c=null);--this.f;return a.xc};m.replace=function(a,b){this.get(a);this.g[a].xc=b};m.set=function(a,b){Aa(!(a in this.g),16);b={Rb:a,Ta:null,ob:this.c,xc:b};this.c?this.c.Ta=b:this.b=b;this.c=b;this.g[a]=b;++this.f};var Xc=[0,0,0,1],Yc=[],Zc=[0,0,0,1],$c=[0,0,0,0],ad=new Vc,bd={},cd=null,dd={},fd=function(){function a(a){var b=ed();b.font="32px monospace";f=b.measureText("wmytzilWMYTZIL@#/&?$%10").width;var c=!0;"monospace"!=a&&(b.font="32px "+a+",monospace",c=b.measureText("wmytzilWMYTZIL@#/&?$%10").width!=f);return c}function b(){var b=!0,f;for(f in c)60>c[f]&&(a(f)?(c[f]=60,Ba(dd),cd=null,d.clear()):(++c[f],b=!1));b&&(window.clearInterval(e),e=void 0)}var c=bd,d=ad,e,f;return function(d){if(d=Uc(d))for(var f=
0,g=d.length;f<g;++f){var l=d[f];l in c||(c[l]=60,a(l)||(c[l]=0,void 0===e&&(e=window.setInterval(b,32))))}}}();function ed(){var a=cd;a||(a=cd=Hc(1,1));return a}
var gd=function(){var a;return function(b){var c=dd[b];void 0==c&&(a||(a=document.createElement("span"),a.textContent="M",a.style.margin=a.style.padding="0 !important",a.style.position="absolute !important",a.style.left="-99999px !important"),a.style.font=b,document.body.appendChild(a),c=dd[b]=a.offsetHeight,document.body.removeChild(a));return c}}();function id(a,b){var c=ed();a!=c.font&&(c.font=a);return c.measureText(b).width}
function jd(a,b,c,d){0!==b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))}var kd=sc();function ld(a,b,c,d,e,f,g,h,k,l,n){if(1!=c){var p=a.globalAlpha;a.globalAlpha=p*c}b&&a.setTransform.apply(a,b);a.drawImage(d,e,f,g,h,k,l,g*n,h*n);p&&(a.globalAlpha=p);b&&a.setTransform.apply(a,kd)};function md(a){this.N=a.opacity;this.F=a.xb;this.o=a.rotation;this.g=a.scale;this.B=a.pb}md.prototype.getOpacity=function(){return this.N};function od(a){this.K=this.v=this.f=null;this.Ga=void 0!==a.fill?a.fill:null;this.Y=[0,0];this.i=a.points;this.c=void 0!==a.radius?a.radius:a.Cs;this.j=a.Ee;this.u=void 0!==a.angle?a.angle:0;this.Ia=void 0!==a.stroke?a.stroke:null;this.G=this.T=this.S=null;this.C=a.Wd;pd(this,this.C);md.call(this,{opacity:1,xb:void 0!==a.xb?a.xb:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,pb:void 0!==a.pb?a.pb:!0})}u(od,md);m=od.prototype;
m.clone=function(){var a=new od({fill:this.oa()?this.oa().clone():void 0,points:this.i,radius:this.c,Ee:this.j,angle:this.u,pb:this.B,stroke:this.sa()?this.sa().clone():void 0,rotation:this.o,xb:this.F,Wd:this.C}),b=this.getOpacity();a.N=b;a.g=this.g;return a};m.he=function(){return this.S};m.oa=function(){return this.Ga};m.Ej=function(){return this.K};m.Z=function(){return this.v};m.bg=function(){return this.G};m.ze=function(){return 2};m.Ae=function(){return this.Y};m.ra=function(){return this.T};
m.sa=function(){return this.Ia};m.Wi=function(){};m.load=function(){};m.wk=function(){};
function pd(a,b){var c="",d="",e=0,f=null,g=0,h=0;if(a.Ia){var k=a.Ia.va();null===k&&(k=Zc);k=Gc(k);h=a.Ia.c;void 0===h&&(h=1);f=a.Ia.g;g=a.Ia.j;Qc||(f=null,g=0);d=a.Ia.i;void 0===d&&(d="round");c=a.Ia.f;void 0===c&&(c="round");e=a.Ia.o;void 0===e&&(e=10)}var l=2*(a.c+h)+1;c={strokeStyle:k,strokeWidth:h,size:l,lineCap:c,ka:f,lineDashOffset:g,lineJoin:d,miterLimit:e};if(void 0===b){var n=Hc(l,l);a.v=n.canvas;b=l=a.v.width;a.Yh(c,n,0,0);a.Ga?a.K=a.v:(n=Hc(c.size,c.size),a.K=n.canvas,a.Xh(c,n,0,0))}else l=
Math.round(l),(d=!a.Ga)&&(n=a.Xh.bind(a,c)),a.Ia?(e=a.Ia,void 0===e.b&&(e.b="s",e.b=e.u?"string"===typeof e.u?e.b+e.u:e.b+x(e.u).toString():e.b+"-",e.b+=","+(void 0!==e.f?e.f.toString():"-")+","+(e.g?e.g.toString():"-")+","+(void 0!==e.j?e.j:"-")+","+(void 0!==e.i?e.i:"-")+","+(void 0!==e.o?e.o.toString():"-")+","+(void 0!==e.c?e.c.toString():"-")),e=e.b):e="-",a.Ga?(f=a.Ga,void 0===f.b&&(f.b=f.c instanceof CanvasPattern||f.c instanceof CanvasGradient?x(f.c).toString():"f"+(f.c?Ec(f.c):"-")),f=f.b):
f="-",a.f&&e==a.f[1]&&f==a.f[2]&&a.c==a.f[3]&&a.j==a.f[4]&&a.u==a.f[5]&&a.i==a.f[6]||(a.f=["r"+e+f+(void 0!==a.c?a.c.toString():"-")+(void 0!==a.j?a.j.toString():"-")+(void 0!==a.u?a.u.toString():"-")+(void 0!==a.i?a.i.toString():"-"),e,f,a.c,a.j,a.u,a.i]),n=b.add(a.f[0],l,l,a.Yh.bind(a,c),n),a.v=n.image,a.Y=[n.offsetX,n.offsetY],b=n.image.width,a.K=d?n.ys:a.v;a.S=[l/2,l/2];a.T=[l,l];a.G=[b,b]}
m.Yh=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();var e=this.i;if(Infinity===e)b.arc(a.size/2,a.size/2,this.c,0,2*Math.PI,!0);else{var f=void 0!==this.j?this.j:this.c;f!==this.c&&(e*=2);for(c=0;c<=e;c++){d=2*c*Math.PI/e-Math.PI/2+this.u;var g=0===c%2?this.c:f;b.lineTo(a.size/2+g*Math.cos(d),a.size/2+g*Math.sin(d))}}this.Ga&&(c=this.Ga.va(),null===c&&(c=Xc),b.fillStyle=Gc(c),b.fill());this.Ia&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.ka&&(b.setLineDash(a.ka),
b.lineDashOffset=a.lineDashOffset),b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.stroke());b.closePath()};
m.Xh=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();c=this.i;if(Infinity===c)b.arc(a.size/2,a.size/2,this.c,0,2*Math.PI,!0);else{d=void 0!==this.j?this.j:this.c;d!==this.c&&(c*=2);var e;for(e=0;e<=c;e++){var f=2*e*Math.PI/c-Math.PI/2+this.u;var g=0===e%2?this.c:d;b.lineTo(a.size/2+g*Math.cos(f),a.size/2+g*Math.sin(f))}}b.fillStyle=Xc;b.fill();this.Ia&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.ka&&(b.setLineDash(a.ka),b.lineDashOffset=a.lineDashOffset),
b.stroke());b.closePath()};function qd(a){a=a||{};od.call(this,{points:Infinity,fill:a.fill,radius:a.radius,pb:a.pb,stroke:a.stroke,Wd:a.Wd})}u(qd,od);qd.prototype.clone=function(){var a=new qd({fill:this.oa()?this.oa().clone():void 0,stroke:this.sa()?this.sa().clone():void 0,radius:this.c,pb:this.B,Wd:this.C}),b=this.getOpacity();a.N=b;a.g=this.g;return a};qd.prototype.setRadius=function(a){this.c=a;pd(this,this.C)};function rd(a){a=a||{};this.c=void 0!==a.color?a.color:null;this.b=void 0}rd.prototype.clone=function(){var a=this.va();return new rd({color:a&&a.slice?a.slice():a||void 0})};rd.prototype.va=function(){return this.c};rd.prototype.Ad=function(a){this.c=a;this.b=void 0};function sd(a){a=a||{};this.u=void 0!==a.color?a.color:null;this.f=a.lineCap;this.g=void 0!==a.ka?a.ka:null;this.j=a.lineDashOffset;this.i=a.lineJoin;this.o=a.miterLimit;this.c=a.width;this.b=void 0}m=sd.prototype;m.clone=function(){var a=this.va();return new sd({color:a&&a.slice?a.slice():a||void 0,lineCap:this.f,ka:this.g?this.g.slice():void 0,lineDashOffset:this.j,lineJoin:this.i,miterLimit:this.o,width:this.c})};m.va=function(){return this.u};m.Ad=function(a){this.u=a;this.b=void 0};
m.setLineDash=function(a){this.g=a;this.b=void 0};m.Re=function(a){this.c=a;this.b=void 0};function H(a){a=a||{};this.ec=null;this.cb=td;void 0!==a.geometry&&this.setGeometry(a.geometry);this.Ga=void 0!==a.fill?a.fill:null;this.R=void 0!==a.image?a.image:null;this.pc=void 0!==a.Zc?a.Zc:null;this.Ia=void 0!==a.stroke?a.stroke:null;this.ya=void 0!==a.text?a.text:null;this.Lk=a.zIndex}m=H.prototype;
m.clone=function(){var a=this.getGeometry();a&&a.clone&&(a=a.clone());return new H({geometry:a,fill:this.oa()?this.oa().clone():void 0,image:this.Z()?this.Z().clone():void 0,stroke:this.sa()?this.sa().clone():void 0,text:this.Da()?this.Da().clone():void 0,zIndex:this.getZIndex()})};m.kg=function(){return this.pc};m.getGeometry=function(){return this.ec};m.oa=function(){return this.Ga};m.ik=function(a){this.Ga=a};m.Z=function(){return this.R};m.jk=function(a){this.R=a};m.sa=function(){return this.Ia};
m.kk=function(a){this.Ia=a};m.Da=function(){return this.ya};m.mk=function(a){this.ya=a};m.getZIndex=function(){return this.Lk};m.setGeometry=function(a){"function"===typeof a?this.cb=a:"string"===typeof a?this.cb=function(b){return b.get(a)}:a?void 0!==a&&(this.cb=function(){return a}):this.cb=td;this.ec=a};m.setZIndex=function(a){this.Lk=a};function ud(a){if("function"!==typeof a){if(Array.isArray(a))var b=a;else Aa(a instanceof H,41),b=[a];a=function(){return b}}return a}var vd=null;
function wd(){if(!vd){var a=new rd({color:"rgba(255,255,255,0.4)"}),b=new sd({color:"#3399CC",width:1.25});vd=[new H({image:new qd({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return vd}
function xd(){var a={},b=[255,255,255,1],c=[0,153,255,1];a.Polygon=[new H({fill:new rd({color:[255,255,255,.5]})})];a.MultiPolygon=a.Polygon;a.LineString=[new H({stroke:new sd({color:b,width:5})}),new H({stroke:new sd({color:c,width:3})})];a.MultiLineString=a.LineString;a.Circle=a.Polygon.concat(a.LineString);a.Point=[new H({image:new qd({radius:6,fill:new rd({color:c}),stroke:new sd({color:b,width:1.5})}),zIndex:Infinity})];a.MultiPoint=a.Point;a.GeometryCollection=a.Polygon.concat(a.LineString,
a.Point);return a}function td(a){return a.getGeometry()};function yd(a){Va.call(this);this.f=void 0;this.b="geometry";this.o=null;this.i=void 0;this.j=null;D(this,Ya(this.b),this.oe,this);void 0!==a&&(a instanceof yc||!a?this.setGeometry(a):Wa(this,a))}u(yd,Va);m=yd.prototype;m.clone=function(){var a=new yd(this.Sa());zd(a,this.b);var b=this.getGeometry();b&&a.setGeometry(b.clone());(b=this.getStyle())&&a.setStyle(b);return a};m.getGeometry=function(){return this.get(this.b)};m.getStyle=function(){return this.o};m.Bb=function(){return this.i};m.Zo=function(){this.c()};
m.oe=function(){this.j&&(A(this.j),this.j=null);var a=this.getGeometry();a&&(this.j=D(a,"change",this.Zo,this));this.c()};m.setGeometry=function(a){this.set(this.b,a)};m.setStyle=function(a){this.i=(this.o=a)?Ad(a):void 0;this.c()};function Bd(a,b){a.f=b;a.c()}function zd(a,b){La(a,Ya(a.b),a.oe,a);a.b=b;D(a,Ya(a.b),a.oe,a);a.oe()}
function Ad(a){var b;if("function"===typeof a)2==a.length?b=function(b){return a(this,b)}:b=a;else{if(Array.isArray(a))var c=a;else Aa(a instanceof H,41),c=[a];b=function(){return c}}return b};function Cd(){this.j=this.tb=null}function Dd(a,b,c){var d;c&&(d={Kb:c.Kb?c.Kb:a.Je(b),kb:c.kb});return Ed(a,d)}function Ed(a,b){return z({Kb:a.tb,kb:a.j},b)}function Fd(a,b,c){var d=c?fc(c.kb):null,e=c?fc(c.Kb):null,f;d&&e&&!mc(d,e)?a instanceof yc?f=(b?a.clone():a).transform(b?d:e,b?e:d):f=qc(a,e,d):f=a;if(b&&c&&void 0!==c.hd){var g=Math.pow(10,c.hd);f===a&&(f=f.clone());f.Vd(function(a){for(var b=0,c=a.length;b<c;++b)a[b]=Math.round(a[b]*g)/g;return a})}return f};function Hd(){Cd.call(this)}u(Hd,Cd);function Id(a){return"string"===typeof a?a:""}m=Hd.prototype;m.getType=function(){return"text"};m.Jg=function(a){return Jd(this,Id(a),Ed(this,void 0))};m.gb=function(a,b){a=Id(a);Ed(this,b);b=[];for(a=a.substring(1);0<a.length;){var c=a.indexOf(")"),d=Jd(this,a.substring(0,c+1));b.push(d);a=a.substring(c+1)}return b};m.Ng=function(a){return Kd(this,Id(a),Ed(this,void 0))};m.Je=function(){return this.tb};m.hh=function(a){return Ld(this,a,Ed(this,void 0))};
m.Md=function(a,b){b=Ed(this,b);var c=[];if(0<a.length){c.push("F");for(var d=0,e=a.length;d<e;++d)c.push(Ld(this,a[d],b))}return c.join("")};m.cf=function(a){return Nd(this,a,Ed(this,void 0))};function Od(a,b){return a>b?1:a<b?-1:0}function Pd(a,b){return 0<=a.indexOf(b)}function Qd(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function Rd(a,b){var c=Array.isArray(b)?b:[b],d=c.length;for(b=0;b<d;b++)a[a.length]=c[b]}function Sd(a,b){b=a.indexOf(b);var c=-1<b;c&&a.splice(b,1);return c}
function Td(a,b){for(var c=a.length>>>0,d,e=0;e<c;e++)if(d=a[e],b(d,e,a))return d;return null}function Ud(a,b){var c=a.length;if(c!==b.length)return!1;for(var d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}function Vd(a){var b=Wd,c=a.length,d=Array(a.length),e;for(e=0;e<c;e++)d[e]={index:e,value:a[e]};d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index});for(e=0;e<a.length;e++)a[e]=d[e].value}function Xd(a,b){var c;return a.every(function(d,e){c=e;return!b(d,e,a)})?-1:c}
function Yd(a,b){var c=b||Od;return a.every(function(b,e){if(0===e)return!0;b=c(a[e-1],b);return!(0<b||0===b)})};function Zd(){yc.call(this);this.layout="XY";this.H=2;this.D=null}u(Zd,yc);function $d(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}m=Zd.prototype;m.kc=yb;m.de=function(a){var b=this.D,c=this.D.length,d=this.H;a=jb(a);return nb(a,b,0,c,d)};function ae(a){return a.D.slice(a.D.length-a.H)}
m.ng=function(a){this.u!=this.g&&(Ba(this.j),this.i=0,this.u=this.g);if(0>a||0!==this.i&&a<=this.i)return this;var b=a.toString();if(this.j.hasOwnProperty(b))return this.j[b];var c=this.Pc(a);if(c.D.length<this.D.length)return this.j[b]=c;this.i=a;return this};m.Pc=function(){return this};function be(a,b,c){a.H=$d(b);a.layout=b;a.D=c}
m.yb=function(a,b,c){if(a)b=$d(a);else{for(a=0;a<c;++a){if(0===b.length){this.layout="XY";this.H=2;return}b=b[0]}b=b.length;var d;2==b?d="XY":3==b?d="XYZ":4==b&&(d="XYZM");a=d}this.layout=a;this.H=b};m.Vd=function(a){this.D&&(a(this.D,this.D,this.H),this.c())};
m.rotate=function(a,b){var c=this.D;if(c){var d=c.length,e=this.H,f=c?c:[],g=Math.cos(a);a=Math.sin(a);var h=b[0];b=b[1];for(var k=0,l=0;l<d;l+=e){var n=c[l]-h,p=c[l+1]-b;f[k++]=h+n*g-p*a;f[k++]=b+n*a+p*g;for(n=l+2;n<l+e;++n)f[k++]=c[n]}c&&f.length!=k&&(f.length=k);this.c()}};
m.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=tb(this.I()));if(c=this.D){b=c.length;var f=this.H,g=c?c:[],h=e[0];e=e[1];for(var k=0,l=0;l<b;l+=f){var n=c[l]-h,p=c[l+1]-e;g[k++]=h+a*n;g[k++]=e+d*p;for(n=l+2;n<l+f;++n)g[k++]=c[n]}c&&g.length!=k&&(g.length=k);this.c()}};m.translate=function(a,b){var c=this.D;if(c){var d=c.length,e=this.H,f=c?c:[],g=0,h,k;for(h=0;h<d;h+=e)for(f[g++]=c[h]+a,f[g++]=c[h+1]+b,k=h+2;k<h+e;++k)f[g++]=c[k];c&&f.length!=g&&(f.length=g);this.c()}};function ce(a,b,c,d,e,f,g){var h=a[b],k=a[b+1],l=a[c]-h,n=a[c+1]-k;if(0!==l||0!==n)if(f=((e-h)*l+(f-k)*n)/(l*l+n*n),1<f)b=c;else if(0<f){for(e=0;e<d;++e)g[e]=Fb(a[b+e],a[c+e],f);g.length=d;return}for(e=0;e<d;++e)g[e]=a[b+e];g.length=d}function de(a,b,c,d,e){var f=a[b],g=a[b+1];for(b+=d;b<c;b+=d){var h=a[b],k=a[b+1];f=Cb(f,g,h,k);f>e&&(e=f);f=h;g=k}return e}function ee(a,b,c,d,e){var f;var g=0;for(f=c.length;g<f;++g){var h=c[g];e=de(a,b,h,d,e);b=h}return e}
function fe(a,b,c,d,e,f,g,h,k,l,n){if(b==c)return l;if(0===e){var p=Cb(g,h,a[b],a[b+1]);if(p<l){for(n=0;n<d;++n)k[n]=a[b+n];k.length=d;return p}return l}for(var q=n?n:[NaN,NaN],r=b+d;r<c;)if(ce(a,r-d,r,d,g,h,q),p=Cb(g,h,q[0],q[1]),p<l){l=p;for(n=0;n<d;++n)k[n]=q[n];k.length=d;r+=d}else r+=d*Math.max((Math.sqrt(p)-Math.sqrt(l))/e|0,1);if(f&&(ce(a,c-d,b,d,g,h,q),p=Cb(g,h,q[0],q[1]),p<l)){l=p;for(n=0;n<d;++n)k[n]=q[n];k.length=d}return l}
function ge(a,b,c,d,e,f,g,h,k,l,n){n=n?n:[NaN,NaN];var p;var q=0;for(p=c.length;q<p;++q){var r=c[q];l=fe(a,b,r,d,e,f,g,h,k,l,n);b=r}return l};function he(a,b){var c=0,d;var e=0;for(d=b.length;e<d;++e)a[c++]=b[e];return c}function ie(a,b,c,d){var e;var f=0;for(e=c.length;f<e;++f){var g=c[f],h;for(h=0;h<d;++h)a[b++]=g[h]}return b}function je(a,b,c,d,e){e=e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h)b=ie(a,b,c[h],d),e[f++]=b;e.length=f;return e};function ke(a,b,c,d,e){e=void 0!==e?e:[];for(var f=0;b<c;b+=d)e[f++]=a.slice(b,b+d);e.length=f;return e}function le(a,b,c,d,e){e=void 0!==e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h){var k=c[h];e[f++]=ke(a,b,k,d,e[f]);b=k}e.length=f;return e}function me(a,b,c,d,e){e=void 0!==e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h){var k=c[h];e[f++]=le(a,b,k,d,e[f]);b=k[k.length-1]}e.length=f;return e};function ne(a,b,c,d,e){var f=NaN,g=NaN,h=(c-b)/d;if(1===h)f=a[b],g=a[b+1];else if(2==h)f=.5*a[b]+.5*a[b+d],g=.5*a[b+1]+.5*a[b+d+1];else if(0!==h){g=a[b];h=a[b+1];var k=0;f=[0];var l;for(l=b+d;l<c;l+=d){var n=a[l],p=a[l+1];k+=Math.sqrt((n-g)*(n-g)+(p-h)*(p-h));f.push(k);g=n;h=p}c=.5*k;k=0;l=f.length;for(n=!1;k<l;)g=k+(l-k>>1),h=+Od(f[g],c),0>h?k=g+1:(l=g,n=!h);g=n?k:~k;0>g?(c=(c-f[-g-2])/(f[-g-1]-f[-g-2]),b+=(-g-2)*d,f=Fb(a[b],a[b+d],c),g=Fb(a[b+1],a[b+d+1],c)):(f=a[b+g*d],g=a[b+g*d+1])}return e?(e[0]=
f,e[1]=g,e):[f,g]};function oe(a,b,c,d,e){return!ob(e,function(e){return!pe(a,b,c,d,e[0],e[1])})}function pe(a,b,c,d,e,f){for(var g=0,h=a[c-d],k=a[c-d+1];b<c;b+=d){var l=a[b],n=a[b+1];k<=f?n>f&&0<(l-h)*(f-k)-(e-h)*(n-k)&&g++:n<=f&&0>(l-h)*(f-k)-(e-h)*(n-k)&&g--;h=l;k=n}return 0!==g}function qe(a,b,c,d,e,f){if(0===c.length||!pe(a,b,c[0],d,e,f))return!1;var g;b=1;for(g=c.length;b<g;++b)if(pe(a,c[b-1],c[b],d,e,f))return!1;return!0};function re(a,b,c,d,e,f){for(var g=[a[b],a[b+1]],h=[],k;b+d<c;b+=d){h[0]=a[b+d];h[1]=a[b+d+1];if(k=e.call(f,g,h))return k;g[0]=h[0];g[1]=h[1]}return!1};function se(a,b,c,d,e){var f=nb(ab(),a,b,c,d);return wb(e,f)?fb(e,f)||f[0]>=e[0]&&f[2]<=e[2]||f[1]>=e[1]&&f[3]<=e[3]?!0:re(a,b,c,d,function(a,b){var c=!1,d=hb(e,a),f=hb(e,b);if(1===d||1===f)c=!0;else{var g=e[0],h=e[1],r=e[2],v=e[3],w=b[0];b=b[1];a=(b-a[1])/(w-a[0]);f&2&&!(d&2)&&(c=w-(b-v)/a,c=c>=g&&c<=r);c||!(f&4)||d&4||(c=b-(w-r)*a,c=c>=h&&c<=v);c||!(f&8)||d&8||(c=w-(b-h)/a,c=c>=g&&c<=r);c||!(f&16)||d&16||(c=b-(w-g)*a,c=c>=h&&c<=v)}return c}):!1}
function te(a,b,c,d,e){var f=c[0];if(!(se(a,b,f,d,e)||pe(a,b,f,d,e[0],e[1])||pe(a,b,f,d,e[0],e[3])||pe(a,b,f,d,e[2],e[1])||pe(a,b,f,d,e[2],e[3])))return!1;if(1===c.length)return!0;b=1;for(f=c.length;b<f;++b)if(oe(a,c[b-1],c[b],d,e))return!1;return!0};function ue(a,b,c,d){var e=a[b],f=a[b+1],g=0;for(b+=d;b<c;b+=d){var h=a[b],k=a[b+1];g+=Math.sqrt((h-e)*(h-e)+(k-f)*(k-f));e=h;f=k}return g};function we(a,b,c,d,e,f,g){var h=(c-b)/d;if(3>h){for(;b<c;b+=d)f[g++]=a[b],f[g++]=a[b+1];return g}var k=Array(h);k[0]=1;k[h-1]=1;c=[b,c-d];for(var l=0,n;0<c.length;){var p=c.pop(),q=c.pop(),r=0,v=a[q],w=a[q+1],C=a[p],G=a[p+1];for(n=q+d;n<p;n+=d){var I=a[n];var J=a[n+1],E=v,W=w,y=C-E,B=G-W;if(0!==y||0!==B){var K=((I-E)*y+(J-W)*B)/(y*y+B*B);1<K?(E=C,W=G):0<K&&(E+=y*K,W+=B*K)}I=Cb(I,J,E,W);I>r&&(l=n,r=I)}r>e&&(k[(l-b)/d]=1,q+d<l&&c.push(q,l),l+d<p&&c.push(l,p))}for(n=0;n<h;++n)k[n]&&(f[g++]=a[b+n*d],
f[g++]=a[b+n*d+1]);return g}
function xe(a,b,c,d,e,f,g,h){var k;var l=0;for(k=c.length;l<k;++l){var n=c[l];a:{var p=a,q=n,r=d,v=e,w=f,C=g;if(b!=q){var G=v*Math.round(p[b]/v),I=v*Math.round(p[b+1]/v);b+=r;w[C++]=G;w[C++]=I;do{var J=v*Math.round(p[b]/v);g=v*Math.round(p[b+1]/v);b+=r;if(b==q){w[C++]=J;w[C++]=g;g=C;break a}}while(J==G&&g==I);for(;b<q;){var E=v*Math.round(p[b]/v);var W=v*Math.round(p[b+1]/v);b+=r;if(E!=J||W!=g){var y=J-G,B=g-I,K=E-G,U=W-I;y*U==B*K&&(0>y&&K<y||y==K||0<y&&K>y)&&(0>B&&U<B||B==U||0<B&&U>B)||(w[C++]=J,
w[C++]=g,G=J,I=g);J=E;g=W}}w[C++]=J;w[C++]=g}g=C}h.push(g);b=n}return g};function ye(a,b){Zd.call(this);this.b=null;this.C=this.F=this.o=-1;this.ha(a,b)}u(ye,Zd);m=ye.prototype;m.clone=function(){var a=new ye(null);ze(a,this.layout,this.D.slice());return a};m.sb=function(a,b,c,d){if(d<eb(this.I(),a,b))return d;this.C!=this.g&&(this.F=Math.sqrt(de(this.D,0,this.D.length,this.H,0)),this.C=this.g);return fe(this.D,0,this.D.length,this.H,this.F,!1,a,b,c,d)};function Ae(a,b){re(a.D,0,a.D.length,a.H,b,void 0)}m.O=function(){return ke(this.D,0,this.D.length,this.H)};
function Be(a,b){return ne(a.D,0,a.D.length,a.H,b)}function Ce(a){return ue(a.D,0,a.D.length,a.H)}m.ag=function(){this.o!=this.g&&(this.b=Be(this,this.b),this.o=this.g);return this.b};m.Pc=function(a){var b=[];b.length=we(this.D,0,this.D.length,this.H,a,b,0);a=new ye(null);ze(a,"XY",b);return a};m.getType=function(){return"LineString"};m.nb=function(a){return se(this.D,0,this.D.length,this.H,a)};
m.ha=function(a,b){a?(this.yb(b,a,1),this.D||(this.D=[]),this.D.length=ie(this.D,0,a,this.H),this.c()):ze(this,"XY",null)};function ze(a,b,c){be(a,b,c);a.c()};function De(a,b,c,d){Ra.call(this);this.extent=a;this.b=c;this.resolution=b;this.state=d}u(De,Ra);function Ee(a){F(a,"change")}De.prototype.I=function(){return this.extent};De.prototype.V=function(){return this.resolution};De.prototype.getState=function(){return this.state};function Fe(a,b,c,d,e){this.f=void 0!==e?e:null;De.call(this,a,b,c,void 0!==e?0:2);this.g=d}u(Fe,De);Fe.prototype.c=function(a){this.state=a?3:2;Ee(this)};Fe.prototype.load=function(){0==this.state&&(this.state=1,Ee(this),this.f(this.c.bind(this)))};Fe.prototype.Z=function(){return this.g};function Ge(a,b){this.v=a;this.f=b;this.c=[];this.b=[];this.g={}}Ge.prototype.clear=function(){this.c.length=0;this.b.length=0;Ba(this.g)};Ge.prototype.o=function(a){Aa(!(this.f(a)in this.g),31);var b=this.v(a);return Infinity!=b?(this.c.push(a),this.b.push(b),this.g[this.f(a)]=!0,He(this,0,this.c.length-1),!0):!1};function Ie(a,b){for(var c=a.c,d=a.b,e=c.length,f=c[b],g=d[b],h=b;b<e>>1;){var k=2*b+1,l=2*b+2;k=l<e&&d[l]<d[k]?l:k;c[b]=c[k];d[b]=d[k];b=k}c[b]=f;d[b]=g;He(a,h,b)}
function He(a,b,c){var d=a.c;a=a.b;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(a[g]>f)d[c]=d[g],a[c]=a[g],c=g;else break}d[c]=e;a[c]=f};function Je(a,b){Ge.call(this,function(b){return a.apply(null,b)},function(a){return a[0].jc()});this.B=b;this.i=0;this.j={}}u(Je,Ge);Je.prototype.o=function(a){var b=Ge.prototype.o.call(this,a);b&&D(a[0],"change",this.u,this);return b};Je.prototype.u=function(a){a=a.target;var b=a.getState();if(2===b||3===b||4===b||5===b)La(a,"change",this.u,this),a=a.jc(),a in this.j&&(delete this.j[a],--this.i),this.B()};var Ke={Gg:{}};Ke.Gg.nh=function(){};
(function(a){function b(a,b,c){if(g)return new ImageData(a,b,c);b=h.createImageData(b,c);b.data.set(a);return b}function c(a){var b=!0;try{new ImageData(10,10)}catch(n){b=!1}return function(c){var d=c.buffers,e=c.meta,f=c.width,g=c.height,h=d.length,k=d[0].byteLength;if(c.imageOps){k=Array(h);for(c=0;c<h;++c){var l=c;var n=new Uint8ClampedArray(d[c]);var J=f,E=g;n=b?new ImageData(n,J,E):{data:n,width:J,height:E};k[l]=n}f=a(k,e).data}else{f=new Uint8ClampedArray(k);g=Array(h);l=Array(h);for(c=0;c<
h;++c)g[c]=new Uint8ClampedArray(d[c]),l[c]=[0,0,0,0];for(d=0;d<k;d+=4){for(c=0;c<h;++c)n=g[c],l[c][0]=n[d],l[c][1]=n[d+1],l[c][2]=n[d+2],l[c][3]=n[d+3];c=a(l,e);f[d]=c[0];f[d+1]=c[1];f[d+2]=c[2];f[d+3]=c[3]}}return f.buffer}}function d(a,b){var d=Object.keys(a.lo||{}).map(function(b){return"var "+b+" = "+a.lo[b].toString()+";"}).concat(["var __minion__ = ("+c.toString()+")(",a.Qp.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);",
"});"]);d=URL.createObjectURL(new Blob(d,{type:"text/javascript"}));d=new Worker(d);d.addEventListener("message",b);return d}function e(a,b){var d=c(a.Qp);return{postMessage:function(a){setTimeout(function(){b({data:{buffer:d(a),meta:a.meta}})},0)}}}function f(a){this.ff=!!a.zs;var b;0===a.ar?b=0:this.ff?b=1:b=a.ar||1;var c=[];if(b)for(var f=0;f<b;++f)c[f]=d(a,this.th.bind(this,f));else c[0]=e(a,this.th.bind(this,0));this.Rd=c;this.uh=[];this.Qd=0;this.yc={};this.gf=null}var g=!0;try{new ImageData(10,
10)}catch(k){g=!1}var h=document.createElement("canvas").getContext("2d");f.prototype.destroy=function(){for(var a in this)this[a]=null;this.nl=!0};f.prototype.ol=function(){if(0===this.Qd&&0<this.uh.length){var a=this.gf=this.uh.shift(),b=a.inputs[0].width,c=a.inputs[0].height,d=a.inputs.map(function(a){return a.data.buffer}),e=this.Rd.length;this.Qd=e;if(1===e)this.Rd[0].postMessage({buffers:d,meta:a.ro,imageOps:this.ff,width:b,height:c},d);else for(var f=4*Math.ceil(a.inputs[0].data.length/4/e),
g=0;g<e;++g){for(var h=g*f,C=[],G=0,I=d.length;G<I;++G)C.push(d[g].slice(h,h+f));this.Rd[g].postMessage({buffers:C,meta:a.ro,imageOps:this.ff,width:b,height:c},C)}}};f.prototype.th=function(a,b){this.nl||(this.yc[a]=b.data,--this.Qd,0===this.Qd&&this.ql())};f.prototype.ql=function(){var a=this.gf,c=this.Rd.length;if(1===c){var d=new Uint8ClampedArray(this.yc[0].buffer);var e=this.yc[0].meta}else{var f=a.inputs[0].data.length;d=new Uint8ClampedArray(f);e=Array(f);f=4*Math.ceil(f/4/c);for(var g=0;g<
c;++g){var h=g*f;d.set(new Uint8ClampedArray(this.yc[g].buffer),h);e[g]=this.yc[g].meta}}this.gf=null;this.yc={};a.callback(null,b(d,a.inputs[0].width,a.inputs[0].height),e);this.ol()};a["default"]={nh:f};a.nh=f})(Ke.Gg=Ke.Gg||{});function Le(a){Va.call(this);var b=z({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;Wa(this,b);this.b={layer:this,yg:!0}}u(Le,Va);m=Le.prototype;m.getType=function(){return this.type};
function Me(a){a.b.opacity=Ab(a.getOpacity(),0,1);a.b.Vq=a.og();a.b.visible=Ne(a);a.b.extent=a.I();a.b.zIndex=a.getZIndex();a.b.maxResolution=a.get("maxResolution");a.b.minResolution=Math.max(a.get("minResolution"),0);return a.b}m.I=function(){return this.get("extent")};m.getOpacity=function(){return this.get("opacity")};function Ne(a){return a.get("visible")}m.getZIndex=function(){return this.get("zIndex")};function Oe(a,b){a.set("visible",b)}m.setZIndex=function(a){this.set("zIndex",a)};function Pe(a){var b=z({},a);delete b.source;Le.call(this,b);this.u=this.i=this.j=null;a.map&&this.setMap(a.map);D(this,Ya("source"),this.Hn,this);this.set("source",a.source?a.source:null)}u(Pe,Le);function Qe(a,b){return a.visible&&b>=a.minResolution&&b<a.maxResolution}m=Pe.prototype;m.cg=function(a){a=a?a:[];a.push(Me(this));return a};function M(a){return a.get("source")||null}m.og=function(){var a=M(this);return a?a.getState():"undefined"};m.Gn=function(){this.c()};
m.Hn=function(){this.u&&(A(this.u),this.u=null);var a=M(this);a&&(this.u=D(a,"change",this.Gn,this));this.c()};m.setMap=function(a){this.j&&(A(this.j),this.j=null);a||this.c();this.i&&(A(this.i),this.i=null);a&&(this.j=D(a,"precompose",function(a){var b=Me(this);b.yg=!1;b.zIndex=Infinity;a.frameState.wd.push(b);a.frameState.se[x(this)]=b},this),this.i=D(this,"change",a.render,a),this.c())};function Re(a){Pe.call(this,a?a:{});this.type="IMAGE"}u(Re,Pe);function Se(a){a=a?a:{};var b=z({},a);delete b.De;delete b.Bk;Pe.call(this,b);this.set("preload",void 0!==a.De?a.De:0);this.set("useInterimTilesOnError",void 0!==a.Bk?a.Bk:!0);this.type="TILE"}u(Se,Pe);var Te=[],Ue=[];function Ve(a,b){switch(a){case "MAP_RENDERER":a=Te;a.push(b);break;case "LAYER_RENDERER":a=Ue;a.push(b);break;default:throw Error("Unsupported plugin type: "+a);}};function We(a,b){a=void 0!==b?a.toFixed(b):""+a;b=a.indexOf(".");b=-1===b?a.length:b;return 2<b?a:Array(3-b).join("0")+a};function Xe(a,b){var c=Math.sqrt(Ye(b)),d=b.getCenter();b=d[0];d=d[1];var e=a[0]-b;a=a[1]-d;0===e&&0===a&&(e=1);var f=Math.sqrt(e*e+a*a);return[b+c*e/f,d+c*a/f]}function Ze(a,b){var c=a[0];a=a[1];var d=b[0],e=b[1];b=d[0];d=d[1];var f=e[0];e=e[1];var g=f-b,h=e-d;c=0===g&&0===h?0:(g*(c-b)+h*(a-d))/(g*g+h*h||0);0>=c?(a=b,c=d):1<=c?(a=f,c=e):(a=b+c*g,c=d+c*h);return[a,c]}function $e(a,b){for(var c=!0,d=a.length-1;0<=d;--d)if(a[d]!=b[d]){c=!1;break}return c}
function af(a,b){var c=Math.cos(b);b=Math.sin(b);var d=a[1]*c+a[0]*b;a[0]=a[0]*c-a[1]*b;a[1]=d}function bf(a,b){var c=a[0]-b[0];a=a[1]-b[1];return c*c+a*a}function cf(a,b){return Math.sqrt(bf(a,b))}function df(a,b){return bf(a,Ze(a,b))};function ef(a,b,c,d,e){Pa.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e}u(ef,Pa);function ff(){}m=ff.prototype;m.Wh=function(){};m.setStyle=function(){};m.Cf=function(){};m.Df=function(){};m.Ef=function(){};m.Ff=function(){};m.Gf=function(){};m.drawPoint=function(){};m.Hf=function(){};m.drawText=function(){};m.Fb=function(){};m.Bd=function(){};m.zb=function(){};function gf(a,b,c,d,e){this.g=a;this.i=b;this.j=c;this.K=d;this.rb=e;this.R=this.c=this.b=this.wa=this.U=this.T=null;this.ia=this.W=this.B=this.G=this.F=this.S=0;this.Qa=!1;this.f=this.qa=0;this.ua=!1;this.Y=0;this.ya="";this.Ea=this.za=0;this.Fa=!1;this.v=this.Na=0;this.N=this.u=this.o=null;this.C=[];this.jb=sc()}u(gf,ff);
function hf(a,b,c){if(a.R){b=zb(b,0,c,2,a.K,a.C);c=a.g;var d=a.jb,e=c.globalAlpha;1!=a.B&&(c.globalAlpha=e*a.B);var f=a.qa;a.Qa&&(f+=a.rb);var g;var h=0;for(g=b.length;h<g;h+=2){var k=b[h]-a.S,l=b[h+1]-a.F;a.ua&&(k=Math.round(k),l=Math.round(l));if(0!==f||1!=a.f){var n=k+a.S,p=l+a.F;xc(d,n,p,a.f,a.f,f,-n,-p);c.setTransform.apply(c,d)}c.drawImage(a.R,a.W,a.ia,a.Y,a.G,k,l,a.Y,a.G)}0===f&&1==a.f||c.setTransform(1,0,0,1,0,0);1!=a.B&&(c.globalAlpha=e)}}
function jf(a,b,c,d){var e=0;if(a.N&&""!==a.ya){a.o&&kf(a,a.o);a.u&&lf(a,a.u);var f=a.N,g=a.g,h=a.wa,k=f.textAlign?f.textAlign:"center";h?(h.font!=f.font&&(h.font=g.font=f.font),h.textAlign!=k&&(h.textAlign=k),h.textBaseline!=f.textBaseline&&(h.textBaseline=g.textBaseline=f.textBaseline)):(g.font=f.font,g.textAlign=k,g.textBaseline=f.textBaseline,a.wa={font:f.font,textAlign:k,textBaseline:f.textBaseline});b=zb(b,e,c,d,a.K,a.C);f=a.g;g=a.Na;for(a.Fa&&(g+=a.rb);e<c;e+=d){h=b[e]+a.za;k=b[e+1]+a.Ea;if(0!==
g||1!=a.v){var l=xc(a.jb,h,k,a.v,a.v,g,-h,-k);f.setTransform.apply(f,l)}a.u&&f.strokeText(a.ya,h,k);a.o&&f.fillText(a.ya,h,k)}0===g&&1==a.v||f.setTransform(1,0,0,1,0,0)}}function nf(a,b,c,d,e,f){var g=a.g;a=zb(b,c,d,e,a.K,a.C);g.moveTo(a[0],a[1]);b=a.length;f&&(b-=2);for(c=2;c<b;c+=2)g.lineTo(a[c],a[c+1]);f&&g.closePath();return d}function of(a,b,c,d,e){var f;var g=0;for(f=d.length;g<f;++g)c=nf(a,b,c,d[g],e,!0);return c}m=gf.prototype;
m.Cf=function(a){if(wb(this.j,a.I())){if(this.b||this.c){this.b&&kf(this,this.b);this.c&&lf(this,this.c);var b=this.K;var c=this.C,d=a.D;b=d?zb(d,0,d.length,a.H,b,c):null;c=b[2]-b[0];d=b[3]-b[1];c=Math.sqrt(c*c+d*d);d=this.g;d.beginPath();d.arc(b[0],b[1],c,0,2*Math.PI);this.b&&d.fill();this.c&&d.stroke()}""!==this.ya&&jf(this,a.getCenter(),2,2)}};m.setStyle=function(a){this.Fb(a.oa(),a.sa());this.Bd(a.Z());this.zb(a.Da())};
m.drawPoint=function(a){var b=a.D;a=a.H;this.R&&hf(this,b,b.length);""!==this.ya&&jf(this,b,b.length,a)};m.Ff=function(a){var b=a.D;a=a.H;this.R&&hf(this,b,b.length);""!==this.ya&&jf(this,b,b.length,a)};m.Df=function(a){if(wb(this.j,a.I())){if(this.c){lf(this,this.c);var b=this.g,c=a.D;b.beginPath();nf(this,c,0,c.length,a.H,!1);b.stroke()}""!==this.ya&&(a=a.ag(),jf(this,a,2,2))}};
m.Ef=function(a){var b=a.I();if(wb(this.j,b)){if(this.c){lf(this,this.c);b=this.g;var c=a.D,d=0,e=a.Wa(),f=a.H;b.beginPath();var g;var h=0;for(g=e.length;h<g;++h)d=nf(this,c,d,e[h],f,!1);b.stroke()}""!==this.ya&&(a=a.di(),jf(this,a,a.length,2))}};m.Hf=function(a){if(wb(this.j,a.I())){if(this.c||this.b){this.b&&kf(this,this.b);this.c&&lf(this,this.c);var b=this.g;b.beginPath();of(this,a.lc(),0,a.Wa(),a.H);this.b&&b.fill();this.c&&b.stroke()}""!==this.ya&&(a=a.Kc(),jf(this,a,2,2))}};
m.Gf=function(a){if(wb(this.j,a.I())){if(this.c||this.b){this.b&&kf(this,this.b);this.c&&lf(this,this.c);var b=this.g,c=pf(a),d=0,e=a.f,f=a.H,g;b.beginPath();var h=0;for(g=e.length;h<g;++h)d=of(this,c,d,e[h],f);this.b&&b.fill();this.c&&b.stroke()}""!==this.ya&&(a=qf(a),jf(this,a,a.length,2))}};function kf(a,b){var c=a.g,d=a.T;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.T={fillStyle:b.fillStyle})}
function lf(a,b){var c=a.g,d=a.U;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),Qc&&(Ud(d.ka,b.ka)||c.setLineDash(d.ka=b.ka),d.lineDashOffset!=b.lineDashOffset&&(d.lineDashOffset=c.lineDashOffset=b.lineDashOffset)),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=b.strokeStyle)):(c.lineCap=
b.lineCap,Qc&&(c.setLineDash(b.ka),c.lineDashOffset=b.lineDashOffset),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=b.miterLimit,c.strokeStyle=b.strokeStyle,a.U={lineCap:b.lineCap,ka:b.ka,lineDashOffset:b.lineDashOffset,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}
m.Fb=function(a,b){a?(a=a.va(),this.b={fillStyle:Gc(a?a:Xc)}):this.b=null;if(b){a=b.va();var c=b.f,d=b.g,e=b.j,f=b.i,g=b.c;b=b.o;this.c={lineCap:void 0!==c?c:"round",ka:d?d:Yc,lineDashOffset:e?e:0,lineJoin:void 0!==f?f:"round",lineWidth:this.i*(void 0!==g?g:1),miterLimit:void 0!==b?b:10,strokeStyle:Gc(a?a:Zc)}}else this.c=null};
m.Bd=function(a){if(a){var b=a.he(),c=a.Z(1),d=a.Ae(),e=a.ra();this.S=b[0];this.F=b[1];this.G=e[1];this.R=c;this.B=a.getOpacity();this.W=d[0];this.ia=d[1];this.Qa=a.F;this.qa=a.o;this.f=a.g*this.i;this.ua=a.B;this.Y=e[0]}else this.R=null};
m.zb=function(a){if(a){var b=a.oa();b?(b=b.va(),this.o={fillStyle:Gc(b?b:Xc)}):this.o=null;var c=a.sa();if(c){b=c.va();var d=c.f,e=c.g,f=c.j,g=c.i,h=c.c;c=c.o;this.u={lineCap:void 0!==d?d:"round",ka:e?e:Yc,lineDashOffset:f?f:0,lineJoin:void 0!==g?g:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==c?c:10,strokeStyle:Gc(b?b:Zc)}}else this.u=null;b=a.c;d=a.g;e=a.f;f=a.u;g=a.i;h=a.b;c=a.Da();var k=a.j;a=a.o;this.N={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==
a?a:"middle"};this.ya=void 0!==c?c:"";this.za=void 0!==d?this.i*d:0;this.Ea=void 0!==e?this.i*e:0;this.Fa=void 0!==f?f:!1;this.Na=void 0!==g?g:0;this.v=this.i*(void 0!==h?h:1)}else this.ya=""};function rf(a){Ta.call(this);this.ia=a}u(rf,Ta);rf.prototype.Ra=xa;function sf(a,b,c){return function(d,e){return tf(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.Ja.toString()]=a})}}rf.prototype.la=function(){return this.ia};rf.prototype.W=function(a){2===a.target.getState()&&uf(this)};rf.prototype.loadImage=function(a){var b=a.getState();2!=b&&3!=b&&D(a,"change",this.W,this);0==b&&(a.load(),b=a.getState());return 2==b};function uf(a){var b=a.la();Ne(b)&&"ready"==b.og()&&a.c()}
function Af(a,b){b.Bj()&&(b=function(a,b,e){b=x(a).toString();b in e.eh&&a.Ic(e.da.projection,e.eh[b])}.bind(null,b),a.Ce.push(b))}function Bf(a,b){b=b.Fa;void 0!==b&&("string"===typeof b?a.Tc[b]="":b&&(Aa("string"==typeof b.href,44),Aa("string"==typeof b.src,45),a.Tc[b.src]=b.href))}function Cf(a,b,c,d){b=x(b).toString();c=c.toString();b in a?c in a[b]?a[b][c].extend(d):a[b][c]=d:(a[b]={},a[b][c]=d)}
function Df(a,b,c,d,e,f,g,h){var k=x(b).toString();k in a.Ld||(a.Ld[k]={});var l=a.Ld[k];a=a.br;var n,p,q;for(q=c.minZoom;q<=g;++q){var r=Ef(c,f,q,r);var v=c.V(q);for(n=r.ea;n<=r.ga;++n)for(p=r.ca;p<=r.fa;++p)if(g-q<=h){var w=b.getTile(q,n,p,d,e);0==w.getState()&&(l[w.jc()]=!0,w.jc()in a.g||a.o([w,k,Ff(c,w.Ja),v]))}else b.Ck(q,n,p,e)}};function Gf(a){rf.call(this,a);this.qa=sc()}u(Gf,rf);function Hf(a,b,c){var d=b.ja,e=b.size[0]*d,f=b.size[1]*d,g=b.da.rotation,h=[c[0],c[3]],k=[c[2],c[3]],l=[c[2],c[1]];c=[c[0],c[1]];wc(b.Gc,h);wc(b.Gc,k);wc(b.Gc,l);wc(b.Gc,c);a.save();jd(a,-g,e/2,f/2);a.beginPath();a.moveTo(h[0]*d,h[1]*d);a.lineTo(k[0]*d,k[1]*d);a.lineTo(l[0]*d,l[1]*d);a.lineTo(c[0]*d,c[1]*d);a.clip();jd(a,g,e/2,f/2)}
function If(a,b,c,d,e){var f=a.la();if(Sa(f,b)){var g=d.size[0]*d.ja,h=d.size[1]*d.ja,k=d.da.rotation;jd(c,-k,g/2,h/2);a=void 0!==e?e:Jf(a,d,0);F(f,new ef(b,new gf(c,d.ja,d.extent,a,d.da.rotation),d,c,null));jd(c,k,g/2,h/2)}}Gf.prototype.u=function(a,b,c,d){if(this.Ra(a,b,0,xb,this))return c.call(d,this.la(),null)};Gf.prototype.Be=function(a,b,c,d){If(this,"postcompose",a,b,d)};
function Jf(a,b,c){var d=b.da,e=b.ja,f=e/d.resolution;return xc(a.qa,e*b.size[0]/2,e*b.size[1]/2,f,-f,-d.rotation,-d.center[0]+c,-d.center[1])};function Kf(a){Gf.call(this,a);this.o=sc();this.i=null}u(Kf,Gf);Kf.prototype.rf=function(a,b,c){If(this,"precompose",c,a,void 0);var d=this.Z();if(d){var e=b.extent,f=void 0!==e&&!fb(e,a.extent)&&wb(e,a.extent);f&&Hf(c,a,e);e=this.v();var g=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(d,0,0,+d.width,+d.height,Math.round(e[4]),Math.round(e[5]),Math.round(d.width*e[0]),Math.round(d.height*e[3]));c.globalAlpha=g;f&&c.restore()}this.Be(c,a,b)};
Kf.prototype.Ra=function(a,b,c,d,e){var f=this.la();return M(f).Ra(a,b.da.resolution,b.da.rotation,c,b.Se,function(a){return d.call(e,a,f)})};Kf.prototype.u=function(a,b,c,d){if(this.Z()){if(M(this.la()).Ra!==xa)return Gf.prototype.u.apply(this,arguments);var e=wc(this.o,a.slice()),f=b.da.resolution/this.f;e[0]*=f;e[1]*=f;this.i||(this.i=Hc(1,1));this.i.clearRect(0,0,1,1);this.i.drawImage(this.Z(),e[0],e[1],1,1,0,0,1,1);e=this.i.getImageData(0,0,1,1).data;if(0<e[3])return c.call(d,this.la(),e)}};function Lf(a){Kf.call(this,a);this.R=null;this.j=sc();this.B=[];this.b=null}u(Lf,Kf);Lf.handles=function(a,b){return"canvas"===a&&("IMAGE"===b.getType()||"VECTOR"===b.getType()&&"image"===b.f)};Lf.create=function(a,b){var c=new Lf(b);if("VECTOR"===b.getType())for(var d=0,e=Ue.length;d<e;++d){var f=Ue[d];f!==Lf&&f.handles("canvas",b)&&(f=f.create(a,b),c.b=f)}return c};Lf.prototype.Z=function(){return this.R?this.R.Z():null};Lf.prototype.v=function(){return this.j};
Lf.prototype.Yc=function(a,b){var c=a.ja,d=a.size,e=a.da,f=e.center,g=e.resolution,h=M(this.la()),k=a.ac,l=a.extent;void 0!==b.extent&&(l=vb(l,b.extent));if(!k[0]&&!k[1]&&!qb(l))if(k=e.projection,e=this.b){k=e.context;var n=z({},a,{size:[rb(l)/g,sb(l)/g],da:z({},a.da,{rotation:0})}),p=Object.keys(n.Se).sort();!e.Yc(n,b)||!e.i&&Ud(p,this.B)||(k.canvas.width=n.size[0]*c,k.canvas.height=n.size[1]*c,e.rf(n,b,k),this.R=new Fe(l,g,c,k.canvas),this.B=p)}else(e=h.Z(l,g,c,k))&&this.loadImage(e)&&(this.R=e);
this.R&&(e=this.R,l=e.I(),b=e.V(),e=e.b,k=c*b/(g*e),l=xc(this.j,c*d[0]/2,c*d[1]/2,k,k,0,e*(l[0]-f[0])/b,e*(f[1]-l[3])/b),xc(this.o,c*d[0]/2-l[4],c*d[1]/2-l[5],c/g,-c/g,0,-f[0],-f[1]),Bf(a,h),this.f=b*c/e);return!!this.R};Lf.prototype.Ra=function(a,b,c,d,e){return this.b?this.b.Ra(a,b,c,d,e):Kf.prototype.Ra.call(this,a,b,c,d,e)};function Mf(a,b,c,d){this.ea=a;this.ga=b;this.ca=c;this.fa=d}function Nf(a,b,c,d,e){return void 0!==e?(e.ea=a,e.ga=b,e.ca=c,e.fa=d,e):new Mf(a,b,c,d)}function Of(a,b,c){return a.ea<=b&&b<=a.ga&&a.ca<=c&&c<=a.fa}Mf.prototype.equals=function(a){return this.ea==a.ea&&this.ca==a.ca&&this.ga==a.ga&&this.fa==a.fa};Mf.prototype.extend=function(a){a.ea<this.ea&&(this.ea=a.ea);a.ga>this.ga&&(this.ga=a.ga);a.ca<this.ca&&(this.ca=a.ca);a.fa>this.fa&&(this.fa=a.fa)};
Mf.prototype.ra=function(){return[this.ga-this.ea+1,this.fa-this.ca+1]};function Pf(a){Kf.call(this,a);this.context=null===this.context?null:Hc();this.b=null;this.j=[];this.T=ab();this.za=new Mf(0,0,0,0);this.B=sc();this.U=0}u(Pf,Kf);Pf.handles=function(a,b){return"canvas"===a&&"TILE"===b.getType()};Pf.create=function(a,b){return new Pf(b)};function Qf(a,b){b=b.getState();a=a.la().get("useInterimTilesOnError");return 2==b||4==b||3==b&&!a}
Pf.prototype.Yc=function(a,b){var c=a.ja,d=a.size,e=a.da,f=e.projection,g=e.resolution;e=e.center;var h=this.la(),k=M(h),l=k.g,n=k.vb(f),p=Ab(Qd(n.c,g,this.U||0),n.minZoom,n.maxZoom),q=n.V(p),r=Math.round(g/q)||1,v=a.extent;void 0!==b.extent&&(v=vb(v,b.extent));if(qb(v))return!1;var w=Ef(n,v,p),C=Rf(n,p,w),G=k.C,I={};I[p]={};var J=sf(k,f,I),E=this.T,W=this.za,y=!1,B,K;for(B=w.ea;B<=w.ga;++B)for(K=w.ca;K<=w.fa;++K){var U=k.getTile(p,B,K,c,f);3==U.getState()&&(h.get("useInterimTilesOnError")?0<h.get("preload")&&
(y=!0):U.ib(2));Qf(this,U)||(U=Sf(U));if(Qf(this,U)){var ca=x(this);if(2==U.getState()){I[p][U.Ja.toString()]=U;var Na=U.g?-1!==U.o[ca]:!1;y||!Na&&-1!==this.j.indexOf(U)||(y=!0)}if(1===Tf(U,ca,a.time))continue}ca=Uf(n,U.Ja,W,E);Na=!1;ca&&(Na=J(p+1,ca));Na||Vf(n,U.Ja,J,W,E)}U=q*c/G*r;B=a.ac;B=B[0]||B[1];if(!(this.f&&16<Date.now()-a.time&&B||!y&&this.b&&fb(this.b,v)&&this.Tg==l&&r==this.G&&(B||U==this.f))){if(U=this.context)K=Wf(k,p,f),B=Math.round((w.ga-w.ea+1)*K[0]/r),K=Math.round((w.fa-w.ca+1)*K[1]/
r),y=U.canvas,y.width!=B||y.height!=K?(this.G=r,y.width=B,y.height=K):(this.b&&!lb(C,this.b)&&U.clearRect(0,0,B,K),r=this.G);this.j.length=0;y=Object.keys(I).map(Number);y.sort(function(a,b){return a===p?1:b===p?-1:a>b?1:a<b?-1:0});ca=0;for(Na=y.length;ca<Na;++ca){W=y[ca];J=Wf(k,W,f);U=n.V(W);var Ja=U/q;var L=G*k.fi(f);var Ka=I[W];for(var Gd in Ka){U=Ka[Gd];K=Xf(n,U.Ja,E);B=(K[0]-C[0])/q*G/r;K=(C[3]-K[3])/q*G/r;var mf=J[0]*Ja/r;var ec=J[1]*Ja/r;this.If(U,a,b,B,K,mf,ec,L,p===W);this.j.push(U)}}this.Tg=
l;this.f=q*c/G*r;this.b=C}b=this.f/g;b=xc(this.B,c*d[0]/2,c*d[1]/2,b,b,0,(this.b[0]-e[0])/this.f*c,(e[1]-this.b[3])/this.f*c);xc(this.o,c*d[0]/2-b[4],c*d[1]/2-b[5],c/g,-c/g,0,-e[0],-e[1]);Cf(a.eh,k,p,w);Df(a,k,n,c,f,v,p,h.get("preload"));Af(a,k);Bf(a,k);return 0<this.j.length};
Pf.prototype.If=function(a,b,c,d,e,f,g,h,k){if(c=a.Z(this.la())){var l=x(this),n=k?Tf(a,l,b.time):1;1!==n||M(this.la()).eg(b.da.projection)||this.context.clearRect(d,e,f,g);var p=n!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=n);this.context.drawImage(c,h,h,c.width-2*h,c.height-2*h,d,e,f,g);p&&this.context.restore();1!==n?b.animate=!0:k&&a.g&&(a.o[l]=-1)}};Pf.prototype.Z=function(){var a=this.context;return a?a.canvas:null};Pf.prototype.v=function(){return this.B};function Yf(a,b,c,d){var e=pc(c,b,a);c=dc(b,d,c);b=Mb(b);void 0!==b&&(c*=b);b=Mb(a);void 0!==b&&(c/=b);b=a.I();if(!b||gb(b,e[0],e[1]))a=dc(a,c,e)/c,isFinite(a)&&0<a&&(c/=a);return c}function Zf(a,b,c,d){a=c-a;b=d-b;var e=Math.sqrt(a*a+b*b);return[Math.round(c+a/e),Math.round(d+b/e)]}
function $f(a,b,c,d,e,f,g,h,k,l,n){var p=Hc(Math.round(c*a),Math.round(c*b));if(0===k.length)return p.canvas;p.scale(c,c);var q=ab();k.forEach(function(a){mb(q,a.extent)});var r=Hc(Math.round(c*rb(q)/d),Math.round(c*sb(q)/d)),v=c/d;k.forEach(function(a){r.drawImage(a.image,l,l,a.image.width-2*l,a.image.height-2*l,(a.extent[0]-q[0])*v,-(a.extent[3]-q[3])*v,rb(a.extent)*v,sb(a.extent)*v)});var w=[g[0],g[3]];h.f.forEach(function(a){var b=a.source,e=a.target,g=b[1][0],h=b[1][1],k=b[2][0],l=b[2][1];a=
(e[0][0]-w[0])/f;var n=-(e[0][1]-w[1])/f,C=(e[1][0]-w[0])/f,v=-(e[1][1]-w[1])/f,ca=(e[2][0]-w[0])/f,Na=-(e[2][1]-w[1])/f;e=b[0][0];b=b[0][1];g-=e;h-=b;k-=e;l-=b;a:{g=[[g,h,0,0,C-a],[k,l,0,0,ca-a],[0,0,g,h,v-n],[0,0,k,l,Na-n]];h=g.length;for(k=0;k<h;k++){l=k;for(var Ja=Math.abs(g[k][k]),L=k+1;L<h;L++){var Ka=Math.abs(g[L][k]);Ka>Ja&&(Ja=Ka,l=L)}if(0===Ja){g=null;break a}Ja=g[l];g[l]=g[k];g[k]=Ja;for(l=k+1;l<h;l++)for(Ja=-g[l][k]/g[k][k],L=k;L<h+1;L++)g[l][L]=k==L?0:g[l][L]+Ja*g[k][L]}k=Array(h);for(l=
h-1;0<=l;l--)for(k[l]=g[l][h]/g[l][l],Ja=l-1;0<=Ja;Ja--)g[Ja][h]-=g[Ja][l]*k[l];g=k}g&&(p.save(),p.beginPath(),k=(a+C+ca)/3,l=(n+v+Na)/3,h=Zf(k,l,a,n),C=Zf(k,l,C,v),ca=Zf(k,l,ca,Na),p.moveTo(C[0],C[1]),p.lineTo(h[0],h[1]),p.lineTo(ca[0],ca[1]),p.clip(),p.transform(g[0],g[2],g[1],g[3],a,n),p.translate(q[0]-e,q[3]-b),p.scale(d/c,-d/c),p.drawImage(r.canvas,0,0),p.restore())});n&&(p.save(),p.strokeStyle="black",p.lineWidth=1,h.f.forEach(function(a){var b=a.target;a=(b[0][0]-w[0])/f;var c=-(b[0][1]-w[1])/
f,d=(b[1][0]-w[0])/f,e=-(b[1][1]-w[1])/f,g=(b[2][0]-w[0])/f;b=-(b[2][1]-w[1])/f;p.beginPath();p.moveTo(d,e);p.lineTo(a,c);p.lineTo(g,b);p.closePath();p.stroke()}),p.restore());return p.canvas};function ag(a,b,c,d,e){this.g=a;this.j=b;var f={},g=nc(this.j,this.g);this.b=function(a){var b=a[0]+"/"+a[1];f[b]||(f[b]=g(a));return f[b]};this.i=d;this.B=e*e;this.f=[];this.u=!1;this.v=this.g.f&&!!d&&!!this.g.I()&&rb(d)==rb(this.g.I());this.c=this.g.I()?rb(this.g.I()):null;this.o=this.j.I()?rb(this.j.I()):null;a=[c[0],c[3]];b=[c[2],c[3]];d=[c[2],c[1]];c=[c[0],c[1]];e=this.b(a);var h=this.b(b),k=this.b(d),l=this.b(c);bg(this,a,b,d,c,e,h,k,l,10);if(this.u){var n=Infinity;this.f.forEach(function(a){n=
Math.min(n,a.source[0][0],a.source[1][0],a.source[2][0])});this.f.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-n>this.c/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];b[0][0]-n>this.c/2&&(b[0][0]-=this.c);b[1][0]-n>this.c/2&&(b[1][0]-=this.c);b[2][0]-n>this.c/2&&(b[2][0]-=this.c);Math.max(b[0][0],b[1][0],b[2][0])-Math.min(b[0][0],b[1][0],b[2][0])<this.c/2&&(a.source=b)}},this)}f={}}
function bg(a,b,c,d,e,f,g,h,k,l){var n=$a([f,g,h,k]),p=a.c?rb(n)/a.c:null,q=a.c,r=a.g.f&&.5<p&&1>p,v=!1;if(0<l){if(a.j.j&&a.o){var w=$a([b,c,d,e]);v|=.25<rb(w)/a.o}!r&&a.g.j&&p&&(v|=.25<p)}if(v||!a.i||wb(n,a.i)){if(!(v||isFinite(f[0])&&isFinite(f[1])&&isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])))if(0<l)v=!0;else return;if(0<l&&(v||(n=a.b([(b[0]+d[0])/2,(b[1]+d[1])/2]),q=r?(Eb(f[0],q)+Eb(h[0],q))/2-Eb(n[0],q):(f[0]+h[0])/2-n[0],n=(f[1]+h[1])/2-n[1],
v=q*q+n*n>a.B),v)){Math.abs(b[0]-d[0])<=Math.abs(b[1]-d[1])?(r=[(c[0]+d[0])/2,(c[1]+d[1])/2],q=a.b(r),n=[(e[0]+b[0])/2,(e[1]+b[1])/2],p=a.b(n),bg(a,b,c,r,n,f,g,q,p,l-1),bg(a,n,r,d,e,p,q,h,k,l-1)):(r=[(b[0]+c[0])/2,(b[1]+c[1])/2],q=a.b(r),n=[(d[0]+e[0])/2,(d[1]+e[1])/2],p=a.b(n),bg(a,b,r,n,e,f,q,p,k,l-1),bg(a,r,c,d,n,q,g,h,p,l-1));return}if(r){if(!a.v)return;a.u=!0}a.f.push({source:[f,h,k],target:[b,d,e]});a.f.push({source:[f,g,h],target:[b,c,d]})}}
function cg(a){var b=ab();a.f.forEach(function(a){a=a.source;bb(b,a[0]);bb(b,a[1]);bb(b,a[2])});return b};function dg(a,b,c,d,e,f){this.u=b;this.o=a.I();var g=b.I(),h=g?vb(c,g):c;g=Yf(a,b,tb(h),d);this.j=new ag(a,b,h,this.o,.5*g);this.g=d;this.c=c;a=cg(this.j);this.i=(this.qb=f(a,g,e))?this.qb.b:1;this.Ed=this.f=null;e=2;this.qb&&(e=0);De.call(this,c,d,this.i,e)}u(dg,De);dg.prototype.Ba=function(){1==this.state&&(A(this.Ed),this.Ed=null);De.prototype.Ba.call(this)};dg.prototype.Z=function(){return this.f};
dg.prototype.zd=function(){var a=this.qb.getState();2==a&&(this.f=$f(rb(this.c)/this.g,sb(this.c)/this.g,this.i,this.qb.V(),0,this.g,this.c,this.j,[{extent:this.qb.I(),image:this.qb.Z()}],0));this.state=a;Ee(this)};dg.prototype.load=function(){if(0==this.state){this.state=1;Ee(this);var a=this.qb.getState();2==a||3==a?this.zd():(this.Ed=D(this.qb,"change",function(){var a=this.qb.getState();if(2==a||3==a)A(this.Ed),this.Ed=null,this.zd()},this),this.qb.load())}};function eg(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};function fg(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.c=a.hb;Aa(Yd(this.c,function(a,b){return b-a}),17);if(!a.origins)for(var b=0,c=this.c.length-1;b<c;++b)if(!d)var d=this.c[b]/this.c[b+1];else if(this.c[b]/this.c[b+1]!==d){d=void 0;break}this.u=d;this.maxZoom=this.c.length-1;this.g=void 0!==a.origin?a.origin:null;this.f=null;void 0!==a.origins&&(this.f=a.origins,Aa(this.f.length==this.c.length,20));d=a.extent;void 0===d||this.g||this.f||(this.g=[d[0],d[3]]);Aa(!this.g&&this.f||this.g&&
!this.f,18);this.j=null;void 0!==a.We&&(this.j=a.We,Aa(this.j.length==this.c.length,19));this.i=void 0!==a.tileSize?a.tileSize:this.j?null:256;Aa(!this.i&&this.j||this.i&&!this.j,22);this.B=void 0!==d?d:null;this.b=null;this.o=[0,0];void 0!==a.sizes?this.b=a.sizes.map(function(a){return new Mf(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):d&&gg(this,d)}var hg=[0,0,0];
function Vf(a,b,c,d,e){var f=null,g=b[0]-1;if(2===a.u){var h=b[1];var k=b[2]}else f=Xf(a,b,e);for(;g>=a.minZoom;){2===a.u?(h=Math.floor(h/2),k=Math.floor(k/2),b=Nf(h,h,k,k,d)):b=Ef(a,f,g,d);if(c.call(null,g,b))break;--g}}fg.prototype.I=function(){return this.B};function ig(a,b){return a.g?a.g:a.f[b]}fg.prototype.V=function(a){return this.c[a]};function Uf(a,b,c,d){if(b[0]<a.maxZoom){if(2===a.u)return a=2*b[1],b=2*b[2],Nf(a,a+1,b,b+1,c);d=Xf(a,b,d);return Ef(a,d,b[0]+1,c)}return null}
function Rf(a,b,c){var d=ig(a,b),e=a.V(b);a=eg(jg(a,b),a.o);return ib(d[0]+c.ea*a[0]*e,d[1]+c.ca*a[1]*e,d[0]+(c.ga+1)*a[0]*e,d[1]+(c.fa+1)*a[1]*e,void 0)}function Ef(a,b,c,d){kg(a,b[0],b[1],c,!1,hg);var e=hg[1],f=hg[2];kg(a,b[2],b[3],c,!0,hg);return Nf(e,hg[1],f,hg[2],d)}function Ff(a,b){var c=ig(a,b[0]),d=a.V(b[0]);a=eg(jg(a,b[0]),a.o);return[c[0]+(b[1]+.5)*a[0]*d,c[1]+(b[2]+.5)*a[1]*d]}
function Xf(a,b,c){var d=ig(a,b[0]),e=a.V(b[0]);a=eg(jg(a,b[0]),a.o);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return ib(f,b,f+a[0]*e,b+a[1]*e,c)}function kg(a,b,c,d,e,f){var g=ig(a,d),h=a.V(d);a=eg(jg(a,d),a.o);b=Math.floor((b-g[0])/h+(e?.5:0))/a[0];c=Math.floor((c-g[1])/h+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));e=b;void 0!==f?(f[0]=d,f[1]=e,f[2]=c,d=f):d=[d,e,c];return d}function jg(a,b){return a.i?a.i:a.j[b]}
function gg(a,b){for(var c=a.c.length,d=Array(c),e=a.minZoom;e<c;++e)d[e]=Ef(a,b,e);a.b=d};function lg(a){var b=a.o;if(!b){b=mg(a);var c=sb(b),d=rb(b),e=eg(256);c=Math.max(d/e[0],c/e[1]);d=Array(43);for(e=0;43>e;++e)d[e]=c/Math.pow(2,e);b=new fg({extent:b,origin:[b[0],b[3]],hb:d,tileSize:void 0});a.o=b}return b}function mg(a){a=fc(a);var b=a.I();b||(a=180*Ib.degrees/Mb(a),b=ib(-a,-a,a,a));return b};function ng(a){this.Ri=a.html};function og(a){Va.call(this);this.j=fc(a.projection);this.Ea=pg(a.Va);this.Fa=a.Ka;this.N=void 0!==a.state?a.state:"ready";this.B=void 0!==a.wrapX?a.wrapX:!1}u(og,Va);function pg(a){if(!a)return null;if(a instanceof ng)return function(){return[a.Ri]};if(Array.isArray(a)){if(a[0]instanceof ng){var b=a.map(function(a){return a.Ri});return function(){return b}}a.map(function(a){return new ng({html:a})});return function(){return a}}return"function"===typeof a?a:function(){return[a]}}og.prototype.Ra=xa;
og.prototype.getState=function(){return this.N};og.prototype.refresh=function(){this.c()};og.prototype.ib=function(a){this.N=a;this.c()};function qg(a){og.call(this,{Va:a.Va,extent:a.extent,Ka:a.Ka,projection:a.projection,state:a.state});this.u=void 0!==a.hb?a.hb:null;this.b=null;this.G=0}u(qg,og);qg.prototype.Z=function(a,b,c,d){var e=this.j;if(e&&d&&!mc(e,d)){if(this.b){if(this.G==this.g&&mc(this.b.u,d)&&this.b.V()==b&&lb(this.b.I(),a))return this.b;Oa(this.b);this.b=null}this.b=new dg(e,d,a,b,c,function(a,b,c){return rg(this,a,b,c,e)}.bind(this));this.G=this.g;return this.b}e&&(d=e);return rg(this,a,b,c,d)};
qg.prototype.U=function(a){a=a.target;switch(a.getState()){case 1:F(this,new sg(tg,a));break;case 2:F(this,new sg(ug,a));break;case 3:F(this,new sg(vg,a))}};function wg(a,b){a.Z().src=b}function sg(a,b){Pa.call(this,a);this.image=b}u(sg,Pa);var tg="imageloadstart",ug="imageloadend",vg="imageloaderror";function xg(a){Vc.call(this,a)}u(xg,Vc);xg.prototype.Ic=function(a){for(var b,c;Wc(this);){b=this.b.xc;c=b.Ja[0].toString();var d;if(d=c in a)b=b.Ja,d=Of(a[c],b[1],b[2]);if(d)break;else Oa(this.pop())}};function yg(a){if(0!==a.f){var b=a.c.Rb.split("/").map(Number)[0];a.forEach(function(a){if(a.Ja[0]!==b){var c=a.Ja;this.remove(c[0]+"/"+c[1]+"/"+c[2]);Oa(a)}},a)}};function zg(a){og.call(this,{Va:a.Va,extent:a.extent,Ka:a.Ka,projection:a.projection,state:a.state,wrapX:a.wrapX});this.jb=void 0!==a.xd?a.xd:!1;this.C=void 0!==a.uc?a.uc:1;this.Pa=void 0!==a.Pa?a.Pa:null;this.b=new xg(a.Dc);this.ua=[0,0];this.Rb="";this.cc={transition:a.transition}}u(zg,og);m=zg.prototype;m.Bj=function(){return Wc(this.b)};m.Ic=function(a,b){(a=this.sd(a))&&a.Ic(b)};
function tf(a,b,c,d,e){a=a.sd(b);if(!a)return!1;b=!0;for(var f,g,h=d.ea;h<=d.ga;++h)for(var k=d.ca;k<=d.fa;++k)f=c+"/"+h+"/"+k,g=!1,a.g.hasOwnProperty(f)&&(f=a.get(f),(g=2===f.getState())&&(g=!1!==e(f))),g||(b=!1);return b}m.fi=function(){return 0};function Ag(a,b){a.Rb!==b&&(a.Rb=b,a.c())}m.eg=function(){return this.jb};m.vb=function(a){return this.Pa?this.Pa:lg(a)};m.sd=function(a){var b=this.j;return b&&!mc(b,a)?null:this.b};
function Wf(a,b,c){var d=a.vb(c);c=a.C;b=eg(jg(d,b),a.ua);1==c?a=b:(a=a.ua,void 0===a&&(a=[0,0]),a[0]=b[0]*c+.5|0,a[1]=b[1]*c+.5|0);return a}function Bg(a,b,c){var d=void 0!==c?c:a.j;c=a.vb(d);if(a.B&&d.j){var e=b;b=e[0];a=Ff(c,e);d=mg(d);gb(d,a[0],a[1])?b=e:(e=rb(d),a[0]+=e*Math.ceil((d[0]-a[0])/e),b=kg(c,a[0],a[1],b,!1,void 0))}e=b[0];d=b[1];a=b[2];if(c.minZoom>e||e>c.maxZoom)c=!1;else{var f=c.I();c=(c=f?Ef(c,f,e):c.b?c.b[e]:null)?Of(c,d,a):!0}return c?b:null}
m.refresh=function(){this.b.clear();this.c()};m.Ck=xa;function Cg(a,b){Pa.call(this,a);this.tile=b}u(Cg,Pa);function Dg(a){return 1-Math.pow(1-a,3)}function Lg(a){return 3*a*a-2*a*a*a}function Mg(a){return a};function Ng(a,b,c){Ra.call(this);c=c?c:{};this.Ja=a;this.state=b;this.c=null;this.key="";this.g=void 0===c.transition?250:c.transition;this.o={}}u(Ng,Ra);function Og(a){F(a,"change")}Ng.prototype.jc=function(){return this.key+"/"+this.Ja};function Sf(a){if(!a.c)return a;var b=a.c;do{if(2==b.getState())return b;b=b.c}while(b);return a}function Pg(a){if(a.c){var b=a.c;do{if(2==b.getState()){b.c=null;break}else 1==b.getState()?a=b:0==b.getState()?a.c=b.c:a=b;b=a.c}while(b)}}Ng.prototype.getState=function(){return this.state};
Ng.prototype.ib=function(a){this.state=a;Og(this)};function Tf(a,b,c){if(!a.g)return 1;var d=a.o[b];if(!d)d=c,a.o[b]=d;else if(-1===d)return 1;b=c-d+1E3/60;return b>=a.g?1:Math.pow(b/a.g,3)};function Qg(a){Va.call(this);this.options=a;this.id=a.id;this.xg=void 0!==a.xg?a.xg:!0;this.Gd=void 0!==a.Gd?a.Gd:!0;this.element=document.createElement("DIV");this.element.className=void 0!==a.className?a.className:"ol-overlay-container ol-selectable";this.element.style.position="absolute";this.Xd=void 0!==a.Xd?a.Xd:!1;this.Yd=a.Yd||{};this.kf=void 0!==a.kf?a.kf:20;this.b={Zd:"",te:"",Me:"",Ye:"",visible:!0};this.f=null;D(this,Ya(Rg),this.dn,this);D(this,Ya(Sg),this.nn,this);D(this,Ya(Tg),this.vn,
this);D(this,Ya(Ug),this.yn,this);D(this,Ya(Vg),this.zn,this);void 0!==a.element&&this.set(Rg,a.element);this.set(Tg,void 0!==a.offset?a.offset:[0,0]);this.set(Vg,void 0!==a.Xc?a.Xc:"top-left");void 0!==a.position&&this.set(Ug,a.position)}u(Qg,Va);m=Qg.prototype;m.getMap=function(){return this.get(Sg)};m.dn=function(){for(var a=this.element;a.lastChild;)a.removeChild(a.lastChild);(a=this.get(Rg))&&this.element.appendChild(a)};
m.nn=function(){this.f&&(Ic(this.element),A(this.f),this.f=null);var a=this.getMap();a&&(this.f=D(a,"postrender",this.render,this),Wg(this),a=this.Gd?a.o:a.u,this.xg?a.insertBefore(this.element,a.childNodes[0]||null):a.appendChild(this.element))};m.render=function(){Wg(this)};m.vn=function(){Wg(this)};
m.yn=function(){Wg(this);if(this.get(Ug)&&this.Xd){var a=this.getMap();if(a&&Xg(a)){var b=Yg(Xg(a),a.ra()),c=this.get(Rg),d=c.offsetWidth,e=getComputedStyle(c);d+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10);e=c.offsetHeight;var f=getComputedStyle(c);e+=parseInt(f.marginTop,10)+parseInt(f.marginBottom,10);var g=Yg(c,[d,e]);c=this.kf;fb(b,g)||(d=g[0]-b[0],e=b[2]-g[2],f=g[1]-b[1],g=b[3]-g[3],b=[0,0],0>d?b[0]=d-c:0>e&&(b[0]=Math.abs(e)+c),0>f?b[1]=f-c:0>g&&(b[1]=Math.abs(g)+c),0===b[0]&&0===
b[1])||(c=N(a).getCenter(),c=Zg(a,c),b=[c[0]+b[0],c[1]+b[1]],N(a).animate({center:a.Ca(b),duration:this.Yd.duration,easing:this.Yd.easing}))}}};m.zn=function(){Wg(this)};m.setMap=function(a){this.set(Sg,a)};function Yg(a,b){var c=a.getBoundingClientRect();a=c.left+window.pageXOffset;c=c.top+window.pageYOffset;return[a,c,a+b[0],c+b[1]]}function $g(a,b){a.b.visible!==b&&(a.element.style.display=b?"":"none",a.b.visible=b)}
function Wg(a){var b=a.getMap(),c=a.get(Ug);if(b&&b.b&&c){c=Zg(b,c);var d=b.ra();b=a.element.style;var e=a.get(Tg),f=a.get(Vg);$g(a,!0);var g=e[0];e=e[1];if("bottom-right"==f||"center-right"==f||"top-right"==f)""!==a.b.te&&(a.b.te=b.left=""),g=Math.round(d[0]-c[0]-g)+"px",a.b.Me!=g&&(a.b.Me=b.right=g);else{""!==a.b.Me&&(a.b.Me=b.right="");if("bottom-center"==f||"center-center"==f||"top-center"==f)g-=a.element.offsetWidth/2;g=Math.round(c[0]+g)+"px";a.b.te!=g&&(a.b.te=b.left=g)}if("bottom-left"==f||
"bottom-center"==f||"bottom-right"==f)""!==a.b.Ye&&(a.b.Ye=b.top=""),c=Math.round(d[1]-c[1]-e)+"px",a.b.Zd!=c&&(a.b.Zd=b.bottom=c);else{""!==a.b.Zd&&(a.b.Zd=b.bottom="");if("center-left"==f||"center-center"==f||"center-right"==f)e-=a.element.offsetHeight/2;c=Math.round(c[1]+e)+"px";a.b.Ye!=c&&(a.b.Ye=b.top=c)}}else $g(a,!1)}m.Oc=function(){return this.options};var Rg="element",Sg="map",Tg="offset",Ug="position",Vg="positioning";function ah(a){Va.call(this);this.element=a.element?a.element:null;this.C=this.G=null;this.u=[];this.render=a.render?a.render:xa;a.target&&this.bd(a.target)}u(ah,Va);ah.prototype.Ba=function(){Ic(this.element);Va.prototype.Ba.call(this)};ah.prototype.getMap=function(){return this.C};
ah.prototype.setMap=function(a){this.C&&Ic(this.element);for(var b=0,c=this.u.length;b<c;++b)A(this.u[b]);this.u.length=0;if(this.C=a)(this.G?this.G:a.o).appendChild(this.element),this.render!==xa&&this.u.push(D(a,"postrender",this.render,this)),a.render()};ah.prototype.bd=function(a){this.G="string"===typeof a?document.getElementById(a):a};function bh(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.j=document.createElement("DIV");this.j.className=b+"-inner";this.b=document.createElement("DIV");this.b.className=b+" ol-unselectable";this.b.appendChild(this.j);this.o=null;this.i=void 0!==a.minWidth?a.minWidth:64;this.f=!1;this.B=void 0;this.v="";ah.call(this,{element:this.b,render:a.render?a.render:ch,target:a.target});D(this,Ya(dh),this.F,this);this.set(dh,a.units||"metric")}u(bh,ah);var eh=[1,2,5];
function ch(a){(a=a.frameState)?this.o=a.da:this.o=null;fh(this)}bh.prototype.F=function(){fh(this)};
function fh(a){var b=a.o;if(b){var c=b.center,d=b.projection,e=a.get(dh);b=dc(d,b.resolution,c,"degrees"==e?"degrees":"m");"degrees"!=e&&(b*=Mb(d));var f=a.i*b;c="";"degrees"==e?(c=Ib.degrees,"degrees"==d.g?f*=c:b/=c,f<c/60?(c="\u2033",b*=3600):f<c?(c="\u2032",b*=60):c="\u00b0"):"imperial"==e?.9144>f?(c="in",b/=.0254):1609.344>f?(c="ft",b/=.3048):(c="mi",b/=1609.344):"nautical"==e?(b/=1852,c="nm"):"metric"==e?.001>f?(c="\u03bcm",b*=1E6):1>f?(c="mm",b*=1E3):1E3>f?c="m":(c="km",b/=1E3):"us"==e?.9144>
f?(c="in",b*=39.37):1609.344>f?(c="ft",b/=.30480061):(c="mi",b/=1609.3472):Aa(!1,33);for(e=3*Math.floor(Math.log(a.i*b)/Math.log(10));;){f=eh[(e%3+3)%3]*Math.pow(10,Math.floor(e/3));d=Math.round(f/b);if(isNaN(d)){a.b.style.display="none";a.f=!1;return}if(d>=a.i)break;++e}b=f+" "+c;a.v!=b&&(a.j.innerHTML=b,a.v=b);a.B!=d&&(a.j.style.width=d+"px",a.B=d);a.f||(a.b.style.display="",a.f=!0)}else a.f&&(a.b.style.display="none",a.f=!1)}var dh="units";function gh(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){if(g)return a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){var a=b.b?b.b[g[0]]:null;Aa(a,55);return(a.fa-a.ca+1+g[2]).toString()})}}function hh(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=gh(a[e],b);return ih(d)}function ih(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[Eb((b[1]<<b[0])+b[2],a.length)](b,c,d)}}
function jh(){}function kh(a){var b=[],c=/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[2].charCodeAt(0),e;for(e=c[1].charCodeAt(0);e<=d;++e)b.push(a.replace(c[0],String.fromCharCode(e)));return b}if(c=c=/\{(\d+)-(\d+)\}/.exec(a)){d=parseInt(c[2],10);for(e=parseInt(c[1],10);e<=d;e++)b.push(a.replace(c[0],e.toString()));return b}b.push(a);return b};function lh(a,b,c,d,e,f){Ng.call(this,a,b,f);this.f=d;this.j=c;this.R=new Image;null!==d&&(this.R.crossOrigin=d);this.b=null;this.i=e}u(lh,Ng);m=lh.prototype;m.Ba=function(){1==this.state&&(mh(this),this.R=nh());this.c&&Oa(this.c);this.state=5;Og(this);Ng.prototype.Ba.call(this)};m.Z=function(){return this.R};m.jc=function(){return this.j};m.ap=function(){this.state=3;mh(this);this.R=nh();Og(this)};m.bp=function(){this.state=this.R.naturalWidth&&this.R.naturalHeight?2:4;mh(this);Og(this)};
m.load=function(){3==this.state&&(this.state=0,this.R=new Image,null!==this.f&&(this.R.crossOrigin=this.f));0==this.state&&(this.state=1,Og(this),this.b=[D(this.R,"error",this.ap,this,!0),D(this.R,"load",this.bp,this,!0)],this.i(this,this.j))};function mh(a){a.b.forEach(A);a.b=null}function nh(){var a=Hc(1,1);a.fillStyle="rgba(0,0,0,0)";a.fillRect(0,0,1,1);return a.canvas};function oh(a,b,c,d,e,f,g,h,k,l,n){Ng.call(this,e,0);this.G=void 0!==n?n:!1;this.F=g;this.C=h;this.B=null;this.f=b;this.i=d;this.u=f?f:e;this.b=[];this.cd=null;this.j=0;f=Xf(d,this.u);h=this.i.I();e=this.f.I();f=h?vb(f,h):f;if(0===pb(f))this.state=4;else if((h=a.I())&&(e?e=vb(e,h):e=h),d=d.V(this.u[0]),d=Yf(a,c,tb(f),d),!isFinite(d)||0>=d)this.state=4;else if(this.v=new ag(a,c,f,e,d*(void 0!==l?l:.5)),0===this.v.f.length)this.state=4;else if(this.j=Ab(Qd(b.c,d,0),b.minZoom,b.maxZoom),c=cg(this.v),
e&&(a.f?(c[1]=Ab(c[1],e[1],e[3]),c[3]=Ab(c[3],e[1],e[3])):c=vb(c,e)),pb(c)){a=Ef(b,c,this.j);for(b=a.ea;b<=a.ga;b++)for(c=a.ca;c<=a.fa;c++)(l=k(this.j,b,c,g))&&this.b.push(l);0===this.b.length&&(this.state=4)}else this.state=4}u(oh,Ng);oh.prototype.Ba=function(){1==this.state&&(this.cd.forEach(A),this.cd=null);Ng.prototype.Ba.call(this)};oh.prototype.Z=function(){return this.B};
oh.prototype.zd=function(){var a=[];this.b.forEach(function(b){b&&2==b.getState()&&a.push({extent:Xf(this.f,b.Ja),image:b.Z()})},this);this.b.length=0;if(0===a.length)this.state=3;else{var b=this.u[0],c=jg(this.i,b),d="number"===typeof c?c:c[0];c="number"===typeof c?c:c[1];b=this.i.V(b);var e=this.f.V(this.j),f=Xf(this.i,this.u);this.B=$f(d,c,this.F,e,this.f.I(),b,f,this.v,a,this.C,this.G);this.state=2}Og(this)};
oh.prototype.load=function(){if(0==this.state){this.state=1;Og(this);var a=0;this.cd=[];this.b.forEach(function(b){var c=b.getState();if(0==c||1==c){a++;var d=D(b,"change",function(){var c=b.getState();if(2==c||3==c||4==c)A(d),a--,0===a&&(this.cd.forEach(A),this.cd=null,this.zd())},this);this.cd.push(d)}},this);this.b.forEach(function(a){0==a.getState()&&a.load()});0===a&&setTimeout(this.zd.bind(this),0)}};function ph(a){zg.call(this,{Va:a.Va,Dc:a.Dc,extent:a.extent,Ka:a.Ka,xd:a.xd,projection:a.projection,state:a.state,Pa:a.Pa,uc:a.uc,wrapX:a.wrapX,transition:a.transition});this.tc=a.tc;this.vc=this.i?this.i.bind(this):jh;this.urls=null;a.urls?this.qa(a.urls):a.url&&this.setUrl(a.url);a.vc&&qh(this,a.vc);this.v={}}u(ph,zg);
ph.prototype.Na=function(a){a=a.target;var b=x(a),c=a.getState();if(1==c){this.v[b]=!0;var d="tileloadstart"}else b in this.v&&(delete this.v[b],d=3==c?"tileloaderror":2==c||5==c?"tileloadend":void 0);void 0!=d&&F(this,new Cg(d,a))};function qh(a,b,c){a.vc=b;yg(a.b);"undefined"!==typeof c?Ag(a,c):a.c()}ph.prototype.setUrl=function(a){var b=this.urls=kh(a);qh(this,this.i?this.i.bind(this):hh(b,this.Pa),a)};
ph.prototype.qa=function(a){this.urls=a;var b=a.join("\n");qh(this,this.i?this.i.bind(this):hh(a,this.Pa),b)};ph.prototype.Ck=function(a,b,c){a=a+"/"+b+"/"+c;this.b.g.hasOwnProperty(a)&&this.b.get(a)};function rh(a){ph.call(this,{Va:a.Va,Dc:a.Dc,extent:a.extent,Ka:a.Ka,xd:a.xd,projection:a.projection,state:a.state,Pa:a.Pa,tc:a.tc?a.tc:sh,uc:a.uc,vc:a.vc,url:a.url,urls:a.urls,wrapX:a.wrapX,transition:a.transition});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.Jd=void 0!==a.Jd?a.Jd:lh;this.o={};this.u={};this.rb=a.ck}u(rh,ph);m=rh.prototype;m.Bj=function(){if(Wc(this.b))return!0;for(var a in this.o)if(Wc(this.o[a]))return!0;return!1};
m.Ic=function(a,b){a=this.sd(a);this.b.Ic(this.b==a?b:{});for(var c in this.o){var d=this.o[c];d.Ic(d==a?b:{})}};m.fi=function(a){return this.j&&a&&mc(this.j,a),0};m.eg=function(a){return this.j&&a&&!mc(this.j,a)?!1:ph.prototype.eg.call(this,a)};m.vb=function(a){var b=this.j;return!this.Pa||b&&!mc(b,a)?(b=x(a).toString(),b in this.u||(this.u[b]=lg(a)),this.u[b]):this.Pa};
m.sd=function(a){var b=this.j;if(!b||mc(b,a))return this.b;a=x(a).toString();a in this.o||(this.o[a]=new xg(this.b.highWaterMark));return this.o[a]};function th(a,b,c,d,e,f,g){b=[b,c,d];e=(c=Bg(a,b,f))?a.vc(c,e,f):void 0;e=new a.Jd(b,void 0!==e?0:4,void 0!==e?e:"",a.crossOrigin,a.tc,a.cc);e.key=g;D(e,"change",a.Na,a);return e}
m.getTile=function(a,b,c,d,e){var f=this.j;if(f&&e&&!mc(f,e)){d=this.sd(e);c=[a,b,c];var g;a=c[0]+"/"+c[1]+"/"+c[2];d.g.hasOwnProperty(a)&&(g=d.get(a));b=this.Rb;if(g&&g.key==b)return g;var h=this.vb(f),k=this.vb(e),l=Bg(this,c,e);e=new oh(f,h,e,k,c,l,this.C,0,function(a,b,c,d){return uh(this,a,b,c,d,f)}.bind(this),this.rb,!1);e.key=b;g?(e.c=g,Pg(e),d.replace(a,e)):d.set(a,e);return e}return uh(this,a,b,c,d,f||e)};
function uh(a,b,c,d,e,f){var g=b+"/"+c+"/"+d,h=a.Rb;if(a.b.g.hasOwnProperty(g)){var k=a.b.get(g);if(k.key!=h){var l=k;k=th(a,b,c,d,e,f,h);0==l.getState()?k.c=l.c:k.c=l;Pg(k);a.b.replace(g,k)}}else k=th(a,b,c,d,e,f,h),a.b.set(g,k);return k}function sh(a,b){a.Z().src=b};function vh(a){this.v=a.qo;fg.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,hb:a.hb,tileSize:a.tileSize,We:a.We,sizes:a.sizes})}u(vh,fg);
function wh(a,b,c){var d=[],e=[],f=[],g=[],h=[],k=void 0!==c?c:[];c=a.SupportedCRS;c=fc(c.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||fc(c);var l=Mb(c),n="ne"==c.b.substr(0,2);a.TileMatrix.sort(function(a,b){return b.ScaleDenominator-a.ScaleDenominator});a.TileMatrix.forEach(function(a){var b;0<k.length?b=Td(k,function(b){return a.Identifier==b.TileMatrix}):b=!0;if(b){e.push(a.Identifier);b=2.8E-4*a.ScaleDenominator/l;var c=a.TileWidth,p=a.TileHeight;n?f.push([a.TopLeftCorner[1],a.TopLeftCorner[0]]):
f.push(a.TopLeftCorner);d.push(b);g.push(c==p?c:[c,p]);h.push([a.MatrixWidth,-a.MatrixHeight])}});return new vh({extent:b,origins:f,hb:d,qo:e,We:g,sizes:h})};function xh(a,b){var c=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&c.push(a+"="+encodeURIComponent(b[a]))});var d=c.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+d};function yh(a){this.za=void 0!==a.version?a.version:"1.0.0";this.T=void 0!==a.format?a.format:"image/jpeg";this.f=void 0!==a.dimensions?a.dimensions:{};this.U=a.layer;this.G=a.matrixSet;this.W=a.style;var b=a.urls;void 0===b&&void 0!==a.url&&(b=kh(a.url));var c=this.ia=void 0!==a.requestEncoding?a.requestEncoding:"KVP",d=a.Pa,e={layer:this.U,style:this.W,tilematrixset:this.G};"KVP"==c&&z(e,{Service:"WMTS",Request:"GetTile",Version:this.za,Format:this.T});var f=this.f;this.F=function(a){a="KVP"==c?
xh(a,e):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in e?e[b.toLowerCase()]:a});return function(b){if(b){var e={TileMatrix:d.v[b[0]],TileCol:b[1],TileRow:-b[2]-1};z(e,f);b=a;return b="KVP"==c?xh(b,e):b.replace(/\{(\w+?)\}/g,function(a,b){return e[b]})}}};var g=b&&0<b.length?ih(b.map(this.F)):jh;rh.call(this,{Va:a.Va,Dc:a.Dc,crossOrigin:a.crossOrigin,Ka:a.Ka,projection:a.projection,ck:a.ck,Jd:a.Jd,Pa:d,tc:a.tc,uc:a.uc,vc:g,urls:b,wrapX:void 0!==a.wrapX?a.wrapX:!1,transition:a.transition});
Ag(this,zh(this))}u(yh,rh);yh.prototype.qa=function(a){this.urls=a;var b=a.join("\n");qh(this,this.i?this.i.bind(this):ih(a.map(this.F.bind(this))),b)};yh.prototype.la=function(){return this.U};yh.prototype.getStyle=function(){return this.W};function zh(a){var b=0,c=[],d;for(d in a.f)c[b++]=d+"-"+a.f[d];return c.join("/")}yh.prototype.Vb=function(a){z(this.f,a);Ag(this,zh(this))};
function Ah(a,b){var c=Td(a.Contents.Layer,function(a){return a.Identifier==b.layer});if(null===c)return null;var d=a.Contents.TileMatrixSet;var e=1<c.TileMatrixSetLink.length?"projection"in b?Xd(c.TileMatrixSetLink,function(a){var c=Td(d,function(b){return b.Identifier==a.TileMatrixSet}).SupportedCRS,e=fc(c.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||fc(c),f=fc(b.projection);return e&&f?mc(e,f):c==b.projection}):Xd(c.TileMatrixSetLink,function(a){return a.TileMatrixSet==b.matrixSet}):
0;0>e&&(e=0);var f=c.TileMatrixSetLink[e].TileMatrixSet;var g=c.TileMatrixSetLink[e].TileMatrixSetLimits;var h=c.Format[0];"format"in b&&(h=b.format);e=Xd(c.Style,function(a){return"style"in b?a.Title==b.style:a.isDefault});0>e&&(e=0);e=c.Style[e].Identifier;var k={};"Dimension"in c&&c.Dimension.forEach(function(a){var b=a.Identifier,c=a.Default;void 0===c&&(c=a.Value[0]);k[b]=c});var l=Td(a.Contents.TileMatrixSet,function(a){return a.Identifier==f}),n,p=l.SupportedCRS;p&&(n=fc(p.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,
"$1:$3"))||fc(p));"projection"in b&&(p=fc(b.projection),!p||n&&!mc(p,n)||(n=p));p=c.WGS84BoundingBox;if(void 0!==p){var q=fc("EPSG:4326").I();q=p[0]==q[0]&&p[2]==q[2];var r=qc(p,"EPSG:4326",n);(p=n.I())&&(fb(p,r)||(r=void 0))}g=wh(l,r,g);var v=[];l=b.requestEncoding;l=void 0!==l?l:"";if("OperationsMetadata"in a&&"GetTile"in a.OperationsMetadata)for(a=a.OperationsMetadata.GetTile.DCP.HTTP.Get,r=0,p=a.length;r<p;++r)if(a[r].Constraint){var w=Td(a[r].Constraint,function(a){return"GetEncoding"==a.name}).AllowedValues.Value;
""===l&&(l=w[0]);if("KVP"===l)Pd(w,"KVP")&&v.push(a[r].href);else break}else a[r].href&&(l="KVP",v.push(a[r].href));0===v.length&&(l="REST",c.ResourceURL.forEach(function(a){"tile"===a.resourceType&&(h=a.format,v.push(a.template))}));return{urls:v,layer:b.layer,matrixSet:f,format:h,projection:n,requestEncoding:l,Pa:g,style:e,dimensions:k,wrapX:q,crossOrigin:b.crossOrigin}};function Bh(){this.c={};this.b=0;this.g=32}Bh.prototype.clear=function(){this.c={};this.b=0};function Ch(a){if(a.b>a.g){var b=0,c;for(c in a.c){var d=a.c[c];0!==(b++&3)||Sa(d)||(delete a.c[c],--a.b)}}}Bh.prototype.get=function(a,b,c){a=b+":"+a+":"+(c?Ec(c):"null");return a in this.c?this.c[a]:null};Bh.prototype.set=function(a,b,c,d){this.c[b+":"+a+":"+(c?Ec(c):"null")]=d;++this.b};Bh.prototype.Cd=function(a){this.g=a;Ch(this)};var Dh=new Bh;function Eh(a,b,c,d,e,f){Ra.call(this);this.i=null;this.R=a?a:new Image;null!==d&&(this.R.crossOrigin=d);this.g=f?document.createElement("CANVAS"):null;this.j=f;this.f=null;this.b=e;this.c=c;this.o=b;this.u=!1;2==this.b&&Fh(this)}u(Eh,Ra);function Fh(a){var b=Hc(1,1);try{b.drawImage(a.R,0,0),b.getImageData(0,0,1,1)}catch(c){a.u=!0}}m=Eh.prototype;m.Dj=function(){this.b=3;this.f.forEach(A);this.f=null;F(this,"change")};
m.Kp=function(){this.b=2;this.c&&(this.R.width=this.c[0],this.R.height=this.c[1]);this.c=[this.R.width,this.R.height];this.f.forEach(A);this.f=null;Fh(this);if(!this.u&&null!==this.j){this.g.width=this.R.width;this.g.height=this.R.height;var a=this.g.getContext("2d");a.drawImage(this.R,0,0);for(var b=a.getImageData(0,0,this.R.width,this.R.height),c=b.data,d=this.j[0]/255,e=this.j[1]/255,f=this.j[2]/255,g=0,h=c.length;g<h;g+=4)c[g]*=d,c[g+1]*=e,c[g+2]*=f;a.putImageData(b,0,0)}F(this,"change")};
m.Z=function(){return this.g?this.g:this.R};m.ra=function(){return this.c};m.load=function(){if(0==this.b){this.b=1;this.f=[D(this.R,"error",this.Dj,this,!0),D(this.R,"load",this.Kp,this,!0)];try{this.R.src=this.o}catch(a){this.Dj()}}};function Gh(a){a=a||{};this.v=void 0!==a.anchor?a.anchor:[.5,.5];this.C=null;this.f=void 0!==a.Sd?a.Sd:"top-left";this.G=void 0!==a.Td?a.Td:"fraction";this.Y=void 0!==a.Ud?a.Ud:"fraction";this.U=void 0!==a.crossOrigin?a.crossOrigin:null;var b=void 0!==a.Sn?a.Sn:null,c=void 0!==a.Tn?a.Tn:null,d=a.src;Aa(!(void 0!==d&&b),4);Aa(!b||b&&c,5);void 0!==d&&0!==d.length||!b||(d=b.src||x(b).toString());Aa(void 0!==d&&0<d.length,6);var e=void 0!==a.src?0:2;this.u=void 0!==a.color?Cc(a.color):null;var f=this.U,
g=this.u,h=Dh.get(d,f,g);h||(h=new Eh(b,d,c,f,e,g),Dh.set(d,f,g,h));this.b=h;this.T=void 0!==a.offset?a.offset:[0,0];this.j=void 0!==a.Bg?a.Bg:"top-left";this.K=null;this.S=void 0!==a.size?a.size:null;md.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,pb:void 0!==a.pb?a.pb:!0,xb:void 0!==a.xb?a.xb:!1})}u(Gh,md);m=Gh.prototype;
m.clone=function(){return new Gh({anchor:this.v.slice(),Sd:this.f,Td:this.G,Ud:this.Y,crossOrigin:this.U,color:this.u&&this.u.slice?this.u.slice():this.u||void 0,src:this.b.o,offset:this.T.slice(),Bg:this.j,size:null!==this.S?this.S.slice():void 0,opacity:this.getOpacity(),scale:this.g,pb:this.B,rotation:this.o,xb:this.F})};
m.he=function(){if(this.C)return this.C;var a=this.v,b=this.ra();if("fraction"==this.G||"fraction"==this.Y){if(!b)return null;a=this.v.slice();"fraction"==this.G&&(a[0]*=b[0]);"fraction"==this.Y&&(a[1]*=b[1])}if("top-left"!=this.f){if(!b)return null;a===this.v&&(a=this.v.slice());if("top-right"==this.f||"bottom-right"==this.f)a[0]=-a[0]+b[0];if("bottom-left"==this.f||"bottom-right"==this.f)a[1]=-a[1]+b[1]}return this.C=a};m.va=function(){return this.u};m.Z=function(a){return this.b.Z(a)};m.bg=function(){return this.b.ra()};
m.ze=function(){return this.b.b};m.Ej=function(){var a=this.b;if(!a.i)if(a.u){var b=a.c[0],c=a.c[1],d=Hc(b,c);d.fillRect(0,0,b,c);a.i=d.canvas}else a.i=a.R;return a.i};m.Ae=function(){if(this.K)return this.K;var a=this.T;if("top-left"!=this.j){var b=this.ra(),c=this.b.ra();if(!b||!c)return null;a=a.slice();if("top-right"==this.j||"bottom-right"==this.j)a[0]=c[0]-b[0]-a[0];if("bottom-left"==this.j||"bottom-right"==this.j)a[1]=c[1]-b[1]-a[1]}return this.K=a};m.ra=function(){return this.S?this.S:this.b.ra()};
m.Wi=function(a,b){D(this.b,"change",a,b)};m.load=function(){this.b.load()};m.wk=function(a,b){La(this.b,"change",a,b)};function Hh(a){a=a?a:{};var b=z({},a);delete b.style;delete b.Zj;delete b.Wb;delete b.Xb;Pe.call(this,b);this.v=void 0!==a.c?a.c:!1;this.o=void 0!==a.Zj?a.Zj:100;this.B=null;this.C=void 0;this.setStyle(a.style);this.F=void 0!==a.Wb?a.Wb:!1;this.G=void 0!==a.Xb?a.Xb:!1;this.f=a.b||"vector";this.type="VECTOR"}u(Hh,Pe);Hh.prototype.getStyle=function(){return this.B};Hh.prototype.Bb=function(){return this.C};Hh.prototype.setStyle=function(a){this.B=void 0!==a?a:wd;this.C=null===a?void 0:ud(this.B);this.c()};function Ih(a,b){Va.call(this);this.f=!!(b||{}).unique;this.b=a?a:[];if(this.f)for(a=0,b=this.b.length;a<b;++a)Jh(this,this.b[a],a);Kh(this)}u(Ih,Va);m=Ih.prototype;m.clear=function(){for(;0<this.get(Lh);)this.pop()};m.extend=function(a){var b;var c=0;for(b=a.length;c<b;++c)this.push(a[c]);return this};m.forEach=function(a,b){a=b?a.bind(b):a;b=this.b;for(var c=0,d=b.length;c<d;++c)a(b[c],c,b)};m.item=function(a){return this.b[a]};
function Mh(a,b,c){a.f&&Jh(a,c);a.b.splice(b,0,c);Kh(a);F(a,new Nh("add",c))}m.pop=function(){return Oh(this,this.get(Lh)-1)};m.push=function(a){this.f&&Jh(this,a);var b=this.get(Lh);Mh(this,b,a);return this.get(Lh)};m.remove=function(a){var b=this.b,c;var d=0;for(c=b.length;d<c;++d)if(b[d]===a)return Oh(this,d)};function Oh(a,b){var c=a.b[b];a.b.splice(b,1);Kh(a);F(a,new Nh("remove",c));return c}function Kh(a){a.set(Lh,a.b.length)}
function Jh(a,b,c){for(var d=0,e=a.b.length;d<e;++d)if(a.b[d]===b&&d!==c)throw new za(58);}var Lh="length";function Nh(a,b){Pa.call(this,a);this.element=b}u(Nh,Pa);function Ph(a,b,c){Pa.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}u(Ph,Pa);function Qh(a,b,c,d,e){Ph.call(this,a,b,e);this.originalEvent=c;this.pixel=Rh(b,c);this.coordinate=b.Ca(this.pixel);this.dragging=void 0!==d?d:!1}u(Qh,Ph);Qh.prototype.preventDefault=function(){Ph.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};Qh.prototype.stopPropagation=function(){Ph.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};var Sh={fs:"singleclick",Er:"click",Hr:"dblclick",Wr:"pointerdrag",Zr:"pointermove",Vr:"pointerdown",ds:"pointerup",cs:"pointerover",bs:"pointerout",Xr:"pointerenter",Yr:"pointerleave",Ur:"pointercancel"};function Th(a,b,c,d,e){Qh.call(this,a,b,c.originalEvent,d,e);this.c=c}u(Th,Qh);function Uh(a,b){this.c=a;this.j=b};function Vh(a){Uh.call(this,a,{mousedown:this.Fp,mousemove:this.Gp,mouseup:this.Jp,mouseover:this.Ip,mouseout:this.Hp});this.b=a.b;this.g=[]}u(Vh,Uh);function Wh(a,b){a=a.g;var c=b.clientX;b=b.clientY;for(var d=0,e=a.length,f;d<e&&(f=a[d]);d++){var g=Math.abs(b-f[1]);if(25>=Math.abs(c-f[0])&&25>=g)return!0}return!1}function Xh(a){var b=Yh(a,a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}m=Vh.prototype;
m.Fp=function(a){if(!Wh(this,a)){(1).toString()in this.b&&this.cancel(a);var b=Xh(a);this.b[(1).toString()]=a;Zh(this.c,"pointerdown",b,a)}};m.Gp=function(a){if(!Wh(this,a)){var b=Xh(a);this.c.move(b,a)}};m.Jp=function(a){if(!Wh(this,a)){var b=this.b[(1).toString()];b&&b.button===a.button&&(b=Xh(a),Zh(this.c,"pointerup",b,a),delete this.b[(1).toString()])}};m.Ip=function(a){if(!Wh(this,a)){var b=Xh(a);$h(this.c,b,a)}};m.Hp=function(a){if(!Wh(this,a)){var b=Xh(a);ai(this.c,b,a)}};
m.cancel=function(a){var b=Xh(a);this.c.cancel(b,a);delete this.b[(1).toString()]};function bi(a){Uh.call(this,a,{MSPointerDown:this.yo,MSPointerMove:this.zo,MSPointerUp:this.Co,MSPointerOut:this.Ao,MSPointerOver:this.Bo,MSPointerCancel:this.xo,MSGotPointerCapture:this.vo,MSLostPointerCapture:this.wo});this.b=a.b;this.g=["","unavailable","touch","pen","mouse"]}u(bi,Uh);function ci(a,b){var c=b;"number"===typeof b.pointerType&&(c=Yh(b,b),c.pointerType=a.g[b.pointerType]);return c}m=bi.prototype;
m.yo=function(a){this.b[a.pointerId.toString()]=a;var b=ci(this,a);Zh(this.c,"pointerdown",b,a)};m.zo=function(a){var b=ci(this,a);this.c.move(b,a)};m.Co=function(a){var b=ci(this,a);Zh(this.c,"pointerup",b,a);delete this.b[a.pointerId.toString()]};m.Ao=function(a){var b=ci(this,a);ai(this.c,b,a)};m.Bo=function(a){var b=ci(this,a);$h(this.c,b,a)};m.xo=function(a){var b=ci(this,a);this.c.cancel(b,a);delete this.b[a.pointerId.toString()]};m.wo=function(a){F(this.c,new di("lostpointercapture",a,a))};
m.vo=function(a){F(this.c,new di("gotpointercapture",a,a))};function ei(a){Uh.call(this,a,{pointerdown:this.Zp,pointermove:this.aq,pointerup:this.fq,pointerout:this.bq,pointerover:this.cq,pointercancel:this.Yp,gotpointercapture:this.bn,lostpointercapture:this.oo})}u(ei,Uh);m=ei.prototype;m.Zp=function(a){gi(this.c,a)};m.aq=function(a){gi(this.c,a)};m.fq=function(a){gi(this.c,a)};m.bq=function(a){gi(this.c,a)};m.cq=function(a){gi(this.c,a)};m.Yp=function(a){gi(this.c,a)};m.oo=function(a){gi(this.c,a)};m.bn=function(a){gi(this.c,a)};function di(a,b,c){Pa.call(this,a);this.originalEvent=b;a=c?c:{};this.buttons=hi(a);this.pressure=ii(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.ctrlKey="ctrlKey"in a?a.ctrlKey:!1;this.altKey="altKey"in a?a.altKey:
!1;this.shiftKey="shiftKey"in a?a.shiftKey:!1;this.metaKey="metaKey"in a?a.metaKey:!1;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.tiltX="tiltX"in a?a.tiltX:0;this.tiltY="tiltY"in a?a.tiltY:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=function(){b.preventDefault()})}
u(di,Pa);function hi(a){if(a.buttons||ji)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function ii(a,b){var c=0;a.pressure?c=a.pressure:c=b?.5:0;return c}var ji=!1;try{ji=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function ki(a,b){Uh.call(this,a,{touchstart:this.lr,touchmove:this.kr,touchend:this.jr,touchcancel:this.ir});this.b=a.b;this.o=b;this.g=void 0;this.i=0;this.f=void 0}u(ki,Uh);m=ki.prototype;m.dk=function(){this.i=0;this.f=void 0};
function li(a,b,c){b=Yh(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.i;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.g===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function mi(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.changedTouches),f=e.length,g;for(g=0;g<f;++g){var h=li(a,b,e[g]);h.preventDefault=d;c.call(a,b,h)}}
m.lr=function(a){var b=a.touches,c=Object.keys(this.b),d=c.length;if(d>=b.length){var e=[],f;for(f=0;f<d;++f){var g=c[f];var h=this.b[g];var k;if(!(k=1==g))a:{for(var l=b.length,n=0;n<l;n++)if(k=b[n],k.identifier===g-2){k=!0;break a}k=!1}k||e.push(h.Db)}for(f=0;f<e.length;++f)this.mf(a,e[f])}b=a.changedTouches[0];c=Object.keys(this.b).length;if(0===c||1===c&&(1).toString()in this.b)this.g=b.identifier,void 0!==this.f&&clearTimeout(this.f);ni(this,a);this.i++;mi(this,a,this.Vp)};
m.Vp=function(a,b){this.b[b.pointerId]={target:b.target,Db:b,Gj:b.target};var c=this.c;b.bubbles=!0;Zh(c,"pointerover",b,a);this.c.enter(b,a);Zh(this.c,"pointerdown",b,a)};m.kr=function(a){a.preventDefault();mi(this,a,this.uo)};m.uo=function(a,b){var c=this.b[b.pointerId];if(c){var d=c.Db,e=c.Gj;this.c.move(b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(ai(this.c,d,a),$h(this.c,b,a)):(b.target=e,b.relatedTarget=null,this.mf(a,b)));c.Db=b;c.Gj=b.target}};
m.jr=function(a){ni(this,a);mi(this,a,this.nr)};m.nr=function(a,b){Zh(this.c,"pointerup",b,a);this.c.Db(b,a);this.c.leave(b,a);delete this.b[b.pointerId];b.isPrimary&&(this.g=void 0,this.f=setTimeout(this.dk.bind(this),200))};m.ir=function(a){mi(this,a,this.mf)};m.mf=function(a,b){this.c.cancel(b,a);this.c.Db(b,a);this.c.leave(b,a);delete this.b[b.pointerId];b.isPrimary&&(this.g=void 0,this.f=setTimeout(this.dk.bind(this),200))};
function ni(a,b){var c=a.o.g;b=b.changedTouches[0];if(a.g===b.identifier){var d=[b.clientX,b.clientY];c.push(d);setTimeout(function(){Sd(c,d)},2500)}};function oi(a){Ra.call(this);this.f=a;this.b={};this.g={};this.c=[];Sc?pi(this,new ei(this)):Tc?pi(this,new bi(this)):(a=new Vh(this),pi(this,a),Rc&&pi(this,new ki(this,a)));a=this.c.length;for(var b,c=0;c<a;c++)b=this.c[c],qi(this,Object.keys(b.j))}u(oi,Ra);function pi(a,b){var c=Object.keys(b.j);c&&(c.forEach(function(a){var c=b.j[a];c&&(this.g[a]=c.bind(b))},a),a.c.push(b))}m=oi.prototype;m.Zh=function(a){var b=this.g[a.type];b&&b(a)};
function qi(a,b){b.forEach(function(a){D(this.f,a,this.Zh,this)},a)}function ri(a,b){b.forEach(function(a){La(this.f,a,this.Zh,this)},a)}function Yh(a,b){for(var c={},d,e=0,f=si.length;e<f;e++)d=si[e][0],c[d]=a[d]||b[d]||si[e][1];return c}m.move=function(a,b){Zh(this,"pointermove",a,b)};m.enter=function(a,b){a.bubbles=!1;Zh(this,"pointerenter",a,b)};m.leave=function(a,b){a.bubbles=!1;Zh(this,"pointerleave",a,b)};m.Db=function(a,b){a.bubbles=!0;Zh(this,"pointerout",a,b)};
m.cancel=function(a,b){Zh(this,"pointercancel",a,b)};function ai(a,b,c){a.Db(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||a.leave(b,c)}function $h(a,b,c){b.bubbles=!0;Zh(a,"pointerover",b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||a.enter(b,c)}function Zh(a,b,c,d){F(a,new di(b,d,c))}function gi(a,b){F(a,new di(b.type,b,b))}m.Ba=function(){for(var a=this.c.length,b,c=0;c<a;c++)b=this.c[c],ri(this,Object.keys(b.j));Ra.prototype.Ba.call(this)};
var si=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function yi(a,b){Ra.call(this);this.b=a;this.i=0;this.o=!1;this.f=[];this.F=b?b*Oc:Oc;this.g=null;a=this.b.pa;this.C=0;this.B={};this.j=new oi(a);this.c=null;this.u=D(this.j,"pointerdown",this.xn,this);this.v=D(this.j,"pointermove",this.vq,this)}u(yi,Ra);function zi(a,b){var c=new Th("click",a.b,b);F(a,c);0!==a.i?(clearTimeout(a.i),a.i=0,c=new Th("dblclick",a.b,b),F(a,c)):a.i=setTimeout(function(){this.i=0;var a=new Th("singleclick",this.b,b);F(this,a)}.bind(a),250)}
function Ai(a,b){"pointerup"==b.type||"pointercancel"==b.type?delete a.B[b.pointerId]:"pointerdown"==b.type&&(a.B[b.pointerId]=!0);a.C=Object.keys(a.B).length}m=yi.prototype;m.Pi=function(a){Ai(this,a);var b=new Th("pointerup",this.b,a);F(this,b);b.Nj||this.o||0!==a.button||zi(this,this.g);0===this.C&&(this.f.forEach(A),this.f.length=0,this.o=!1,this.g=null,Oa(this.c),this.c=null)};
m.xn=function(a){Ai(this,a);var b=new Th("pointerdown",this.b,a);F(this,b);this.g=a;0===this.f.length&&(this.c=new oi(document),this.f.push(D(this.c,"pointermove",this.fp,this),D(this.c,"pointerup",this.Pi,this),D(this.j,"pointercancel",this.Pi,this)))};m.fp=function(a){if(Bi(this,a)){this.o=!0;var b=new Th("pointerdrag",this.b,a,this.o);F(this,b)}a.preventDefault()};m.vq=function(a){F(this,new Th(a.type,this.b,a,!(!this.g||!Bi(this,a))))};
function Bi(a,b){return Math.abs(b.clientX-a.g.clientX)>a.F||Math.abs(b.clientY-a.g.clientY)>a.F}m.Ba=function(){this.v&&(A(this.v),this.v=null);this.u&&(A(this.u),this.u=null);this.f.forEach(A);this.f.length=0;this.c&&(Oa(this.c),this.c=null);this.j&&(Oa(this.j),this.j=null);Ra.prototype.Ba.call(this)};function Ci(a){return function(b){if(b)return[Ab(b[0],a[0],a[2]),Ab(b[1],a[1],a[3])]}}function Di(a){return a};function Ei(a){return function(b,c,d){if(void 0!==b)return b=Qd(a,b,d),b=Ab(b+c,0,a.length-1),c=Math.floor(b),b!=c&&c<a.length-1?a[c]/Math.pow(a[c]/a[c+1],b-c):a[c]}}function Fi(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(-f/2+.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function Gi(a){if(void 0!==a)return 0}function Hi(a,b){if(void 0!==a)return a+b}function Ii(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function Ji(){var a=Db(5);return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function Ki(a,b){Zd.call(this);this.b=this.o=-1;this.ha(a,b)}u(Ki,Zd);m=Ki.prototype;m.clone=function(){var a=new Ki(null);Li(a,this.layout,this.D.slice());return a};m.sb=function(a,b,c,d){if(d<eb(this.I(),a,b))return d;this.b!=this.g&&(this.o=Math.sqrt(de(this.D,0,this.D.length,this.H,0)),this.b=this.g);return fe(this.D,0,this.D.length,this.H,this.o,!0,a,b,c,d)};m.O=function(){return ke(this.D,0,this.D.length,this.H)};
m.Pc=function(a){var b=[];b.length=we(this.D,0,this.D.length,this.H,a,b,0);a=new Ki(null);Li(a,"XY",b);return a};m.getType=function(){return"LinearRing"};m.nb=function(){};m.ha=function(a,b){a?(this.yb(b,a,1),this.D||(this.D=[]),this.D.length=ie(this.D,0,a,this.H),this.c()):Li(this,"XY",null)};function Li(a,b,c){be(a,b,c);a.c()};function Mi(a,b){Zd.call(this);this.ha(a,b)}u(Mi,Zd);m=Mi.prototype;m.clone=function(){var a=new Mi(null);Ni(a,this.layout,this.D.slice());return a};m.sb=function(a,b,c,d){var e=this.D;a=Cb(a,b,e[0],e[1]);if(a<d){d=this.H;for(b=0;b<d;++b)c[b]=e[b];c.length=d;return a}return d};m.O=function(){return this.D?this.D.slice():[]};m.de=function(a){return kb(this.D,a)};m.getType=function(){return"Point"};m.nb=function(a){return gb(a,this.D[0],this.D[1])};
m.ha=function(a,b){a?(this.yb(b,a,0),this.D||(this.D=[]),this.D.length=he(this.D,a),this.c()):Ni(this,"XY",null)};function Ni(a,b,c){be(a,b,c);a.c()};function Oi(a,b,c,d,e,f,g){for(var h,k,l,n,p,q=e[f+1],r=[],v=0,w=c.length;v<w;++v){var C=c[v];l=a[C-d];p=a[C-d+1];for(h=b;h<C;h+=d){n=a[h];k=a[h+1];if(q<=p&&k<=q||p<=q&&q<=k)l=(q-p)/(k-p)*(n-l)+l,r.push(l);l=n;p=k}}v=NaN;w=-Infinity;r.sort(Od);l=r[0];h=1;for(k=r.length;h<k;++h)n=r[h],C=Math.abs(n-l),C>w&&(l=(l+n)/2,qe(a,b,c,d,l,q)&&(v=l,w=C)),l=n;isNaN(v)&&(v=e[f]);return g?(g.push(v,q,w),g):[v,q,w]};function Pi(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];b<c;b+=d){var h=a[b],k=a[b+1];e+=(h-f)*(k+g);f=h;g=k}return 0<e}function Qi(a,b,c,d){var e=0;d=void 0!==d?d:!1;var f;var g=0;for(f=b.length;g<f;++g){var h=b[g];e=Pi(a,e,h,c);if(0===g){if(d&&e||!d&&!e)return!1}else if(d&&!e||!d&&e)return!1;e=h}return!0}
function Ri(a,b,c,d,e){e=void 0!==e?e:!1;var f;var g=0;for(f=c.length;g<f;++g){var h=c[g],k=Pi(a,b,h,d);if(0===g?e&&k||!e&&!k:e&&!k||!e&&k){k=a;for(var l=h,n=d;b<l-n;){var p;for(p=0;p<n;++p){var q=k[b+p];k[b+p]=k[l-n+p];k[l-n+p]=q}b+=n;l-=n}}b=h}return b}function Si(a,b,c,d){var e=0,f;var g=0;for(f=b.length;g<f;++g)e=Ri(a,e,b[g],c,d);return e};function Ti(a,b){Zd.call(this);this.b=[];this.C=-1;this.F=null;this.T=this.G=this.N=-1;this.o=null;this.ha(a,b)}u(Ti,Zd);m=Ti.prototype;m.clone=function(){var a=new Ti(null);Ui(a,this.layout,this.D.slice(),this.b.slice());return a};m.sb=function(a,b,c,d){if(d<eb(this.I(),a,b))return d;this.G!=this.g&&(this.N=Math.sqrt(ee(this.D,0,this.b,this.H,0)),this.G=this.g);return ge(this.D,0,this.b,this.H,this.N,!0,a,b,c,d)};m.kc=function(a,b){return qe(this.lc(),0,this.b,this.H,a,b)};
m.O=function(a){if(void 0!==a){var b=this.lc().slice();Ri(b,0,this.b,this.H,a)}else b=this.D;return le(b,0,this.b,this.H)};m.Wa=function(){return this.b};m.Kc=function(){if(this.C!=this.g){var a=tb(this.I());this.F=Oi(this.lc(),0,this.b,this.H,a,0);this.C=this.g}return this.F};function Vi(a){if(0>=a.b.length)return null;var b=new Ki(null);Li(b,a.layout,a.D.slice(0,a.b[0]));return b}
function Wi(a){var b=a.layout,c=a.D;a=a.b;var d=[],e=0,f;var g=0;for(f=a.length;g<f;++g){var h=a[g],k=new Ki(null);Li(k,b,c.slice(e,h));d.push(k);e=h}return d}m.lc=function(){if(this.T!=this.g){var a=this.D;Qi(a,this.b,this.H)?this.o=a:(this.o=a.slice(),this.o.length=Ri(this.o,0,this.b,this.H));this.T=this.g}return this.o};m.Pc=function(a){var b=[],c=[];b.length=xe(this.D,0,this.b,this.H,Math.sqrt(a),b,0,c);a=new Ti(null);Ui(a,"XY",b,c);return a};m.getType=function(){return"Polygon"};
m.nb=function(a){return te(this.lc(),0,this.b,this.H,a)};m.ha=function(a,b){a?(this.yb(b,a,2),this.D||(this.D=[]),a=je(this.D,0,a,this.H,this.b),this.D.length=0===a.length?0:a[a.length-1],this.c()):Ui(this,"XY",null,this.b)};function Ui(a,b,c,d){be(a,b,c);a.b=d;a.c()}function Xi(a){var b=a[0],c=a[1],d=a[2];a=a[3];b=[b,c,b,a,d,a,d,c,b,c];c=new Ti(null);Ui(c,"XY",b,[b.length]);return c}
function Yi(a,b){var c=b?b:32,d=a.H,e=a.layout;b=new Ti(null,e);c=d*(c+1);d=Array(c);for(var f=0;f<c;f++)d[f]=0;Ui(b,e,d,[d.length]);e=a.getCenter();a=Math.sqrt(Ye(a));c=b.D;d=b.layout;f=b.H;for(var g=b.Wa(),h=c.length/f-1,k,l,n=0;n<=h;++n)l=n*f,k=0+2*Eb(n,h)*Math.PI/h,c[l]=e[0]+a*Math.cos(k),c[l+1]=e[1]+a*Math.sin(k);Ui(b,d,c,g);return b};function Zi(a){Va.call(this);a=z({},a);this.f=[0,0];this.o=[];this.Ze=this.Ze.bind(this);this.b=kc(a.projection);var b={};b.center=void 0!==a.center?a.center:null;var c=void 0!==a.minZoom?a.minZoom:0;var d=void 0!==a.maxZoom?a.maxZoom:28;var e=void 0!==a.wr?a.wr:2;if(void 0!==a.hb){var f=a.hb;var g=f[c];var h=void 0!==f[d]?f[d]:f[f.length-1];d=Ei(f)}else{g=kc(a.projection);h=g.I();f=(h?Math.max(rb(h),sb(h)):360*Ib.degrees/Mb(g))/256/Math.pow(2,0);var k=f/Math.pow(2,28);g=a.maxResolution;void 0!==
g?c=0:g=f/Math.pow(e,c);h=a.minResolution;void 0===h&&(h=void 0!==a.maxZoom?void 0!==a.maxResolution?g/Math.pow(e,d):f/Math.pow(e,d):k);d=c+Math.floor(Math.log(g/h)/Math.log(e));h=g/Math.pow(e,d-c);d=Fi(e,g,d-c)}this.j=g;this.B=h;this.F=e;this.u=a.hb;this.v=c;(void 0!==a.Wl?a.Wl:1)?(c=a.tf,c=void 0===c||!0===c?Ji():!1===c?Hi:"number"===typeof c?Ii(c):Hi):c=Gi;this.i={center:void 0!==a.extent?Ci(a.extent):Di,resolution:d,rotation:c};void 0!==a.resolution?b.resolution=a.resolution:void 0!==a.zoom&&
(b.resolution=this.Aa(this.j,a.zoom-this.v),this.u&&(b.resolution=Ab(Number(this.V()||b.resolution),this.B,this.j)));b.rotation=void 0!==a.rotation?a.rotation:0;Wa(this,b)}u(Zi,Va);m=Zi.prototype;
m.animate=function(a){var b=arguments.length;if(1<b&&"function"===typeof arguments[b-1]){var c=arguments[b-1];--b}if($i(this)){for(var d=Date.now(),e=this.getCenter().slice(),f=this.V(),g=aj(this),h=[],k=0;k<b;++k){var l=arguments[k],n={start:d,complete:!1,anchor:l.anchor,duration:void 0!==l.duration?l.duration:1E3,easing:l.easing||Lg};l.center&&(n.Dd=e,n.Hd=l.center,e=n.Hd);void 0!==l.zoom?(n.Fd=f,n.sc=this.Aa(this.j,l.zoom-this.v,0),f=n.sc):l.resolution&&(n.Fd=f,n.sc=l.resolution,f=n.sc);void 0!==
l.rotation&&(n.Te=g,n.Id=g+(Eb(l.rotation-g+Math.PI,2*Math.PI)-Math.PI),g=n.Id);n.callback=c;n.Dd&&n.Hd&&!$e(n.Dd,n.Hd)||n.Fd!==n.sc||n.Te!==n.Id?d+=n.duration:n.complete=!0;h.push(n)}this.o.push(h);bj(this,0,1);this.Ze()}else b=arguments[b-1],b.center&&this.setCenter(b.center),void 0!==b.zoom&&cj(this,this.Aa(this.j,b.zoom-this.v,0)),void 0!==b.rotation&&dj(this,b.rotation),c&&c(!0)};
function ej(a){bj(a,0,-a.f[0]);for(var b=0,c=a.o.length;b<c;++b){var d=a.o[b];d[0].callback&&d[0].callback(!1)}a.o.length=0}
m.Ze=function(){void 0!==this.C&&(cancelAnimationFrame(this.C),this.C=void 0);if(0<this.f[0]){for(var a=Date.now(),b=!1,c=this.o.length-1;0<=c;--c){for(var d=this.o[c],e=!0,f=0,g=d.length;f<g;++f){var h=d[f];if(!h.complete){b=a-h.start;b=0<h.duration?b/h.duration:1;1<=b?(h.complete=!0,b=1):e=!1;b=h.easing(b);if(h.Dd){var k=h.Dd[0],l=h.Dd[1];this.set("center",[k+b*(h.Hd[0]-k),l+b*(h.Hd[1]-l)])}h.Fd&&h.sc&&(k=1===b?h.sc:h.Fd+b*(h.sc-h.Fd),h.anchor&&this.set("center",fj(this,k,h.anchor)),this.set("resolution",
k));void 0!==h.Te&&void 0!==h.Id&&(b=1===b?Eb(h.Id+Math.PI,2*Math.PI)-Math.PI:h.Te+b*(h.Id-h.Te),h.anchor&&this.set("center",gj(this,b,h.anchor)),this.set("rotation",b));b=!0;if(!h.complete)break}}e&&(this.o[c]=null,bj(this,0,-1),(d=d[0].callback)&&d(!0))}this.o=this.o.filter(Boolean);b&&void 0===this.C&&(this.C=requestAnimationFrame(this.Ze))}};function gj(a,b,c){var d=a.getCenter();if(void 0!==d){var e=[d[0]-c[0],d[1]-c[1]];af(e,b-aj(a));a=e;a[0]+=c[0];a[1]+=c[1]}return e}
function fj(a,b,c){var d,e=a.getCenter();a=a.V();void 0!==e&&void 0!==a&&(d=[c[0]-b*(c[0]-e[0])/a,c[1]-b*(c[1]-e[1])/a]);return d}function hj(a){var b=[100,100];a='.ol-viewport[data-view="'+x(a)+'"]';if(a=document.querySelector(a))a=getComputedStyle(a),b[0]=parseInt(a.width,10),b[1]=parseInt(a.height,10);return b}m.Aa=function(a,b,c){return this.i.resolution(a,b||0,c||0)};m.tf=function(a,b){return this.i.rotation(a,b||0)};m.getCenter=function(){return this.get("center")};
function ij(a,b){b=b||hj(a);var c=a.getCenter();Aa(c,1);var d=a.V();Aa(void 0!==d,2);a=aj(a);Aa(void 0!==a,3);return ub(c,d,a,b)}m.V=function(){return this.get("resolution")};function jj(a,b,c){a=c||hj(a);return Math.max(rb(b)/a[0],sb(b)/a[1])}function aj(a){return a.get("rotation")}m.getState=function(){var a=this.getCenter(),b=this.b,c=this.V(),d=aj(this);return{center:a.slice(),projection:void 0!==b?b:null,resolution:c,rotation:d,zoom:kj(this)}};
function kj(a){var b=a.V();if(void 0!==b){var c=a.v||0;if(a.u){var d=Qd(a.u,b,1);c=d;var e=a.u[d];a=d==a.u.length-1?2:e/a.u[d+1]}else e=a.j,a=a.F;c+=Math.log(e/b)/Math.log(a)}return c}
function lj(a,b,c){c=c||{};var d=c.size;d||(d=hj(a));if(b instanceof Zd)if("Circle"===b.getType()){b=b.I();var e=Xi(b);e.rotate(aj(a),tb(b))}else e=b;else Aa(Array.isArray(b),24),Aa(!qb(b),25),e=Xi(b);var f=void 0!==c.padding?c.padding:[0,0,0,0],g=void 0!==c.Aa?c.Aa:!0,h=void 0!==c.Do?c.Do:!1,k;void 0!==c.minResolution?k=c.minResolution:void 0!==c.maxZoom?k=a.Aa(a.j,c.maxZoom-a.v,0):k=0;var l=e.D,n=aj(a);b=Math.cos(-n);n=Math.sin(-n);var p=Infinity,q=Infinity,r=-Infinity,v=-Infinity;e=e.H;for(var w=
0,C=l.length;w<C;w+=e){var G=l[w]*b-l[w+1]*n,I=l[w]*n+l[w+1]*b;p=Math.min(p,G);q=Math.min(q,I);r=Math.max(r,G);v=Math.max(v,I)}d=jj(a,[p,q,r,v],[d[0]-f[1]-f[3],d[1]-f[0]-f[2]]);d=isNaN(d)?k:Math.max(d,k);g&&(k=a.Aa(d,0,0),!h&&k<d&&(k=a.Aa(k,-1,0)),d=k);n=-n;k=(p+r)/2+(f[1]-f[3])/2*d;f=(q+v)/2+(f[0]-f[2])/2*d;b=[k*b-f*n,f*b+k*n];f=c.callback?c.callback:xa;void 0!==c.duration?a.animate({resolution:d,center:b,duration:c.duration,easing:c.easing},f):(cj(a,d),a.setCenter(b),setTimeout(f.bind(void 0,!0),
0))}function $i(a){return!!a.getCenter()&&void 0!==a.V()}m.rotate=function(a,b){void 0!==b&&(b=gj(this,a,b),this.setCenter(b));dj(this,a)};m.setCenter=function(a){this.set("center",a);0<this.f[0]&&ej(this)};function bj(a,b,c){a.f[b]+=c;a.c()}function cj(a,b){a.set("resolution",b);0<a.f[0]&&ej(a)}function dj(a,b){a.set("rotation",b);0<a.f[0]&&ej(a)};function mj(a){var b=a||{};a=z({},b);delete a.layers;b=b.layers;Le.call(this,a);this.j=[];this.f={};D(this,Ya(nj),this.ln,this);b?Array.isArray(b)?b=new Ih(b.slice(),{unique:!0}):Aa(b instanceof Ih,43):b=new Ih(void 0,{unique:!0});this.set(nj,b)}u(mj,Le);m=mj.prototype;m.pe=function(){this.c()};
m.ln=function(){this.j.forEach(A);this.j.length=0;var a=this.getLayers();this.j.push(D(a,"add",this.Dp,this),D(a,"remove",this.Ep,this));for(var b in this.f)this.f[b].forEach(A);Ba(this.f);a=a.b;var c;b=0;for(c=a.length;b<c;b++){var d=a[b];this.f[x(d).toString()]=[D(d,"propertychange",this.pe,this),D(d,"change",this.pe,this)]}this.c()};m.Dp=function(a){a=a.element;var b=x(a).toString();this.f[b]=[D(a,"propertychange",this.pe,this),D(a,"change",this.pe,this)];this.c()};
m.Ep=function(a){a=x(a.element).toString();this.f[a].forEach(A);delete this.f[a];this.c()};m.getLayers=function(){return this.get(nj)};
m.cg=function(a){var b=void 0!==a?a:[],c=b.length;this.getLayers().forEach(function(a){a.cg(b)});a=Me(this);var d;for(d=b.length;c<d;c++){var e=b[c];e.opacity*=a.opacity;e.visible=e.visible&&a.visible;e.maxResolution=Math.min(e.maxResolution,a.maxResolution);e.minResolution=Math.max(e.minResolution,a.minResolution);void 0!==a.extent&&(e.extent=void 0!==e.extent?vb(e.extent,a.extent):a.extent)}return b};m.og=function(){return"ready"};var nj="layers";function oj(a){Va.call(this);var b=pj(a);this.ua=void 0!==a.Yi?a.Yi:!1;this.za=void 0!==a.Zi?a.Zi:!1;this.T=void 0!==a.ja?a.ja:Oc;this.Ea=b.Tc;this.Ah=function(){this.bc=void 0;this.zq.call(this)}.bind(this);this.ia=sc();this.Fa=sc();this.qa=0;this.v=this.B=this.C=this.j=this.b=null;this.pa=document.createElement("DIV");this.pa.className="ol-viewport"+(Rc?" ol-touch":"");this.pa.style.position="relative";this.pa.style.overflow="hidden";this.pa.style.width="100%";this.pa.style.height="100%";this.pa.style.msTouchAction=
"none";this.pa.style.touchAction="none";this.u=document.createElement("DIV");this.u.className="ol-overlaycontainer";this.pa.appendChild(this.u);this.o=document.createElement("DIV");this.o.className="ol-overlaycontainer-stopevent";for(var c="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" "),d=0,e=c.length;d<e;++d)D(this.o,c[d],Qa);this.pa.appendChild(this.o);this.N=new yi(this,a.As);for(var f in Sh)D(this.N,Sh[f],this.Li,this);this.G=b.ud;this.i=null;D(this.pa,
"wheel",this.Rc,this);D(this.pa,"mousewheel",this.Rc,this);this.controls=b.controls||new Ih;this.xa=b.xa||new Ih;this.Ha=b.Wc;this.Hj={};this.pc=b.po.create(this.pa,this);this.F=null;this.U=[];this.W=new Je(this.Gm.bind(this),this.Ln.bind(this));this.Na={};D(this,Ya("layergroup"),this.jn,this);D(this,Ya("view"),this.Nn,this);D(this,Ya("size"),this.En,this);D(this,Ya("target"),this.Kn,this);Wa(this,b.values);this.controls.forEach(function(a){a.setMap(this)},this);D(this.controls,"add",function(a){a.element.setMap(this)},
this);D(this.controls,"remove",function(a){a.element.setMap(null)},this);this.xa.forEach(function(a){a.setMap(this)},this);D(this.xa,"add",function(a){a.element.setMap(this)},this);D(this.xa,"remove",function(a){a.element.setMap(null)},this);this.Ha.forEach(this.yh,this);D(this.Ha,"add",function(a){this.yh(a.element)},this);D(this.Ha,"remove",function(a){var b=a.element.id;void 0!==b&&delete this.Hj[b.toString()];a.element.setMap(null)},this)}u(oj,Va);function qj(a,b){a.xa.push(b)}
function rj(a,b){sj(a).getLayers().push(b)}m=oj.prototype;m.yh=function(a){var b=a.id;void 0!==b&&(this.Hj[b.toString()]=a);a.setMap(this)};m.Ba=function(){Oa(this.N);La(this.pa,"wheel",this.Rc,this);La(this.pa,"mousewheel",this.Rc,this);void 0!==this.f&&(window.removeEventListener("resize",this.f,!1),this.f=void 0);this.bc&&(cancelAnimationFrame(this.bc),this.bc=void 0);this.bd(null);Va.prototype.Ba.call(this)};
function tj(a,b,c,d){if(a.b)return b=a.Ca(b),d=void 0!==d?d:{},a.pc.Ra(b,a.b,void 0!==d.Pb?d.Pb*a.b.ja:0,c,null,void 0!==d.Ui?d.Ui:xb,null)}m.Qf=function(a,b,c,d,e){if(this.b)return this.pc.Qf(a,this.b,b,void 0!==c?c:null,void 0!==d?d:xb,void 0!==e?e:null)};function Rh(a,b){a=a.pa.getBoundingClientRect();b=b.changedTouches?b.changedTouches[0]:b;return[b.clientX-a.left,b.clientY-a.top]}function Xg(a){a=a.get("target");return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}
m.Ca=function(a){var b=this.b;return b?wc(b.Fg,a.slice()):null};function sj(a){return a.get("layergroup")}m.getLayers=function(){return sj(this).getLayers()};function Zg(a,b){return(a=a.b)?wc(a.Gc,b.slice(0,2)):null}m.kg=function(){return this.pc};m.ra=function(){return this.get("size")};function N(a){return a.get("view")}m.Gm=function(a,b,c,d){var e=this.b;if(!(e&&b in e.Ld&&e.Ld[b][a.jc()]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};
m.Rc=function(a,b){a=new Qh(b||a.type,this,a);this.Li(a)};m.Li=function(a){if(this.b){this.F=a.coordinate;a.frameState=this.b;var b=this.xa.b,c;if(!1!==F(this,a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.getActive()&&!d.handleEvent(a))break}}};
m.An=function(){var a=this.b,b=this.W;if(0!==b.c.length){var c=16,d=c;if(a){var e=a.ac;e[0]&&(c=this.ua?8:0,d=2);e[1]&&(c=this.za?8:0,d=2)}if(b.i<c){e=b.v;var f=b.c,g=b.b,h=0,k=f.length,l;for(l=0;l<k;++l){var n=f[l];var p=e(n);Infinity==p?delete b.g[b.f(n)]:(g[h]=p,f[h++]=n)}f.length=h;g.length=h;for(e=(b.c.length>>1)-1;0<=e;e--)Ie(b,e);e=0;for(f=!1;b.i<c&&e<d&&0<b.c.length;)g=b,k=g.c,n=g.b,h=k[0],1==k.length?(k.length=0,n.length=0):(k[0]=k.pop(),n[0]=n.pop(),Ie(g,0)),k=g.f(h),delete g.g[k],h=h[0],
k=h.jc(),g=h.getState(),5===g?f=!0:0!==g||k in b.j||(b.j[k]=!0,++b.i,++e,h.load());0===e&&f&&b.B()}}b=this.U;d=0;for(c=b.length;d<c;++d)b[d](this,a);b.length=0};m.En=function(){this.render()};
m.Kn=function(){var a;this.get("target")&&(a=Xg(this));if(this.i){for(var b=0,c=this.i.length;b<c;++b)A(this.i[b]);this.i=null}if(a){a.appendChild(this.pa);var d=this.G?this.G:a;this.i=[D(d,"keydown",this.Rc,this),D(d,"keypress",this.Rc,this)];this.f||(this.f=this.af.bind(this),window.addEventListener("resize",this.f,!1))}else{a=this.pc;for(d in a.b)Oa(uj(a,d));Ic(this.pa);void 0!==this.f&&(window.removeEventListener("resize",this.f,!1),this.f=void 0)}this.af()};m.Ln=function(){this.render()};
m.Qi=function(){this.render()};m.Nn=function(){this.C&&(A(this.C),this.C=null);this.B&&(A(this.B),this.B=null);var a=N(this);a&&(this.pa.setAttribute("data-view",x(a)),this.C=D(a,"propertychange",this.Qi,this),this.B=D(a,"change",this.Qi,this));this.render()};m.jn=function(){this.v&&(this.v.forEach(A),this.v=null);var a=sj(this);a&&(this.v=[D(a,"propertychange",this.render,this),D(a,"change",this.render,this)]);this.render()};m.render=function(){void 0===this.bc&&(this.bc=requestAnimationFrame(this.Ah))};
m.zq=function(){var a=Date.now(),b,c=this.ra(),d=N(this),e=ab(),f=this.b,g=null;if(void 0!==c&&0<c[0]&&0<c[1]&&d&&$i(d)){g=this.b?this.b.ac:void 0;void 0!==g?(g[0]=d.f[0],g[1]=d.f[1]):g=d.f.slice();var h=sj(this).cg(),k={};var l=0;for(b=h.length;l<b;++l)k[x(h[l].layer)]=h[l];l=d.getState();d=l.center;b=l.resolution/this.T;d[0]=Math.round(d[0]/b)*b;d[1]=Math.round(d[1]/b)*b;g={animate:!1,Gc:this.ia,extent:e,focus:this.F?this.F:d,index:this.qa++,se:k,wd:h,Tc:z({},this.Ea),ja:this.T,Fg:this.Fa,Ce:[],
size:c,Se:this.Na,br:this.W,time:a,eh:{},da:l,ac:g,Ld:{}}}g&&(g.extent=ub(l.center,l.resolution,l.rotation,g.size,e));this.b=g;this.pc.ak(g);g&&(g.animate&&this.render(),Array.prototype.push.apply(this.U,g.Ce),!f||this.j&&(qb(this.j)||lb(g.extent,this.j))||(F(this,new Ph("movestart",this,f)),this.j=jb(this.j)),!this.j||g.ac[0]||g.ac[1]||lb(g.extent,this.j)||(F(this,new Ph("moveend",this,g)),db(g.extent,this.j)));F(this,new Ph("postrender",this,g));setTimeout(this.An.bind(this),0)};
function vj(a,b){a.set("layergroup",b)}m.Cd=function(a){this.set("size",a)};m.bd=function(a){this.set("target",a)};m.setView=function(a){this.set("view",a)};m.af=function(){var a=Xg(this);if(a){var b=getComputedStyle(a);this.Cd([a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.Cd(void 0)};
var wj=["canvas","webgl"];
function pj(a){var b=null;void 0!==a.ud&&(b="string"===typeof a.ud?document.getElementById(a.ud):a.ud);var c={},d={};if(void 0===a.Ka||"boolean"===typeof a.Ka&&a.Ka)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="https://openlayers.org/";
else{var e=a.Ka;"string"===typeof e?d[e]="":e instanceof HTMLElement?d[x(e).toString()]=e:e&&(Aa("string"==typeof e.href,44),Aa("string"==typeof e.src,45),d[e.src]=e.href)}e=a.layers instanceof mj?a.layers:new mj({layers:a.layers});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new Zi;var f;void 0!==a.Zc?(Array.isArray(a.Zc)?f=a.Zc:"string"===typeof a.Zc?f=[a.Zc]:Aa(!1,46),0<=f.indexOf("dom")&&(f=f.concat(wj))):f=wj;e=0;var g=f.length;a:for(;e<g;++e)for(var h=f[e],k=0,l=Te.length;k<
l;++k){var n=Te[k];if(n.handles(h)){var p=n;break a}}if(!p)throw Error("Unable to create a map renderer for types: "+f.join(", "));if(void 0!==a.controls)if(Array.isArray(a.controls))var q=new Ih(a.controls.slice());else Aa(a.controls instanceof Ih,47),q=a.controls;if(void 0!==a.xa)if(Array.isArray(a.xa))var r=new Ih(a.xa.slice());else Aa(a.xa instanceof Ih,48),r=a.xa;void 0!==a.Wc?Array.isArray(a.Wc)?a=new Ih(a.Wc.slice()):(Aa(a.Wc instanceof Ih,49),a=a.Wc):a=new Ih;return{controls:q,xa:r,ud:b,Tc:d,
Wc:a,po:p,values:c}};function xj(a){a=a?a:{};this.j=document.createElement("UL");this.f=document.createElement("LI");this.j.appendChild(this.f);this.f.style.display="none";this.b=void 0!==a.collapsed?a.collapsed:!0;this.v=void 0!==a.Al?a.Al:!0;this.v||(this.b=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.Xe?a.Xe:"Attributions",d=void 0!==a.zl?a.zl:"\u00bb";"string"===typeof d?(this.i=document.createElement("span"),this.i.textContent=d):this.i=d;d=void 0!==a.label?a.label:"i";"string"===typeof d?
(this.o=document.createElement("span"),this.o.textContent=d):this.o=d;var e=this.v&&!this.b?this.i:this.o;d=document.createElement("button");d.setAttribute("type","button");d.title=c;d.appendChild(e);D(d,"click",this.T,this);c=document.createElement("div");c.className=b+" ol-unselectable ol-control"+(this.b&&this.v?" ol-collapsed":"")+(this.v?"":" ol-uncollapsible");c.appendChild(this.j);c.appendChild(d);ah.call(this,{element:c,render:a.render?a.render:yj,target:a.target});this.F=[];this.B=!0;this.N=
{}}u(xj,ah);
function yj(a){if(a=a.frameState){for(var b={},c=[],d=a.wd,e=a.da.resolution,f=0,g=d.length;f<g;++f){var h=d[f];if(Qe(h,e)&&(h=M(h.layer))&&(h=h.Ea)&&(h=h(a)))if(Array.isArray(h))for(var k=0,l=h.length;k<l;++k)h[k]in b||(c.push(h[k]),b[h[k]]=!0);else h in b||(c.push(h),b[h]=!0)}if(!Ud(c,this.F)){for(;this.j.lastChild!==this.f;)this.j.removeChild(this.j.lastChild);b=0;for(d=c.length;b<d;++b)e=document.createElement("LI"),e.innerHTML=c[b],this.j.appendChild(e);0===c.length&&0<this.F.length?this.element.classList.add("ol-logo-only"):
0===this.F.length&&0<c.length&&this.element.classList.remove("ol-logo-only");b=0<c.length||!Da(a.Tc);this.B!=b&&(this.element.style.display=b?"":"none",this.B=b);this.F=c;a=a.Tc;c=this.N;for(p in c)p in a||(Ic(c[p]),delete c[p]);for(var n in a)if(d=a[n],d instanceof HTMLElement&&(this.f.appendChild(d),c[n]=d),!(n in c)){var p=new Image;p.src=n;""===d?b=p:(b=document.createElement("a"),b.href=d,b.appendChild(p));this.f.appendChild(b);c[n]=b}this.f.style.display=Da(a)?"none":""}}else this.B&&(this.element.style.display=
"none",this.B=!1)}xj.prototype.T=function(a){a.preventDefault();this.element.classList.toggle("ol-collapsed");if(this.b){a=this.o;var b=a.parentNode;b&&b.replaceChild(this.i,a)}else a=this.i,(b=a.parentNode)&&b.replaceChild(this.o,a);this.b=!this.b};function zj(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"\u21e7";this.b=null;"string"===typeof c?(this.b=document.createElement("span"),this.b.className="ol-compass",this.b.textContent=c):(this.b=c,this.b.classList.add("ol-compass"));var d=a.Xe?a.Xe:"Reset rotation";c=document.createElement("button");c.className=b+"-reset";c.setAttribute("type","button");c.title=d;c.appendChild(this.b);D(c,"click",zj.prototype.v,this);d=document.createElement("div");d.className=
b+" ol-unselectable ol-control";d.appendChild(c);b=a.render?a.render:Aj;this.j=a.Bq?a.Bq:void 0;ah.call(this,{element:d,render:b,target:a.target});this.i=void 0!==a.duration?a.duration:250;this.f=void 0!==a.vl?a.vl:!0;this.o=void 0;this.f&&this.element.classList.add("ol-hidden")}u(zj,ah);zj.prototype.v=function(a){a.preventDefault();void 0!==this.j?this.j():(a=N(this.getMap()))&&void 0!==aj(a)&&(0<this.i?a.animate({rotation:0,duration:this.i,easing:Dg}):dj(a,0))};
function Aj(a){if(a=a.frameState){a=a.da.rotation;if(a!=this.o){var b="rotate("+a+"rad)";if(this.f){var c=this.element.classList.contains("ol-hidden");c||0!==a?c&&0!==a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.b.style.msTransform=b;this.b.style.webkitTransform=b;this.b.style.transform=b}this.o=a}};function Bj(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.dc?a.dc:1,d=void 0!==a.xr?a.xr:"+",e=void 0!==a.yr?a.yr:"\u2212",f=void 0!==a.Mk?a.Mk:"Zoom in",g=void 0!==a.Nk?a.Nk:"Zoom out",h=document.createElement("button");h.className=b+"-in";h.setAttribute("type","button");h.title=f;h.appendChild("string"===typeof d?document.createTextNode(d):d);D(h,"click",Bj.prototype.f.bind(this,c));d=document.createElement("button");d.className=b+"-out";d.setAttribute("type","button");
d.title=g;d.appendChild("string"===typeof e?document.createTextNode(e):e);D(d,"click",Bj.prototype.f.bind(this,-c));c=document.createElement("div");c.className=b+" ol-unselectable ol-control";c.appendChild(h);c.appendChild(d);ah.call(this,{element:c,target:a.target});this.b=void 0!==a.duration?a.duration:250}u(Bj,ah);
Bj.prototype.f=function(a,b){b.preventDefault();if(b=N(this.getMap())){var c=b.V();c&&(a=b.Aa(c,a),0<this.b?(0<b.f[0]&&ej(b),b.animate({resolution:a,duration:this.b,easing:Dg})):cj(b,a))}};function Cj(){this.c=[];this.b=this.g=0}function Dj(a){a.c.length=0;a.g=0;a.b=0}Cj.prototype.end=function(){if(6>this.c.length)return!1;var a=Date.now()-100,b=this.c.length-3;if(this.c[b+2]<a)return!1;for(var c=b-3;0<c&&this.c[c+2]>a;)c-=3;a=this.c[b+2]-this.c[c+2];if(a<1E3/60)return!1;var d=this.c[b]-this.c[c];b=this.c[b+1]-this.c[c+1];this.g=Math.atan2(b,d);this.b=Math.sqrt(d*d+b*b)/a;return.05<this.b};function Ej(a){Va.call(this);this.jb=null;this.setActive(!0);this.handleEvent=a.handleEvent}u(Ej,Va);Ej.prototype.getActive=function(){return this.get("active")};Ej.prototype.getMap=function(){return this.jb};Ej.prototype.setActive=function(a){this.set("active",a)};Ej.prototype.setMap=function(a){this.jb=a};function Fj(a,b,c,d){if(void 0!==b){var e=aj(a),f=a.getCenter();void 0!==e&&f&&0<d?a.animate({rotation:b,anchor:c,duration:d,easing:Dg}):a.rotate(b,c)}}
function Gj(a,b,c,d){var e=a.V();b=a.Aa(e,b,0);if(void 0!==b){var f=a.u;b=Ab(b,a.B||f[f.length-1],a.j||f[0])}c&&void 0!==b&&b!==e&&(f=a.getCenter(),c=fj(a,b,c),c=a.i.center(c),c=[(b*f[0]-e*c[0])/(b-e),(b*f[1]-e*c[1])/(b-e)]);Hj(a,b,c,d)}function Hj(a,b,c,d){if(b){var e=a.V(),f=a.getCenter();void 0!==e&&f&&b!==e&&d?a.animate({resolution:b,anchor:c,duration:d,easing:Dg}):(c&&(c=fj(a,b,c),a.setCenter(c)),cj(a,b))}};function Ij(a){a=a?a:{};this.b=a.dc?a.dc:1;Ej.call(this,{handleEvent:Jj});this.f=void 0!==a.duration?a.duration:250}u(Ij,Ej);function Jj(a){var b=!1,c=a.originalEvent;if("dblclick"==a.type){b=a.coordinate;c=c.shiftKey?-this.b:this.b;var d=N(a.map);Gj(d,c,b,this.f);a.preventDefault();b=!0}return!b};function Kj(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Lj(a){a=a.originalEvent;return 0==a.button&&!(Mc&&Nc&&a.ctrlKey)}function Mj(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function Nj(a){a=a.originalEvent;return!a.altKey&&(Nc?a.metaKey:a.ctrlKey)&&!a.shiftKey}function Oj(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}
function Pj(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function Qj(a){Aa(a.c,56);return"mouse"==a.c.pointerType}function Rj(a){a=a.c;return a.isPrimary&&0===a.button};function Sj(a){a=a?a:{};Ej.call(this,{handleEvent:a.handleEvent?a.handleEvent:Tj});this.gd=a.Za?a.Za:yb;this.Jf=a.mb?a.mb:xa;this.Of=a.Ni?a.Ni:xa;this.Rf=a.ab?a.ab:yb;this.v=!1;this.T={};this.j=[]}u(Sj,Ej);function Uj(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function Tj(a){if(!(a instanceof Th))return!0;var b=!1,c=a.type;if("pointerdown"===c||"pointerdrag"===c||"pointerup"===c){c=a.c;var d=c.pointerId.toString();"pointerup"==a.type?delete this.T[d]:"pointerdown"==a.type?this.T[d]=c:d in this.T&&(this.T[d]=c);this.j=Ca(this.T)}this.v?"pointerdrag"==a.type?this.Jf(a):"pointerup"==a.type&&(this.v=this.Rf(a)&&0<this.j.length):"pointerdown"==a.type?(this.v=a=this.gd(a),b=this.Ub(a)):"pointermove"==a.type&&this.Of(a);return!b}Sj.prototype.Ub=function(a){return a};function Vj(a){Sj.call(this,{Za:Wj,mb:Xj,ab:Yj});a=a?a:{};this.b=a.ko;this.f=null;this.u=a.condition?a.condition:Mj;this.i=!1}u(Vj,Sj);function Xj(a){var b=this.j,c=Uj(b);if(b.length==this.o){if(this.b&&this.b.c.push(c[0],c[1],Date.now()),this.f){var d=this.f[0]-c[0],e=c[1]-this.f[1];a=N(a.map);var f=a.getState();e=d=[d,e];var g=f.resolution;e[0]*=g;e[1]*=g;af(d,f.rotation);e=d;f=f.center;e[0]+=f[0];e[1]+=f[1];d=a.i.center(d);a.setCenter(d)}}else this.b&&Dj(this.b);this.f=c;this.o=b.length}
function Yj(a){var b=a.map;a=N(b);if(0===this.j.length){if(!this.i&&this.b&&this.b.end()){var c=(.05-this.b.b)/-.005;var d=this.b.g,e=a.getCenter();e=Zg(b,e);b=b.Ca([e[0]-c*Math.cos(d),e[1]-c*Math.sin(d)]);a.animate({center:a.i.center(b),duration:500,easing:Dg})}bj(a,1,-1);return!1}this.b&&Dj(this.b);this.f=null;return!0}
function Wj(a){if(0<this.j.length&&this.u(a)){var b=N(a.map);this.f=null;this.v||bj(b,1,1);0<b.f[0]&&b.setCenter(a.frameState.da.center);this.b&&Dj(this.b);this.i=1<this.j.length;return!0}return!1}Vj.prototype.Ub=yb;function Zj(a){a=a?a:{};Sj.call(this,{Za:ak,mb:bk,ab:ck});this.f=a.condition?a.condition:Kj;this.b=void 0;this.i=void 0!==a.duration?a.duration:250}u(Zj,Sj);function bk(a){if(Qj(a)){var b=a.map,c=N(b);if(c.i.rotation!==Gi){b=b.ra();a=a.pixel;a=Math.atan2(b[1]/2-a[1],a[0]-b[0]/2);if(void 0!==this.b){b=a-this.b;var d=aj(c);Fj(c,d-b)}this.b=a}}}function ck(a){if(!Qj(a))return!0;a=N(a.map);bj(a,1,-1);var b=aj(a),c=this.i;b=a.tf(b,0);Fj(a,b,void 0,c);return!1}
function ak(a){return Qj(a)&&Lj(a)&&this.f(a)?(bj(N(a.map),1,1),this.b=void 0,!0):!1}Zj.prototype.Ub=yb;function dk(a){this.ec=null;this.b=document.createElement("div");this.b.style.position="absolute";this.b.className="ol-box "+a;this.g=this.f=this.c=null}u(dk,Ma);dk.prototype.Ba=function(){this.setMap(null)};function ek(a){var b=a.f,c=a.g;a=a.b.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
dk.prototype.setMap=function(a){if(this.c){this.c.u.removeChild(this.b);var b=this.b.style;b.left=b.top=b.width=b.height="inherit"}(this.c=a)&&this.c.u.appendChild(this.b)};function fk(a){var b=a.f,c=a.g;b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.c.Ca,a.c);b[4]=b[0].slice();a.ec?a.ec.ha([b]):a.ec=new Ti([b])}dk.prototype.getGeometry=function(){return this.ec};function gk(a){Sj.call(this,{Za:hk,mb:ik,ab:jk});a=a?a:{};this.b=new dk(a.className||"ol-dragbox");this.u=void 0!==a.so?a.so:64;this.f=null;this.B=a.condition?a.condition:xb;this.o=a.wl?a.wl:kk}u(gk,Sj);function kk(a,b,c){a=c[0]-b[0];b=c[1]-b[1];return a*a+b*b>=this.u}function ik(a){if(Qj(a)){var b=this.b,c=a.pixel;b.f=this.f;b.g=c;fk(b);ek(b);F(this,new lk(rk,a.coordinate,a))}}gk.prototype.getGeometry=function(){return this.b.getGeometry()};gk.prototype.i=xa;
function jk(a){if(!Qj(a))return!0;this.b.setMap(null);this.o(a,this.f,a.pixel)&&(this.i(a),F(this,new lk(sk,a.coordinate,a)));return!1}function hk(a){if(Qj(a)&&Lj(a)&&this.B(a)){this.f=a.pixel;this.b.setMap(a.map);var b=this.b,c=this.f;b.f=this.f;b.g=c;fk(b);ek(b);F(this,new lk(tk,a.coordinate,a));return!0}return!1}var tk="boxstart",rk="boxdrag",sk="boxend";function lk(a,b,c){Pa.call(this,a);this.coordinate=b;this.mapBrowserEvent=c}u(lk,Pa);function uk(a){a=a?a:{};var b=a.condition?a.condition:Oj;this.C=void 0!==a.duration?a.duration:200;this.F=void 0!==a.Db?a.Db:!1;gk.call(this,{condition:b,className:a.className||"ol-dragzoom"})}u(uk,gk);
uk.prototype.i=function(){var a=this.getMap(),b=N(a),c=a.ra(),d=this.getGeometry().I();if(this.F){var e=ij(b,c);d=[Zg(a,[d[0],d[1]]),Zg(a,[d[2],d[3]])];a=jb(void 0);var f;var g=0;for(f=d.length;g<f;++g)bb(a,d[g]);a=1/jj(b,a,c);d=(e[2]-e[0])/2*(a-1);a=(e[3]-e[1])/2*(a-1);e[0]-=d;e[2]+=d;e[1]-=a;e[3]+=a;d=e}c=b.Aa(jj(b,d,c));e=tb(d);e=b.i.center(e);b.animate({resolution:c,center:e,duration:this.C,easing:Dg})};function vk(a){Ej.call(this,{handleEvent:wk});a=a||{};this.b=function(a){return Mj(a)&&Pj(a)};this.f=void 0!==a.condition?a.condition:this.b;this.j=void 0!==a.duration?a.duration:100;this.i=void 0!==a.Xp?a.Xp:128}u(vk,Ej);
function wk(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.f(a)&&(40==c||37==c||39==c||38==c)){b=N(a.map);var d=b.V()*this.i,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;d=[e,f];af(d,aj(b));c=this.j;if(e=b.getCenter())d=b.i.center([e[0]+d[0],e[1]+d[1]]),c?b.animate({duration:c,easing:Mg,center:d}):b.setCenter(d);a.preventDefault();b=!0}}return!b};function xk(a){Ej.call(this,{handleEvent:yk});a=a?a:{};this.f=a.condition?a.condition:Pj;this.b=a.dc?a.dc:1;this.j=void 0!==a.duration?a.duration:100}u(xk,Ej);function yk(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;!this.f(a)||43!=c&&45!=c||(b=43==c?this.b:-this.b,c=N(a.map),Gj(c,b,void 0,this.j),a.preventDefault(),b=!0)}return!b};function zk(a){Ej.call(this,{handleEvent:Ak});a=a||{};this.j=0;this.v=void 0!==a.duration?a.duration:250;this.G=void 0!==a.timeout?a.timeout:80;this.N=void 0!==a.qr?a.qr:!0;this.F=a.Aa||!1;this.b=null;this.o=this.i=this.u=this.f=void 0}u(zk,Ej);
function Ak(a){var b=a.type;if("wheel"!==b&&"mousewheel"!==b)return!0;a.preventDefault();b=a.map;var c=a.originalEvent;this.N&&(this.b=a.coordinate);if("wheel"==a.type){var d=c.deltaY;Kc&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=Oc);c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)}else"mousewheel"==a.type&&(d=-c.wheelDeltaY,Lc&&(d/=3));if(0===d)return!1;a=Date.now();void 0===this.f&&(this.f=a);if(!this.i||400<a-this.f)this.i=4>Math.abs(d)?Bk:Ck;if(this.i===Bk){b=N(b);this.o?clearTimeout(this.o):
bj(b,1,1);this.o=setTimeout(this.B.bind(this),400);c=b.V()*Math.pow(2,d/300);var e=b.B,f=b.j,g=0;c<e?(c=Math.max(c,e/1.5),g=1):c>f&&(c=Math.min(c,1.5*f),g=-1);if(this.b){var h=fj(b,c,this.b);b.setCenter(b.i.center(h))}cj(b,c);0===g&&this.F&&b.animate({resolution:b.Aa(c,0<d?-1:1),easing:Dg,anchor:this.b,duration:this.v});0<g?b.animate({resolution:e,easing:Dg,anchor:this.b,duration:500}):0>g&&b.animate({resolution:f,easing:Dg,anchor:this.b,duration:500});this.f=a;return!1}this.j+=d;d=Math.max(this.G-
(a-this.f),0);clearTimeout(this.u);this.u=setTimeout(this.C.bind(this,b),d);return!1}zk.prototype.B=function(){this.o=void 0;bj(N(this.getMap()),1,-1)};zk.prototype.C=function(a){a=N(a);0<a.f[0]&&ej(a);Gj(a,-Ab(this.j,-1,1),this.b,this.v);this.i=void 0;this.j=0;this.b=null;this.u=this.f=void 0};var Bk="trackpad",Ck="wheel";function Dk(a){Sj.call(this,{Za:Ek,mb:Fk,ab:Gk});a=a||{};this.f=null;this.i=void 0;this.b=!1;this.o=0;this.B=void 0!==a.threshold?a.threshold:.3;this.u=void 0!==a.duration?a.duration:250}u(Dk,Sj);
function Fk(a){var b=0,c=this.j[0],d=this.j[1];c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.i&&(b=c-this.i,this.o+=b,!this.b&&Math.abs(this.o)>this.B&&(this.b=!0));this.i=c;a=a.map;c=N(a);if(c.i.rotation!==Gi){d=a.pa.getBoundingClientRect();var e=Uj(this.j);e[0]-=d.left;e[1]-=d.top;this.f=a.Ca(e);this.b&&(d=aj(c),a.render(),Fj(c,d+b,this.f))}}
function Gk(a){if(2>this.j.length){a=N(a.map);bj(a,1,-1);if(this.b){var b=aj(a),c=this.f,d=this.u;b=a.tf(b,0);Fj(a,b,c,d)}return!1}return!0}function Ek(a){return 2<=this.j.length?(a=a.map,this.f=null,this.i=void 0,this.b=!1,this.o=0,this.v||bj(N(a),1,1),!0):!1}Dk.prototype.Ub=yb;function Hk(a){Sj.call(this,{Za:Ik,mb:Jk,ab:Kk});a=a?a:{};this.o=a.Aa||!1;this.f=null;this.u=void 0!==a.duration?a.duration:400;this.b=void 0;this.i=1}u(Hk,Sj);
function Jk(a){var b=1,c=this.j[0],d=this.j[1],e=c.clientX-d.clientX;c=c.clientY-d.clientY;e=Math.sqrt(e*e+c*c);void 0!==this.b&&(b=this.b/e);this.b=e;a=a.map;e=N(a);d=e.V();var f=e.j,g=e.B;c=d*b;c>f?(b=f/d,c=f):c<g&&(b=g/d,c=g);1!=b&&(this.i=b);b=a.pa.getBoundingClientRect();d=Uj(this.j);d[0]-=b.left;d[1]-=b.top;this.f=a.Ca(d);a.render();Hj(e,c,this.f)}
function Kk(a){if(2>this.j.length){a=N(a.map);bj(a,1,-1);var b=a.V();if(this.o||b<a.B||b>a.j){var c=this.f,d=this.u;b=a.Aa(b,0,this.i-1);Hj(a,b,c,d)}return!1}return!0}function Ik(a){return 2<=this.j.length?(a=a.map,this.f=null,this.b=void 0,this.i=1,this.v||bj(N(a),1,1),!0):!1}Hk.prototype.Ub=yb;function Lk(a){a=a?a:{};var b=new Ih,c=new Cj;(void 0!==a.zh?a.zh:1)&&b.push(new Zj);(void 0!==a.Tl?a.Tl:1)&&b.push(new Ij({dc:a.vr,duration:a.df}));(void 0!==a.Ul?a.Ul:1)&&b.push(new Vj({ko:c}));(void 0!==a.Jj?a.Jj:1)&&b.push(new Dk);(void 0!==a.Wp?a.Wp:1)&&b.push(new Hk({Aa:a.Aa,duration:a.df}));if(void 0!==a.jo?a.jo:1)b.push(new vk),b.push(new xk({dc:a.vr,duration:a.df}));(void 0!==a.to?a.to:1)&&b.push(new zk({Aa:a.Aa,duration:a.df}));(void 0!==a.Pq?a.Pq:1)&&b.push(new uk({duration:a.df}));return b}
;function Mk(a,b){this.i=b;this.b={};this.f={}}u(Mk,Ma);function Nk(){Ch(Dh)}m=Mk.prototype;m.Ra=function(a,b,c,d,e,f,g){function h(a,c){var f=x(a).toString(),g=b.se[x(c)].yg;if(!(f in b.Se)||g)return d.call(e,a,g?c:null)}var k,l=b.da,n=l.resolution,p=l.projection;l=a;if(p.f){p=p.I();var q=rb(p),r=a[0];if(r<p[0]||r>p[2])l=[r+q*Math.ceil((p[0]-r)/q),a[1]]}p=b.wd;for(q=p.length-1;0<=q;--q){var v=p[q];r=v.layer;if(Qe(v,n)&&f.call(g,r)&&(v=Ok(this,r),M(r)&&(k=v.Ra(M(r).B?l:a,b,c,h,e)),k))return k}};
function Ok(a,b){var c=x(b).toString();if(c in a.b)return a.b[c];for(var d,e=a.getType(),f=0,g=Ue.length;f<g;++f){var h=Ue[f];if(h.handles(e,b)){d=h.create(a,b);break}}if(d)a.b[c]=d,a.f[c]=D(d,"change",a.kn,a);else throw Error("Unable to create renderer for layer: "+b.getType());return d}m.getMap=function(){return this.i};m.kn=function(){this.i.render()};function uj(a,b){var c=a.b[b];delete a.b[b];A(a.f[b]);delete a.f[b];return c}m.ak=xa;
m.yq=function(a,b){for(var c in this.b)b&&c in b.se||Oa(uj(this,c))};function Wd(a,b){return a.zIndex-b.zIndex};function Pk(a,b){Mk.call(this,a,b);this.j=Hc();this.c=this.j.canvas;this.c.style.width="100%";this.c.style.height="100%";this.c.style.display="block";this.c.className="ol-unselectable";a.insertBefore(this.c,a.childNodes[0]||null);this.g=!0;this.o=sc()}u(Pk,Mk);Pk.handles=function(a){return"canvas"===a};Pk.create=function(a,b){return new Pk(a,b)};
function Qk(a,b,c){var d=a.getMap(),e=a.j;if(Sa(d,b)){var f=c.extent,g=c.ja,h=c.da.rotation,k=c.da,l=c.ja/k.resolution;a=xc(a.o,a.c.width/2,a.c.height/2,l,-l,-k.rotation,-k.center[0],-k.center[1]);F(d,new ef(b,new gf(e,g,f,a,h),c,e,null))}}Pk.prototype.getType=function(){return"canvas"};
Pk.prototype.ak=function(a){if(a){var b=this.j,c=a.ja,d=Math.round(a.size[0]*c),e=Math.round(a.size[1]*c);this.c.width!=d||this.c.height!=e?(this.c.width=d,this.c.height=e):b.clearRect(0,0,d,e);c=a.da.rotation;var f=a.da,g=a.Gc,h=a.Fg;xc(g,a.size[0]/2,a.size[1]/2,1/f.resolution,-1/f.resolution,-f.rotation,-f.center[0],-f.center[1]);f=vc(h,g);g=f[0]*f[3]-f[1]*f[2];Aa(0!==g,32);h=f[0];var k=f[1],l=f[2],n=f[3],p=f[4],q=f[5];f[0]=n/g;f[1]=-k/g;f[2]=-l/g;f[3]=h/g;f[4]=(l*q-n*p)/g;f[5]=-(h*q-k*p)/g;Qk(this,
"precompose",a);f=a.wd;Vd(f);c&&(b.save(),jd(b,c,d/2,e/2));d=a.da.resolution;e=0;for(g=f.length;e<g;++e)h=f[e],k=h.layer,k=Ok(this,k),Qe(h,d)&&"ready"==h.Vq&&k.Yc(a,h)&&k.rf(a,h,b);c&&b.restore();Qk(this,"postcompose",a);this.g||(this.c.style.display="",this.g=!0);for(var r in this.b)if(!(r in a.se)){a.Ce.push(this.yq.bind(this));break}a.Ce.push(Nk)}else this.g&&(this.c.style.display="none",this.g=!1)};
Pk.prototype.Qf=function(a,b,c,d,e,f){var g=b.da.resolution,h=b.wd,k=h.length;a=wc(b.Fg,a.slice());for(--k;0<=k;--k){var l=h[k];var n=l.layer;if(Qe(l,g)&&e.call(f,n)&&(l=Ok(this,n).u(a,b,c,d)))return l}};Ke.mc=function(){};
(function(a){function b(a,c){if(!(this instanceof b))return new b(a,c);this.hf=Math.max(4,a||9);this.sh=Math.max(2,Math.ceil(.4*this.hf));c&&this.pl(c);this.clear()}function c(a,b){d(a,0,a.children.length,b,a)}function d(a,b,c,d,f){f||(f=p(null));f.ea=Infinity;f.ca=Infinity;f.ga=-Infinity;f.fa=-Infinity;for(var g;b<c;b++)g=a.children[b],e(f,a.Oa?d(g):g);return f}function e(a,b){a.ea=Math.min(a.ea,b.ea);a.ca=Math.min(a.ca,b.ca);a.ga=Math.max(a.ga,b.ga);a.fa=Math.max(a.fa,b.fa);return a}function f(a,
b){return a.ea-b.ea}function g(a,b){return a.ca-b.ca}function h(a){return(a.ga-a.ea)*(a.fa-a.ca)}function k(a){return a.ga-a.ea+(a.fa-a.ca)}function l(a,b){return a.ea<=b.ea&&a.ca<=b.ca&&b.ga<=a.ga&&b.fa<=a.fa}function n(a,b){return b.ea<=a.ga&&b.ca<=a.fa&&b.ga>=a.ea&&b.fa>=a.ca}function p(a){return{children:a,height:1,Oa:!0,ea:Infinity,ca:Infinity,ga:-Infinity,fa:-Infinity}}function q(a,b,c,d,e){for(var f=[b,c],g;f.length;)c=f.pop(),b=f.pop(),c-b<=d||(g=b+Math.ceil((c-b)/d/2)*d,v(a,g,b,c,e),f.push(b,
g,g,c))}var r="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},v=function(a,b){return b={Mf:{}},a(b,b.Mf),b.Mf}(function(a){(function(b,c){a.Mf=c()})(r,function(){function a(c,d,e,f,g){for(;f>e;){if(600<f-e){var h=f-e+1,k=d-e+1,l=Math.log(h),n=.5*Math.exp(2*l/3);l=.5*Math.sqrt(l*n*(h-n)/h)*(0>k-h/2?-1:1);a(c,d,Math.max(e,Math.floor(d-k*n/h+l)),Math.min(f,Math.floor(d+(h-k)*n/h+l)),g)}h=c[d];k=e;n=f;b(c,e,d);for(0<g(c[f],h)&&b(c,e,f);k<n;){b(c,
k,n);k++;for(n--;0>g(c[k],h);)k++;for(;0<g(c[n],h);)n--}0===g(c[e],h)?b(c,e,n):(n++,b(c,n,f));n<=d&&(e=n+1);d<=n&&(f=n-1)}}function b(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function c(a,b){return a<b?-1:a>b?1:0}return function(b,d,e,f,g){a(b,d,e||0,f||b.length-1,g||c)}})});b.prototype={all:function(){return this.oh(this.data,[])},search:function(a){var b=this.data,c=[],d=this.bb;if(!n(a,b))return c;for(var e=[],f,g,h,k;b;){f=0;for(g=b.children.length;f<g;f++)h=b.children[f],k=b.Oa?d(h):h,n(a,k)&&(b.Oa?
c.push(h):l(a,k)?this.oh(h,c):e.push(h));b=e.pop()}return c},Bl:function(a){var b=this.data,c=this.bb;if(!n(a,b))return!1;for(var d=[],e,f,g,h;b;){e=0;for(f=b.children.length;e<f;e++)if(g=b.children[e],h=b.Oa?c(g):g,n(a,h)){if(b.Oa||l(a,h))return!0;d.push(g)}b=d.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this.sh){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}a=this.qh(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.vh(this.data,
a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.rh(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this.rh(a,this.data.height-1);return this},clear:function(){this.data=p([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.bb(a),e=[],f=[],g,h,k,n;c||e.length;){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),n=!0);if(c.Oa){a:{k=a;var p=c.children,q=b;if(q){for(var r=0;r<p.length;r++)if(q(k,p[r])){k=r;break a}k=-1}else k=p.indexOf(k)}if(-1!==
k){c.children.splice(k,1);e.push(c);this.ml(e);break}}n||c.Oa||!l(c,d)?h?(g++,c=h.children[g],n=!1):c=null:(e.push(c),f.push(g),g=0,h=c,c=c.children[0])}return this},bb:function(a){return a},pf:f,qf:g,toJSON:function(){return this.data},oh:function(a,b){for(var c=[];a;)a.Oa?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},qh:function(a,b,d,e){var f=d-b+1,g=this.hf;if(f<=g){var h=p(a.slice(b,d+1));c(h,this.bb);return h}e||(e=Math.ceil(Math.log(f)/Math.log(g)),g=Math.ceil(f/
Math.pow(g,e-1)));h=p([]);h.Oa=!1;h.height=e;f=Math.ceil(f/g);g=f*Math.ceil(Math.sqrt(g));var k;for(q(a,b,d,g,this.pf);b<=d;b+=g){var l=Math.min(b+g-1,d);q(a,b,l,f,this.qf);for(k=b;k<=l;k+=f){var n=Math.min(k+f-1,l);h.children.push(this.qh(a,k,n,e-1))}}c(h,this.bb);return h},ll:function(a,b,c,d){for(var e,f,g,k,l,n,p,q;;){d.push(b);if(b.Oa||d.length-1===c)break;p=q=Infinity;e=0;for(f=b.children.length;e<f;e++)g=b.children[e],l=h(g),n=(Math.max(g.ga,a.ga)-Math.min(g.ea,a.ea))*(Math.max(g.fa,a.fa)-
Math.min(g.ca,a.ca))-l,n<q?(q=n,p=l<p?l:p,k=g):n===q&&l<p&&(p=l,k=g);b=k||b.children[0]}return b},rh:function(a,b,c){var d=this.bb;c=c?a:d(a);d=[];var f=this.ll(c,this.data,b,d);f.children.push(a);for(e(f,c);0<=b;)if(d[b].children.length>this.hf)this.rl(d,b),b--;else break;this.il(c,d,b)},rl:function(a,b){var d=a[b],e=d.children.length,f=this.sh;this.jl(d,f,e);e=this.kl(d,f,e);e=p(d.children.splice(e,d.children.length-e));e.height=d.height;e.Oa=d.Oa;c(d,this.bb);c(e,this.bb);b?a[b-1].children.push(e):
this.vh(d,e)},vh:function(a,b){this.data=p([a,b]);this.data.height=a.height+1;this.data.Oa=!1;c(this.data,this.bb)},kl:function(a,b,c){var e,f;var g=f=Infinity;for(e=b;e<=c-b;e++){var k=d(a,0,e,this.bb);var l=d(a,e,c,this.bb);var n=Math.max(0,Math.min(k.ga,l.ga)-Math.max(k.ea,l.ea))*Math.max(0,Math.min(k.fa,l.fa)-Math.max(k.ca,l.ca));k=h(k)+h(l);if(n<g){g=n;var p=e;f=k<f?k:f}else n===g&&k<f&&(f=k,p=e)}return p},jl:function(a,b,c){var d=a.Oa?this.pf:f,e=a.Oa?this.qf:g,h=this.ph(a,b,c,d);b=this.ph(a,
b,c,e);h<b&&a.children.sort(d)},ph:function(a,b,c,f){a.children.sort(f);f=this.bb;var g=d(a,0,b,f),h=d(a,c-b,c,f),l=k(g)+k(h),n;for(n=b;n<c-b;n++){var p=a.children[n];e(g,a.Oa?f(p):p);l+=k(g)}for(n=c-b-1;n>=b;n--)p=a.children[n],e(h,a.Oa?f(p):p),l+=k(h);return l},il:function(a,b,c){for(;0<=c;c--)e(b[c],a)},ml:function(a){for(var b=a.length-1,d;0<=b;b--)0===a[b].children.length?0<b?(d=a[b-1].children,d.splice(d.indexOf(a[b]),1)):this.clear():c(a[b],this.bb)},pl:function(a){var b=["return a"," - b",
";"];this.pf=new Function("a","b",b.join(a[0]));this.qf=new Function("a","b",b.join(a[1]));this.bb=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};a["default"]=b})(Ke.mc=Ke.mc||{});Ke.mc=Ke.mc.default;function Rk(){};var Sk="Polygon Circle LineString Image Text Default".split(" "),Tk={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};function Uk(a,b,c,d,e,f){this.qa=f;this.Na=ab();this.tolerance=a;this.Ea=b;this.Eg=e;this.ja=d;this.U=0;this.resolution=c;this.f=this.N=this.Y=null;this.instructions=[];this.coordinates=[];this.za={};this.ia=sc();this.c=[];this.G=null;this.state={};this.W=0;this.Fa=sc()}u(Uk,ff);function Vk(a,b,c,d,e,f,g,h){b.beginPath();b.moveTo.apply(b,c);b.lineTo.apply(b,d);b.lineTo.apply(b,e);b.lineTo.apply(b,f);b.lineTo.apply(b,c);g&&(a.T=g[2],a.Ga(b));h&&(Wk(b,h),b.stroke())}
function Xk(a,b,c,d,e,f,g,h,k,l,n,p,q,r,v,w,C,G,I){var J=G||I,E=a.Fa;f*=r;g*=r;c-=f;d-=g;v&&(c=Math.round(c),d=Math.round(d));v=w+n>e.width?e.width-n:w;k=k+p>e.height?e.height-p:k;w=a.Na;var W=C[3]+v*r+C[1],y=C[0]+k*r+C[2],B=c-C[3],K=d-C[0];if(J||0!==q){var U=[B,K];var ca=[B+W,K];var Na=[B+W,K+y];var Ja=[B,K+y]}C=null;0!==q?(f=c+f,g=d+g,C=xc(E,f,g,1,1,q,-f,-g),jb(w),bb(w,wc(E,U)),bb(w,wc(E,ca)),bb(w,wc(E,Na)),bb(w,wc(E,Ja))):ib(B,K,B+W,K+y,w);q=b.canvas;q=w[0]<=q.width&&0<=w[2]&&w[1]<=q.height&&0<=
w[3];if(h){if(q||1!=h[4])mb(h,w),(a=q?[b,C?C.slice(0):null,l,e,n,p,v,k,c,d,r]:null)&&J&&a.push(G,I,U,ca,Na,Ja),h.push(a)}else q&&(J&&Vk(a,b,U,ca,Na,Ja,G,I),ld(b,C,l,e,n,p,v,k,c,d,r))}function Yk(a,b){var c=a.ja;return 1==c?b:b.map(function(a){return a*c})}
function Zk(a,b,c,d,e,f,g){var h=a.coordinates.length,k=$k(a);g&&(c+=e);g=[b[c],b[c+1]];var l=[NaN,NaN],n=!0,p;for(p=c+e;p<d;p+=e){l[0]=b[p];l[1]=b[p+1];var q=hb(k,l);q!==r?(n&&(a.coordinates[h++]=g[0],a.coordinates[h++]=g[1]),a.coordinates[h++]=l[0],a.coordinates[h++]=l[1],n=!1):1===q?(a.coordinates[h++]=l[0],a.coordinates[h++]=l[1],n=!1):n=!0;g[0]=l[0];g[1]=l[1];var r=q}if(f&&n||p===c+e)a.coordinates[h++]=g[0],a.coordinates[h++]=g[1];return h}
function al(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;++g){var k=d[g];c=Zk(a,b,c,k,e,!1,!1);f.push(c);c=k}return c}m=Uk.prototype;
m.Wh=function(a,b,c){bl(this,b);var d=a.getType(),e=a.H,f=this.coordinates.length,g;if("MultiPolygon"==d){d=pf(a);var h=[];for(var k=a.f,l=g=0,n=k.length;l<n;++l){var p=[];g=al(this,d,g,k[l],e,p);h.push(p)}this.instructions.push([4,f,h,a,c,me])}else"Polygon"==d||"MultiLineString"==d?(h=[],d="Polygon"==d?a.lc():a.D,al(this,d,0,a.Wa(),e,h),this.instructions.push([4,f,h,a,c,le])):"LineString"==d||"MultiPoint"==d?(d=a.D,e=Zk(this,d,0,d.length,e,!1,!1),this.instructions.push([4,f,e,a,c,ke])):"Point"==
d&&(d=a.D,this.coordinates.push(d[0],d[1]),e=this.coordinates.length,this.instructions.push([4,f,e,a,c]));cl(this,b)};function bl(a,b){a.Y=[0,b,0];a.instructions.push(a.Y);a.N=[0,b,0];a.c.push(a.N)}m.Ga=function(a){if(this.T){var b=wc(this.ia,this.T.slice());a.translate(b[0],b[1]);a.rotate(this.W)}a.fill();this.T&&a.setTransform.apply(a,kd)};function Wk(a,b){a.strokeStyle=b[1];a.lineWidth=b[2];a.lineCap=b[3];a.lineJoin=b[4];a.miterLimit=b[5];Qc&&(a.lineDashOffset=b[7],a.setLineDash(b[6]))}
function dl(a,b,c){if(b&&5<b.length){var d=b[4];if(1==d||d==b.length-5){c={ea:b[0],ca:b[1],ga:b[2],fa:b[3],value:c};if(!a.qa.Bl(c))for(a.qa.insert(c),c=5,d=b.length;c<d;++c){var e=b[c];e&&(11<e.length&&Vk(a,e[0],e[13],e[14],e[15],e[16],e[11],e[12]),ld.apply(void 0,e))}b.length=5;jb(b)}}}
function el(a,b,c,d,e,f,g){if(a.G&&Ud(c,a.ia))var h=a.G;else a.G||(a.G=[]),h=zb(a.coordinates,0,a.coordinates.length,2,c,a.G),vc(a.ia,c);for(var k=!Da(d),l=0,n=e.length,p=0,q,r,v,w,C,G,I,J,E,W=0,y=0,B=null,K=null,U=a.za,ca=a.W,Na={context:b,ja:a.ja,resolution:a.resolution,rotation:ca},Ja=a.instructions!=e||a.Eg?0:200;l<n;){var L=e[l];switch(L[0]){case 0:var Ka=L[1];k&&d[x(Ka).toString()]||!Ka.getGeometry()?l=L[2]:void 0===g||wb(g,Ka.getGeometry().I())?++l:l=L[2]+1;break;case 1:W>Ja&&(a.Ga(b),W=0);
y>Ja&&(b.stroke(),y=0);W||y||(b.beginPath(),w=C=NaN);++l;break;case 2:p=L[1];var Gd=h[p],mf=h[p+1],ec=h[p+2]-Gd,hd=h[p+3]-mf,fi=Math.sqrt(ec*ec+hd*hd);b.moveTo(Gd+fi,mf);b.arc(Gd,mf,fi,0,2*Math.PI,!0);++l;break;case 3:b.closePath();++l;break;case 4:p=L[1];q=L[2];var Eg=L[4],Fg=6==L.length?L[5]:void 0;Na.geometry=L[3];Na.feature=Ka;l in U||(U[l]=[]);var vf=U[l];Fg?Fg(h,p,q,2,vf):(vf[0]=h[p],vf[1]=h[p+1],vf.length=2);Eg(vf,Na);++l;break;case 6:p=L[1];q=L[2];E=L[3];r=L[4];v=L[5];J=f?null:L[6];var wf=
L[7],sy=L[8],ty=L[9],uy=L[10],vy=L[11],Vr=L[12],wy=L[13],xy=L[14],yy=L[15];if(16<L.length){var Wr=L[16];var Xr=L[17];var Yr=L[18]}else Wr=$c,Xr=Yr=!1;for(vy&&(Vr+=ca);p<q;p+=2)Xk(a,b,h[p],h[p+1],E,r,v,J,wf,sy,ty,uy,Vr,wy,xy,yy,Wr,Xr?B:null,Yr?K:null);dl(a,J,Ka);++l;break;case 5:var Zr=L[1],$r=L[2],wn=L[3];J=f?null:L[4];var zy=L[5],as=L[6],Ay=L[7],bs=L[8],cs=L[9],ds=L[10],es=L[11],fs=L[12],xn=L[13],gs=L[14],hs=ue(h,Zr,$r,2),is=bs(fs);if(zy||is<=hs){a:{var mk=void 0,js=void 0,xf=void 0,ve=h,nd=Zr,ks=
$r,ls=fs,By=bs,ms=(hs-is)*Tk[a.u[xn].textAlign],Cy=Ay,yn=[],ti=ve[nd]>ve[ks-2],ns=ls.length,ui=ve[nd],vi=ve[nd+1];nd+=2;for(var Gg=ve[nd],Hg=ve[nd+1],zn=0,nk=Math.sqrt(Math.pow(Gg-ui,2)+Math.pow(Hg-vi,2)),yf="",An=0,ok=0;ok<ns;++ok){js=ti?ns-ok-1:ok;var Bn=ls.charAt(js);yf=ti?Bn+yf:yf+Bn;var Ig=By(yf)-An;An+=Ig;for(var os=ms+Ig/2;nd<ks-2&&zn+nk<os;)ui=Gg,vi=Hg,nd+=2,Gg=ve[nd],Hg=ve[nd+1],zn+=nk,nk=Math.sqrt(Math.pow(Gg-ui,2)+Math.pow(Hg-vi,2));var Dy=os-zn,Jg=Math.atan2(Hg-vi,Gg-ui);ti&&(Jg+=0<Jg?
-Math.PI:Math.PI);if(void 0!==mk){var pk=Jg-mk;pk+=pk>Math.PI?-2*Math.PI:pk<-Math.PI?2*Math.PI:0;if(Math.abs(pk)>Cy){var Kg=null;break a}}var ps=Dy/nk,qs=Fb(ui,Gg,ps),rs=Fb(vi,Hg,ps);mk==Jg?(ti&&(xf[0]=qs,xf[1]=rs,xf[2]=Ig/2),xf[4]=yf):(yf=Bn,An=Ig,xf=[qs,rs,Ig/2,Jg,yf],ti?yn.unshift(xf):yn.push(xf),mk=Jg);ms+=Ig}Kg=yn}if(Kg){var qk;if(ds){var zf=0;for(qk=Kg.length;zf<qk;++zf){var Pc=Kg[zf];var Cn=Pc[4];var Md=a.Z(Cn,xn,"",ds);r=Pc[2]+es;v=wn*Md.height+2*(.5-wn)*es-cs;Xk(a,b,Pc[0],Pc[1],Md,r,v,J,
Md.height,1,0,0,Pc[3],gs,!1,Md.width,$c,null,null)}}if(as)for(zf=0,qk=Kg.length;zf<qk;++zf)Pc=Kg[zf],Cn=Pc[4],Md=a.Z(Cn,xn,as,""),r=Pc[2],v=wn*Md.height-cs,Xk(a,b,Pc[0],Pc[1],Md,r,v,J,Md.height,1,0,0,Pc[3],gs,!1,Md.width,$c,null,null)}}dl(a,J,Ka);++l;break;case 7:if(void 0!==f){Ka=L[1];var ss=f(Ka);if(ss)return ss}++l;break;case 8:Ja?W++:a.Ga(b);++l;break;case 9:p=L[1];q=L[2];var wi=h[p];var xi=h[p+1];G=wi+.5|0;I=xi+.5|0;if(G!==w||I!==C)b.moveTo(wi,xi),w=G,C=I;for(p+=2;p<q;p+=2)if(wi=h[p],xi=h[p+
1],G=wi+.5|0,I=xi+.5|0,p==q-2||G!==w||I!==C)b.lineTo(wi,xi),w=G,C=I;++l;break;case 10:B=L;a.T=L[2];W&&(a.Ga(b),W=0,y&&(b.stroke(),y=0));b.fillStyle=L[1];++l;break;case 11:K=L;y&&(b.stroke(),y=0);Wk(b,L);++l;break;case 12:Ja?y++:b.stroke();++l;break;default:++l}}W&&a.Ga(b);y&&b.stroke()}m.Sb=function(a,b,c,d){this.W=c;el(this,a,b,d,this.instructions,void 0,void 0)};
function fl(a){var b=a.c;b.reverse();var c,d=b.length,e=-1;for(c=0;c<d;++c){var f=b[c];var g=f[0];if(7==g)e=c;else if(0==g){f[2]=c;f=a.c;for(g=c;e<g;){var h=f[e];f[e]=f[g];f[g]=h;++e;--g}e=-1}}}
m.Fb=function(a,b){var c=this.state;a?(a=a.va(),c.fillStyle=Gc(a?a:Xc)):c.fillStyle=void 0;b?(a=b.va(),c.strokeStyle=Gc(a?a:Zc),a=b.f,c.lineCap=void 0!==a?a:"round",a=b.g,c.ka=a?a.slice():Yc,a=b.j,c.lineDashOffset=a?a:0,a=b.i,c.lineJoin=void 0!==a?a:"round",a=b.c,c.lineWidth=void 0!==a?a:1,b=b.o,c.miterLimit=void 0!==b?b:10,c.lineWidth>this.U&&(this.U=c.lineWidth,this.f=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.ka=null,c.lineDashOffset=void 0,c.lineJoin=void 0,c.lineWidth=void 0,c.miterLimit=
void 0)};m.Bh=function(a,b){var c=a.fillStyle;a=[10,c];"string"!==typeof c&&(b=b.I(),a.push([b[0],b[3]]));this.instructions.push(a)};m.Ac=function(a){this.instructions.push([11,a.strokeStyle,a.lineWidth*this.ja,a.lineCap,a.lineJoin,a.miterLimit,Yk(this,a.ka),a.lineDashOffset*this.ja])};function gl(a,b,c,d){var e=b.fillStyle;if("string"!==typeof e||b.Hl!=e)c.call(a,b,d),b.Hl=e}
function hl(a,b,c){var d=b.strokeStyle,e=b.lineCap,f=b.ka,g=b.lineDashOffset,h=b.lineJoin,k=b.lineWidth,l=b.miterLimit;if(b.Nl!=d||b.Il!=e||f!=b.Sh&&!Ud(b.Sh,f)||b.Jl!=g||b.Kl!=h||b.Ll!=k||b.Ml!=l)c.call(a,b),b.Nl=d,b.Il=e,b.Sh=f,b.Jl=g,b.Kl=h,b.Ll=k,b.Ml=l}function cl(a,b){a.Y[2]=a.instructions.length;a.Y=null;a.N[2]=a.c.length;a.N=null;b=[7,b];a.instructions.push(b);a.c.push(b)}m.ye=xa;function $k(a){a.f||(a.f=db(a.Ea),0<a.U&&cb(a.f,a.resolution*(a.U+1)/2,a.f));return a.f};function il(a,b,c,d,e,f){Uk.call(this,a,b,c,d,e,f);this.R=this.wa=this.F=null;this.C=this.B=this.v=this.u=this.o=this.S=this.K=this.i=this.j=this.g=this.b=void 0}u(il,Uk);
il.prototype.drawPoint=function(a,b){if(this.R){bl(this,b);var c=a.D,d=this.coordinates.length;a=Zk(this,c,0,c.length,a.H,!1,!1);this.instructions.push([6,d,a,this.R,this.b,this.g,this.F,this.j,this.i,this.K,this.S,this.o,this.u,this.v*this.ja,this.B,this.C]);this.c.push([6,d,a,this.wa,this.b,this.g,this.F,this.j,this.i,this.K,this.S,this.o,this.u,this.v,this.B,this.C]);cl(this,b)}};
il.prototype.Ff=function(a,b){if(this.R){bl(this,b);var c=a.D,d=this.coordinates.length;a=Zk(this,c,0,c.length,a.H,!1,!1);this.instructions.push([6,d,a,this.R,this.b,this.g,this.F,this.j,this.i,this.K,this.S,this.o,this.u,this.v*this.ja,this.B,this.C]);this.c.push([6,d,a,this.wa,this.b,this.g,this.F,this.j,this.i,this.K,this.S,this.o,this.u,this.v,this.B,this.C]);cl(this,b)}};
il.prototype.ye=function(){fl(this);this.g=this.b=void 0;this.R=this.wa=null;this.C=this.B=this.u=this.o=this.S=this.K=this.i=this.v=this.j=void 0};il.prototype.Bd=function(a,b){var c=a.he(),d=a.ra(),e=a.Ej(),f=a.Z(1),g=a.Ae();this.b=c[0];this.g=c[1];this.F=b;this.wa=e;this.R=f;this.j=d[1];this.i=a.getOpacity();this.K=g[0];this.S=g[1];this.o=a.F;this.u=a.o;this.v=a.g;this.B=a.B;this.C=d[0]};function jl(a,b,c,d,e,f){Uk.call(this,a,b,c,d,e,f)}u(jl,Uk);function kl(a,b,c,d,e){var f=a.coordinates.length;b=Zk(a,b,c,d,e,!1,!1);f=[9,f,b];a.instructions.push(f);a.c.push(f);return d}jl.prototype.Df=function(a,b){var c=this.state,d=c.lineWidth;void 0!==c.strokeStyle&&void 0!==d&&(hl(this,c,this.Ac),bl(this,b),this.c.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.ka,c.lineDashOffset],[1]),c=a.D,kl(this,c,0,c.length,a.H),this.c.push([12]),cl(this,b))};
jl.prototype.Ef=function(a,b){var c=this.state,d=c.lineWidth;if(void 0!==c.strokeStyle&&void 0!==d){hl(this,c,this.Ac);bl(this,b);this.c.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.ka,c.lineDashOffset],[1]);c=a.Wa();d=a.D;a=a.H;var e=0,f;var g=0;for(f=c.length;g<f;++g)e=kl(this,d,e,c[g],a);this.c.push([12]);cl(this,b)}};jl.prototype.ye=function(){var a=this.state;void 0!=a.vd&&a.vd!=this.coordinates.length&&this.instructions.push([12]);fl(this);this.state=null};
jl.prototype.Ac=function(a){void 0!=a.vd&&a.vd!=this.coordinates.length&&(this.instructions.push([12]),a.vd=this.coordinates.length);a.vd=0;Uk.prototype.Ac.call(this,a);this.instructions.push([1])};function ll(a,b,c,d,e,f){Uk.call(this,a,b,c,d,e,f)}u(ll,Uk);function ml(a,b,c,d,e){var f=a.state,g=void 0!==f.fillStyle;f=void 0!=f.strokeStyle;var h=d.length,k=[1];a.instructions.push(k);a.c.push(k);for(k=0;k<h;++k){var l=d[k],n=a.coordinates.length;c=Zk(a,b,c,l,e,!0,!f);c=[9,n,c];a.instructions.push(c);a.c.push(c);f&&(c=[3],a.instructions.push(c),a.c.push(c));c=l}b=[8];a.c.push(b);g&&a.instructions.push(b);f&&(g=[12],a.instructions.push(g),a.c.push(g));return c}
ll.prototype.Cf=function(a,b){var c=this.state,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){nl(this,a);bl(this,b);this.c.push([10,Ec(Xc)]);void 0!==c.strokeStyle&&this.c.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.ka,c.lineDashOffset]);var e=a.D;d=this.coordinates.length;Zk(this,e,0,e.length,a.H,!1,!1);a=[1];d=[2,d];this.instructions.push(a,d);this.c.push(a,d);a=[8];this.c.push(a);void 0!==c.fillStyle&&this.instructions.push(a);void 0!==c.strokeStyle&&(c=[12],this.instructions.push(c),
this.c.push(c));cl(this,b)}};ll.prototype.Hf=function(a,b){var c=this.state;nl(this,a);bl(this,b);this.c.push([10,Ec(Xc)]);void 0!==c.strokeStyle&&this.c.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.ka,c.lineDashOffset]);c=a.Wa();var d=a.lc();ml(this,d,0,c,a.H);cl(this,b)};
ll.prototype.Gf=function(a,b){var c=this.state,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){nl(this,a);bl(this,b);this.c.push([10,Ec(Xc)]);void 0!==c.strokeStyle&&this.c.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.ka,c.lineDashOffset]);c=a.f;d=pf(a);a=a.H;var e=0,f;var g=0;for(f=c.length;g<f;++g)e=ml(this,d,e,c[g],a);cl(this,b)}};
ll.prototype.ye=function(){fl(this);this.state=null;var a=this.tolerance;if(0!==a){var b=this.coordinates,c;var d=0;for(c=b.length;d<c;++d)b[d]=a*Math.round(b[d]/a)}};function nl(a,b){var c=a.state;void 0!==c.fillStyle&&gl(a,c,a.Bh,b);void 0!==c.strokeStyle&&hl(a,c,a.Ac)};function ol(a,b,c,d,e,f){Uk.call(this,a,b,c,d,e,f);this.ya="";this.o=this.K=0;this.S=void 0;this.F=0;this.g=null;this.B={};this.b=null;this.Qa={};this.j={};this.u={};this.wa=this.v=this.i="";for(this.ua={};Wc(ad);)ad.pop()}u(ol,Uk);
ol.prototype.drawText=function(a,b){var c=this.g,d=this.b,e=this.j;if(""!==this.ya&&e&&(c||d)){c=this.coordinates.length;var f=a.getType();d=null;var g=2,h=2;if("line"===e.placement){if(!wb($k(this),a.I()))return;d=a.D;h=a.H;if("LineString"==f)var k=[d.length];else if("MultiLineString"==f)k=a.Wa();else if("Polygon"==f)k=a.Wa().slice(0,1);else if("MultiPolygon"==f)for(a=a.f,k=[],g=0,f=a.length;g<f;++g)k.push(a[g][0]);bl(this,b);a=e.textAlign;var l=0,n;f=0;for(var p=k.length;f<p;++f){if(void 0==a){for(var q,
r,v=void 0,w=void 0,C=g=r=q=void 0,G=n=l,I=0,J=0,E=l;l<k[f];l+=h){var W=d[l],y=d[l+1];void 0!==r&&(r=W-r,q=y-q,g=Math.sqrt(r*r+q*q),void 0!==w&&(J+=C,v=Math.acos((w*r+v*q)/(C*g)),v>e.Uc&&(J>I&&(I=J,n=E,G=l),J=0,E=l-h)),C=g,w=r,v=q);r=W;q=y}g=J+g>I?[E,l]:[n,G];l=g[0];n=g[1]}else n=k[f];for(g=l;g<n;g+=h)this.coordinates.push(d[g],d[g+1]);g=this.coordinates.length;l=k[f];pl(this,c,g,this.C);c=g}}else{k=this.Z(this.ya,this.i,this.v,this.wa);p=k.width/this.ja;switch(f){case "Point":case "MultiPoint":d=
a.D;g=d.length;break;case "LineString":d=a.ag();break;case "Circle":d=a.getCenter();break;case "MultiLineString":d=a.di();g=d.length;break;case "Polygon":d=a.Kc();if(!e.overflow&&d[2]/this.resolution<p)return;h=3;break;case "MultiPolygon":n=qf(a);d=[];g=0;for(f=n.length;g<f;g+=3)(e.overflow||n[g+2]/this.resolution>=p)&&d.push(n[g],n[g+1]);g=d.length;if(0==g)return}g=Zk(this,d,0,g,h,!1,!1);bl(this,b);if(e.Bc||e.Cc)this.Fb(e.Bc,e.Cc),gl(this,this.state,this.Bh,a),hl(this,this.state,this.Ac);ql(this,
k,c,g)}cl(this,b)}};
ol.prototype.Z=function(a,b,c,d){var e=d+b+a+c+this.ja;if(!ad.g.hasOwnProperty(e)){var f=d?this.Qa[d]||this.b:null,g=c?this.B[c]||this.g:null,h=this.u[b]||this.j,k=h.scale*this.ja,l=Tk[h.textAlign||"center"];b=d&&f.lineWidth?f.lineWidth:0;a=a.split("\n");var n=a.length,p=[],q=h.font;var r=a.length;var v=0;var w;for(w=0;w<r;++w){var C=id(q,a[w]);v=Math.max(v,C);p.push(C)}r=v;q=gd(h.font);r=Hc(Math.ceil((r+b)*k),Math.ceil((q*n+b)*k));v=r.canvas;ad.set(e,v);1!=k&&r.scale(k,k);r.font=h.font;d&&(r.strokeStyle=
f.strokeStyle,r.lineWidth=b*(Lc?k:1),r.lineCap=f.lineCap,r.lineJoin=f.lineJoin,r.miterLimit=f.miterLimit,Qc&&f.ka.length&&(r.setLineDash(f.ka),r.lineDashOffset=f.lineDashOffset));c&&(r.fillStyle=g.fillStyle);r.textBaseline="middle";r.textAlign="center";f=.5-l;g=l*v.width/k+f*b;if(d)for(d=0;d<n;++d)r.strokeText(a[d],g+f*p[d],.5*(b+q)+d*q);if(c)for(d=0;d<n;++d)r.fillText(a[d],g+f*p[d],.5*(b+q)+d*q)}return ad.get(e)};
function ql(a,b,c,d){var e=a.j,f=a.b,g=a.ja,h=Tk[e.textAlign||"center"],k=Tk[e.textBaseline];f=f&&f.lineWidth?f.lineWidth:0;h=h*b.width/g+2*(.5-h)*f;k=k*b.height/g+2*(.5-k)*f;a.instructions.push([6,c,d,b,(h-a.K)*g,(k-a.o)*g,a.C,b.height,1,0,0,a.S,a.F,1,!0,b.width,e.padding==$c?$c:e.padding.map(function(a){return a*g}),!!e.Bc,!!e.Cc]);a.c.push([6,c,d,b,(h-a.K)*g,(k-a.o)*g,a.C,b.height,1,0,0,a.S,a.F,1/g,!0,b.width,e.padding,!!e.Bc,!!e.Cc])}
function pl(a,b,c,d){var e=a.b,f=a.j,g=a.g,h=a.wa;e&&(h in a.Qa||(a.Qa[h]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,ka:e.ka}));var k=a.i;a.i in a.u||(a.u[a.i]={font:f.font,textAlign:f.textAlign||"center",scale:f.scale});var l=a.v;g&&(l in a.B||(a.B[l]={fillStyle:g.fillStyle}));var n=a.ja;g=Tk[f.textBaseline];var p=a.o*n,q=a.ya,r=f.font,v=f.scale;e=e?e.lineWidth*v/2:0;var w=a.ua[r];w||(a.ua[r]=w={});
a.instructions.push([5,b,c,g,d,f.overflow,l,f.Uc,function(a){var b=w[a];b||(b=w[a]=id(r,a));return b*v*n},p,h,e*n,q,k,1]);a.c.push([5,b,c,g,d,f.overflow,l,f.Uc,function(a){var b=w[a];b||(b=w[a]=id(r,a));return b*v},p,h,e,q,k,1/n])}
ol.prototype.zb=function(a,b){var c,d;if(a){this.C=b;(d=a.oa())?(b=this.g,b||(b=this.g={}),b.fillStyle=Gc(d.va()||Xc)):b=this.g=null;if(c=a.sa()){d=this.b;d||(d=this.b={});var e=c.g,f=c.j,g=c.c,h=c.o;d.lineCap=c.f||"round";d.ka=e?e.slice():Yc;d.lineDashOffset=void 0===f?0:f;d.lineJoin=c.i||"round";d.lineWidth=void 0===g?1:g;d.miterLimit=void 0===h?10:h;d.strokeStyle=Gc(c.va()||Zc)}else d=this.b=null;c=this.j;e=a.c||"10px sans-serif";fd(e);f=a.b;c.overflow=a.B;c.font=e;c.Uc=a.v;c.placement=a.C;c.textAlign=
a.j;c.textBaseline=a.o||"middle";c.Bc=a.K;c.Cc=a.S;c.padding=a.F||$c;c.scale=void 0===f?1:f;e=a.g;f=a.f;g=a.u;h=a.i;this.ya=a.Da()||"";this.K=void 0===e?0:e;this.o=void 0===f?0:f;this.S=void 0===g?!1:g;this.F=void 0===h?0:h;this.wa=d?("string"==typeof d.strokeStyle?d.strokeStyle:x(d.strokeStyle))+d.lineCap+d.lineDashOffset+"|"+d.lineWidth+d.lineJoin+d.miterLimit+"["+d.ka.join()+"]":"";this.i=c.font+c.scale+(c.textAlign||"?");this.v=b?"string"==typeof b.fillStyle?b.fillStyle:"|"+x(b.fillStyle):""}else this.ya=
""};function rl(a,b,c,d,e,f,g){this.b=f;this.f=null;this.C=a;this.g=b;this.u=e;this.v=d;this.B=c;this.j=g;this.c={};this.i=Hc(1,1);this.o=sc()}u(rl,Rk);var sl={0:[[!0]]};function tl(a,b,c){var d,e=Math.floor(a.length/2);if(b>=e)for(d=e;d<b;d++)a[d][c]=!0;else if(b<e)for(d=b+1;d<e;d++)a[d][c]=!0}
function ul(a){if(void 0!==sl[a])return sl[a];for(var b=2*a+1,c=Array(b),d=0;d<b;d++)c[d]=Array(b);b=a;for(var e=d=0;b>=d;)tl(c,a+b,a+d),tl(c,a+d,a+b),tl(c,a-d,a+b),tl(c,a-b,a+d),tl(c,a-b,a-d),tl(c,a-d,a-b),tl(c,a+d,a-b),tl(c,a+b,a-d),d++,e+=1+2*d,0<2*(e-b)+1&&(--b,e+=1-2*b);return sl[a]=c}function vl(a,b){var c=null;a.b&&(b?(c=a.f,c[4]++):(c=a.f=ab(),c.push(1)));return c}function wl(a){for(var b in a.c){var c=a.c[b],d;for(d in c)c[d].ye()}}
rl.prototype.Ra=function(a,b,c,d,e,f,g){d=Math.round(d);var h=2*d+1,k=xc(this.o,d+.5,d+.5,1/b,-1/b,-c,-a[0],-a[1]),l=this.i;l.canvas.width!==h||l.canvas.height!==h?(l.canvas.width=h,l.canvas.height=h):l.clearRect(0,0,h,h);if(void 0!==this.j){var n=ab();bb(n,a);cb(n,b*(this.j+d),n)}var p=ul(d),q;this.b&&(q=this.b.all().map(function(a){return a.value}));return xl(this,l,k,c,e,function(a){for(var b=l.getImageData(0,0,h,h).data,c=0;c<h;c++)for(var d=0;d<h;d++)if(p[c][d]&&0<b[4*(d*h+c)+3]){var e;q&&-1===
q.indexOf(a)||(e=f(a));if(e)return e;l.clearRect(0,0,h,h);return}},n,g)};function yl(a,b){var c=a.g;a=c[0];var d=c[1],e=c[2];c=c[3];a=[a,d,a,c,e,c,e,d];zb(a,0,8,2,b,a);return a}function zl(a,b,c){var d=void 0!==b?b.toString():"0";b=a.c[d];void 0===b&&(b={},a.c[d]=b);d=b[c];void 0===d&&(d=new Al[c](a.C,a.g,a.B,a.v,a.u,a.b),b[c]=d);return d}
rl.prototype.Sb=function(a,b,c,d,e,f){var g=Object.keys(this.c).map(Number);g.sort(Od);a.save();var h=yl(this,b);a.beginPath();a.moveTo(h[0],h[1]);a.lineTo(h[2],h[3]);a.lineTo(h[4],h[5]);a.lineTo(h[6],h[7]);a.clip();e=e?e:Sk;var k,l;h=0;for(k=g.length;h<k;++h){var n=g[h].toString();var p=this.c[n];var q=0;for(l=e.length;q<l;++q){var r=e[q];var v=p[r];void 0!==v&&(!f||"Image"!=r&&"Text"!=r?v.Sb(a,b,c,d):(r=f[n])?r.push(v,b.slice(0)):f[n]=[v,b.slice(0)])}}a.restore()};
function xl(a,b,c,d,e,f,g,h){var k=Object.keys(a.c).map(Number);k.sort(Od);var l,n;for(l=k.length-1;0<=l;--l){var p=k[l].toString();var q=a.c[p];for(n=Sk.length-1;0<=n;--n){var r=Sk[n];var v=q[r];if(void 0!==v)if(!h||"Image"!=r&&"Text"!=r){r=b;var w=c,C=e,G=f,I=g;v.W=d;if(v=el(v,r,w,C,v.c,G,I))return v}else(r=h[p])?r.push(v,c.slice(0)):h[p]=[v,c.slice(0)]}}}var Al={Circle:ll,Default:Uk,Image:il,LineString:jl,Polygon:ll,Text:ol};function Bl(a,b){return x(a)-x(b)}function Cl(a,b){a=.5*a/b;return a*a}function Dl(a,b,c,d,e,f){var g=!1,h;if(h=c.Z()){var k=h.ze();2==k||3==k?h.wk(e,f):(0==k&&h.load(),h.Wi(e,f),g=!0)}if(e=(0,c.cb)(b))if(d=e.ng(d),c.kg())El(a,d,c,b);else(0,Fl[d.getType()])(a,d,c,b);return g}function El(a,b,c,d){if("GeometryCollection"==b.getType()){b=Gl(b.b);for(var e=0,f=b.length;e<f;++e)El(a,b[e],c,d)}else zl(a,c.getZIndex(),"Default").Wh(b,d,c.kg())}
var Fl={Point:function(a,b,c,d){var e=c.Z();if(e){if(2!=e.ze())return;var f=zl(a,c.getZIndex(),"Image");f.Bd(e,vl(a,!1));f.drawPoint(b,d)}if(f=c.Da())c=zl(a,c.getZIndex(),"Text"),c.zb(f,vl(a,!!e)),c.drawText(b,d)},LineString:function(a,b,c,d){var e=c.sa();if(e){var f=zl(a,c.getZIndex(),"LineString");f.Fb(null,e);f.Df(b,d)}if(e=c.Da())c=zl(a,c.getZIndex(),"Text"),c.zb(e,vl(a,!1)),c.drawText(b,d)},Polygon:function(a,b,c,d){var e=c.oa(),f=c.sa();if(e||f){var g=zl(a,c.getZIndex(),"Polygon");g.Fb(e,f);
g.Hf(b,d)}if(e=c.Da())c=zl(a,c.getZIndex(),"Text"),c.zb(e,vl(a,!1)),c.drawText(b,d)},MultiPoint:function(a,b,c,d){var e=c.Z();if(e){if(2!=e.ze())return;var f=zl(a,c.getZIndex(),"Image");f.Bd(e,vl(a,!1));f.Ff(b,d)}if(f=c.Da())c=zl(a,c.getZIndex(),"Text"),c.zb(f,vl(a,!!e)),c.drawText(b,d)},MultiLineString:function(a,b,c,d){var e=c.sa();if(e){var f=zl(a,c.getZIndex(),"LineString");f.Fb(null,e);f.Ef(b,d)}if(e=c.Da())c=zl(a,c.getZIndex(),"Text"),c.zb(e,vl(a,!1)),c.drawText(b,d)},MultiPolygon:function(a,
b,c,d){var e=c.oa(),f=c.sa();if(f||e){var g=zl(a,c.getZIndex(),"Polygon");g.Fb(e,f);g.Gf(b,d)}if(e=c.Da())c=zl(a,c.getZIndex(),"Text"),c.zb(e,vl(a,!1)),c.drawText(b,d)},GeometryCollection:function(a,b,c,d){b=b.b;var e;var f=0;for(e=b.length;f<e;++f)(0,Fl[b[f].getType()])(a,b[f],c,d)},Circle:function(a,b,c,d){var e=c.oa(),f=c.sa();if(e||f){var g=zl(a,c.getZIndex(),"Circle");g.Fb(e,f);g.Cf(b,d)}if(e=c.Da())c=zl(a,c.getZIndex(),"Text"),c.zb(e,vl(a,!1)),c.drawText(b,d)}};function Hl(a){Gf.call(this,a);this.j=a.v?Ke.mc(9):null;this.f=!1;this.v=-1;this.C=NaN;this.o=ab();this.b=this.B=null;this.i=!0;this.context=Hc();D(ad,"clear",this.xj,this)}u(Hl,Gf);Hl.handles=function(a,b){return"canvas"===a&&"VECTOR"===b.getType()};Hl.create=function(a,b){return new Hl(b)};m=Hl.prototype;m.Ba=function(){La(ad,"clear",this.xj,this);Gf.prototype.Ba.call(this)};
m.rf=function(a,b,c){var d=a.extent,e=a.ja,f=b.yg?a.Se:{},g=a.da,h=g.projection,k=g.rotation,l=h.I(),n=M(this.la()),p=Jf(this,a,0);If(this,"precompose",c,a,p);var q=b.extent;(g=void 0!==q)&&Hf(c,a,q);var r=this.b;if(r&&!Da(r.c)){this.j&&this.j.clear();var v=this.la(),w=q=0,C=1!==b.opacity;v=Sa(v,"render");if(C||v){var G=c.canvas.width;var I=c.canvas.height;if(k){var J=Math.round(Math.sqrt(G*G+I*I));q=(J-G)/2;w=(J-I)/2;G=I=J}this.context.canvas.width=G;this.context.canvas.height=I;G=this.context}else G=
c;I=G.globalAlpha;C||(G.globalAlpha=b.opacity);G!=c&&G.translate(q,w);J=a.size[0]*e;e*=a.size[1];jd(G,-k,J/2,e/2);r.Sb(G,p,k,f);if(n.B&&h.f&&!fb(l,d)){h=d[0];n=rb(l);for(var E=0;h<l[0];)--E,p=n*E,p=Jf(this,a,p),r.Sb(G,p,k,f),h+=n;E=0;for(h=d[2];h>l[2];)++E,p=n*E,p=Jf(this,a,p),r.Sb(G,p,k,f),h-=n;p=Jf(this,a,0)}jd(G,k,J/2,e/2);G!=c&&(v&&If(this,"render",G,a,p),C?(d=c.globalAlpha,c.globalAlpha=b.opacity,c.drawImage(G.canvas,-q,-w),c.globalAlpha=d):c.drawImage(G.canvas,-q,-w),G.translate(-q,-w));C||
(G.globalAlpha=I)}g&&c.restore();this.Be(c,a,b,p)};m.Ra=function(a,b,c,d,e){if(this.b){var f=b.da.resolution;b=b.da.rotation;var g=this.la(),h={};return this.b.Ra(a,f,b,c,{},function(a){var b=x(a).toString();if(!(b in h))return h[b]=!0,d.call(e,a,g)},null)}};m.xj=function(){var a=this.la();Ne(a)&&this.b&&a.c()};m.yj=function(){uf(this)};
m.Yc=function(a){var b=this.la(),c=M(b);Bf(a,c);var d=a.ac[0],e=a.ac[1],f=b.F,g=b.G;if(!this.f&&!f&&d||!g&&e)return!0;f=a.extent;var h=a.da;g=h.projection;var k=h.resolution,l=a.ja;d=b.g;var n=b.o;e=b.get("renderOrder");void 0===e&&(e=Bl);f=cb(f,n*k);n=h.projection.I();c.B&&h.projection.f&&!fb(n,a.extent)&&(a=Math.max(rb(f)/2,rb(n)),f[0]=n[0]-a,f[2]=n[2]+a);if(!this.f&&this.C==k&&this.v==d&&this.B==e&&fb(this.o,f))return this.i=!1,!0;this.b=null;this.f=!1;var p=new rl(.5*k/l,f,k,l,c.U,this.j,b.o);
Il(c,f,k,g);a=function(a){var c=a.Bb();if(c)var d=c.call(a,k);else(c=b.Bb())&&(d=c(a,k));if(d){if(d){c=!1;if(Array.isArray(d))for(var e=0,f=d.length;e<f;++e)c=Dl(p,a,d[e],Cl(k,l),this.yj,this)||c;else c=Dl(p,a,d,Cl(k,l),this.yj,this);a=c}else a=!1;this.f=this.f||a}}.bind(this);if(e){var q=[];Jl(c,f,function(a){q.push(a)},this);q.sort(e);c=0;for(g=q.length;c<g;++c)a(q[c])}else Jl(c,f,a,this);wl(p);this.C=k;this.v=d;this.B=e;this.o=f;this.b=p;return this.i=!0};function Kl(a){this.context=null;Pf.call(this,a);this.C=a.v?Ke.mc(9):null;this.F=!1;this.ua=sc();this.U="vector"==a.f?1:0;D(ad,"clear",this.zj,this)}u(Kl,Pf);Kl.handles=function(a,b){return"canvas"===a&&"VECTOR_TILE"===b.getType()};Kl.create=function(a,b){return new Kl(b)};var Ll={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"]},Ml={image:["Default"],hybrid:["Image","Text","Default"],vector:Sk};m=Kl.prototype;m.Ba=function(){La(ad,"clear",this.zj,this);Pf.prototype.Ba.call(this)};
m.Yc=function(a,b){var c=this.la(),d=c.g;this.N!=d&&(this.j.length=0,c=c.f,this.context||"vector"==c||(this.context=Hc()),this.context&&"vector"==c&&(this.context=null));this.N=d;return Pf.prototype.Yc.apply(this,arguments)};
m.If=function(a,b,c,d,e,f,g,h,k){var l=a,n=b,p=this.la(),q=n.ja;n=n.da.projection;var r=p.g,v=p.get("renderOrder")||null,w=l.j(p);if(w.dirty||w.Tg!=r||w.bk!=v){var C=M(p),G=C.Pa,I=C.vb(n),J=I.V(l.Ja[0]);I=Xf(I,l.f);for(var E=0,W=l.b.length;E<W;++E){var y=l.getTile(l.b[E]);if(3!=y.getState()){var B=Xf(G,y.Ja),K=vb(I,B),U=lb(B,K)?null:cb(K,p.o*J),ca=y.f(),Na=!1;mc(n,ca)||(Na=!0,y.Gb(n));w.dirty=!1;K=new rl(0,K,J,q,C.f(),this.C,p.o);var Ja=Cl(J,q),L=y.fc();v&&v!==w.bk&&L.sort(v);for(var Ka,Gd=0,mf=L.length;Gd<
mf;++Gd)if(Ka=L[Gd],Na&&("tile-pixels"==ca.g&&(ca.Jk=B,Nb(ca,y.I())),Ka.getGeometry().transform(ca,n)),!U||wb(U,Ka.getGeometry().I())){var ec=void 0,hd=Ka.Bb();hd?ec=hd.call(Ka,J):(hd=p.Bb())&&(ec=hd(Ka,J));if(ec){hd=Ja;var fi=K;if(ec){var Eg=!1;if(Array.isArray(ec))for(var Fg=0,vf=ec.length;Fg<vf;++Fg)Eg=Dl(fi,Ka,ec[Fg],hd,this.Aj,this)||Eg;else Eg=Dl(fi,Ka,ec,hd,this.Aj,this);Ka=Eg}else Ka=!1;this.F=this.F||Ka;w.dirty=w.dirty||Ka}}wl(K);for(var wf in K.c);y.j(p,l.Ja.toString(),K)}}w.Tg=r;w.bk=v}if(this.context){v=
b;p=this.la();wf=l.j(p);n=p.g;if((q=Ll[p.f])&&wf.Aq!==n)for(wf.Aq=n,w=l.f,G=w[0],wf=v.ja,J=M(p),C=J.vb(v.da.projection),n=C.V(G),r=l.i(p),v=Wf(J,G,v.da.projection),r.canvas.width=v[0],r.canvas.height=v[1],v=Xf(C,w),w=0,C=l.b.length;w<C;++w)G=l.getTile(l.b[w]),3!=G.getState()&&(J=wf/n,I=uc(this.ua,1,1,0,0),tc(I,uc(rc,J,-J,0,0)),tc(I,uc(rc,1,1,-v[0],-v[3])),G.b(p,l.Ja.toString()).Sb(r,I,0,{},q));Pf.prototype.If.apply(this,arguments)}};
m.Ra=function(a,b,c,d,e){var f=b.da.resolution,g=b.da.rotation;c=void 0==c?0:c;var h=this.la(),k={},l=this.j;b=M(h).vb(b.da.projection);var n;var p=0;for(n=l.length;p<n;++p){var q=l[p];var r=q.f;r=Xf(b,r,this.T);var v=cb(r,c*f,v);if(gb(v,a[0],a[1])){r=0;for(var w=q.b.length;r<w;++r){var C=q.getTile(q.b[r]);if(3!=C.getState()){C=C.b(h,q.Ja.toString());var G=G||C.Ra(a,f,g,c,{},function(a){var b=x(a).toString();if(!(b in k))return k[b]=!0,d.call(e,a,h)},null)}}}}return G};
m.zj=function(){var a=this.la();Ne(a)&&void 0!==this.N&&a.c()};m.Aj=function(){uf(this)};
m.Be=function(a,b,c){var d=this.la(),e=d.v?{}:null,f=M(d),g=d.f,h=Ml[g],k=b.ja,l=b.da.rotation,n=b.size;if(l){var p=Math.round(k*n[0]/2);var q=Math.round(k*n[1]/2);jd(a,-l,p,q)}e&&this.C.clear();k=this.j;f=f.vb(b.da.projection);n=[];for(var r=[],v=k.length-1;0<=v;--v){var w=k[v];if(5!=w.getState())for(var C=w.Ja,G=Xf(f,C)[0]-Xf(f,w.f)[0],I=void 0,J=0,E=w.b.length;J<E;++J){var W=w.getTile(w.b[J]);if(3!=W.getState()){var y=W.b(d,C.toString()),B;if(!(B="vector"==g))a:{B=void 0;for(B in y.c)for(var K=
y.c[B],U=0,ca=h.length;U<ca;++U)if(h[U]in K){B=!0;break a}B=!1}if(B){I||(I=Jf(this,b,G));W=W.Ja[0];B=yl(y,I);a.save();a.globalAlpha=c.opacity;K=0;for(U=n.length;K<U;++K)ca=n[K],W<r[K]&&(a.beginPath(),a.moveTo(B[0],B[1]),a.lineTo(B[2],B[3]),a.lineTo(B[4],B[5]),a.lineTo(B[6],B[7]),a.moveTo(ca[6],ca[7]),a.lineTo(ca[4],ca[5]),a.lineTo(ca[2],ca[3]),a.lineTo(ca[0],ca[1]),a.clip());y.Sb(a,I,l,{},h,e);a.restore();n.push(B);r.push(W)}}}}if(e)for(d=a,g=Object.keys(e).map(Number).sort(Od),h={},k=0,f=g.length;k<
f;++k)for(n=e[g[k].toString()],r=0,v=n.length;r<v;)w=n[r++],C=n[r++],w.Sb(d,C,l,h);l&&jd(a,l,p,q);Pf.prototype.Be.apply(this,arguments)};function Nl(){this.b=Ke.mc(void 0);this.c={}}m=Nl.prototype;m.insert=function(a,b){a={ea:a[0],ca:a[1],ga:a[2],fa:a[3],value:b};this.b.insert(a);this.c[x(b)]=a};m.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;d<e;d++){var f=a[d],g=b[d];f={ea:f[0],ca:f[1],ga:f[2],fa:f[3],value:g};c[d]=f;this.c[x(g)]=f}this.b.load(c)};m.remove=function(a){a=x(a);var b=this.c[a];delete this.c[a];return null!==this.b.remove(b)};
function Ol(a,b,c){var d=a.c[x(c)];lb([d.ea,d.ca,d.ga,d.fa],b)||(a.remove(c),a.insert(b,c))}function Pl(a){return a.b.all().map(function(a){return a.value})}function Ql(a,b){return a.b.search({ea:b[0],ca:b[1],ga:b[2],fa:b[3]}).map(function(a){return a.value})}m.forEach=function(a,b){return Rl(Pl(this),a,b)};function Sl(a,b,c,d){return Rl(Ql(a,b),c,d)}function Rl(a,b,c){for(var d,e=0,f=a.length;e<f&&!(d=b.call(c,a[e]));e++);return d}m.clear=function(){this.b.clear();this.c={}};
m.I=function(a){var b=this.b.data;return ib(b.ea,b.ca,b.ga,b.fa,a)};m.concat=function(a){this.b.load(a.b.all());for(var b in a.c)this.c[b|0]=a.c[b|0]};Ve("MAP_RENDERER",Pk);for(var Tl=[Lf,Pf,Hl,Kl],Ul=0,Vl=Tl.length;Ul<Vl;++Ul)Ve("LAYER_RENDERER",Tl[Ul]);function Wl(a){a=z({},a);if(!a.controls){var b=a,c={},d=new Ih;(void 0!==c.zoom?c.zoom:1)&&d.push(new Bj(c.Gs));(void 0!==c.rotate?c.rotate:1)&&d.push(new zj(c.Es));(void 0!==c.attribution?c.attribution:1)&&d.push(new xj(c.ss));b.controls=d}a.xa||(a.xa=Lk());oj.call(this,a)}u(Wl,oj);var Xl=document.implementation.createDocument("","",null);function Yl(a,b){return Xl.createElementNS(a,b)}function Zl(a){return $l(a,!1,[]).join("")}function $l(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)$l(a,b,c);return c}function am(a){return a instanceof Document}function bm(a){return a instanceof Node}
function cm(a){return(new DOMParser).parseFromString(a,"application/xml")}function dm(a,b){return function(c,d){c=a.call(b,c,d);void 0!==c&&Rd(d[d.length-1],c)}}function em(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&d[d.length-1].push(c)}}function fm(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&(d[d.length-1]=c)}}
function gm(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){c=c[c.length-1];b=b.localName;var e;b in c?e=c[b]:e=c[b]=[];e.push(d)}}}function O(a,b){return function(c,d){var e=a.call(this,c,d);void 0!==e&&(d[d.length-1][void 0!==b?b:c.localName]=e)}}function P(a,b){return function(c,d,e){a.call(void 0!==b?b:this,c,d,e);e[e.length-1].node.appendChild(c)}}
function hm(a){var b,c;return function(d,e,f){if(void 0===b){b={};var g={};g[d.localName]=a;b[d.namespaceURI]=g;c=im(d.localName)}jm(b,c,e,f)}}function im(a,b){return function(c,d,e){c=d[d.length-1].node;d=a;void 0===d&&(d=e);e=b;void 0===b&&(e=c.namespaceURI);return Yl(e,d)}}var km=im();function lm(a,b){for(var c=b.length,d=Array(c),e=0;e<c;++e)d[e]=a[b[e]];return d}function Q(a,b,c){c=void 0!==c?c:{};var d;var e=0;for(d=a.length;e<d;++e)c[a[e]]=b;return c}
function mm(a,b,c,d){for(b=b.firstElementChild;b;b=b.nextElementSibling){var e=a[b.namespaceURI];void 0!==e&&(e=e[b.localName],void 0!==e&&e.call(d,b,c))}}function R(a,b,c,d,e){d.push(a);mm(b,c,d,e);return d.pop()}function jm(a,b,c,d,e,f){for(var g=(void 0!==e?e:c).length,h,k,l=0;l<g;++l)h=c[l],void 0!==h&&(k=b.call(f,h,d,void 0!==e?e[l]:void 0),void 0!==k&&a[k.namespaceURI][k.localName].call(f,k,h,d))}function nm(a,b,c,d,e,f,g){e.push(a);jm(b,c,d,e,f,g);e.pop()};function om(a,b,c){return function(d,e,f){var g=new XMLHttpRequest;g.open("GET","function"===typeof a?a(d,e,f):a,!0);"arraybuffer"==b.getType()&&(g.responseType="arraybuffer");g.onload=function(){if(!g.status||200<=g.status&&300>g.status){var a=b.getType();if("json"==a||"text"==a)var d=g.responseText;else"xml"==a?(d=g.responseXML)||(d=cm(g.responseText)):"arraybuffer"==a&&(d=g.response);d&&c.call(this,b.gb(d,{kb:f}),b.Je(d),null)}}.bind(this);g.onerror=function(){}.bind(this);g.send()}}
function pm(a,b){return om(a,b,function(a){qm(this,a);this.c()})};function rm(){return[[-Infinity,-Infinity,Infinity,Infinity]]};function sm(a){a=a||{};og.call(this,{Va:a.Va,Ka:a.Ka,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.C=xa;this.T=a.format;this.U=void 0==a.Eg?!0:a.Eg;this.F=a.url;void 0!==a.no?this.C=a.no:void 0!==this.F&&(Aa(this.T,7),this.C=pm(this.F,this.T));this.W=void 0!==a.Xq?a.Xq:rm;var b=void 0!==a.Yb?a.Yb:!0;this.b=b?new Nl:null;this.G=new Nl;this.f={};this.i={};this.u={};this.v={};this.o=null;if(a.features instanceof Ih){var c=a.features;var d=c.b}else Array.isArray(a.features)&&
(d=a.features);b||void 0!==c||(c=new Ih(d));void 0!==d&&qm(this,d);void 0!==c&&tm(this,c)}u(sm,og);m=sm.prototype;m.na=function(a){var b=x(a).toString();if(um(this,b,a)){vm(this,b,a);var c=a.getGeometry();c?(b=c.I(),this.b&&this.b.insert(b,a)):this.f[b]=a;F(this,new wm("addfeature",a))}this.c()};function vm(a,b,c){a.v[b]=[D(c,"change",a.Cj,a),D(c,"propertychange",a.Cj,a)]}
function um(a,b,c){var d=!0,e=c.f;void 0!==e?e.toString()in a.i?d=!1:a.i[e.toString()]=c:(Aa(!(b in a.u),30),a.u[b]=c);return d}function qm(a,b){var c,d=[],e=[],f=[];var g=0;for(c=b.length;g<c;g++){var h=b[g];var k=x(h).toString();um(a,k,h)&&e.push(h)}g=0;for(c=e.length;g<c;g++)h=e[g],k=x(h).toString(),vm(a,k,h),(b=h.getGeometry())?(k=b.I(),d.push(k),f.push(h)):a.f[k]=h;a.b&&a.b.load(d,f);g=0;for(c=e.length;g<c;g++)F(a,new wm("addfeature",e[g]))}
function tm(a,b){var c=!1;D(a,"addfeature",function(a){c||(c=!0,b.push(a.feature),c=!1)});D(a,"removefeature",function(a){c||(c=!0,b.remove(a.feature),c=!1)});D(b,"add",function(a){c||(c=!0,this.na(a.element),c=!1)},a);D(b,"remove",function(a){c||(c=!0,this.ma(a.element),c=!1)},a);a.o=b}
m.clear=function(a){if(a){for(var b in this.v)this.v[b].forEach(A);this.o||(this.v={},this.i={},this.u={})}else if(this.b){this.b.forEach(this.Rg,this);for(var c in this.f)this.Rg(this.f[c])}this.o&&this.o.clear();this.b&&this.b.clear();this.G.clear();this.f={};F(this,new wm("clear"));this.c()};function Jl(a,b,c,d){a.b?Sl(a.b,b,c,d):a.o&&a.o.forEach(c,d)}m.fc=function(){if(this.o)var a=this.o.b;else this.b&&(a=Pl(this.b),Da(this.f)||Rd(a,Ca(this.f)));return a};m.Yf=function(a){return Ql(this.b,a)};
m.I=function(a){return this.b.I(a)};m.getUrl=function(){return this.F};m.Cj=function(a){a=a.target;var b=x(a).toString(),c=a.getGeometry();c?(c=c.I(),b in this.f?(delete this.f[b],this.b&&this.b.insert(c,a)):this.b&&Ol(this.b,c,a)):b in this.f||(this.b&&this.b.remove(a),this.f[b]=a);c=a.f;void 0!==c?(c=c.toString(),b in this.u?(delete this.u[b],this.i[c]=a):this.i[c]!==a&&(xm(this,a),this.i[c]=a)):b in this.u||(xm(this,a),this.u[b]=a);this.c();F(this,new wm("changefeature",a))};
function Il(a,b,c,d){var e=a.G;b=a.W(b,c);var f;var g=0;for(f=b.length;g<f;++g){var h=b[g];Sl(e,h,function(a){return fb(a.extent,h)})||(a.C.call(a,h,c,d),e.insert(h,{extent:h.slice()}))}}m.ma=function(a){var b=x(a).toString();b in this.f?delete this.f[b]:this.b&&this.b.remove(a);this.Rg(a);this.c()};m.Rg=function(a){var b=x(a).toString();this.v[b].forEach(A);delete this.v[b];var c=a.f;void 0!==c?delete this.i[c.toString()]:delete this.u[b];F(this,new wm("removefeature",a))};
function xm(a,b){for(var c in a.i)if(a.i[c]===b){delete a.i[c];break}}function wm(a,b){Pa.call(this,a);this.feature=b}u(wm,Pa);var S=angular.module("ngeo",["gettext","ui.date","floatThead"]);var ym=angular.module("gmf",[S.name,"gettext","ngAnimate","ngTouch","ngSanitize","tmh.dynamicLocale","ui.date","ui.slider"]);ym.config(["tmhDynamicLocaleProvider","angularLocaleScript",function(a,b){a.localeLocationPattern(b)}]);va("gmf.DATALAYERGROUP_NAME","data");va("gmf.EXTERNALLAYERGROUP_NAME","external");va("gmf.COORDINATES_LAYER_NAME","gmfCoordinatesLayerName");
var zm={Cr:"baselayer_ref",Jr:"eds_n",Kr:"eds_u",Lr:"rl_features",Nr:"map_crosshair",Pr:"map_tooltip",Qr:"map_x",Rr:"map_y",Sr:"map_zoom",js:"tree_groups",ps:"wfs_layer",qs:"wfs_ngroups",rs:"wfs_showFeatures"};(function(){function a(a){a.put("ngeo/editing/attributescomponent.html",'<fieldset ng-disabled="attrCtrl.disabled"><div class="form-group" ng-repeat="attribute in ::attrCtrl.attributes"><div ng-if="attribute.type !== \'geometry\'"><label ng-if="::attribute.type !== \'boolean\'" class="control-label">{{ ::attribute.name | translate }} <span class="text-muted">{{::attribute.required ? "*" : ""}}</span></label><div ng-switch="::attribute.type"><div ng-switch-when="boolean" class="checkbox"><label><input name="{{::attribute.name}}" ng-model="attrCtrl.properties[attribute.name]" ng-change="attrCtrl.handleInputChange(attribute.name);" type="checkbox"><span> {{ ::attribute.name | translate }} <span class="text-muted">{{::attribute.required ? "*" : ""}}</span></span></label></div><select name="{{::attribute.name}}" ng-required="attribute.required" ng-switch-when="select" ng-model="attrCtrl.properties[attribute.name]" ng-change="attrCtrl.handleInputChange(attribute.name);" class="form-control" type="text"><option ng-repeat="attribute in ::attribute.choices" value="{{ ::attribute }}"> {{ ::attribute }} </option></select><input name="{{::attribute.name}}" ng-required="attribute.required" ng-switch-when="date" ng-model="attrCtrl.properties[attribute.name]" ng-change="attrCtrl.handleInputChange(attribute.name);" ngeo-datetimepicker ngeo-datetimepicker-options="\'{&#34;timepicker&#34;: false, &#34;format&#34;: &#34;\' + attribute.format + \'&#34;, &#34;allowBlank&#34;: true, &#34;todayButton&#34;: false, &#34;mask&#34;: &#34;\' + attribute.mask + \'&#34;}\'" class="form-control" type="text"><input name="{{::attribute.name}}" id="time" ng-required="attribute.required" ng-switch-when="time" ng-model="attrCtrl.properties[attribute.name]" ng-change="attrCtrl.handleInputChange(attribute.name);" ngeo-datetimepicker ngeo-datetimepicker-options="\'{&#34;datepicker&#34;: false, &#34;format&#34;: &#34;\' + attribute.format + \'&#34;, &#34;todayButton&#34;: false, &#34;mask&#34;: &#34;\' + attribute.mask + \'&#34;, &#34;defaultTime&#34;: &#34;00:00&#34;}\'" class="form-control" type="text"><input name="{{::attribute.name}}" ng-required="attribute.required" ng-switch-when="datetime" ng-model="attrCtrl.properties[attribute.name]" ng-change="attrCtrl.handleInputChange(attribute.name);" ngeo-datetimepicker ngeo-datetimepicker-options="\'{&#34;scrollTime&#34;: false, &#34;format&#34;: &#34;\' + attribute.format + \'&#34;, &#34;allowBlank&#34;: true, &#34;todayButton&#34;: false, &#34;mask&#34;: &#34;\' + attribute.mask + \'&#34;, &#34;defaultTime&#34;: &#34;00:00&#34;}\'" class="form-control" type="text"><div ng-switch-when="number" ng-switch="::attribute.numType"><input name="{{::attribute.name}}" ng-required="attribute.required" ng-switch-when="integer" ng-model="attrCtrl.properties[attribute.name]" ng-change="attrCtrl.handleInputChange(attribute.name);" class="form-control" step="1" type="number"><input name="{{::attribute.name}}" ng-required="attribute.required" ng-switch-default ng-model="attrCtrl.properties[attribute.name]" ng-change="attrCtrl.handleInputChange(attribute.name);" class="form-control" type="number"></div><input name="{{::attribute.name}}" ng-required="attribute.required" ng-switch-default ng-model="attrCtrl.properties[attribute.name]" ng-change="attrCtrl.handleInputChange(attribute.name);" ng-maxlength="attribute.maxLength" class="form-control" type="text"><div ng-show="attrCtrl.form.$submitted || attrCtrl.form[attribute.name].$touched"><p class="text-danger" ng-show="attrCtrl.form[attribute.name].$error.required"> {{\'This field is required\' | translate}} </p></div></div></div></div></fieldset>');
a.put("gmf/drawing/featureStyleComponent.html",'<div ng-if="fsCtrl.feature && fsCtrl.type"><div class="form-group"><input ng-model="fsCtrl.getSetName" ng-model-options="{getterSetter: true}" ng-attr-placeholder="{{\'Name\' | translate}}" class="form-control"></div><div ng-if="fsCtrl.type !== \'Text\' && fsCtrl.type !== \'Circle\'" class="form-group"><input id="gmf-featurestyle-showlabel" type="checkbox" ng-model="fsCtrl.getSetShowLabel" ng-model-options="{getterSetter: true}"><label ng-switch="fsCtrl.type" for="gmf-featurestyle-showlabel" class="control-label"> {{\'Display label\' | translate}} </label></div><div ng-if="fsCtrl.type !== \'Text\'" class="form-group"><input id="gmf-featurestyle-showmeasure" type="checkbox" ng-model="fsCtrl.getSetShowMeasure" ng-model-options="{getterSetter: true}"><label ng-switch="fsCtrl.type" for="gmf-featurestyle-showmeasure" class="control-label"><span ng-switch-when="Circle"> {{\'Display azimuth and radius\' | translate}} </span><span ng-switch-when="Polygon"> {{\'Display surface\' | translate}} </span><span ng-switch-when="Rectangle"> {{\'Display surface\' | translate}} </span><span ng-switch-when="LineString"> {{\'Display length\' | translate}} </span><span ng-switch-when="Point"> {{\'Display coordinates\' | translate}} </span></label><em class="text-muted"> ({{ fsCtrl.measure }}) </em></div></div><div ng-if="fsCtrl.feature && fsCtrl.type" class="form-horizontal"><div class="form-group"><div ngeo-colorpicker ngeo-colorpicker-color="fsCtrl.color" class="col-md-12"></div></div><div ng-if="fsCtrl.type === \'Point\'" class="form-group form-group-nomargin"><label class="control-label col-md-4">{{\'Size\' | translate}}</label><div class="col-md-8"><input type="range" class="form-control" min="3" max="20" step="1" ng-model="fsCtrl.getSetSize" ng-model-options="{getterSetter: true}"></div></div><div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"><label class="control-label col-md-4">{{\'Size\' | translate}}</label><div class="col-md-8"><input type="range" class="form-control" min="8" max="30" step="1" ng-model="fsCtrl.getSetSize" ng-model-options="{getterSetter: true}"></div></div><div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'LineString\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"><label class="control-label col-md-4">{{\'Stroke\' | translate}}</label><div class="col-md-8"><input type="range" class="form-control" min="0.5" max="5" step="0.5" ng-model="fsCtrl.getSetStroke" ng-model-options="{getterSetter: true}"></div></div><div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"><label class="control-label col-md-4">{{\'Opacity\' | translate}}</label><div class="col-md-8"><input type="range" class="form-control" min="0" max="1" step="0.05" ng-model="fsCtrl.getSetOpacity" ng-model-options="{getterSetter: true}"></div></div><div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"><label class="control-label col-md-4">{{\'Angle\' | translate}}</label><div class="col-md-8"><input type="range" class="form-control" min="-180" max="180" step="22.5" ng-model="fsCtrl.getSetAngle" ng-model-options="{getterSetter: true}"></div></div></div>');
a.put("gmf/backgroundlayerselector/component.html",'<ul class="gmf-backgroundlayerselector"><li ng-repeat="layer in ctrl.bgLayers" ng-click="ctrl.setLayer(layer)" ng-class="{\'gmf-backgroundlayerselector-active\': ctrl.bgLayer == layer}"><img class="gmf-thumb" ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}"><span class="gmf-text">{{layer.get("label") | translate}}</span></li></ul>');a.put("gmf/map/mousepositionComponent.html",'<div class="btn-group dropup"><a type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="gmf-mouseposition-control-target"></span><span class="caret"></span></a><ul class="dropdown-menu dropdown-menu-right" role="menu"><li class="dropdown-header" translate>Coordinate systems</li><li ng-repeat="projitem in ::ctrl.projections"><a href ng-click="ctrl.setProjection(projitem)"><span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.projection == projitem}"></span> {{::projitem.label}} </a></li></ul></div>');
a.put("gmf/authentication/component.html",'<div ng-if="$ctrl.gmfUser.username"><div class="form-group"><span>{{\'Logged in as\' | translate}}</span><strong>{{ ::$ctrl.gmfUser.username }}</strong>. </div><form name="logoutForm" role="form" ng-submit="$ctrl.logout()" ng-controller="GmfAuthenticationController" ng-class="{\'has-error\': $ctrl.error}" ng-if="!$ctrl.changingPassword"><div class="form-group"><input type="submit" class="form-control btn btn-primary" value="{{\'Logout\' | translate}}"></div><span ng-show="$ctrl.error" class="gmf-authentication-error help-block"></span><div class="form-group"><input ng-show="$ctrl.allowPasswordChange" type="button" class="form-control btn btn-default" value="{{\'Change password\' | translate}}" ng-click="$ctrl.changingPassword = true"></div></form><form name="changePasswordForm" role="form" ng-submit="$ctrl.changePassword()" ng-controller="GmfAuthenticationController" ng-class="{\'has-error\': $ctrl.error}" ng-if="$ctrl.changingPassword"><div class="form-group"><input type="password" class="form-control" name="oldpassword" ng-model="$ctrl.oldPwdVal" ng-attr-placeholder="{{\'Old password\' | translate}}"></div><div class="form-group"><input type="password" class="form-control" name="newpassword" ng-model="$ctrl.newPwdVal" ng-attr-placeholder="{{\'New password\' | translate}}"></div><div class="form-group"><input type="password" class="form-control" name="newpasswordconfirm" ng-model="$ctrl.newPwdConfVal" ng-attr-placeholder="{{\'Confirm new password\' | translate}}"></div><div class="form-group"><input type="submit" class="form-control btn btn-primary" value="{{\'Change password\' | translate}}"></div><div class="form-group"><span ng-show="$ctrl.error" class="gmf-authentication-error help-block"></span><input type="button" class="form-control btn btn-default" value="{{\'Cancel\' | translate}}" ng-click="$ctrl.changePasswordReset()"></div></form></div><ngeo-modal ng-model="$ctrl.changePasswordModalShown"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="{{\'Close\' | translate}}"><span aria-hidden="true">&times;</span></button><h4 class="modal-title"> {{\'Password Changed\' | translate}} </h4></div><div class="modal-body"> {{\'Your password has succesfully been changed.\' | translate}} </div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">{{\'OK\' | translate}}</button></div></ngeo-modal><div ng-if="!$ctrl.gmfUser.username"><form name="loginForm" role="form" ng-submit="$ctrl.login()" ng-controller="GmfAuthenticationController" ng-class="{\'has-error\': $ctrl.error}"><div class="form-group"><input type="text" class="form-control" name="login" ng-model="$ctrl.loginVal" ng-attr-placeholder="{{\'Username\' | translate}}"></div><div class="form-group"><input type="password" class="form-control" name="password" ng-model="$ctrl.pwdVal" ng-attr-placeholder="{{\'Password\' | translate}}"></div><div class="form-group"><input type="submit" class="form-control btn btn-primary" value="{{\'Connect\' | translate}}"></div><span ng-show="$ctrl.error" class="gmf-authentication-error help-block"></span><div ng-show="authCtrl.allowPasswordReset" class="form-group"><a ng-click="$ctrl.resetPassword()" href>{{\'Password forgotten?\' | translate}}</a></div></form></div><ngeo-modal ng-model="$ctrl.resetPasswordModalShown"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="{{\'Close\' | translate}}"><span aria-hidden="true">&times;</span></button><h4 class="modal-title"> {{\'Password forgotten?\' | translate}} </h4></div><div class="modal-body" translate> A new password has just been sent to you by e-mail. </div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">{{\'OK\' | translate}}</button></div></ngeo-modal>');
a.put("ngeo/misc/datepickerComponent.html",'<div class="ngeo-datepicker"><form name="dateForm" class="ngeo-datepicker-form" novalidate><div ng-if="::datepickerCtrl.time.widget === \'datepicker\'"><div class="ngeo-datepicker-start-date"><span ng-if="::datepickerCtrl.time.mode === \'range\'" translate>From:</span><span ng-if="::datepickerCtrl.time.mode !== \'range\'" translate>Date:</span><input name="sdate" ui-date="datepickerCtrl.sdateOptions" ng-model="datepickerCtrl.sdate" required></div><div class="ngeo-datepicker-end-date" ng-if="::datepickerCtrl.time.mode === \'range\'"><span translate>To:</span><input name="edate" ui-date="datepickerCtrl.edateOptions" ng-model="datepickerCtrl.edate" required></div></div></form></div>');
a.put("gmf/query/windowComponent.html",'<div class="gmf-displayquerywindow" ng-class="{\'desktop\': ctrl.desktop, \'mobile\': !ctrl.desktop}" ng-show="ctrl.open" ngeo-swipe-up="ctrl.collapsed = false" ngeo-swipe-down="ctrl.collapsed = true" ngeo-swipe-disable-mouse ng-swipe-disable-mouse ng-swipe-left="ctrl.next()" ng-swipe-right="ctrl.previous()"><button class="collapse-button" type="button" ng-show="::!ctrl.desktop" ng-click="ctrl.collapsed = !ctrl.collapsed" ng-class="[ctrl.collapsed ? \'collapse-button-up\' : \'collapse-button-down\']"></button><div class="container"><button type="button" class="btn fa-close close" ng-click="ctrl.close()"></button><div class="animation-container" ng-class="[ctrl.collapsed ? \'\' : \'animation-container-detailed\', ctrl.isNext ? \'next\' : \'previous\']"><div ng-animate-swap="ctrl.animate" class="slide-animation gmf-animatable"><div class="header"><p class="title">{{ctrl.source.label | translate}}</p><p class="subtitle">{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p></div><div class="details"><table><tr ng-repeat="(key, value) in ctrl.getFeatureValues()" ng-if="value !== undefined"><td class="details-key" ng-bind-html="key | translate | ngeoTrustHtml"></td><td class="details-value" ng-bind-html="value | ngeoTrustHtml"></td></tr></table></div></div></div><div class="navigate"><div class="placeholder"><button type="button" class="previous btn" ng-disabled="ctrl.isFirst()" ng-show="ctrl.getResultLength() > 1" ng-click="ctrl.previous()"><span ng-show="::ctrl.desktop">{{\'Prev.\' | translate}}</span></button></div><div class="results"><span ng-show="::!ctrl.desktop">{{\'Result\' | translate}}</span><span>{{ctrl.currentResult + 1}}</span><span>/</span><span>{{ctrl.getResultLength()}}</span><div ng-show="::ctrl.desktop" class="dropup"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="fa fa-filter"></span><span class="fa fa-caret-up"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu"><li><a href="#" ng-click="ctrl.setSelectedSource(null)"><i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === null}"></i><span>{{\'All layers\' | translate}} ({{ctrl.ngeoQueryResult.total}})</span></a></li><li role="separator" class="divider"></li><li ng-repeat-start="source in ctrl.ngeoQueryResult.sources | filter: ctrl.sourcesFilter" ng-repeat-end ng-class="{\'disabled\': source.features.length <= 0}"><a href="#" ng-click="ctrl.setSelectedSource(source)"><i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === source}"></i><span>{{source.label | translate}} ({{source.features.length}})</span></a></li></ul></div></div><div class="placeholder"><button type="button" class="next btn" ng-disabled="ctrl.isLast()" ng-show="ctrl.getResultLength() > 1" ng-click="ctrl.next()"><span ng-show="::ctrl.desktop">{{\'Next\' | translate}}</span></button></div></div></div></div>');
a.put("gmf/import/wmsCapabilityLayertreeComponent.html",'<ul><li ng-repeat="layer in ::$ctrl.layer.Layer"><div class="gmf-wmscapabilitylayertreenode-header"><span class="gmf-wmscapabilitylayertreenode-popover-container" ng-if="::(layer.Name !== undefined || layer.Abstract !== undefined)" ngeo-popover ngeo-popover-dismiss=".content" ngeo-popover-placement="left"><span ngeo-popover-anchor class="fa fa-cog gmf-wmscapabilitylayertreenode-actions"></span><div class="gmf-wmscapabilitylayertreenode-popover-content" ngeo-popover-content><ul><li ng-if="::(layer.Name !== undefined)"><i class="fa fa-plus fa-fw"></i><a href ng-click="$ctrl.createAndAddDataSource(layer); popoverCtrl.dismissPopover()"><span translate>Add layer</span></a></li><li ng-if="::(layer.Abstract !== undefined)"><i class="fa fa-th-list fa-fw"></i><a aria-expanded="false" data-toggle="collapse" href="#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}" ng-click="popoverCtrl.dismissPopover()"><span translate>Open/Close description</span></a></li></ul></div></span><a aria-expanded="false" class="fa gmf-wmscapabilitylayertreenode-expand-node fa-fw" data-toggle="collapse" href="#gmf-wmscapabilitylayertreenode-children-{{::$ctrl.getUid(layer)}}" ng-if="::(layer.Layer !== undefined && layer.Layer.length)"></a><span ng-if="::(layer.Layer !== undefined && layer.Layer.length)" class="fa fa-fw gmf-wmscapabilitylayertreenode-group"></span><a class="fa fa-circle-thin gmf-wmscapabilitylayertreenode-no-icon fa-fw " ng-if="::(layer.Layer === undefined || layer.Layer.length === 0)"></a><span class="gmf-wmscapabilitylayertreenode-title">{{ ::layer.Title }}</span><div class="collapse gmf-wmscapabilitylayertreenode-description" id="gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}" ng-if="::(layer.Abstract !== undefined)"><a aria-expanded="false" class="gmf-wmscapabilitylayertreenode-description-toggle" data-toggle="collapse" href="#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}"><span translate>Hide description</span></a><span class="gmf-wmscapabilitylayertreenode-description-content">{{ ::layer.Abstract }}</span></div></div><gmf-wmscapabilitylayertreenode class="collapse" id="gmf-wmscapabilitylayertreenode-children-{{::$ctrl.getUid(layer)}}" capabilities="::$ctrl.capabilities" layer="::layer" ng-if="::(layer.Layer !== undefined)"></gmf-wmscapabilitylayertreenode></li></ul>');
a.put("ngeo/layertree/component.html",'<span ng-if="::!layertreeCtrl.isRoot">{{::layertreeCtrl.node.name}}</span><input type="checkbox" ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model="layertreeCtrl.getSetActive" ng-model-options="{getterSetter: true}"><ul ng-if="::layertreeCtrl.node.children"><li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree="::node" ngeo-layertree-notroot ngeo-layertree-map="layertreeCtrl.map" ngeo-layertree-nodelayerexpr="layertreeCtrl.nodelayerExpr" ngeo-layertree-listenersexpr="layertreeCtrl.listenersExpr"></li></ul>');
a.put("ngeo/message/displaywindowComponent.html",'<div class="ngeo-displaywindow" ng-show="$ctrl.open" ng-style="$ctrl.style"><div class="container"><button type="button" class="btn fa-close close" ng-click="$ctrl.close()"></button><div class="animation-container"><div class="slide-animation "><div class="header" ng-if="$ctrl.title !== null"><p class="title">{{ $ctrl.title }}</p></div><div class="details" ng-if="$ctrl.content !== null" ng-bind-html="$ctrl.content"></div><div class="details" ng-if="$ctrl.url !== null"><iframe frameborder="0" type="text/html" ng-src="{{ $ctrl.urlTrusted }}"></iframe></div></div></div></div></div>');
a.put("ngeo/offline/component.html",'<div class="main-button"><span ng-if="!$ctrl.hasData()"><div class="no-data" ng-click="$ctrl.toggleViewExtentSelection()"></div></span><span ng-if="$ctrl.hasData()"><div class="with-data" ng-click="$ctrl.showMenu()"></div></span></div><div ng-if="$ctrl.selectingExtent && !$ctrl.networkStatus.isDisconnected()" class="validate-extent btn btn-primary"><div ng-if="!$ctrl.downloading" ng-click="$ctrl.computeSizeAndDisplayAlertLoadData()" translate>Save map</div><div ng-if="$ctrl.downloading" ng-click="$ctrl.askAbortDownload()" translate>Abort</div></div><div ng-if="$ctrl.downloading" class="in-progress"><div>{{$ctrl.progressPercents}}%</div></div><ngeo-modal ng-model="$ctrl.menuDisplayed"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="{{\'Close\' | translate}}"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" translate>Offline map</h4></div><div class="modal-body"><div ng-if="$ctrl.hasData()"><button type="button" class="extent-zoom btn btn-default" ng-if="!$ctrl.offlineMode.isEnabled()" ng-click="$ctrl.activateOfflineMode()" translate>Activate offline mode </button><button type="button" class="extent-zoom btn btn-default" ng-if="$ctrl.offlineMode.isEnabled() && !$ctrl.networkStatus.isDisconnected()" ng-click="$ctrl.deactivateOfflineMode()" translate>Deactivate offline mode </button><button type="button" class="extent-show btn btn-default" ng-if="$ctrl.offlineMode.isEnabled()" ng-click="$ctrl.toggleExtentVisibility()"><span ng-if="$ctrl.isExtentVisible()" translate>Hide extent</span><span ng-if="!$ctrl.isExtentVisible()" translate>Show extent</span></button><button type="button" class="delete btn btn-default" ng-if="!$ctrl.networkStatus.isDisconnected()" ng-click="$ctrl.displayAlertDestroyData = true" translate>Delete data </button></div><div ng-if="!$ctrl.hasData() && !$ctrl.networkStatus.isDisconnected()"><button type="button" class="new-data btn btn-default" ng-click="$ctrl.toggleViewExtentSelection()" translate>Save new map </button></div></div></ngeo-modal><ngeo-modal ng-model="$ctrl.displayAlertLoadData"><div class="modal-header"><h4 class="modal-title" translate>Warning</h4></div><div class="modal-body"><p translate>~{{$ctrl.estimatedLoadDataSize}}MB of maps will be downloaded (until scale 1:25\'000) - Don\'t lock your device or navigate away from this site during the download process. Deactivate "private" mode of your browser.</p><button type="button" class="validate btn btn-primary" data-dismiss="modal" ng-click="$ctrl.validateExtent()" translate>Ok </button><button type="button" class="delete btn btn-default" data-dismiss="modal" translate>Cancel </button></div></ngeo-modal><ngeo-modal ng-model="$ctrl.displayAlertNoLayer"><div class="modal-header"><h4 class="modal-title" translate>Warning</h4></div><div class="modal-body"><p translate>No maps selected for saving.</p><button type="button" class="delete btn btn-default" data-dismiss="modal" translate>Ok </button></div></ngeo-modal><ngeo-modal ng-model="$ctrl.displayAlertDestroyData"><div class="modal-header"><h4 class="modal-title" translate>Warning</h4></div><div class="modal-body"><p translate>Do you really want to remove your data ?</p><button type="button" class="validate btn btn-primary" data-dismiss="modal" ng-click="$ctrl.deleteData()" translate>Ok </button><button type="button" class="delete btn btn-default" data-dismiss="modal" translate>Cancel </button></div></ngeo-modal><ngeo-modal ng-model="$ctrl.displayAlertAbortDownload"><div class="modal-header"><h4 class="modal-title" translate>Warning</h4></div><div class="modal-body"><p translate>Do you really want to remove your data ?</p><button type="button" class="validate btn btn-primary" data-dismiss="modal" ng-click="$ctrl.abortDownload()" translate>Ok </button><button type="button" class="delete btn btn-default" data-dismiss="modal" ng-click="$ctrl.followDownloadProgression_()" translate>Cancel </button></div></ngeo-modal>');
a.put("ngeo/googlestreetview/component.html",'<div class="ngeo-googlestreetview-instructions" ng-if="$ctrl.location === null" translate> Click on a road on the map to start StreetView. </div><div class="ngeo-googlestreetview-nodata" ng-if="$ctrl.noDataAtLocation" translate> Street View data not found for this location. </div>');a.put("gmf/import/wmtsCapabilityLayertreeComponent.html",'<ul><li ng-repeat="layer in ::$ctrl.layers"><div class="gmf-wmscapabilitylayertreenode-header"><span class="gmf-wmscapabilitylayertreenode-popover-container" ngeo-popover ngeo-popover-dismiss=".content" ngeo-popover-placement="left"><span ngeo-popover-anchor class="fa fa-cog gmf-wmscapabilitylayertreenode-actions"></span><div class="gmf-wmscapabilitylayertreenode-popover-content" ngeo-popover-content><ul><li><i class="fa fa-plus fa-fw"></i><a href ng-click="$ctrl.createAndAddDataSource(layer); popoverCtrl.dismissPopover()"><span translate>Add layer</span></a></li><li ng-if="::(layer.Abstract !== undefined)"><i class="fa fa-th-list fa-fw"></i><a aria-expanded="false" data-toggle="collapse" href="#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}" ng-click="popoverCtrl.dismissPopover()"><span translate>Open/Close description</span></a></li></ul></div></span><a class="fa fa-circle-thin gmf-wmscapabilitylayertreenode-no-icon fa-fw"></a><span class="gmf-wmscapabilitylayertreenode-title">{{ ::layer.Title }}</span><div class="collapse gmf-wmscapabilitylayertreenode-description" id="gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}" ng-if="::(layer.Abstract !== undefined)"><a aria-expanded="false" class="gmf-wmscapabilitylayertreenode-description-toggle" data-toggle="collapse" href="#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}"><span translate>Hide description</span></a><span class="gmf-wmscapabilitylayertreenode-description-content">{{ ::layer.Abstract }}</span></div></div></li></ul>');
a.put("gmf/editing/editFeatureComponent.html",'<div><div ng-switch="efCtrl.feature"><a ng-switch-when="null" ng-if="efCtrl.geomType" href ngeo-btn ngeo-createfeature ngeo-createfeature-active="efCtrl.createActive" ngeo-createfeature-features="::efCtrl.features" ngeo-createfeature-geom-type="::efCtrl.geomType" ngeo-createfeature-map="::efCtrl.map" class="btn btn-default" ng-class="{active: efCtrl.createActive}" ng-model="efCtrl.createActive"><span ng-switch="::efCtrl.geomType"><span ng-switch-when="Point"><span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span><span ng-switch-when="MultiPoint"><span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span><span ng-switch-when="LineString"><span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span><span ng-switch-when="MultiLineString"><span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span><span ng-switch-when="Polygon"><span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span><span ng-switch-when="MultiPolygon"><span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span></span></a><div ng-switch-default><ngeo-modal ng-model="efCtrl.unsavedModificationsModalShown"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="{{\'Close\' | translate}}"><span aria-hidden="true">&times;</span></button><h4 class="modal-title"> {{\'Unsaved modifications!\' | translate}} </h4></div><div class="modal-body"> {{\'There are unsaved changes.\' | translate}} </div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" ng-click="efCtrl.continueWithoutSaving()"> {{\'Continue without saving\' | translate}} </button><button type="button" class="btn btn-primary" data-dismiss="modal"> {{\'Cancel\' | translate}} </button><button type="button" class="btn btn-default" data-dismiss="modal" ng-click="efCtrl.submit()"> {{\'Save\' | translate}} </button></div></ngeo-modal><form novalidate name="form" class="form gmf-editfeature-attributes-container" ng-if="efCtrl.attributes"><div class="row"><div class="col-sm-12"><a class="close" ng-click="efCtrl.cancel()" ng-disabled="efCtrl.pending" title="{{\'Cancel modifications\' | translate}}" href>&times;</a></div></div><ngeo-attributes ngeo-attributes-attributes="::efCtrl.attributes" ngeo-attributes-disabled="efCtrl.pending" ngeo-attributes-feature="::efCtrl.feature"></ngeo-attributes><input type="submit" value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-editfeature-btn-save" ng-click="form.$valid && efCtrl.save()" ng-disabled="!efCtrl.dirty || efCtrl.pending" title="{{\'Save modifications\' | translate}}"><a class="btn btn-sm btn-default gmf-editfeature-btn-cancel" ng-click="efCtrl.confirmCancel()" ng-disabled="efCtrl.pending" title="{{\'Cancel modifications\' | translate}}" href>{{\'Cancel\' | translate}}</a><button class="btn btn-sm btn-link gmf-editfeature-btn-delete" ng-click="efCtrl.delete()" ng-disabled="efCtrl.pending" ng-show="efCtrl.featureId" title="{{\'Delete this feature\' | translate}}"><span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button></form></div></div><ngeo-modal ng-model="efCtrl.showServerError"><div class="modal-header">{{\'Server error.\' | translate}}</div><div class="modal-body">{{$parent.efCtrl.serverErrorType}}<br> {{$parent.efCtrl.serverErrorMessage || (\'Unexpected server error.\' | translate)}}</div></ngeo-modal></div>');
a.put("gmf/filters/filterselectorcomponent.html",'<div class="form-group" ng-switch="$ctrl.filtrableDataSources.length"><span ng-switch-when="0" translate>No filtrable layer available!</span><select class="form-control" ng-disabled="$ctrl.aRuleIsActive" ng-switch-default ng-model="$ctrl.gmfDataSourceBeingFiltered.dataSource" ng-options="dataSource.name | translate for dataSource in $ctrl.filtrableDataSources"><option value translate>-- Layer to filter --</option></select><div ng-if="$ctrl.customRules && $ctrl.directedRules && $ctrl.readyDataSource"><hr class="gmf-filterselector-separator"><div class="dropdown gmf-filterselector-savedfilters"><a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: $ctrl.aRuleIsActive || $ctrl.gmfSavedFilters.currentDataSourceItems.length === 0}" type="button" data-toggle="dropdown" ng-disabled="$ctrl.aRuleIsActive || $ctrl.gmfSavedFilters.currentDataSourceItems.length === 0"><span translate>Saved</span><span class="caret"></span></a><ul class="dropdown-menu"><li ng-repeat="item in $ctrl.gmfSavedFilters.currentDataSourceItems"><a href ng-click="$ctrl.saveFilterLoadItem(item)"><span>{{::item.name}}</span></a></li><li role="separator" class="divider"></li><li><a href ng-click="$ctrl.saveFilterManage()"><span translate>Manage saved filters</span></a></li></ul></div><ngeo-filter a-rule-is-active="$ctrl.aRuleIsActive" custom-rules="$ctrl.customRules" datasource="$ctrl.readyDataSource" directed-rules="$ctrl.directedRules" feature-overlay="$ctrl.featureOverlay" map="$ctrl.map" tool-group="$ctrl.toolGroup"></ngeo-filter><div><a class="btn btn-link gmf-filterselector-savebtn" type="button" data-toggle="dropdown" ng-click="!$ctrl.aRuleIsActive && $ctrl.saveFilterShowModal()" ng-disabled="$ctrl.aRuleIsActive"><span class="fa fa-save"></span><span translate>Save</span></a></div></div><ngeo-modal ng-model="$ctrl.saveFilterSaveModalShown"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="{{\'Close\' | translate}}"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">{{\'Save filter\' | translate}}</h4></div><div class="modal-body"><p class="gmf-filterselector-savefilter-desc" translate> You can save the filter that you created to re-load it later. </p><input type="text" class="form-control" name="name" ng-model="$ctrl.saveFilterName" placeholder="{{\'Filter name\' | translate}}"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button><button type="button" ng-click="$ctrl.saveFilterSave()" ng-disabled="$ctrl.saveFilterName === \'\'" class="btn btn-primary">{{\'Save\' | translate}}</button></div></ngeo-modal><ngeo-modal ng-model="$ctrl.saveFilterManageModalShown"><div class="gmf-filterselector-managefilter-modal"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="{{\'Close\' | translate}}"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">{{\'Manage filters\' | translate}}</h4></div><div class="modal-body"><ul><li ng-repeat="item in $ctrl.gmfSavedFilters.currentDataSourceItems"><span>{{::item.name}}</span><a href ng-click="$ctrl.saveFilterRemoveItem(item)"> {{ \'Delete\' | translate }} </a><div class="gmf-eol"></div></li></ul></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">{{\'Close\' | translate}}</button></div></div></ngeo-modal></div>');
a.put("gmf/theme/selectorComponent.html",'<ul class="gmf-theme-selector"><li ng-repeat="theme in $ctrl.themes" ng-click="$ctrl.setTheme(theme)" ng-class="{\'gmf-theme-selector-active\': $ctrl.gmfThemeManager.getThemeName() == theme.name}"><img class="gmf-thumb" ng-src="{{::theme.icon}}"><span class="gmf-text">{{theme.name | translate}}</span></li></ul>');a.put("gmf/layertree/datasourceGroupTreeComponent.html",'<div class="gmf-layertree-group gmf-layertree-depth-1 {{$ctrl.group.visibilityState}}"><a data-toggle="collapse" href="#gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}}" aria-expanded="true" class="fa gmf-layertree-expand-node fa-fw"></a><a class="fa fa-fw gmf-layertree-state" href ng-click="$ctrl.toggle()"></a><a class="gmf-layertree-name" href ng-click="$ctrl.toggle()"><span>{{$ctrl.group.title | translate}}</span></a><span class="gmf-layertree-right-buttons"><a href ng-click="$ctrl.remove()"><span class="fa fa-trash"></span></a></span></div><ul id="gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}}" class="collapse in"><li class="gmf-layertree-node gmf-layertree-depth-2" ng-class="[dataSource.visible ? \'on\' : \'off\']" ng-repeat="dataSource in $ctrl.group.dataSources"><div class="gmf-layertree-leaf"><a href ng-click="$ctrl.toggleDataSource(dataSource)" class="gmf-layertree-layer-icon gmf-layertree-no-layer-icon"></a><a class="gmf-layertree-name" href ng-click="$ctrl.toggleDataSource(dataSource)"><span>{{dataSource.name | translate}}</span></a><span class="gmf-layertree-right-buttons"><a href ng-click="$ctrl.removeDataSource(dataSource)"><span class="fa fa-trash"></span></a></span></div></li></ul>');
a.put("gmf/permalink/shareComponent.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" translate>Share this map</h4></div><div class="modal-body"><form role="form" name="gmfShareForm" novalidate><div class="form-group"><label for="gmfShareInputShortLink" translate>Permalink</label><input type="text" class="form-control" id="gmfShareInputShortLink" onclick="this.select()" ng-model="$ctrl.shortLink" readonly="True"><p class="help-block" translate>Copy this link to share it.</p><p class="text-danger" ng-if="$ctrl.showLengthWarning"><span class="fa fa-exclamation-triangle"></span> {{\'You have a lot of drawn elements in this map. The above link may not be correctly supported by some browsers.\' | translate}} </p><p class="text-danger" ng-if="$ctrl.errorOnGetShortUrl"><span class="fa fa-exclamation"></span> {{\'Error, cannot get the shortened URL.\' | translate}} </p></div><hr><div class="gmf-share-email" ng-if="::$ctrl.enableEmail"><div class="form-group"><label for="gmfShareInputEmail" translate>Send this link to</label><input type="email" class="form-control" name="inputEmail" id="gmfShareInputEmail" placeholder="E-mail" ng-model="$ctrl.email" required><span ng-show="gmfShareForm.$submitted || gmfShareForm.inputEmail.$touched"><span class="text-danger" ng-show="gmfShareForm.inputEmail.$error.email || gmfShareForm.inputEmail.$error.required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> {{\'Invalid email.\' | translate}}</span></span></div><div class="form-group"><textarea class="form-control" ng-attr-placeholder="{{\'Message (optional)\' |\u00a0translate }}" ng-model="$ctrl.message"></textarea></div><span class="text-success" ng-if="$ctrl.successfullySent"><i class="fa fa-check" aria-hidden="true"></i> {{ \'Link successfully sent.\' | translate }} </span><span class="text-danger" ng-if="$ctrl.errorOnsend"><i class="fa fa-exclamation" aria-hidden="true"></i> {{ \'Error, the link has not been sent.\' | translate }} </span></div><div class="text-right"><button type="button" class="btn btn-default" data-dismiss="modal" translate>Close</button><button ng-if="::$ctrl.enableEmail" type="submit" class="btn btn-default btn-primary" ng-click="$ctrl.sendShortUrl()" ng-disabled="!gmfShareForm.$valid" translate>Send </button></div></form></div>');
a.put("gmf/import/importdatasourceComponent.html",'<div class="form-group"><select class="form-control" ng-model="$ctrl.mode" ng-options="mode | translate for mode in $ctrl.modes"></select></div><div><form name="idsl_form" novalidate ng-show="$ctrl.mode === \'Local\'"><div class="form-group"><div class="input-group input-group-sm"><input name="file" type="file" required><input class="form-control" placeholder="{{\'No file\' | translate}}" readonly type="text" value="{{$ctrl.fileNameAndSize}}" ng-click="$ctrl.browse()"><span class="input-group-btn"><button class="btn btn-default" type="button" ng-click="$ctrl.browse()" translate>Browse</button></span></div></div><div class="form-group"><button class="btn btn-sm btn-default form-control" title="{{\'Load a file from local\' | translate}}" type="submit" ng-click="idsl_form.$valid && $ctrl.load()" ng-disabled="$ctrl.file === undefined"><span>{{\'Load local file\' | translate}}</span></button></div></form><form name="idsc_form" novalidate ng-show="$ctrl.mode === \'Online\'"><div class="form-group gmf-importdatasource-url-form-group"><input autocomplete="off" class="form-control" name="url" placeholder="{{\'Choose or enter online resource URL\' | translate}}" required type="url" ng-disabled="$ctrl.pending" ng-model="$ctrl.url"></div><div class="form-group"><button class="btn btn-sm btn-default form-control gmf-importdatasource-connect-btn" title="{{\'Connect to online resource\' | translate}}" type="submit" ng-click="idsc_form.$valid && $ctrl.connect()" ng-disabled="idsc_form.$invalid || $ctrl.pending"><span ng-if="$ctrl.pending">{{\'Connecting, please wait...\' | translate}}</span><span ng-if="!$ctrl.pending && $ctrl.hasError">{{\'Failed to connect\' | translate}}</span><span ng-if="!$ctrl.pending && !$ctrl.hasError">{{\'Connect\' | translate}}</span></button></div></form></div><div class="gmf-importdatasource-layers" ng-if="$ctrl.wmsCapabilities !== null || $ctrl.wmtsCapabilities !== null"><hr><gmf-wmscapabilitylayertreenode capabilities="::$ctrl.wmsCapabilities" layer="::$ctrl.wmsCapabilities.Capability.Layer" url="::$ctrl.url" ng-if="$ctrl.wmsCapabilities !== null"></gmf-wmscapabilitylayertreenode><gmf-wmtscapabilitylayertree capabilities="::$ctrl.wmtsCapabilities" layers="::$ctrl.wmtsCapabilities.Contents.Layer" url="::$ctrl.url" ng-if="$ctrl.wmtsCapabilities !== null"></gmf-wmtscapabilitylayertree></div>');
a.put("ngeo/message/popupcomponent.html",'<h4 class="popover-title ngeo-popup-title"><span ng-bind-html="title"></span><button type="button" class="close" ng-click="open = false"> &times;</button></h4><div class="popover-content" ng-bind-html="content"></div>');a.put("gmf/print/component.html",'<div class="gmf-print"><div ng-show="$ctrl.isState(\'CAPABILITIES_NOT_LOADED\') !== true && $ctrl.isState(\'ERROR_ON_GETCAPABILITIES\') !== true"><div class="gmf-print-layout-selector form-horizontal"><ng-transclude/></div><div ng-repeat="attribute in $ctrl.layoutInfo.simpleAttributes" class="gmf-print-layoutinfo form-group"><div ng-if="$ctrl.hiddenAttributeNames === undefined || $ctrl.hiddenAttributeNames.indexOf(attribute.name) < 0"><input ng-if="attribute.type === \'number\'" ng-model="attribute.value" class="form-control" type="number" ng-attr-placeholder="{{attribute.name | translate}}"><input ng-if="attribute.type === \'text\'" ng-model="attribute.value" class="form-control" type="text" ng-attr-placeholder="{{attribute.name | translate}}"><textarea ng-if="attribute.type === \'textarea\'" ng-model="attribute.value" class="form-control" row="3" ng-attr-placeholder="{{attribute.name | translate}}"></textarea><div ng-if="attribute.type === \'checkbox\'" class="checkbox"><label><input ng-model="attribute.value" type="checkbox"><span>{{attribute.name | translate}}</span></label></div></div></div><div ng-show="$ctrl.layoutInfo.legend !== undefined" class="gmf-print-legend checkbox"><label><input ng-model="$ctrl.layoutInfo.legend" type="checkbox"><span translate>Legend</span></label></div><div class="gmf-print-layout-selector form-horizontal"><div ng-show="$ctrl.layoutInfo.layouts.length !== 1" class="form-group"><label class="control-label col-md-5" translate>Layout</label><div class="col-md-7"><div class="btn-group btn-block"><button type="button" class="btn btn-default form-control" data-toggle="dropdown"><span>{{$ctrl.layoutInfo.layout | translate}}&nbsp;</span><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu dropdown-menu-right btn-block" role="menu"><li ng-repeat="layout in $ctrl.layoutInfo.layouts"><a ng-click="$ctrl.setLayout(layout)" href>{{layout | translate}}</a></li></ul></div></div></div><div ng-show="$ctrl.layoutInfo.scales.length !== 1" class="gmf-print-scale-selector form-group"><label class="control-label col-md-5" translate>Scale</label><div class="col-md-7"><div class="btn-group btn-block"><button type="button" class="btn btn-default form-control" data-toggle="dropdown" aria-expanded="false"><span>{{$ctrl.layoutInfo.scale | ngeoScalify}}&nbsp;</span><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu dropdown-menu-right btn-block" role="menu"><li ng-repeat="scale in $ctrl.layoutInfo.scales"><a ng-click="$ctrl.getSetScale(scale)" href>{{scale | ngeoScalify}}</a></li><span ng-if="$ctrl.scaleInput"><li class="dropdown-header" translate>Manual entry</li><li><div class="gmf-print-custom-scale"> 1 : <input class="gmf-print-custom-scale-input" type="number" min="1" ng-model="$ctrl.getSetScale" ng-model-options="{getterSetter: true}"></div></li></span></ul></div></div></div><div ng-show="$ctrl.layoutInfo.dpis.length !== 1" class="gmf-print-dpi-selector form-group"><label class="control-label col-md-3" translate>DPI</label><div class="col-md-5"><div class="btn-group btn-block"><button type="button" class="btn btn-default form-control" data-toggle="dropdown" aria-expanded="false"><span>{{$ctrl.layoutInfo.dpi}}&nbsp;</span><i class="fa fa-caret-down"></i></button><ul class="dropdown-menu dropdown-menu-right btn-block" role="menu"><li ng-repeat="dpi in $ctrl.layoutInfo.dpis"><a href ng-click="$ctrl.setDpi(dpi)">{{dpi}}</a></li></ul></div></div></div><div class="gmf-print-rotation-selector form-group"><label class="control-label col-md-3" translate>Rotation</label><div class="col-md-5"><input class="form-control" type="range" ng-model="$ctrl.getSetRotation" ng-model-options="{getterSetter: true}" min="-180" max="180" data-toggle="tooltip" title="{{\'You can also use Alt+Shift on the map\' | translate}}"></div><div class="col-md-4"><input class="form-control" type="number" ng-model="$ctrl.getSetRotation" ng-model-options="{getterSetter: true}"></div></div></div><div class="gmf-print-actions form-group pull-right"><span ng-show="$ctrl.isState(\'PRINTING\')"><i class="fa fa-refresh fa-spin"></i></span><a ng-show="$ctrl.isState(\'PRINTING\')" class="gmf-print-cancel btn btn-link" href ng-click="$ctrl.cancel()" translate>Abort</a><button ng-show="$ctrl.layoutInfo.formats.png" class="gmf-print-image btn btn-primary" ng-disabled="$ctrl.isState(\'PRINTING\')" ng-click="$ctrl.print(\'png\')" translate>Image</button><button ng-show="$ctrl.layoutInfo.formats.pdf" class="gmf-print-pdf btn btn-primary" ng-disabled="$ctrl.isState(\'PRINTING\')" ng-click="$ctrl.print(\'pdf\')" translate>PDF</button></div><div ng-show="$ctrl.isState(\'ERROR_ON_REPORT\')" class="gmf-print-error-report form-group pull-left text-danger"><p>{{\'Error during the print, please try again.\' | translate}}</p></div></div><div ng-show="$ctrl.isState(\'CAPABILITIES_NOT_LOADED\')" class="gmf-print-wait form-group pull-left"><p>{{\'Connecting to the print server, please wait.\' | translate}}</p></div><div ng-show="$ctrl.isState(\'ERROR_ON_GETCAPABILITIES\')" class="gmf-print-error-capabilities form-group pull-left text-danger"><p>{{\'The print server is unavailable. Please, try later.\' | translate}}</p></div></div>');
a.put("gmf/drawing/drawFeatureComponent.html",'<ngeo-drawfeature ngeo-btn-group class="btn-group" ngeo-drawfeature-active="efCtrl.drawActive" ngeo-drawfeature-map="efCtrl.map" ngeo-drawfeature-showmeasure="efCtrl.showMeasure"><a data-toggle="tooltip" title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-default ngeo-drawfeature-point" ng-class="{active: dfCtrl.drawPoint.active}" ng-model="dfCtrl.drawPoint.active"><span class="gmf-icon gmf-icon-point"></span></a><a data-toggle="tooltip" title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-default ngeo-drawfeature-linestring" ng-class="{active: dfCtrl.measureLength.active}" ng-model="dfCtrl.measureLength.active"><span class="gmf-icon gmf-icon-line"></span></a><a data-toggle="tooltip" title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model="dfCtrl.measureArea.active"><span class="gmf-icon gmf-icon-polygon"></span></a><a data-toggle="tooltip" title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model="dfCtrl.measureAzimut.active"><span class="gmf-icon gmf-icon-circle"></span></a><a data-toggle="tooltip" title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model="dfCtrl.drawRectangle.active"><span class="gmf-icon gmf-icon-rectangle"></span></a><a data-toggle="tooltip" title="{{\'Draw a text label on the map\' | translate}}" href ngeo-btn ngeo-drawtext class="btn btn-default ngeo-drawfeature-text" ng-class="{active: dfCtrl.drawText.active}" ng-model="dfCtrl.drawText.active"><span class="gmf-icon gmf-icon-text"></span></a></ngeo-drawfeature><div ng-switch="efCtrl.selectedFeature"><hr class="gmf-drawfeature-separator" ng-show="efCtrl.getFeaturesArray().length > 0"><div ng-switch-when="null"><div ng-show="efCtrl.getFeaturesArray().length > 0"><div class="ngeo-drawfeature-actionbuttons"><button type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngeo-exportfeatures ngeo-exportfeatures-features="efCtrl.features" class="btn btn-link btn-sm"><span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class="caret"></span></button><button ng-click="efCtrl.clearFeatures()" class="btn btn-link btn-xs"><span class="fa fa-trash"></span> {{\'Delete All\' | translate}} </button></div><div class="gmf-eol"></div><div class="gmf-drawfeature-featurelist list-group list-group-sm"><button role="button" class="list-group-item" ng-repeat="feature in efCtrl.getFeaturesArray()" ng-click="efCtrl.selectFeatureFromList(feature);"> {{ feature.get(efCtrl.nameProperty) }} </button></div></div></div><div ng-switch-default><button ng-click="efCtrl.selectedFeature = null;" class="btn btn-link btn-xs"><span class="fa fa-arrow-left"></span> {{\'List\' | translate}} </button><div class="ngeo-drawfeature-actionbuttons"><button type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngeo-exportfeatures ngeo-exportfeatures-features="efCtrl.selectedFeatures" class="btn btn-link btn-xs"><span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class="caret"></span></button><button ng-click="efCtrl.removeFeature(efCtrl.selectedFeature);" class="btn btn-link btn-xs"><span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button></div><div class="gmf-eol"></div><gmf-featurestyle gmf-featurestyle-feature="efCtrl.selectedFeature"></gmf-featurestyle></div></div>');
a.put("ngeo/filter/component.html",'<div class="dropdown"><a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: $ctrl.aRuleIsActive}" type="button" data-toggle="dropdown" ng-disabled="$ctrl.aRuleIsActive"><span class="fa fa-cog"></span><span class="caret"></span></a><ul class="dropdown-menu"><li class="ngeo-filter-condition-criteria-header" translate>Criteria taken into account</li><li ng-repeat="condition in ::$ctrl.conditions"><a href ng-click="$ctrl.setCondition(condition)"><span ng-class="{\'ngeo-filter-condition-criteria-active\': condition.value == $ctrl.datasource.filterCondition}" class="fa fa-check ngeo-filter-condition-criteria"></span><span>{{::condition.text | translate}}</span></a></li></ul></div><ngeo-rule ng-repeat="rule in $ctrl.directedRules" feature-overlay="::$ctrl.featureOverlay" class="ngeo-filter-rule-directed" map="$ctrl.map" rule="rule" tool-group="$ctrl.toolGroup"></ngeo-rule><hr class="ngeo-filter-separator-rules"><div ng-repeat="rule in $ctrl.customRules"><a class="btn btn-xs btn-link ngeo-filter-rule-custom-rm-btn" ng-click="!$ctrl.aRuleIsActive && $ctrl.removeCustomRule(rule)" ng-disabled="$ctrl.aRuleIsActive" href><span class="fa fa-remove"></span></a><ngeo-rule feature-overlay="::$ctrl.featureOverlay" class="ngeo-filter-rule-custom" map="$ctrl.map" rule="rule" tool-group="$ctrl.toolGroup"></ngeo-rule></div><div class="dropdown"><a class="btn btn-link dropdown-toggle" ng-class="{disabled: $ctrl.aRuleIsActive}" type="button" data-toggle="dropdown" ng-disabled="$ctrl.aRuleIsActive"><span translate>+ Add a new criteria</span><span class="caret"></span></a><ul class="dropdown-menu"><li ng-repeat="attribute in ::$ctrl.geometryAttributes"><a href ng-click="$ctrl.createAndAddCustomRule(attribute)"><span translate>Spatial filter</span></a></li><li role="presentation" class="divider"></li><li ng-repeat="attribute in ::$ctrl.otherAttributes"><a href ng-click="$ctrl.createAndAddCustomRule(attribute)"><span>{{::attribute.name | translate}}</span></a></li></ul></div><hr class="ngeo-filter-separator-criteria"><a class="btn btn-link" type="button" ng-click="!$ctrl.aRuleIsActive && $ctrl.apply()" ng-disabled="$ctrl.aRuleIsActive"><span class="fa fa-check"></span><span translate>Apply filter</span></a><a class="btn btn-link" type="button" ng-click="!$ctrl.aRuleIsActive && $ctrl.getData()" ng-disabled="$ctrl.aRuleIsActive"><span class="fa fa-chevron-right"></span><span translate>Get data</span></a>');
a.put("ngeo/map/scaleselector.html",'<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span ng-bind-html="scaleselectorCtrl.currentScale | ngeoScalify | ngeoTrustHtml"></span>&nbsp;<i class="caret"></i></button><ul class="dropdown-menu btn-block" role="menu"><li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"><a href ng-click="scaleselectorCtrl.changeZoom(zoomLevel)" ng-bind-html="scaleselectorCtrl.getScale(zoomLevel) | ngeoScalify | ngeoTrustHtml"></a></li></ul></div>');
a.put("gmf/profile/component.html",'<div class="gmf-profile-container panel" ng-show="ctrl.active"><div class="ngeo-profile" ng-show="!ctrl.isErrored" ngeo-profile="ctrl.profileData" ngeo-profile-highlight="ctrl.profileHighlight" ngeo-profile-options="::ctrl.profileOptions"></div><ul class="gmf-profile-legend" ng-show="!ctrl.isErrored"><li ng-repeat="name in ::ctrl.getLayersNames()"><i class="fa fa-minus" style="color:{{::ctrl.getColor(name)}};"></i> &nbsp;{{name | translate}}&nbsp;{{ctrl.currentPoint.elevations[name]}}&nbsp;{{ctrl.currentPoint.yUnits}} </li></ul><div class="gmf-profile-export btn-group dropup" ng-show="!ctrl.isErrored"><a class="dropdown-toggle" href ng-show="ctrl.profileData.length !== 0" data-toggle="dropdown" aria-expanded="false"> {{\'Export\' | translate}}&nbsp;<i class="fa fa-caret-up"></i></a><ul class="dropdown-menu dropdown-menu-right" role="menu"><li><a href ng-click="::ctrl.downloadCsv()"><i class="fa fa-table"></i>&nbsp;{{\'Download CSV\' | translate}}</a></li></ul></div><div class="gmf-profile-error" ng-show="ctrl.isErrored"><p>{{\'The profile service does not respond, please try later.\' | translate}}</p></div><div class="close" ng-click="ctrl.line = null">&times;</div></div>');
a.put("gmf/layertree/component.html",'<div class="gmf-layertree-root-tools" ng-if="layertreeCtrl.isRoot"><a href ng-if="gmfLayertreeCtrl.nodesCount() > 0" ng-click="gmfLayertreeCtrl.removeAllNodes()"><span class="fa fa-trash"></span> {{\'Clear all\' | translate}} </a></div><div ng-if="::!layertreeCtrl.isRoot" id="gmf-layertree-node-{{::layertreeCtrl.uid}}" ng-class="[layertreeCtrl.node.children ? \'gmf-layertree-group\' : \'gmf-layertree-leaf\', \'gmf-layertree-depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]"><div class="ngeo-sortable-handle" ng-show="layertreeCtrl.depth === 1 && layertreeCtrl.parent.children.length > 1"><i class="gmf-layertree-sortable-handle-icon fa fa-ellipsis-v"></i></div><a ng-if="::layertreeCtrl.node.children" data-toggle="collapse" href="#gmf-layertree-layer-group-{{::layertreeCtrl.uid}}" aria-expanded="{{::layertreeCtrl.node.metadata.isExpanded}}" class="fa gmf-layertree-expand-node fa-fw"></a><a href ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)" ng-if="::!layertreeCtrl.node.children" ng-class="::{\'gmf-layertree-no-layer-icon\' : !gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)}" class="gmf-layertree-layer-icon"><img ng-if="::(legendIconUrl=gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl))" ng-src="{{::legendIconUrl}}"></a><a href ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)" ng-if="::layertreeCtrl.node.children" ng-class="[\'fa fa-fw\', layertreeCtrl.node.children && !layertreeCtrl.layer.loading ? \'gmf-layertree-state\' : \'fa-refresh fa-spin\']"></a><a href ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)" class="gmf-layertree-name" title="{{layertreeCtrl.node.name | translate}}"> {{layertreeCtrl.node.name | translate}} <i class="gmf-icon gmf-icon-search-go gmf-layertree-zoom" data-toggle="tooltip" data-title="{{\'Not visible at current scale. Click to zoom.\'|translate}}" ng-click="::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl); $event.preventDefault(); $event.stopPropagation();" ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) == \'on\'"></i><span ngeo-popover ngeo-popover-dismiss=".content" ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) !== \'off\' && layertreeCtrl.node.time && layertreeCtrl.node.time.mode !== \'disabled\'"><span ngeo-popover-anchor class="fa fa-clock-o" ng-click="$event.preventDefault(); $event.stopPropagation()"></span><div ngeo-popover-content><ngeo-date-picker ng-if="::layertreeCtrl.node.time.widget === \'datepicker\'" time="layertreeCtrl.node.time" on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"></ngeo-date-picker><gmf-time-slider ng-if="::layertreeCtrl.node.time.widget === \'slider\'" gmf-time-slider-time="layertreeCtrl.node.time" gmf-time-slider-on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"></gmf-time-slider></div></span><span class="fa fa-pencil" title="{{\'Currently editing this layer\'|translate}}" ng-if="layertreeCtrl.properties.editing"></span></a><span class="gmf-layertree-right-buttons"><a href ng-if="::layertreeCtrl.depth == 1" ng-click="gmfLayertreeCtrl.removeNode(layertreeCtrl.node)"><span class="fa fa-trash"></span></a><a class="gmf-layertree-node-menu-btn" href ng-if="::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl)" ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-menu-\' + layertreeCtrl.uid)"><span class="fa fa-cog"></span></a><span ngeo-popover ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed && !layertreeCtrl.node.children) || (gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend) || layertreeCtrl.getDataSource().filtrable" ngeo-popover-dismiss=".content"><span ngeo-popover-anchor class="extra-actions fa fa-cog"></span><div ngeo-popover-content><ul><li ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed)"><i class="fa fa-tint fa-fw"></i><span for="layer-opactity">{{\'Opacity\'|translate}}</span><input class="input-action" name="layer-opactity" type="range" min="0" max="1" step="0.01" ng-model="layertreeCtrl.layer.opacity"></li><li ng-if="::gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend"><i class="fa fa-th-list fa-fw"></i><a title="{{\'Show/hide legend\'|translate}}" ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\'); popoverCtrl.dismissPopover()" data-toggle="collapse" href> {{\'Show/hide legend\'|translate}} </a></li><li ng-if="layertreeCtrl.getDataSource() && layertreeCtrl.getDataSource().filtrable"><i class="fa fa-filter fa-fw"></i><a title="{{\'Filter\'|translate}}" ng-click="gmfLayertreeCtrl.toggleFiltrableDataSource(layertreeCtrl.getDataSource())" href> {{\'Filter\'|translate}} </a></li></ul></div></span><span class="gmf-layertree-metadata" ng-if="::layertreeCtrl.node.metadata.metadataUrl"><span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true"><a title="{{\'More informations\'|translate}}" href="{{::layertreeCtrl.node.metadata.metadataUrl}}" target="blank_"></a></span><span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true"><a title="{{\'More informations\'|translate}}" href ng-click="gmfLayertreeCtrl.displayMetadata(layertreeCtrl)"></a></span></span><a class="fa fa-align-left gmf-layertree-legend-button" ng-if="::gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend" title="{{\'Show/hide legend\'|translate}}" data-toggle="collapse" ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href></a></span></div><div class="gmf-layertree-node-menu" id="gmf-layertree-node-menu-{{::layertreeCtrl.uid}}" style="display:none;" ng-if="::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl)"><div ng-if="::gmfLayertreeCtrl.supportsOpacityChange(layertreeCtrl)"><i class="fa fa-tint fa-fw"></i><span for="layer-opactity">{{\'Opacity\'|translate}}</span><input class="input-action" name="layer-opactity" type="range" min="0" max="1" step="0.01" ng-model="layertreeCtrl.layer.opacity"></div><a class="gmf-layertree-node-menu-togglelegend" ng-if="::gmfLayertreeCtrl.supportsLegend(layertreeCtrl)" title="{{\'Hide legend\'|translate}}" data-toggle="collapse" ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href><span class="fa fa-th-list"></span> {{\'Show/hide legend\'|translate}} </a></div><div ng-if="::!layertreeCtrl.isRoot && gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend" id="gmf-layertree-node-{{::layertreeCtrl.uid}}-legend" class="collapse gmf-layertree-legend" ng-class="::[layertreeCtrl.node.metadata.isLegendExpanded ? \'in\' : \'\']"><a title="{{\'Hide legend\'|translate}}" data-toggle="collapse" ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href> {{\'Hide legend\'|translate}} </a><div ng-if="gmfLayertreeCtrl.isNodeLegendVisible(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')"><div ng-repeat="(title, url) in ::gmfLayertreeCtrl.getLegendsObject(layertreeCtrl)"><p ng-if="::gmfLayertreeCtrl.getNumberOfLegendsObject(layertreeCtrl) > 1">{{title|translate}}</p><img ng-src="{{url}}"></div></div></div><ul class="gmf-layertree-root-external-datasources" ng-if="layertreeCtrl.isRoot && (gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length)"><gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-repeat="wmtsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups" group="wmtsGroup"></gmf-datasourcegrouptree><gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-repeat="wmsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups" group="wmsGroup"></gmf-datasourcegrouptree><gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-if="gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length" group="gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup"></gmf-datasourcegrouptree></ul><ul id="gmf-layertree-layer-group-{{::layertreeCtrl.uid}}" ng-if="::layertreeCtrl.node.children" ng-class="{collapse: !layertreeCtrl.isRoot, in : layertreeCtrl.node.metadata.isExpanded}" ngeo-sortable="::layertreeCtrl.isRoot && layertreeCtrl.node.children" ngeo-sortable-options="{handleClassName: \'ngeo-sortable-handle\', draggerClassName: \'gmf-layertree-dragger\', placeholderClassName : \'gmf-layertree-curr-drag-item\'}" ngeo-sortable-callback="::gmfLayertreeCtrl.afterReorder" ngeo-sortable-callback-ctx="::gmfLayertreeCtrl"><li class="gmf-layertree-node" ng-repeat="node in layertreeCtrl.node.children" ng-class="\'gmf-layertree-depth-\' + layertreeCtrl.depth" ngeo-layertree="node" ngeo-layertree-notroot ngeo-layertree-map="layertreeCtrl.map" ngeo-layertree-nodelayerexpr="layertreeCtrl.nodelayerExpr" ngeo-layertree-listenersexpr="layertreeCtrl.listenersExpr"></li></ul>');
a.put("ngeo/filter/rulecomponent.html",'<div class="dropdown" ng-class="{open: $ctrl.rule.active}"><a class="btn btn-default btn-sm dropdown-toggle" type="button" ng-click="$ctrl.toggle()"><span>{{ ::$ctrl.clone.name | translate }}</span><span class="caret"></span></a><div class="dropdown-menu form-group"><select class="form-control input-sm ngeo-rule-operators-list" ng-disabled="$ctrl.drawActive" ng-if="::$ctrl.clone.operators" ng-model="$ctrl.clone.operator" ng-options="$ctrl.operators[operator] | translate for operator in ::$ctrl.clone.operators track by operator"></select><div ng-switch="::$ctrl.clone.type"><div class="ngeo-rule-type-date form-group" ng-if="$ctrl.rule.active" ng-switch-when="date|datetime" ng-switch-when-separator="|"><div ng-switch="$ctrl.clone.operator"><div ng-switch-when=".."><ngeo-date-picker time="$ctrl.timeRangeMode" on-date-selected="$ctrl.onDateRangeSelected(time)"></ngeo-date-picker></div><div ng-switch-default><ngeo-date-picker time="$ctrl.timeValueMode" on-date-selected="$ctrl.onDateSelected(time)"></ngeo-date-picker></div></div></div><div class="ngeo-rule-type-geometry form-group" ng-switch-when="geometry"><div ng-switch="$ctrl.geomType"><span class="gmf-icon gmf-icon-point" ng-switch-when="Point"></span><span class="gmf-icon gmf-icon-line" ng-switch-when="LineString"></span><span class="gmf-icon gmf-icon-polygon" ng-switch-when="Polygon"></span><span class="gmf-icon gmf-icon-circle" ng-switch-when="Circle"></span><span class="gmf-icon gmf-icon-rectangle" ng-switch-when="Rectangle"></span></div><ngeo-drawfeature ngeo-drawfeature-active="$ctrl.drawActive" ngeo-drawfeature-features="$ctrl.drawnFeatures" ngeo-drawfeature-map="$ctrl.map"><div ngeo-btn-group class="btn-group"><a data-toggle="tooltip" title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-sm btn-default ngeo-drawfeature-point" ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1" ng-class="{active: dfCtrl.drawPoint.active}" ng-model="dfCtrl.drawPoint.active"><span class="gmf-icon gmf-icon-point"></span></a><a data-toggle="tooltip" title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-sm btn-default ngeo-drawfeature-linestring" ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1" ng-class="{active: dfCtrl.measureLength.active}" ng-model="dfCtrl.measureLength.active"><span class="gmf-icon gmf-icon-line"></span></a><a data-toggle="tooltip" title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-sm btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model="dfCtrl.measureArea.active"><span class="gmf-icon gmf-icon-polygon"></span></a><a data-toggle="tooltip" title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-sm btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model="dfCtrl.measureAzimut.active"><span class="gmf-icon gmf-icon-circle"></span></a><a data-toggle="tooltip" title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-sm btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model="dfCtrl.drawRectangle.active"><span class="gmf-icon gmf-icon-rectangle"></span></a></div><div class="ngeo-rule-type-geometry-instructions" ng-if="$ctrl.drawActive"><span ng-if="dfCtrl.drawPoint.active"> {{ \'Draw a point on the map.\' | translate }} </span><span ng-if="dfCtrl.measureLength.active"> {{ \'Draw a line string on the map.\' | translate }} </span><span ng-if="dfCtrl.measureArea.active"> {{ \'Draw a polygon on the map.\' | translate }} </span><span ng-if="dfCtrl.measureAzimut.active"> {{ \'Draw a circle on the map.\' | translate }} </span><span ng-if="dfCtrl.drawRectangle.active"> {{ \'Draw a rectangle on the map.\' | translate }} </span></div></ngeo-drawfeature></div><div class="checkbox ngeo-rule-type-select" ng-switch-when="select"><a ng-click="$ctrl.selectAllChoices()" href>{{ All | translate}} </a><label class="form-group ol-unselectable" ng-repeat="choice in ::$ctrl.clone.choices"><input ng-checked="$ctrl.clone.getExpression() && $ctrl.clone.getExpression().split(\',\').indexOf(choice) > -1" ng-click="$ctrl.toggleChoiceSelection(choice)" type="checkbox" value="choice"><span>{{ choice | translate }}</span></label></div><div class="form-group ngeo-rule-type-text" ng-switch-default><div ng-switch="$ctrl.clone.operator"><div ng-switch-when=".."><input type="number" class="form-control input-sm" ng-model="$ctrl.clone.lowerBoundary"><input type="number" class="form-control input-sm" ng-model="$ctrl.clone.upperBoundary"></div><div ng-switch-default><input type="number" class="form-control input-sm" ng-if="$ctrl.clone.type === \'number\'" ng-model="$ctrl.clone.expression"><input type="text" class="form-control input-sm" ng-if="$ctrl.clone.type !== \'number\'" ng-model="$ctrl.clone.expression"></div></div></div><div class="ngeo-rule-btns"><button class="btn btn-xs btn-default" ng-click="$ctrl.apply()" type="button">{{\'Apply\' | translate}}</button><button class="btn btn-xs btn-default" ng-click="$ctrl.cancel()" type="button">{{\'Cancel\' | translate}}</button></div></div></div></div><div class="ngeo-rule-value" ng-if="$ctrl.rule.value !== null"><a class="btn btn-xs btn-link" ng-click="!$ctrl.rule.active && $ctrl.reset()" ng-disabled="$ctrl.rule.active" href><span class="fa fa-remove"></span></a><div ng-switch="::$ctrl.rule.type"><div ng-switch-when="date|datetime" ng-switch-when-separator="|"><div ng-switch="$ctrl.rule.operator"><div ng-switch-when=".."><span translate>From </span><span>{{ $ctrl.timeToDate($ctrl.rule.lowerBoundary) }}</span><span translate> to </span><span>{{ $ctrl.timeToDate($ctrl.rule.upperBoundary) }}</span></div><div ng-switch-default><span>{{ $ctrl.rule.operator }}</span><span>{{ $ctrl.timeToDate($ctrl.rule.getExpression()) }}</span></div></div></div><div ng-switch-when="geometry"><span>{{ $ctrl.operators[$ctrl.rule.operator] }}</span><span ng-switch="$ctrl.getRuleGeometryType()"><span class="gmf-icon gmf-icon-point" ng-switch-when="Point"></span><span class="gmf-icon gmf-icon-line" ng-switch-when="LineString"></span><span class="gmf-icon gmf-icon-polygon" ng-switch-when="Polygon"></span><span class="gmf-icon gmf-icon-circle" ng-switch-when="Circle"></span><span class="gmf-icon gmf-icon-rectangle" ng-switch-when="Rectangle"></span></span></div><div ng-switch-when="select"><span ng-repeat="choice in $ctrl.rule.getExpression().split(\',\')"> {{ choice | translate }}{{ $last ? \'\' : \', \' }} </span></div><div ng-switch-default><div ng-switch="$ctrl.rule.operator"><div ng-switch-when=".."><span translate>Between </span><span>{{ $ctrl.rule.lowerBoundary }}</span><span translate> and </span><span>{{ $ctrl.rule.upperBoundary }}</span></div><div ng-switch-default><span>{{ $ctrl.rule.operator }}</span><span>{{ $ctrl.rule.getExpression() }}</span></div></div></div></div></div>');
a.put("gmf/raster/widgetComponent.html",'<div class="text-center btn-group dropup" gmf-elevation gmf-elevation-active="ctrl.active" gmf-elevation-elevation="ctrl.elevationValue" gmf-elevation-loading="ctrl.elevationLoading" gmf-elevation-layer="ctrl.selectedElevationLayer" gmf-elevation-map="::ctrl.map"><a type="button" class="btn btn-default" aria-expanded="false" ng-class="::{\'dropdown-toggle\': ctrl.layers.length > 1}" ng-attr-data-toggle="{{::(ctrl.layers.length > 1) ? \'dropdown\' : \'\'}}"><span class="gmf-elevationwidget-value"> {{ctrl.elevationValue | number}}<span ng-show="ctrl.elevationValue"> m</span><span ng-show="ctrl.elevationLoading" class="fa fa-spinner"></span><span ng-show="!ctrl.elevationValue && !ctrl.elevationLoading" translate>Elevation\u2026</span></span><span class="caret" ng-if="::ctrl.layers.length > 1"></span></a><ul class="dropdown-menu dropdown-menu-right" role="menu" ng-if="::ctrl.layers.length > 1"><li class="dropdown-header" translate>Elevation data sources</li><li ng-repeat="elevationItem in ::ctrl.layers"><a href ng-click="ctrl.selectedElevationLayer = elevationItem"><span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedElevationLayer === elevationItem}"></span> {{::elevationItem | translate}} </a></li></ul></div>');
a.put("gmf/editing/editFeatureSelectorComponent.html",'<div ng-switch="efsCtrl.selectedEditableTreeCtrl"><div ng-switch-when="null"><select class="form-control" ng-model="efsCtrl.selectedEditableTreeCtrl" ng-show="efsCtrl.editableTreeCtrls.length > 0" ng-options="treeCtrl.node.name | translate for treeCtrl in efsCtrl.editableTreeCtrls"><option value translate>-- Choose a layer --</option></select><span ng-show="efsCtrl.editableTreeCtrls.length == 0" translate>No editable layer available!</span></div><div ng-switch-default><div class="row"><div class="col-sm-12"><span translate>Currently editing: </span><b>{{ efsCtrl.selectedEditableTreeCtrl.node.name | translate }}</b><span class="fa fa-pencil"></span><br><button ng-click="efsCtrl.stopEditing()" class="btn btn-link btn-xs pull-right"><span class="fa fa-times"></span> {{\'Stop editing\' | translate}} </button></div></div><gmf-editfeature gmf-editfeature-dirty="efsCtrl.dirty" gmf-editfeature-editabletreectrl="::efsCtrl.selectedEditableTreeCtrl" gmf-editfeature-map="::efsCtrl.map" gmf-editfeature-state="efsCtrl.state" gmf-editfeature-tolerance="::efsCtrl.tolerance" gmf-editfeature-vector="::efsCtrl.vectorLayer"></gmf-editfeature></div></div>');
a.put("gmf/layertree/timesliderComponent.html",'<div class="gmf-time-slider"><div ui-slider="sliderCtrl.sliderOptions" ng-model="sliderCtrl.dates"><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" data-toggle="tooltip" title></span></div><div class="gmf-time-slider-displayed-dates"><div class="gmf-time-slider-start-date" ng-if="::sliderCtrl.time.mode === \'range\'"><span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[0])}}</span></div><div class="gmf-time-slider-start-date" ng-if="::sliderCtrl.time.mode === \'value\'"><span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates)}}</span></div><div class="gmf-time-slider-end-date" ng-if="::sliderCtrl.time.mode === \'range\'"><span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[1])}}</span></div></div></div>');
a.put("gmf/search/component.html",'<div class="gmf-search"><input type="text" ng-attr-placeholder="{{$ctrl.placeholder}}" class="form-control" ng-model="$ctrl.inputValue" ngeo-search="$ctrl.options" ngeo-search-datasets="$ctrl.datasets" ngeo-search-listeners="$ctrl.listeners"><span class="gmf-clear-button ng-hide" ng-hide="!$ctrl.clearButton || $ctrl.inputValue == \'\'" ng-click="$ctrl.onClearButton()"></span></div><span ng-if="$ctrl.colorChooser"><span ng-show="$ctrl.displayColorPicker" ngeo-popover ngeo-popover-placement="bottom"><button class="gmf-color-button fa fa-tint" ngeo-popover-anchor data-original-title="{{\'Change the color of the search result\'|translate}}"></button><div ngeo-popover-content><div ngeo-colorpicker ngeo-colorpicker-color="$ctrl.color"></div></div></span></span>');
a.put("ngeo/grid/component.html",'<div class="ngeo-grid-table-container"><table float-thead="ctrl.floatTheadConfig" ng-model="ctrl.configuration.data" class="table table-bordered table-striped table-hover"><thead class="table-header"><tr><th ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-click="ctrl.sort(columnDefs.name)" ng-bind-html="columnDefs.name | ngeoTrustHtml | translate"><i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i><i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i><i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i></th></tr></thead><tbody><tr ng-repeat="attributes in ctrl.configuration.data" ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']" ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown="ctrl.preventTextSelection($event)"><td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | ngeoTrustHtml"></td></tr></tbody></table></div>');
a.put("gmf/objectediting/toolsComponent.html",'<div class="btn-group" role="group" aria-label><a href ngeo-btn ngeo-createfeature ngeo-createfeature-active="oetCtrl.drawActive" ngeo-createfeature-features="::oetCtrl.sketchFeatures" ngeo-createfeature-geom-type="::oetCtrl.geomType" ngeo-createfeature-map="::oetCtrl.map" class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiPoint\')" ng-model="oetCtrl.drawActive" title="{{\'Add a point to the geometry\' | translate}}"><span class="fa fa-plus-square-o gmf-icon-oe-draw"></span></a><a href ngeo-btn ngeo-createfeature ngeo-createfeature-active="oetCtrl.drawActive" ngeo-createfeature-features="::oetCtrl.sketchFeatures" ngeo-createfeature-geom-type="::oetCtrl.geomType" ngeo-createfeature-map="::oetCtrl.map" class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiLineString\')" ng-model="oetCtrl.drawActive" title="{{\'Add a linestring to the geometry\' | translate}}"><span class="fa fa-plus-square-o gmf-icon-oe-draw"></span></a><a href ngeo-btn ngeo-createfeature ngeo-createfeature-active="oetCtrl.drawActive" ngeo-createfeature-features="::oetCtrl.sketchFeatures" ngeo-createfeature-geom-type="::oetCtrl.geomType" ngeo-createfeature-map="::oetCtrl.map" class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiPolygon\')" ng-model="oetCtrl.drawActive" title="{{\'Add a polygon to the geometry\' | translate}}"><span class="fa fa-plus-square-o gmf-icon-oe-draw"></span></a><a href ngeo-btn ngeo-createfeature ngeo-createfeature-active="oetCtrl.eraseActive" ngeo-createfeature-features="::oetCtrl.sketchFeatures" ngeo-createfeature-geom-type="::oetCtrl.geomTypePolygon" ngeo-createfeature-map="::oetCtrl.map" class="btn btn-sm btn-default" ng-class="{active: oetCtrl.eraseActive}" ng-model="oetCtrl.eraseActive" title="{{\'Erase geometry\' | translate}}"><span class="fa fa-minus-square-o gmf-icon-oe-erase"></span></a><a href ng-if="::oetCtrl.geomType === \'MultiPolygon\'" ngeo-btn ngeo-createregularpolygonfromclick ngeo-createregularpolygonfromclick-active="oetCtrl.drawTriangleActive" ngeo-createregularpolygonfromclick-angle="oetCtrl.triangleAngle" ngeo-createregularpolygonfromclick-features="::oetCtrl.sketchFeatures" ngeo-createregularpolygonfromclick-map="::oetCtrl.map" ngeo-createregularpolygonfromclick-radius="::oetCtrl.triangleRadius" class="btn btn-sm btn-default ngeo-createregularpolygonfromclick" ng-class="{active: oetCtrl.drawTriangleActive}" ng-model="oetCtrl.drawTriangleActive" title="{{\'Draw a triangle\' | translate}}"><span class="fa fa-play fa-rotate-270 gmf-icon-oe-triangle"></span></a><a href ngeo-btn gmf-objecteditinggetwmsfeature gmf-objecteditinggetwmsfeature-active="oetCtrl.copyFromActive" gmf-objecteditinggetwmsfeature-features="::oetCtrl.sketchFeatures" gmf-objecteditinggetwmsfeature-layerinfo="oetCtrl.queryableLayerInfo" gmf-objecteditinggetwmsfeature-map="::oetCtrl.map" class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-add" ng-class="{active: oetCtrl.copyFromActive}" ng-model="oetCtrl.copyFromActive" title="{{\'Copy from external WMS feature\' | translate}}"><span class="fa fa-clone gmf-icon-oe-copyfrom"></span></a><a href ngeo-btn gmf-objecteditinggetwmsfeature gmf-objecteditinggetwmsfeature-active="oetCtrl.deleteFromActive" gmf-objecteditinggetwmsfeature-features="::oetCtrl.sketchFeatures" gmf-objecteditinggetwmsfeature-layerinfo="oetCtrl.queryableLayerInfo" gmf-objecteditinggetwmsfeature-map="::oetCtrl.map" class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-delete" ng-class="{active: oetCtrl.deleteFromActive}" ng-model="oetCtrl.deleteFromActive" title="{{\'Cut from external WMS feature\' | translate}}"><span class="fa fa-scissors gmf-icon-oe-deletefrom"></span></a></div>');
a.put("gmf/objectediting/component.html",'<gmf-objecteditingtools gmf-objecteditingtools-active="oeCtrl.toolsActive" gmf-objecteditingtools-copyfromactive="oeCtrl.copyFromActive" gmf-objecteditingtools-deletefromactive="oeCtrl.deleteFromActive" gmf-objecteditingtools-feature="oeCtrl.feature" gmf-objecteditingtools-geomtype="::oeCtrl.geomType" gmf-objecteditingtools-map="::oeCtrl.map" gmf-objecteditingtools-process="oeCtrl.process" gmf-objecteditingtools-queryablelayerinfo="oeCtrl.selectedQueryableLayerInfo" gmf-objecteditingtools-requireslayer="oeCtrl.queryableLayerListShown" gmf-objecteditingtools-sketchfeatures="::oeCtrl.sketchFeatures"></gmf-objecteditingtools><div class="form-group" ng-show="oeCtrl.queryableLayerListShown"><label ng-show="oeCtrl.copyFromActive === true" class="control-label">{{\'Copy from:\' | translate}}</label><label ng-show="oeCtrl.deleteFromActive === true" class="control-label">{{\'Cut from:\' | translate}}</label><select class="form-control" ng-model="oeCtrl.selectedQueryableLayerInfo" ng-options="layerInfo.layerNode.name | translate for layerInfo in oeCtrl.queryableLayersInfo"></select></div><form novalidate name="form" class="form gmf-objectediting-form"><input type="submit" value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-objectediting-btn-save" ng-click="form.$valid && oeCtrl.save()" ng-disabled="!oeCtrl.dirty || oeCtrl.pending || !oeCtrl.featureHasGeom" title="{{\'Save modifications\' | translate}}"><a class="btn btn-sm btn-link gmf-objectediting-btn-undo" ng-click="oeCtrl.undo()" ng-disabled="!oeCtrl.dirty || oeCtrl.pending" title="{{\'Undo latest modifications\' | translate}}" href>{{\'Undo\' | translate}}</a><a class="btn btn-sm btn-link gmf-objectediting-btn-delete" ng-click="oeCtrl.delete()" ng-disabled="oeCtrl.isStateInsert() || oeCtrl.pending" title="{{\'Delete the feature\' | translate}}" href>{{\'Delete\' | translate}}</a></form>');
a.put("ngeo/misc/colorpickerComponent.html",'<table class="ngeo-colorpicker-palette"><tr ng-repeat="colors in ::ctrl.colors"><td ng-repeat="color in ::colors" ng-click="ctrl.setColor(color)" ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}"><div ng-style="::{\'background-color\': color}"></div></td></tr></table>');a.put("ngeo/olcs/controls3d.html",'<div class="ngeo-tools"><div class="ngeo-angle"><div class="ngeo-angle3d"></div></div><button class="ngeo-left ngeo-tilt-left" ng-click="$ctrl.tilt(5)"></button><button class="ngeo-right ngeo-tilt-right" ng-click="$ctrl.tilt(-5)"></button></div><div class="ngeo-zoom"><button class="ol-zoom-in" ng-click="$ctrl.zoom(1)"></button><button class="ol-zoom-out" ng-click="$ctrl.zoom(-1)"></button></div><div class="ngeo-tools"><div class="ngeo-rotation"><div class="ngeo-rotation3d"></div></div><button class="ngeo-left" ng-click="$ctrl.rotate(-15)"></button><button class="ngeo-right" ng-click="$ctrl.rotate(15)"></button></div>');
a.put("gmf/map/component.html",'<div ngeo-map="ctrl.map" ngeo-map-manage-resize="ctrl.manageResize" ngeo-map-resize-transition="ctrl.resizeTransition"></div>');a.put("gmf/mobile/measure/lengthComponent.html",'<a class="btn btn-default" ng-if="ctrl.drawing && (!ctrl.valid)" ng-click="ctrl.addPoint()"><span class="fa fa-check"></span> {{\'Set as starting point\' | translate}} </a><a class="btn btn-default" ng-if="ctrl.dirty" ng-click="ctrl.addPoint()"><span class="fa fa-plus"></span> {{\'Add new point\' | translate}} </a><a class="btn btn-default" ng-if="ctrl.drawing && ctrl.valid && !ctrl.dirty" ng-click="ctrl.finish()"><span class="fa fa-check"></span> {{\'Terminate\' | translate}} </a><a class="btn btn-default" ng-if="ctrl.valid" ng-click="ctrl.clear()"><span class="fa fa-repeat"></span> {{\'Clear\' | translate}} </a><a class="btn btn-default" ng-if="ctrl.active" ng-click="ctrl.deactivate()"><span class="fa fa-times"></span> {{\'Close\' | translate}} </a>');
a.put("gmf/mobile/measure/pointComponent.html",'<a class="btn btn-default" ng-if="ctrl.active" ng-click="ctrl.deactivate()"><span class="fa fa-times"></span> {{\'Close\' | translate}} </a>');a.put("gmf/query/gridComponent.html",'<div class="gmf-displayquerygrid panel" ng-show="ctrl.active"><div class="close" ng-click="ctrl.clear()"> &times; </div><ul class="nav nav-pills small" role="tablist"><li ng-repeat="gridSource in ctrl.getGridSources() track by gridSource.source.id" role="presentation" ng-class="{\'active\' : ctrl.isSelected(gridSource)}" ng-click="ctrl.selectTab(gridSource)"><a href="#{{gridSource.source.id}}" data-target="#{{gridSource.source.id}}" aria-controls="{{gridSource.source.id}}" role="tab" data-toggle="tab"><span ng-if="gridSource.source.tooManyResults !== true"> {{gridSource.source.label | translate}} ({{gridSource.source.features.length}}) </span><span ng-if="gridSource.source.tooManyResults === true"> {{gridSource.source.label | translate}} ({{gridSource.source.totalFeatureCount}}*) </span></a></li></ul><div class="tab-content"><div ng-repeat="gridSource in ctrl.getGridSources() track by gridSource.source.id" role="tabpanel" class="tab-pane" ng-class="{\'active\' : ctrl.isSelected(gridSource)}" id="{{gridSource.source.id}}"><ngeo-grid ngeo-grid-configuration="gridSource.configuration" ng-if="gridSource.source.tooManyResults !== true"></ngeo-grid><div ng-if="gridSource.source.tooManyResults === true"><div class="gmf-displayquerygrid-message alert alert-warning"><p><span translate>The results can not be displayed because the maximum number has been reached</span> ({{gridSource.source.limit}}).</p><p translate>Please refine your query.</p></div></div></div></div><div class="navbar" ng-show="!ctrl.pending && ctrl.getActiveGridSource() && ctrl.getActiveGridSource().configuration !== null"><ul class="nav navbar-nav navbar-right"><li class="small ng-hide" ng-show="ctrl.isOneSelected()"><p class="navbar-text ng-binding"> {{ctrl.getSelectedRowCount()}} <span translate>selected element(s)</span></p></li><li ng-show="ctrl.isOneSelected()" class="ng-hide"><button class="btn btn-link btn-xs" title="{{\'Zoom to selection\' | translate}}" ng-click="ctrl.zoomToSelection()"><i class="fa fa-search-plus"></i><span translate>Zoom to</span></button></li><li ng-show="ctrl.isOneSelected()" class="ng-hide"><button class="btn btn-link btn-xs" title="{{\'Export selection as CSV\' | translate}}" ng-click="ctrl.downloadCsv()"><i class="fa fa-download"></i><span translate>Export as CSV</span></button></li><li class="dropdown navbar-link dropup"><button type="button" class="dropup btn btn-default btn-xs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span translate>Select</span><span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dLabel"><li><a href ng-click="ctrl.selectAll()" translate>All</a></li><li><a href ng-click="ctrl.unselectAll()" translate>None</a></li><li><a href ng-click="ctrl.invertSelection()" translate>Reverse selection</a></li></ul></li></ul></div><div ng-show="ctrl.pending" class="gmf-displayquerygrid-pending"><span class="fa fa-spinner fa-spin"></span></div></div>')}
a.$inject=["$templateCache"];ym.run(a)})();function Am(a,b){Zd.call(this);this.ha(a,b)}u(Am,Zd);m=Am.prototype;m.clone=function(){var a=new Am(null);be(a,this.layout,this.D.slice());a.c();return a};m.sb=function(a,b,c,d){if(d<eb(this.I(),a,b))return d;var e=this.D,f=this.H,g;var h=0;for(g=e.length;h<g;h+=f){var k=Cb(a,b,e[h],e[h+1]);if(k<d){d=k;for(k=0;k<f;++k)c[k]=e[h+k];c.length=f}}return d};m.O=function(){return ke(this.D,0,this.D.length,this.H)};
function Bm(a){var b=a.D,c=a.layout;a=a.H;var d=[],e;var f=0;for(e=b.length;f<e;f+=a){var g=new Mi(null);Ni(g,c,b.slice(f,f+a));d.push(g)}return d}m.getType=function(){return"MultiPoint"};m.nb=function(a){var b=this.D,c=this.H,d;var e=0;for(d=b.length;e<d;e+=c){var f=b[e];var g=b[e+1];if(gb(a,f,g))return!0}return!1};m.ha=function(a,b){a?(this.yb(b,a,1),this.D||(this.D=[]),this.D.length=ie(this.D,0,a,this.H)):be(this,"XY",null);this.c()};function Cm(a,b){Zd.call(this);this.b=[];this.o=this.C=-1;this.ha(a,b)}u(Cm,Zd);m=Cm.prototype;m.clone=function(){var a=new Cm(null);Dm(a,this.layout,this.D.slice(),this.b.slice());return a};m.sb=function(a,b,c,d){if(d<eb(this.I(),a,b))return d;this.o!=this.g&&(this.C=Math.sqrt(ee(this.D,0,this.b,this.H,0)),this.o=this.g);return ge(this.D,0,this.b,this.H,this.C,!1,a,b,c,d)};m.O=function(){return le(this.D,0,this.b,this.H)};m.Wa=function(){return this.b};
function Em(a){var b=a.D,c=a.b;a=a.layout;var d=[],e=0,f;var g=0;for(f=c.length;g<f;++g){var h=c[g],k=new ye(null);ze(k,a,b.slice(e,h));d.push(k);e=h}return d}m.di=function(){var a=[],b=this.D,c=0,d=this.b,e=this.H,f;var g=0;for(f=d.length;g<f;++g){var h=d[g];c=ne(b,c,h,e);Rd(a,c);c=h}return a};m.Pc=function(a){var b=[],c=[],d=this.D,e=this.b,f=this.H,g=0,h=0,k;var l=0;for(k=e.length;l<k;++l){var n=e[l];h=we(d,g,n,f,a,b,h);c.push(h);g=n}b.length=h;a=new Cm(null);Dm(a,"XY",b,c);return a};
m.getType=function(){return"MultiLineString"};m.nb=function(a){a:{var b=this.D,c=this.b,d=this.H,e=0,f;var g=0;for(f=c.length;g<f;++g){if(se(b,e,c[g],d,a)){a=!0;break a}e=c[g]}a=!1}return a};m.ha=function(a,b){a?(this.yb(b,a,2),this.D||(this.D=[]),a=je(this.D,0,a,this.H,this.b),this.D.length=0===a.length?0:a[a.length-1],this.c()):Dm(this,"XY",null,this.b)};function Dm(a,b,c,d){be(a,b,c);a.b=d;a.c()}
function Fm(a,b){var c=a.layout,d=[],e=[],f;var g=0;for(f=b.length;g<f;++g){var h=b[g];0===g&&(c=h.layout);Rd(d,h.D);e.push(d.length)}Dm(a,c,d,e)};function Gm(a,b){Zd.call(this);this.f=[];this.o=-1;this.C=null;this.N=this.F=this.G=-1;this.b=null;this.ha(a,b)}u(Gm,Zd);m=Gm.prototype;m.clone=function(){for(var a=new Gm(null),b=this.f.length,c=Array(b),d=0;d<b;++d)c[d]=this.f[d].slice();Hm(a,this.layout,this.D.slice(),c);return a};
m.sb=function(a,b,c,d){if(d<eb(this.I(),a,b))return d;if(this.F!=this.g){var e=this.f,f=0,g=0,h;var k=0;for(h=e.length;k<h;++k){var l=e[k];g=ee(this.D,f,l,this.H,g);f=l[l.length-1]}this.G=Math.sqrt(g);this.F=this.g}e=pf(this);f=this.f;g=this.H;k=this.G;h=0;l=[NaN,NaN];var n;var p=0;for(n=f.length;p<n;++p){var q=f[p];d=ge(e,h,q,g,k,!0,a,b,c,d,l);h=q[q.length-1]}return d};
m.kc=function(a,b){a:{var c=pf(this),d=this.f,e=0;if(0!==d.length){var f;var g=0;for(f=d.length;g<f;++g){var h=d[g];if(qe(c,e,h,this.H,a,b)){a=!0;break a}e=h[h.length-1]}}a=!1}return a};m.O=function(a){if(void 0!==a){var b=pf(this).slice();Si(b,this.f,this.H,a)}else b=this.D;return me(b,0,this.f,this.H)};
function qf(a){if(a.o!=a.g){var b=a.D,c=a.f,d=a.H,e=0,f=[],g;var h=0;for(g=c.length;h<g;++h){var k=c[h];var l=b;var n=k[0],p=d,q=jb(void 0);l=nb(q,l,e,n,p);f.push((l[0]+l[2])/2,(l[1]+l[3])/2);e=k[k.length-1]}b=pf(a);c=a.f;d=a.H;h=0;g=[];k=0;for(l=c.length;k<l;++k)e=c[k],g=Oi(b,h,e,d,f,2*k,g),h=e[e.length-1];a.C=g;a.o=a.g}return a.C}
function pf(a){if(a.N!=a.g){var b=a.D;a:{var c=a.f;var d;var e=0;for(d=c.length;e<d;++e)if(!Qi(b,c[e],a.H,void 0)){c=!1;break a}c=!0}c?a.b=b:(a.b=b.slice(),a.b.length=Si(a.b,a.f,a.H));a.N=a.g}return a.b}m.Pc=function(a){var b=[],c=[],d=this.D,e=this.f,f=this.H;a=Math.sqrt(a);var g=0,h=0,k;var l=0;for(k=e.length;l<k;++l){var n=e[l],p=[];h=xe(d,g,n,f,a,b,h,p);c.push(p);g=n[n.length-1]}b.length=h;d=new Gm(null);Hm(d,"XY",b,c);return d};
function Im(a){var b=a.layout,c=a.D;a=a.f;var d=[],e=0,f,g;var h=0;for(f=a.length;h<f;++h){var k=a[h].slice(),l=k[k.length-1];if(0!==e){var n=0;for(g=k.length;n<g;++n)k[n]-=e}n=new Ti(null);Ui(n,b,c.slice(e,l),k);d.push(n);e=l}return d}m.getType=function(){return"MultiPolygon"};m.nb=function(a){a:{var b=pf(this),c=this.f,d=this.H,e=0,f;var g=0;for(f=c.length;g<f;++g){var h=c[g];if(te(b,e,h,d,a)){a=!0;break a}e=h[h.length-1]}a=!1}return a};
m.ha=function(a,b){if(a){this.yb(b,a,3);this.D||(this.D=[]);b=this.D;var c=this.H,d=this.f,e=0;d=d?d:[];var f=0,g;var h=0;for(g=a.length;h<g;++h)e=je(b,e,a[h],c,d[f]),d[f++]=e,e=e[e.length-1];d.length=f;0===d.length?this.D.length=0:(a=d[d.length-1],this.D.length=0===a.length?0:a[a.length-1]);this.c()}else Hm(this,"XY",null,this.f)};function Hm(a,b,c,d){be(a,b,c);a.f=d;a.c()}
function Jm(a,b){var c=a.layout,d=[],e=[],f;var g=0;for(f=b.length;g<f;++g){var h=b[g];0===g&&(c=h.layout);var k=d.length;var l=h.Wa();var n;var p=0;for(n=l.length;p<n;++p)l[p]+=k;Rd(d,h.D);e.push(l)}Hm(a,c,d,e)};function Km(a){return 1==a.length?"0"+a:a}function Lm(a){var b=a[0],c=a[1];a=a[2];if(b!=(b&255)||c!=(c&255)||a!=(a&255))throw Error('"('+b+","+c+","+a+')" is not a valid RGB color');b=Km(b.toString(16));c=Km(c.toString(16));a=Km(a.toString(16));return"#"+b+c+a}
function Mm(a){var b={};if(a){a=a.substring(1).split("&");a=t(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;var d=c.indexOf("=");if(0<=d){var e=c.substring(d+1);b[decodeURIComponent(c.substring(0,d))]=decodeURIComponent(e)}else b[c]=""}}return b}function Nm(a){var b=[],c;for(c in a){var d=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")}function Om(a){return Mj(a)&&"singleclick"==a.type};function Pm(){}Pm.prototype.qk=function(a){var b=a.match(/([\d\.']+)[\s,]+([\d\.']+)/);return!b||(a=parseFloat(b[1].replace("'","")),b=parseFloat(b[2].replace("'","")),isNaN(a)||isNaN(b))?null:[a,b]};Pm.prototype.stringToCoordinates=Pm.prototype.qk;Pm.prototype.hg=function(a){var b,c,d=[];a.forEach(function(a){b=a.toUpperCase();"EPSG:"!=b.substr(0,5)&&(b="EPSG:"+b);c=fc(b);null!==c?d.push(c):console.error("The projection "+b+" is not defined in ol.proj.")});return d};
Pm.prototype.getProjectionList=Pm.prototype.hg;Pm.prototype.Zg=function(a,b,c,d){var e;void 0===d&&(d=[c]);d.some(function(d){try{if(e=pc(a,d,c),gb(b,e[0],e[1]))return!0}catch(g){console.log(g)}e=null});return e};Pm.prototype.tryProjections=Pm.prototype.Zg;Pm.prototype.ah=function(a,b,c,d){var e=this.Zg(a,b,c,d);null===e&&(e=this.Zg(a.reverse(),b,c,d));return e};Pm.prototype.tryProjectionsWithInversion=Pm.prototype.ah;var Qm=angular.module("ngeoAutoProjection",[]);
Qm.service("ngeoAutoProjection",Pm);S.requires.push(Qm.name);var Rm=angular.module("ngeoBtnComponent",[]);S.requires.push(Rm.name);Rm.u=function(a){return{restrict:"A",controller:"ngeoBtnGroupController",link:function(b,c,d,e){var f=a(d.ngeoBtnGroupActive).assign;f&&b.$watch(function(){return e.ae.some(function(a){return!0===a(b)})},function(a){f(b,a)})}}};Rm.u.$inject=["$parse"];Rm.directive("ngeoBtnGroup",Rm.u);function Sm(a){this.ae=[];this.J=a}Sm.$inject=["$scope"];function Tm(a,b){a.ae.forEach(function(a,d){d!=b&&a.assign(this.J,!1)},a)}
Rm.controller("ngeoBtnGroupController",Sm);Rm.o=function(a){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function(b,c,d,e){var f=e[0],g=e[1],h=-1;d=a(d.ngModel);e=d.assign;void 0===d(b)&&e(b,!1);null!==f&&(f.ae.push(d),h=f.ae.length-1);c.on("click",function(){b.$apply(function(){g.$setViewValue(!g.$viewValue);g.$render()})});g.$render=function(){g.$viewValue&&null!==f&&Tm(f,h);c.toggleClass("active",g.$viewValue)}}}};Rm.o.$inject=["$parse"];Rm.directive("ngeoBtn",Rm.o);function Um(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Um);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Um,Error);Um.prototype.name="CustomError";function Vm(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};function Wm(a,b){b.unshift(a);Um.call(this,Vm.apply(null,b));b.shift()}wa(Wm,Um);Wm.prototype.name="AssertionError";function Xm(a,b){throw new Wm("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));}function Ym(a,b,c){if("boolean"!=typeof a){var d=[ua(a),a],e="Assertion failed";b?(e+=": "+b,d=Array.prototype.slice.call(arguments,2)):e+=": Expected boolean but got %s: %s.";throw new Wm(""+e,d||[]);}return a};var Zm=angular.module("ngeoControl",[]);S.requires.push(Zm.name);Zm.c=function(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.ngeoControl);a=a.$eval(c.ngeoControlMap);d.bd(b[0]);a.controls.push(d)}}};Zm.directive("ngeoControl",Zm.c);function $m(){}$m.prototype.Oc=function(a){var b=new Date(a.minValue),c=new Date(a.maxValue),d=a.minDefValue?new Date(a.minDefValue):b,e=a.maxDefValue?new Date(a.maxDefValue):c;return{dj:b.getTime(),aj:c.getTime(),values:"range"===a.mode?[d.getTime(),e.getTime()]:d.getTime()}};$m.prototype.getOptions=$m.prototype.Oc;$m.prototype.getUTCDate=function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())};$m.prototype.getUTCDate=$m.prototype.getUTCDate;
var an=angular.module("ngeoTime",[]);an.service("ngeoTime",$m);S.requires.push(an.name);var bn=angular.module("ngeoDatePicker",[an.name,"ui.date"]);bn.value("ngeoDatePickerTemplateUrl",function(a,b){a=b.ngeoDatePickerTemplateUrl;return void 0!==a?a:"ngeo/misc/datepickerComponent.html"});
bn.c=function(a,b){return{scope:{onDateSelected:"&",time:"="},bindToController:!0,controller:"ngeoDatePickerController as datepickerCtrl",restrict:"AE",templateUrl:a,link:function(a,d,e,f){f.Cb();a=f.ba.getCurrentLanguage();$.datepicker.setDefaults($.datepicker.regional[a]);f.sdateOptions=angular.extend({},f.sdateOptions,{onClose:function(a){a&&$(d[0]).find('input[name="edate"]').datepicker("option","minDate",a)}});f.edateOptions=angular.extend({},f.edateOptions,{onClose:function(a){a&&$(d[0]).find('input[name="sdate"]').datepicker("option",
"maxDate",a)}});angular.element("body").on("hidden.bs.popover",function(){var a=angular.element("#ui-datepicker-div");a&&"block"===a.css("display")&&$(d[0]).find('input[name$="date"]').datepicker("hide")});b(function(){angular.element("#ui-datepicker-div").on("mousedown",function(a){a.stopPropagation()})})}}};bn.c.$inject=["ngeoDatePickerTemplateUrl","$timeout"];bn.directive("ngeoDatePicker",bn.c);
function cn(a,b,c,d){var e=this;this.g=c;this.ba=d;this.edateOptions={minDate:this.b,maxDate:this.c,changeMonth:!0,changeYear:!0};this.sdateOptions={minDate:this.b,maxDate:this.c,changeMonth:!0,changeYear:!0};a.$watchGroup(["datepickerCtrl.sdate","datepickerCtrl.edate"],function(a){var b=a[0];a=a[1];if(angular.isDate(b)&&(!e.isModeRange||angular.isDate(a)))e.onDateSelected({time:{start:b.getTime(),end:a?a.getTime():null}})})}cn.$inject=["$scope","$injector","ngeoTime","gettextCatalog"];
cn.prototype.Cb=function(){var a=this.g.Oc(this.time);this.b=new Date(a.dj);this.c=new Date(a.aj);(this.isModeRange="range"===this.time.mode)?(this.sdate=new Date(a.values[0]),this.edate=new Date(a.values[1])):this.sdate=new Date(a.values)};bn.controller("ngeoDatePickerController",cn);var dn=angular.module("ngeoDebounce",[]);S.requires.push(dn.name);dn.g=function(a){return function(b,c,d){var e=null;return function(f){for(var g=[],h=0;h<arguments.length;++h)g[h-0]=arguments[h];var k=this;null!==e&&a.cancel(e);e=a(function(){e=null;b.apply(k,g)},c,d)}}};dn.g.$inject=["$timeout"];dn.factory("ngeoDebounce",dn.g);function en(){this.c={}}en.prototype.Jb=function(a,b){this.c[a]||fn(this,a);this.c[a].push(b)};en.prototype.addListenerKey=en.prototype.Jb;en.prototype.Ec=function(a){fn(this,a)};en.prototype.clearListenerKey=en.prototype.Ec;function fn(a,b){a.c[b]?a.c[b].length&&(a.c[b].forEach(A),a.c[b].length=0):a.c[b]=[]}var gn=angular.module("ngeoEventHelper",[]);gn.service("ngeoEventHelper",en);S.requires.push(gn.name);var hn=angular.module("ngeoAngularFilters",[]);S.requires.push(hn.name);hn.j=function(a){function b(a){return(a=c(a,0))?"1\u00a0:\u00a0"+a:""}var c=a("number");b.$stateful=!0;return b};hn.j.$inject=["$filter"];hn.filter("ngeoScalify",hn.j);
hn.Number=function(a){var b=a.NUMBER_FORMATS;return function(a,d){var c=b.GROUP_SEP,f=b.DECIMAL_SEP;void 0===d&&(d=3);if(Infinity===a)return"\u221e";if(-Infinity===a)return"-\u221e";if(0===a)return"0";var g=0>a;a=Math.abs(a);var h=d-Math.floor(Math.log(a)/Math.log(10))-1,k=Math.pow(10,h);a=Math.round(a*k);d="";k=Math.floor(a/k);if(0<h){for(d=""+a;d.length<h;)d="0"+d;for(d=d.substring(d.length-h);"0"===d[d.length-1];)d=d.substring(0,d.length-1)}a=[];for(h=""+k;3<h.length;)k=h.length-3,a.unshift(h.substring(k)),
h=h.substring(0,k);a.unshift(h);return(g?"-":"")+a.join(c)+(0===d.length?"":f+d)}};hn.Number.$inject=["$locale"];hn.filter("ngeoNumber",hn.Number);hn.i=function(a){var b=a("ngeoNumber"),c=" k M G T P".split(" "),d=" Ki Mi Gi Ti Pi".split(" ");return function(a,f,g,h){void 0===f&&(f="");var e=1E3,l=c;"square"===g?e=1E6:"binary"===g&&(e=1024,l=d);g=0;for(var n=l.length-1;a>=e&&g<n;)a/=e,g++;f=l[g]+f;e=0==f.length?"":"\u00a0";return b(a,h)+e+f}};hn.i.$inject=["$filter"];hn.filter("ngeoUnitPrefix",hn.i);
hn.f=function(a){return function(b,c,d){d=d?d:"{x} {y}";var e=b[0];b=b[1];c=parseInt(c,10)|0;e=a("number")(e,c);b=a("number")(b,c);return d.replace("{x}",e).replace("{y}",b)}};hn.f.$inject=["$filter"];S.filter("ngeoNumberCoordinates",hn.f);
hn.K=function(){function a(a,c,d){a=Eb(a+180,360)-180;var b=Math.abs(3600*a),f=b%60;return Math.floor(b/3600)+"\u00b0 "+We(Math.floor(b/60%60))+"\u2032 "+We(f,d)+"\u2033 "+c.charAt(0>a?1:0)}return function(b,c,d){c=parseInt(c,10)|0;d=d?d:"{x} {y}";var e=a(b[0],"EW",c);b=a(b[1],"NS",c);return d.replace("{x}",e).replace("{y}",b)}};hn.filter("ngeoDMSCoordinates",hn.K);hn.C=function(a){return function(b){return void 0!==b&&null!==b?a.trustAsHtml(""+b):a.trustAsHtml("&nbsp;")}};hn.C.$inject=["$sce"];
hn.filter("ngeoTrustHtml",hn.C);var jn=angular.module("ngeoDownload",[]);S.requires.push(jn.name);jn.g=function(){return function(a,b,c){c=void 0===c||-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?"text/plain;charset=utf-8":c;saveAs(new Blob([a],{type:c}),b)}};jn.factory("ngeoDownload",jn.g);va("ngeo.format.FeatureProperties",{ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",SHOW_LABEL:"b",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"});va("ngeo.GeometryType",{CIRCLE:"Circle",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",MULTI_POINT:"MultiPoint",MULTI_POLYGON:"MultiPolygon",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"});function kn(a,b){b=void 0===b?{}:b;Pa.call(this,a);this.detail=b}u(kn,Pa);function ln(a){a=void 0!==a?a:{};Ej.call(this,{handleEvent:mn});this.continueMsg=this.i=this.T=this.o=this.b=this.u=this.f=null;this.hd=a.hd;this.precision=a.precision;this.G=void 0!==a.Rl?a.Rl:!0;void 0!==a.startMsg?this.startMsg=a.startMsg:(this.startMsg=document.createElement("span"),this.startMsg.textContent="Click to start drawing.");this.C=this.v=null;var b=void 0!==a.style?a.style:[new H({fill:new rd({color:"rgba(255, 255, 255, 0.2)"})}),new H({stroke:new sd({color:"white",width:5})}),new H({stroke:new sd({color:"#ffcc33",
width:3})})];this.B=new Hh({source:new sm,style:b});this.j=this.F(a.sketchStyle,M(this.B));this.U=!0;D(this.j,"change:active",this.cn,this);D(this.j,"drawstart",this.Op,this);D(this.j,"drawend",this.Np,this);D(this,"change:active",this.Go,this)}u(ln,Ej);var nn=new Gb(6378137);
function on(a,b,c,d){a=Vi(a.clone().transform(b,"EPSG:4326")).O();b=nn.radius;for(var e=0,f=a.length,g=a[f-1][0],h=a[f-1][1],k=0;k<f;k++){var l=a[k][0],n=a[k][1];e+=Db(l-g)*(2+Math.sin(Db(h))+Math.sin(Db(n)));g=l;h=n}return d(Math.abs(e*b*b/2),"m\u00b2","square",c)}function pn(a,b,c,d){var e=0;a=a.O();for(var f=0,g=a.length-1;f<g;++f){var h=pc(a[f],b,"EPSG:4326"),k=pc(a[f+1],b,"EPSG:4326");e+=Hb(h,k,nn.radius)}return d(e,"m","unit",c)}
function mn(a){if("pointermove"!=a.type||a.dragging)return!0;var b=this.startMsg;null!==this.i&&(b=this.continueMsg);if(this.G){for(var c=this.f;c.lastChild;)c.removeChild(c.lastChild);this.f.appendChild(b);this.u.set(Ug,a.coordinate)}return!0}m=ln.prototype;m.setMap=function(a){Ej.prototype.setMap.call(this,a);this.B.setMap(a);var b=this.j.getMap();null!==b&&b.xa.remove(this.j);null!==a&&qj(a,this.j)};
m.Op=function(a){var b=this;this.i=a.feature;M(this.B).clear(!0);qn(this);a=this.i.getGeometry();this.v=D(a,"change",function(){b.N(function(a,d){null!==d&&(b.b.innerHTML=a,b.T=d)})});this.C=D(this.getMap(),"postcompose",function(){b.o.set(Ug,b.T)})};m.Np=function(){this.b.classList.add("ngeo-tooltip-static");this.o.set(Tg,[0,-7]);F(this,new kn("measureend",{feature:this.i}));this.i=null;rn(this)};function rn(a){null!==a.v&&null!==a.C&&(A(a.v),A(a.C),a.v=null,a.C=null)}
function sn(a){a.G&&(a.getMap().Ha.remove(a.u),null!==a.f&&a.f.parentNode.removeChild(a.f),a.f=null,a.u=null)}function qn(a){tn(a);a.b=document.createElement("div");a.b.classList.add("tooltip");a.b.classList.add("ngeo-tooltip-measure");a.o=new Qg({element:a.b,offset:[0,-15],Xc:"bottom-center",Gd:!1});a.getMap().Ha.push(a.o)}function tn(a){null!==a.b&&(a.b.parentNode.removeChild(a.b),a.b=null,a.o=null,a.T=null)}
m.Go=function(){var a=this.getActive();this.U=!1;this.j.setActive(a);this.U=!0;this.getMap()&&(a?this.o||(qn(this),sn(this),this.G&&(this.f=document.createElement("div"),this.f.classList.add("tooltip"),this.u=new Qg({element:this.f,offset:[15,0],Xc:"center-left"}),this.getMap().Ha.push(this.u))):(M(this.B).clear(!0),this.getMap().Ha.remove(this.o),tn(this),sn(this),rn(this)))};m.cn=function(){this.U&&this.setActive(this.j.getActive())};function un(a,b,c){Zd.call(this);vn(this,a,b?b:0,c)}u(un,Zd);m=un.prototype;m.clone=function(){var a=new un(null);be(a,this.layout,this.D.slice());a.c();return a};m.sb=function(a,b,c,d){var e=this.D;a-=e[0];var f=b-e[1];b=a*a+f*f;if(b<d){if(0===b)for(d=0;d<this.H;++d)c[d]=e[d];else for(d=Math.sqrt(Ye(this))/Math.sqrt(b),c[0]=e[0]+d*a,c[1]=e[1]+d*f,d=2;d<this.H;++d)c[d]=e[d];c.length=this.H;return b}return d};m.kc=function(a,b){var c=this.D;a-=c[0];b-=c[1];return a*a+b*b<=Ye(this)};
m.getCenter=function(){return this.D.slice(0,this.H)};m.de=function(a){var b=this.D,c=b[this.H]-b[0];return ib(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};function Ye(a){var b=a.D[a.H]-a.D[0];a=a.D[a.H+1]-a.D[1];return b*b+a*a}m.getType=function(){return"Circle"};m.nb=function(a){var b=this.I();return wb(a,b)?(b=this.getCenter(),a[0]<=b[0]&&a[2]>=b[0]||a[1]<=b[1]&&a[3]>=b[1]?!0:ob(a,this.U,this)):!1};
m.setCenter=function(a){var b=this.H,c=a.slice();c[b]=c[0]+(this.D[b]-this.D[0]);var d;for(d=1;d<b;++d)c[b+d]=a[d];be(this,this.layout,c);this.c()};function vn(a,b,c,d){if(b){a.yb(d,b,0);a.D||(a.D=[]);d=a.D;b=he(d,b);d[b++]=d[0]+c;var e;c=1;for(e=a.H;c<e;++c)d[b++]=d[c];d.length=b}else be(a,"XY",null);a.c()}m.O=function(){};m.ha=function(){};m.setRadius=function(a){this.D[this.H]=this.D[0]+a;this.c()};function Dn(a){yc.call(this);this.b=a?a:null;En(this)}u(Dn,yc);function Gl(a){var b=[],c;var d=0;for(c=a.length;d<c;++d)b.push(a[d].clone());return b}function Fn(a){var b;if(a.b){var c=0;for(b=a.b.length;c<b;++c)La(a.b[c],"change",a.c,a)}}function En(a){var b;if(a.b){var c=0;for(b=a.b.length;c<b;++c)D(a.b[c],"change",a.c,a)}}m=Dn.prototype;m.clone=function(){var a=new Dn(null),b=Gl(this.b);Fn(a);a.b=b;En(a);a.c();return a};
m.sb=function(a,b,c,d){if(d<eb(this.I(),a,b))return d;var e=this.b,f;var g=0;for(f=e.length;g<f;++g)d=e[g].sb(a,b,c,d);return d};m.kc=function(a,b){var c=this.b,d;var e=0;for(d=c.length;e<d;++e)if(c[e].kc(a,b))return!0;return!1};m.de=function(a){jb(a);for(var b=this.b,c=0,d=b.length;c<d;++c)mb(a,b[c].I());return a};
m.ng=function(a){this.u!=this.g&&(Ba(this.j),this.i=0,this.u=this.g);if(0>a||0!==this.i&&a<this.i)return this;var b=a.toString();if(this.j.hasOwnProperty(b))return this.j[b];var c=[],d=this.b,e=!1,f;var g=0;for(f=d.length;g<f;++g){var h=d[g],k=h.ng(a);c.push(k);k!==h&&(e=!0)}if(e)return a=new Dn(null),Fn(a),a.b=c,En(a),a.c(),this.j[b]=a;this.i=a;return this};m.getType=function(){return"GeometryCollection"};m.nb=function(a){var b=this.b,c;var d=0;for(c=b.length;d<c;++d)if(b[d].nb(a))return!0;return!1};
m.rotate=function(a,b){for(var c=this.b,d=0,e=c.length;d<e;++d)c[d].rotate(a,b);this.c()};m.scale=function(a,b,c){c||(c=tb(this.I()));for(var d=this.b,e=0,f=d.length;e<f;++e)d[e].scale(a,b,c);this.c()};m.Vd=function(a){var b=this.b,c;var d=0;for(c=b.length;d<c;++d)b[d].Vd(a);this.c()};m.translate=function(a,b){var c=this.b,d;var e=0;for(d=c.length;e<d;++e)c[e].translate(a,b);this.c()};m.Ba=function(){Fn(this);yc.prototype.Ba.call(this)};function Gn(a){Sj.call(this,{Za:Hn,handleEvent:In,ab:Jn});this.N=!1;this.U=null;this.o=!1;this.Ea=a.source?a.source:null;this.ua=a.features?a.features:null;this.ug=a.Tq?a.Tq:12;this.G=a.type;this.f=Kn(this.G);this.ho=!!a.Fs;this.qa=a.minPoints?a.minPoints:this.f===Ln?3:2;this.ia=a.bj?a.bj:Infinity;this.rb=a.am?a.am:xb;var b=a.em;if(!b)if("Circle"===this.G)b=function(a,b){b=b?b:new un([NaN,NaN]);vn(b,a[0],Math.sqrt(bf(a[0],a[1])));return b};else{var c,d=this.f;d===Mn?c=Mi:d===Nn?c=ye:d===Ln&&(c=Ti);
b=function(a,b){b?d===Ln?a[0].length?b.ha([a[0].concat([a[0][0]])]):b.ha([]):b.ha(a):b=new c(a);return b}}this.cb=b;this.F=this.C=this.b=this.B=this.i=this.u=null;this.Fa=a.Gh?a.Gh*a.Gh:36;this.W=new Hh({source:new sm({Yb:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:On()});this.za=a.geometryName;this.rg=a.condition?a.condition:Mj;this.cc=a.ws?xb:a.dm?a.dm:Oj;D(this,Ya("active"),this.Na,this)}u(Gn,Sj);function On(){var a=xd();return function(b){return a[b.getGeometry().getType()]}}
Gn.prototype.setMap=function(a){Sj.prototype.setMap.call(this,a);this.Na()};function In(a){this.o=this.f!==Mn&&this.cc(a);var b=!0;this.o&&"pointerdrag"===a.type&&null!==this.i?(Pn(this,a),b=!1):this.o&&"pointerdown"===a.type?b=!1:"pointermove"===a.type?b=Qn(this,a):"dblclick"===a.type&&(b=!1);return Tj.call(this,a)&&b}function Hn(a){this.N=!this.o;return this.o?(this.U=a.pixel,this.u||Rn(this,a),!0):this.rg(a)?(this.U=a.pixel,!0):!1}
function Jn(a){var b=!0;Qn(this,a);var c=this.f===Sn;this.N?(this.u?this.o||c?Tn(this):Un(this,a)?this.rb(a)&&Tn(this):Pn(this,a):(Rn(this,a),this.f===Mn&&Tn(this)),b=!1):this.o&&(this.u=null,Vn(this));!b&&this.ho&&a.stopPropagation();return b}
function Qn(a,b){if(a.U&&(!a.o&&a.N||a.o&&!a.N)){var c=a.U,d=b.pixel,e=c[0]-d[0];c=c[1]-d[1];e=e*e+c*c;a.N=a.o?e>a.Fa:e<=a.Fa}a.u?(e=b.coordinate,c=a.i.getGeometry(),a.f===Mn?d=a.b:a.f===Ln?(d=a.b[0],d=d[d.length-1],Un(a,b)&&(e=a.u.slice())):(d=a.b,d=d[d.length-1]),d[0]=e[0],d[1]=e[1],a.cb(a.b,c),a.B&&a.B.getGeometry().ha(e),c instanceof Ti&&a.f!==Ln?(a.C||(a.C=new yd(new ye(null))),e=Vi(c),b=a.C.getGeometry(),ze(b,e.layout,e.D)):a.F&&(b=a.C.getGeometry(),b.ha(a.F)),Wn(a)):(b=b.coordinate.slice(),
a.B?a.B.getGeometry().ha(b):(a.B=new yd(new Mi(b)),Wn(a)));return!0}function Un(a,b){var c=!1;if(a.i){var d=!1,e=[a.u];a.f===Nn?d=a.b.length>a.qa:a.f===Ln&&(d=a.b[0].length>a.qa,e=[a.b[0][0],a.b[0][a.b[0].length-2]]);if(d){d=b.map;for(var f=0,g=e.length;f<g;f++){var h=e[f],k=Zg(d,h),l=b.pixel;c=l[0]-k[0];k=l[1]-k[1];if(c=Math.sqrt(c*c+k*k)<=(a.o?1:a.ug)){a.u=h;break}}}}return c}
function Rn(a,b){b=b.coordinate;a.u=b;a.f===Mn?a.b=b.slice():a.f===Ln?(a.b=[[b.slice(),b.slice()]],a.F=a.b[0]):(a.b=[b.slice(),b.slice()],a.f===Sn&&(a.F=a.b));a.F&&(a.C=new yd(new ye(a.F)));b=a.cb(a.b);a.i=new yd;a.za&&zd(a.i,a.za);a.i.setGeometry(b);Wn(a);F(a,new Xn("drawstart",a.i))}
function Pn(a,b){b=b.coordinate;var c=a.i.getGeometry(),d;if(a.f===Nn){a.u=b.slice();var e=a.b;e.length>=a.ia&&(a.o?e.pop():d=!0);e.push(b.slice());a.cb(e,c)}else a.f===Ln&&(e=a.b[0],e.length>=a.ia&&(a.o?e.pop():d=!0),e.push(b.slice()),d&&(a.u=e[0]),a.cb(a.b,c));Wn(a);d&&Tn(a)}
function Tn(a){var b=Vn(a),c=a.b,d=b.getGeometry();a.f===Nn?(c.pop(),a.cb(c,d)):a.f===Ln&&(c[0].pop(),a.cb(c,d),c=d.O());"MultiPoint"===a.G?b.setGeometry(new Am([c])):"MultiLineString"===a.G?b.setGeometry(new Cm([c])):"MultiPolygon"===a.G&&b.setGeometry(new Gm([c]));F(a,new Xn("drawend",b));a.ua&&a.ua.push(b);a.Ea&&a.Ea.na(b)}function Vn(a){a.u=null;var b=a.i;b&&(a.i=null,a.B=null,a.C=null,M(a.W).clear(!0));return b}
Gn.prototype.extend=function(a){var b=a.getGeometry();this.i=a;this.b=b.O();a=this.b[this.b.length-1];this.u=a.slice();this.b.push(a.slice());Wn(this);F(this,new Xn("drawstart",this.i))};Gn.prototype.Ub=yb;function Wn(a){var b=[];a.i&&b.push(a.i);a.C&&b.push(a.C);a.B&&b.push(a.B);a=M(a.W);a.clear(!0);qm(a,b);a.c()}Gn.prototype.Na=function(){var a=this.getMap(),b=this.getActive();a&&b||Vn(this);this.W.setMap(b?a:null)};
function Kn(a){var b;"Point"===a||"MultiPoint"===a?b=Mn:"LineString"===a||"MultiLineString"===a?b=Nn:"Polygon"===a||"MultiPolygon"===a?b=Ln:"Circle"===a&&(b=Sn);return b}var Mn="Point",Nn="LineString",Ln="Polygon",Sn="Circle";function Xn(a,b){Pa.call(this,a);this.feature=b}u(Xn,Pa);function Yn(a){Sj.call(this,{Za:Zn,handleEvent:$n,ab:ao});this.u=null;this.B=void 0!==a.source?a.source:null;this.i=!1;this.f=this.b=null;this.o=new Hh({source:new sm({Yb:!1,wrapX:!1}),style:void 0!==a.style?a.style:On()});D(this,"change:active",this.C,this)}u(Yn,Sj);function Zn(a){this.u=a.pixel;return!0}
function ao(a){var b=this.u,c=a.pixel,d=b[0]-c[0];b=b[1]-c[1];c=!0;4>=d*d+b*b&&(bo(this,a),this.i?(a=co(this),null!==this.B&&this.B.na(a),F(this,new Xn("drawend",a))):(d=a.coordinate,this.i=!0,a=new ye([d.slice(),d.slice()]),d=new un(d,0),a=new Dn([a,d]),this.b=new yd,this.b.setGeometry(a),eo(this),F(this,new Xn("drawstart",this.b))),c=!1);return c}function $n(a){var b=!0;"pointermove"===a.type?b=bo(this,a):"dblclick"===a.type&&(b=!1);return Tj.call(this,a)&&b}
function bo(a,b){if(a.i){b=b.coordinate;var c=a.b.getGeometry().b,d=c[0],e=d.O();a.f.getGeometry().ha(b);var f=e[e.length-1];f[0]=b[0];f[1]=b[1];d.ha(e);c[1].setRadius(Ce(d));eo(a)}else b=b.coordinate.slice(),null===a.f?(a.f=new yd(new Mi(b)),eo(a)):a.f.getGeometry().ha(b);return!0}function eo(a){var b=[];null!==a.b&&b.push(a.b);null!==a.f&&b.push(a.f);a=M(a.o);a.clear(!0);qm(a,b);a.c()}function co(a){a.i=!1;var b=a.b;null!==b&&(a.b=null,a.f=null,M(a.o).clear(!0));return b}Yn.prototype.Ub=yb;
Yn.prototype.C=function(){var a=this.getMap(),b=this.getActive();null!==a&&b||co(this);this.o.setMap(b?a:null)};Yn.prototype.setMap=function(a){Sj.prototype.setMap.call(this,a);this.C()};function fo(a,b,c){c=c||{};ln.call(this,c);void 0!==c.continueMsg?this.continueMsg=c.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to finish.");this.W=b;this.ia=a}u(fo,ln);fo.prototype.F=function(a,b){return new Yn({source:b,style:a})};fo.prototype.N=function(a){var b=Gl(this.i.getGeometry().b)[0],c=N(this.getMap()).b,d=this.precision,e=this.ia,f=go(b,this.hd,this.W);f+=", "+pn(b,c,d,e);a(f,ae(b))};
function go(a,b,c){a=ho(a);return c(a,b)+"\u00b0"}function ho(a){var b=a.O();a=b[1][0]-b[0][0];b=b[1][1]-b[0][1];return(0<a?1:-1)*Math.acos(b/Math.sqrt(a*a+b*b))*180/Math.PI%360};function io(){this.f=new XMLSerializer;Cd.call(this)}u(io,Cd);m=io.prototype;m.getType=function(){return"xml"};m.Jg=function(a){return am(a)?jo(this,a):bm(a)?this.Lg(a,void 0):"string"===typeof a?(a=cm(a),jo(this,a)):null};function jo(a,b){a=ko(a,b,void 0);return 0<a.length?a[0]:null}m.Lg=function(){return null};m.gb=function(a,b){return am(a)?ko(this,a,b):bm(a)?this.nc(a,b):"string"===typeof a?(a=cm(a),ko(this,a,b)):[]};
function ko(a,b,c){var d=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&Rd(d,a.nc(b,c));return d}m.Ng=function(a){if(am(a))return null;if(bm(a))return this.Rj(a,void 0);"string"===typeof a&&cm(a);return null};m.Rj=function(){return null};m.Je=function(a){return am(a)?this.Pg(a):bm(a)?this.Ke(a):"string"===typeof a?(a=cm(a),this.Pg(a)):null};m.Pg=function(){return this.tb};m.Ke=function(){return this.tb};m.hh=function(){return this.f.serializeToString(this.Kk())};m.Kk=function(){return null};
m.Md=function(a,b){a=this.Nd(a,b);return this.f.serializeToString(a)};m.Nd=function(){return null};m.cf=function(a){a=this.ih(a,void 0);return this.f.serializeToString(a)};m.ih=function(){return null};function lo(a){a=Zl(a);return mo(a)}function mo(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function no(a){a=Zl(a);a=Date.parse(a);return isNaN(a)?void 0:a/1E3}function oo(a){a=Zl(a);return po(a)}function po(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function qo(a){a=Zl(a);return ro(a)}function ro(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function T(a){return Zl(a).trim()}function so(a,b){to(a,b?"1":"0")}
function uo(a,b){a.appendChild(Xl.createTextNode(b.toPrecision()))}function vo(a,b){a.appendChild(Xl.createTextNode(b.toString()))}function to(a,b){a.appendChild(Xl.createTextNode(b))};function wo(a){a=a?a:{};io.call(this);this.tb=fc("EPSG:4326");this.c=a.Ds}u(wo,io);var xo=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function yo(a,b,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele,b.hasZ=!0):a.push(0);"time"in d?(a.push(d.time),delete d.time,b.hasM=!0):a.push(0);return a}
function zo(a,b,c){var d="XY",e=2;a.hasZ&&a.hasM?(d="XYZM",e=4):a.hasZ?(d="XYZ",e=3):a.hasM&&(d="XYM",e=3);if(4!==e){var f;var g=0;for(f=b.length/4;g<f;g++)b[g*e]=b[4*g],b[g*e+1]=b[4*g+1],a.hasZ&&(b[g*e+2]=b[4*g+2]),a.hasM&&(b[g*e+2]=b[4*g+3]);b.length=b.length/4*e;if(c)for(g=0,f=c.length;g<f;g++)c[g]=c[g]/4*e}return d}function Ao(a,b){var c=b[b.length-1],d=a.getAttribute("href");null!==d&&(c.link=d);mm(Bo,a,b)}function Co(a,b){b[b.length-1].extensionsNode_=a}
function Do(a,b){var c=b[0];if(a=R({flatCoordinates:[],layoutOptions:{}},Eo,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.layoutOptions;delete a.layoutOptions;d=zo(d,b);var e=new ye(null);ze(e,d,b);Fd(e,!1,c);c=new yd(e);Wa(c,a);return c}}
function Fo(a,b){var c=b[0];if(a=R({flatCoordinates:[],ends:[],layoutOptions:{}},Go,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.ends;delete a.ends;var e=a.layoutOptions;delete a.layoutOptions;e=zo(e,b,d);var f=new Cm(null);Dm(f,e,b,d);Fd(f,!1,c);c=new yd(f);Wa(c,a);return c}}function Ho(a,b){var c=b[0];if(b=R({},Io,a,b)){var d={};a=yo([],d,a,b);d=zo(d,a);a=new Mi(a,d);Fd(a,!1,c);c=new yd(a);Wa(c,b);return c}}
var Jo={rte:Do,trk:Fo,wpt:Ho},Ko=Q(xo,{rte:em(Do),trk:em(Fo),wpt:em(Ho)}),Bo=Q(xo,{text:O(T,"linkText"),type:O(T,"linkType")}),Eo=Q(xo,{name:O(T),cmt:O(T),desc:O(T),src:O(T),link:Ao,number:O(qo),extensions:Co,type:O(T),rtept:function(a,b){var c=R({},Lo,a,b);c&&(b=b[b.length-1],yo(b.flatCoordinates,b.layoutOptions,a,c))}}),Lo=Q(xo,{ele:O(oo),time:O(no)}),Go=Q(xo,{name:O(T),cmt:O(T),desc:O(T),src:O(T),link:Ao,number:O(qo),type:O(T),extensions:Co,trkseg:function(a,b){var c=b[b.length-1];mm(Mo,a,b);c.ends.push(c.flatCoordinates.length)}}),
Mo=Q(xo,{trkpt:function(a,b){var c=R({},No,a,b);c&&(b=b[b.length-1],yo(b.flatCoordinates,b.layoutOptions,a,c))}}),No=Q(xo,{ele:O(oo),time:O(no)}),Io=Q(xo,{ele:O(oo),time:O(no),magvar:O(oo),geoidheight:O(oo),name:O(T),cmt:O(T),desc:O(T),src:O(T),link:Ao,sym:O(T),type:O(T),fix:O(T),sat:O(qo),hdop:O(oo),vdop:O(oo),pdop:O(oo),ageofdgpsdata:O(oo),dgpsid:O(qo),extensions:Co});
function Oo(a,b){b||(b=[]);for(var c=0,d=b.length;c<d;++c){var e=b[c];if(a.c){var f=e.get("extensionsNode_")||null;a.c(e,f)}e.set("extensionsNode_",void 0)}}wo.prototype.Lg=function(a,b){if(!Pd(xo,a.namespaceURI))return null;var c=Jo[a.localName];if(!c)return null;a=c(a,[Dd(this,a,b)]);if(!a)return null;Oo(this,[a]);return a};wo.prototype.nc=function(a,b){return Pd(xo,a.namespaceURI)?"gpx"==a.localName&&(a=R([],Ko,a,[Dd(this,a,b)]))?(Oo(this,a),a):[]:[]};
function Po(a,b,c){a.setAttribute("href",b);b=c[c.length-1].properties;nm({node:a},Qo,km,[b.linkText,b.linkType],c,Ro)}function So(a,b,c){var d=c[c.length-1],e=d.node.namespaceURI,f=d.properties;a.setAttributeNS(null,"lat",b[1]);a.setAttributeNS(null,"lon",b[0]);switch(d.geometryLayout){case "XYZM":0!==b[3]&&(f.time=b[3]);case "XYZ":0!==b[2]&&(f.ele=b[2]);break;case "XYM":0!==b[2]&&(f.time=b[2])}b="rtept"==a.nodeName?To[e]:Uo[e];d=lm(f,b);nm({node:a,properties:f},Vo,km,d,c,b)}
var Ro=["text","type"],Qo=Q(xo,{text:P(to),type:P(to)}),Wo=Q(xo,"name cmt desc src link number type rtept".split(" ")),Xo=Q(xo,{name:P(to),cmt:P(to),desc:P(to),src:P(to),link:P(Po),number:P(vo),type:P(to),rtept:hm(P(So))}),To=Q(xo,["ele","time"]),Yo=Q(xo,"name cmt desc src link number type trkseg".split(" ")),ap=Q(xo,{name:P(to),cmt:P(to),desc:P(to),src:P(to),link:P(Po),number:P(vo),type:P(to),trkseg:hm(P(function(a,b,c){nm({node:a,geometryLayout:b.layout,properties:{}},Zo,$o,b.O(),c)}))}),$o=im("trkpt"),
Zo=Q(xo,{trkpt:P(So)}),Uo=Q(xo,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),Vo=Q(xo,{ele:P(uo),time:P(function(a,b){b=new Date(1E3*b);b=b.getUTCFullYear()+"-"+We(b.getUTCMonth()+1)+"-"+We(b.getUTCDate())+"T"+We(b.getUTCHours())+":"+We(b.getUTCMinutes())+":"+We(b.getUTCSeconds())+"Z";a.appendChild(Xl.createTextNode(b))}),magvar:P(uo),geoidheight:P(uo),name:P(to),cmt:P(to),desc:P(to),src:P(to),link:P(Po),sym:P(to),type:P(to),fix:P(to),
sat:P(vo),hdop:P(uo),vdop:P(uo),pdop:P(uo),ageofdgpsdata:P(uo),dgpsid:P(vo)}),bp={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function cp(a,b){if(a=a.getGeometry())if(a=bp[a.getType()])return Yl(b[b.length-1].node.namespaceURI,a)}
var dp=Q(xo,{rte:P(function(a,b,c){var d=c[0],e=b.Sa();a={node:a,properties:e};if(b=b.getGeometry())b=Fd(b,!0,d),a.geometryLayout=b.layout,e.rtept=b.O();d=Wo[c[c.length-1].node.namespaceURI];e=lm(e,d);nm(a,Xo,km,e,c,d)}),trk:P(function(a,b,c){var d=c[0],e=b.Sa();a={node:a,properties:e};if(b=b.getGeometry())b=Fd(b,!0,d),e.trkseg=Em(b);d=Yo[c[c.length-1].node.namespaceURI];e=lm(e,d);nm(a,ap,km,e,c,d)}),wpt:P(function(a,b,c){var d=c[0],e=c[c.length-1];e.properties=b.Sa();if(b=b.getGeometry())b=Fd(b,
!0,d),e.geometryLayout=b.layout,So(a,b.O(),c)})});
wo.prototype.Nd=function(a,b){b=Ed(this,b);var c=Yl("http://www.topografix.com/GPX/1/1","gpx");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd");c.setAttribute("version","1.1");c.setAttribute("creator","OpenLayers");nm({node:c},dp,cp,a,[b]);return c};function ep(a){a=a||{};this.c=a.font;this.i=a.rotation;this.u=a.xb;this.b=a.scale;this.ya=a.text;this.j=a.textAlign;this.o=a.textBaseline;this.Ga=void 0!==a.fill?a.fill:new rd({color:"#333"});this.v=void 0!==a.Uc?a.Uc:Math.PI/4;this.C=void 0!==a.placement?a.placement:"point";var b=void 0===a.overflow?a.Xl:a.overflow;this.B=void 0!==b?b:!1;this.Ia=void 0!==a.stroke?a.stroke:null;this.g=void 0!==a.offsetX?a.offsetX:0;this.f=void 0!==a.offsetY?a.offsetY:0;this.K=a.Bc?a.Bc:null;this.S=a.Cc?a.Cc:null;
this.F=void 0===a.padding?null:a.padding}m=ep.prototype;m.clone=function(){return new ep({font:this.c,placement:this.C,Uc:this.v,overflow:this.B,rotation:this.i,xb:this.u,scale:this.b,text:this.Da(),textAlign:this.j,textBaseline:this.o,fill:this.oa()?this.oa().clone():void 0,stroke:this.sa()?this.sa().clone():void 0,offsetX:this.g,offsetY:this.f})};m.oa=function(){return this.Ga};m.sa=function(){return this.Ia};m.Da=function(){return this.ya};m.ik=function(a){this.Ga=a};m.kk=function(a){this.Ia=a};
m.mk=function(a){this.ya=a};function fp(a){a=a?a:{};io.call(this);gp||(hp=[255,255,255,1],ip=new rd({color:hp}),jp=[20,2],kp=lp="pixels",mp=[64,64],np="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",op=.5,pp=new Gh({anchor:jp,Sd:"bottom-left",Td:lp,Ud:kp,crossOrigin:"anonymous",rotation:0,scale:op,size:mp,src:np}),qp="NO_IMAGE",rp=new sd({color:hp,width:1}),sp=new sd({color:[51,51,51,1],width:2}),tp=new ep({font:"bold 16px Helvetica",fill:ip,stroke:sp,scale:.8}),up=new H({fill:ip,image:pp,text:tp,stroke:rp,zIndex:0}),
gp=[up]);this.tb=fc("EPSG:4326");this.b=a.Pl?a.Pl:gp;this.g=void 0!==a.Zl?a.Zl:!0;this.o=void 0!==a.ur?a.ur:!0;this.c={};this.i=void 0!==a.Qq?a.Qq:!0}var gp,hp,ip,jp,lp,kp,mp,np,op,pp,qp,rp,sp,tp,up;u(fp,io);var vp=["http://www.google.com/kml/ext/2.2"],wp=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],xp={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"};
function yp(a,b){var c=[0,0],d="start";if(a.Z()){var e=a.Z().bg();null===e&&(e=mp);2==e.length&&(d=a.Z().g,c[0]=d*e[0]/2,c[1]=-d*e[1]/2,d="left")}null!==a.Da()?(e=a.Da(),a=e.clone(),a.c=e.c||tp.c,a.b=e.b||tp.b,a.ik(e.oa()||tp.oa()),a.kk(e.sa()||sp)):a=tp.clone();a.mk(b);a.g=c[0];a.f=c[1];a.j=d;return new H({text:a})}
function zp(a,b,c,d,e){return function(){var f=e,g="";f&&this.getGeometry()&&(f="Point"===this.getGeometry().getType());f&&(g=this.get("name"),f=f&&g);if(a)return f?(f=yp(a[0],g),a.concat(f)):a;if(b){var h=Ap(b,c,d);return f?(f=yp(h[0],g),h.concat(f)):h}return f?(f=yp(c[0],g),c.concat(f)):c}}function Ap(a,b,c){return Array.isArray(a)?a:"string"===typeof a?(!(a in c)&&"#"+a in c&&(a="#"+a),Ap(c[a],b,c)):b}
function Bp(a){a=Zl(a);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}function Cp(a){a=Zl(a);for(var b=[],c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);if(""===a)return b}
function Dp(a){var b=Zl(a).trim();a=a.baseURI;a&&"about:blank"!=a||(a=window.location.href);return a?(new URL(b,a)).href:b}function Ep(a){return oo(a)}function Fp(a,b){return R(null,Gp,a,b)}function Hp(a,b){if(b=R({D:[],Fk:[]},Ip,a,b)){a=b.D;b=b.Fk;var c;var d=0;for(c=Math.min(a.length,b.length);d<c;++d)a[4*d+3]=b[d];b=new ye(null);ze(b,"XYZM",a);return b}}function Jp(a,b){var c=R({},Kp,a,b);if(a=R(null,Lp,a,b))return b=new ye(null),ze(b,"XYZ",a),Wa(b,c),b}
function Mp(a,b){var c=R({},Kp,a,b);if(a=R(null,Lp,a,b))return b=new Ti(null),Ui(b,"XYZ",a,[a.length]),Wa(b,c),b}
function Np(a,b){a=R([],Op,a,b);if(!a)return null;if(0===a.length)return new Dn(a);var c=!0,d=a[0].getType(),e;var f=1;for(e=a.length;f<e;++f)if(b=a[f],b.getType()!=d){c=!1;break}if(c)if("Point"==d){var g=a[0];c=g.layout;d=g.D;f=1;for(e=a.length;f<e;++f)b=a[f],Rd(d,b.D);b=g=new Am(null);be(b,c,d);b.c();Pp(g,a)}else"LineString"==d?(g=new Cm(null),Fm(g,a),Pp(g,a)):"Polygon"==d?(g=new Gm(null),Jm(g,a),Pp(g,a)):"GeometryCollection"==d?g=new Dn(a):Aa(!1,37);else g=new Dn(a);return g}
function Qp(a,b){var c=R({},Kp,a,b);if(a=R(null,Lp,a,b))return b=new Mi(null),Ni(b,"XYZ",a),Wa(b,c),b}function Rp(a,b){var c=R({},Kp,a,b);if((a=R([null],Sp,a,b))&&a[0]){b=new Ti(null);var d=a[0],e=[d.length],f;var g=1;for(f=a.length;g<f;++g)Rd(d,a[g]),e.push(d.length);Ui(b,"XYZ",d,e);Wa(b,c);return b}}
function Tp(a,b){b=R({},Up,a,b);if(!b)return null;a="fillStyle"in b?b.fillStyle:ip;var c=b.fill;void 0===c||c||(a=null);c="imageStyle"in b?b.imageStyle:pp;c==qp&&(c=void 0);var d="textStyle"in b?b.textStyle:tp,e="strokeStyle"in b?b.strokeStyle:rp;b=b.outline;void 0===b||b||(e=null);return[new H({fill:a,image:c,stroke:e,text:d,zIndex:void 0})]}
function Pp(a,b){var c=b.length,d=Array(b.length),e=Array(b.length),f=Array(b.length),g,h,k;var l=h=k=!1;for(g=0;g<c;++g){var n=b[g];d[g]=n.get("extrude");e[g]=n.get("tessellate");f[g]=n.get("altitudeMode");l=l||void 0!==d[g];h=h||void 0!==e[g];k=k||f[g]}l&&a.set("extrude",d);h&&a.set("tessellate",e);k&&a.set("altitudeMode",f)}function Vp(a,b){mm(Wp,a,b)}function Xp(a,b){mm(Yp,a,b)}
var Zp=Q(wp,{displayName:O(T),value:O(T)}),Wp=Q(wp,{Data:function(a,b){var c=a.getAttribute("name");mm(Zp,a,b);a=b[b.length-1];null!==c?a[c]=a.value:null!==a.displayName&&(a[a.displayName]=a.value);delete a.value},SchemaData:function(a,b){mm($p,a,b)}}),Yp=Q(wp,{LatLonAltBox:function(a,b){if(a=R({},aq,a,b))b=b[b.length-1],b.extent=[parseFloat(a.west),parseFloat(a.south),parseFloat(a.east),parseFloat(a.north)],b.altitudeMode=a.altitudeMode,b.minAltitude=parseFloat(a.minAltitude),b.maxAltitude=parseFloat(a.maxAltitude)},
Lod:function(a,b){if(a=R({},bq,a,b))b=b[b.length-1],b.minLodPixels=parseFloat(a.minLodPixels),b.maxLodPixels=parseFloat(a.maxLodPixels),b.minFadeExtent=parseFloat(a.minFadeExtent),b.maxFadeExtent=parseFloat(a.maxFadeExtent)}}),aq=Q(wp,{altitudeMode:O(T),minAltitude:O(oo),maxAltitude:O(oo),north:O(oo),south:O(oo),east:O(oo),west:O(oo)}),bq=Q(wp,{minLodPixels:O(oo),maxLodPixels:O(oo),minFadeExtent:O(oo),maxFadeExtent:O(oo)}),Kp=Q(wp,{extrude:O(lo),tessellate:O(lo),altitudeMode:O(T)}),Gp=Q(wp,{coordinates:fm(Cp)}),
Sp=Q(wp,{innerBoundaryIs:function(a,b){(a=R(void 0,cq,a,b))&&b[b.length-1].push(a)},outerBoundaryIs:function(a,b){(a=R(void 0,dq,a,b))&&(b[b.length-1][0]=a)}}),Ip=Q(wp,{when:function(a,b){b=b[b.length-1].Fk;a=Zl(a);a=Date.parse(a);b.push(isNaN(a)?0:a)}},Q(vp,{coord:function(a,b){b=b[b.length-1].D;a=Zl(a);(a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(a))?b.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),
0):b.push(0,0,0,0)}})),Lp=Q(wp,{coordinates:fm(Cp)}),eq=Q(wp,{href:O(Dp)},Q(vp,{x:O(oo),y:O(oo),w:O(oo),h:O(oo)})),fq=Q(wp,{Icon:O(function(a,b){return(a=R({},eq,a,b))?a:null}),heading:O(oo),hotSpot:O(function(a){var b=a.getAttribute("xunits"),c=a.getAttribute("yunits");var d="insetPixels"!==b?"insetPixels"!==c?"bottom-left":"top-left":"insetPixels"!==c?"bottom-right":"top-right";return{x:parseFloat(a.getAttribute("x")),jh:xp[b],y:parseFloat(a.getAttribute("y")),kh:xp[c],origin:d}}),scale:O(Ep)}),
cq=Q(wp,{LinearRing:fm(Fp)}),gq=Q(wp,{color:O(Bp),scale:O(Ep)}),hq=Q(wp,{color:O(Bp),width:O(oo)}),Op=Q(wp,{LineString:em(Jp),LinearRing:em(Mp),MultiGeometry:em(Np),Point:em(Qp),Polygon:em(Rp)}),iq=Q(vp,{Track:em(Hp)});Q(wp,{ExtendedData:Vp,Region:Xp,Link:function(a,b){mm(jq,a,b)},address:O(T),description:O(T),name:O(T),open:O(lo),phoneNumber:O(T),visibility:O(lo)});
var jq=Q(wp,{href:O(Dp)}),dq=Q(wp,{LinearRing:fm(Fp)}),kq=Q(wp,{Style:O(Tp),key:O(T),styleUrl:O(Dp)}),mq=Q(wp,{ExtendedData:Vp,Region:Xp,MultiGeometry:O(Np,"geometry"),LineString:O(Jp,"geometry"),LinearRing:O(Mp,"geometry"),Point:O(Qp,"geometry"),Polygon:O(Rp,"geometry"),Style:O(Tp),StyleMap:function(a,b){if(a=R(void 0,lq,a,b))b=b[b.length-1],Array.isArray(a)?b.Style=a:"string"===typeof a?b.styleUrl=a:Aa(!1,38)},address:O(T),description:O(T),name:O(T),open:O(lo),phoneNumber:O(T),styleUrl:O(Dp),visibility:O(lo)},
Q(vp,{MultiTrack:O(function(a,b){if(a=R([],iq,a,b))return b=new Cm(null),Fm(b,a),b},"geometry"),Track:O(Hp,"geometry")})),nq=Q(wp,{color:O(Bp),fill:O(lo),outline:O(lo)}),$p=Q(wp,{SimpleData:function(a,b){var c=a.getAttribute("name");null!==c&&(a=T(a),b[b.length-1][c]=a)}}),Up=Q(wp,{IconStyle:function(a,b){if(a=R({},fq,a,b)){b=b[b.length-1];var c="Icon"in a?a.Icon:{},d=!("Icon"in a)||0<Object.keys(c).length,e,f=c.href;f?e=f:d&&(e=np);f="bottom-left";var g=a.hotSpot;if(g){var h=[g.x,g.y];var k=g.jh;
var l=g.kh;f=g.origin}else e===np?(h=jp,k=lp,l=kp):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(e)&&(h=[.5,0],l=k="fraction");var n;g=c.x;var p=c.y;void 0!==g&&void 0!==p&&(n=[g,p]);var q;g=c.w;c=c.h;void 0!==g&&void 0!==c&&(q=[g,c]);var r;c=a.heading;void 0!==c&&(r=Db(c));a=a.scale;d?(e==np&&(q=mp,void 0===a&&(a=op)),e=new Gh({anchor:h,Sd:f,Td:k,Ud:l,crossOrigin:"anonymous",offset:n,Bg:"bottom-left",rotation:r,scale:a,size:q,src:e}),b.imageStyle=e):b.imageStyle=qp}},LabelStyle:function(a,b){(a=
R({},gq,a,b))&&(b[b.length-1].textStyle=new ep({fill:new rd({color:"color"in a?a.color:hp}),scale:a.scale}))},LineStyle:function(a,b){(a=R({},hq,a,b))&&(b[b.length-1].strokeStyle=new sd({color:"color"in a?a.color:hp,width:"width"in a?a.width:1}))},PolyStyle:function(a,b){if(a=R({},nq,a,b)){b=b[b.length-1];b.fillStyle=new rd({color:"color"in a?a.color:hp});var c=a.fill;void 0!==c&&(b.fill=c);a=a.outline;void 0!==a&&(b.outline=a)}}}),lq=Q(wp,{Pair:function(a,b){if(a=R({},kq,a,b)){var c=a.key;c&&"normal"==
c&&((c=a.styleUrl)&&(b[b.length-1]=c),(a=a.Style)&&(b[b.length-1]=a))}}});m=fp.prototype;m.Ig=function(a,b){var c=Q(wp,{Document:dm(this.Ig,this),Folder:dm(this.Ig,this),Placemark:em(this.Og,this),Style:this.tq.bind(this),StyleMap:this.sq.bind(this)});if(a=R([],c,a,b,this))return a};
m.Og=function(a,b){var c=R({geometry:null},mq,a,b);if(c){var d=new yd;a=a.getAttribute("id");null!==a&&Bd(d,a);b=b[0];(a=c.geometry)&&Fd(a,!1,b);d.setGeometry(a);delete c.geometry;this.g&&d.setStyle(zp(c.Style,c.styleUrl,this.b,this.c,this.i));delete c.Style;Wa(d,c);return d}};m.tq=function(a,b){var c=a.getAttribute("id");null!==c&&(b=Tp(a,b))&&(a=a.baseURI,a&&"about:blank"!=a||(a=window.location.href),c=a?(new URL("#"+c,a)).href:"#"+c,this.c[c]=b)};
m.sq=function(a,b){var c=a.getAttribute("id");null!==c&&(b=R(void 0,lq,a,b))&&(a=a.baseURI,a&&"about:blank"!=a||(a=window.location.href),c=a?(new URL("#"+c,a)).href:"#"+c,this.c[c]=b)};m.Lg=function(a,b){return Pd(wp,a.namespaceURI)?(a=this.Og(a,[Dd(this,a,b)]))?a:null:null};
m.nc=function(a,b){if(!Pd(wp,a.namespaceURI))return[];var c=a.localName;if("Document"==c||"Folder"==c)return(c=this.Ig(a,[Dd(this,a,b)]))?c:[];if("Placemark"==c)return(b=this.Og(a,[Dd(this,a,b)]))?[b]:[];if("kml"==c){c=[];for(a=a.firstElementChild;a;a=a.nextElementSibling){var d=this.nc(a,b);d&&Rd(c,d)}return c}return[]};function oq(a,b){b=Cc(b);b=[255*(4==b.length?b[3]:1),b[2],b[1],b[0]];var c;for(c=0;4>c;++c){var d=parseInt(b[c],10).toString(16);b[c]=1==d.length?"0"+d:d}to(a,b.join(""))}
function pq(a,b,c){a={node:a};var d=b.getType();if("GeometryCollection"==d){var e=Gl(b.b);var f=qq}else"MultiPoint"==d?(e=Bm(b),f=rq):"MultiLineString"==d?(e=Em(b),f=sq):"MultiPolygon"==d?(e=Im(b),f=tq):Aa(!1,39);nm(a,uq,f,e,c)}function vq(a,b,c){nm({node:a},wq,xq,[b],c)}
function yq(a,b,c){var d={node:a};b.f&&a.setAttribute("id",b.f);a=b.Sa();var e={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};e[b.b]=1;var f=Object.keys(a||{}).sort().filter(function(a){return!e[a]});if(0<f.length){var g=lm(a,f);nm(d,zq,Aq,[{names:f,values:g}],c)}if(f=b.Bb())if(f=f.call(b,0))f=Array.isArray(f)?f[0]:f,this.o&&(a.Style=f),(f=f.Da())&&(a.name=f.Da());f=Bq[c[c.length-1].node.namespaceURI];a=lm(a,f);nm(d,zq,km,a,c,f);a=c[0];(b=b.getGeometry())&&(b=Fd(b,!0,
a));nm(d,zq,qq,[b],c)}function Cq(a,b,c){var d=b.D;a={node:a};a.layout=b.layout;a.stride=b.H;b=b.Sa();b.coordinates=d;d=Dq[c[c.length-1].node.namespaceURI];b=lm(b,d);nm(a,Eq,km,b,c,d)}function Fq(a,b,c){b=Wi(b);var d=b.shift();a={node:a};nm(a,Gq,Hq,b,c);nm(a,Gq,Iq,[d],c)}function Jq(a,b){uo(a,Math.round(1E6*b)/1E6)}
var Kq=Q(wp,["Document","Placemark"]),Nq=Q(wp,{Document:P(function(a,b,c){nm({node:a},Lq,Mq,b,c,void 0,this)}),Placemark:P(yq)}),Lq=Q(wp,{Placemark:P(yq)}),Oq=Q(wp,{Data:P(function(a,b,c){a.setAttribute("name",b.name);a={node:a};b=b.value;"object"==typeof b?(null!==b&&b.displayName&&nm(a,Oq,km,[b.displayName],c,["displayName"]),null!==b&&b.value&&nm(a,Oq,km,[b.value],c,["value"])):nm(a,Oq,km,[b],c,["value"])}),value:P(function(a,b){to(a,b)}),displayName:P(function(a,b){a.appendChild(Xl.createCDATASection(b))})}),
Pq={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Qq=Q(wp,["href"],Q(vp,["x","y","w","h"])),Rq=Q(wp,{href:P(to)},Q(vp,{x:P(uo),y:P(uo),w:P(uo),h:P(uo)})),Sq=Q(wp,["scale","heading","Icon","hotSpot"]),Uq=Q(wp,{Icon:P(function(a,b,c){a={node:a};var d=Qq[c[c.length-1].node.namespaceURI],e=lm(b,d);nm(a,Rq,km,e,c,d);d=Qq[vp[0]];e=lm(b,d);nm(a,Rq,
Tq,e,c,d)}),heading:P(uo),hotSpot:P(function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.jh);a.setAttribute("yunits",b.kh)}),scale:P(Jq)}),Vq=Q(wp,["color","scale"]),Wq=Q(wp,{color:P(oq),scale:P(Jq)}),Xq=Q(wp,["color","width"]),Yq=Q(wp,{color:P(oq),width:P(uo)}),wq=Q(wp,{LinearRing:P(Cq)}),uq=Q(wp,{LineString:P(Cq),Point:P(Cq),Polygon:P(Fq),GeometryCollection:P(pq)}),Bq=Q(wp,"name open visibility address phoneNumber description styleUrl Style".split(" ")),zq=Q(wp,
{ExtendedData:P(function(a,b,c){a={node:a};var d=b.names;b=b.values;for(var e=d.length,f=0;f<e;f++)nm(a,Oq,Zq,[{name:d[f],value:b[f]}],c)}),MultiGeometry:P(pq),LineString:P(Cq),LinearRing:P(Cq),Point:P(Cq),Polygon:P(Fq),Style:P(function(a,b,c){a={node:a};var d={},e=b.oa(),f=b.sa(),g=b.Z();b=b.Da();g instanceof Gh&&(d.IconStyle=g);b&&(d.LabelStyle=b);f&&(d.LineStyle=f);e&&(d.PolyStyle=e);b=$q[c[c.length-1].node.namespaceURI];d=lm(d,b);nm(a,ar,km,d,c,b)}),address:P(to),description:P(to),name:P(to),
open:P(so),phoneNumber:P(to),styleUrl:P(to),visibility:P(so)}),Dq=Q(wp,["extrude","tessellate","altitudeMode","coordinates"]),Eq=Q(wp,{extrude:P(so),tessellate:P(so),altitudeMode:P(to),coordinates:P(function(a,b,c){c=c[c.length-1];var d=c.layout;c=c.stride;var e;"XY"==d||"XYM"==d?e=2:"XYZ"==d||"XYZM"==d?e=3:Aa(!1,34);var f,g=b.length,h="";if(0<g){h+=b[0];for(d=1;d<e;++d)h+=","+b[d];for(f=c;f<g;f+=c)for(h+=" "+b[f],d=1;d<e;++d)h+=","+b[f+d]}to(a,h)})}),Gq=Q(wp,{outerBoundaryIs:P(vq),innerBoundaryIs:P(vq)}),
br=Q(wp,{color:P(oq)}),$q=Q(wp,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),ar=Q(wp,{IconStyle:P(function(a,b,c){a={node:a};var d={},e=b.b.o,f=b.ra(),g=b.bg();e={href:e};if(f){e.w=f[0];e.h=f[1];var h=b.he(),k=b.Ae();k&&g&&0!==k[0]&&k[1]!==f[1]&&(e.x=k[0],e.y=g[1]-(k[1]+f[1]));!h||h[0]===f[0]/2&&h[1]===f[1]/2||(d.hotSpot={x:h[0],jh:"pixels",y:f[1]-h[1],kh:"pixels"})}d.Icon=e;f=b.g;1!==f&&(d.scale=f);b=b.o;0!==b&&(d.heading=b);b=Sq[c[c.length-1].node.namespaceURI];d=lm(d,b);nm(a,Uq,km,d,c,b)}),
LabelStyle:P(function(a,b,c){a={node:a};var d={},e=b.oa();e&&(d.color=e.va());(b=b.b)&&1!==b&&(d.scale=b);b=Vq[c[c.length-1].node.namespaceURI];d=lm(d,b);nm(a,Wq,km,d,c,b)}),LineStyle:P(function(a,b,c){a={node:a};var d=Xq[c[c.length-1].node.namespaceURI];b=lm({color:b.va(),width:b.c},d);nm(a,Yq,km,b,c,d)}),PolyStyle:P(function(a,b,c){nm({node:a},br,cr,[b.va()],c)})});function Tq(a,b,c){return Yl(vp[0],"gx:"+c)}function Mq(a,b){return Yl(b[b.length-1].node.namespaceURI,"Placemark")}
function qq(a,b){if(a)return Yl(b[b.length-1].node.namespaceURI,Pq[a.getType()])}var cr=im("color"),Zq=im("Data"),Aq=im("ExtendedData"),Hq=im("innerBoundaryIs"),rq=im("Point"),sq=im("LineString"),xq=im("LinearRing"),tq=im("Polygon"),Iq=im("outerBoundaryIs");
fp.prototype.Nd=function(a,b){b=Ed(this,b);var c=Yl(wp[4],"kml");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",vp[0]);c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var d={node:c},e={};1<a.length?e.Document=a:1==a.length&&(e.Placemark=a[0]);a=Kq[c.namespaceURI];
e=lm(e,a);nm(d,Nq,km,e,[b],a,this);return c};function V(a,b){this.$filter_=b;this.g=void 0;a.has("ngeoMeasureDecimals")&&(this.g=a.get("ngeoMeasureDecimals"));this.b=void 0;a.has("ngeoMeasurePrecision")&&(this.b=a.get("ngeoMeasurePrecision"));this.i=b("number");this.j=b("ngeoUnitPrefix");this.u=b("ngeoNumberCoordinates");this.f=null;this.o=[];if(a.has("ngeoPointfilter")){b=a.get("ngeoPointfilter").split(":");var c=b.shift();this.f=this.$filter_(c);this.o=b}else this.f=null;this.v=a.get("ngeoDownload")}V.$inject=["$injector","$filter"];
V.prototype.Gb=function(a){this.c=a};V.prototype.setProjection=V.prototype.Gb;V.prototype.setStyle=function(a,b){var c=this.getStyle(a);b&&(b=this.getType(a),Pd(["LineString","Polygon","Rectangle"],b)&&c.push(this.Qc()),c.unshift(dr(this,a)));a.setStyle(c)};V.prototype.setStyle=V.prototype.setStyle;
V.prototype.getStyle=function(a){switch(this.getType(a)){case "LineString":var b=this.rd(a);var c=this.me(a);var d=this.pd(a),e=this.od(a);b=[new H({stroke:new sd({color:e,width:b})})];e=[];d&&e.push(this.Lc(a));c&&e.push(this.Mc(a));(c||d)&&b.push(new H({text:er({text:e.join("\n")})}));c=b;break;case "Point":c=this.qd(a);e=this.od(a);d=this.me(a);b=this.pd(a);e=[new H({image:new qd({radius:c,fill:new rd({color:e})})})];var f=[];b&&f.push(this.Lc(a));d&&f.push(this.Mc(a));(d||b)&&e.push(new H({text:er({text:f.join("\n"),
size:10,offsetY:-(c+6.5*f.length+4)})}));c=e;break;case "Circle":case "Polygon":case "Rectangle":c=this.rd(a);e=this.li(a);d=this.od(a);f=this.me(a);var g=this.pd(a);b=d.slice();b[3]=e;var h=fr(a);e=[new H({fill:new rd({color:b}),stroke:new sd({color:d,width:c})})];if(g||f)void 0!==h?(a=gr(a,h),f=pn(a,this.c,this.b,this.j),e.push(new H({geometry:a,fill:new rd({color:b}),stroke:new sd({color:d,width:c}),text:er({text:f,angle:(h%180+180)%180-90})})),e.push(new H({geometry:new Mi(ae(a)),text:er({text:this.i(h,
this.g)+"\u00b0",size:10,offsetX:20*Math.cos((h-90)*Math.PI/180),offsetY:20*Math.sin((h-90)*Math.PI/180)})}))):(c=[],g&&c.push(this.Lc(a)),f&&c.push(this.Mc(a)),(f||g)&&e.push(new H({text:er({text:c.join("\n"),offsetY:-8,Xl:!0})})));c=e;break;case "Text":c=new H({text:er({text:this.Mc(a),size:this.qd(a),angle:this.Sf(a),color:this.od(a),width:this.rd(a)})})}var k;c.constructor===Array?k=c:k=[c];return k};V.prototype.getStyle=V.prototype.getStyle;
function fr(a){a=a.get("z");if(void 0!==a)return"string"==typeof a?+a:a}function hr(a,b){a=a.get(b);return"string"==typeof a?+a:a}
V.prototype.Mh=function(a){var b=[255,255,255,1],c=[0,153,255,1],d=[];a=a.getGeometry();console.assert(a);a=a.getType();"Point"===a?d.push(new H({image:new qd({radius:6,fill:new rd({color:c}),stroke:new sd({color:b,width:1.5})}),zIndex:Infinity})):("LineString"===a?(d.push(new H({stroke:new sd({color:b,width:5})})),d.push(new H({stroke:new sd({color:c,width:3})}))):d.push(new H({stroke:new sd({color:c,width:1.5}),fill:new rd({color:[255,255,255,.5]})})),d.push(this.Qc(!0)));return d};
V.prototype.createEditingStyles=V.prototype.Mh;
V.prototype.Qc=function(a){a=void 0!==a?a:!0;var b={image:new od({radius:6,points:4,angle:Math.PI/4,fill:new rd({color:[255,255,255,.5]}),stroke:new sd({color:[0,0,0,1]})})};a&&(b.geometry=function(a){a=a.getGeometry();if("Point"!=a.getType()){var b,c=[],f=[],g;a instanceof ye?f=a.O():a instanceof Cm?c=a.O():a instanceof Ti?f=a.O()[0]:a instanceof Gm&&(b=a.O());if(b){var h=0;for(g=b.length;h<g;h++)c=c.concat(b[h])}h=0;for(g=c.length;h<g;h++)f=f.concat(c[h]);return f.length?new Am(f):a}});return new H(b)};
V.prototype.getVertexStyle=V.prototype.Qc;function dr(a,b){switch(a.getType(b)){case "Point":a=a.qd(b);var c=new H({image:new qd({radius:a+3,fill:new rd({color:[255,255,255,1]})})});break;case "LineString":case "Circle":case "Polygon":case "Rectangle":a=a.rd(b);c=new H({stroke:new sd({color:[255,255,255,1],width:a+6})});break;case "Text":c=new H({text:er({text:a.Mc(b),size:a.qd(b),angle:a.Sf(b),width:9})})}return c}
function ir(a){var b=a.Sa();delete b.boundedBy;delete b[a.b];delete b.ngeo_feature_type_;return b}va("ngeo.misc.FeatureHelper.getFilteredFeatureValues",ir);V.prototype.Sf=function(a){return+a.get("a")};V.prototype.getAngleProperty=V.prototype.Sf;V.prototype.Vf=function(a){return a.get("c")};V.prototype.getColorProperty=V.prototype.Vf;V.prototype.od=function(a){return Dc(this.Vf(a))};V.prototype.getRGBAColorProperty=V.prototype.od;V.prototype.Mc=function(a){return a.get("n")};
V.prototype.getNameProperty=V.prototype.Mc;V.prototype.li=function(a){return hr(a,"o")};V.prototype.getOpacityProperty=V.prototype.li;V.prototype.pd=function(a){a=a.get("m");void 0===a?a=!1:"string"===typeof a&&(a="true"===a?!0:!1);return Ym(a)};V.prototype.getShowMeasureProperty=V.prototype.pd;V.prototype.me=function(a){a=a.get("b");void 0===a?a=!1:"string"===typeof a&&(a="true"===a?!0:!1);return Ym(a)};V.prototype.getShowLabelProperty=V.prototype.me;V.prototype.qd=function(a){return hr(a,"s")};
V.prototype.getSizeProperty=V.prototype.qd;V.prototype.rd=function(a){return hr(a,"k")};V.prototype.getStrokeProperty=V.prototype.rd;V.prototype.Lf=function(a,b){switch(b){case jr:this.ai(a);break;case kr:this.bi(a)}};V.prototype["export"]=V.prototype.Lf;V.prototype.ai=function(a){var b=new wo;lr(this,a,b,"export.gpx","application/gpx+xml")};V.prototype.exportGPX=V.prototype.ai;V.prototype.bi=function(a){var b=new fp;lr(this,a,b,"export.kml","application/vnd.google-earth.kml+xml")};
V.prototype.exportKML=V.prototype.bi;function lr(a,b,c,d,e){e=void 0!==e?e:"text/plain";var f=[],g;b.forEach(function(b){g=new yd(b.Sa());a.setStyle(g,!1);f.push(g)});b=c.Md(f,a.c?{Kb:"EPSG:4326",kb:a.c}:{});a.v(b,d,e+";charset=utf-8")}
function er(a){a.angle&&(a.rotation=(void 0!==a.angle?a.angle:0)*Math.PI/180,delete a.angle);a.font=["normal",(a.size||10)+"pt","Arial"].join(" ");a.color&&(a.fill=new rd({color:a.color||[0,0,0,1]}),delete a.color);a.stroke=new sd({color:[255,255,255,1],width:a.width||3});delete a.width;return new ep(a)}
V.prototype.Lc=function(a){var b=a.getGeometry(),c="";if(b instanceof Ti)if("Circle"===this.getType(a)){b=fr(a);a=gr(a,b);b=this.c;c=this.b;var d=this.j,e=go(a,this.g,this.i);c=e+=", "+pn(a,b,c,d)}else c=on(b,this.c,this.b,this.j);else b instanceof ye?c=pn(b,this.c,this.b,this.j):b instanceof Mi&&(null===this.f?(a=this.g,c=(0,this.u)(b.O(),a,void 0)):(a=b.O(),b=this.o.slice(0),b.unshift(a),c=this.f.apply(this,[].concat(qa(b)))));return c};V.prototype.getMeasure=V.prototype.Lc;
V.prototype.getType=function(a){var b=a.getGeometry(),c;b instanceof Mi?c=a.get("t")?"Text":"Point":b instanceof Am?c="MultiPoint":b instanceof Ti?c=a.get("l")?"Circle":a.get("r")?"Rectangle":"Polygon":b instanceof Gm?c="MultiPolygon":b instanceof ye?c="LineString":b instanceof Cm&&(c="MultiLineString");return c};V.prototype.getType=V.prototype.getType;
V.prototype.Ij=function(a,b,c){c=void 0!==c?c:250;var d=b.ra();b=N(b);d=ij(b,d);a=a.getGeometry();a.nb(d)||(d=b.getCenter(),a=a instanceof ye?Be(a):a instanceof Ti?(new Mi(a.Kc(),"XYM")).O():a instanceof Mi?a.O():tb(a.I()),b.animate({center:d,duration:c},{center:a,duration:c}))};V.prototype.panMapToFeature=V.prototype.Ij;function gr(a,b){a=a.getGeometry();var c=a.I();c=(c[3]-c[1])/2;a=tb(a.I());return new ye([a,[Math.cos((b-90)*Math.PI/180)*c+a[0],-Math.sin((b-90)*Math.PI/180)*c+a[1]]])}
V.prototype.nd=function(a){var b=a.b,c={};a=a.Sa();for(var d in a)d!==b&&(c[d]=a[d]);return c};V.prototype.getNonSpatialProperties=V.prototype.nd;V.prototype.nf=function(a){var b=a.b,c=a.Sa(),d;for(d in c)d!==b&&a.set(d,void 0)};V.prototype.clearNonSpatialProperties=V.prototype.nf;var jr="GPX",kr="KML";va("ngeo.misc.FeatureHelper.FormatType",{GPX:jr,KML:kr});var mr=angular.module("ngeoFeatureHelper",[jn.name,hn.name]);mr.service("ngeoFeatureHelper",V);S.requires.push(mr.name);function nr(a,b,c){var d,e;this.b=function(a){return/<kml/.test(a)&&/<\/kml>/.test(a)};this.c=function(a){return/<gpx/.test(a)&&/<\/gpx>/.test(a)};this.g=function(b){var e=a.defer();d&&d.readyState===FileReader.LOADING&&d.abort();d=new FileReader;d.onload=function(a){e.resolve(a.target.result)};d.onerror=function(a){a=a.target.error;console.error("Reading file failed: ",a);e.reject({message:20==a.code?c("Operation canceled"):c("Read failed"),reason:a.message})};d.onprogress=function(a){e.notify(a)};
d.readAsText(b);return e.promise};this.load=function(d,g){e&&e.resolve();e=g||a.defer();var f=a.defer();b.get(d,{timeout:e.promise}).then(function(a){f.resolve(a.data)},function(a){console.error("Uploading file failed: ",a);f.reject({message:c("Upload failed"),reason:a})});return f.promise}}nr.$inject=["$q","$http","gettext"];var or=angular.module("ngeoFile",[]);or.service("ngeoFile",nr);S.requires.push(or.name);var pr=angular.module("ngeoFilereader",[]);S.requires.push(pr.name);pr.c=function(a){return{restrict:"A",scope:{fileContent:"=ngeoFilereader",supported:"=?ngeoFilereaderSupported"},link:function(b,c){var d="FileReader"in a;if(b.supported=d)c.on("change",function(c){var d=new a.FileReader;d.onload=function(a){b.$apply(function(){b.fileContent=a.target.result})};d.readAsText(c.target.files[0])})}}};pr.c.$inject=["$window"];pr.directive("ngeoFilereader",pr.c);var qr=angular.module("ngeoGetBrowserLanguage",[]);S.requires.push(qr.name);qr.g=function(a){return function(b){var c=a.navigator;c=c.languages||c.language||c.browserLanguage||c.systemLanguage||c.userLanguage;Array.isArray(c)||(c=[c]);c=c.map(function(a){return a.substring(0,2)});c=c.filter(function(a,b,c){return c.indexOf(a)==b});return c.filter(function(a){return-1!=b.indexOf(a)})[0]}};qr.g.$inject=["$window"];qr.factory("ngeoGetBrowserLanguage",qr.g);var rr=angular.module("ngeoSortable",[]);S.requires.push(rr.name);
rr.c=function(a){return{restrict:"A",link:function(b,c,d){function e(){for(var a=c.children(),d=0;d<a.length;++d)angular.element(a[d]).data("idx",d);a=$(c);d={axis:"y",classes:{"ui-sortable-helper":g.draggerClassName}};g.handleClassName&&(d.handle="."+g.handleClassName);g.placeholderClassName&&(d.placeholder=g.placeholderClassName,d.forcePlaceholderSize=!0);a.sortable(d);a.on("sortupdate",function(a,d){var e=$(d.item[0]).data("idx"),g=d.item.index();$(d.item[0]).data("idx",g);b.$apply(function(){f.splice(g,
0,f.splice(e,1)[0])});h instanceof Function&&h.apply(k,[c,f])})}var f=b.$eval(d.ngeoSortable)||[];b.$watchCollection(function(){return f},function(){f.length&&a(e,0)});var g=function(a){void 0===a?a={handleClassName:"ngeo-sortable-handle"}:void 0===a.handleClassName&&(a.handleClassName="ngeo-sortable-handle");return a}(b.$eval(d.ngeoSortableOptions)),h=b.$eval(d.ngeoSortableCallback),k=b.$eval(d.ngeoSortableCallbackCtx)}}};rr.c.$inject=["$timeout"];rr.directive("ngeoSortable",rr.c);function sr(a,b){this.$filter_=a;this.ba=b}u(sr,$m);sr.$inject=["$filter","gettextCatalog"];function tr(a,b,c,d,e){b=new Date(b);e=e?"UTC":void 0;var f="yyyy",g="yyyy-MM",h="yyyy-MM-dd";d||(d=a.ba,f=d.getString("yyyy"),g=d.getString("M/yyyy"),h=d.getString("M/d/yyyy"));switch(c){case "year":return a.$filter_("date")(b,f,e);case "month":return a.$filter_("date")(b,g,e);case "day":return a.$filter_("date")(b,h,e);default:return b.toISOString().replace(/\.\d{3}/,"")}}
sr.prototype.Jc=function(a,b,c){return"range"===a.mode?tr(this,b.start,a.resolution,!0,c)+"/"+tr(this,b.end,a.resolution,!0,c):tr(this,b.start,a.resolution,!0,c)};sr.prototype.formatWMSTimeParam=sr.prototype.Jc;var ur=angular.module("ngeoWMSTime",[an.name]);ur.service("ngeoWMSTime",sr);S.requires.push(ur.name);var vr=angular.module("ngeoMiscExtraModule",[S.name,Qm.name,Rm.name,Zm.name,bn.name,dn.name,gn.name,mr.name,or.name,pr.name,hn.name,qr.name,rr.name,an.name,ur.name]);var wr=angular.module("gmfDataSourceBeingFiltered",[]);wr.value("gmfDataSourceBeingFiltered",{dataSource:null});ym.requires.push(wr.name);function xr(a){this.i=!1!==a.inRange;this.C=!0===a.visible;this.attributes=a.attributes||null;this.G=a.id;this.F=a.identifierAttribute;this.Y=a.maxResolution;this.N=a.minResolution;this.T=a.name}xr.prototype.kd=function(){return this.attributes};xr.prototype.getAttributes=xr.prototype.kd;xr.prototype.Ne=function(a){this.attributes=a};xr.prototype.setAttributes=xr.prototype.Ne;
aa.Object.defineProperties(xr.prototype,{inRange:{configurable:!0,enumerable:!0,get:function(){return this.i},set:function(a){this.i=a}},visible:{configurable:!0,enumerable:!0,get:function(){return this.C},set:function(a){this.C=a}},id:{configurable:!0,enumerable:!0,get:function(){return this.G}},identifierAttribute:{configurable:!0,enumerable:!0,get:function(){return this.F}},maxResolution:{configurable:!0,enumerable:!0,get:function(){return this.Y}},minResolution:{configurable:!0,enumerable:!0,
get:function(){return this.N}},name:{configurable:!0,enumerable:!0,get:function(){return this.T}},queryable:{configurable:!0,enumerable:!0,get:function(){return!1}},supportsDynamicInRange:{configurable:!0,enumerable:!0,get:function(){return null!==this.maxResolution||null!==this.minResolution}}});function yr(){this.b=new Ih;this.c=null;this.g=[];D(this.b,"add",this.j,this)}yr.prototype.f=function(a){a=a.target.V();zr(this,a)};function zr(a,b){a.b.forEach(function(a){Ar(a,b)})}function Ar(a,b){if(a.supportsDynamicInRange){var c=a.maxResolution,d=a.minResolution;a.inRange=(null===d||void 0===d||b>=d)&&(null===c||void 0===c||b<=c)}}yr.prototype.j=function(a){a=a.element;if(this.c){var b=N(this.c).V();Ar(a,b)}};
aa.Object.defineProperties(yr.prototype,{map:{configurable:!0,enumerable:!0,set:function(a){this.c!==a&&(this.c&&(Ua(this.g),this.g=[]),this.c=a)&&(a=N(a),this.g.push(D(a,"change:resolution",this.f,this)),a=a.V(),zr(this,a))}},collection:{configurable:!0,enumerable:!0,get:function(){return this.b}}});var Br=angular.module("ngeoDataSources",[]);Br.service("ngeoDataSources",yr);S.requires.push(Br.name);function Cr(a){xr.call(this,a);this.c=a.features||new Ih;this.b=new sm({features:this.c,wrapX:!1});this.g=new Hh({source:this.b})}ja(Cr,xr);aa.Object.defineProperties(Cr.prototype,{features:{configurable:!0,enumerable:!0,get:function(){return this.c.b}},featuresCollection:{configurable:!0,enumerable:!0,get:function(){return this.c}},layer:{configurable:!0,enumerable:!0,get:function(){return this.g}},extent:{configurable:!0,enumerable:!0,get:function(){return this.b.I()}}});function Dr(a){this.c=new Ih(a.dataSources);this.u=a.title}Dr.prototype.destroy=function(){this.c.clear()};Dr.prototype.destroy=Dr.prototype.destroy;Dr.prototype.Xf=function(a){return a.visible?Er:Fr};Dr.prototype.getDataSourceState=Dr.prototype.Xf;Dr.prototype.Ib=function(a){this.c.push(a)};Dr.prototype.addDataSource=Dr.prototype.Ib;Dr.prototype.wb=function(a){this.c.remove(a)};Dr.prototype.removeDataSource=Dr.prototype.wb;
Dr.prototype.uk=function(){for(var a=this.visibilityState!==Er,b=t(this.dataSources),c=b.next();!c.done;c=b.next())c=c.value,c.visible!==a&&(c.visible=a)};Dr.prototype.toggleVisibilityState=Dr.prototype.uk;
aa.Object.defineProperties(Dr.prototype,{dataSources:{configurable:!0,enumerable:!0,get:function(){return this.c.b}},dataSourcesCollection:{configurable:!0,enumerable:!0,get:function(){return this.c}},title:{configurable:!0,enumerable:!0,get:function(){return this.u}},visibilityState:{configurable:!0,enumerable:!0,get:function(){for(var a,b=t(this.dataSources),c=b.next();!c.done&&(c=c.value,void 0===a?a=this.Xf(c):this.Xf(c)!==a&&(a=Gr),a!==Gr);c=b.next());return a}}});
var Gr="indeterminate",Fr="off",Er="on";function Hr(a){Dr.call(this,a);this.g=a.injector.get("$rootScope");this.b={}}ja(Hr,Dr);Hr.prototype.Ib=function(a){Dr.prototype.Ib.call(this,a);Ir(this,a)};function Ir(a,b){a.b[b.id]=a.g.$watch(function(){return b.visible},a.f.bind(a,b))}Hr.prototype.f=function(a,b){void 0!==b&&Oe(a.layer,b)};Hr.prototype.wb=function(a){Dr.prototype.wb.call(this,a);this.b[a.id]();delete this.b[a.id]};va("ngeo.filter.Condition",{AND:"&&",NOT:"!",OR:"||"});va("ngeo.format.AttributeType",{Dr:"boolean",Fr:"date",Gr:"datetime",gs:"time",Mr:"geometry",Tr:"number",es:"select",TEXT:"text"});function Jr(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.srsName=a.srsName;this.Eb="";this.c={};this.c["http://www.opengis.net/gml"]={featureMember:fm(Jr.prototype.yd),featureMembers:fm(Jr.prototype.yd)};io.call(this)}u(Jr,io);var Kr=/^[\s\xa0]*$/;m=Jr.prototype;
m.yd=function(a,b){var c=a.localName,d=null;if("FeatureCollection"==c)"http://www.opengis.net/wfs"===a.namespaceURI?d=R([],this.c,a,b,this):d=R(null,this.c,a,b,this);else if("featureMembers"==c||"featureMember"==c){var e=b[0],f=e.featureType,g=e.featureNS,h;if(!f&&a.childNodes){f=[];g={};var k=0;for(h=a.childNodes.length;k<h;++k){var l=a.childNodes[k];if(1===l.nodeType){var n=l.nodeName.split(":").pop();if(-1===f.indexOf(n)){var p="",q=0;l=l.namespaceURI;for(var r in g){if(g[r]===l){p=r;break}++q}p||
(p="p"+q,g[p]=l);f.push(p+":"+n)}}}"featureMember"!=c&&(e.featureType=f,e.featureNS=g)}"string"===typeof g&&(k=g,g={},g.p0=k);e={};f=Array.isArray(f)?f:[f];for(var v in g){n={};k=0;for(h=f.length;k<h;++k)(-1===f[k].indexOf(":")?"p0":f[k].split(":")[0])===v&&(n[f[k].split(":").pop()]="featureMembers"==c?em(this.Kg,this):fm(this.Kg,this));e[g[v]]=n}"featureMember"==c?d=R(void 0,e,a,b):d=R([],e,a,b)}null===d&&(d=[]);return d};
m.Ge=function(a,b){var c=b[0];c.srsName=a.firstElementChild.getAttribute("srsName");c.srsDimension=a.firstElementChild.getAttribute("srsDimension");if(a=R(null,this.mh,a,b,this))return Fd(a,!1,c)};
m.Kg=function(a,b){var c;(c=a.getAttribute("fid"))||(c=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var d={},e;for(a=a.firstElementChild;a;a=a.nextElementSibling){var f=a.localName;if(0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)){var g=Zl(a);Kr.test(g)&&(g=void 0);d[f]=g}else"boundedBy"!==f&&(e=f),d[f]=this.Ge(a,b)}b=new yd(d);e&&zd(b,e);c&&Bd(b,c);return b};
m.Wj=function(a,b){if(a=this.Fe(a,b))return b=new Mi(null),Ni(b,"XYZ",a),b};m.Uj=function(a,b){if(a=R([],this.Xk,a,b,this))return new Am(a)};m.Tj=function(a,b){if(a=R([],this.Wk,a,b,this))return b=new Cm(null),Fm(b,a),b};m.Vj=function(a,b){if(a=R([],this.Yk,a,b,this))return b=new Gm(null),Jm(b,a),b};m.Kj=function(a,b){mm(this.bl,a,b,this)};m.Vi=function(a,b){mm(this.Uk,a,b,this)};m.Lj=function(a,b){mm(this.cl,a,b,this)};m.He=function(a,b){if(a=this.Fe(a,b))return b=new ye(null),ze(b,"XYZ",a),b};
m.kq=function(a,b){if(a=R(null,this.Od,a,b,this))return a};m.Sj=function(a,b){if(a=this.Fe(a,b))return b=new Ki(null),Li(b,"XYZ",a),b};m.Ie=function(a,b){if((a=R([null],this.ef,a,b,this))&&a[0]){b=new Ti(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)Rd(c,a[f]),d.push(c.length);Ui(b,"XYZ",c,d);return b}};m.Fe=function(a,b){return R(null,this.Od,a,b,this)};m.Xk={"http://www.opengis.net/gml":{pointMember:em(Jr.prototype.Kj),pointMembers:em(Jr.prototype.Kj)}};
m.Wk={"http://www.opengis.net/gml":{lineStringMember:em(Jr.prototype.Vi),lineStringMembers:em(Jr.prototype.Vi)}};m.Yk={"http://www.opengis.net/gml":{polygonMember:em(Jr.prototype.Lj),polygonMembers:em(Jr.prototype.Lj)}};m.bl={"http://www.opengis.net/gml":{Point:em(Jr.prototype.Fe)}};m.Uk={"http://www.opengis.net/gml":{LineString:em(Jr.prototype.He)}};m.cl={"http://www.opengis.net/gml":{Polygon:em(Jr.prototype.Ie)}};m.Pd={"http://www.opengis.net/gml":{LinearRing:fm(Jr.prototype.kq)}};
m.Rj=function(a,b){return(a=this.Ge(a,[Dd(this,a,b?b:{})]))?a:null};m.nc=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};b&&z(c,Dd(this,a,b));return this.yd(a,[c])||[]};m.Ke=function(a){return fc(this.srsName?this.srsName:a.firstElementChild.getAttribute("srsName"))};function Lr(a){a=a?a:{};Jr.call(this,a);this.c["http://www.opengis.net/gml"].featureMember=em(Jr.prototype.yd);this.Eb=a.Eb?a.Eb:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}u(Lr,Jr);m=Lr.prototype;
m.Qj=function(a,b){a=Zl(a).replace(/^\s*|\s*$/g,"");var c=b[0].srsName;b="enu";c&&(c=fc(c))&&(b=c.b);a=a.trim().split(/\s+/);for(var d,e,f=[],g=0,h=a.length;g<h;g++)e=a[g].split(/,+/),c=parseFloat(e[0]),d=parseFloat(e[1]),e=3===e.length?parseFloat(e[2]):0,"en"===b.substr(0,2)?f.push(c,d,e):f.push(d,c,e);return f};m.iq=function(a,b){a=R([null],this.Ok,a,b,this);return ib(a[1][0],a[1][1],a[1][3],a[1][4])};m.Un=function(a,b){(a=R(void 0,this.Pd,a,b,this))&&b[b.length-1].push(a)};
m.Up=function(a,b){(a=R(void 0,this.Pd,a,b,this))&&(b[b.length-1][0]=a)};m.Od={"http://www.opengis.net/gml":{coordinates:fm(Lr.prototype.Qj)}};m.ef={"http://www.opengis.net/gml":{innerBoundaryIs:Lr.prototype.Un,outerBoundaryIs:Lr.prototype.Up}};m.Ok={"http://www.opengis.net/gml":{coordinates:em(Lr.prototype.Qj)}};
m.mh={"http://www.opengis.net/gml":{Point:fm(Jr.prototype.Wj),MultiPoint:fm(Jr.prototype.Uj),LineString:fm(Jr.prototype.He),MultiLineString:fm(Jr.prototype.Tj),LinearRing:fm(Jr.prototype.Sj),Polygon:fm(Jr.prototype.Ie),MultiPolygon:fm(Jr.prototype.Vj),Box:fm(Lr.prototype.iq)}};function X(a){a=a?a:{};Jr.call(this,a);this.v=void 0!==a.Ue?a.Ue:!1;this.g=void 0!==a.curve?a.curve:!1;this.i=void 0!==a.zg?a.zg:!0;this.o=void 0!==a.Ag?a.Ag:!0;this.Eb=a.Eb?a.Eb:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd";this.hasZ=void 0!==a.hasZ?a.hasZ:!1}u(X,Jr);m=X.prototype;m.nq=function(a,b){if(a=R([],this.Vk,a,b,this))return b=new Cm(null),Fm(b,a),b};m.oq=function(a,b){if(a=R([],this.Zk,a,b,this))return b=new Gm(null),Jm(b,a),b};
m.Th=function(a,b){mm(this.Pk,a,b,this)};m.tk=function(a,b){mm(this.gl,a,b,this)};m.pq=function(a,b){return R([null],this.al,a,b,this)};m.rq=function(a,b){return R([null],this.dl,a,b,this)};m.qq=function(a,b){return R([null],this.ef,a,b,this)};m.mq=function(a,b){return R([null],this.Od,a,b,this)};m.Xn=function(a,b){(a=R(void 0,this.Pd,a,b,this))&&b[b.length-1].push(a)};m.Yl=function(a,b){(a=R(void 0,this.Pd,a,b,this))&&(b[b.length-1][0]=a)};
m.Xj=function(a,b){if((a=R([null],this.hl,a,b,this))&&a[0]){b=new Ti(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)Rd(c,a[f]),d.push(c.length);Ui(b,"XYZ",c,d);return b}};m.Pj=function(a,b){if(a=R([null],this.Qk,a,b,this))return b=new ye(null),ze(b,"XYZ",a),b};m.jq=function(a,b){a=R([null],this.Tk,a,b,this);return ib(a[1][0],a[1][1],a[2][0],a[2][1])};
m.lq=function(a,b){var c=Zl(a),d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;a=[];for(var e;e=d.exec(c);)a.push(parseFloat(e[1])),c=c.substr(e[0].length);if(""===c){b=b[0].srsName;c="enu";b&&(c=fc(b).b);if("neu"===c)for(b=0,c=a.length;b<c;b+=3)d=a[b],a[b]=a[b+1],a[b+1]=d;b=a.length;2==b&&a.push(0);if(0!==b)return a}};
m.Mg=function(a,b){var c=Zl(a).replace(/^\s*|\s*$/g,"");b=b[0];var d=b.srsName,e=b.srsDimension;b="enu";d&&(b=fc(d).b);c=c.split(/\s+/);d=2;a.getAttribute("srsDimension")?d=ro(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=ro(a.getAttribute("dimension")):a.parentNode.getAttribute("srsDimension")?d=ro(a.parentNode.getAttribute("srsDimension")):e&&(d=ro(e));for(var f,g=[],h=0,k=c.length;h<k;h+=d)a=parseFloat(c[h]),e=parseFloat(c[h+1]),f=3===d?parseFloat(c[h+2]):0,"en"===b.substr(0,2)?
g.push(a,e,f):g.push(e,a,f);return g};m.Od={"http://www.opengis.net/gml":{pos:fm(X.prototype.lq),posList:fm(X.prototype.Mg)}};m.ef={"http://www.opengis.net/gml":{interior:X.prototype.Xn,exterior:X.prototype.Yl}};
m.mh={"http://www.opengis.net/gml":{Point:fm(Jr.prototype.Wj),MultiPoint:fm(Jr.prototype.Uj),LineString:fm(Jr.prototype.He),MultiLineString:fm(Jr.prototype.Tj),LinearRing:fm(Jr.prototype.Sj),Polygon:fm(Jr.prototype.Ie),MultiPolygon:fm(Jr.prototype.Vj),Surface:fm(X.prototype.Xj),MultiSurface:fm(X.prototype.oq),Curve:fm(X.prototype.Pj),MultiCurve:fm(X.prototype.nq),Envelope:fm(X.prototype.jq)}};m.Vk={"http://www.opengis.net/gml":{curveMember:em(X.prototype.Th),curveMembers:em(X.prototype.Th)}};
m.Zk={"http://www.opengis.net/gml":{surfaceMember:em(X.prototype.tk),surfaceMembers:em(X.prototype.tk)}};m.Pk={"http://www.opengis.net/gml":{LineString:em(Jr.prototype.He),Curve:em(X.prototype.Pj)}};m.gl={"http://www.opengis.net/gml":{Polygon:em(Jr.prototype.Ie),Surface:em(X.prototype.Xj)}};m.hl={"http://www.opengis.net/gml":{patches:fm(X.prototype.pq)}};m.Qk={"http://www.opengis.net/gml":{segments:fm(X.prototype.rq)}};m.Tk={"http://www.opengis.net/gml":{lowerCorner:em(X.prototype.Mg),upperCorner:em(X.prototype.Mg)}};
m.al={"http://www.opengis.net/gml":{PolygonPatch:fm(X.prototype.qq)}};m.dl={"http://www.opengis.net/gml":{LineStringSegment:fm(X.prototype.mq)}};function Mr(a,b,c){var d=c[c.length-1];c=d.hasZ;a.setAttribute("srsDimension",c?3:2);d=d.srsName;b=b.O();for(var e=b.length,f=Array(e),g,h=0;h<e;++h){g=b[h];var k=h,l=c,n="enu";d&&(n=fc(d).b);n="en"===n.substr(0,2)?g[0]+" "+g[1]:g[1]+" "+g[0];l&&(n+=" "+(g[2]||0));f[k]=n}to(a,f.join(" "))}
m.pj=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Yl(a.namespaceURI,"pos");a.appendChild(d);c=c[c.length-1];a=c.hasZ;d.setAttribute("srsDimension",a?3:2);var e=c.srsName;c="enu";e&&(c=fc(e).b);b=b.O();c="en"===c.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0];a&&(c+=" "+(b[2]||0));to(d,c)};var Nr={"http://www.opengis.net/gml":{lowerCorner:P(to),upperCorner:P(to)}};m=X.prototype;
m.hp=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);nm({node:a},Nr,km,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};m.mj=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Yl(a.namespaceURI,"posList");a.appendChild(d);Mr(d,b,c)};m.gp=function(a,b){a=b[b.length-1];b=a.node;var c=a.exteriorWritten;void 0===c&&(a.exteriorWritten=!0);return Yl(b.namespaceURI,void 0!==c?"interior":"exterior")};
m.xe=function(a,b,c){var d=c[c.length-1],e=d.hasZ;d=d.srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=Wi(b),nm({node:a,hasZ:e,srsName:d},Or,this.gp,b,c,void 0,this)):"Surface"===a.nodeName&&(e=Yl(a.namespaceURI,"patches"),a.appendChild(e),a=Yl(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.xe(a,b,c))};
m.we=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=Yl(a.namespaceURI,"posList"),a.appendChild(d),Mr(d,b,c)):"Curve"===a.nodeName&&(d=Yl(a.namespaceURI,"segments"),a.appendChild(d),a=Yl(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.we(a,b,c))};
m.oj=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.surface;f&&a.setAttribute("srsName",f);b=Im(b);nm({node:a,hasZ:e,srsName:f,Ue:d},Pr,this.u,b,c,void 0,this)};m.jp=function(a,b,c){var d=c[c.length-1],e=d.srsName;d=d.hasZ;e&&a.setAttribute("srsName",e);b=Bm(b);nm({node:a,hasZ:d,srsName:e},Qr,im("pointMember"),b,c,void 0,this)};
m.nj=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.curve;f&&a.setAttribute("srsName",f);b=Em(b);nm({node:a,hasZ:e,srsName:f,curve:d},Rr,this.u,b,c,void 0,this)};m.qj=function(a,b,c){var d=Yl(a.namespaceURI,"LinearRing");a.appendChild(d);this.mj(d,b,c)};m.rj=function(a,b,c){var d=this.b(b,c);d&&(a.appendChild(d),this.xe(d,b,c))};m.kp=function(a,b,c){var d=Yl(a.namespaceURI,"Point");a.appendChild(d);this.pj(d,b,c)};
m.lj=function(a,b,c){var d=this.b(b,c);d&&(a.appendChild(d),this.we(d,b,c))};m.Vc=function(a,b,c){var d=c[c.length-1],e=z({},d);e.node=a;var f;Array.isArray(b)?d.Kb?f=qc(b,d.kb,d.Kb):f=b:f=Fd(b,!0,d);nm(e,Sr,this.b,[f],c,void 0,this)};
m.ip=function(a,b,c){var d=b.f;d&&a.setAttribute("fid",d);d=c[c.length-1];var e=d.featureNS,f=b.b;d.qc||(d.qc={},d.qc[e]={});var g=b.Sa();b=[];var h=[];for(l in g){var k=g[l];null!==k&&(b.push(l),h.push(k),l==f||k instanceof yc?l in d.qc[e]||(d.qc[e][l]=P(this.Vc,this)):l in d.qc[e]||(d.qc[e][l]=P(to)))}var l=z({},d);l.node=a;nm(l,d.qc,im(void 0,e),h,c,b)};
var Pr={"http://www.opengis.net/gml":{surfaceMember:P(X.prototype.rj),polygonMember:P(X.prototype.rj)}},Qr={"http://www.opengis.net/gml":{pointMember:P(X.prototype.kp)}},Rr={"http://www.opengis.net/gml":{lineStringMember:P(X.prototype.lj),curveMember:P(X.prototype.lj)}},Or={"http://www.opengis.net/gml":{exterior:P(X.prototype.qj),interior:P(X.prototype.qj)}},Sr={"http://www.opengis.net/gml":{Curve:P(X.prototype.we),MultiCurve:P(X.prototype.nj),Point:P(X.prototype.pj),MultiPoint:P(X.prototype.jp),
LineString:P(X.prototype.we),MultiLineString:P(X.prototype.nj),LinearRing:P(X.prototype.mj),Polygon:P(X.prototype.xe),MultiPolygon:P(X.prototype.oj),Surface:P(X.prototype.xe),MultiSurface:P(X.prototype.oj),Envelope:P(X.prototype.hp)}},Tr={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};X.prototype.u=function(a,b){return Yl("http://www.opengis.net/gml",Tr[b[b.length-1].node.nodeName])};
X.prototype.b=function(a,b){var c=b[b.length-1];b=c.multiSurface;var d=c.surface,e=c.curve;c=c.multiCurve;Array.isArray(a)?a="Envelope":(a=a.getType(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===d?a="Surface":"LineString"===a&&!0===e?a="Curve":"MultiLineString"===a&&!0===c&&(a="MultiCurve"));return Yl("http://www.opengis.net/gml",a)};
X.prototype.ih=function(a,b){b=Ed(this,b);var c=Yl("http://www.opengis.net/gml","geom"),d={node:c,hasZ:this.hasZ,srsName:this.srsName,curve:this.g,Ue:this.v,Ag:this.o,zg:this.i};b&&z(d,b);this.Vc(c,a,[d]);return c};
X.prototype.Nd=function(a,b){b=Ed(this,b);var c=Yl("http://www.opengis.net/gml","featureMembers");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.Eb);var d={srsName:this.srsName,hasZ:this.hasZ,curve:this.g,Ue:this.v,Ag:this.o,zg:this.i,featureNS:this.featureNS,featureType:this.featureType};b&&z(d,b);b=[d];var e=b[b.length-1];d=e.featureType;var f=e.featureNS,g={};g[f]={};g[f][d]=P(this.ip,this);e=z({},e);e.node=c;nm(e,g,im(d,f),a,b);return c};function Ur(a){this.Hb=a};function ts(a,b){this.Hb=a;this.conditions=Array.prototype.slice.call(arguments,1);Aa(2<=this.conditions.length,57)}u(ts,Ur);function us(a){var b=["And"].concat(Array.prototype.slice.call(arguments));ts.apply(this,b)}u(us,ts);function vs(a,b,c){this.Hb="BBOX";this.geometryName=a;this.extent=b;this.srsName=c}u(vs,Ur);function ws(a,b,c,d){this.Hb=a;this.geometryName=b||"the_geom";this.geometry=c;this.srsName=d}u(ws,Ur);function xs(a,b,c){ws.call(this,"Contains",a,b,c)}u(xs,ws);function ys(a,b){this.Hb=a;this.propertyName=b}u(ys,Ur);function zs(a,b,c){ys.call(this,"During",a);this.c=b;this.end=c}u(zs,ys);function As(a,b,c,d){ys.call(this,a,b);this.expression=c;this.c=d}u(As,ys);function Bs(a,b,c){As.call(this,"PropertyIsEqualTo",a,b,c)}u(Bs,As);function Cs(a,b){As.call(this,"PropertyIsGreaterThan",a,b)}u(Cs,As);function Ds(a,b){As.call(this,"PropertyIsGreaterThanOrEqualTo",a,b)}u(Ds,As);function Es(a,b,c){ws.call(this,"Intersects",a,b,c)}u(Es,ws);function Fs(a,b,c){ys.call(this,"PropertyIsBetween",a);this.lowerBoundary=b;this.upperBoundary=c}u(Fs,ys);function Gs(a,b,c,d,e,f){ys.call(this,"PropertyIsLike",a);this.g=b;this.j=void 0!==c?c:"*";this.f=void 0!==d?d:".";this.b=void 0!==e?e:"!";this.c=f}u(Gs,ys);function Hs(a,b){As.call(this,"PropertyIsLessThan",a,b)}u(Hs,As);function Is(a,b){As.call(this,"PropertyIsLessThanOrEqualTo",a,b)}u(Is,As);function Js(a){this.Hb="Not";this.condition=a}u(Js,Ur);function Ks(a,b,c){As.call(this,"PropertyIsNotEqualTo",a,b,c)}u(Ks,As);function Ls(a){var b=["Or"].concat(Array.prototype.slice.call(arguments));ts.apply(this,b)}u(Ls,ts);function Ms(a,b,c){ws.call(this,"Within",a,b,c)}u(Ms,ws);function Ns(a){var b=[null].concat(Array.prototype.slice.call(arguments));return new (Function.prototype.bind.apply(us,b))}function Os(a){var b=[null].concat(Array.prototype.slice.call(arguments));return new (Function.prototype.bind.apply(Ls,b))};function Ps(a){a=a?a:{};this.b=a.featureType;this.g=a.featureNS;this.c=a.Ei?a.Ei:new X;this.i=a.Eb?a.Eb:Qs["1.1.0"];io.call(this)}u(Ps,io);var Qs={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};
Ps.prototype.nc=function(a,b){var c={featureType:this.b,featureNS:this.g};z(c,Dd(this,a,b?b:{}));b=[c];this.c.c["http://www.opengis.net/gml"].featureMember=em(Jr.prototype.yd);(a=R([],this.c.c,a,b,this.c))||(a=[]);return a};function Rs(a,b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType==Node.ELEMENT_NODE)return Ss(a,b)}var Ts={"http://www.opengis.net/gml":{boundedBy:O(Jr.prototype.Ge,"bounds")}};
function Ss(a,b){var c={},d=ro(b.getAttribute("numberOfFeatures"));c.numberOfFeatures=d;return R(c,Ts,b,[],a.c)}var Us={"http://www.opengis.net/wfs":{PropertyName:P(to)}};function Vs(a,b,c){a={node:a};b=b.conditions;for(var d=0,e=b.length;d<e;++d){var f=b[d];nm(a,Ws,im(f.Hb),[f],c)}}function Xs(a,b){void 0!==b.c&&a.setAttribute("matchCase",b.c.toString());Ys(a,b.propertyName);Zs(a,""+b.expression)}function $s(a,b,c){a=Yl("http://www.opengis.net/ogc",a);to(a,c);b.appendChild(a)}
function Ys(a,b){$s("PropertyName",a,b)}function Zs(a,b){$s("Literal",a,b)}function at(a,b){var c=Yl("http://www.opengis.net/gml","TimeInstant");a.appendChild(c);a=Yl("http://www.opengis.net/gml","timePosition");c.appendChild(a);to(a,b)}
var Ws={"http://www.opengis.net/wfs":{Query:P(function(a,b,c){var d=c[c.length-1],e=d.featurePrefix,f=d.featureNS,g=d.propertyNames,h=d.srsName;if(e){var k=(e?e:"feature")+":";b=0===b.indexOf(k)?b:k+b}a.setAttribute("typeName",b);h&&a.setAttribute("srsName",h);f&&a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+e,f);e=z({},d);e.node=a;nm(e,Us,im("PropertyName"),g,c);if(d=d.filter)g=Yl("http://www.opengis.net/ogc","Filter"),a.appendChild(g),nm({node:g},Ws,im(d.Hb),[d],c)})},"http://www.opengis.net/ogc":{During:P(function(a,
b){var c=Yl("http://www.opengis.net/fes","ValueReference");to(c,b.propertyName);a.appendChild(c);c=Yl("http://www.opengis.net/gml","TimePeriod");a.appendChild(c);a=Yl("http://www.opengis.net/gml","begin");c.appendChild(a);at(a,b.c);a=Yl("http://www.opengis.net/gml","end");c.appendChild(a);at(a,b.end)}),And:P(Vs),Or:P(Vs),Not:P(function(a,b,c){b=b.condition;nm({node:a},Ws,im(b.Hb),[b],c)}),BBOX:P(function(a,b,c){c[c.length-1].srsName=b.srsName;Ys(a,b.geometryName);X.prototype.Vc(a,b.extent,c)}),Contains:P(function(a,
b,c){c[c.length-1].srsName=b.srsName;Ys(a,b.geometryName);X.prototype.Vc(a,b.geometry,c)}),Intersects:P(function(a,b,c){c[c.length-1].srsName=b.srsName;Ys(a,b.geometryName);X.prototype.Vc(a,b.geometry,c)}),Within:P(function(a,b,c){c[c.length-1].srsName=b.srsName;Ys(a,b.geometryName);X.prototype.Vc(a,b.geometry,c)}),PropertyIsEqualTo:P(Xs),PropertyIsNotEqualTo:P(Xs),PropertyIsLessThan:P(Xs),PropertyIsLessThanOrEqualTo:P(Xs),PropertyIsGreaterThan:P(Xs),PropertyIsGreaterThanOrEqualTo:P(Xs),PropertyIsNull:P(function(a,
b){Ys(a,b.propertyName)}),PropertyIsBetween:P(function(a,b){Ys(a,b.propertyName);var c=Yl("http://www.opengis.net/ogc","LowerBoundary");a.appendChild(c);Zs(c,""+b.lowerBoundary);c=Yl("http://www.opengis.net/ogc","UpperBoundary");a.appendChild(c);Zs(c,""+b.upperBoundary)}),PropertyIsLike:P(function(a,b){a.setAttribute("wildCard",b.j);a.setAttribute("singleChar",b.f);a.setAttribute("escapeChar",b.b);void 0!==b.c&&a.setAttribute("matchCase",b.c.toString());Ys(a,b.propertyName);Zs(a,""+b.g)})}};
function bt(a,b){var c=Yl("http://www.opengis.net/wfs","GetFeature");c.setAttribute("service","WFS");c.setAttribute("version","1.1.0");if(b){b.handle&&c.setAttribute("handle",b.handle);b.Dg&&c.setAttribute("outputFormat",b.Dg);void 0!==b.maxFeatures&&c.setAttribute("maxFeatures",b.maxFeatures);b.resultType&&c.setAttribute("resultType",b.resultType);void 0!==b.Wq&&c.setAttribute("startIndex",b.Wq);void 0!==b.count&&c.setAttribute("count",b.count);var d=b.filter;if(b.bbox){Aa(b.geometryName,12);var e=
new vs(b.geometryName,b.bbox,b.srsName);d?d=Ns(d,e):d=e}}c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",a.i);a={node:c,srsName:b.srsName,featureNS:b.featureNS?b.featureNS:a.g,featurePrefix:b.featurePrefix,geometryName:b.geometryName,filter:d,propertyNames:b.hq?b.hq:[]};Aa(Array.isArray(b.jd),11);b=b.jd;a=[a];d=z({},a[a.length-1]);d.node=c;nm(d,Ws,im("Query"),b,a);return c}
Ps.prototype.Pg=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.Ke(a);return null};Ps.prototype.Ke=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild)for(a=a.firstElementChild.firstElementChild,a=a.firstElementChild;a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var b=[{}];this.c.Ge(a,b);return fc(b.pop().srsName)}return null};function ct(a){a=a?a:{};this.g="http://mapserver.gis.umn.edu/mapserver";this.c=new Lr;this.b=a.layers?a.layers:null;io.call(this)}u(ct,io);m=ct.prototype;m.getLayers=function(){return this.b};
m.nc=function(a,b){var c={};b&&z(c,Dd(this,a,b));c=[c];a.setAttribute("namespaceURI",this.g);var d=a.localName;b=[];if(0!==a.childNodes.length){if("msGMLOutput"==d)for(var e=0,f=a.childNodes.length;e<f;e++){var g=a.childNodes[e];if(g.nodeType===Node.ELEMENT_NODE){var h=c[0],k=g.localName.replace("_layer","");if(!this.b||Pd(this.b,k)){k+="_feature";h.featureType=k;h.featureNS=this.g;var l={};l[k]=em(this.c.Kg,this.c);h=Q([h.featureNS,null],l);g.setAttribute("namespaceURI",this.g);(g=R([],h,g,c,this.c))&&
Rd(b,g)}}}"FeatureCollection"==d&&(a=R([],this.c.c,a,[{}],this.c))&&(b=a)}return b};m.Kk=function(){};m.Nd=function(){};m.ih=function(){};function dt(a){xr.call(this,a);this.g=a.dimensionsConfig||null;this.f=a.filterCondition||"&&";this.c=a.filterRules||null;this.j=a.filtrable||null;this.K=!0===a.copyable;this.U=a.dimensions||null;this.o=a.geometryName||et;this.wa=a.ogcImageType||"image/png";this.W=a.ogcLayers||null;this.u=a.ogcServerType||ft;this.ia=a.ogcType||gt;this.Qa=!0===a.snappable;this.qa=!1!==a.snappingToEdges;this.ua=!1!==a.snappingToVertice;this.za=void 0!==a.snappingTolerance?a.snappingTolerance:10;this.Ea=a.timeAttributeName;
this.v=a.timeLowerValue;this.Fa=void 0!==a.timeProperty?a.timeProperty:null;this.B=a.timeUpperValue;this.Na=a.wfsFeatureNS||ht[this.u];this.jb=a.wfsFeaturePrefix||it;this.b=a.wfsOutputFormat||jt;this.cc=a.wfsUrl;this.Jf=a.wmsInfoFormat||kt;this.Of=!0===a.wmsIsSingleTile;this.Rf=a.wmsUrl;this.rg=a.wmtsLayer;this.ug=a.wmtsUrl;a=[];if(this.queryable&&this.ogcLayers)for(var b=t(this.ogcLayers),c=b.next();!c.done;c=b.next())c=c.value,c.queryable&&a.push(c.name);b=null;this.supportsWFS&&a.length&&(b=void 0,
this.b===jt?b=new X:this.b===lt&&(b=new Lr),b=new Ps({featureNS:this.wfsFeatureNS,featureType:a,Ei:b}));this.rb=b;b=null;this.supportsWMS&&a.length&&this.wmsInfoFormat===kt&&(b=new ct({layers:a}));this.gd=b}ja(dt,xr);dt.prototype.kd=function(){return xr.prototype.attributes};dt.prototype.Ne=function(a){xr.prototype.Ne.call(this,a);a=et;if(this.attributes)for(var b=t(this.attributes),c=b.next();!c.done;c=b.next())if(c=c.value,"geometry"===c.type){a=c.name;break}this.o=a};
dt.prototype.combinableWithDataSourceForWFS=function(a){return this.combinableForWFS&&a.combinableForWFS&&this.supportsWFS&&a.supportsWFS&&this.queryable&&a.queryable&&this.wfsUrl===a.wfsUrl&&this.haveTheSameActiveDimensions(a)};dt.prototype.combinableWithDataSourceForWFS=dt.prototype.combinableWithDataSourceForWFS;
dt.prototype.combinableWithDataSourceForWMS=function(a){return this.combinableForWMS&&a.combinableForWMS&&this.supportsWMS&&a.supportsWMS&&this.queryable&&a.queryable&&this.wmsUrl===a.wmsUrl&&this.haveTheSameActiveDimensions(a)};dt.prototype.combinableWithDataSourceForWMS=dt.prototype.combinableWithDataSourceForWMS;dt.prototype.Ti=function(a,b){return!!this.je(a,void 0===b?!1:b).length};dt.prototype.isAnyOGCLayerInRange=dt.prototype.Ti;
dt.prototype.je=function(a,b){b=void 0===b?!1:b;var c=[];if(this.ogcLayers)for(var d=t(this.ogcLayers),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.maxResolution,g=e.minResolution;f=void 0===f||a<=f;(void 0===g||a>=g)&&f&&(!b||e.queryable)&&c.push(e.name)}return c};dt.prototype.getInRangeOGCLayerNames=dt.prototype.je;dt.prototype.gc=function(a){a=void 0===a?!1:a;var b=[];if(this.ogcLayers)for(var c=t(this.ogcLayers),d=c.next();!d.done;d=c.next())d=d.value,a&&!d.queryable||b.push(d.name);return b};
dt.prototype.getOGCLayerNames=dt.prototype.gc;dt.prototype.Zf=function(){return this.gc()[0]};dt.prototype.getFiltrableOGCLayerName=dt.prototype.Zf;dt.prototype.haveTheSameActiveDimensions=function(a){var b=!0,c=this.activeDimensions;a=a.activeDimensions;for(var d in c)if(c[d]!==a[d]){b=!1;break}if(b)for(var e in a)if(a[e]!==c[e]){b=!1;break}return b};dt.prototype.haveTheSameActiveDimensions=dt.prototype.haveTheSameActiveDimensions;
aa.Object.defineProperties(dt.prototype,{dimensionsConfig:{configurable:!0,enumerable:!0,get:function(){return this.g},set:function(a){this.g=a}},filterCondition:{configurable:!0,enumerable:!0,get:function(){return this.f},set:function(a){this.f=a}},filterRules:{configurable:!0,enumerable:!0,get:function(){return this.c},set:function(a){this.c=a}},timeLowerValue:{configurable:!0,enumerable:!0,get:function(){return this.v},set:function(a){this.v=a}},timeRangeValue:{configurable:!0,enumerable:!0,get:function(){var a=
null,b=this.timeLowerValue,c=this.timeUpperValue;void 0!==b&&(a={end:c,start:b});return a},set:function(a){a?(this.timeUpperValue=a.end,this.timeLowerValue=a.start):this.timeLowerValue=this.timeUpperValue=void 0}},timeUpperValue:{configurable:!0,enumerable:!0,get:function(){return this.B},set:function(a){this.B=a}},copyable:{configurable:!0,enumerable:!0,get:function(){return this.K}},filtrable:{configurable:!0,enumerable:!0,get:function(){return this.j},set:function(a){this.j=a}},geometryName:{configurable:!0,
enumerable:!0,get:function(){return this.o}},ogcImageType:{configurable:!0,enumerable:!0,get:function(){return this.wa}},ogcLayers:{configurable:!0,enumerable:!0,get:function(){return this.W}},ogcServerType:{configurable:!0,enumerable:!0,get:function(){return this.u}},ogcType:{configurable:!0,enumerable:!0,get:function(){return this.ia}},snappable:{configurable:!0,enumerable:!0,get:function(){return this.Qa}},snappingToEdges:{configurable:!0,enumerable:!0,get:function(){return this.qa}},snappingToVertice:{configurable:!0,
enumerable:!0,get:function(){return this.ua}},snappingTolerance:{configurable:!0,enumerable:!0,get:function(){return this.za}},timeAttributeName:{configurable:!0,enumerable:!0,get:function(){return this.Ea}},timeProperty:{configurable:!0,enumerable:!0,get:function(){return this.Fa}},wfsFeatureNS:{configurable:!0,enumerable:!0,get:function(){return this.Na}},wfsFeaturePrefix:{configurable:!0,enumerable:!0,get:function(){return this.jb}},wfsOutputFormat:{configurable:!0,enumerable:!0,get:function(){return this.b}},
wfsUrl:{configurable:!0,enumerable:!0,get:function(){return this.cc}},wmsInfoFormat:{configurable:!0,enumerable:!0,get:function(){return this.Jf}},wmsIsSingleTile:{configurable:!0,enumerable:!0,get:function(){return this.Of}},wmsUrl:{configurable:!0,enumerable:!0,get:function(){return this.Rf}},wmtsLayer:{configurable:!0,enumerable:!0,get:function(){return this.rg}},wmtsUrl:{configurable:!0,enumerable:!0,get:function(){return this.ug}},activeDimensions:{configurable:!0,enumerable:!0,get:function(){var a=
{},b=this.U||{},c=this.dimensionsConfig||{},d;for(d in c)null===c[d]?void 0!==b[d]&&null!==b[d]&&(a[d]=b[d]):a[d]=c[d];return a}},combinableForWFS:{configurable:!0,enumerable:!0,get:function(){return null===this.c&&null===this.timeRangeValue}},combinableForWMS:{configurable:!0,enumerable:!0,get:function(){return null===this.c&&null===this.timeRangeValue}},queryable:{configurable:!0,enumerable:!0,get:function(){var a=!1;if((this.supportsWMS||this.supportsWFS)&&this.ogcLayers)for(var b=t(this.ogcLayers),
c=b.next();!c.done;c=b.next())if(!0===c.value.queryable){a=!0;break}return a}},supportsWFS:{configurable:!0,enumerable:!0,get:function(){return void 0!==this.wfsUrl}},supportsAttributes:{configurable:!0,enumerable:!0,get:function(){return null!==this.attributes||this.supportsWFS&&null!==this.ogcLayers&&1===this.ogcLayers.length&&!0===this.ogcLayers[0].queryable}},supportsWMS:{configurable:!0,enumerable:!0,get:function(){return void 0!==this.wmsUrl}},supportsWMTS:{configurable:!0,enumerable:!0,get:function(){return void 0!==
this.wmtsUrl}},wfsFormat:{configurable:!0,enumerable:!0,get:function(){return this.rb}},wmsFormat:{configurable:!0,enumerable:!0,get:function(){return this.gd}}});var et="the_geom",ft="mapserver",gt="WMS",ht={geoserver:"http://www.opengis.net/gml/3.2",mapserver:"http://mapserver.gis.umn.edu/mapserver",qgisserver:"http://www.qgis.org/gml"},it="feature",lt="GML2",jt="GML3",kt="application/vnd.ogc.gml";function mt(a){Dr.call(this,a);this.j=a.url}ja(mt,Dr);aa.Object.defineProperties(mt.prototype,{url:{configurable:!0,enumerable:!0,get:function(){return this.j}}});function nt(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function ot(){}ot.prototype.b=function(a){return am(a)?this.g(a):bm(a)?this.c(a):"string"===typeof a?(a=cm(a),this.g(a)):null};function pt(){}u(pt,ot);pt.prototype.g=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};pt.prototype.c=function(a){return(a=R({},qt,a,[]))?a:null};
var rt=[null,"http://www.opengis.net/ows/1.1"],qt=Q(rt,{ServiceIdentification:O(function(a,b){return R({},st,a,b)}),ServiceProvider:O(function(a,b){return R({},tt,a,b)}),OperationsMetadata:O(function(a,b){return R({},ut,a,b)})}),vt=Q(rt,{DeliveryPoint:O(T),City:O(T),AdministrativeArea:O(T),PostalCode:O(T),Country:O(T),ElectronicMailAddress:O(T)}),wt=Q(rt,{Value:gm(function(a){return T(a)})}),xt=Q(rt,{AllowedValues:O(function(a,b){return R({},wt,a,b)})}),zt=Q(rt,{Phone:O(function(a,b){return R({},
yt,a,b)}),Address:O(function(a,b){return R({},vt,a,b)})}),Bt=Q(rt,{HTTP:O(function(a,b){return R({},At,a,b)})}),At=Q(rt,{Get:gm(function(a,b){var c=nt(a);if(c)return R({href:c},Ct,a,b)}),Post:void 0}),Dt=Q(rt,{DCP:O(function(a,b){return R({},Bt,a,b)})}),ut=Q(rt,{Operation:function(a,b){var c=a.getAttribute("name");(a=R({},Dt,a,b))&&(b[b.length-1][c]=a)}}),yt=Q(rt,{Voice:O(T),Facsimile:O(T)}),Ct=Q(rt,{Constraint:gm(function(a,b){var c=a.getAttribute("name");if(c)return R({name:c},xt,a,b)})}),Et=Q(rt,
{IndividualName:O(T),PositionName:O(T),ContactInfo:O(function(a,b){return R({},zt,a,b)})}),st=Q(rt,{Abstract:O(T),AccessConstraints:O(T),Fees:O(T),Title:O(T),ServiceTypeVersion:O(T),ServiceType:O(T)}),tt=Q(rt,{ProviderName:O(T),ProviderSite:O(nt),ServiceContact:O(function(a,b){return R({},Et,a,b)})});function Ft(){this.f=new pt}u(Ft,ot);Ft.prototype.g=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};Ft.prototype.c=function(a){var b=a.getAttribute("version").trim(),c=this.f.c(a);if(!c)return null;c.version=b;return(c=R(c,Gt,a,[]))?c:null};function Ht(a){var b=T(a).split(" ");if(b&&2==b.length&&(a=+b[0],b=+b[1],!isNaN(a)&&!isNaN(b)))return[a,b]}
var It=[null,"http://www.opengis.net/wmts/1.0"],Jt=[null,"http://www.opengis.net/ows/1.1"],Gt=Q(It,{Contents:O(function(a,b){return R({},Kt,a,b)})}),Kt=Q(It,{Layer:gm(function(a,b){return R({},Lt,a,b)}),TileMatrixSet:gm(function(a,b){return R({},Mt,a,b)})}),Lt=Q(It,{Style:gm(function(a,b){if(b=R({},Nt,a,b))return a="true"===a.getAttribute("isDefault"),b.isDefault=a,b}),Format:gm(T),TileMatrixSetLink:gm(function(a,b){return R({},Ot,a,b)}),Dimension:gm(function(a,b){return R({},Pt,a,b)}),ResourceURL:gm(function(a){var b=
a.getAttribute("format"),c=a.getAttribute("template");a=a.getAttribute("resourceType");var d={};b&&(d.format=b);c&&(d.template=c);a&&(d.resourceType=a);return d})},Q(Jt,{Title:O(T),Abstract:O(T),WGS84BoundingBox:O(function(a,b){a=R([],Qt,a,b);if(2==a.length)return $a(a)}),Identifier:O(T)})),Nt=Q(It,{LegendURL:gm(function(a){var b={};b.format=a.getAttribute("format");b.href=nt(a);return b})},Q(Jt,{Title:O(T),Identifier:O(T)})),Ot=Q(It,{TileMatrixSet:O(T),TileMatrixSetLimits:O(function(a,b){return R([],
Rt,a,b)})}),Rt=Q(It,{TileMatrixLimits:em(function(a,b){return R({},St,a,b)})}),St=Q(It,{TileMatrix:O(T),MinTileRow:O(qo),MaxTileRow:O(qo),MinTileCol:O(qo),MaxTileCol:O(qo)}),Pt=Q(It,{Default:O(T),Value:gm(T)},Q(Jt,{Identifier:O(T)})),Qt=Q(Jt,{LowerCorner:em(Ht),UpperCorner:em(Ht)}),Mt=Q(It,{WellKnownScaleSet:O(T),TileMatrix:gm(function(a,b){return R({},Tt,a,b)})},Q(Jt,{SupportedCRS:O(T),Identifier:O(T)})),Tt=Q(It,{TopLeftCorner:O(Ht),ScaleDenominator:O(oo),TileWidth:O(qo),TileHeight:O(qo),MatrixWidth:O(qo),
MatrixHeight:O(qo)},Q(Jt,{Identifier:O(T)}));function Ut(a,b,c,d,e,f){De.call(this,a,b,c,0);this.f=d;this.R=new Image;null!==e&&(this.R.crossOrigin=e);this.c=null;this.state=0;this.g=f}u(Ut,De);m=Ut.prototype;m.Z=function(){return this.R};m.cp=function(){this.state=3;this.c.forEach(A);this.c=null;Ee(this)};m.ep=function(){void 0===this.resolution&&(this.resolution=sb(this.extent)/this.R.height);this.state=2;this.c.forEach(A);this.c=null;Ee(this)};
m.load=function(){if(0==this.state||3==this.state)this.state=1,Ee(this),this.c=[D(this.R,"error",this.cp,this,!0),D(this.R,"load",this.ep,this,!0)],this.g(this,this.f)};m.jk=function(a){this.R=a};function Vt(a){a=a||{};qg.call(this,{Va:a.Va,Ka:a.Ka,projection:a.projection,hb:a.hb});this.ia=void 0!==a.crossOrigin?a.crossOrigin:null;this.i=a.url;this.qa=void 0!==a.Rn?a.Rn:wg;this.f=a.params||{};this.o=!0;Wt(this);this.T=a.serverType;this.W=void 0!==a.Pn?a.Pn:!0;this.R=null;this.v=[0,0];this.C=0;this.F=void 0!==a.ratio?a.ratio:1.5}u(Vt,qg);var Xt=[101,101];
function rg(a,b,c,d,e){if(void 0===a.i)return null;a.u&&(c=a.u[Qd(a.u,c,0)]);1==d||a.W&&void 0!==a.T||(d=1);var f=c/d,g=tb(b),h=ub(g,f,0,[Math.ceil(rb(b)/f),Math.ceil(sb(b)/f)]);b=ub(g,f,0,[Math.ceil(a.F*rb(b)/f),Math.ceil(a.F*sb(b)/f)]);if((g=a.R)&&a.C==a.g&&g.V()==c&&g.b==d&&fb(g.I(),h))return g;h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};z(h,a.f);a.v[0]=Math.round(rb(b)/f);a.v[1]=Math.round(sb(b)/f);e=Yt(a,b,a.v,d,e,h);a.R=new Ut(b,c,d,e,a.ia,a.qa);a.C=
a.g;D(a.R,"change",a.U,a);return a.R}
function Yt(a,b,c,d,e,f){Aa(void 0!==a.i,9);f[a.o?"CRS":"SRS"]=e.c;"STYLES"in a.f||(f.STYLES="");if(1!=d)switch(a.T){case "geoserver":d=90*d+.5|0;f.FORMAT_OPTIONS="FORMAT_OPTIONS"in f?f.FORMAT_OPTIONS+(";dpi:"+d):"dpi:"+d;break;case "mapserver":f.MAP_RESOLUTION=90*d;break;case "carmentaserver":case "qgis":f.DPI=90*d;break;default:Aa(!1,8)}f.WIDTH=c[0];f.HEIGHT=c[1];c=e.b;var g;a.o&&"ne"==c.substr(0,2)?g=[b[1],b[0],b[3],b[2]]:g=b;f.BBOX=g.join(",");return xh(a.i,f)}Vt.prototype.getUrl=function(){return this.i};
Vt.prototype.setUrl=function(a){a!=this.i&&(this.i=a,this.R=null,this.c())};Vt.prototype.updateParams=function(a){z(this.f,a);Wt(this);this.R=null;this.c()};function Wt(a){a:{var b=(""+(a.f.VERSION||"1.3.0")).split(".");for(var c=["1","3"],d=0;d<Math.max(b.length,c.length);d++){var e=parseInt(b[d]||"0",10),f=parseInt(c[d]||"0",10);if(e>f){b=1;break a}if(f>e){b=-1;break a}}b=0}a.o=0<=b};function Zt(a,b){this.b=a;this.c=b}Zt.$inject=["$q","$http"];Zt.prototype.Hc=function(a,b,c,d,e,f,g){b={FORMAT:c,LAYERS:b};e&&(b.TIME=e);if(d){b.SERVERTYPE=d;var h=d.replace("qgisserver","qgis")}a=new Vt({url:a,params:b,serverType:h,crossOrigin:g});f&&a.updateParams(f);return new Re({source:a})};Zt.prototype.createBasicWMSLayer=Zt.prototype.Hc;
Zt.prototype.Lh=function(a,b){var c=a.wmsUrl,d=a.gc().join(",");b=this.Hc(c,d,a.ogcImageType,a.ogcServerType,void 0,void 0,b);Oe(b,a.visible);b.set("querySourceIds",[a.id]);return b};Zt.prototype.createBasicWMSLayerFromDataSource=Zt.prototype.Lh;
Zt.prototype.wf=function(a,b,c){var d=new Ft,e=new Se({De:Infinity}),f=this.b;return this.c.get(a,{cache:!0}).then(function(g){var h;g.data&&(h=d.b(g.data));return h?(g=Ah(h,{crossOrigin:"anonymous",layer:b}),g=new yh(g),c&&!Da(c)&&g.Vb(c),e.set("source",g),h=Td(h.Contents.Layer,function(a){return a.Identifier==b}),e.set("capabilitiesStyles",h.Style),f.resolve(e)):f.reject("Failed to get WMTS capabilities from "+a)})};Zt.prototype.createWMTSLayerFromCapabilitites=Zt.prototype.wf;
Zt.prototype.Rh=function(a,b,c){a=Ah(a,{crossOrigin:"anonymous",layer:b.Identifier});a=new yh(a);c&&!Da(c)&&a.Vb(c);return new Se({capabilitiesStyles:b.Style,De:Infinity,source:a})};Zt.prototype.createWMTSLayerFromCapabilititesObj=Zt.prototype.Rh;Zt.prototype.ee=function(a){var b=new mj;a&&b.set(nj,a);return b};Zt.prototype.createBasicGroup=Zt.prototype.ee;
Zt.prototype.md=function(a,b){sj(a).getLayers().b.some(function(a){return a.get("groupName")===b?(c=a,!0):!1});if(!c){var c=this.ee();c.set("groupName",b);rj(a,c)}return c};Zt.prototype.getGroupFromMap=Zt.prototype.md;Zt.prototype.ie=function(a){return $t(this,a,[])};Zt.prototype.getFlatLayers=Zt.prototype.ie;function $t(a,b,c){b instanceof mj?b.getLayers().forEach(function(a){$t(this,a,c)},a):0>c.indexOf(b)&&c.push(b);return c}
Zt.prototype.gi=function(a,b){var c=null;b.some(function(b){b instanceof mj?(b=b.getLayers().b,c=this.gi(a,b)):b.get("layerNodeName")===a&&(c=b);return!!c},this);return c};Zt.prototype.getLayerByName=Zt.prototype.gi;Zt.prototype.pg=function(a){var b;a=a.get("capabilitiesStyles");void 0!==a&&(a=a[0].legendURL,void 0!==a&&(b=a[0].href));return b};Zt.prototype.getWMTSLegendURL=Zt.prototype.pg;
Zt.prototype.ne=function(a,b,c,d){if(a)return b={FORMAT:"image/png",TRANSPARENT:!0,SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"GetLegendGraphic",LAYER:b},void 0!==c&&(b.SCALE=c),void 0!==d&&(b.RULE=d),xh(a,b)};Zt.prototype.getWMSLegendURL=Zt.prototype.ne;function au(a){a=M(a);var b=a.f;b.random=Math.random();a.updateParams(b)}Zt.prototype.dh=function(a,b,c){0>=b.length?Oe(a,!1):(Oe(a,!0),a=M(a),c?a.updateParams({LAYERS:b,TIME:c}):a.updateParams({LAYERS:b}))};Zt.prototype.updateWMSLayerState=Zt.prototype.dh;
Zt.prototype.ri=function(a){return a.get("querySourceIds")};Zt.prototype.getQuerySourceIds=Zt.prototype.ri;var bu=angular.module("ngeoLayerHelper",[]);bu.service("ngeoLayerHelper",Zt);S.requires.push(bu.name);function cu(a){mt.call(this,a);a=a.injector;this.g=a.get("ngeoLayerHelper");this.i=a.get("$rootScope");this.f={};a=t(this.dataSources);for(var b=a.next();!b.done;b=a.next())du(this,b.value)}ja(cu,mt);cu.prototype.destroy=function(){for(var a=t(this.dataSources),b=a.next();!b.done;b=a.next())eu(this,b.value);mt.prototype.destroy.call(this)};cu.prototype.Ib=function(a){mt.prototype.Ib.call(this,a);du(this,a)};
function du(a,b){var c=b.id;a.f[c]=a.i.$watch(function(){return b.visible},a.o.bind(a));a.b?(a.b.get("querySourceIds").push(c),fu(a)):a.b=a.g.Lh(b)}cu.prototype.o=function(a,b){void 0!==a&&a!==b&&fu(this)};function fu(a){for(var b=a.layer,c=[],d=t(a.dataSources),e=d.next();!e.done;e=d.next())e=e.value,e.visible&&(c=c.concat(e.gc()));a.g.dh(b,c.join(","))}cu.prototype.wb=function(a){mt.prototype.wb.call(this,a);eu(this,a)};
function eu(a,b){var c=b.id,d=a.layer;(0,a.f[c])();delete a.f[c];Sd(a.dataSources,b);(b=a.g.ri(d))&&Sd(b,c);a.dataSources.length&&fu(a)}aa.Object.defineProperties(cu.prototype,{layer:{configurable:!0,enumerable:!0,get:function(){return this.b}}});function gu(a,b,c,d,e,f,g){this.v=b;this.K=c;this.S=d;this.g=e.collection;this.Y=f;this.u=g;this.c={};this.o={};this.j=null;this.i=new Hr({dataSources:[],injector:this.v,title:a.getString("Local files")});this.B=new Ih;this.C=new Ih;this.f={};D(this.g,"remove",this.F,this)}function hu(a,b){var c=null;a=t(a.wmsGroups);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d.url===b){c=d;break}return c}
function iu(a,b){var c=null;a=t(a.wmtsGroups);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d.url===b){c=d;break}return c}
gu.prototype.Jh=function(a,b,c){var d=ju(a),e=b.Service;if(this.c[d])a=this.c[d];else{b=b.Capability.Request;var f=b.GetMap.Format;f=f.includes("image/png")?"image/png":f[0];b=b.GetFeatureInfo.Format.includes(kt)?kt:void 0;a=new dt({id:d,name:a.Title,ogcImageType:f,ogcLayers:[{name:a.Name,queryable:!0===a.queryable&&void 0!==b}],ogcType:gt,visible:!0,wmsInfoFormat:b,wmsUrl:c});this.c[d]=a}(d=hu(this,c))?d.dataSources.includes(a)||(d.Ib(a),this.g.push(a)):(d=new cu({dataSources:[a],injector:this.v,
title:e.Title,url:c}),c=d.layer,this.b.getLayers().push(c),this.wmsGroupsCollection.push(d),this.g.push(a))};gu.prototype.createAndAddDataSourceFromWMSCapability=gu.prototype.Jh;
gu.prototype.Kh=function(a,b,c){var d=ju(a);if(!this.f[d]){if(this.c[d])var e=this.c[d];else e=new dt({id:d,name:a.Title,ogcType:"WMTS",visible:!0,wmtsLayer:a.Identifier,wmtsUrl:c}),this.c[d]=e;var f=iu(this,c);f||(f=new mt({dataSources:[],title:b.ServiceIdentification.Title,url:c}),this.wmtsGroupsCollection.push(f));f.Ib(e);a=this.u.Rh(b,a);this.b.getLayers().push(a);this.g.push(e);this.f[d]={layerObj:a,unregister:this.S.$watch(function(){return e.visible},this.G.bind(this,a))}}};
gu.prototype.createAndAddDataSourceFromWMTSCapability=gu.prototype.Kh;gu.prototype.Fl=function(a){var b=this;ku(this,a).then(function(a){var c=b.i;if(!c.dataSources.includes(a)){var e=a.layer;b.b.getLayers().push(e);c.Ib(a);lj(N(b.j),a.extent);b.g.push(a)}},function(){Xm("Failed to load file: "+a.name)})};gu.prototype.createAndAddDataSourceFromFile=gu.prototype.Fl;
function ku(a,b){var c=a.K.defer();if(a.o[b.name])c.resolve(a.o[b.name]);else{var d=a.Y;d.g(b).then(function(e){var f,g={kb:N(a.j).b};d.b(e)?f=(new fp).gb(e,g):d.c(e)&&(f=(new wo).gb(e,g));f?(e=ju(b),f=new Cr({features:new Ih(f),id:e,name:b.name,visible:!0}),a.o[b.name]=f,a.c[e]=f,c.resolve(f)):c.reject()})}return c.promise}gu.prototype.G=function(a,b,c){void 0!==b&&b!==c&&Oe(a,b)};
gu.prototype.F=function(a){a=a.element;if(this.c[a.id]===a)if(a instanceof Cr){var b=a.layer;this.b.getLayers().remove(b);this.i.wb(a)}else if(a instanceof dt)if(a.ogcType===gt)(b=hu(this,a.wmsUrl))&&b.dataSources.includes(a)&&(b.wb(a),b.dataSources.length||(a=b.layer,this.b.getLayers().remove(a),b.destroy(),this.wmsGroupsCollection.remove(b)));else if("WMTS"===a.ogcType&&(b=iu(this,a.wmtsUrl))&&b.dataSources.includes(a)){b.wb(a);a=a.id;var c=this.f[a].layerObj;this.b.getLayers().remove(c);this.f[a].unregister();
delete this.f[a];b.dataSources.length||(b.destroy(),this.wmtsGroupsCollection.remove(b))}};
aa.Object.defineProperties(gu.prototype,{fileGroup:{configurable:!0,enumerable:!0,get:function(){return this.i}},wmsGroups:{configurable:!0,enumerable:!0,get:function(){return this.B.b}},wmsGroupsCollection:{configurable:!0,enumerable:!0,get:function(){return this.B}},wmtsGroups:{configurable:!0,enumerable:!0,get:function(){return this.C.b}},wmtsGroupsCollection:{configurable:!0,enumerable:!0,get:function(){return this.C}},b:{configurable:!0,enumerable:!0,get:function(){return this.u.md(this.j,"external")}},
map:{configurable:!0,enumerable:!0,set:function(a){this.j=a}}});gu.$inject="gettextCatalog $injector $q $rootScope ngeoDataSources ngeoFile ngeoLayerHelper".split(" ");function ju(a){return x(a)+1E6}va("gmf.datasource.ExternalDataSourcesManager.getId",ju);var lu=angular.module("gmfExternalDataSourcesManager",[or.name,Br.name]);lu.service("gmfExternalDataSourcesManager",gu);ym.requires.push(lu.name);function mu(a,b,c,d,e,f){Ra.call(this);this.i=!0;void 0!==f.addBlankBackgroundLayer&&(this.i=f.addBlankBackgroundLayer);this.o=c;this.B=a;this.v=void 0;b.has("gmfTreeUrl")&&(this.v=b.get("gmfTreeUrl"));this.f="0";b.has("cacheVersion")&&(this.f=b.get("cacheVersion"));this.j=null;b.has("ngeoLocation")&&(this.j=b.get("ngeoLocation"));this.F=d;this.C=e;this.g=c.defer();this.c=this.g.promise;this.loaded=!1;this.b=null}u(mu,Ra);mu.$inject="$http $injector $q ngeoLayerHelper gettextCatalog gmfThemesOptions".split(" ");
function nu(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.children.length;f<g;f++){var h=e.children[f],k=[];ou(h,k);if(pu(k,b))return h}return null}function qu(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.children.length;f<g;f++){var h=e.children[f],k=[];ru(h,k);if(pu(k,b))return h}return null}function pu(a,b){return Td(a,function(a){return a.name===b})}function ru(a,b){var c=a.children;if(void 0!==c)for(b.push(a),a=0;a<c.length;a++)ru(c[a],b)}
function ou(a,b){var c=a.children;if(void 0!==c)for(a=0;a<c.length;a++)ou(c[a],b);else b.push(a)}
function su(a){function b(a,b){a=b.children.map(function(a){return a}).reverse().map(c.bind(null,a));return g.all(a).then(function(a){if(a){a=a.filter(function(a){return a});var c=new Ih(a)}a=h.ee(c);d(b,a);return a})}function c(a,b){if("WMTS"===b.type)return h.wf(b.url,b.layer||"",b.dimensions).then(d.bind(null,b)).then(null,function(a){var c='Unable to build layer "'+b.layer+'" from WMTSCapabilities: '+b.url+"\n";c+='OpenLayers error is "'+a.message;console.error(c);return g.resolve(void 0)});if("WMS"===
b.type)return a=a[b.ogcServer],d(b,h.Hc(a.url,b.layers||"",a.imageType,a.type,void 0,b.dimensions,a.credential?"use-credentials":"anonymous"));Xm("Unsupported type: "+b.type)}function d(a,b){b.set("label",a.name);b.set("metadata",a.metadata);b.set("dimensions",a.dimensions);var c=[];e(a,c);b.set("querySourceIds",c);return b}function e(a,b){b.push(x(a));(a.children||[]).forEach(function(a){e(a,b)})}var f=a.C;if(a.b)return a.b;var g=a.o,h=a.F,k=function(a){var d=a.background_layers.map(function(d){var e=
d.type;if("WMTS"===e||"WMS"===e)return c(a.ogcServers,d);if(d.children)return b(a.ogcServers,d)},this);return g.all(d)}.bind(a);a.b=a.c.then(k).then(function(b){var c=[];a.i&&(f.getString("blank"),c.push(new Se({label:"blank",metadata:{thumbnail:""}})));b.forEach(function(a){a&&c.push(a)});return c});return a.b}mu.prototype.ui=function(a){return this.c.then(function(b){return pu(b.themes,a)})};mu.prototype.getThemeObject=mu.prototype.ui;mu.prototype.lb=function(){return this.c.then(function(a){return a.themes})};
mu.prototype.getThemesObject=mu.prototype.lb;function tu(a){return a.c.then(function(a){return a.background_layers})}mu.prototype.Nc=function(){return this.c.then(function(a){return a.ogcServers})};mu.prototype.getOgcServersObject=mu.prototype.Nc;mu.prototype.hasEditableLayers=function(){return this.c.then(this.G.bind(this))};mu.prototype.G=function(a){var b=this;return a.themes.some(function(a){return a.children.some(b.u.bind(b))})};
mu.prototype.u=function(a){if(a.editable)return!0;var b=!1;(a=a.children)&&a.length&&(b=a.some(this.u.bind(this)));return b};function uu(a){return a.metadata&&void 0!==a.metadata.snappingConfig?a.metadata.snappingConfig:null}va("gmf.theme.Themes.getSnappingConfig",uu);function vu(a){var b=a.metadata;a=a.maxResolutionHint;void 0===a&&void 0!==b&&(a=b.maxResolution);return a}function wu(a){var b=a.metadata;a=a.minResolutionHint;void 0===a&&void 0!==b&&(a=b.minResolution);return a}
mu.prototype.Xi=function(a){var b=this;this.loaded&&(this.g=this.o.defer(),this.c=this.g.promise,this.b=null,this.loaded=!1);this.B.get(this.v,{params:void 0!==a?{role:a,cache_version:this.f}:{cache_version:this.f},cache:!1,withCredentials:!0}).then(function(a){if(0!=a.data.errors.length){var c="The themes contain some errors:\n"+a.data.errors.join("\n");console.error(c);null!==b.j&&b.j.tg("debug")&&window.alert(c)}b.g.resolve(a.data);F(b,"change");b.loaded=!0},function(a){b.g.reject(a)})};
mu.prototype.loadThemes=mu.prototype.Xi;var xu=angular.module("gmfThemes",[bu.name]);xu.value("gmfThemesOptions",{});xu.service("gmfThemes",mu);xu.requires.push(xu.name);function yu(a){Object.defineProperty(a,"active",{get:function(){return a.getActive()},set:function(b){a.setActive(b)}})}function zu(a){Object.defineProperty(a,"visible",{configurable:!0,get:function(){return Ne(a)},set:function(b){Oe(a,b)}});Object.defineProperty(a,"opacity",{configurable:!0,get:function(){return a.getOpacity()},set:function(b){a.set("opacity",b)}})}
function Au(a,b){function c(a){var b=a.get("load_count"),d=a.get("parent_group");a.set("load_count",++b,!0);d&&c(d)}function d(a){var b=a.get("load_count"),c=a.get("parent_group");a.set("load_count",--b,!0);c&&d(c)}var e=null,f=null;a.set("load_count",0,!0);if(a instanceof mj)a.getLayers().on("add",function(b){b.element.set("parent_group",a)});if(a instanceof Pe){var g=M(a);if(null===g)return;g instanceof zg?(e=["tileloadstart"],f=["tileloadend","tileloaderror"]):g instanceof qg?(e=["imageloadstart"],
f=["imageloadend","imageloaderror"]):Xm("unsupported source type");g.on(e,function(){c(a);b.$applyAsync()});g.on(f,function(){d(a);b.$applyAsync()})}Object.defineProperty(a,"loading",{configurable:!0,get:function(){return 0<a.get("load_count")}})};function Bu(a,b,c){var d=this,e=void 0===c.ngeoLayertreeNotroot;this.isRoot=e;var f=c.ngeoLayertree;this.g=b;this.properties={};this.c="off";e?a.$watch(f,function(a){d.node=a}):this.node=a.$eval(f);b=a.$eval(c.ngeoLayertreeMap);this.parent=a.$parent.layertreeCtrl;this.children=[];this.parent&&this.parent.children.push(this);a.$on("$destroy",function(){if(d.parent){var a=d.parent.children.indexOf(d);d.parent.children.splice(a,1)}});this.uid=x(this);this.depth=e?0:this.parent.depth+1;a.uid=this.uid;
a.depth=this.depth;this.map=b;b=c.ngeoLayertreeNodelayer;void 0===b&&(b=a.$eval(c.ngeoLayertreeNodelayerexpr));this.nodelayerExpr=b;this.layer=null;!e&&(e=a.$eval(b,{treeCtrl:this})||null)&&(this.layer=e);this.b=null;this.layer&&(Au(this.layer,a),zu(this.layer),D(this.layer,"change:opacity",function(){d.g.$broadcast("ngeo-layertree-opacity",d)}));e=c.ngeoLayertreeListeners;void 0===e&&(e=a.$eval(c.ngeoLayertreeListenersexpr));(this.listenersExpr=e)&&a.$eval(e,{treeScope:a,treeCtrl:this});a.layertreeCtrl=
this}va("ngeo.layertree.Controller",Bu);Bu.$inject=["$scope","$rootScope","$attrs"];Bu.prototype.getState=function(){return this.c};Bu.prototype.getState=Bu.prototype.getState;Bu.prototype.ib=function(a,b){var c=this;a!==this.c&&(Cu(this,a),this.parent&&Du(this.parent),a=this.isRoot?this.children:[Eu(this)],(void 0===b||b)&&a.forEach(function(a){c.g.$broadcast("ngeo-layertree-state",c,a)}))};Bu.prototype.setState=Bu.prototype.ib;
function Cu(a,b){a.c="on"===b?"on":"off";a.children.forEach(function(a){Cu(a,this.c)},a)}function Du(a){var b=a.Uf();a.c!==b&&(a.c=b,a.parent&&Du(a.parent))}Bu.prototype.Uf=function(){if(void 0===this.node.children)return this.c;var a,b;this.children.some(function(c){a=c.Uf();if(b&&b!==a)return a="indeterminate";b=a});return a};Bu.prototype.getCalculateState=Bu.prototype.Uf;
Bu.prototype.wm=function(a){var b=this.layer,c=this.map;if(b)if(void 0!==a)a?rj(c,b):sj(c).getLayers().remove(b);else return 0<=c.getLayers().b.indexOf(b)};Bu.prototype.getSetActive=Bu.prototype.wm;Bu.prototype.ub=function(){return this.b};Bu.prototype.getDataSource=Bu.prototype.ub;Bu.prototype.Wg=function(a){this.b=a};Bu.prototype.setDataSource=Bu.prototype.Wg;function Eu(a){for(;!a.parent.isRoot;)a=a.parent;return a}
Bu.prototype.La=function(a){switch(a(this)||"DESCEND"){case "STOP":return!0;case "SKIP":return!1;case "DESCEND":for(var b=0;b<this.children.length;++b)if(this.children[b].La(a))return!0;return!1;default:Xm("Unhandled case")}};Bu.prototype.traverseDepthFirst=Bu.prototype.La;var Fu=angular.module("ngeoLayertreeController",[]);Fu.controller("ngeoLayertreeController",Bu);S.requires.push(Fu.name);function Gu(){}Gu.prototype.show=function(a){Hu(this,a).forEach(this.g,this)};Gu.prototype.show=Gu.prototype.show;Gu.prototype.error=function(a){this.show(Hu(this,a,Iu))};Gu.prototype.error=Gu.prototype.error;Gu.prototype.info=function(a){this.show(Hu(this,a,Ju))};Gu.prototype.info=Gu.prototype.info;Gu.prototype.success=function(a){this.show(Hu(this,a,Ku))};Gu.prototype.success=Gu.prototype.success;Gu.prototype.warn=function(a){this.show(Hu(this,a,Lu))};Gu.prototype.warn=Gu.prototype.warn;
function Hu(a,b,c){var d=[],e=null,f=Ju;"string"===typeof b?d.push({msg:b,type:void 0!==c?c:f}):Array.isArray(b)?b.forEach(function(a){"string"===typeof b?e={msg:a,type:void 0!==c?c:f}:(e=a,void 0!==c&&(e.type=c));d.push(e)},a):(e=b,void 0!==c&&(e.type=c),void 0===e.type&&(e.type=f),d.push(e));return d}var Iu="error",Ju="information",Ku="success",Lu="warning";va("ngeo.message.Message.Type",{ERROR:Iu,INFORMATION:Ju,SUCCESS:Ku,WARNING:Lu});function Mu(a){this.b=a;a=angular.element('<div class="ngeo-notification"></div>');angular.element(document.body).append(a);this.f=a;this.c={}}u(Mu,Gu);Mu.$inject=["$timeout"];Mu.prototype.notify=function(a){this.show(a)};Mu.prototype.notify=Mu.prototype.notify;Mu.prototype.clear=function(){for(var a in this.c){var b=this.c[parseInt(a,10)],c=b.Vl;b=b.promise;var d=x(c);c.alert("close");this.b.cancel(b);delete this.c[d]}};Mu.prototype.clear=Mu.prototype.clear;
Mu.prototype.g=function(a){var b=this,c=["alert","fade"];switch(a.type){case Iu:c.push("alert-danger");break;case Ju:c.push("alert-info");break;case Ku:c.push("alert-success");break;case Lu:c.push("alert-warning")}var d=angular.element('<div class="'+c.join(" ")+'"></div>'),e;a.target?e=angular.element(a.target):e=this.f;e.append(d);d.html(a.msg).addClass("in");a=void 0!==a.delay?a.delay:7E3;c={Vl:d};var f=x(d);c.promise=this.b(function(){d.alert("close");delete b.c[f]},a);this.c[f]=c};
var Nu=angular.module("ngeoNotification",[]);Nu.service("ngeoNotification",Mu);S.requires.push(Nu.name);function Y(a,b){this.o=b;this.j=a.protocol.substring(0,a.protocol.length-1);this.f=a.hostname;this.i=a.port?parseInt(a.port,10):void 0;this.g=a.pathname;this.b=Mm(a.search);this.c=Mm(a.hash)}Y.prototype.getPath=function(){return this.g};Y.prototype.getPath=Y.prototype.getPath;
Y.prototype.td=function(){var a=[];this.j&&a.push(this.j,":");if(this.f||"file"===this.j)a.push("//"),a.push(this.f),void 0!==this.i&&a.push(":",String(this.i));this.g&&(this.f&&"/"!==this.g.charAt(0)&&a.push("/"),a.push(this.g));var b=Nm(this.b);0<b.length&&a.push("?",b);b=Nm(this.c);0<b.length&&a.push("#",b);return a.join("")};Y.prototype.getUriString=Y.prototype.td;Y.prototype.tg=function(a){return a in this.b};Y.prototype.hasParam=Y.prototype.tg;Y.prototype.On=function(a){return a in this.c};
Y.prototype.hasFragmentParam=Y.prototype.On;Y.prototype.Xa=function(a){return this.b[a]};Y.prototype.getParam=Y.prototype.Xa;Y.prototype.ei=function(a){return this.c[a]};Y.prototype.getFragmentParam=Y.prototype.ei;Y.prototype.pi=function(a){a=this.Xa(a);if(void 0!==a)return a=parseInt(a,10),isNaN(a)?void 0:a};Y.prototype.getParamAsInt=Y.prototype.pi;Y.prototype.rm=function(a){a=this.Xa(a);if(void 0!==a)return a=parseFloat(a),isNaN(a)?void 0:a};Y.prototype.getParamAsFloat=Y.prototype.rm;
Y.prototype.hm=function(a){a=this.ei(a);if(void 0!==a)return a=parseInt(a,10),isNaN(a)?void 0:a};Y.prototype.getFragmentParamAsInt=Y.prototype.hm;Y.prototype.fg=function(){var a=[],b;for(b in this.b)a.push(b);return a};Y.prototype.getParamKeys=Y.prototype.fg;Y.prototype.im=function(){var a=[],b;for(b in this.c)a.push(b);return a};Y.prototype.getFragmentParamKeys=Y.prototype.im;Y.prototype.gg=function(a){var b=[],c;for(c in this.b)0==c.indexOf(a)&&b.push(c);return b};
Y.prototype.getParamKeysWithPrefix=Y.prototype.gg;Y.prototype.jm=function(a){var b=[],c;for(c in this.c)0==c.indexOf(a)&&b.push(c);return b};Y.prototype.getFragmentParamKeysWithPrefix=Y.prototype.jm;Y.prototype.updateParams=function(a){for(var b in a)this.b[b]=a[b]};Y.prototype.updateParams=Y.prototype.updateParams;Y.prototype.pr=function(a){for(var b in a)this.c[b]=a[b]};Y.prototype.updateFragmentParams=Y.prototype.pr;Y.prototype.Lb=function(a){delete this.b[a]};Y.prototype.deleteParam=Y.prototype.Lb;
Y.prototype.Ql=function(a){delete this.c[a]};Y.prototype.deleteFragmentParam=Y.prototype.Ql;Y.prototype.refresh=function(){var a=this.td();try{this.o.replaceState(null,"",a)}catch(b){}};Y.prototype.refresh=Y.prototype.refresh;Y.prototype.setPath=function(a){this.g=a};Y.prototype.setPath=Y.prototype.setPath;
function Ou(a,b){var c=b.history,d=new Y(b.location,b.history),e=d.td();a.$watch(function(){var b=d.td();e!==b&&a.$evalAsync(function(){e=b;if(void 0!==c&&void 0!==c.replaceState)try{c.replaceState(null,"",b)}catch(g){}a.$broadcast("ngeoLocationChange")})});return d}Ou.$inject=["$rootScope","$window"];var Pu=angular.module("ngeoLocation",[]);Pu.factory("ngeoLocation",Ou);S.requires.push(Pu.name);function Qu(a,b){var c=this;this.c={};this.g=a;this.f=b;Ru(this,!1);a=a.fg().filter(function(a){return"debug"!=a&&"no_redirect"!=a});if(0===a.length){if(this.b){a={};for(var d in window.localStorage)a.key=d,this.f.some(function(a){return function(b){if(a.key.match(b))return b=window.localStorage[a.key],c.c[a.key]=void 0!==b||null!==b?b:"",!0}}(a)),a={key:a.key}}}else a.forEach(function(a){c.f.some(function(b){if(a.match(b)&&(b=c.g.Xa(a),void 0!==b))return c.c[a]=b,!0})})}
Qu.$inject=["ngeoLocation","ngeoUsedKeyRegexp"];function Ru(a,b){a.b=b;if(a.b)try{"localStorage"in window?(window.localStorage.test="",delete window.localStorage.test):a.b=!1}catch(c){console.error(c),a.b=!1}}function Su(a,b){a=a.c[b];if(void 0!==a)return a}function Tu(a,b){a=a.c[b];if(void 0!==a)return parseFloat(a)}function Uu(a,b){a=a.c[b];if(void 0!==a)return"true"===a}function Vu(a,b){a.g.updateParams(b);if(a.b)for(var c in b)window.localStorage[c]=b[c]}
Qu.prototype.Lb=function(a){this.g.Lb(a);this.b&&delete window.localStorage[a]};var Wu=angular.module("ngeoStateManager",[Pu.name]);Wu.service("ngeoStateManager",Qu);Wu.value("ngeoUsedKeyRegexp",[/.*/]);S.requires.push(Wu.name);function Xu(a,b,c,d,e,f,g){this.$timeout_=a;this.i=b;this.ba=c;this.u=e;this.c=f;this.root={children:[]};this.rootCtrl=null;this.j=0;this.b=[];this.g=null;this.o=g;this.f=null;D(this.c,"change",this.v,this)}Xu.$inject="$timeout $injector gettextCatalog ngeoLayerHelper ngeoNotification gmfThemes ngeoStateManager".split(" ");Xu.prototype.v=function(){var a=this;this.c.Nc().then(function(b){a.f=b});this.rootCtrl&&this.rootCtrl.children&&this.c.lb().then(function(b){Yu(a,b)})};
Xu.prototype.Pe=function(a){this.root.children.length=0;this.o.Lb("tree_groups");return this.zc(a)};Xu.prototype.setFirstLevelGroups=Xu.prototype.Pe;Xu.prototype.zc=function(a,b,c){var d=this,e=[];a.slice().reverse().forEach(function(a){Zu(d,a)||e.push(a)});0<e.length&&!c&&$u(this,e);return 0===e.length};Xu.prototype.addFirstLevelGroups=Xu.prototype.zc;
function av(a,b){var c={};c.tree_groups=b.map(function(a){return a.name}).join(",");Vu(a.o,c);a.i.has("gmfPermalink")&&bv(a.i.get("gmfPermalink"),b)}
function Zu(a,b){var c=!1,d=b.id;a.root.children.some(function(a){if(d===a.id)return c=!0},a);a.b.some(function(a){if(d===a.id)return c=!0},a);if(c)return!1;a.b.push(b);a.j=0;null!==a.g&&a.$timeout_.cancel(a.g);a.g=a.$timeout_(function(){a.j=a.b.length;a.b.forEach(function(a){this.root.children.unshift(a)},a);av(a,a.root.children);a.b.length=0;a.g=null});return!0}Xu.prototype.xh=function(a,b){var c=this;this.c.lb().then(function(d){(d=qu(d,a))&&c.zc([d],b,!1)})};Xu.prototype.addGroupByName=Xu.prototype.xh;
Xu.prototype.wh=function(a,b,c){var d=this;this.c.lb().then(function(e){var f=nu(e,a);if(f){var g=d.zc([f],b,c);d.$timeout_(function(){var b=cv(d,f.id);if(b){var c;b.La(function(b){if(b.node.name===a)return c=b,"STOP"});g&&b.ib("off");c&&c.ib("on")}else console.warn("Tree controller not found, unable to add the group")})}})};Xu.prototype.addGroupByLayerName=Xu.prototype.wh;
Xu.prototype.Sg=function(a){var b=this.root.children,c=0,d=!1;b.some(function(b){if(b.name===a.name)return d=!0;c++});d&&(b.splice(c,1),av(this,b))};Xu.prototype.removeGroup=Xu.prototype.Sg;Xu.prototype.removeAll=function(){for(;this.root.children.length;)this.Sg(this.root.children[0])};Xu.prototype.removeAll=Xu.prototype.removeAll;
function $u(a,b){var c=[],d=a.ba;b.forEach(function(a){c.push(a.name)});b=2>c.length?d.getString("group is already loaded."):d.getString("groups are already loaded.");a.u.notify({msg:c.join(", ")+" "+b,type:Ju})}function cv(a,b){var c=null;a.rootCtrl&&a.rootCtrl.La&&a.rootCtrl.La(function(a){if(a.node.id===b)return c=a,"STOP"});return c}function dv(a,b){if(b.parent.node.mixed)return a.f[b.node.ogcServer];for(;!b.parent.isRoot;)b=b.parent;return a.f[b.node.ogcServer]}
function Yu(a,b){var c={};a.rootCtrl.children.map(function(b){c[b.node.name]=ev(a,b)});var d=[];a.root.children.map(function(e){var f=e.name;if(e=qu(b,f))(f=c[f])&&fv(a,e,f),d.push(e)});a.Pe(d);a.$timeout_(function(){av(a,a.root.children)})}
function ev(a,b){var c={};b.children.map(function(b){c[b.node.name]=ev(a,b)});var d,e;if(0<b.children.length)(b=$("#gmf-layertree-layer-group-"+b.uid))&&(d=b.hasClass("in"));else{var f=b.getState();"on"===f?f=!0:"off"===f?f=!1:f=void 0;(b=$("#gmf-layertree-node-"+b.uid+"-legend"))&&(e=b.is(":visible"))}return{children:c,isChecked:f,isExpanded:d,isLegendExpanded:e}}
function fv(a,b,c){c&&(b.children&&b.children.map(function(b){fv(a,b,c.children[b.name])}),b=b.metadata,b.isChecked=c.isChecked,b.isExpanded=c.isExpanded,b.isLegendExpanded=c.isLegendExpanded)}var gv=angular.module("gmfTreeManager",[xu.name,Fu.name,Nu.name,Wu.name]);gv.service("gmfTreeManager",Xu);ym.requires.push(gv.name);function hv(a,b,c,d,e){this.b=a;this.g=b;this.modeFlush=c;this.aa=d;this.f=e;this.c=""}hv.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];hv.prototype.jf=function(a,b){this.modeFlush?(Vu(this.f,{theme:a.name}),iv(this,a.name),this.aa.Pe(a.children)):this.aa.zc(a.children,!1,b)};hv.prototype.addTheme=hv.prototype.jf;hv.prototype.Fm=function(){return this.c};hv.prototype.getThemeName=hv.prototype.Fm;hv.prototype.ao=function(){return!this.g.loaded};
hv.prototype.isLoading=hv.prototype.ao;function iv(a,b,c){a.c=b;c||a.b.$emit(jv,b)}hv.prototype.removeAll=function(){this.aa.removeAll()};hv.prototype.removeAll=hv.prototype.removeAll;var jv="gmf-thememanager-theme_name_set",kv=angular.module("gmfThemeManager",[gv.name,Wu.name]);kv.value("gmfTreeManagerModeFlush",!0);kv.service("gmfThemeManager",hv);ym.requires.push(kv.name);function lv(a){a=void 0!==a?a:{};if(a.element){var b=a.element;delete a.element}else b=$("<div />")[0];this.j=$("<button>",{"class":"close",html:"&times;"});this.i=$("<div/>").append(this.j).append(b);a.element=$("<div />")[0];Qg.call(this,a)}u(lv,Qg);
lv.prototype.setMap=function(a){var b=this,c=this.get(Rg);this.getMap()&&$(c).popover("destroy");Qg.prototype.setMap.call(this,a);if(a){var d=this.i;window.setTimeout(function(){$(c).popover({content:d,html:!0,placement:"top",template:'<div class="popover ngeo-popover" role="tooltip">  <div class="arrow"></div>  <h3 class="popover-title"></h3>  <div class="popover-content"></div></div>'}).popover("show")},0);this.j.one("click",function(){var a=b.getMap();a&&a.Ha.remove(b)})}};var mv=angular.module("ngeoFeatures",[]);S.requires.push(mv.name);mv.value("ngeoFeatures",new Ih);va("ngeo.olcs.constants.Permalink3dParam",{ENABLED:"3d_enabled",LON:"3d_lon",LAT:"3d_lat",ELEVATION:"3d_elevation",HEADING:"3d_heading",PITCH:"3d_pitch",PREFIX:"3d_"});va("ngeo.format.FeatureHashStyleType",{LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"});function nv(a){Cd.call(this);a=void 0!==a?a:{};this.g=void 0!==a.accuracy?a.accuracy:.1;this.i=void 0!==a.encodeStyles?a.encodeStyles:!0;this.o=void 0!==a.properties?a.properties:ov;this.f=void 0!==a.setStyle?a.setStyle:!0;this.b=this.c=0;pv=void 0!==a.Oj&&a.Oj}u(nv,Hd);var qv={LineString:"LineString",Point:"Point",Polygon:"Polygon",MultiLineString:"LineString",MultiPoint:"Point",MultiPolygon:"Polygon"},pv={};function ov(a){return a.Sa()}
function rv(a){var b=a<<1;0>a&&(b=~b);a=b;for(b="";32<=a;)b+=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".charAt(32|a&31),a>>=5;return b+=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".charAt(a)}function sv(a,b,c){c=void 0!==c?c:"fillColor";a=a.va();null!==a&&(a=Cc(a),a=Lm(a),0<b.length&&b.push("'"),b.push(encodeURIComponent(c+"*"+a)))}
function tv(a,b){var c=a.va();null!==c&&(c=Cc(c),c=Lm(c),0<b.length&&b.push("'"),b.push(encodeURIComponent("strokeColor*"+c)));a=a.c;void 0!==a&&(0<b.length&&b.push("'"),b.push(encodeURIComponent("strokeWidth*"+a)))}function uv(a,b){var c="l r t m b isCircle isRectangle isLabel showMeasure showLabel".split(" ");return Pd("a o s k pointRadius strokeWidth".split(" "),a)?+b:Pd(c,a)?"true"===b?!0:!1:b}
function vv(a){a=a.split("'");for(var b={},c=0;c<a.length;++c){var d=decodeURIComponent(a[c]).split("*"),e=d[0];b[e]=uv(e,d[1])}return b}function wv(a,b,c,d,e){for(var f=d.length,g=0;g<f;++g)c=xv(this,a,b,c,d[g]-b),0!==g&&e.push("'"),e.push(c),c=d[g];return c}
var zv={P:function(a){a=a.substring(2,a.length-1);a=yv(this,a);var b=new Am(null);be(b,"XY",a);b.c();return b},L:function(a){a=a.substring(2,a.length-1);var b=[],c=[];a=a.split("'");for(var d=0,e=a.length;d<e;++d)b=yv(this,a[d],b),c[d]=b.length;a=new Cm(null);Dm(a,"XY",b,c);return a},A:function(a){a=a.substring(2,a.length-1);var b=[],c=[];a=a.split(")(");for(var d=0,e=a.length;d<e;++d)for(var f=a[d].split("'"),g=c[d]=[],h=0,k=f.length;h<k;++h){b=yv(this,f[h],b);var l=b.length;0===h?(b[l++]=b[0],b[l++]=
b[1]):(b[l++]=b[g[h-1]],b[l++]=b[g[h-1]+1]);g[h]=l}a=new Gm(null);Hm(a,"XY",b,c);return a},l:function(a){a=a.substring(2,a.length-1);a=yv(this,a);var b=new ye(null);ze(b,"XY",a);return b},p:function(a){a=a.substring(2,a.length-1);a=yv(this,a);var b=new Mi(null);Ni(b,"XY",a);return b},a:function(a){a=a.substring(2,a.length-1);var b=[],c=[];a=a.split("'");for(var d=0,e=a.length;d<e;++d){b=yv(this,a[d],b);var f=b.length;0===d?(b[f++]=b[0],b[f++]=b[1]):(b[f++]=b[c[d-1]],b[f++]=b[c[d-1]+1]);c[d]=f}a=new Ti(null);
Ui(a,"XY",b,c);return a}},Av={MultiLineString:function(a){var b=a.Wa(),c=b.length,d=a.D;a=a.H;for(var e=0,f=["L("],g=0;g<c;++g){var h=b[g];e=xv(this,d,a,e,h);0!==g&&f.push("'");f.push(e);e=h}f.push(")");return f.join("")},MultiPoint:function(a){var b=a.D;return"P("+xv(this,b,a.H,0,b.length)+")"},MultiPolygon:function(a){var b=a.D,c=a.H;a=a.f;for(var d=a.length,e=0,f=["A"],g=0;g<d;++g){var h=a[g];f.push("(");e=wv.call(this,b,c,e,h,f);f.push(")")}return f.join("")},LineString:function(a){var b=a.D;
return"l("+xv(this,b,a.H,0,b.length)+")"},Point:function(a){var b=a.D;return"p("+xv(this,b,a.H,0,b.length)+")"},Polygon:function(a){var b=a.D,c=a.H;a=a.Wa();var d=["a("];wv.call(this,b,c,0,a,d);d.push(")");return d.join("")}};
function yv(a,b,c){var d=b.length,e=0;c=void 0!==c?c:[];for(var f=c.length;e<d;){var g=0,h=0;do{var k=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".indexOf(b.charAt(e++));h|=(k&31)<<g;g+=5}while(32<=k);a.c+=h&1?~(h>>1):h>>1;h=g=0;do k=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".indexOf(b.charAt(e++)),h|=(k&31)<<g,g+=5;while(32<=k);a.b+=h&1?~(h>>1):h>>1;c[f++]=a.c*a.g;c[f++]=a.b*a.g}return c}
function xv(a,b,c,d,e){for(var f="";d<e;d+=c){var g=b[d],h=b[d+1];g=Math.floor(g/a.g);h=Math.floor(h/a.g);var k=g-a.c,l=h-a.b;a.c=g;a.b=h;f+=rv(k)+rv(l)}return f}
function Jd(a,b){var c=b.indexOf("~"),d=Kd(a,0<=c?b.substring(0,c)+")":b);d=new yd(d);if(0<=c){b=b.substring(c+1,b.length-1);c=b.indexOf("~");var e=0<=c?b.substring(0,c):b;if(""!=e){e=e.split("'");for(var f=0;f<e.length;++f){var g=decodeURIComponent(e[f]).split("*"),h=g[0];g=g[1];!a.f&&pv[h]&&(h=pv[h]);d.set(h,uv(h,g))}}if(0<=c)if(c=b.substring(c+1),a.f){if(""!=c){b=vv(c);f=b.fillColor;var k=b.fontSize;a=b.fontColor;c=b.pointRadius;e=b.strokeColor;h=b.strokeWidth;b=null;void 0!==f&&(b=new rd({color:f}));
f=null;void 0!==e&&void 0!==h&&(f=new sd({color:e,width:h}));e=null;void 0!==c&&(e=new qd({radius:c,fill:b,stroke:f}),b=f=null);c=null;void 0!==k&&void 0!==a&&(c=new ep({font:k+" sans-serif",fill:new rd({color:a})}));k=new H({fill:b,image:e,stroke:f,text:c});d.setStyle(k)}}else{a=vv(c);c=d.getGeometry();c instanceof Mi?a.isLabel||a.t?(delete a.strokeColor,delete a.fillColor):(delete a.fontColor,delete a.fontSize):(delete a.fontColor,c instanceof ye&&(delete a.fillColor,delete a.fillOpacity));a.fontSize&&
(c=parseFloat(a.fontSize),-1!==a.fontSize.indexOf("px")&&(c=Math.round(c/1.333333)),a.fontSize=c);c={};for(k in a)b=a[k],pv[k]?c[pv[k]]=b:c[k]=b;Wa(d,c)}}return d}function Kd(a,b){var c=zv[b[0]];a.c=0;a.b=0;return c.call(a,b)}
function Ld(a,b,c){var d=[],e="",f=b.getGeometry();f&&(e=Nd(a,f,c));0<e.length&&(e=e.substring(0,e.length-1),d.push(e));c=[];e=a.o(b);for(var g in e){var h=e[g];void 0!==h&&null!==h&&g!==b.b&&(0!==c.length&&c.push("'"),h=encodeURIComponent(g.replace(/[()'*]/g,"_")+"*"+h.toString().replace(/[()'*]/g,"_")),c.push(h))}0<c.length&&(d.push("~"),Array.prototype.push.apply(d,c));if(a.i&&(a=b.Bb(),void 0!==a&&(a=a.call(b,0),null!==a))){b=[];a=Array.isArray(a)?a:[a];f=f.getType();f=qv[f];for(g=0;g<a.length;++g){c=
a[g];h=c.oa();e=c.Z();var k=c.sa();c=c.Da();"Polygon"==f?null!==h&&(sv(h,b),null!==k&&tv(k,b)):"LineString"==f?null!==k&&tv(k,b):"Point"==f&&null!==e&&e instanceof qd&&(h=e.c,0<b.length&&b.push("'"),b.push(encodeURIComponent("pointRadius*"+h)),h=e.oa(),null!==h&&sv(h,b),e=e.sa(),null!==e&&tv(e,b));null!==c&&(e=c.c,void 0!==e&&(e=e.split(" "),3<=e.length&&(0<b.length&&b.push("'"),b.push(encodeURIComponent("fontSize*"+e[1])))),c=c.oa(),null!==c&&sv(c,b,"fontColor"))}0<b.length&&(d.push("~"),Array.prototype.push.apply(d,
b))}d.push(")");return d.join("")}function Nd(a,b,c){var d=Av[b.getType()];b=Fd(b,!0,c);a.c=0;a.b=0;return d.call(a,b)};var Bv=angular.module("ngeoStatemanagerModule",[S.name,Pu.name,Wu.name]);function Cv(a,b,c,d,e,f,g,h){var k=this;this.ua=a;this.i=c;this.$timeout_=b;this.G=null;this.ia=e;this.Qa=f;this.c=g;this.j=d.has("ngeoFeatures")?d.get("ngeoFeatures"):null;this.C=d.has("ngeoBackgroundLayerMgr")?d.get("ngeoBackgroundLayerMgr"):null;this.F=(a=d.has("ngeoFeatureOverlayMgr")?d.get("ngeoFeatureOverlayMgr"):null)?a.eb():null;this.v=d.has("ngeoFeatureHelper")?d.get("ngeoFeatureHelper"):null;this.qa=d.has("ngeoQuerent")?d.get("ngeoQuerent"):null;a=d.has("gmfPermalinkOptions")?d.get("gmfPermalinkOptions"):
{};!0===a.useLocalStorage&&Ru(this.c,!0);this.Ea=!!a.crosshairEnabledByDefault;this.f=d.has("gmfExternalDataSourcesManager")?d.get("gmfExternalDataSourcesManager"):null;this.W=d.has("gmfThemes")?d.get("gmfThemes"):null;this.wa=d.has("gmfObjectEditingManager")?d.get("gmfObjectEditingManager"):null;this.u=d.has("gmfThemeManager")?d.get("gmfThemeManager"):null;this.T=d.has("defaultTheme")?d.get("defaultTheme"):void 0;this.aa=d.has("gmfTreeManager")?d.get("gmfTreeManager"):null;this.g=h;this.za=d.has("ngeoWfsPermalink")?
d.get("ngeoWfsPermalink"):null;this.gmfUser_=d.has("gmfUser")?d.get("gmfUser"):null;this.b=null;this.B=d.has("ngeoAutoProjection")?d.get("ngeoAutoProjection"):null;this.Y=null;void 0!==a.projectionCodes&&this.B&&(d=this.B.hg(a.projectionCodes),0<d.length&&(this.Y=d));this.o=null;void 0!==a.crosshairStyle?this.N=a.crosshairStyle:this.N=[new H({image:new od({stroke:new sd({color:"rgba(255, 255, 255, 0.8)",width:5}),points:4,radius:8,Ee:0,angle:0})}),new H({image:new od({stroke:new sd({color:"rgba(255, 0, 0, 1)",
width:2}),points:4,radius:8,Ee:0,angle:0})})];this.K=null;this.U=new nv({setStyle:!1,encodeStyles:!1,Oj:{fillColor:"c",fillOpacity:"o",fontColor:"c",fontSize:"s",isBox:"r",isCircle:"l",isLabel:"t",name:"n",pointRadius:"s",showLabel:"b",showMeasure:"m",strokeColor:"c",strokeWidth:"k"}});this.C&&D(this.C,"change",this.Fa,this);this.i.$on("ngeo-layertree-state",function(a,b,c){var d={};if(c.node.mixed){var e="on"===b.getState();b.La(function(a){void 0===a.node.children&&(d[Dv+a.node.name]=e)})}else{var f=
[];c.La(function(a){void 0===a.node.children&&"on"===a.getState()&&f.push(a.node.name)});d[Ev+c.node.name]=f.join(",")}Vu(k.c,d)});this.i.$on("ngeo-layertree-opacity",function(a,b){a={};var c=b.layer.getOpacity();a[(b.parent.node.mixed?Fv:Gv)+b.node.name]=c;Vu(k.c,a)});var l=this.fc();this.j&&(l.forEach(function(a){this.v&&this.v.setStyle(a);Hv(this,a)},this),this.j.extend(l),D(this.j,"add",this.tn,this),D(this.j,"remove",this.un,this));this.v&&this.i.$on("$localeChangeSuccess",function(){l.forEach(function(a){this.v.setStyle(a)},
k)});this.u&&this.i.$on(jv,function(a,b){b&&(a=k.g.getPath().split("/"),""===a[a.length-1]&&a.splice(a.length-1),Iv(a)?a[a.length-1]=b:a.push("theme",b),k.g.setPath(a.join("/")))});this.S=null;this.qa&&this.f&&Jv(this).then(function(){D(k.f.wmsGroupsCollection,"add",k.Hi,k);D(k.f.wmsGroupsCollection,"remove",k.Ii,k);D(k.f.wmtsGroupsCollection,"add",k.Hi,k);D(k.f.wmtsGroupsCollection,"remove",k.Ii,k);for(var a=t(k.f.wmsGroups),b=a.next();!b.done;b=a.next())Kv(k,b.value);a=t(k.f.wmtsGroups);for(b=a.next();!b.done;b=
a.next())Kv(k,b.value)});Lv(this)}Cv.$inject="$q $timeout $rootScope $injector ngeoDebounce ngeoEventHelper ngeoStateManager ngeoLocation".split(" ");Cv.prototype.hi=function(){var a=Tu(this.c,"map_x"),b=Tu(this.c,"map_y");return isNaN(a)||isNaN(b)?null:(a=[a,b],null!==this.Y&&this.B&&(b=N(this.b).b,b=this.B.ah(a,b.I(),b,this.Y))?b:a)};Cv.prototype.getMapCenter=Cv.prototype.hi;Cv.prototype.ki=function(){var a=Tu(this.c,"map_zoom");return isNaN(a)?void 0:a};Cv.prototype.getMapZoom=Cv.prototype.ki;
Cv.prototype.ii=function(){var a=Uu(this.c,"map_crosshair");return void 0===a?this.Ea:a};Cv.prototype.getMapCrosshair=Cv.prototype.ii;function Mv(a,b){var c;b?c=b:c=N(a.b).getCenter();a.o&&a.F.ma(a.o);a.o=new yd(new Mi(c));a.o.setStyle(a.N);a.F.na(a.o)}Cv.prototype.ji=function(){return Su(this.c,"map_tooltip")};Cv.prototype.getMapTooltip=Cv.prototype.ji;
function Nv(a,b,c){var d;c?d=c:d=N(a.b).getCenter();b=$("<div/>",{"class":"gmf-permalink-tooltip",text:b})[0];null!==a.K&&a.b.Ha.remove(a.K);a.K=new lv({element:b,position:d});a.b.Ha.push(a.K)}Cv.prototype.fc=function(){var a=Su(this.c,"rl_features");return void 0!==a&&""!==a?this.U.gb(a):[]};Cv.prototype.getFeatures=Cv.prototype.fc;
Cv.prototype.Oe=function(a){for(var b=this,c=this.g.gg(Ov),d=0;d<c.length;d++){var e=c[d];a[e.slice(Ov.length)]=this.g.Xa(e)}this.i.$watchCollection(function(){return a},function(a){var c={},d;for(d in a)c[Ov+d]=a[d];b.g.updateParams(c)})};Cv.prototype.setDimensions=Cv.prototype.Oe;Cv.prototype.setMap=function(a){var b=this;a!==this.b&&(this.b&&(A(this.G),this.b=this.G=null),a&&(this.b=a,this.wa?this.wa.getFeature().then(function(c){Pv(b,a,c)}):Pv(this,a,null)))};Cv.prototype.setMap=Cv.prototype.setMap;
function Pv(a,b,c){var d=N(b),e;if(c&&c.getGeometry()){var f=b.ra();lj(d,c.getGeometry().I(),f)}else Uu(a.c,"3d_enabled")||((e=a.hi())&&d.setCenter(e),c=a.ki(),void 0!==c&&cj(d,d.Aa(d.j,c-d.v,0)));a.G=D(d,"propertychange",a.ia(function(){var b=d.getCenter(),c=kj(d),e={};e.map_x=Math.round(b[0]);e.map_y=Math.round(b[1]);e.map_zoom=c;Vu(a.c,e)},300,!0),a);a.ii()&&a.F&&Mv(a,e);(c=a.ji())&&Nv(a,c,e);e=Qv(a);null!==e&&a.za&&a.za.Qb(e,b)}
Cv.prototype.Tf=function(a){var b=Su(this.c,"baselayer_ref");if(void 0!==b){a=t(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,c.get("label")===b)return c}return null};Cv.prototype.getBackgroundLayer=Cv.prototype.Tf;Cv.prototype.Fa=function(){if(this.b&&this.C){var a={baselayer_ref:this.C.get(this.b).get("label")};Vu(this.c,a)}};Cv.prototype.Yj=function(){if(this.aa){var a=this.aa.rootCtrl.node.children.map(function(a){return a.name}),b={};b.tree_groups=a.join(",");Vu(this.c,b)}};
Cv.prototype.refreshFirstLevelGroups=Cv.prototype.Yj;function Iv(a){var b=a.indexOf("theme");return-1!=b&&b==a.length-2}Cv.prototype.Uh=function(){var a=this.g.getPath().split("/");if(Iv(a))return a[a.length-1];if(a=Su(this.c,"theme"))return a;a=this.yf();return null!==a?a:this.T?this.T:null};Cv.prototype.defaultThemeName=Cv.prototype.Uh;Cv.prototype.yf=function(){if(!this.gmfUser_)return null;var a=this.gmfUser_.functionalities;return a&&"default_theme"in a&&(a=a.default_theme,0<a.length)?a[0]:null};
Cv.prototype.defaultThemeNameFromFunctionalities=Cv.prototype.yf;
function Lv(a){a.W&&a.W.lb().then(function(b){var c=a.Uh();a.u&&iv(a.u,a.u.modeFlush?c:"");var d=[],e=a.g.Xa("tree_groups");if(void 0===e){if(c=pu(b,c))d=c.children}else e.split(",").forEach(function(a){(a=qu(b,a))&&d.push(a)});a.aa&&a.aa.Pe(d);a.$timeout_(function(){a.aa&&a.aa.rootCtrl&&(a.aa.rootCtrl.La(function(b){if(!b.isRoot){var c=Tu(a.c,(b.parent.node.mixed?Fv:Gv)+b.node.name);void 0!==c&&b.layer&&b.layer.set("opacity",c);if(b.parent.node&&b.parent.node.mixed&&void 0==b.node.children)c=Uu(a.c,
Dv+b.node.name),void 0!==c&&b.ib(c?"on":"off",!1);else if(!b.node.mixed&&1==b.depth&&(c=Su(a.c,Ev+b.node.name),void 0!==c)){var d=c.split(",");b.La(function(a){if(void 0===a.node.children){var b=Pd(d,a.node.name);a.ib(b?"on":"off",!1)}})}}}),a.aa.rootCtrl.children.forEach(function(b){b.La(function(c){if("indeterminate"!==c.getState())return a.i.$broadcast("ngeo-layertree-state",c,b),"STOP"})}))})})}m=Cv.prototype;m.tn=function(a){Hv(this,a.element)};m.un=function(a){a=x(a.element);this.Qa.Ec(a);this.Oi()};
function Hv(a,b){var c=x(b);a.Qa.Jb(c,D(b,"change",a.ia(a.Oi,250,!0),a))}m.Oi=function(){if(this.j){var a={rl_features:this.U.Md(this.j.b)};Vu(this.c,a)}};
function Qv(a){var b=a.g.Xa("wfs_layer");if(!b)return null;var c=a.g.pi("wfs_ngroups"),d=a.g.gg(Rv),e=[];if(void 0===c){var f=Sv(a,Rv,d);null!==f&&e.push(f)}else for(var g=0;g<c;g++)f=Sv(a,Rv+g+"_",d),null!==f&&e.push(f);if(0==e.length)return null;a=a.g.Xa("wfs_showFeatures");return{wfsType:b,showFeatures:!("0"===a||"false"===a),filterGroups:e}}
function Sv(a,b,c){var d=[];c.forEach(function(c){if("wfs_layer"!=c&&"wfs_showFeatures"!=c&&"wfs_ngroups"!=c&&0==c.indexOf(b)){var e=a.g.Xa(c);if(e){var g=e;-1<e.indexOf(",")&&(g=e.split(","));c={property:c.replace(b,""),condition:g};d.push(c)}}});return 0<d.length?{filters:d}:null}
function Jv(a){var b=a.qa,c=a.f,d=[],e=a.c.c.eds_n,f=a.c.c.eds_u;if(e&&f){e=e.split(Tv);f=f.split(Tv);for(var g={},h=0,k=f.length;h<k;g={Nb:g.Nb,Ya:g.Ya,Ua:g.Ua,url:g.url},h++){var l=e[h];if(!l)break;g.Ya=l.split(Uv);g.url=f[h];g.Ua=/(wmts)/i.test(g.url)?"WMTS":gt;g.Nb=a.ua.defer();d.push(g.Nb.promise);g.Ua===gt?b.Gk(g.url).then(function(a){return function(b){a.Nb.resolve({ed:b,Ya:a.Ya,Ua:a.Ua,url:a.url})}}(g),function(a){return function(){a.Nb.reject({Ya:a.Ya,Ua:a.Ua,url:a.url})}}(g)):"WMTS"===g.Ua?
b.Ik(g.url).then(function(a){return function(b){a.Nb.resolve({ed:b,Ya:a.Ya,Ua:a.Ua,url:a.url})}}(g),function(a){return function(){a.Nb.reject({Ya:a.Ya,Ua:a.Ua,url:a.url})}}(g)):g.Nb.reject({Ya:g.Ya,Ua:g.Ua,url:g.url})}}return a.ua.all(d).then(function(a){a=t(a);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d.Ua===gt)for(var e=t(d.Ya),f=e.next();!f.done;f=e.next())(f=b.fh(d.ed.Capability.Layer.Layer,f.value))&&c.Jh(f,d.ed,d.url);else if("WMTS"===d.Ua)for(e=t(d.Ya),f=e.next();!f.done;f=e.next())(f=
b.Hk(d.ed.Contents.Layer,f.value))&&c.Kh(f,d.ed,d.url)},function(){})}m.Hi=function(a){Kv(this,a.element);this.ad()};function Kv(a,b){D(b.dataSourcesCollection,"add",a.ad,a);D(b.dataSourcesCollection,"remove",a.ad,a)}function Vv(a,b,c){if(b instanceof mj){b=t(b.getLayers().b);for(var d=b.next();!d.done;d=b.next())if(Vv(a,d.value,c))return!0;return!1}return b.get("layerNodeName")==c}
m.Ii=function(a){a=a.element;La(a.dataSourcesCollection,"add",this.ad,this);La(a.dataSourcesCollection,"remove",this.ad,this);this.ad()};
m.ad=function(){var a=this;this.S&&this.$timeout_.cancel(this.S);this.S=this.$timeout_(function(){for(var b=[],c=[],d=t(a.f.wmsGroups),e=d.next();!e.done;e=d.next()){var f=e.value;c.push(f.url);e=[];f=t(f.dataSources);for(var g=f.next();!g.done;g=f.next())g=g.value.gc()[0],e.push(g);b.push(e.join(Uv))}d=t(a.f.wmtsGroups);for(e=d.next();!e.done;e=d.next()){f=e.value;c.push(f.url);e=[];f=t(f.dataSources);for(g=f.next();!g.done;g=f.next())e.push(g.value.wmtsLayer);b.push(e.join(Uv))}d={};Vu(a.c,(d.eds_n=
b.join(Tv),d.eds_u=c.join(Tv),d));a.S=null})};
function bv(a,b){for(var c=a.g.fg(),d=t(c),e=d.next();!e.done;e=d.next()){e=e.value;if(e.startsWith(Ev))for(var f=e.substring(Ev.length),g=t(b),h=g.next();!h.done;h=g.next())if(h.value.name==f){a.c.Lb(e);break}if(e.startsWith(Gv))for(f=e.substring(Gv.length),g=t(b),h=g.next();!h.done;h=g.next())if(h.value.name==f){a.c.Lb(e);break}}a.$timeout_(function(){if(a.b)for(var b=sj(a.b),d=t(c),e=d.next();!e.done;e=d.next())e=e.value,e.startsWith(Dv)&&(Vv(a,b,e.substring(Dv.length))||a.c.Lb(e)),e.startsWith(Fv)&&
(Vv(a,b,e.substring(Fv.length))||a.c.Lb(e))})}var Wv=angular.module("gmfPermalink",[Bv.name,xu.name,kv.name,mv.name,gn.name,Fu.name]);ym.requires.push(Wv.name);Wv.service("gmfPermalink",Cv);var Ov="dim_",Dv="tree_enable_",Ev="tree_group_layers_",Gv="tree_group_opacity_",Fv="tree_opacity_",Rv="wfs_",Xv={Ir:Ov,hs:Dv,ks:Ev,ls:Gv,ns:Fv,os:Rv},Tv=",",Uv=";";Wv.value("gmfPermalinkOptions",{});var Yv=[],Zv;for(Zv in Xv)Yv.push(new RegExp(Xv[Zv]+".*"));for(var $v in zm)Yv.push(new RegExp(Xv[$v]));
S.value("ngeoUsedKeyRegexp",Yv);var aw=angular.module("gmfLayertreeDatasourceGroupTreeComponent",[Br.name]);ym.requires.push(aw.name);function bw(a,b){this.J=a;this.c=b.collection}bw.prototype.lm=function(){return"datasourcegrouptree-"+x(this.group)};bw.prototype.getGroupUid=bw.prototype.lm;bw.prototype.toggle=function(){this.group.uk()};bw.prototype.toggle=bw.prototype.toggle;bw.prototype.fr=function(a){a.visible=!a.visible};bw.prototype.toggleDataSource=bw.prototype.fr;
bw.prototype.remove=function(){for(var a=this.group.dataSources.length-1;0<=a;a--)this.c.remove(this.group.dataSources[a])};bw.prototype.remove=bw.prototype.remove;bw.prototype.wb=function(a){this.c.remove(a)};bw.prototype.removeDataSource=bw.prototype.wb;bw.$inject=["$scope","ngeoDataSources"];aw.component("gmfDatasourcegrouptree",{bindings:{group:"<"},controller:bw,templateUrl:function(){return"gmf/layertree/datasourceGroupTreeComponent.html"}});function cw(a,b,c,d){var e=this;this.c=b;this.b=c;d.Nc().then(function(a){e.g=a});a.$on("ngeo-layertree-state",function(a,b,c){dw(c)})}cw.$inject=["$rootScope","ngeoLayerHelper","ngeoWMSTime","gmfThemes"];function dw(a){a.La(function(a){a.layer&&!a.node.mixed&&ew(a.layer,a)})}
function ew(a,b){var c="on"===b.getState();if("WMTS"===b.node.type)Oe(a,c);else if(b.node.mixed||1!==b.depth)Oe(a,c);else{var d=[];b.La(function(a){void 0===a.node.children&&"on"===a.getState()&&d.push(a.node.layers)});0===d.length&&Oe(a,!1);M(a).updateParams({LAYERS:d.reverse().join(",")});0!==d.length&&Oe(a,!0)}}
function fw(a,b,c,d){var e=b.node,f=null;if(b.parent.isRoot)f=gw(a,b,!!e.mixed),a=d|0,Mh(c.getLayers(),a,f);else{c=b.parent;do d=!1===c.node.mixed,c=c.parent;while(c.parent&&!d);d||(f=gw(a,b,!0),Mh(hw(b.parent).getLayers(),0,f))}return f}
function gw(a,b,c){var d=b.node;if(c)var e=a.c.ee();else{c=iw(a,b);var f=a.g[d.ogcServer||""];e=a.c.Hc(f.url,"",f.imageType,f.type,c,void 0,f.credential?"use-credentials":"anonymous");var g=!1;b.La(function(a){jw(a.node,e);a.node.metadata.isChecked&&(a.ib("on",!1),ew(e,a),g=!0)});Oe(e,g);e.set("layerNodeName",d.name)}return e}
function kw(a,b){var c=new Se;a.c.wf(b.url,b.layer,b.dimensions).then(function(a){var b=M(a);c.set("source",b);c.set("capabilitiesStyles",a.get("capabilitiesStyles"))});return c}function jw(a,b){var c=x(a),d=b.get("querySourceIds")||[];d.push(c);b.set("querySourceIds",d);a.metadata.disclaimer&&(c=b.get("disclaimers")||[],c.push(a.metadata.disclaimer),b.set("disclaimers",c))}
function iw(a,b){var c,d=b.node;d.time?c=d.time:d.children&&b.La(function(a){if(void 0===a.node.children&&a.node.time)return c=a.node.time,"STOP"});if(c){b=a.b.Oc(c).values;var e=a.b.Jc(c,{start:b[0]||b,end:b[1]})}return e}function hw(a){for(var b=null;!a.isRoot&&null===b;)a.layer&&(b=a.layer),a=a.parent;return b}var lw=angular.module("gmfSyncLayertreeMap",[Fu.name,ur.name]);lw.service("gmfSyncLayertreeMap",cw);ym.requires.push(lw.name);var mw=angular.module("ngeoLayertree",[Fu.name]);S.requires.push(mw.name);mw.value("ngeoLayertreeTemplateUrl",function(a,b){a=b.ngeoLayertreeTemplateurl;return void 0!==a?a:"ngeo/layertree/component.html"});mw.b=function(a,b){return{restrict:"A",scope:!0,templateUrl:b,controller:Bu}};mw.b.$inject=["$compile","ngeoLayertreeTemplateUrl"];mw.directive("ngeoLayertree",mw.b);var nw=angular.module("ngeoPopup",["ngSanitize"]);S.requires.push(nw.name);nw.value("ngeoPopupTemplateUrl",function(a,b){a=b.ngeoPopupTemplateurl;return void 0!==a?a:"ngeo/message/popupcomponent.html"});nw.b=function(a){return{restrict:"A",templateUrl:a,link:function(a,c){c.addClass("popover");a.close=function(a){a&&(a.stopPropagation(),a.preventDefault());c.addClass("hidden")};a.$watch("open",function(a){c.css("display",a?"block":"none")})}}};nw.b.$inject=["ngeoPopupTemplateUrl"];
nw.directive("ngeoPopup",nw.b);function ow(a,b,c,d){var e=this;this.scope=b.$new(!0);this.scope.$watch(function(){return e.scope.open},function(a){!a&&e.g&&e.f(function(){e.destroy()})});this.b=c;this.f=d;this.c=angular.element("<div ngeo-popup></div>");this.g=!1;a(this.c)(this.scope);angular.element(document.body).append(this.c)}ow.prototype.mi=function(){return this.scope.open};ow.prototype.getOpen=ow.prototype.mi;ow.prototype.Qe=function(a){this.scope.open=a};ow.prototype.setOpen=ow.prototype.Qe;
ow.prototype.destroy=function(){this.scope.$destroy();this.c.remove()};ow.prototype.destroy=ow.prototype.destroy;ow.prototype.setTitle=function(a){a=this.b.trustAsHtml(a);this.scope.title=a};ow.prototype.setTitle=ow.prototype.setTitle;ow.prototype.setContent=function(a,b){this.scope.content=b?this.b.trustAsHtml(a):a};ow.prototype.setContent=ow.prototype.setContent;ow.prototype.setUrl=function(a){a=this.b.trustAsHtml('<iframe src="'+a+'" width="100%" height="100%"></iframe>');this.setContent(a)};
ow.prototype.setUrl=ow.prototype.setUrl;ow.prototype.Re=function(a){this.c.width(a)};ow.prototype.setWidth=ow.prototype.Re;ow.prototype.Xg=function(a){this.c.height(a)};ow.prototype.setHeight=ow.prototype.Xg;ow.prototype.Cd=function(a,b){this.Re(a);this.Xg(b)};ow.prototype.setSize=ow.prototype.Cd;ow.prototype.gk=function(a){this.g=a};ow.prototype.setAutoDestroy=ow.prototype.gk;ow.prototype.addClass=function(a){this.c.addClass(a)};ow.prototype.addClass=ow.prototype.addClass;
ow.prototype.open=function(a){a.url?this.setUrl(a.url):a.content?this.setContent(a.content):Xm('ngeo.message.Popup options requirest "url" or "content".');void 0!==a.autoDestroy&&this.gk(a.autoDestroy);void 0!==a.cls&&this.addClass(a.cls);void 0!==a.height&&this.Xg(a.height);void 0!==a.title&&this.setTitle(a.title);void 0!==a.width&&this.Re(a.width);this.Qe(!0)};ow.prototype.open=ow.prototype.open;function pw(a,b,c,d){return function(){return new ow(a,b,c,d)}}
pw.$inject=["$compile","$rootScope","$sce","$timeout"];var qw=angular.module("ngeoCreatePopup",[nw.name]);qw.factory("ngeoCreatePopup",pw);S.requires.push(qw.name);function rw(a,b,c,d){c.$watchCollection(function(){return a},function(){var c;var f=a.length-1;for(c=0;0<=f;--f)d(a[f])&&(b[c++]=a[f]);b.length=c});c.$watchCollection(function(){return b},function(){var c;var f=0;var g=a.length;for(c=b.length-1;f<g;++f)d(a[f])&&(a[f]=b[c--])})};var sw=angular.module("gmfLayertreeComponent",[wr.name,lu.name,Wv.name,aw.name,lw.name,gv.name,xu.name,mw.name,Fu.name,bu.name,qw.name,nw.name,ur.name]);ym.requires.push(sw.name);sw.value("gmfLayertreeTemplate",function(){return'<div ngeo-layertree="gmfLayertreeCtrl.root" ngeo-layertree-map="gmfLayertreeCtrl.map" ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(treeCtrl)" ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" ngeo-layertree-templateurl="gmf/layertree/component.html"></div>'});
function tw(a,b,c){return c(a,b)}tw.$inject=["$element","$attrs","gmfLayertreeTemplate"];mw.value("ngeoLayertreeTemplateUrl",function(){return"gmf/layertree/component.html"});sw.c={controller:"GmfLayertreeController as gmfLayertreeCtrl",bindings:{map:"=gmfLayertreeMap",dimensions:"=?gmfLayertreeDimensions",openLinksInNewWindow:"<?gmfLayertreeOpenlinksinnewwindow"},template:tw};sw.component("gmfLayertree",sw.c);
function Z(a,b,c,d,e,f,g,h,k,l,n){var p=this;this.J=d;this.i=b;this.f=c;this.b=f;this.gmfDataSourceBeingFiltered=g;this.gmfExternalDataSourcesManager=h;this.o=k;this.aa=l;this.root=l.root;this.j=n;this.u=e();this.g={};this.c=null;this.layers=[];a.on("shown.bs.collapse",function(){p.J.$apply()})}Z.$inject="$element $http $sce $scope ngeoCreatePopup ngeoLayerHelper gmfDataSourceBeingFiltered gmfExternalDataSourcesManager gmfPermalink gmfTreeManager gmfSyncLayertreeMap ngeoWMSTime gmfThemes".split(" ");
Z.prototype.$onInit=function(){var a=this;this.openLinksInNewWindow=!0===this.openLinksInNewWindow;this.c=this.b.md(this.map,"data");rw(this.c.getLayers().b,this.layers,this.J,function(){return!0});this.J.$watchCollection(function(){return a.layers},function(){a.map.render()});this.J.$watchCollection(function(){if(a.aa.rootCtrl)return a.dimensions},function(b){b&&uw(a,a.aa.rootCtrl)})};function uw(a,b){b.La(function(b){b.node.dimensions&&vw(a,b.layer,b.node)})}
function vw(a,b,c){if(a.dimensions&&c.dimensions){var d={};for(f in c.dimensions)if(null===c.dimensions[f]){var e=a.dimensions[f];void 0!==e&&(d[f]=e)}else d[f]=c.dimensions[f];if(!Da(d)){var f=M(b);if(f instanceof yh)f.Vb(d);else if(f instanceof Vt)f.updateParams(d);else b.once("change:source",function(){vw(a,b,c)})}}}
Z.prototype.la=function(a){if(a.parent.isRoot){this.aa.rootCtrl=a.parent;var b=this.aa.root.children.length-this.aa.j||0}var c=this.j;var d=this.c,e=b;b=null;if(void 0!==a.node.children&&a.node.mixed)b=fw(c,a,d,e);else if(void 0===a.node.children&&a.parent.node.mixed)b=a.node,"WMTS"===b.type?c=kw(c,b):(d=iw(c,a),e=c.g[b.ogcServer],c=c.c.Hc(e.url,b.layers,e.imageType,e.type,d,void 0,e.credential?"use-credentials":"anonymous")),c.set("layerNodeName",b.name),jw(b,c),(b=!0===b.metadata.isChecked)&&a.ib("on",
!1),Oe(c,b),Mh(hw(a.parent).getLayers(),0,c),b=c;else if(void 0===a.node.children){c=a.node;for(d=a;!d.parent.isRoot;)d=d.parent;e=d.layer;jw(c,e);c.metadata.isChecked?(a.ib("on",!1),ew(e,d)):Du(a.parent)}else 1!==a.depth||a.node.mixed||(b=fw(c,a,d,e));b&&a.node.metadata.opacity&&b.set("opacity",a.node.metadata.opacity);c=b;c instanceof Pe&&vw(this,c,a.node);return c};Z.prototype.getLayer=Z.prototype.la;Z.prototype.listeners=function(a,b){var c=this.c;a.$on("$destroy",function(){c.getLayers().remove(b.layer)})};
Z.prototype.listeners=Z.prototype.listeners;Z.prototype.dr=function(a){a.ib("on"===a.getState()?"off":"on")};Z.prototype.toggleActive=Z.prototype.dr;Z.prototype.pm=function(a){return a.getState()};Z.prototype.getNodeState=Z.prototype.pm;Z.prototype.Ak=function(a,b){if(b){var c=a.ub();if(c)c.timeRangeValue=b;else if(a.children){c=0;for(var d=a.children.length;c<d;c++)this.Ak(a.children[c],b)}}};Z.prototype.updateWMSTimeLayerState=Z.prototype.Ak;
Z.prototype.nm=function(a){var b=a.node.metadata.iconUrl;if(void 0!==b)return b;if(void 0===a.node.children){var c=a.node;if("WMS"===c.type&&(b=c.metadata.legendRule,void 0!==b))return c=c.layers.split(",")[0],this.b.ne(dv(this.aa,a).url,c,void 0,b)}};Z.prototype.getLegendIconURL=Z.prototype.nm;
Z.prototype.dg=function(a){var b=this,c={};if(void 0!==a.node.children)return null;var d=a.node,e=d.name;if(d.metadata.legendImage)return c[e]=d.metadata.legendImage,c;var f=a.layer;if("WMTS"===d.type)return a=this.b.pg(f),(c[e]=a)?c:null;e=d.layers;var g=dv(this.aa,a),h=ww(this);"qgisserver"===g.type?e=[e]:e=e.split(",");e.forEach(function(a){c[a]=b.b.ne(g.url,a,h)});return c};Z.prototype.getLegendsObject=Z.prototype.dg;Z.prototype.qm=function(a){return(a=this.dg(a))?Object.keys(a).length:0};
Z.prototype.getNumberOfLegendsObject=Z.prototype.qm;function ww(a){a=N(a.map);return a.V()*Mb(a.b)*39.37*(25.4/.28)}Z.prototype.Sl=function(a){var b=this,c=a.uid.toString(),d=a.node;a=d.metadata.metadataUrl;if(void 0!==a){c in this.g||(this.g[c]=this.i.get(a).then(function(a){return b.f.trustAsHtml(a.data)}));var e=this.u;this.g[c].then(function(a){e.setTitle(d.name);e.setContent(a);e.Qe(!0)})}};Z.prototype.displayMetadata=Z.prototype.Sl;
Z.prototype.ul=function(){var a=this.aa.rootCtrl.children,b=[];this.aa.rootCtrl.node.children.forEach(function(c){a.some(function(a){a.node===c&&b.push(a)})},this);this.aa.rootCtrl.children=b;this.layers.length=0;this.aa.rootCtrl.children.forEach(function(a){this.layers.push(a.layer)},this);this.o.Yj()};Z.prototype.afterReorder=Z.prototype.ul;Z.prototype.removeNode=function(a){this.aa.Sg(a)};Z.prototype.removeNode=Z.prototype.removeNode;Z.prototype.wq=function(){this.aa.removeAll()};
Z.prototype.removeAllNodes=Z.prototype.wq;Z.prototype.Yo=function(){return this.aa.root.children.length};Z.prototype.nodesCount=Z.prototype.Yo;Z.prototype.tm=function(a){var b=N(this.map).V(),c=wu(a);if(void 0!==c&&b<c)return"out-of-resolution";a=vu(a);if(void 0!==a&&b>a)return"out-of-resolution"};Z.prototype.getResolutionStyle=Z.prototype.tm;Z.prototype.zr=function(a){var b=a.node;a=N(this.map);var c=a.V(),d=wu(b);void 0!==d&&c<d?cj(a,a.Aa(d,0,1)):(b=vu(b),void 0!==b&&c>b&&cj(a,a.Aa(b,0,-1)))};
Z.prototype.zoomToResolution=Z.prototype.zr;Z.prototype.hr=function(a){$(a).toggle({toggle:!0})};Z.prototype.toggleNodeLegend=Z.prototype.hr;Z.prototype.gr=function(a){this.gmfDataSourceBeingFiltered.dataSource=a};Z.prototype.toggleFiltrableDataSource=Z.prototype.gr;Z.prototype.bo=function(a){return $(a).is(":visible")};Z.prototype.isNodeLegendVisible=Z.prototype.bo;Z.prototype.Zq=function(a){return!a.isRoot&&(this.rk(a)||this.sk(a))};Z.prototype.supportsCustomization=Z.prototype.Zq;
Z.prototype.rk=function(a){var b=a.node;return!!b.metadata&&!!b.metadata.legend&&!!this.dg(a)};Z.prototype.supportsLegend=Z.prototype.rk;Z.prototype.sk=function(a){var b=a.node,c=a.parent.node;return!!a.layer&&(1===a.depth&&!b.mixed||1<a.depth&&c.mixed)};Z.prototype.supportsOpacityChange=Z.prototype.sk;sw.controller("GmfLayertreeController",Z);var xw=angular.module("gmfLayertreeTimeSliderComponent",[ur.name,"ui.slider"]);ym.requires.push(xw.name);
xw.b=function(){return{scope:{onDateSelected:"&gmfTimeSliderOnDateSelected",time:"=gmfTimeSliderTime"},bindToController:!0,controller:"gmfTimeSliderController as sliderCtrl",restrict:"AE",templateUrl:"gmf/layertree/timesliderComponent.html",link:{pre:function(a,b,c,d){function e(b,c){c.values?(b=new Date(yw(d,c.values[0])),c=new Date(yw(d,c.values[1])),d.dates=[b,c],c={start:b.getTime(),end:c.getTime()}):(b=new Date(yw(d,c.value)),d.dates=b,c={start:b.getTime()});a.$apply();return c}d.Cb();d.sliderOptions.stop=
function(b,c){d.onDateSelected({time:e(b,c)});a.$apply()};d.sliderOptions.slide=e}}}};xw.b.$inject=["$timeout","$filter"];xw.directive("gmfTimeSlider",xw.b);function zw(a,b){this.b=b}zw.$inject=["$scope","ngeoWMSTime"];zw.prototype.Cb=function(){this.c=Aw(this);var a=this.b.Oc(this.time);this.isModeRange="range"===this.time.mode;this.minValue=a.dj;this.maxValue=a.aj;this.dates=this.isModeRange?[a.values[0],a.values[1]]:a.values;this.sliderOptions={range:this.isModeRange,min:this.minValue,max:this.maxValue}};
function Aw(a){var b=a.time,c=null,d=new Date(a.minValue);a=new Date(a.maxValue);if(b.values)c=[],b.values.forEach(function(a){c.push((new Date(a)).getTime())});else{var e=new Date(d.getTime());e.setFullYear(d.getFullYear()+1024*b.interval[0]);e.setMonth(d.getMonth()+1024*b.interval[1],d.getDate()+1024*b.interval[2]);e.setSeconds(d.getSeconds()+1024*b.interval[3]);if(e>a)for(c=[],e=0;;e++){var f=new Date(d.getTime());f.setFullYear(d.getFullYear()+e*b.interval[0]);f.setMonth(d.getMonth()+e*b.interval[1],
d.getDate()+e*b.interval[2]);f.setSeconds(d.getSeconds()+e*b.interval[3]);if(f<=a)c.push(f.getTime());else break}}return c}
function yw(a,b){if(b<=a.minValue)return a.minValue;if(b>=a.maxValue)return a.maxValue;if(a.c){for(var c,d=0,e=a.c.length-1;1<e-d;)c=Math.floor((d+e)/2),a.c[c]>=b?e=c:d=c;return a.c[Math.abs(a.c[d]-b)<Math.abs(a.c[e]-b)?d:e]}b=new Date(b);c=new Date(a.minValue);d=new Date(a.minValue);e=new Date(a.maxValue);for(var f=Math.abs(b-d),g=1;;g++){var h=new Date(c.getTime());h.setFullYear(c.getFullYear()+g*a.time.interval[0]);h.setMonth(c.getMonth()+g*a.time.interval[1],c.getDate()+g*a.time.interval[2]);
h.setSeconds(c.getSeconds()+g*a.time.interval[3]);if(h>e)break;var k=Math.abs(b-h);if(k<=f)d=h,f=k;else break}return d.getTime()}zw.prototype.om=function(a){return tr(this.b,a,this.time.resolution)};zw.prototype.getLocalizedDate=zw.prototype.om;xw.controller("gmfTimeSliderController",zw);var Bw=angular.module("gmfLayertreeModule",[sw.name,aw.name,lw.name,xw.name,gv.name]);function Cw(a,b){this.b=b;this.f=a.get("fulltextsearchUrl");a=this.f.split("?");this.g=a[0];this.c=Mm(2==a.length?"?"+a[1]:"")}va("gmf.search.FulltextSearch",Cw);Cw.$inject=["$injector","$http"];Cw.prototype.search=function(a,b){var c=this;b=Object.assign({},this.c,b);b.query=a;var d=this.g+"?"+Nm(b);return new Promise(function(a,b){c.b.get(d).then(function(b){return a(b.data)}).catch(b)})};var Dw=angular.module("gmfSearchFulltextSearch",[]);Dw.service("gmfSearchFulltextSearch",Cw);ym.requires.push(Dw.name);function Ew(a,b){this.g=a;this.c=null;this.b=b}Ew.prototype.na=function(a){this.g.na(a,this.b)};Ew.prototype.addFeature=Ew.prototype.na;Ew.prototype.ma=function(a){this.g.ma(a,this.b)};Ew.prototype.removeFeature=Ew.prototype.ma;Ew.prototype.clear=function(){this.g.clear(this.b)};Ew.prototype.clear=Ew.prototype.clear;
Ew.prototype.rc=function(a){null!==this.c&&(this.c.clear(),La(this.c,"add",this.f,this),La(this.c,"remove",this.j,this));null!==a&&(a.forEach(function(a){this.na(a)},this),D(a,"add",this.f,this),D(a,"remove",this.j,this));this.c=a};Ew.prototype.setFeatures=Ew.prototype.rc;Ew.prototype.setStyle=function(a){this.g.setStyle(a,this.b)};Ew.prototype.setStyle=Ew.prototype.setStyle;Ew.prototype.f=function(a){this.na(a.element)};Ew.prototype.j=function(a){this.ma(a.element)};
var Fw=angular.module("ngeoFeatureOverlay",[]);S.requires.push(Fw.name);function Gw(){this.b={};this.c=[];this.g=new sm({Yb:!1});this.f=new Hh({source:this.g,style:this.j.bind(this),Wb:!0,Xb:!0})}Gw.prototype.na=function(a,b){var c=x(a).toString();this.b[c]=b;this.c[b].features[c]=a;this.g.na(a)};Gw.prototype.addFeature=Gw.prototype.na;Gw.prototype.ma=function(a,b){var c=x(a).toString();delete this.b[c];delete this.c[b].features[c];this.g.ma(a)};Gw.prototype.removeFeature=Gw.prototype.ma;
Gw.prototype.clear=function(a){var b=this.c[a],c;for(c in b.features)this.ma(b.features[c],a)};Gw.prototype.clear=Gw.prototype.clear;Gw.prototype.la=function(){return this.f};Gw.prototype.getLayer=Gw.prototype.la;Gw.prototype.eb=function(){var a=this.c.length;this.c.push({styleFunction:wd,features:{}});return new Ew(this,a)};Gw.prototype.getFeatureOverlay=Gw.prototype.eb;Gw.prototype.Cb=function(a){this.f.setMap(a)};Gw.prototype.init=Gw.prototype.Cb;
Gw.prototype.setStyle=function(a,b){this.c[b].styleFunction=null===a?wd:ud(a)};Gw.prototype.setStyle=Gw.prototype.setStyle;Gw.prototype.j=function(a,b){var c=x(a).toString();return this.c[this.b[c]].styleFunction(a,b)};var Hw=angular.module("ngeoFeatureOverlayMgr",[Fw.name]);Hw.service("ngeoFeatureOverlayMgr",Gw);S.requires.push(Hw.name);var Iw=angular.module("ngeoColorpicker",[]);S.requires.push(Iw.name);Iw.value("ngeoColorpickerTemplateUrl",function(a,b){a=b.ngeoColorpickerTemplateurl;return void 0!==a?a:"ngeo/misc/colorpickerComponent.html"});Iw.c=function(a){return{restrict:"A",scope:{colors:"<?ngeoColorpicker",color:"=?ngeoColorpickerColor"},controller:"NgeoColorpickerController as ctrl",bindToController:!0,templateUrl:a}};Iw.c.$inject=["ngeoColorpickerTemplateUrl"];Iw.directive("ngeoColorpicker",Iw.c);
Iw.lh=["#F4EB37 #CDDC39 #62AF44 #009D57 #0BA9CC #4186F0 #3F5BA9 #7C3592 #A61B4A #DB4436 #F8971B #F4B400 #795046".split(" "),"#F9F7A6 #E6EEA3 #B7DBAB #7CCFA9 #93D7E8 #9FC3FF #A7B5D7 #C6A4CF #D698AD #EE9C96 #FAD199 #FFDD5E #B29189".split(" "),["#ffffff","#CCCCCC","#777","#000000"]];va("ngeo.misc.colorpickerComponent.DEFAULT_COLORS",Iw.lh);function Jw(){this.colors=this.colors||Iw.lh}Jw.$inject=["$scope","$element","$attrs"];Jw.prototype.Ad=function(a){this.color=a};Jw.prototype.setColor=Jw.prototype.Ad;
Iw.controller("NgeoColorpickerController",Jw);var Kw=angular.module("ngeoPopover",[]);S.requires.push(Kw.name);
Kw.c=function(){return{restrict:"A",scope:!0,controller:"NgeoPopoverController as popoverCtrl",link:function(a,b,c,d){d.anchorElm.on("hidden.bs.popover",function(){d.anchorElm.data("bs.popover").inState.click=!1});d.anchorElm.on("inserted.bs.popover",function(){d.bodyElm.show();d.shown=!0});d.anchorElm.popover({container:"body",html:!0,content:d.bodyElm,placement:c.ngeoPopoverPlacement||"right"});if(c.ngeoPopoverDismiss)$(c.ngeoPopoverDismiss).on("scroll",function(){d.Af()});a.$on("$destroy",function(){d.anchorElm.popover("destroy");
d.anchorElm.unbind("inserted.bs.popover");d.anchorElm.unbind("hidden.bs.popover")})}}};Kw.S=function(){return{restrict:"A",require:"^^ngeoPopover",link:function(a,b,c,d){d.anchorElm=b}}};Kw.F=function(){return{restrict:"A",require:"^^ngeoPopover",link:function(a,b,c,d){d.bodyElm=b;b.hide()}}};
function Lw(a){function b(a){this.anchorElm[0]!==a.target&&this.bodyElm.parent()[0]!==a.target&0===this.bodyElm.parent().find(a.target).length&&this.shown&&this.Af()}this.shown=!1;this.bodyElm=this.anchorElm=void 0;angular.element("body").on("mousedown",b.bind(this));a.$on("$destroy",function(){angular.element("body").off("mousedown",b)})}Lw.$inject=["$scope"];Lw.prototype.Af=function(){this.shown=!1;this.anchorElm.popover("hide")};Lw.prototype.dismissPopover=Lw.prototype.Af;
Kw.controller("NgeoPopoverController",Lw);Kw.directive("ngeoPopover",Kw.c);Kw.directive("ngeoPopoverAnchor",Kw.S);Kw.directive("ngeoPopoverContent",Kw.F);function Mw(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.ngeoSearch),e=a.$eval(c.ngeoSearchDatasets).slice();e.unshift(d);b.typeahead.apply(b,[].concat(qa(e)));c=a.$eval(c.ngeoSearchListeners);var f=Mw.c(c);b.on("typeahead:open",function(){a.$apply(function(){f.open()})});b.on("typeahead:close",function(){a.$apply(function(){f.close()})});b.on("typeahead:cursorchange",function(b,c,d){a.$apply(function(){f.cursorchange(b,c,d)})});b.on("typeahead:select",function(b,c,d){a.$apply(function(){f.select(b,
c,d)})});b.on("typeahead:autocomplete",function(b,c,d){a.$apply(function(){f.autocomplete(b,c,d)})});b.on("typeahead:asyncreceive",function(c,d,e){a.$apply(function(){var a=b.data("tt-typeahead").menu._allDatasetsEmpty();f.datasetsempty(c,e,a)})})}}}
Mw.c=function(a){var b;void 0===a?b={open:xa,close:xa,cursorchange:xa,datasetsempty:xa,select:xa,autocomplete:xa}:b={open:void 0!==a.open?a.open:xa,close:void 0!==a.close?a.close:xa,cursorchange:void 0!==a.cursorchange?a.cursorchange:xa,datasetsempty:void 0!==a.datasetsempty?a.datasetsempty:xa,select:void 0!==a.select?a.select:xa,autocomplete:void 0!==a.autocomplete?a.autocomplete:xa};return b};Mw.module=angular.module("ngeoSearchDirective",[]);Mw.module.directive("ngeoSearch",Mw);function Nw(){Cd.call(this)}u(Nw,Cd);function Ow(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}m=Nw.prototype;m.getType=function(){return"json"};m.Jg=function(a){return Pw(this,Ow(a),Dd(this,a,void 0))};m.gb=function(a,b){var c=Ow(a);a=Dd(this,a,b);if("FeatureCollection"===c.type){b=[];c=c.features;var d;var e=0;for(d=c.length;e<d;++e)b.push(Pw(this,c[e],a))}else b=[Pw(this,c,a)];return b};m.Ng=function(a){var b=Ow(a);a=Dd(this,a,void 0);return Qw(b,a)};
m.Je=function(a){a=Ow(a).crs;var b;a?"name"==a.type?b=fc(a.properties.name):Aa(!1,36):b=this.tb;return b};m.hh=function(a){return JSON.stringify(Rw(this,a,void 0))};m.Md=function(a,b){return JSON.stringify(Sw(this,a,b))};m.cf=function(a){return JSON.stringify(Tw(a,Ed(this,void 0)))};function Uw(a){a=a?a:{};Cd.call(this);this.tb=fc(a.tb?a.tb:"EPSG:4326");a.kb&&(this.j=fc(a.kb));this.c=a.geometryName;this.b=a.vs}u(Uw,Nw);function Qw(a,b){return a?Fd((0,Vw[a.type])(a),!1,b):null}function Tw(a,b){return(0,Ww[a.getType()])(Fd(a,!0,b),b)}
var Vw={Point:function(a){return new Mi(a.coordinates)},LineString:function(a){return new ye(a.coordinates)},Polygon:function(a){return new Ti(a.coordinates)},MultiPoint:function(a){return new Am(a.coordinates)},MultiLineString:function(a){return new Cm(a.coordinates)},MultiPolygon:function(a){return new Gm(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return Qw(a,b)});return new Dn(a)}},Ww={Point:function(a){return{type:"Point",coordinates:a.O()}},LineString:function(a){return{type:"LineString",
coordinates:a.O()}},Polygon:function(a,b){if(b)var c=b.Cq;return{type:"Polygon",coordinates:a.O(c)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.O()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.O()}},MultiPolygon:function(a,b){if(b)var c=b.Cq;return{type:"MultiPolygon",coordinates:a.O(c)}},GeometryCollection:function(a,b){return{type:"GeometryCollection",geometries:a.b.map(function(a){var c=z({},b);delete c.kb;return Tw(a,c)})}},Circle:function(){return{type:"GeometryCollection",
geometries:[]}}};function Pw(a,b,c){b="Feature"===b.type?b:{type:"Feature",geometry:b};c=Qw(b.geometry,c);var d=new yd;a.c?zd(d,a.c):a.b&&void 0!==b.geometry_name&&zd(d,b.geometry_name);d.setGeometry(c);void 0!==b.id&&Bd(d,b.id);b.properties&&Wa(d,b.properties);return d}function Rw(a,b,c){c=Ed(a,c);a={type:"Feature"};var d=b.f;void 0!==d&&(a.id=d);(d=b.getGeometry())?a.geometry=Tw(d,c):a.geometry=null;c=b.Sa();delete c[b.b];Da(c)?a.properties=null:a.properties=c;return a}
function Sw(a,b,c){c=Ed(a,c);var d=[],e;var f=0;for(e=b.length;f<e;++f)d.push(Rw(a,b[f],c));return{type:"FeatureCollection",features:d}};function Xw(a,b,c,d,e,f){var g=new Uw;a={remote:{url:a,prepare:function(a,b){b.url=b.url.replace("%QUERY",a);return b},transform:function(a){void 0!==b&&(a={type:"FeatureCollection",features:a.features.filter(b)});return g.gb(a,{kb:c,Kb:d})}},datumTokenizer:xa,queryTokenizer:Bloodhound.tokenizers.whitespace};e=z({},e||{});f=z({},f||{});e.remote&&(z(f,e.remote),delete e.remote);z(a,e);z(a.remote,f);return new Bloodhound(a)}Xw.module=angular.module("ngeoSearchCreategeojsonbloodhound",[]);
Xw.module.value("ngeoSearchCreateGeoJSONBloodhound",Xw);"function"!==typeof Kb()&&"function"===typeof proj4&&(Jb=proj4);proj4.defs("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");Nb(fc("EPSG:21781"),[42E4,3E4,9E5,35E4]);function Yw(a){var b=a||{},c=fc("EPSG:21781"),d=b.targetProjection;a={remote:{url:"https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY",prepare:function(a,c){c.url=c.url.replace("%QUERY",a);void 0!==b.limit&&(c.url+="&limit="+b.limit);void 0!==b.origins&&(c.url+="&origins="+b.origins);return void 0!==b.prepare?b.prepare(a,c):c},transform:function(a){return a.results.map(function(a){a=a.attrs;var b=new Mi([a.y,a.x]);var e=/BOX\((.*?) (.*?),(.*?) (.*?)\)/g.exec(a.geom_st_box2d);
e=null!==e?[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])]:null;void 0!==d&&(b.transform(c,d),null!==e&&(e=qc(e,c,d)));a.geometry=b;a.bbox=e;b=a.label;a.label_no_html=b.replace(/<\/?[ib]>/g,"");e=/<b>(.*?)<\/b>/g.exec(b);a.label_simple=null!==e?e[1]:b;b=new yd(a);Bd(b,a.featureId);return b})}},datumTokenizer:xa,queryTokenizer:Bloodhound.tokenizers.whitespace};var e=z({},b.options||{}),f=z({},b.remoteOptions||{});e.remote&&(z(f,e.remote),delete e.remote);z(a,e);z(a.remote,f);
return new Bloodhound(a)}Yw.module=angular.module("ngeoCreateLocationSearchBloodhound",[]);Yw.module.value("ngeoCreateLocationSearchBloodhound",Yw);var Zw=angular.module("ngeoSearchModule",[Mw.module.name,Xw.module.name,Yw.module.name]);var $w=angular.module("gmfSearch",[gv.name,Dw.name,xu.name,Qm.name,Iw.name,Zw.name,Hw.name,Kw.name]);ym.requires.push($w.name);$w.Y=function(a,b){a=b.gmfSearchTemplateurl;return void 0!==a?a:"gmf/search/component.html"};function ax(a,b,c){return c(a,b)}ax.$inject=["$element","$attrs","gmfSearchTemplateUrl"];
$w.c={bindings:{inputValue:"=?gmfSearchInputValue",placeholder:"@?gmfSearchPlaceholder",map:"<gmfSearchMap",datasources:"<gmfSearchDatasources",typeaheadOptions:"<?gmfSearchOptions",featuresStyles:"<?gmfSearchStyles",clearButton:"=gmfSearchClearbutton",colorChooser:"<gmfSearchColorchooser",coordinatesProjections:"<?gmfSearchCoordinatesprojections",additionalListeners:"<gmfSearchListeners",maxZoom:"<gmfSearchMaxzoom",delay:"<gmfSearchDelay",onInitCallback:"<?gmfSearchOnInit"},controller:"gmfSearchController",
templateUrl:ax};$w.value("gmfSearchTemplateUrl",$w.Y);$w.component("gmfSearch",$w.c);
function bx(a,b,c,d,e,f,g,h,k,l,n,p){this.g=a;this.J=b;this.B=c;this.K=d;this.ba=f;this.C=l;this.aa=n;this.u=p;this.F=h;this.S=k;e.has("ngeoLocation")&&(this.b=e.get("ngeoLocation"));this.j=g;this.f={};this.colorChooser=this.clearButton=!1;this.delay=parseInt(this.J.delay,10)||50;this.maxZoom=16;this.c=k.eb();this.datasources=[];this.options={highlight:!0};this.datasets=[];this.placeholder=this.inputValue="";this.displayColorPicker=!1}
bx.prototype.$onInit=function(){var a=this,b=this.coordinatesProjections;void 0===b?b=[N(this.map).b]:b=this.j.hg(b);this.coordinatesProjections=b;if(!this.clearButton)this.g.find("input").on("focus blur",function(){a.clear()});if(this.onInitCallback)this.onInitCallback();cx(this);this.c.setStyle(this.v.bind(this));this.typeaheadOptions&&z(this.options,this.typeaheadOptions);dx(this);this.J.$watch(function(){return a.color},this.lk.bind(this));this.listeners=ex(this.additionalListeners,{select:this.G.bind(this),
close:this.i.bind(this),datasetsempty:this.o.bind(this)});if(this.b&&(b=this.b.Xa("search"))){var c=1;this.b.Xa("search-select-index")&&(c=parseInt(this.b.Xa("search-select-index"),10));var d;this.b.Xa("map_zoom")&&(d=parseInt(this.b.Xa("map_zoom"),10));fx(this,b,c,d)}};
function ex(a,b){return void 0===a?b:{open:a.open,close:void 0===a.close?b.close:function(){b.close();a.close()},cursorchange:a.cursorchange,datasetsempty:a.datasetsempty,select:void 0===a.select?b.select:function(c,d,e){b.select(c,d,e);a.select(c,d,e)},autocomplete:a.autocomplete}}
function dx(a){for(var b=a.ba,c={},d=0;d<a.datasources.length;c={filters:c.filters,datasource:c.datasource},d++){c.datasource=a.datasources[d];var e=void 0!==c.datasource.groupValues?c.datasource.groupValues:[],f=c.datasource.groupActions?c.datasource.groupActions:[];c.filters=[];0===e.length?c.filters.push({title:"",filter:gx()}):e.forEach(function(a){return function(b){a.filters.push({title:b,filter:gx(b)})}}(c),a);f.forEach(function(a){return function(c){a.filters.push({title:b.getString(c.title),
filter:hx(c.action)})}}(c),a);c.filters.forEach(function(a){return function(b){this.datasets.push(ix(this,{bloodhoundOptions:a.datasource.bloodhoundOptions,xf:b.title,xs:"layer_name",labelKey:a.datasource.labelKey,projection:a.datasource.projection,typeaheadDatasetOptions:a.datasource.typeaheadDatasetOptions,url:a.datasource.url},b.filter))}}(c),a)}a.datasets.push({source:jx(a,N(a.map)),name:"coordinates",display:"label",templates:{header:function(){return'<div class="gmf-search-header" translate>'+
b.getString("Recenter to")+"</div>"},suggestion:function(a){return'<div class="gmf-search-datum">'+('<p class="gmf-search-label">'+a.label+"</p>")+"</div>"}}})}
function ix(a,b,c){var d=a.ba,e=a.J,f=a.B;a=kx(a,b,c);a={limit:Infinity,source:a.ttAdapter(),display:function(a){return a.get(b.labelKey)},templates:{header:function(){return void 0===b.xf?"":'<div class="gmf-search-header">'+d.getString(b.xf)+"</div>"},suggestion:function(a){var c=e.$new(!0);c.feature=a;var d='<p class="gmf-search-label" translate>'+a.get(b.labelKey)+"</p>";d+='<p class="gmf-search-group" translate>'+(a.get("layer_name")||b.xf)+"</p>";return f('<div class="gmf-search-datum">'+d+
"</div>")(c)}}};b.typeaheadDatasetOptions&&z(a,b.typeaheadDatasetOptions);return a}function hx(a){return function(b){b=b.properties;return b.actions?!b.layer_name&&b.actions.some(function(b){return b.action===a}):!1}}function gx(a){return function(b){b=b.properties.layer_name;return void 0===b?!1:void 0===a?!0:b===a}}function kx(a,b,c){var d=N(a.map).b.c,e=lx(a);a=a.F(b.url,c,fc(d),fc(b.projection),b.bloodhoundOptions,e);a.initialize();return a}
function lx(a){var b=a.ba;return{rateLimitWait:a.delay,prepare:function(a,d){var c=d.url,f=b.currentLanguage;d.xhrFields={withCredentials:!0};d.url=xh(c,{query:a,lang:f,"interface":"mobile"});return d}}}function jx(a,b){var c=b.b,d=c.I();return function(a,b){var e=[];a=this.j.qk(a);if(null!==a){var f=this.j.ah(a,d,c,this.coordinatesProjections);null!==f&&(e.push({label:a.join(" "),position:f,tt_source:"coordinates"}),b(e))}}.bind(a)}
function cx(a){a.f.gmfCoordinatesLayerName=new H({image:new od({stroke:new sd({color:[0,0,0,.7],width:2}),points:4,radius:8,Ee:0,angle:0})});var b=new rd({color:[65,134,240,.5]}),c=new sd({color:[65,134,240,1],width:2});a.f["default"]=new H({fill:b,image:new qd({fill:b,radius:5,stroke:c}),stroke:c});z(a.f,a.featuresStyles||{})}
bx.prototype.v=function(a){a=this.f[a.get("layer_name")]||this.f["default"];if(this.color){var b=Cc(this.color),c=b.slice();c[3]=1;b=b.slice();b[3]=.5;var d=a.sa();d&&d.Ad(c);(d=a.oa())&&d.Ad(b);a.Z()&&a.jk(new qd({fill:new rd({color:b}),radius:5,stroke:new sd({color:c})}))}return a};bx.prototype.lk=function(a){a&&(this.color=a,this.S.la().c())};bx.prototype.setStyleColor=bx.prototype.lk;
function mx(a){if(a.clearButton){var b=a.g.find(".twitter-typeahead .tt-menu");a.inputValue?b.show():b.hide()}}bx.prototype.Lp=function(){this.c.clear();this.clear()};bx.prototype.onClearButton=bx.prototype.Lp;bx.prototype.clear=function(){var a=this.g.find(".twitter-typeahead"),b=a.children(".tt-menu");a=a.children("input");this.inputValue="";$(a[1]).typeahead("val","");b.children(".tt-dataset").empty();mx(this);this.displayColorPicker=!1};bx.prototype.clear=bx.prototype.clear;
bx.prototype.blur=function(){var a=this.g.find(".twitter-typeahead").children("input");this.K(function(){$(a[1]).blur()})};bx.prototype.blur=bx.prototype.blur;bx.prototype.G=function(a,b){"coordinates"===b.tt_source?(a=new Mi(b.position),this.c.clear(),this.c.na(new yd({geometry:a,layer_name:"gmfCoordinatesLayerName"})),N(this.map).setCenter(b.position),nx(this)):ox(this,b)};
function ox(a,b){var c=b.get("actions"),d=b.getGeometry();if(c)for(var e={},f=0,g=c.length;f<g;e={dd:e.dd,ge:e.ge},f++){var h=c[f],k=h.action;e.dd=h.data;"add_theme"==k?a.C.lb().then(function(b){return function(c){(c=pu(c,b.dd))&&a.aa.zc(c.children)}}(e)):"add_group"==k?a.aa.xh(e.dd,!0):"add_layer"==k&&(h=a.datasources[0].groupActions,e.ge=void 0,h.forEach(function(a){return function(b){if("add_layer"===b.action)return a.ge=!0}}(e)),e.ge&&a.aa.wh(e.dd,!0,!!d))}c=a.map.ra();d&&c&&(e=N(a.map),a.c.clear(),
a.c.na(b),a.displayColorPicker=!0,b="GeometryCollection"===d.getType()?d.I():d,lj(e,b,{size:c,maxZoom:a.maxZoom}));nx(a)}function nx(a){a.clearButton||a.clear();a.blur()}bx.prototype.i=function(){this.clearButton||mx(this)};bx.prototype.o=function(a,b,c){a=this.g.find(".twitter-typeahead .tt-menu");b=a.children(".gmf-search-no-results");if(0==b.length){var d=$('<div class="gmf-search-no-results" translate>No result found</div>');a.append(d)}c?(b.show(),a.show()):b.hide()};
function fx(a,b,c,d){1>c&&(c=1);a.u.search(b,{limit:c}).then(function(b){if(b&&b.features[c-1]){b=(new Uw).Jg(b.features[c-1]);a.c.na(b);var e={};void 0!==d&&(e.maxZoom=d);lj(N(a.map),b.getGeometry().I(),e);a.inputValue=b.get("label")}})}bx.$inject="$element $scope $compile $timeout $injector gettextCatalog ngeoAutoProjection ngeoSearchCreateGeoJSONBloodhound ngeoFeatureOverlayMgr gmfThemes gmfTreeManager gmfSearchFulltextSearch".split(" ");$w.controller("gmfSearchController",bx);var px=angular.module("gmfSearchModule",[$w.name,Dw.name]);function qx(a,b,c){Ra.call(this);this.b=a;this.g=b.replace(/\/$/,"");this.c=c;rx(this)}ja(qx,Ra);function rx(a){a.b.get(a.g+"/"+sx,{withCredentials:!0}).then(a.f.bind(a,!0))}qx.prototype.ce=function(a,b,c){return this.b.post(this.g+"/"+tx,$.param({oldPassword:a,newPassword:b,confirmNewPassword:c}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})};qx.prototype.changePassword=qx.prototype.ce;
qx.prototype.ue=function(a,b){return this.b.post(this.g+"/"+ux,$.param({login:a,password:b}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(this.f.bind(this,!1))};qx.prototype.login=qx.prototype.ue;qx.prototype.ve=function(){return this.b.get(this.g+"/"+vx,{withCredentials:!0}).then(this.j.bind(this))};qx.prototype.logout=qx.prototype.ve;
qx.prototype.Le=function(a){var b=this.g+"/"+wx,c=function(a){return a.data}.bind(this);return this.b.post(b,$.param({login:a}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(c)};qx.prototype.resetPassword=qx.prototype.Le;qx.prototype.f=function(a,b){var c=b.data,d;for(d in c)this.c[d]=c[d];!a&&void 0!==c.username&&F(this,new kn("login",{bf:this.c}));a&&F(this,new kn("ready",{bf:this.c}));return b};
qx.prototype.j=function(){for(var a in this.c)this.c[a]=null;F(this,new kn("logout",{bf:this.c}));rx(this)};qx.$inject=["$http","authenticationBaseUrl","gmfUser"];var tx="loginchange",sx="loginuser",ux="login",vx="logout",wx="loginresetpassword",xx=angular.module("gmfAuthenticationService",[]);xx.service("gmfAuthenticationService",qx);ym.requires.push(xx.name);xx.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});var yx=angular.module("ngeoModal",[]);S.requires.push(yx.name);yx.c={template:'<div class="modal fade" tabindex="-1" role="dialog">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <ng-transclude></ng-transclude>\n      </div>\n    </div>\n  </div>',require:{ngModel:"ngModel"},transclude:!0,controller:"ngeoModalController",bindings:{resizable:"<ngeoModalResizable"}};yx.component("ngeoModal",yx.c);function zx(a,b){this.b=b;this.g=a}
zx.prototype.$onInit=function(){var a=this;this.c=this.b.children();this.resizable=!!this.resizable;var b=this.c.find(".modal-dialog");b.draggable();this.resizable&&b.resizable();this.ngModel.$render=function(){a.c.modal(a.ngModel.$viewValue?"show":"hide")};this.c.on("shown.bs.modal hidden.bs.modal",function(b){var c=b.type;a.g.$apply(function(){a.ngModel.$setViewValue("shown"==c)})})};zx.prototype.$onDestroy=function(){var a=this.c.find(".modal-dialog");a.draggable("destroy");this.resizable&&a.resizable("destroy")};
zx.$inject=["$scope","$element"];yx.controller("ngeoModalController",zx);var Ax=angular.module("gmfAuthentication",[xx.name,Nu.name,yx.name]);ym.requires.push(Ax.name);Ax.G=function(a,b){a=b.gmfAuthenticationTemplateurl;return void 0!==a?a:"gmf/authentication/component.html"};function Bx(a,b,c){return c(a,b)}Bx.$inject=["$element","$attrs","gmfAuthenticationTemplateUrl"];Ax.c={bindings:{allowPasswordChange:"<?gmfAuthenticationAllowPasswordChange",forcePasswordChange:"<?gmfAuthenticationForcePasswordChange"},controller:"GmfAuthenticationController",templateUrl:Bx};
Ax.value("gmfAuthenticationTemplateUrl",Ax.G);Ax.component("gmfAuthentication",Ax.c);function Cx(a,b,c,d,e){this.gmfUser=d;this.b=a;this.f=c;this.j=e;this.error=this.resetPasswordModalShown=this.changePasswordModalShown=this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=this.pwdVal=this.loginVal="";D(c,"ready",this.i.bind(this))}
Cx.prototype.$onInit=function(){this.allowPasswordReset=!1!==this.allowPasswordReset;this.allowPasswordChange=!1!==this.allowPasswordChange;this.forcePasswordChange=!0===this.forcePasswordChange};
Cx.prototype.ce=function(){var a=this,b=this.b,c=this.oldPwdVal,d=this.newPwdVal,e=this.newPwdConfVal,f=[];""===c&&f.push(b.getString("The old password is required."));""===d&&f.push(b.getString("The new password is required."));""===e&&f.push(b.getString("The password confirmation is required."));f.length?this.c(f):(c===d&&f.push(b.getString("The old and new passwords are the same.")),d!==e&&f.push(b.getString("The passwords don't match.")),f.length?this.c(f):(b=b.getString("Incorrect old password."),
this.f.ce(c,d,e).then(function(){a.changePasswordModalShown=!0;a.Eh()},this.c.bind(this,b))))};Cx.prototype.changePassword=Cx.prototype.ce;Cx.prototype.ue=function(){var a=this.b,b=[];""===this.loginVal&&b.push(a.getString("The username is required."));""===this.pwdVal&&b.push(a.getString("The password is required."));b.length?this.c(b):(a=a.getString("Incorrect username or password."),this.f.ue(this.loginVal,this.pwdVal).then(this.g.bind(this),this.c.bind(this,a)))};Cx.prototype.login=Cx.prototype.ue;
Cx.prototype.ve=function(){var a=this.b.getString("Could not log out.");this.f.ve().then(this.g.bind(this),this.c.bind(this,a))};Cx.prototype.logout=Cx.prototype.ve;Cx.prototype.Le=function(){var a=this.b;if(this.loginVal){a=a.getString("An error occured while reseting the password.");var b=function(){this.resetPasswordModalShown=!0;this.g()}.bind(this);this.f.Le(this.loginVal).then(b,this.c.bind(this,a))}else this.c(a.getString("Please, input a login..."))};Cx.prototype.resetPassword=Cx.prototype.Le;
Cx.prototype.Eh=function(){this.g();this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=""};Cx.prototype.changePasswordReset=Cx.prototype.Eh;Cx.prototype.i=function(a){!1===a.detail.bf.is_password_changed&&this.forcePasswordChange&&(a=this.b.getString("You must change your password."),this.j.notify({msg:a,type:Lu}))};
Cx.prototype.c=function(a){this.error&&this.g();this.error=!0;var b=angular.element(".gmf-authentication-error");Array.isArray(a)||(a=[a]);a.forEach(function(a){this.j.notify({msg:a,target:b,type:Iu})},this)};Cx.prototype.g=function(){this.j.clear();this.error=!1};Cx.$inject=["gettextCatalog","$scope","gmfAuthenticationService","gmfUser","ngeoNotification"];Ax.controller("GmfAuthenticationController",Cx);var Dx=angular.module("gmfAuthenticationModule",[Ax.name,xx.name]);var Ex=angular.module("app",[vr.name,Bw.name,px.name,Dx.name,ym.name]);Ex.config(["$compileProvider",function(a){"debug"in Mm(window.location.search)||a.debugInfoEnabled(!1)}]);function Fx(){Ta.call(this);this.b={}}u(Fx,Ta);Fx.prototype.get=function(a){return x(a).toString()in this.b?a.getLayers().item(0):null};Fx.prototype.get=Fx.prototype.get;
Fx.prototype.set=function(a,b){var c=x(a).toString(),d=this.get(a);if(null!==d)if(null!==b)if(a=a.getLayers(),c=a.get(Lh),0<c)a.f&&Jh(a,b,0),c=a.b[0],a.b[0]=b,F(a,new Nh("remove",c)),F(a,new Nh("add",b));else{for(;0>c;++c)Mh(a,c,void 0);Mh(a,0,b)}else Oh(a.getLayers(),0),delete this.b[c];else null!==b&&(Mh(a.getLayers(),0,b),this.b[c]=!0);F(this,new kn("change",{current:b,Hg:d}));return d};Fx.prototype.set=Fx.prototype.set;
Fx.prototype.Vb=function(a,b){if(a=this.get(a)){var c=[a];a instanceof mj&&(c=a.getLayers().b);c.forEach(function(a){if(a){var c=!1,d={},g;for(g in a.get("dimensions")){var h=b[g];void 0!==h&&(d[g]=h,c=!0)}c&&(a=M(a),a instanceof yh?(a.Vb(d),a.refresh()):a instanceof Vt&&(a.updateParams(d),a.refresh()))}})}};Fx.prototype.updateDimensions=Fx.prototype.Vb;var Gx=angular.module("ngeoBackgroundLayerMgr",[]);Gx.service("ngeoBackgroundLayerMgr",Fx);S.requires.push(Gx.name);var Hx=angular.module("gmfBackgroundlayerselector",[xu.name,Gx.name]);ym.requires.push(Hx.name);Hx.value("gmfBackgroundlayerselectorTemplateUrl",function(a,b){a=b.gmfBackgroundlayerselectorTemplateurl;return void 0!==a?a:"gmf/backgroundlayerselector/component.html"});function Ix(a,b,c){return c(a,b)}Ix.$inject=["$element","$attrs","gmfBackgroundlayerselectorTemplateUrl"];
Hx.c={controller:"GmfBackgroundlayerselectorController as ctrl",bindings:{dimensions:"=gmfBackgroundlayerselectorDimensions",map:"=gmfBackgroundlayerselectorMap",select:"&?gmfBackgroundlayerselectorSelect"},templateUrl:Ix};Hx.component("gmfBackgroundlayerselector",Hx.c);function Jx(a,b,c){var d=this;this.f=c;this.c=[];this.c.push(D(c,"change",this.g,this));this.b=b;this.c.push(D(this.b,"change",function(a){d.bgLayer=a.detail.current}));a.$on("$destroy",this.j.bind(this))}
Jx.$inject=["$scope","ngeoBackgroundLayerMgr","gmfThemes"];Jx.prototype.$onInit=function(){this.g()};Jx.prototype.g=function(){var a=this;su(this.f).then(function(b){a.bgLayers=b})};Jx.prototype.Mq=function(a,b){this.bgLayer=a;this.b.set(this.map,a);!b&&this.select&&this.select()};Jx.prototype.setLayer=Jx.prototype.Mq;Jx.prototype.j=function(){this.c.forEach(A);this.c.length=0};Hx.controller("GmfBackgroundlayerselectorController",Jx);function Kx(a){dt.call(this,a);this.S=a.gmfLayer}ja(Kx,dt);aa.Object.defineProperties(Kx.prototype,{gmfLayer:{configurable:!0,enumerable:!0,get:function(){return this.S}}});function Lx(a,b){/gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/.exec(b)&&(a.type="geometry",/^gml:Point/.exec(b)?a.geomType="Point":/^gml:LineString|^gml:Curve/.exec(b)?a.geomType="LineString":/^gml:Polygon|^gml:Surface/.exec(b)?a.geomType="Polygon":/^gml:MultiPoint/.exec(b)?a.geomType="MultiPoint":/^gml:MultiLineString|^gml:MultiCurve/.exec(b)?a.geomType="MultiLineString":/^gml:MultiPolygon|^gml:MultiSurface/.exec(b)&&(a.geomType="MultiPolygon"));return!!a.type&&!!a.geomType};function Mx(){}Mx.prototype.c=function(a){var b={name:a.name,alias:"alias"in a?a.alias:null,required:"0"!=a.minOccurs};a=a.type;Lx(b,a)||(b.type="gml:TimeInstantType"===a?"datetime":"double"===a?"number":"text");return b};function Nx(a){this.o=!0===a.active;this.expression=void 0!==a.expression?a.expression:null;this.u=void 0!==a.lowerBoundary?a.lowerBoundary:null;this.v=a.operator||null;this.B=void 0!==a.upperBoundary?a.upperBoundary:null;this.C=!1!==a.isCustom;this.F=a.name;this.Y=a.operators||null;this.N=a.propertyName;this.G=a.type;this.j=[]}Nx.prototype.getExpression=function(){return this.expression};Nx.prototype.getExpression=Nx.prototype.getExpression;
Nx.prototype.setExpression=function(a){this.expression=a};Nx.prototype.setExpression=Nx.prototype.setExpression;Nx.prototype.reset=function(){null!==this.getExpression()&&this.setExpression(null);null!==this.lowerBoundary&&(this.lowerBoundary=null);null!==this.upperBoundary&&(this.upperBoundary=null)};Nx.prototype.reset=Nx.prototype.reset;Nx.prototype.destroy=function(){Ua(this.j);this.j.length=0};Nx.prototype.destroy=Nx.prototype.destroy;
aa.Object.defineProperties(Nx.prototype,{active:{configurable:!0,enumerable:!0,get:function(){return this.o},set:function(a){this.o=a}},lowerBoundary:{configurable:!0,enumerable:!0,get:function(){return this.u},set:function(a){this.u=a}},operator:{configurable:!0,enumerable:!0,get:function(){return this.v},set:function(a){this.v=a}},upperBoundary:{configurable:!0,enumerable:!0,get:function(){return this.B},set:function(a){this.B=a}},isCustom:{configurable:!0,enumerable:!0,get:function(){return this.C}},
name:{configurable:!0,enumerable:!0,get:function(){return this.F}},operators:{configurable:!0,enumerable:!0,get:function(){return this.Y}},propertyName:{configurable:!0,enumerable:!0,get:function(){return this.N}},type:{configurable:!0,enumerable:!0,get:function(){return this.G}},value:{configurable:!0,enumerable:!0,get:function(){var a=null,b=this.getExpression(),c=this.lowerBoundary,d=this.operator,e=this.propertyName,f=this.upperBoundary;d&&(d===Ox||d===Px?null!==c&&null!==f&&(a={operator:d,lowerBoundary:c,
propertyName:e,upperBoundary:f}):null!==b&&(a={expression:b,operator:d,propertyName:e}));return a}}});var Ox="..",Px="..";function Qx(a){a.type=a.type||"date";Nx.call(this,a)}ja(Qx,Nx);function Rx(a){a.type="geometry";Nx.call(this,a);this.c=new yd(a.featureProperties||{});this.f=new Uw;this.b=this.i=!1;this.g=null;this.j.push(D(this.c,Ya(this.feature.b),this.K,this));Sx(this)}ja(Rx,Nx);Rx.prototype.setExpression=function(a){this.i=!0;Nx.prototype.setExpression.call(this,a);this.b||Sx(this);Tx(this);this.i=!1};Rx.prototype.K=function(){if(!this.i){this.b=!0;var a=this.c.getGeometry();a?this.expression=this.f.cf(a):this.expression=null;Tx(this);this.b=!1}};
Rx.prototype.S=function(a){a=a.target;this.b=!0;this.expression=this.f.cf(a);this.b=!1};function Sx(a){var b=null;a.expression&&(b=a.f.Ng(a.expression));a.geometry=b}function Tx(a){null!==a.g&&(Ua(a.g),a.g=null);var b=a.c.getGeometry();b&&(a.g=D(b,"change",a.S,a))}aa.Object.defineProperties(Rx.prototype,{feature:{configurable:!0,enumerable:!0,get:function(){return this.c}},geometry:{configurable:!0,enumerable:!0,get:function(){return this.c.getGeometry()||null},set:function(a){this.c.setGeometry(a)}}});function Ux(a){a.operator="=";a.type="select";Nx.call(this,a);this.c=a.choices}ja(Ux,Nx);aa.Object.defineProperties(Ux.prototype,{choices:{configurable:!0,enumerable:!0,get:function(){return this.c}},selectedChoices:{configurable:!0,enumerable:!0,get:function(){var a;this.expression?a=String(this.expression).split(","):a=[];return a}}});function Vx(a){a.operator=a.operator||"~";a.type="text";Nx.call(this,a)}ja(Vx,Nx);function Wx(a,b,c){this.ba=a;this.c=b;this.b=c}Wx.prototype.Gl=function(a,b){var c=[];a=t(a);for(var d=a.next();!d.done;d=a.next())c.push(this.fe(d.value,b));return c};Wx.prototype.createRulesFromAttributes=Wx.prototype.Gl;
Wx.prototype.fe=function(a,b){b=!0===b;var c=this.ba.getString(a.name);switch(a.type){case "date":case "datetime":a=b?new Qx({name:c,operator:"=",operators:["=",">=","<="],propertyName:a.name,type:a.type}):new Qx({name:c,operator:Px,propertyName:a.name,type:a.type});break;case "geometry":a=new Rx({name:c,operator:"within",operators:["contains","intersects","within"],propertyName:a.name,type:a.type});break;case "number":a=b?new Nx({name:c,operator:"=",operators:"= > >= < <= !=".split(" "),propertyName:a.name,
type:"number"}):new Nx({name:c,operator:Ox,propertyName:a.name,type:"number"});break;case "select":a=new Ux({choices:a.choices,name:c,propertyName:a.name});break;default:a=b?new Vx({name:c,operator:"~",operators:["~","=","!="],propertyName:a.name}):new Vx({name:c,operator:"~",propertyName:a.name})}return a};Wx.prototype.createRuleFromAttribute=Wx.prototype.fe;Wx.prototype.vf=function(a){var b=[];a=t(a);for(var c=a.next();!c.done;c=a.next())b.push(this.Ph(c.value));return b};
Wx.prototype.createRules=Wx.prototype.vf;Wx.prototype.Ph=function(a){switch(a.type){case "date":case "datetime":a=new Qx(a);break;case "geometry":a=new Rx(a);break;case "select":a=new Ux(a);break;default:a=new Vx(a)}return a};Wx.prototype.createRule=Wx.prototype.Ph;
Wx.prototype.Hh=function(a){var b=a.getExpression();null===b&&(b=void 0);b={expression:b,isCustom:a.isCustom,lowerBoundary:null!==a.lowerBoundary?a.lowerBoundary:void 0,name:a.name,operator:null!==a.operator?a.operator:void 0,operators:a.operators?a.operators.slice(0):void 0,propertyName:a.propertyName,type:null!==a.type?a.type:void 0,upperBoundary:null!==a.upperBoundary?a.upperBoundary:void 0};if(a instanceof Qx)var c=new Qx(b);else a instanceof Rx?(c=new Rx(b),Wa(c.feature,this.c.nd(a.feature))):
a instanceof Ux?(b.choices=a.choices.slice(0),c=new Ux(b)):a instanceof Vx?c=new Vx(b):c=new Nx(b);return c};Wx.prototype.cloneRule=Wx.prototype.Hh;
Wx.prototype.Nf=function(a,b){b.getExpression()!==a.getExpression()&&b.setExpression(a.getExpression());b.lowerBoundary!==a.lowerBoundary&&(b.lowerBoundary=a.lowerBoundary);b.operator!==a.operator&&(b.operator=a.operator);b.upperBoundary!==a.upperBoundary&&(b.upperBoundary=a.upperBoundary);a instanceof Rx&&b instanceof Rx&&(this.c.nf(b.feature),Wa(b.feature,this.c.nd(a.feature)))};Wx.prototype.extendRule=Wx.prototype.Nf;Wx.prototype.Vg=function(a){var b=this;return a.map(function(a){return b.fk(a)})};
Wx.prototype.serializeRules=Wx.prototype.Vg;Wx.prototype.fk=function(a){var b={name:a.name,propertyName:a.propertyName,type:a.type};null!==a.expression&&(b.expression=a.expression);null!==a.lowerBoundary&&(b.lowerBoundary=a.lowerBoundary);null!==a.operator&&(b.operator=a.operator);null!==a.operators&&(b.operators=a.operators.slice(0));null!==a.upperBoundary&&(b.upperBoundary=a.upperBoundary);a instanceof Rx&&(b.featureProperties=this.c.nd(a.feature));a instanceof Ux&&(b.choices=a.choices);return b};
Wx.prototype.serializeRule=Wx.prototype.fk;
Wx.prototype.fd=function(a){var b=a.dataSource,c=null;if(a.filter)c=a.filter;else{var d=a.filterRules||b.filterRules,e=[];if(d&&d.length){d=t(d);for(var f=d.next();!f.done;f=d.next()){var g=void 0,h=void 0,k=f.value,l=a.srsName,n=null,p=k.value;if(p){var q=p.expression,r=p.lowerBoundary,v=p.operator;f=p.propertyName;p=p.upperBoundary;var w=["contains","intersects","within"],C=[">",">=","<","<="];if(k instanceof Qx)v===Px?(h=moment(r).format("YYYY-MM-DD"),g=moment(p).format("YYYY-MM-DD")):"="===v?
(h=moment(q).format("YYYY-MM-DD HH:mm:ss"),g=moment(q).add(1,"days").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")):">="===v?(h=moment(q).format("YYYY-MM-DD"),g=moment(q).add(30,"years").format("YYYY-MM-DD")):"<="===v&&(h="1970-01-01",g=moment(q).format("YYYY-MM-DD")),h&&g&&(n=new zs(f,h,g));else if(k instanceof Ux)if(l=k.selectedChoices,1===l.length)n=new Bs(f,l[0],void 0);else{if(2<=l.length){n=[];l=t(l);for(v=l.next();!v.done;v=l.next())n.push(new Bs(f,v.value,void 0));n=Os.apply(null,n)}}else Pd(w,
v)?(f=b.geometryName,g=k.geometry,"contains"===v?n=new xs(f,g,l):"intersects"===v?n=new Es(f,g,l):"within"===v&&(n=new Ms(f,g,l))):Pd(C,v)?">"===v?n=new Cs(f,q):">="===v?n=new Ds(f,q):"<"===v?n=new Hs(f,q):"<="===v&&(n=new Is(f,q)):v===Ox?n=new Fs(f,r,p):"="===v?n=new Bs(f,q,void 0):"~"===v?(n=String(q).replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*"),n=new Gs(f,"*"+n+"*","*",".","!",!1)):"!="===v&&(n=new Ks(f,q,void 0));f=n}else f=null;f&&e.push(f)}}d=b.filterCondition;if(1===e.length)c=
e[0];else if(2<=e.length)if("&&"===d)c=Ns.apply(null,e);else if("||"===d||"!"===d)c=Os.apply(null,e);c&&"!"===d&&(c=new Js(c))}if(a.incTime){a=null;e=b.timeRangeValue;d=b.timeProperty;b=b.timeAttributeName;if(e&&d&&b)if(void 0!==e.end){var G=this.b.Jc(d,e).split("/");a=new zs(b,G[0],G[1])}else{f=d.resolution||"seconds";e=this.b.Jc(d,e);switch(f){case "year":G=moment(e).add(1,"years").subtract(1,"seconds");break;case "month":G=moment(e).add(1,"months").subtract(1,"seconds");break;case "day":G=moment(e).add(1,
"days").subtract(1,"seconds")}G&&(a=moment(e).format("YYYY-MM-DD HH:mm:ss"),G=G.format("YYYY-MM-DD HH:mm:ss"),a=new zs(b,a,G))}(G=a)&&(c?c=Ns.apply(null,[c,G]):c=G)}return c};Wx.prototype.createFilter=Wx.prototype.fd;Wx.prototype.uf=function(a){var b=null;if(a=this.fd(a))b=Yl("http://www.opengis.net/ogc","Filter"),nm({node:b},Ws,im(a.Hb),[a],[]),b=(new XMLSerializer).serializeToString(b);return b};Wx.prototype.createFilterString=Wx.prototype.uf;Wx.$inject=["gettextCatalog","ngeoFeatureHelper","ngeoWMSTime"];
var Xx=angular.module("ngeoRuleHelper",[mr.name,ur.name]);Xx.service("ngeoRuleHelper",Wx);S.requires.push(Xx.name);function Yx(){}u(Yx,ot);Yx.prototype.g=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};Yx.prototype.c=function(a){var b={};return b=R(b,Zx,a,[])};function $x(a,b){for(var c={},d=0,e=a.attributes.length;d<e;d++){var f=a.attributes.item(d);c[f.name]=f.value}1===b.length&&(c.type=c.type.split(":").pop());return c}
var ay=[null,"http://www.w3.org/2001/XMLSchema"],Zx=Q(ay,{element:gm($x),complexType:gm(function(a,b){var c=a.getAttribute("name");a=R({name:c},by,a,b);a.complexContent=a.complexContent.extension.sequence.element;return a})}),by=Q(ay,{complexContent:O(function(a,b){return R({},cy,a,b)})}),cy=Q(ay,{extension:O(function(a,b){return R({},dy,a,b)})}),dy=Q(ay,{sequence:O(function(a,b){return R({},ey,a,b)})}),ey=Q(ay,{element:gm($x)});function fy(){this.version=void 0}u(fy,ot);fy.prototype.g=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};fy.prototype.c=function(a){this.version=a.getAttribute("version").trim();return(a=R({version:this.version},gy,a,[]))?a:null};function hy(a,b){return R({},iy,a,b)}function jy(a,b){return R({},ky,a,b)}function ly(a,b){if(b=hy(a,b))return a=[ro(a.getAttribute("width")),ro(a.getAttribute("height"))],b.size=a,b}
function my(a,b){return R([],ny,a,b)}
var oy=[null,"http://www.opengis.net/wms"],gy=Q(oy,{Service:O(function(a,b){return R({},py,a,b)}),Capability:O(function(a,b){return R({},qy,a,b)})}),qy=Q(oy,{Request:O(function(a,b){return R({},ry,a,b)}),Exception:O(function(a,b){return R([],Ey,a,b)}),Layer:O(function(a,b){return R({},Fy,a,b)})}),py=Q(oy,{Name:O(T),Title:O(T),Abstract:O(T),KeywordList:O(my),OnlineResource:O(nt),ContactInformation:O(function(a,b){return R({},Gy,a,b)}),Fees:O(T),AccessConstraints:O(T),LayerLimit:O(qo),MaxWidth:O(qo),
MaxHeight:O(qo)}),Gy=Q(oy,{ContactPersonPrimary:O(function(a,b){return R({},Hy,a,b)}),ContactPosition:O(T),ContactAddress:O(function(a,b){return R({},Iy,a,b)}),ContactVoiceTelephone:O(T),ContactFacsimileTelephone:O(T),ContactElectronicMailAddress:O(T)}),Hy=Q(oy,{ContactPerson:O(T),ContactOrganization:O(T)}),Iy=Q(oy,{AddressType:O(T),Address:O(T),City:O(T),StateOrProvince:O(T),PostCode:O(T),Country:O(T)}),Ey=Q(oy,{Format:em(T)}),Fy=Q(oy,{Name:O(T),Title:O(T),Abstract:O(T),KeywordList:O(my),CRS:gm(T),
EX_GeographicBoundingBox:O(function(a,b){var c=R({},Jy,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var d=c.eastBoundLongitude;c=c.northBoundLatitude;if(void 0!==a&&void 0!==b&&void 0!==d&&void 0!==c)return[a,b,d,c]}}),BoundingBox:gm(function(a){var b=[po(a.getAttribute("minx")),po(a.getAttribute("miny")),po(a.getAttribute("maxx")),po(a.getAttribute("maxy"))],c=[po(a.getAttribute("resx")),po(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:gm(function(a){return{name:a.getAttribute("name"),
units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:mo(a.getAttribute("multipleValues")),nearestValue:mo(a.getAttribute("nearestValue")),current:mo(a.getAttribute("current")),values:T(a)}}),Attribution:O(function(a,b){return R({},Ky,a,b)}),AuthorityURL:gm(function(a,b){if(b=hy(a,b))return b.name=a.getAttribute("name"),b}),Identifier:gm(T),MetadataURL:gm(function(a,b){if(b=hy(a,b))return b.type=a.getAttribute("type"),b}),DataURL:gm(hy),
FeatureListURL:gm(hy),Style:gm(function(a,b){return R({},Ly,a,b)}),MinScaleDenominator:O(oo),MaxScaleDenominator:O(oo),Layer:gm(function(a,b){var c=b[b.length-1],d=R({},Fy,a,b);if(d)return b=mo(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),d.queryable=void 0!==b?b:!1,b=ro(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),d.cascaded=b,b=mo(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),d.opaque=void 0!==b?b:!1,b=mo(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),d.noSubsets=
void 0!==b?b:!1,(b=po(a.getAttribute("fixedWidth")))||(b=c.fixedWidth),d.fixedWidth=b,(a=po(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),d.fixedHeight=a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(d[a]=(d[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in d||(d[a]=c[a])}),d})}),Ky=Q(oy,{Title:O(T),OnlineResource:O(nt),LogoURL:O(ly)}),Jy=Q(oy,{westBoundLongitude:O(oo),
eastBoundLongitude:O(oo),southBoundLatitude:O(oo),northBoundLatitude:O(oo)}),ry=Q(oy,{GetCapabilities:O(jy),GetMap:O(jy),GetFeatureInfo:O(jy)}),ky=Q(oy,{Format:gm(T),DCPType:gm(function(a,b){return R({},My,a,b)})}),My=Q(oy,{HTTP:O(function(a,b){return R({},Ny,a,b)})}),Ny=Q(oy,{Get:O(hy),Post:O(hy)}),Ly=Q(oy,{Name:O(T),Title:O(T),Abstract:O(T),LegendURL:gm(ly),StyleSheetURL:O(hy),StyleURL:O(hy)}),iy=Q(oy,{Format:O(T),OnlineResource:O(nt)}),ny=Q(oy,{Keyword:em(T)});function Oy(a,b,c,d){this.c=a;this.b=b;this.i=c;this.v=d;this.o=[];this.g={};this.f={}}
Oy.prototype.Qb=function(a){for(var b=[],c=a.map,d=t(this.o),e=d.next();!e.done;e=d.next())e.value.resolve();this.o.length=0;c=a.queryableDataSources?a.queryableDataSources:this.ig(a.dataSources,c);d=[];e=[];for(var f=t(c.wfs),g=f.next();!g.done;g=f.next())if(g=g.value,g.combinableForWFS){for(var h=!1,k=t(d),l=k.next();!l.done;l=k.next())l=l.value,g.combinableWithDataSourceForWFS(l[0])&&(l.push(g),h=!0);h||d.push([g])}else e.push([g]);d=d.concat(e);b.push(Py(this,d,a));if(a.coordinate){d=[];e=[];
c=t(c.wms);for(f=c.next();!f.done;f=c.next())if(f=f.value,f.combinableForWMS){g=!1;h=t(d);for(k=h.next();!k.done;k=h.next())k=k.value,f.combinableWithDataSourceForWMS(k[0])&&(k.push(f),g=!0);g||d.push([f])}else e.push([f]);c=d.concat(e);b.push(Qy(this,c,a))}return this.b.all(b).then(this.j.bind(this))};Oy.prototype.issue=Oy.prototype.Qb;
Oy.prototype.ig=function(a,b){var c={wfs:[],wms:[]};b=N(b).V();a=t(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=d.visible&&d.inRange&&d.queryable;e&&d instanceof dt&&(e=d.Ti(b,!0));e&&d instanceof dt&&(d.supportsWFS?c.wfs.push(d):c.wms.push(d))}return c};Oy.prototype.getQueryableDataSources=Oy.prototype.ig;Oy.prototype.Ek=function(a){var b=a.gc();a=xh(a.wfsUrl,{REQUEST:"DescribeFeatureType",SERVICE:"WFS",VERSION:"2.0.0",TYPENAME:b});return this.c.get(a).then(function(a){return(new Yx).b(a.data)})};
Oy.prototype.wfsDescribeFeatureType=Oy.prototype.Ek;Oy.prototype.fh=function(a,b){var c=null;a=t(a);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d.Name===b){c=d;break}else if(d.Layer&&(c=this.fh(d.Layer,b)))break;return c};Oy.prototype.wmsFindLayerCapability=Oy.prototype.fh;
Oy.prototype.Gk=function(a,b){b=!1!==b;var c=xh(a,{REQUEST:"GetCapabilities",SERVICE:"WMS",VERSION:"1.3.0"}),d;b&&this.g[a]?b&&this.g[a]&&(d=this.g[a]):d=this.c.get(c).then(function(a){return(new fy).b(a.data)});b&&!this.g[a]&&(this.g[a]=d);return d};Oy.prototype.wmsGetCapabilities=Oy.prototype.Gk;Oy.prototype.Hk=function(a,b){var c=null;a=t(a);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d.Identifier===b){c=d;break}return c};Oy.prototype.wmtsFindLayerCapability=Oy.prototype.Hk;
Oy.prototype.Ik=function(a,b){b=!1!==b;var c;b&&this.f[a]?b&&this.f[a]&&(c=this.f[a]):c=this.c.get(a).then(function(a){return(new Ft).b(a.data)});b&&!this.f[a]&&(this.f[a]=c);return c};Oy.prototype.wmtsGetCapabilities=Oy.prototype.Ik;Oy.prototype.j=function(a){var b={};a=t(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;for(var d in c){var e=Number(d);b[e]=c[e]}}return b};
Oy.prototype.u=function(a,b,c,d){var e={};a=t(a);for(var f=a.next();!f.done;f=a.next()){f=f.value;var g=void 0,h=void 0,k=void 0;"number"===typeof d?(g=[],h=!0,k=d):f instanceof dt?g=Ry(f,d.data,c):g=[];var l=f.id;Sy(g,f.id);e[l]={features:g,limit:b,tooManyFeatures:h,totalFeatureCount:k}}return e};
function Ry(a,b,c){var d=[],e,f=Ty(a,c).slice();f.forEach(function(f){Ty(a,c,[f]);e=c?a.wfsFormat.gb(b):a.wmsFormat.gb(b);0<e.length&&e.forEach(function(a){a.set("ngeo_feature_type_",f);d.push(a)})});Ty(a,c,f);return d}function Ty(a,b,c){b?(c&&(a.wfsFormat.b=c),a=a.wfsFormat.b):(c&&(a.wmsFormat.b=c),a=a.wmsFormat.getLayers());return a?Array.isArray(a)?a:[a]:[]}
function Py(a,b,c){var d=[],e=c.limit,f=N(c.map),g=f.V();f=f.b.c;var h=!0===c.wfsCount,k;if(k=c.coordinate){var l=c.tolerancePx*g;k=cb(kb(k),l)}else k=c.extent;var n=new Ps,p=new XMLSerializer;l={};b=t(b);for(var q=b.next();!q.done;l={dataSources:l.dataSources,Ob:l.Ob,url:l.url,params:l.params,ld:l.ld},q=b.next()){l.dataSources=q.value;var r=l.Ob=void 0;q=[];l.url=void 0;l.params={};for(var v=t(l.dataSources),w=v.next();!w.done;w=v.next()){w=w.value;l.Ob||(r=w.wfsFeatureNS,l.Ob={bbox:k,featureNS:r,
featurePrefix:w.wfsFeaturePrefix,geometryName:w.geometryName,Dg:w.wfsOutputFormat,srsName:f},l.url=w.wfsUrl,z(l.params,w.activeDimensions));q=q.concat(w.je(g,!0));r=void 0;if(c.filter)r=a.i.fd({dataSource:w,filter:c.filter,incTime:!0});else if(w.filterRules&&w.filterRules.length||w.timeRangeValue)r=a.i.fd({dataSource:w,incTime:!0,srsName:f});r&&(l.Ob.filter=r)}l.Ob.jd=q;l.ld=a.b.defer();d.push(l.ld.promise.then(a.u.bind(a,l.dataSources,e,!0)));q=void 0;h?(q=z({resultType:"hits"},l.Ob),q=bt(n,q),q=
p.serializeToString(q),v=Uy(a),q=a.c.post(l.url,q,{params:l.params,headers:{"Content-Type":"text/xml; charset=UTF-8"},timeout:v.promise}).then(function(a){return function(b){var c=a.dataSources[0].wfsFormat;b=b.data;am(b)?c=Rs(c,b):bm(b)?c=Ss(c,b):"string"===typeof b?(b=cm(b),c=Rs(c,b)):c=void 0;return c.numberOfFeatures}}(l).bind(a))):q=a.b.resolve();q.then(function(b){return function(c){if(void 0===c||c<e){c=z({maxFeatures:e},b.Ob);c=bt(n,c);c=p.serializeToString(c);var d=Uy(a);a.c.post(b.url,c,
{params:b.params,headers:{"Content-Type":"text/xml; charset=UTF-8"},timeout:d.promise}).then(function(a){b.ld.resolve(a)})}else b.ld.resolve(c)}}(l))}return a.b.all(d).then(a.j.bind(a))}
function Qy(a,b,c){var d=[],e=c.limit,f=N(c.map),g=f.V();f=f.b.c;c=c.coordinate;b=t(b);for(var h=b.next();!h.done;h=b.next()){h=h.value;for(var k=void 0,l=[],n=void 0,p=!1,q={},r=null,v=null,w=t(h),C=w.next();!C.done;C=w.next())C=C.value,n||(n=C.wmsInfoFormat,k=C.wmsUrl),l=l.concat(C.je(g,!0)),p||(z(q,C.activeDimensions),p=!0),C.filterRules&&C.filterRules.length&&(v=C.Zf(),r=a.i.uf({dataSource:C,srsName:f})),null!==C.timeRangeValue&&C.timeProperty&&(q.TIME=a.v.Jc(C.timeProperty,C.timeRangeValue));
q.LAYERS=l;q.QUERY_LAYERS=l;if(r&&v){if(1===l.length)l=r;else{p=[];w=0;for(C=l.length;w<C;w++)l[w]===v?p.push("("+r+")"):p.push("()");l=p.join("")}q.FILTER=l}k=new Vt({params:q,url:k});q=c;l=g;w={FEATURE_COUNT:e,INFO_FORMAT:n};void 0!==k.i?(n=fc(f),(r=k.j)&&r!==n&&(l=Yf(r,n,q,l),q=pc(q,n,r)),v=ub(q,l,0,Xt),p={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:k.f.LAYERS},z(p,k.f,w),w=Math.floor((v[3]-q[1])/l),p[k.o?"I":"X"]=Math.floor((q[0]-v[0])/
l),p[k.o?"J":"Y"]=w,n=Yt(k,v,Xt,1,r||n,p)):n=void 0;k=Uy(a);d.push(a.c.get(n,{timeout:k.promise}).then(a.u.bind(a,h,e,!1)))}return a.b.all(d).then(a.j.bind(a))}function Sy(a,b){a.forEach(function(a){void 0!==a.f&&Bd(a,b+"_"+a.f)})}function Uy(a){var b=a.b.defer();a.o.push(b);return b}Oy.$inject=["$http","$q","ngeoRuleHelper","ngeoWMSTime"];var Vy=angular.module("ngeoQuerent",[Xx.name,ur.name]);Vy.service("ngeoQuerent",Oy);S.requires.push(Vy.name);function Wy(a,b,c){this.f=a;this.b=b.collection;this.g=c;this.c={};D(this.b,"add",this.j,this);D(this.b,"remove",this.i,this)}Wy.prototype.ub=function(a){return this.c[a]||null};Wy.prototype.getDataSource=Wy.prototype.ub;Wy.prototype.Wf=function(a){var b=this.f.defer();a.attributes?b.resolve(a.attributes):this.g.Ek(a).then(function(c){a.gc();c=c.complexType[0].complexContent.map((new Mx).c);a.Ne(c);b.resolve(c)});return b.promise};Wy.prototype.getDataSourceAttributes=Wy.prototype.Wf;
Wy.prototype.j=function(a){a=a.element;this.c[a.id]=a};Wy.prototype.i=function(a){delete this.c[a.element.id]};aa.Object.defineProperties(Wy.prototype,{collection:{configurable:!0,enumerable:!0,get:function(){return this.b}}});Wy.$inject=["$q","ngeoDataSources","ngeoQuerent"];var Xy=angular.module("ngeoDataSourcesHelper",[Br.name,Vy.name]);Xy.service("ngeoDataSourcesHelper",Wy);S.requires.push(Xy.name);function Yy(a){this.c=a}Yy.prototype.describe=function(a){"qgisserver"!==a.ogcServerType||a.attributes||this.c.Wf(a)};Yy.prototype.describe=Yy.prototype.describe;Yy.$inject=["ngeoDataSourcesHelper"];var Zy=angular.module("gmfDatasourceWFSAliases",[]);Zy.service("gmfWFSAliases",Yy);ym.requires.push(Zy.name);function $y(a,b,c,d,e,f,g,h,k,l,n){this.S=a;this.f=b;this.F=c;this.i=d;this.aa=e;this.B=f;this.G=g;this.b=g.collection;this.C=h;this.K=k;this.o=l;this.u=n;this.g={};this.c={};this.j=null;D(this.B,"change",this.sn,this);D(this.i,"change",this.Hm,this)}$y.prototype.hk=function(a){this.G.map=a};$y.prototype.setDatasourceMap=$y.prototype.hk;m=$y.prototype;m.Oe=function(a){this.v=a};
m.Hm=function(){var a=this;az(this);this.j&&this.j();bz(this);this.i.Nc().then(function(b){var c=a.i.lb().then(function(c){c=t(c);for(var d=c.next();!d.done;d=c.next()){d=t(d.value.children);for(var e=d.next();!e.done;e=d.next())e=e.value,cz(a,e,e,b)}}),d=tu(a.i).then(function(c){c=t(c);for(var d=c.next();!d.done;d=c.next())cz(a,null,d.value,b)});a.S.all([c,d]).then(function(){a.j=a.f.$watchCollection(function(){if(a.aa.rootCtrl)return a.aa.rootCtrl.children},a.Mn.bind(a))})})};
m.Mn=function(a){var b=this;this.F(function(){if(a){for(var c=[],d=function(a,b){b.node.children||a.push(b)},e=0,f=a.length;e<f;e++)a[e].La(d.bind(b,c));d=0;for(f=c.length;d<f;d++)e=c[d],b.c[x(e.node)]||dz(b,e);f=b.c;for(var g in b.c)d=f[g],c.includes(d.treeCtrl)||ez(b,d)}})};function az(a){for(var b=a.b.b,c=b.length-1;0<=c;c--)a.g[b[c].id]&&a.b.remove(b[c]);Ba(a.g)}
function cz(a,b,c,d){var e=c.children;if(e){c=t(e);for(var f=c.next();!f.done;f=c.next())cz(a,b,f.value,d)}else if(e=x(c),!a.g[e]){var g=c.metadata,h=c.type,k,l;if("WMTS"===h){var n=c.layer;var p=c.url;var q=g.maxResolution;var r=g.minResolution;(l=g.queryLayers||g.wmsLayers)&&(f=l.split(",").map(function(a){return{maxResolution:q,minResolution:r,name:a,queryable:!0}}));g.ogcServer&&d[g.ogcServer]&&(k=d[g.ogcServer]);l=c.imageType}else if("WMS"===h)if(q=c.maxResolutionHint,r=c.minResolutionHint,f=
c.childLayers.map(function(a){return{maxResolution:a.maxResolutionHint,minResolution:a.minResolutionHint,name:a.name,queryable:a.queryable}}),k=d[!b||b.mixed?c.ogcServer:b.ogcServer],l=k.imageType,c.time)var v=c.time;else b&&b.time&&(v=b.time);d=k?k.type:void 0;var w=k?k.isSingleTile:void 0,C=k&&k.wfsSupport?k.urlWfs:void 0;k=k?k.url:void 0;var G=jt;"qgisserver"===d&&(G=lt);var I=!!g.snappingConfig,J=g.snappingConfig?g.snappingConfig.tolerance:void 0,E=g.snappingConfig?g.snappingConfig.edge:void 0,
W=g.snappingConfig?g.snappingConfig.vertex:void 0,y=a.v;b=c.dimensions||b.dimensions;if(v){var B=a.o.Oc(v).values;if(Array.isArray(B)){var K=B[0];var U=B[1]}else K=B}a.g[e]=new Kx({copyable:g.copyable,dimensions:y,dimensionsConfig:b,gmfLayer:c,id:e,identifierAttribute:g.identifierAttributeField,maxResolution:q,minResolution:r,name:c.name,ogcImageType:l,ogcLayers:f,ogcServerType:d,ogcType:h,snappable:I,snappingTolerance:J,snappingToEdges:E,snappingToVertice:W,timeAttributeName:g.timeAttribute,timeLowerValue:K,
timeProperty:v,timeUpperValue:U,visible:!0===g.isChecked,wfsOutputFormat:G,wfsUrl:C,wmsIsSingleTile:w,wmsUrl:k,wmtsLayer:n,wmtsUrl:p})}}
function dz(a,b){var c=x(b.node),d=a.g[c];b.Wg(d);var e=a.f.$watch(function(){return b.getState()},a.Im.bind(a,b)),f=a.f.$watch(function(){var a=d.visible;return null!==d.filterRules&&a},a.Fi.bind(a,d)),g;if(d.timeProperty&&d.ogcType===gt){var h=a.f.$watch(function(){return d.timeLowerValue},a.Gi.bind(a,d));"range"===d.timeProperty.mode&&(g=a.f.$watch(function(){return d.timeUpperValue},a.Gi.bind(a,d)));var k=hw(b)}a.c[c]={filterRulesWatcherUnregister:f,stateWatcherUnregister:e,timeLowerValueWatcherUnregister:h,
timeUpperValueWatcherUnregister:g,treeCtrl:b,wmsLayer:k};a.b.push(d);a.u.describe(d)}function ez(a,b){a.b.remove(b.treeCtrl.ub());b.treeCtrl.Wg(null);b.filterRulesWatcherUnregister();b.stateWatcherUnregister();b.timeLowerValueWatcherUnregister&&b.timeLowerValueWatcherUnregister();b.timeUpperValueWatcherUnregister&&b.timeUpperValueWatcherUnregister();delete a.c[x(b.treeCtrl.node)]}function bz(a){for(var b in a.c)ez(a,a.c[b])}
m.Im=function(a,b){var c=a.ub();c.visible="on"===b;a=hw(a).get("querySourceIds");if(Array.isArray(a)){b=t(this.b.b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,d instanceof Kx&&null!==d.filterRules&&d.id!==c.id&&a.includes(d.id)&&d.visible){this.Fi(d,!0);break}}};
m.Fi=function(a){if(!0===a.filtrable&&a.ogcType===gt){var b=x(a.gmfLayer),c=this.c[b].treeCtrl;b=M(hw(c));var d=a.Zf();c=N(c.map).b.c;a=a.visible?this.K.uf({dataSource:a,Bs:c}):null;c=null;if(a)if(c=b.f.LAYERS.split(","),1===c.length)c=a;else{for(var e=[],f=0,g=c.length;f<g;f++)c[f]===d?e.push("("+a+")"):e.push("()");c=e.join("")}d={};b.updateParams((d.FILTER=c,d))}};
m.Gi=function(a){var b=x(a.gmfLayer);b=this.c[b].wmsLayer;var c=M(b),d=a.timeProperty,e;(a=a.timeRangeValue)&&(e=this.o.Jc(d,a));c.f.TIME!==e&&this.C.dh(b,c.f.LAYERS,e)};m.sn=function(a){var b=a.detail.Hg,c=a.detail.current;a=this.g;if(b&&(b=b.get("querySourceIds"),Array.isArray(b))){b=t(b);for(var d=b.next();!d.done;d=b.next())if(d=a[d.value])d.visible=!1,this.b.remove(d)}if(c&&(c=c.get("querySourceIds"),Array.isArray(c)))for(c=t(c),d=c.next();!d.done;d=c.next())if(b=a[d.value])b.visible=!0,this.b.push(b)};
$y.$inject="$q $rootScope $timeout gmfThemes gmfTreeManager ngeoBackgroundLayerMgr ngeoDataSources ngeoLayerHelper ngeoRuleHelper ngeoWMSTime gmfWFSAliases".split(" ");var fz=angular.module("gmfDataSourcesManager",[Zy.name,lw.name,gv.name,xu.name,Xx.name,Br.name,Gx.name,bu.name,ur.name]);fz.service("gmfDataSourcesManager",$y);ym.requires.push(fz.name);function gz(a,b,c){this.i=a;this.ba=b;this.j=c;a=angular.element('<div class="ngeo-disclaimer"></div>');angular.element(document.body).append(a);this.f=a;this.c={}}u(gz,Gu);gz.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];gz.prototype.alert=function(a){this.show(a)};gz.prototype.alert=gz.prototype.alert;gz.prototype.close=function(a){Hu(this,a).forEach(this.b,this)};gz.prototype.close=gz.prototype.close;
gz.prototype.g=function(a){var b=this,c=this.ba,d=a.type,e=a.msg+"-"+a.type;if(void 0===this.c[e])if(!0===a.popup){var f=this.j();c=this.i.trustAsHtml(a.msg);f.open({autoDestroy:!0,content:c,title:"&nbsp;"});f.scope.$watch("open",function(c){c||b.b(a)});this.c[e]=f}else{var g=["alert","fade","alert-dismissible"];switch(d){case Iu:g.push("alert-danger");break;case Ju:g.push("alert-info");break;case Ku:g.push("alert-success");break;case Lu:g.push("alert-warning")}d=angular.element('<div role="alert" class="'+
g.join(" ")+'"></div>');c=angular.element('<button type="button" class="close" data-dismiss="alert" aria-label="'+c.getString("Close")+'"><span aria-hidden="true" class="fa fa-times"></span></button>');g=angular.element("<span />").html(a.msg);d.append(c).append(g);a.target?f=angular.element(a.target):f=this.f;f.append(d);d.addClass("in");d.on("closed.bs.alert",function(){b.b(a)});this.c[e]=d}};
gz.prototype.b=function(a){a=a.msg+"-"+a.type;var b=this.c[a];void 0!==b&&(b instanceof ow?b.mi()&&b.Qe(!1):b.hasClass("in")&&b.alert("close"),delete this.c[a])};var hz=angular.module("ngeoDisclaimer",[qw.name]);hz.service("ngeoDisclaimer",gz);S.requires.push(hz.name);var iz=angular.module("gmfDisclaimer",["ngSanitize"]);ym.requires.push(iz.name);function jz(a,b,c,d,e,f,g,h){this.visibility=!1;this.msgs_=[];this.i=c;this.o=d;this.f=a;this.g=f;this.c=g;this.j=h;this.b=null}jz.$inject="$element $scope $sce $timeout ngeoCreatePopup ngeoDisclaimer ngeoEventHelper ngeoLayerHelper".split(" ");m=jz.prototype;m.$onInit=function(){this.b=this.j.md(this.map,"data");kz(this,this.b)};m.Jm=function(a){var b=this;this.o(function(){kz(b,a.element)})};m.Km=function(a){this.bh(a.element)};
function kz(a,b){var c=x(b);b instanceof mj?(a.c.Jb(c,D(b.getLayers(),"add",a.Jm,a)),a.c.Jb(c,D(b.getLayers(),"remove",a.Km,a)),b.getLayers().forEach(function(a){kz(this,a)},a)):(b=b.get("disclaimers"))&&Array.isArray(b)&&b.forEach(function(a){this.external?(0>this.msgs_.indexOf(a)&&this.msgs_.push(a),this.msg=""+this.i.trustAsHtml(this.msgs_.join("<br />")),this.visibility=!0):this.g.alert({popup:this.popup,msg:a,target:this.f,type:Lu})},a)}
m.bh=function(a){var b=x(a);a instanceof mj?(this.c.Ec(b),a.getLayers().forEach(this.bh,this)):(a=a.get("disclaimers"))&&Array.isArray(a)&&a.forEach(function(a){this.external?(this.visibility=!1,this.msgs_.length=0,this.msg=""):this.g.close({popup:this.popup,msg:a,target:this.f,type:Lu})},this)};m.$onDestroy=function(){this.bh(this.b)};
iz.c={controller:jz,bindings:{popup:"<?gmfDisclaimerPopup",map:"=gmfDisclaimerMap",external:"<?gmfDisclaimerExternal",visibility:"=?gmfDisclaimerExternalVisibility",msg:"=?gmfDisclaimerExternalMsg"}};iz.component("gmfDisclaimer",iz.c);var lz=angular.module("ngeoMiscSwipe",[]);
lz.factory("$verticalSwipe",[function(){function a(a){a=a.originalEvent||a;var b=a.touches&&a.touches.length?a.touches:[a];a=a.changedTouches&&a.changedTouches[0]||b[0];return{x:a.clientX,y:a.clientY}}function b(a,b){var d=[];angular.forEach(a,function(a){(a=c[a][b])&&d.push(a)});return d.join(" ")}var c={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",
cancel:"pointercancel"}};return{bind:function(c,e,f){var d,h,k,l,n=!1;f=f||["mouse","touch","pointer"];c.on(b(f,"start"),function(b){k=a(b);n=!0;h=d=0;l=k;e.start&&e.start(k,b)});var p=b(f,"cancel");if(p)c.on(p,function(a){n=!1;e.cancel&&e.cancel(a)});c.on(b(f,"move"),function(b){if(n&&k){var c=a(b);d+=Math.abs(c.x-l.x);h+=Math.abs(c.y-l.y);l=c;10>d&&10>h||(d>h?(n=!1,e.cancel&&e.cancel(b)):(b.preventDefault(),e.move&&e.move(c,b)))}});c.on(b(f,"end"),function(b){n&&(n=!1,e.end&&e.end(a(b),b))})}}}]);
lz.B=function(a,b,c){lz.directive(a,["$parse","$verticalSwipe",function(d,e){return function(f,g,h){function k(a){if(!n)return!1;var c=(a.y-n.y)*b;a=Math.abs(a.x-n.x);return p&&75>a&&0<c&&30<c&&.3>a/c}var l=d(h[a]),n,p,q=["touch"];angular.isDefined(h.ngeoSwipeDisableMouse)||q.push("mouse");e.bind(g,{start:function(a){n=a;p=!0},cancel:function(){p=!1},end:function(a,b){k(a)&&f.$apply(function(){g.triggerHandler(c);l(f,{Br:b})})}},q)}}])};lz.B("ngeoSwipeDown",1,"swipedown");lz.B("ngeoSwipeUp",-1,"swipeup");S.value("ngeoQueryResult",{sources:[],total:0,pending:!1});function mz(a,b,c,d,e){a=a.has("ngeoQueryOptions")?a.get("ngeoQueryOptions"):{};this.j=b.collection;this.i=c;this.b=d;this.c=e;this.f=void 0!==a.limit?a.limit:50;this.o=void 0!==a.queryCountFirst?a.queryCountFirst:!1;this.u=void 0!==a.tolerance?a.tolerance:3}
mz.prototype.Qb=function(a){this.clear();var b;void 0===a.dataSources&&void 0===a.queryableDataSources&&(b=this.b.ig(this.j.b,a.map));z(a,{queryableDataSources:b,limit:void 0!==a.limit?a.limit:this.f,tolerancePx:this.u,wfsCount:this.o});this.c.pending=!0;this.b.Qb(a).then(this.g.bind(this))};mz.prototype.issue=mz.prototype.Qb;
mz.prototype.clear=function(){this.c.total=0;for(var a=t(this.c.sources),b=a.next();!b.done;b=a.next())b=b.value,b.features.length=0,b.pending=!1,b.queried=!1,b.tooManyResults=!1,b.totalFeatureCount=void 0;this.c.sources.length=0;this.c.pending=!1};mz.prototype.clear=mz.prototype.clear;
mz.prototype.g=function(a){var b=0,c={},d;for(d in a){var e=Number(d);c.dataSource=this.i.ub(e);var f=c.dataSource.name,g=a[e],h=g.features,k=g.limit,l=!0===g.tooManyFeatures;g=g.totalFeatureCount;c.wc={};h.forEach(function(a){return function(b){var c=b.get("ngeo_feature_type_");a.wc[c]||(a.wc[c]=[]);if(a.dataSource.attributes&&a.dataSource.attributes.length){var d=b.Sa(),e={};a.dataSource.attributes.forEach(function(a){a.alias?(e[a.alias]=d[a.name],a=a.name,a in b.Zb&&delete b.Zb[a]):e[a.name]=d[a.name]});
Wa(b,e,!0)}a.wc[c].push(b)}}(c));for(var n in c.wc)f=n?n:f,this.c.sources.push({features:c.wc[n],id:e,label:f,limit:k,pending:!1,queried:!0,tooManyResults:l,totalFeatureCount:g}),b+=h.length;c={wc:c.wc,dataSource:c.dataSource}}this.c.total=b;this.c.pending=!1};mz.$inject=["$injector","ngeoDataSources","ngeoDataSourcesHelper","ngeoQuerent","ngeoQueryResult"];var nz=angular.module("ngeoMapQuerent",[Br.name,Vy.name]);nz.service("ngeoMapQuerent",mz);S.requires.push(nz.name);var oz=angular.module("gmfQueryWindowComponent",[Hw.name,mr.name,lz.name,nz.name,"ngAnimate","ngTouch"]);ym.requires.push(oz.name);oz.config(["$animateProvider",function(a){a.classNameFilter(/gmf-animatable/)}]);oz.value("gmfDisplayquerywindowTemplateUrl",function(a,b){a=b.gmfDisplayquerywindowTemplateurl;return void 0!==a?a:"gmf/query/windowComponent.html"});function pz(a,b,c){return c(a,b)}pz.$inject=["$element","$attrs","gmfDisplayquerywindowTemplateUrl"];
oz.c={controller:"GmfDisplayquerywindowController as ctrl",bindings:{draggableContainment:"<?gmfDisplayquerywindowDraggableContainment",featuresStyleFn:"&gmfDisplayquerywindowFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerywindowSelectedfeaturestyle",defaultCollapsedFn:"&?gmfDisplayquerywindowDefaultcollapsed",desktop:"=gmfDisplayquerywindowDesktop",showUnqueriedLayers:"=gmfDisplayquerywindowShowunqueriedlayers"},templateUrl:pz};oz.component("gmfDisplayquerywindow",oz.c);
function qz(a,b,c,d,e){var f=this;this.desktop=!1;this.collapsed=!this.desktop;this.j=!1;this.sourcesFilter={queried:!0};this.ngeoQueryResult={sources:[],total:0,pending:!1};this.i=d;this.selectedSource=null;this.c=new Ih;this.f=e;this.b=new Ih;this.feature=this.source=null;this.currentResult=-1;this.isNext=!0;this.animate=0;this.open=!1;this.g=a;b.$watchCollection(function(){return c},function(a,b){rz(f,a);0<a.total?f.show():b!==a&&f.close()})}
qz.$inject=["$element","$scope","ngeoQueryResult","ngeoMapQuerent","ngeoFeatureOverlayMgr"];
qz.prototype.$onInit=function(){this.draggableContainment=this.draggableContainment||"document";this.desktop=this.desktop;this.collapsed=this.defaultCollapsedFn?!0===this.defaultCollapsedFn():!this.desktop;this.sourcesFilter=(this.j=this.showUnqueriedLayers?!0===this.showUnqueriedLayers:!1)?{}:{queried:!0};var a=this.f.eb();a.rc(this.c);var b=this.featuresStyleFn();void 0!==b&&a.setStyle(b);a=this.f.eb();a.rc(this.b);b=this.selectedFeatureStyleFn();if(void 0===b){b=new rd({color:[255,0,0,.6]});var c=
new sd({color:[255,0,0,1],width:2});b=new H({fill:b,image:new qd({fill:b,radius:5,stroke:c}),stroke:c})}a.setStyle(b);this.desktop&&(this.g.find(".gmf-displayquerywindow .container").draggable({cancel:"input,textarea,button,select,option,tr",containment:this.draggableContainment}),this.g.find(".gmf-displayquerywindow .container").resizable({minHeight:240,minWidth:240}))};qz.prototype.show=function(){this.clear();sz(this)};qz.prototype.show=qz.prototype.show;
function sz(a){tz(a,0,!1);if(null!==a.source){var b=a.ngeoQueryResult.sources;a.c.clear();for(var c=0;c<b.length;c++){var d=b[c];if(null===a.selectedSource||a.selectedSource===d){d=d.features;for(var e=0;e<d.length;e++)a.c.push(d[e])}}uz(a);a.open=!0}}
function tz(a,b,c){var d=!1;if(b!==a.currentResult){var e,f=a.feature,g=a.ngeoQueryResult.sources;a.currentResult=b;for(e=0;e<g.length;e++){var h=g[e];if(null===a.selectedSource||a.selectedSource===h){var k=h.features;if(b>=k.length)b-=k.length;else{a.source=h;a.feature=h.features[b];d=!0;break}}}c&&uz(a,f)}return d}qz.prototype.Hg=function(){var a=this.currentResult-1;0>a&&(a=this.ke()-1);tz(this,a,!0)&&(this.isNext=!1,this.animate++)};qz.prototype.previous=qz.prototype.Hg;
qz.prototype.next=function(){var a=this.currentResult+1;a>this.ke()-1&&(a=0);tz(this,a,!0)&&(this.isNext=!0,this.animate++)};qz.prototype.next=qz.prototype.next;function rz(a,b){a.ngeoQueryResult.total=0;for(var c=a.ngeoQueryResult.sources.length=0;c<b.sources.length;c++){var d=b.sources[c];d.features=d.features.filter(function(a){return!Da(ir(a))});a.ngeoQueryResult.sources.push(d);a.ngeoQueryResult.total+=d.features.length}}
qz.prototype.ke=function(){return null===this.selectedSource?this.ngeoQueryResult.total:this.selectedSource.features.length};qz.prototype.getResultLength=qz.prototype.ke;qz.prototype.Yn=function(){return 0==this.currentResult};qz.prototype.isFirst=qz.prototype.Yn;qz.prototype.Zn=function(){return this.currentResult==this.ke()-1};qz.prototype.isLast=qz.prototype.Zn;qz.prototype.fm=function(){return this.feature?ir(this.feature):null};qz.prototype.getFeatureValues=qz.prototype.fm;
function uz(a,b){a.b.clear();a.c.remove(a.feature);a.b.push(a.feature);void 0!==b&&a.c.push(b)}qz.prototype.close=function(){this.open=!1;this.clear();this.i.clear()};qz.prototype.close=qz.prototype.close;qz.prototype.clear=function(){this.source=this.feature=null;this.currentResult=-1;this.c.clear();this.b.clear();this.selectedSource=null};qz.prototype.clear=qz.prototype.clear;qz.prototype.Nq=function(a){null!==a&&0>=a.features.length||(this.clear(),this.selectedSource=a,sz(this))};
qz.prototype.setSelectedSource=qz.prototype.Nq;oz.controller("GmfDisplayquerywindowController",qz);function vz(a){Sj.call(this,{handleEvent:wz,Za:xb,ab:xz});a=a?a:{};this.o=a.source?a.source:null;this.G=void 0!==a.vertex?a.vertex:!0;this.B=void 0!==a.edge?a.edge:!0;this.i=a.features?a.features:null;this.W=[];this.C={};this.N={};this.u={};this.F=null;this.f=void 0!==a.fb?a.fb:10;this.ia=yz.bind(this);this.b=new Nl;this.U={Point:this.Bp,LineString:this.wj,LinearRing:this.wj,Polygon:this.Cp,MultiPoint:this.zp,MultiLineString:this.yp,MultiPolygon:this.Ap,GeometryCollection:this.xp,Circle:this.wp}}
u(vz,Sj);m=vz.prototype;m.na=function(a,b){b=void 0!==b?b:!0;var c=x(a),d=a.getGeometry();if(d){var e=this.U[d.getType()];e&&(this.N[c]=d.I(ab()),e.call(this,a,d))}b&&(this.C[c]=D(a,"change",this.vp,this))};m.bm=function(a){this.na(a)};m.cm=function(a){this.ma(a)};m.uj=function(a){if(a instanceof wm)var b=a.feature;else a instanceof Nh&&(b=a.element);this.na(b)};m.vj=function(a){if(a instanceof wm)var b=a.feature;else a instanceof Nh&&(b=a.element);this.ma(b)};
m.vp=function(a){a=a.target;if(this.v){var b=x(a);b in this.u||(this.u[b]=a)}else this.zk(a)};m.ma=function(a,b){b=void 0!==b?b:!0;var c=x(a),d=this.N[c];if(d){var e=this.b,f=[];Sl(e,d,function(b){a===b.feature&&f.push(b)});for(d=f.length-1;0<=d;--d)e.remove(f[d])}b&&(A(this.C[c]),delete this.C[c])};
m.setMap=function(a){var b=this.getMap(),c=this.W,d;this.i?d=this.i:this.o&&(d=this.o.fc());b&&(c.forEach(A),c.length=0,d.forEach(this.cm,this));Sj.prototype.setMap.call(this,a);a&&(this.i?c.push(D(this.i,"add",this.uj,this),D(this.i,"remove",this.vj,this)):this.o&&c.push(D(this.o,"addfeature",this.uj,this),D(this.o,"removefeature",this.vj,this)),d.forEach(this.bm,this))};m.Ub=yb;
function zz(a,b,c,d){var e=d.Ca([b[0]-a.f,b[1]+a.f]),f=d.Ca([b[0]+a.f,b[1]-a.f]);e=$a([e,f]);var g=Ql(a.b,e);a.G&&!a.B&&(g=g.filter(function(a){return"Circle"!==a.feature.getGeometry().getType()}));var h=!1;e=!1;var k=f=null;if(0<g.length){a.F=c;g.sort(a.ia);var l=g[0].X;h="Circle"===g[0].feature.getGeometry().getType();if(a.G&&!a.B){if(c=Zg(d,l[0]),h=Zg(d,l[1]),c=bf(b,c),b=bf(b,h),h=Math.sqrt(Math.min(c,b)),h=h<=a.f)e=!0,f=c>b?l[1]:l[0],k=Zg(d,f)}else a.B&&(f=h?Xe(c,g[0].feature.getGeometry()):Ze(c,
l),k=Zg(d,f),cf(b,k)<=a.f&&(e=!0,a.G&&!h&&(c=Zg(d,l[0]),h=Zg(d,l[1]),c=bf(k,c),b=bf(k,h),h=Math.sqrt(Math.min(c,b)),h=h<=a.f)))&&(f=c>b?l[1]:l[0],k=Zg(d,f));e&&(k=[Math.round(k[0]),Math.round(k[1])])}return{Uq:e,vertex:f,tr:k}}m.zk=function(a){this.ma(a,!1);this.na(a,!1)};m.wp=function(a,b){b=Yi(b).O()[0];var c;var d=0;for(c=b.length-1;d<c;++d){var e=b.slice(d,d+2);var f={feature:a,X:e};this.b.insert($a(e),f)}};
m.xp=function(a,b){var c=b.b;for(b=0;b<c.length;++b){var d=this.U[c[b].getType()];d&&d.call(this,a,c[b])}};m.wj=function(a,b){b=b.O();var c;var d=0;for(c=b.length-1;d<c;++d){var e=b.slice(d,d+2);var f={feature:a,X:e};this.b.insert($a(e),f)}};m.yp=function(a,b){b=b.O();var c,d;var e=0;for(d=b.length;e<d;++e){var f=b[e];var g=0;for(c=f.length-1;g<c;++g){var h=f.slice(g,g+2);var k={feature:a,X:h};this.b.insert($a(h),k)}}};
m.zp=function(a,b){var c=b.O(),d;var e=0;for(d=c.length;e<d;++e){var f=c[e];f={feature:a,X:[f,f]};this.b.insert(b.I(),f)}};m.Ap=function(a,b){b=b.O();var c,d,e;var f=0;for(e=b.length;f<e;++f){var g=b[f];var h=0;for(d=g.length;h<d;++h){var k=g[h];var l=0;for(c=k.length-1;l<c;++l){var n=k.slice(l,l+2);var p={feature:a,X:n};this.b.insert($a(n),p)}}}};m.Bp=function(a,b){var c=b.O();a={feature:a,X:[c,c]};this.b.insert(b.I(),a)};
m.Cp=function(a,b){b=b.O();var c,d;var e=0;for(d=b.length;e<d;++e){var f=b[e];var g=0;for(c=f.length-1;g<c;++g){var h=f.slice(g,g+2);var k={feature:a,X:h};this.b.insert($a(h),k)}}};function wz(a){var b=zz(this,a.pixel,a.coordinate,a.map);b.Uq&&(a.coordinate=b.vertex.slice(0,2),a.pixel=b.tr);return Tj.call(this,a)}function xz(){var a=Ca(this.u);a.length&&(a.forEach(this.zk,this),this.u={});return!1}function yz(a,b){return df(this.F,a.X)-df(this.F,b.X)};function Az(a,b,c,d,e,f){this.v=a;this.C=b;this.u=c;this.i=d;this.o=e;this.aa=f;this.c={};this.B=[];this.g=this.f=this.b=null}Az.$inject="$http $q $rootScope $timeout gmfThemes gmfTreeManager".split(" ");Az.prototype.Kf=function(){var a=this.b,b;for(b in this.c){var c=this.c[+b];c.active&&(a.xa.remove(c.interaction),qj(a,c.interaction))}};Az.prototype.ensureSnapInteractionsOnTop=Az.prototype.Kf;
Az.prototype.setMap=function(a){var b=this,c=this.B;this.b&&(this.j(),Bz(this),c.forEach(A),c.length=0);if(this.b=a)this.j=this.u.$watchCollection(function(){if(b.aa.rootCtrl)return b.aa.rootCtrl.children},function(a){b.i(function(){a&&(Bz(b),b.aa.rootCtrl.La(b.uq.bind(b)))},0)}),c.push(D(this.o,"change",this.Rm,this),D(a,"moveend",this.pn,this))};Az.prototype.setMap=Az.prototype.setMap;m=Az.prototype;m.Rm=function(){var a=this;this.g=null;this.o.Nc().then(function(b){a.g=b})};
m.uq=function(a){var b=a.node;if(!b.children&&(b=a.node,b=uu(b))){var c=Cz(this,a);if(c){var d=x(a),e=this.u.$watch(function(){return a.getState()},this.wi.bind(this,a));this.c[d]={active:!1,featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",features:new Ih,geometryName:"geom",interaction:null,maxFeatures:50,Tb:null,snappingConfig:b,treeCtrl:a,Dk:c,stateWatcherUnregister:e};this.wi(a,a.getState())}}};
function Bz(a){for(var b in a.c){var c=a.c[+b];c&&(c.stateWatcherUnregister(),Dz(a,c),delete a.c[+b])}}function Cz(a,b){if(null===a.g)return null;var c=b.node;if("WMS"!==c.type)return null;for(var d=[],e=0,f=c.childLayers.length;e<f;e++)c.childLayers[e].queryable&&d.push(c.childLayers[e].name);if(!d.length)return null;b=b.parent.node.mixed?c.ogcServer:Eu(b).node.ogcServer;if(!b)return null;a=a.g[b];return a.wfsSupport?{jd:d.join(","),url:a.urlWfs}:null}
m.wi=function(a,b){a=x(a);a=this.c[a];if("on"===b){if(!a.active){b=this.b;var c=new vz({edge:a.snappingConfig.edge,features:a.features,fb:a.snappingConfig.tolerance,vertex:a.snappingConfig.vertex});qj(b,c);a.interaction=c;a.active=!0;Ez(this,a)}}else Dz(this,a)};function Dz(a,b){b.active&&(a.b.xa.remove(b.interaction),b.interaction=null,b.features.clear(),b.Tb&&(b.Tb.resolve(),b.Tb=null),b.active=!1)}m.mo=function(){this.f=null;var a;for(a in this.c){var b=this.c[+a];b.active&&Ez(this,b)}};
function Ez(a,b){b.Tb&&b.Tb.resolve();var c=a.b,d=N(c);c=c.ra();c=ij(d,c);d=d.b.c;var e=b.Dk.jd.split(",");c={srsName:d,featureNS:b.featureNS,featurePrefix:b.featurePrefix,jd:e,Dg:"GML3",bbox:c,geometryName:b.geometryName,maxFeatures:b.maxFeatures};e=new Ps;d=new XMLSerializer;c=bt(e,c);d=d.serializeToString(c);c=b.Dk.url;b.Tb=a.C.defer();a.v.post(c,d,{timeout:b.Tb.promise}).then(function(a){b.Tb=null;b.features.clear();(a=(new Ps).gb(a.data))&&b.features.extend(a)})}
m.pn=function(){this.f&&this.i.cancel(this.f);this.f=this.i(this.mo.bind(this),400)};var Fz=angular.module("gmfSnapping",[xu.name,Fu.name]);Fz.service("gmfSnapping",Az);ym.requires.push(Fz.name);var Gz=angular.module("ngeoMap",[]);S.requires.push(Gz.name);Gz.b=function(a){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoMap);e.bd(c[0]);if(b.$eval(d.ngeoMapManageResize)){var f=b.$eval(d.ngeoMapResizeTransition);D(a,"resize",function(){if(f){var b=Date.now(),c=!0,d=function(){e.af();e.bc&&cancelAnimationFrame(e.bc);e.Ah();c&&a.requestAnimationFrame(d);Date.now()-b>f&&(c=!1)};d()}else e.af()})}}}};Gz.b.$inject=["$window"];Gz.directive("ngeoMap",Gz.b);var Hz=angular.module("gmfMapComponent",[Wv.name,Fz.name,Gz.name,Hw.name]);ym.requires.push(Hz.name);Hz.b=function(){return{scope:{map:"<gmfMapMap",manageResize:"<gmfMapManageResize",resizeTransition:"<gmfMapResizeTransition"},controller:"GmfMapController as ctrl",bindToController:!0,templateUrl:"gmf/map/component.html"}};Hz.directive("gmfMap",Hz.b);function Iz(a,b,c){this.g=a;this.c=b;this.b=c}Iz.$inject=["ngeoFeatureOverlayMgr","gmfPermalink","gmfSnapping"];
Iz.prototype.$onInit=function(){this.g.Cb(this.map);this.c.setMap(this.map);this.b.setMap(this.map)};Hz.controller("GmfMapController",Iz);var Jz=angular.module("gmfThemeSelectorComponent",[kv.name,xu.name]);ym.requires.push(Jz.name);Jz.c={bindings:{filter:"<gmfThemeselectorFilter"},controller:"gmfThemeselectorController",templateUrl:function(){return"gmf/theme/selectorComponent.html"}};Jz.component("gmfThemeselector",Jz.c);function Kz(a,b,c){this.gmfThemeManager=b;this.b=c;this.c=[];this.c.push(D(this.b,"change",this.f,this));a.$on("$destroy",this.g.bind(this))}Kz.$inject=["$scope","gmfThemeManager","gmfThemes"];
Kz.prototype.f=function(){var a=this;this.b.lb().then(function(b){a.themes=a.filter?b.filter(a.filter):b})};Kz.prototype.Oq=function(a,b){a&&this.gmfThemeManager.jf(a,b)};Kz.prototype.setTheme=Kz.prototype.Oq;Kz.prototype.g=function(){this.c.forEach(A);this.c.length=0};Jz.controller("gmfThemeselectorController",Kz);var Lz=angular.module("ngeoMapQuery",[nz.name]);S.requires.push(Lz.name);
Lz.b=function(a,b){return{restrict:"A",scope:!1,link:function(c,d,e){function f(a){a.dragging||(a=Rh(h,a.originalEvent),a=h.Qf(a,function(){return!0},void 0,function(a){var b=a.get("visible");a=a.get("querySourceIds");return b&&!!a}),Xg(h).style.cursor=a?"pointer":"")}function g(b){a.Qb({coordinate:b.coordinate,map:h})}var h=c.$eval(e.ngeoMapQueryMap),k=null,l=null;c.$watch(e.ngeoMapQueryActive,function(d){d?(k=D(h,"singleclick",g),(b.has("ngeoQueryOptions")?b.get("ngeoQueryOptions"):{}).us&&(l=D(h,
"pointermove",f))):(null!==k&&(A(k),k=null),null!==l&&(A(l),l=null),!1!==c.$eval(e.ngeoMapQueryAutoclear)&&a.clear())})}}};Lz.b.$inject=["ngeoMapQuerent","$injector"];Lz.directive("ngeoMapQuery",Lz.b);var Mz=angular.module("ngeoMessageDisplaywindowComponent",["ngSanitize"]);S.requires.push(Mz.name);function Nz(a,b){this.c=a;this.b=b}
Nz.prototype.$onInit=function(){this.clearOnClose=!1!==this.clearOnClose;this.content=this.content||null;this.desktop=!1!==this.desktop;this.draggableContainment=this.draggableContainment||"document";this.height=this.height||null;this.open=!0===this.open;this.title=this.title||null;this.url=this.url||null;this.width=this.width||null;this.draggable=void 0!==this.draggable?this.draggable:this.desktop;this.resizable=void 0!==this.resizable?this.resizable:this.desktop;this.draggable&&this.c.find(".ngeo-displaywindow-container").draggable({containment:this.draggableContainment});
this.resizable&&this.c.find(".ngeo-displaywindow-container").resizable({minHeight:240,minWidth:240})};Nz.prototype.close=function(){this.open=!1;this.clearOnClose&&this.Fc()};Nz.prototype.close=Nz.prototype.close;Nz.prototype.Fc=function(){this.width=this.url=this.title=this.height=this.content=null};Nz.prototype.clear_=Nz.prototype.Fc;
aa.Object.defineProperties(Nz.prototype,{style:{configurable:!0,enumerable:!0,get:function(){return{height:this.height||void 0,width:this.height||void 0}}},urlTrusted:{configurable:!0,enumerable:!0,get:function(){if(null!==this.url)return this.b.trustAsResourceUrl(this.url)}}});Nz.$inject=["$element","$sce"];
Mz.component("ngeoDisplaywindow",{bindings:{clearOnClose:"<",content:"=",desktop:"<",draggable:"<",draggableContainment:"<",height:"=",open:"=",resizable:"<",title:"=",url:"=",width:"="},controller:Nz,templateUrl:function(){return"ngeo/message/displaywindowComponent.html"}});function Oz(a,b){this.getActive=function(){return a[b]};this.setActive=function(c){a[b]=c}}va("ngeo.misc.ToolActivate",Oz);function Pz(a){this.c={};this.J=a}Pz.$inject=["$rootScope"];Pz.prototype.ta=function(a,b,c){var d=this,e=this.c[a];e||(e=this.c[a]=[]);var f=this.J.$watch(b.getActive,function(c,e){if(c!==e)if(c)for(c=d.c[a],e=0;e<c.length;e++)b!=c[e].tool&&c[e].tool.setActive(!1);else{c=d.c[a];e=null;for(var f=!1,g=0;g<c.length;g++)f=f||c[g].tool.getActive(),c[g].defaultTool&&(e=c[g].tool);f||null===e||e.setActive(!0)}});e.push({tool:b,defaultTool:c||!1,unlisten:f});var g=0;e.forEach(function(a){a.defaultTool&&g++})};
Pz.prototype.registerTool=Pz.prototype.ta;Pz.prototype.Ma=function(a,b){if(a=this.c[a])for(var c=0;c<a.length;c++)if(a[c].tool==b){a[c].unlisten();a.splice(c,1);break}};Pz.prototype.unregisterTool=Pz.prototype.Ma;Pz.prototype.mr=function(a){var b=this.c[a];if(b){for(var c=0;c<b.length;c++)b[c].unlisten();delete this.c[a]}};Pz.prototype.unregisterGroup=Pz.prototype.mr;Pz.prototype.tl=function(a){a.setActive(!0)};Pz.prototype.activateTool=Pz.prototype.tl;Pz.prototype.Ol=function(a){a.setActive(!1)};
Pz.prototype.deactivateTool=Pz.prototype.Ol;var Qz=angular.module("ngeoToolActivateMgr",[]);Qz.service("ngeoToolActivateMgr",Pz);S.requires.push(Qz.name);ym.value("ngeoExportFeatureFormats",[kr,jr]);
function Rz(a,b,c){function d(a){var b=a.detail.bf;b=null!==b.username?b.role_id:void 0;e.c.lb().then(function(){var a=e.gmfUser.functionalities;a&&a.open_panel&&"layer_filter"===a.open_panel[0]&&(e.filterSelectorActive=!0)});var c=e.gmfThemeManager.c;iv(e.gmfThemeManager,"",!0);"ready"!==a.type&&Sz(e,c);e.c.Xi(b);e.F()}var e=this;this.B=c.get("ngeoLocation");this.B.tg("debug")&&(window.injector=c);c.get("ngeoFeatureHelper").Gb(N(this.map).b);this.gmfThemeManager=c.get("gmfThemeManager");this.aa=
c.get("gmfTreeManager");this.c=c.get("gmfThemes");this.f=c.get("gmfPermalink");var f=c.get("gmfAuthenticationService");this.hasEditableLayers=!1;this.F=function(){var a=this;this.c.hasEditableLayers().then(function(b){a.hasEditableLayers=b})};D(f,"ready",d);D(f,"login",d);D(f,"logout",d);this.searchDatasources=[{labelKey:"label",groupValues:c.get("gmfSearchGroups"),groupActions:c.get("gmfSearchActions"),projection:"EPSG:"+(a.srid||21781),url:c.get("fulltextsearchUrl")}];this.dimensions={};this.f.Oe(this.dimensions);
a=c.get("gmfDataSourcesManager");a.hk(this.map);a.Oe(this.dimensions);if(c.has("gmfDefaultDimensions")){a=c.get("gmfDefaultDimensions");for(var g in a)void 0===this.dimensions[g]&&(this.dimensions[g]=a[g])}this.b=c.get("ngeoBackgroundLayerMgr");b.$watchCollection(function(){return e.dimensions},function(){e.b.Vb(e.map,e.dimensions)});this.b.on("change",function(){e.b.Vb(e.map,e.dimensions)});this.rightNavVisible=this.leftNavVisible=!1;g=new rd({color:[255,170,0,.6]});a=new sd({color:[255,170,0,1],
width:2});this.queryFeatureStyle=new H({fill:g,image:new qd({fill:g,radius:5,stroke:a}),stroke:a});this.filterSelectorActive=!1;this.queryAutoClear=this.queryActive=!0;this.printActive=this.printPanelActive=!1;this.C=c.get("ngeoMapQuerent");b.$watch(function(){return e.printPanelActive},function(a){a||e.queryActive||e.C.clear();e.queryAutoClear=!a;e.printActive=a});this.drawProfilePanelActive=this.drawFeatureActive=this.measureLengthActive=this.measurePointActive=!1;this.gmfUser=c.get("gmfUser");
b.$watch(function(){return e.gmfUser.username},function(a){null!==a&&e.G&&(e.rightNavVisible=!1)});this.v=c.get("ngeoGetBrowserLanguage");this.o=c.get("ngeoStateManager");this.K=c.get("tmhDynamicLocale");this.j=b;this.u=c.get("defaultLang");this.g=c.get("langUrls");this.i=c.get("gettextCatalog");Tz(this);this.mapToolsGroup="mapTools";c.get("ngeoFeatureOverlayMgr").Cb(this.map);c=c.get("ngeoToolActivateMgr");c.ta("mapTools",new Oz(this,"queryActive"),!0);c.ta("mapTools",new Oz(this,"measurePointActive"),
!1);c.ta("mapTools",new Oz(this,"measureLengthActive"),!1);c.ta("mapTools",new Oz(this,"drawFeatureActive"),!1);c.ta("mapTools",new Oz(this,"drawProfilePanelActive"),!1);c.ta("mapTools",new Oz(this,"printPanelActive"),!1);b.$root.$on(jv,function(a,b){e.c.ui(b).then(function(a){Uz(e,a)})});this.S=function(a){var b=this;su(this.c).then(function(c){var d;a||(d=b.f.Tf(c));if(!d){var e=b.gmfUser.functionalities;if(e&&(e=e.default_basemap,0<e.length)){var f=e[0];d=Td(c,function(a){return a.get("label")===
f})}}!d&&c[1]&&(d=c[1]);d&&b.b.set(b.map,d)})}.bind(this);this.S(!1);var h=window.gmfx||{};window.gmfx=h;h.openIframePopup=function(a,b,c,d){e.displaywindowUrl=a;h.openPopup_(b,c,d)};h.openTextPopup=function(a,b,c,d){e.displaywindowContent=a;h.openPopup_(b,c,d)};h.openPopup_=function(a,b,c){e.displaywindowTitle=a;e.displaywindowOpen=!0;b&&(e.displaywindowWidth=b+"px");c&&(e.displaywindowHeight=c+"px");e.j.$apply()};this.manageResize=!1;b=window.cgxp||{};window.cgxp=b;b.tools=window.cgxp.tools||{};
b.tools.openInfoWindow=function(a,b,c,d){h.openIframePopup(a,b,c,d)};this.displaywindowContent=null;this.displaywindowDraggableContainment=".gmf-map";this.displaywindowHeight=null;this.displaywindowOpen=!1;this.displaywindowWidth=this.displaywindowUrl=this.displaywindowTitle=null}va("gmf.AbstractAppController",Rz);Rz.$inject=["config","$scope","$injector"];function Vz(a,b){return b&&0<b.length?Td(a,function(a){return a.get("label")===b[0]}):null}
Rz.prototype.Ve=function(a){this.i.setCurrentLanguage(a);this.i.loadRemote(this.g[a]);this.K.set(a);this.lang=a};Rz.prototype.switchLanguage=Rz.prototype.Ve;function Tz(a){a.j.$watch(function(){return a.lang},function(b){Vu(a.o,{lang:b})});var b=a.v(Object.keys(a.g)),c=a.o.c.lang;void 0!==c&&c in a.g?a.Ve(c):void 0!==b&&b in a.g?a.Ve(b):a.Ve(a.u)}
function Uz(a,b){su(a.c).then(function(c){var d;(d=a.f.Tf(c))||(d=Vz(c,a.gmfUser.functionalities.default_basemap));!d&&b&&(d=Vz(c,b.functionalities.default_basemap));d||(d=c[1<c.length?1:0]);a.b.set(a.map,d)})}function Sz(a,b){a.c.lb().then(function(c){var d=a.f.yf();d?(c=pu(c,d))&&a.gmfThemeManager.jf(c,!0):iv(a.gmfThemeManager,b)})}
function Wz(){var a=document.createElement("span");a.className="fa fa-location-arrow";a.style.transform="rotate(-0.82rad)";var b=document.createElement("span");b.appendChild(a);return b}ym.controller("AbstractController",Rz);var Xz=angular.module("ngeoBboxQuery",[nz.name]);S.requires.push(Xz.name);Xz.b=function(a){return{restrict:"A",scope:!1,link:function(b,c,d){var e=b.$eval(d.ngeoBboxQueryMap),f=new gk({condition:Nj});f.on("boxend",function(){var c=f.getGeometry().I();a.Qb({limit:b.$eval(d.ngeoBboxQueryLimit),extent:c,map:e})});b.$watch(d.ngeoBboxQueryActive,function(c){c?qj(e,f):(e.xa.remove(f),!1!==b.$eval(d.ngeoBboxQueryAutoclear)&&a.clear())})}}};Xz.b.$inject=["ngeoMapQuerent"];Xz.directive("ngeoBboxQuery",Xz.b);function Yz(a,b){this.c=a;this.b=b}Yz.$inject=["$http","gmfRasterUrl"];Yz.prototype.jg=function(a,b){b=b||{};b[Zz]=a[0];b[$z]=a[1];return this.c.get(this.b,{params:b}).then(this.g.bind(this))};Yz.prototype.getRaster=Yz.prototype.jg;Yz.prototype.g=function(a){return a.data};var Zz="lon",$z="lat",aA=angular.module("gmfRaster",[]);aA.service("gmfRaster",Yz);ym.requires.push(aA.name);var bA=angular.module("gmfContextualdata",[aA.name]);ym.requires.push(bA.name);bA.b=function(){return{restrict:"A",scope:!1,controller:"GmfContextualdataController as cdCtrl",bindToController:{map:"<gmfContextualdataMap",projections:"<gmfContextualdataProjections",callback:"<gmfContextualdataCallback"},link:function(a,b,c,d){d.Cb()}}};bA.directive("gmfContextualdata",bA.b);function cA(a,b,c){this.j=a;this.g=b;this.i=c;angular.element("body").on("mousedown",this.f.bind(this))}
cA.$inject=["$compile","$scope","gmfRaster"];
cA.prototype.Cb=function(){var a=document.createElement("DIV");a.classList.add("popover");a.classList.add("bottom");a.classList.add("gmf-contextualdata");angular.element(a).css("position","relative");var b=document.createElement("DIV");b.classList.add("arrow");a.appendChild(b);this.c=document.createElement("DIV");this.c.setAttribute("gmf-contextualdatacontent","");this.c.classList.add("popover-content");a.appendChild(this.c);this.b=new Qg({element:a,Gd:!0,Xd:!0,Yd:{duration:250},Xc:"top-center"});
this.map.Ha.push(this.b);a=Xg(this.map);D(a,"contextmenu",this.o,this)};cA.prototype.o=function(a){var b=this;this.g.$apply(function(){var c=Rh(b.map,a);c=b.map.Ca(c);dA(b,c);a.preventDefault();b.f();var d=b.b.get(Rg);angular.element(d).css("display","block");b.b.set(Ug,c)})};
function dA(a,b){var c=a.g.$new(!0);a.j(a.c)(c);var d=N(a.map).b.c;a.projections.forEach(function(a){var e=pc(b,d,"EPSG:"+a);c["coord_"+a]=e;c["coord_"+a+"_eastern"]=e[0];c["coord_"+a+"_northern"]=e[1]});var e=function(a){z(c,a);this.callback&&z(c,this.callback.call(this,b,a))}.bind(a);a.i.jg(b).then(e,function(){console.error("Error on getting the raster.")})}cA.prototype.f=function(){var a=this.b.get(Rg);angular.element(a).css("display","none")};bA.controller("GmfContextualdataController",cA);
bA.v=function(a){return{restrict:"A",scope:!0,templateUrl:a}};bA.v.$inject=["gmfContextualdatacontentTemplateUrl"];bA.directive("gmfContextualdatacontent",bA.v);function eA(a,b){this.ba=b;this.b=a.has("ngeoCsvEncoding")?a.get("ngeoCsvEncoding"):"utf-8";a.has("ngeoCsvExtension")&&a.get("ngeoCsvExtension");this.g=a.has("ngeoCsvIncludeHeader")?a.get("ngeoCsvIncludeHeader"):!0;this.c=a.has("ngeoCsvQuote")?a.get("ngeoCsvQuote"):'"';this.j=a.has("ngeoCsvSeparator")?a.get("ngeoCsvSeparator"):",";this.f=a.get("ngeoDownload")}eA.$inject=["$injector","gettextCatalog"];
eA.prototype.ci=function(a,b){var c=this;if(0==a.length||0==b.length)return"";var d=b.map(function(a){return c.ba.getString(a.name)});d=fA(this,d);a=a.map(function(a){var d=b.map(function(b){return a[b.name]});return fA(c,d)});return this.g?d+a.join(""):a.join("")};eA.prototype.generateCsv=eA.prototype.ci;function fA(a,b){var c=new RegExp(a.c,"g"),d=a.c+a.c;return b.map(function(b){return void 0!==b&&null!==b?a.c+(""+b).replace(c,d)+a.c:""}).join(a.j)+"\n"}
eA.prototype.Yg=function(a,b,c){a=this.ci(a,b);this.f(a,c,"text/csv;charset="+this.b)};eA.prototype.startDownload=eA.prototype.Yg;var gA=angular.module("ngeoCsvDownload",[jn.name]);gA.service("ngeoCsvDownload",eA);S.requires.push(gA.name);function hA(a,b){this.data=a;this.columnDefs=b;this.selectedRows={}}va("ngeo.grid.Config",hA);function iA(a){return""+x(a)}hA.getRowUid=iA;hA.prototype.Sc=function(a){return!!this.selectedRows[iA(a)]};hA.prototype.isRowSelected=hA.prototype.Sc;hA.prototype.lg=function(){return Object.keys(this.selectedRows).length};hA.prototype.getSelectedCount=hA.prototype.lg;hA.prototype.ti=function(){var a=this;return this.data.filter(function(b){return a.Sc(b)})};hA.prototype.getSelectedRows=hA.prototype.ti;
function jA(a,b){var c=iA(b);a.selectedRows[c]=b}function kA(a,b){var c=iA(b);a.Sc(b)?delete a.selectedRows[c]:a.selectedRows[c]=b}hA.prototype.selectAll=function(){var a=this;this.data.forEach(function(b){jA(a,b)})};hA.prototype.selectAll=hA.prototype.selectAll;hA.prototype.Kd=function(){for(var a in this.selectedRows)delete this.selectedRows[a]};hA.prototype.unselectAll=hA.prototype.Kd;hA.prototype.re=function(){var a=this;this.data.forEach(function(b){kA(a,b)})};hA.prototype.invertSelection=hA.prototype.re;
var lA=angular.module("ngeoGridConfig",[]);var mA=angular.module("ngeoGrid",[lA.name,hn.name,"floatThead"]);S.requires.push(mA.name);mA.value("ngeoGridTemplateUrl",function(a,b){a=b.ngeoGridTemplateurl;return void 0!==a?a:"ngeo/grid/component.html"});function nA(a,b,c){return c(a,b)}nA.$inject=["$element","$attrs","ngeoGridTemplateUrl"];mA.c={controller:"ngeoGridController as ctrl",bindings:{configuration:"=ngeoGridConfiguration"},templateUrl:nA};mA.component("ngeoGrid",mA.c);
function oA(a){this.J=a;this.sortAscending=!0;this.floatTheadConfig={scrollContainer:function(a){return a.closest(".ngeo-grid-table-container")}}}oA.$inject=["$scope"];oA.prototype.$onInit=function(){this.selectedRows=this.configuration.selectedRows};oA.prototype.sort=function(a){this.sortAscending=this.sortedBy===a?!this.sortAscending:!0;this.sortedBy=a;var b=this.sortAscending?1:-1;this.configuration.data.sort(function(c,d){return c[a]?d[a]?c[a]>d[a]?b:-b:-1:1})};oA.prototype.sort=oA.prototype.sort;
oA.prototype.yl=function(a,b){var c=!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey;b=!b.altKey&&(Nc?b.metaKey:b.ctrlKey)&&!b.shiftKey;if(c&&!b){var d=iA(a);c=this.configuration.data;if(!this.configuration.Sc(a)){b=void 0;for(var e=[],f=0;f<c.length;f++){var g=c[f],h=iA(g);d===h?b=f:this.configuration.Sc(g)&&e.push(f)}0==e.length&&jA(this.configuration,a);d=Infinity;a=e[0];for(f=0;f<e.length;f++)g=e[f],h=Math.abs(g-b),d>h&&(d=h,a=g);e=b>a?b:a;for(b=b<a?b:a;b<=e;b++)jA(this.configuration,c[b])}}else!c&&
b?kA(this.configuration,a):(c=this.configuration.Sc(a),this.configuration.Kd(),c||jA(this.configuration,a))};oA.prototype.clickRow=oA.prototype.yl;oA.prototype.gq=function(a){var b=!a.altKey&&(Nc?a.metaKey:a.ctrlKey)&&!a.shiftKey;(!a.altKey&&!a.metaKey&&!a.ctrlKey&&a.shiftKey||b)&&a.preventDefault()};oA.prototype.preventTextSelection=oA.prototype.gq;mA.controller("ngeoGridController",oA);var pA=angular.module("gmfQueryGridComponent",[gA.name,jn.name,mA.name,lA.name,Hw.name,nz.name]);ym.requires.push(pA.name);pA.value("gmfDisplayquerygridTemplateUrl",function(a,b){a=b.gmfDisplayquerygridTemplateurl;return void 0!==a?a:"gmf/query/gridComponent.html"});function qA(a,b,c){return c(a,b)}qA.$inject=["$element","$attrs","gmfDisplayquerygridTemplateUrl"];
pA.c={controller:"GmfDisplayquerygridController as ctrl",bindings:{active:"=?gmfDisplayquerygridActive",featuresStyleFn:"&gmfDisplayquerygridFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerygridSelectedfeaturestyle",getMapFn:"&gmfDisplayquerygridMap",removeEmptyColumnsFn:"&?gmfDisplayquerygridRemoveemptycolumns",maxResultsFn:"&?gmfDisplayquerygridMaxresults",maxRecenterZoomFn:"&?gmfDisplayquerygridMaxrecenterzoom",mergeTabsFn:"&?gmfDisplayquerygridMergetabs"},templateUrl:qA};
pA.component("gmfDisplayquerygrid",pA.c);
function rA(a,b,c,d,e,f,g,h){var k=this,l=a.has("ngeoQueryOptions")?a.get("ngeoQueryOptions"):{};this.o=b;this.$timeout_=f;this.ngeoQueryResult=c;this.S=d;this.K=g;this.C=h;this.maxResults=void 0!==l.limit?l.limit:50;this.pending=this.active=!1;this.gridSources={};this.loadedGridSources=[];this.selectedTab=null;this.v=!1;this.f={};this.j={};this.g=new Ih;this.u=e;this.b=new Ih;this.B=a.has("gmfCsvFilename")?a.get("gmfCsvFilename"):"query-results.csv";this.i=null;this.o.$watchCollection(function(){return c},
function(a,b){a!==b&&sA(k)});this.c=null}rA.$inject="$injector $scope ngeoQueryResult ngeoMapQuerent ngeoFeatureOverlayMgr $timeout ngeoCsvDownload $element".split(" ");
rA.prototype.$onInit=function(){this.v=this.removeEmptyColumnsFn?!0===this.removeEmptyColumnsFn():!1;this.maxRecenterZoom=this.maxRecenterZoomFn?this.maxRecenterZoomFn():void 0;this.f=this.mergeTabsFn?this.mergeTabsFn():{};var a=this.u.eb();a.rc(this.g);var b=this.featuresStyleFn();void 0!==b&&a.setStyle(b);a=this.u.eb();a.rc(this.b);b=this.selectedFeatureStyleFn();if(void 0===b){b=new rd({color:[255,0,0,.6]});var c=new sd({color:[255,0,0,1],width:2});b=new H({fill:b,image:new qd({fill:b,radius:5,
stroke:c}),stroke:c,zIndex:10})}a.setStyle(b);if(a=this.getMapFn)this.i=a()};rA.prototype.km=function(){var a=this;return this.loadedGridSources.map(function(b){return a.gridSources[b]})};rA.prototype.getGridSources=rA.prototype.km;
function sA(a){if(0!==a.ngeoQueryResult.total||tA(a)){a.active=!0;a.pending=!1;var b=a.ngeoQueryResult.sources;0<Object.keys(a.f).length&&(b=uA(a,b));b.forEach(function(b){if(b.tooManyResults)vA(a,null,b);else{var c=b.id;if(!Number.isInteger(c)){var e=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$ |]/g;c=null!==c.match(e)?c.replace(e,"_"):c}b.id=c;0<b.features.length&&wA(a,b)}});0===a.loadedGridSources.length?a.active=!1:null!==a.selectedTab&&""+a.selectedTab in a.gridSources||a.$timeout_(function(){a.ek(a.gridSources[a.loadedGridSources[0]])},
0)}else b=a.active,a.clear(),b&&(a.active=a.ngeoQueryResult.pending,a.pending=a.ngeoQueryResult.pending)}function tA(a){return a.ngeoQueryResult.sources.some(function(a){return a.tooManyResults})}rA.prototype.eo=function(a){return this.selectedTab===a.source.label};rA.prototype.isSelected=rA.prototype.eo;function uA(a,b){var c=[],d={};b.forEach(function(b){null===xA(a,b,d)&&c.push(b)});for(var e in d)c.push(d[e]);return c}
function xA(a,b,c){var d=null,e;for(e in a.f)if(a.f[e].some(function(a){return a==b.label})){d=e;break}if(null===d)return null;if(d in c)var f=c[d];else f={features:[],id:d,label:d,limit:a.maxResults,pending:!1,queried:!0,tooManyResults:!1,totalFeatureCount:void 0},c[d]=f;b.features.forEach(function(a){f.features.push(a)});f.tooManyResults=f.tooManyResults||b.tooManyResults;f.tooManyResults&&(f.totalFeatureCount=void 0!==f.totalFeatureCount?f.totalFeatureCount+f.features.length:f.features.length,
f.features=[]);void 0!==b.totalFeatureCount&&(f.totalFeatureCount=void 0!==f.totalFeatureCount?f.totalFeatureCount+b.totalFeatureCount:b.totalFeatureCount);return f}function wA(a,b){var c=[],d=[],e={},f,g;b.features.forEach(function(a){f=a.Sa();void 0!==f&&(g=a.b,-1===d.indexOf(g)&&d.push(g),c.push(f),e[iA(f)]=a)});yA(a,c,d);0<c.length&&vA(a,c,b)&&(a.j[""+b.label]=e)}
function yA(a,b,c){b.forEach(function(a){c.forEach(function(b){delete a[b]});delete a.boundedBy;delete a.ngeo_feature_type_});!0===a.v&&zA(b)}function zA(a){var b=[],c,d;for(d in a[0])for(c=0;c<a.length;c++)if(void 0!==a[c][d]){b.push(d);break}var e;a.forEach(function(a){e=[];for(d in a)-1===b.indexOf(d)&&e.push(d);e.forEach(function(b){delete a[b]})})}
function vA(a,b,c){var d=""+c.label,e=null;if(null!==b&&(e=AA(b),null===e))return!1;-1==a.loadedGridSources.indexOf(d)&&a.loadedGridSources.push(d);a.gridSources[d]={configuration:e,source:c};return!0}function AA(a){var b={};Object.assign(b,a[0]);delete b.Fj;var c=[];Object.keys(b).forEach(function(a){c.push({name:a})});return 0<c.length?new hA(a,c):null}
rA.prototype.clear=function(){this.pending=this.active=!1;this.gridSources={};this.loadedGridSources=[];this.selectedTab=null;this.tooManyResults=!1;this.g.clear();this.b.clear();this.S.clear();this.j={};this.c&&this.c()};rA.prototype.clear=rA.prototype.clear;
rA.prototype.ek=function(a){var b=this,c=a.source;this.selectedTab=c.label;this.c&&(this.c(),this.c=null);null!==a.configuration&&(this.c=this.o.$watchCollection(function(){return a.configuration.selectedRows},function(a,c){Object.keys(a)!==Object.keys(c)&&null!==b.selectedTab&&BA(b,b.gridSources[""+b.selectedTab])}));BA(this,a);CA(this,c.id)};rA.prototype.selectTab=rA.prototype.ek;
function CA(a,b){var c=a.C.find("div.tab-pane#"+b);c.removeClass("active").addClass("active");a.$timeout_(function(){c.find("div.ngeo-grid-table-container table").trigger("reflow")})}function BA(a,b){a.g.clear();a.b.clear();if(null!==b.configuration){var c=a.j[""+b.source.label];b=b.configuration.selectedRows;for(var d in c){var e=c[d];d in b?a.b.push(e):a.g.push(e)}}}rA.prototype.Mb=function(){return null===this.selectedTab?null:this.gridSources[""+this.selectedTab]};
rA.prototype.getActiveGridSource=rA.prototype.Mb;rA.prototype.co=function(){var a=this.Mb();return null===a||null===a.configuration?!1:0<a.configuration.lg()};rA.prototype.isOneSelected=rA.prototype.co;rA.prototype.vm=function(){var a=this.Mb();return null===a||null===a.configuration?0:a.configuration.lg()};rA.prototype.getSelectedRowCount=rA.prototype.vm;rA.prototype.selectAll=function(){var a=this.Mb();null!==a&&a.configuration.selectAll()};rA.prototype.selectAll=rA.prototype.selectAll;
rA.prototype.Kd=function(){var a=this.Mb();null!==a&&a.configuration.Kd()};rA.prototype.unselectAll=rA.prototype.Kd;rA.prototype.re=function(){var a=this.Mb();null!==a&&a.configuration.re()};rA.prototype.invertSelection=rA.prototype.re;rA.prototype.Ar=function(){if(null!==this.Mb()){var a=ab();this.b.forEach(function(b){mb(a,b.getGeometry().I())});var b=this.i.ra(),c=this.maxRecenterZoom;lj(N(this.i),a,{size:b,maxZoom:c})}};rA.prototype.zoomToSelection=rA.prototype.Ar;
rA.prototype.Bf=function(){var a=this.Mb();if(null!==a){var b=a.configuration.columnDefs;a=a.configuration.ti();this.K.Yg(a,b,this.B)}};rA.prototype.downloadCsv=rA.prototype.Bf;pA.controller("GmfDisplayquerygridController",rA);var DA=angular.module("gmfDrawingFeatureStyle",[Iw.name,mr.name]);ym.requires.push(DA.name);DA.b=function(){return{controller:"GmfFeaturestyleController as fsCtrl",scope:{feature:"=gmfFeaturestyleFeature"},bindToController:!0,templateUrl:"gmf/drawing/featureStyleComponent.html"}};DA.directive("gmfFeaturestyle",DA.b);
function EA(a,b){var c=this;this.J=a;this.c=b;this.measure=this.label=this.color=void 0;a.$watch(function(){return c.color},this.j.bind(this));this.g=[];a.$watch(function(){return c.feature},this.i.bind(this))}EA.$inject=["$scope","ngeoFeatureHelper"];
EA.prototype.i=function(a,b){var c=this.g;b&&(c.forEach(A),c.length=0,this.label=this.measure=this.color=this.type=void 0);a&&("acnbomsk".split("").forEach(function(b){c.push(D(a,Ya(b),this.b,this))},this),b=a.getGeometry(),c.push(D(b,"change",this.f,this)),this.type=this.c.getType(a),this.color=this.c.Vf(a),this.measure=this.c.Lc(a))};EA.prototype.j=function(a){this.feature&&a&&this.feature.get("c")!==a&&this.feature.set("c",a)};EA.prototype.xm=function(a){return FA(this,"a",a)};
EA.prototype.getSetAngle=EA.prototype.xm;EA.prototype.ym=function(a){return FA(this,"n",a)};EA.prototype.getSetName=EA.prototype.ym;EA.prototype.Bm=function(a){return Ym(FA(this,"b",a))};EA.prototype.getSetShowLabel=EA.prototype.Bm;EA.prototype.zm=function(a){return FA(this,"o",a)};EA.prototype.getSetOpacity=EA.prototype.zm;EA.prototype.Cm=function(a){return Ym(FA(this,"m",a))};EA.prototype.getSetShowMeasure=EA.prototype.Cm;EA.prototype.Dm=function(a){return FA(this,"s",a)};
EA.prototype.getSetSize=EA.prototype.Dm;EA.prototype.Em=function(a){return FA(this,"k",a)};EA.prototype.getSetStroke=EA.prototype.Em;function FA(a,b,c){void 0!==c&&a.feature.set(b,c);return a.feature.get(b)}EA.prototype.b=function(){var a=this.feature;a&&this.c.setStyle(a,!0)};EA.prototype.f=function(){this.measure=this.c.Lc(this.feature);this.c.pd(this.feature)&&this.b();this.J.$apply()};DA.controller("GmfFeaturestyleController",EA);function GA(a,b){var c=this;b=void 0!==b?b:{};b.Xc="top-left";this.j=[];this.i=null;var d=$("<div/>",{"class":"panel panel-default"});this.u=void 0!==a.autoClose?a.autoClose:!0;if(a.title){var e=$("<div>",{"class":"panel-heading"}).appendTo(d);$("<span>",{text:a.title}).appendTo(e)}var f=$("<div>",{"class":"list-group"}).appendTo(d);this.o=[];a.actions.forEach(function(a){c.o.push($("<button>",{"class":"list-group-item","data-name":a.name,text:[" ",void 0!==a.label?a.label:a.name].join("")}).appendTo(f).prepend($("<span>",
{"class":void 0!==a.cls?a.cls:""})))});b.element=d[0];Qg.call(this,b)}u(GA,Qg);GA.prototype.setMap=function(a){var b=this;this.getMap()&&(this.j.forEach(A),this.j.length=0);Qg.prototype.setMap.call(this,a);a&&(this.o.forEach(function(a){var c=a.data();b.j.push(D(a[0],"click",b.v.bind(b,c.name)))}),this.j.push(D(a,"pointermove",this.C,this)))};GA.prototype.setMap=GA.prototype.setMap;GA.prototype.open=function(a){this.set(Ug,a);this.u&&(this.i=D(document.documentElement,"mousedown",this.B,this))};
GA.prototype.open=GA.prototype.open;GA.prototype.close=function(){this.set(Ug,void 0);null!==this.i&&A(this.i)};GA.prototype.close=GA.prototype.close;GA.prototype.v=function(a,b){F(this,new kn("actionclick",{action:a}));this.u&&this.close();b.stopPropagation()};GA.prototype.B=function(a){var b=this.get(Rg);b&&0===$(a.target).closest(b).length&&this.close()};GA.prototype.C=function(a){var b=a.originalEvent.target;this.get(Rg).contains(b)&&(a.coordinate=[Infinity,Infinity],a.pixel=[Infinity,Infinity])};var HA=angular.module("ngeoExportfeatures",[mr.name]);S.requires.push(HA.name);HA.b=function(){return{controller:"ngeoExportfeaturesController as efCtrl",scope:!0,bindToController:{features:"=ngeoExportfeaturesFeatures"}}};S.directive("ngeoExportfeatures",HA.b);
function IA(a,b,c,d){var e=this;this.o=a;var f=["ngeo-exportfeature",x(this)].join("-");this.u=f;this.f=d;var g;b.has("ngeoExportFeatureFormats")?g=b.get("ngeoExportFeatureFormats"):g=[kr];this.b=null;this.c=[];if(1<g.length){a.attr("id",f);var h=$("<ul />",{"class":"dropdown-menu","aria-labelledby":f}).appendTo(a.parent()[0]);this.b=h;var k;g.forEach(function(a){k=$("<li />").appendTo(h).append($("<a />",{href:"#",text:a}).on(["click",f].join("."),e.i.bind(e,a)));e.c.push(k)})}this.g=g;a.on(["click",
f].join("."),this.j.bind(this));c.$on("$destroy",this.v.bind(this))}IA.$inject=["$element","$injector","$scope","ngeoFeatureHelper"];IA.prototype.j=function(){var a=this,b=this.features.b;if(1===this.g.length)this.f.Lf(b,this.g[0]);else if(1===b.length){var c=b[0].getGeometry(),d;this.g.forEach(function(b,f){d=a.c[f];b===jr&&(c instanceof Mi||c instanceof ye?d.removeClass("disabled"):d.addClass("disabled"))})}};
IA.prototype.i=function(a,b){$(b.target.parentElement).hasClass("disabled")||this.f.Lf(this.features.b,a)};IA.prototype.v=function(){var a=this.u;this.o.off(["click",a].join("."));this.b&&(this.b.remove(),this.c.forEach(function(b){b.off(["click",a].join("."))},this),this.c.length=0,this.b=null)};HA.controller("ngeoExportfeaturesController",IA);function JA(a,b,c,d,e){var f=this;void 0===this.active&&(this.active=!1);this.ba=c;c.getString("Point");c.getString("LineString");c.getString("Polygon");c.getString("Circle");c.getString("Rectangle");c.getString("Text");this.b=d;this.g=e;this.c=[];a.$watch(function(){return f.active},function(a){!1===a&&f.c.forEach(function(a){a.setActive(!1)},f)})}JA.$inject=["$scope","$sce","gettextCatalog","ngeoFeatureHelper","ngeoFeatures"];
JA.prototype.oc=function(a){this.c.push(a);a.setActive(!1);yu(a);qj(this.map,a)};JA.prototype.registerInteraction=JA.prototype.oc;JA.prototype.hc=function(){this.active=this.c.some(function(a){return a.getActive()},this)};JA.prototype.handleActiveChange=JA.prototype.hc;
JA.prototype.ic=function(a,b){var c;b.feature?c=b.feature:c=b.detail.feature;var d=c.get("azimut");b=this.features||this.g;c=new yd(c.getGeometry());switch(a){case "Circle":c.set("l",!0);void 0!==d&&c.set("z",d);break;case "Text":c.set("t",!0);break;case "Rectangle":c.set("r",!0)}d=this.ba.getString(a);c.set("n",d+" "+(b.get(Lh)+1));c.set("c","Text"!==a?"#DB4436":"#000000");c.set("a",0);c.set("o",.2);c.set("m",this.showMeasure?!0:!1);c.set("b",!1);c.set("s",10);c.set("k",2);this.b.setStyle(c);b.push(c)};
JA.prototype.handleDrawEnd=JA.prototype.ic;var KA=angular.module("ngeoDrawfeatureController",[mv.name,mr.name]);KA.controller("ngeoDrawfeatureController",JA);S.requires.push(KA.name);var LA=angular.module("ngeoDrawpoint",[]);S.requires.push(LA.name);LA.b=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,c,d){a=new Gn({type:"Point"});d.oc(a);d.drawPoint=a;D(a,"drawend",d.ic.bind(d,"Point"),d);D(a,"change:active",d.hc,d)}}};LA.directive("ngeoDrawpoint",LA.b);var MA=angular.module("ngeoDrawrectangle",[]);S.requires.push(MA.name);MA.b=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,c,d){a=new Gn({type:"LineString",em:function(a,b){b||(b=new Ti(null));var c=a[0];a=a[1];b.ha([[c,[c[0],a[1]],a,[a[0],c[1]],c]]);return b},bj:2});d.oc(a);d.drawRectangle=a;D(a,"drawend",d.ic.bind(d,"Rectangle"),d);D(a,"change:active",d.hc,d)}}};MA.directive("ngeoDrawrectangle",MA.b);var NA=angular.module("ngeoDrawtext",[]);S.requires.push(NA.name);NA.b=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,c,d){a=new Gn({type:"Point"});d.oc(a);d.drawText=a;D(a,"drawend",d.ic.bind(d,"Text"),d);D(a,"change:active",d.hc,d)}}};NA.directive("ngeoDrawtext",NA.b);function OA(a,b){b=void 0!==b?b:{};ln.call(this,b);void 0!==b.continueMsg?this.continueMsg=b.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to continue drawing the polygon.",b=document.createElement("br"),b.textContent="Double-click or click starting point to finish.",this.continueMsg.appendChild(b));this.format=a}u(OA,ln);OA.prototype.F=function(a,b){return new Gn({type:"Polygon",source:b,style:a})};
OA.prototype.N=function(a){var b=this.i.getGeometry(),c=N(this.getMap()).b;c=on(b,c,this.precision,this.format);var d=null;3<b.O()[0].length&&(d=(new Mi(b.Kc(),"XYM")).O());a(c,d)};var PA=angular.module("ngeoMeasurearea",[KA.name]);S.requires.push(PA.name);
PA.b=function(a,b,c,d){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,f,g,h){f=b.getString("Click to start drawing polygon");g=b.getString("Click to continue drawing<br/>Double-click or click starting point to finish");e=new OA(c("ngeoUnitPrefix"),{style:new H,startMsg:a("<div translate>"+f+"</div>")(e)[0],continueMsg:a("<div translate>"+g+"</div>")(e)[0],precision:d.has("ngeoMeasurePrecision")?d.get("ngeoMeasurePrecision"):void 0});h.oc(e);h.measureArea=e;D(e,"measureend",h.ic.bind(h,
"Polygon"),h);D(e,"change:active",h.hc,h)}}};PA.b.$inject=["$compile","gettextCatalog","$filter","$injector"];PA.directive("ngeoMeasurearea",PA.b);var QA=angular.module("ngeoMeasureazimut",[KA.name,hn.name]);S.requires.push(QA.name);
QA.b=function(a,b,c,d){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,f,g,h){f=b.getString("Click to start drawing circle");g=b.getString("Click to finish");e=new fo(c("ngeoUnitPrefix"),c("number"),{style:new H,startMsg:a("<div translate>"+f+"</div>")(e)[0],continueMsg:a("<div translate>"+g+"</div>")(e)[0],precision:d.has("ngeoMeasurePrecision")?d.get("ngeoMeasurePrecision"):void 0,hd:d.has("ngeoMeasureDecimals")?d.get("ngeoMeasureDecimals"):void 0});h.oc(e);h.measureAzimut=e;D(e,
"measureend",function(a){var b=a.detail.feature.getGeometry(),c=Gl(b.b)[1];c=Yi(c,64);a.feature=new yd(c);b=ho(Gl(b.b)[0]);a.detail.feature.set("azimut",b);h.ic("Circle",a)},h);D(e,"change:active",h.hc,h)}}};QA.b.$inject=["$compile","gettextCatalog","$filter","$injector"];QA.directive("ngeoMeasureazimut",QA.b);function RA(a,b){b=void 0!==b?b:{};ln.call(this,b);void 0!==b.continueMsg?this.continueMsg=b.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to continue drawing the line.",b=document.createElement("br"),b.textContent="Double-click or click last point to finish.",this.continueMsg.appendChild(b));this.format=a}u(RA,ln);RA.prototype.F=function(a,b){return new Gn({type:"LineString",source:b,style:a})};
RA.prototype.N=function(a){var b=this.i.getGeometry(),c=N(this.getMap()).b;c=pn(b,c,this.precision,this.format);a(c,ae(b))};var SA=angular.module("ngeoMeasurelength",[KA.name,hn.name]);S.requires.push(SA.name);
SA.b=function(a,b,c,d){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,f,g,h){f=b.getString("Click to start drawing line");g=b.getString("Click to continue drawing<br/>Double-click or click last point to finish");e=new RA(c("ngeoUnitPrefix"),{style:new H,startMsg:a("<div translate>"+f+"</div>")(e)[0],continueMsg:a("<div translate>"+g+"</div>")(e)[0],precision:d.has("ngeoMeasurePrecision")?d.get("ngeoMeasurePrecision"):void 0});h.oc(e);h.measureLength=e;D(e,"measureend",h.ic.bind(h,
"LineString"),h);D(e,"change:active",h.hc,h)}}};SA.b.$inject=["$compile","gettextCatalog","$filter","$injector"];SA.directive("ngeoMeasurelength",SA.b);var TA=angular.module("ngeoDrawfeature",[KA.name,LA.name,MA.name,NA.name,PA.name,QA.name,SA.name]);TA.b=function(){return{controller:"ngeoDrawfeatureController as dfCtrl",scope:!0,bindToController:{active:"=ngeoDrawfeatureActive",features:"=?ngeoDrawfeatureFeatures",map:"=ngeoDrawfeatureMap",showMeasure:"=?ngeoDrawfeatureShowmeasure"}}};TA.directive("ngeoDrawfeature",TA.b);function UA(a){Sj.call(this,{Za:VA,mb:WA,handleEvent:XA,ab:YA});this.Na=a.condition?a.condition:Rj;this.za=function(a){var b=a.originalEvent;return b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey&&"singleclick"==a.type};this.Ea=a.zf?a.zf:this.za;this.Fa=a.Vn?a.Vn:xb;this.ua=this.f=null;this.qa=[0,0];this.B=this.F=!1;this.b=new Nl;this.W=void 0!==a.fb?a.fb:10;this.o=this.ia=!1;this.i=[];this.C=new Hh({source:new sm({Yb:!1,wrapX:!!a.wrapX}),style:a.style?a.style:ZA(),Wb:!0,Xb:!0});this.U={Point:this.sp,
LineString:this.tj,LinearRing:this.tj,Polygon:this.tp,MultiPoint:this.qp,MultiLineString:this.pp,MultiPolygon:this.rp,Circle:this.np,GeometryCollection:this.op};this.N=null;a.source?(this.N=a.source,a=new Ih(this.N.fc()),D(this.N,"addfeature",this.Fn,this),D(this.N,"removefeature",this.In,this)):a=a.features;if(!a)throw Error("The modify interaction requires features or a source");this.u=a;this.u.forEach(this.Cg,this);D(this.u,"add",this.lp,this);D(this.u,"remove",this.mp,this);this.G=null}u(UA,Sj);
m=UA.prototype;m.Cg=function(a){var b=a.getGeometry();b&&b.getType()in this.U&&this.U[b.getType()].call(this,a,b);(b=this.getMap())&&b.b&&this.getActive()&&$A(this,this.qa,b);D(a,"change",this.sj,this)};function aB(a,b){a.B||(a.B=!0,F(a,new bB("modifystart",a.u,b)))}function cB(a,b){dB(a,b);a.f&&0===a.u.get(Lh)&&(M(a.C).ma(a.f),a.f=null);La(b,"change",a.sj,a)}function dB(a,b){a=a.b;var c=[];a.forEach(function(a){b===a.feature&&c.push(a)});for(var d=c.length-1;0<=d;--d)a.remove(c[d])}
m.setActive=function(a){this.f&&!a&&(M(this.C).ma(this.f),this.f=null);Sj.prototype.setActive.call(this,a)};m.setMap=function(a){this.C.setMap(a);Sj.prototype.setMap.call(this,a)};m.Fn=function(a){a.feature&&this.u.push(a.feature)};m.In=function(a){a.feature&&this.u.remove(a.feature)};m.lp=function(a){this.Cg(a.element)};m.sj=function(a){this.o||(a=a.target,cB(this,a),this.Cg(a))};m.mp=function(a){cB(this,a.element)};
m.sp=function(a,b){var c=b.O();a={feature:a,geometry:b,X:[c,c]};this.b.insert(b.I(),a)};m.qp=function(a,b){var c=b.O(),d;var e=0;for(d=c.length;e<d;++e){var f=c[e];f={feature:a,geometry:b,depth:[e],index:e,X:[f,f]};this.b.insert(b.I(),f)}};m.tj=function(a,b){var c=b.O(),d;var e=0;for(d=c.length-1;e<d;++e){var f=c.slice(e,e+2);var g={feature:a,geometry:b,index:e,X:f};this.b.insert($a(f),g)}};
m.pp=function(a,b){var c=b.O(),d,e;var f=0;for(e=c.length;f<e;++f){var g=c[f];var h=0;for(d=g.length-1;h<d;++h){var k=g.slice(h,h+2);var l={feature:a,geometry:b,depth:[f],index:h,X:k};this.b.insert($a(k),l)}}};m.tp=function(a,b){var c=b.O(),d,e;var f=0;for(e=c.length;f<e;++f){var g=c[f];var h=0;for(d=g.length-1;h<d;++h){var k=g.slice(h,h+2);var l={feature:a,geometry:b,depth:[f],index:h,X:k};this.b.insert($a(k),l)}}};
m.rp=function(a,b){var c=b.O(),d,e,f;var g=0;for(f=c.length;g<f;++g){var h=c[g];var k=0;for(e=h.length;k<e;++k){var l=h[k];var n=0;for(d=l.length-1;n<d;++n){var p=l.slice(n,n+2);var q={feature:a,geometry:b,depth:[k,g],index:n,X:p};this.b.insert($a(p),q)}}}};m.np=function(a,b){var c=b.getCenter(),d={feature:a,geometry:b,index:0,X:[c,c]};a={feature:a,geometry:b,index:1,X:[c,c]};d.Pf=a.Pf=[d,a];this.b.insert(kb(c),d);this.b.insert(b.I(),a)};
m.op=function(a,b){var c=b.b;for(b=0;b<c.length;++b)this.U[c[b].getType()].call(this,a,c[b])};function eB(a,b){var c=a.f;c?c.getGeometry().ha(b):(c=new yd(new Mi(b)),a.f=c,M(a.C).na(c))}function fB(a,b){return a.index-b.index}
function VA(a){if(!this.Na(a))return!1;$A(this,a.pixel,a.map);var b=a.map.Ca(a.pixel);this.i.length=0;this.B=!1;var c=this.f;if(c){var d=[];c=c.getGeometry().O();var e=$a([c]);e=Ql(this.b,e);var f={};e.sort(fB);for(var g=0,h=e.length;g<h;++g){var k=e[g],l=k.X,n=x(k.feature),p=k.depth;p&&(n+="-"+p.join("-"));f[n]||(f[n]=Array(2));if("Circle"===k.geometry.getType()&&1===k.index)l=gB(b,k),$e(l,c)&&!f[n][0]&&(this.i.push([k,0]),f[n][0]=k);else if($e(l[0],c)&&!f[n][0])this.i.push([k,0]),f[n][0]=k;else if($e(l[1],
c)&&!f[n][1]){if("LineString"!==k.geometry.getType()&&"MultiLineString"!==k.geometry.getType()||!f[n][0]||0!==f[n][0].index)this.i.push([k,1]),f[n][1]=k}else this.Fa(a)&&x(l)in this.ua&&!f[n][0]&&!f[n][1]&&d.push([k,c])}d.length&&aB(this,a);for(a=d.length-1;0<=a;--a)this.Wn.apply(this,d[a])}return!!this.f}
function WA(a){this.F=!1;aB(this,a);a=a.coordinate;for(var b=0,c=this.i.length;b<c;++b){var d=this.i[b],e=d[0],f=e.depth,g=e.geometry,h=e.X;for(d=d[1];a.length<g.H;)a.push(h[d][a.length]);switch(g.getType()){case "Point":var k=a;h[0]=h[1]=a;break;case "MultiPoint":k=g.O();k[e.index]=a;h[0]=h[1]=a;break;case "LineString":k=g.O();k[e.index+d]=a;h[d]=a;break;case "MultiLineString":k=g.O();k[f[0]][e.index+d]=a;h[d]=a;break;case "Polygon":k=g.O();k[f[0]][e.index+d]=a;h[d]=a;break;case "MultiPolygon":k=
g.O();k[f[1]][f[0]][e.index+d]=a;h[d]=a;break;case "Circle":h[0]=h[1]=a,0===e.index?(this.o=!0,g.setCenter(a)):(this.o=!0,g.setRadius(cf(g.getCenter(),a))),this.o=!1}k&&(e=g,f=k,this.o=!0,e.ha(f),this.o=!1)}eB(this,a)}
function YA(a){for(var b,c,d=this.i.length-1;0<=d;--d)if(b=this.i[d][0],c=b.geometry,"Circle"===c.getType()){var e=c.getCenter(),f=b.Pf[0];b=b.Pf[1];f.X[0]=f.X[1]=e;b.X[0]=b.X[1]=e;Ol(this.b,kb(e),f);Ol(this.b,c.I(),b)}else Ol(this.b,$a(b.X),b);this.B&&(F(this,new bB("modifyend",this.u,a)),this.B=!1);return!1}
function XA(a){if(!(a instanceof Th))return!0;this.G=a;0<N(a.map).f[1]||"pointermove"!=a.type||this.v||(this.qa=a.pixel,$A(this,a.pixel,a.map));if(this.f&&this.Ea(a)){if("singleclick"==a.type&&this.F)var b=!0;else if(this.G&&"pointerdrag"!=this.G.type){var c=this.G;aB(this,c);var d=this.i,e={},f,g;for(g=d.length-1;0<=g;--g){var h=d[g];var k=h[0];b=x(k.feature);k.depth&&(b+="-"+k.depth.join("-"));b in e||(e[b]={});0===h[1]?(e[b].right=k,e[b].index=k.index):1==h[1]&&(e[b].left=k,e[b].index=k.index+
1)}for(b in e){var l=e[b].right;var n=e[b].left;g=e[b].index;var p=g-1;k=void 0!==n?n:l;0>p&&(p=0);h=k.geometry;var q=f=h.O();var r=!1;switch(h.getType()){case "MultiLineString":2<f[k.depth[0]].length&&(f[k.depth[0]].splice(g,1),r=!0);break;case "LineString":2<f.length&&(f.splice(g,1),r=!0);break;case "MultiPolygon":q=q[k.depth[1]];case "Polygon":q=q[k.depth[0]],4<q.length&&(g==q.length-1&&(g=0),q.splice(g,1),r=!0,0===g&&(q.pop(),q.push(q[0]),p=q.length-1))}r&&(r=h,this.o=!0,r.ha(f),this.o=!1,f=[],
void 0!==n&&(this.b.remove(n),f.push(n.X[0])),void 0!==l&&(this.b.remove(l),f.push(l.X[1])),void 0!==n&&void 0!==l&&(n={depth:k.depth,feature:k.feature,geometry:k.geometry,index:p,X:f},this.b.insert($a(n.X),n)),hB(this,h,g,k.depth,-1),this.f&&(M(this.C).ma(this.f),this.f=null),d.length=0)}F(this,new bB("modifyend",this.u,c));this.B=!1;b=!0}else b=!1;c=b}"singleclick"==a.type&&(this.F=!1);return Tj.call(this,a)&&!c}
function $A(a,b,c){function d(a,b){return iB(e,a)-iB(e,b)}var e=c.Ca(b),f=cb(kb(e),N(c).V()*a.W);f=Ql(a.b,f);if(0<f.length){f.sort(d);var g=f[0],h=g.X,k=gB(e,g),l=Zg(c,k),n=cf(b,l);if(n<=a.W){b={};if("Circle"===g.geometry.getType()&&1===g.index)a.ia=!0,eB(a,k);else for(n=Zg(c,h[0]),g=Zg(c,h[1]),c=bf(l,n),l=bf(l,g),n=Math.sqrt(Math.min(c,l)),a.ia=n<=a.W,a.ia&&(k=c>l?h[1]:h[0]),eB(a,k),l=1,c=f.length;l<c;++l)if(k=f[l].X,$e(h[0],k[0])&&$e(h[1],k[1])||$e(h[0],k[1])&&$e(h[1],k[0]))b[x(k)]=!0;else break;
b[x(h)]=!0;a.ua=b;return}}a.f&&(M(a.C).ma(a.f),a.f=null)}function iB(a,b){var c=b.geometry;return"Circle"===c.getType()&&1===b.index?(a=bf(c.getCenter(),a),c=Math.sqrt(a)-Math.sqrt(Ye(c)),c*c):df(a,b.X)}function gB(a,b){var c=b.geometry;return"Circle"===c.getType()&&1===b.index?zc(c,a):Ze(a,b.X)}
m.Wn=function(a,b){for(var c=a.X,d=a.feature,e=a.geometry,f=a.depth,g=a.index,h;b.length<e.H;)b.push(0);switch(e.getType()){case "MultiLineString":h=e.O();h[f[0]].splice(g+1,0,b);break;case "Polygon":h=e.O();h[f[0]].splice(g+1,0,b);break;case "MultiPolygon":h=e.O();h[f[1]][f[0]].splice(g+1,0,b);break;case "LineString":h=e.O();h.splice(g+1,0,b);break;default:return}this.o=!0;e.ha(h);this.o=!1;h=this.b;h.remove(a);hB(this,e,g,f,1);a={X:[c[0],b],feature:d,geometry:e,depth:f,index:g};h.insert($a(a.X),
a);this.i.push([a,1]);b={X:[b,c[1]],feature:d,geometry:e,depth:f,index:g+1};h.insert($a(b.X),b);this.i.push([b,0]);this.F=!0};function hB(a,b,c,d,e){Sl(a.b,b.I(),function(a){a.geometry===b&&(void 0===d||void 0===a.depth||Ud(a.depth,d))&&a.index>c&&(a.index+=e)})}function ZA(){var a=xd();return function(){return a.Point}}function bB(a,b,c){Pa.call(this,a);this.features=b;this.mapBrowserEvent=c}u(bB,Pa);function jB(a){Sj.call(this,{Za:kB,mb:lB,handleEvent:mB,ab:nB});this.b=null;this.F=[0,0];this.u=!1;this.B=new Nl;this.o=void 0!==a.fb?a.fb:10;this.G=!1;this.i=null;this.C=new Hh({source:new sm({Yb:!1,wrapX:!!a.wrapX}),style:a.style?a.style:oB(),Wb:!0,Xb:!0});this.f=a.features;this.f.forEach(this.N,this);D(this.f,"add",this.U,this);D(this.f,"remove",this.W,this)}u(jB,Sj);
jB.prototype.N=function(a){if("Polygon"===a.getGeometry().getType()&&a.get("l")){var b=a.getGeometry();pB(this,a,b);(a=this.getMap())&&qB(this,this.F,a)}};function rB(a,b){a=a.B;var c=[];a.forEach(function(a){b===a.feature&&c.push(a)});for(var d=c.length-1;0<=d;--d)a.remove(c[d])}jB.prototype.setMap=function(a){this.C.setMap(a);Sj.prototype.setMap.call(this,a)};jB.prototype.U=function(a){this.N(a.element)};
jB.prototype.W=function(a){rB(this,a.element);this.b&&0===this.f.get(Lh)&&(M(this.C).ma(this.b),this.b=null)};function pB(a,b,c){var d=c.O(),e,f;var g=0;for(f=d.length;g<f;++g){var h=d[g];var k=0;for(e=h.length-1;k<e;++k){var l=h.slice(k,k+2);var n={feature:b,geometry:c,depth:[g],index:k,X:l};a.B.insert($a(l),n)}}}function sB(a,b){var c=a.b;c?c.getGeometry().ha(b):(c=new yd(new Mi(b)),a.b=c,M(a.C).na(c))}function tB(a,b){return a.index-b.index}
function kB(a){qB(this,a.pixel,a.map);this.i=[];this.u=!1;if(a=this.b){a=a.getGeometry().O();var b=$a([a]);b=Ql(this.B,b);var c={};b.sort(tB);for(var d=0,e=b.length;d<e;++d){var f=b[d],g=f.X,h=x(f.feature),k=f.depth;k&&(h+="-"+k.join("-"));c[h]||(c[h]=Array(2));$e(g[0],a)&&!c[h][0]?(this.i.push([f,0]),c[h][0]=f):$e(g[1],a)&&!c[h][1]&&(this.i.push([f,1]),c[h][1]=f)}}return!!this.b}
function lB(a){this.u||(this.u=!0,F(this,new bB("modifystart",this.f,a)));a=a.coordinate;var b=this.i[0][0].geometry,c=tb(b.I()),d=new ye([c,a]);c=new un(c,Ce(d));c=Yi(c,64).O();b.ha(c);b=ho(d);this.f.b[0].set("z",b);sB(this,a)}function nB(a){this.B.clear();pB(this,this.i[0][0].feature,this.i[0][0].geometry);this.u&&(F(this,new bB("modifyend",this.f,a)),this.u=!1);return!1}
function mB(a){if(!(a instanceof Th))return!0;0<N(a.map).f[1]||"pointermove"!=a.type||this.v||(this.F=a.pixel,qB(this,a.pixel,a.map));return Tj.call(this,a)&&!0}
function qB(a,b,c){function d(a,b){return df(e,a.X)-df(e,b.X)}var e=c.Ca(b),f=c.Ca([b[0]-a.o,b[1]+a.o]),g=c.Ca([b[0]+a.o,b[1]-a.o]);f=$a([f,g]);f=Ql(a.B,f);if(0<f.length){f.sort(d);g=f[0].X;var h=Ze(e,g);h=Zg(c,h);if(Math.sqrt(bf(b,h))<=a.o&&(b=Zg(c,g[0]),c=Zg(c,g[1]),b=bf(h,b),c=bf(h,c),a.G=Math.sqrt(Math.min(b,c))<=a.o,a.G)){h=b>c?g[1]:g[0];sB(a,h);x(g);c=1;for(b=f.length;c<b;++c)if(a=f[c].X,$e(g[0],a[0])&&$e(g[1],a[1])||$e(g[0],a[1])&&$e(g[1],a[0]))x(a);else break;return}}a.b&&(M(a.C).ma(a.b),
a.b=null)}function oB(){var a=xd();return function(){return a.Point}};function uB(a){Sj.call(this,{Za:this.Ho,mb:this.Io,ab:this.Lo});this.B=!1;var b=a.style?a.style:ZA();this.i=new Hh({source:new sm({wrapX:!!a.wrapX}),visible:this.getActive(),style:b,Wb:!0,Xb:!0});this.f=a.features;this.u=null;this.o={};this.b=null;D(this.f,"add",this.Jo,this);D(this.f,"remove",this.Ko,this);this.f.forEach(this.ej,this)}u(uB,Sj);m=uB.prototype;m.setActive=function(a){Sj.prototype.setActive.call(this,a);this.i&&Oe(this.i,a)};
m.ej=function(a){var b=a.getGeometry();if(b instanceof Ti){var c=x(a),d=this.o[c];if(!d){var e=M(this.i);for(b=b.O()[0];4<b.length;)b[0][0]<b[1][0]&&b[0][1]<=b[1][1]?b.pop():b.shift();var f=[],g,h;b.forEach(function(b){g=new Mi(b);h=new yd({corner:!0,geometry:g,siblingX:null,siblingY:null,boxFeature:a});f.push(h)},this);d={Dl:f};this.o[c]=d;var k,l;f.forEach(function(a,b){(k=f[b-1])||(k=f[f.length-1]);(l=f[b+1])||(l=f[0]);0===b%2?(a.set("siblingX",l),a.set("siblingY",k)):(a.set("siblingX",k),a.set("siblingY",
l))},this);qm(e,f);e.c()}}};m.setMap=function(a){this.i.setMap(a);Sj.prototype.setMap.call(this,a)};m.Jo=function(a){this.ej(a.element)};m.Ko=function(a){a=x(a.element);for(var b=this.o[a].Dl,c=0;c<b.length;c++)M(this.i).ma(b[c]);this.u=null;b.length=0;delete this.o[a]};m.Ho=function(a){return(a=tj(a.map,a.pixel,function(a){return a.get("siblingX")&&a.get("siblingY")?a:void 0}))?(this.u=a,!0):!1};
m.Io=function(a){if(!this.B){this.B=!0;F(this,new bB("modifystart",this.f,a));var b=this.u.get("siblingX"),c=b.get("siblingY"),d=c.getGeometry().O(),e=Zg(this.getMap(),d);c=c.get("siblingX").getGeometry();var f=c.O();f=Zg(this.getMap(),f);f=[f[0]-e[0],f[1]-e[1]];var g=Math.sqrt(f[0]*f[0]+f[1]*f[1]);f[0]/=g;f[1]/=g;b=b.getGeometry();g=b.O();g=Zg(this.getMap(),g);g=[g[0]-e[0],g[1]-e[1]];var h=Math.sqrt(g[0]*g[0]+g[1]*g[1]);g[0]/=h;g[1]/=h;isNaN(f[0])&&isNaN(g[0])?(f=[0,1],g=[1,0]):isNaN(f[0])?f=[g[1],
-g[0]]:isNaN(g[0])&&(g=[f[1],-f[0]]);this.b={Rp:d,Sp:e,Rq:c,Sq:b,rr:f,sr:g}}d=this.u;e=d.getGeometry();if(e instanceof Mi){e.ha(a.coordinate);b=a.pixel;g=this.b.Sp;h=this.b.Rq;e=this.b.Sq;var k=this.b.sr;c=this.b.Rp;f=vB(g,b,this.b.rr);f=this.getMap().Ca(f);h.ha(f);b=vB(g,b,k);b=this.getMap().Ca(b);e.ha(b);d.get("boxFeature").getGeometry().ha([[a.coordinate,f,c,b,a.coordinate]])}};function vB(a,b,c){b=[b[0]-a[0],b[1]-a[1]];b=b[0]*c[0]+b[1]*c[1];c=[c[0]*b,c[1]*b];return[c[0]+a[0],c[1]+a[1]]}
m.Lo=function(a){this.B&&(F(this,new bB("modifyend",this.f,a)),this.b=null,this.B=!1);return!1};function wB(a){this.f=a.features;this.u=[];this.b=[];this.i=new Ih;this.b.push(new UA({zf:Om,features:this.i,fb:a.fb,style:a.style,wrapX:a.wrapX}));this.j=new Ih;this.b.push(new jB({features:this.j,fb:a.fb,style:a.style,wrapX:a.wrapX}));this.o=new Ih;this.b.push(new uB({features:this.o,fb:a.fb,style:a.style,wrapX:a.wrapX}));Ej.call(this,{handleEvent:xb})}u(wB,Ej);m=wB.prototype;m.setActive=function(a){Ej.prototype.setActive.call(this,a);xB(this)};
m.setMap=function(a){var b=this.b,c=this.getMap();c&&b.forEach(function(a){c.xa.remove(a)},this);Ej.prototype.setMap.call(this,a);a&&b.forEach(function(b){qj(a,b)},this);xB(this)};function xB(a){var b=a.getMap(),c=a.getActive(),d=a.u;a.b.forEach(function(a){a.setActive(c&&!!b)},a);c&&b?(a.f.forEach(a.fj,a),d.push(D(a.f,"add",a.Mo,a),D(a.f,"remove",a.No,a))):(d.forEach(A),d.length=0,a.f.forEach(a.gj,a))}m.Mo=function(a){this.fj(a.element)};m.No=function(a){this.gj(a.element)};
m.fj=function(a){yB(this,a).push(a)};m.gj=function(a){yB(this,a).remove(a)};function yB(a,b){var c=b.get("l");b=b.get("r");return!0===c||"true"===c?a.j:!0===b||"true"===b?a.o:a.i};function zB(a){this.F=[];this.B=!1;this.u=null;this.b=a.features;this.C=this.f=this.i=null;var b=a.style?a.style:ZA();this.G=new Hh({source:new sm({Yb:!1,wrapX:!!a.wrapX}),style:b,Wb:!0,Xb:!0});this.o={};Sj.call(this,{Za:this.Oo,mb:this.Po,ab:this.To})}u(zB,Sj);m=zB.prototype;
m.setActive=function(a){this.u&&(A(this.u),this.u=null);Sj.prototype.setActive.call(this,a);a?(this.u=D(document,"keyup",this.So,this),this.b.forEach(this.hj,this),this.F.push(D(this.b,"add",this.Qo,this),D(this.b,"remove",this.Ro,this))):(this.F.forEach(A),this.F.length=0,this.b.forEach(this.ij,this))};m.hj=function(a){var b=a.getGeometry();a.set("angle",0);a=x(a);b=new Mi(AB(b));b=new yd(b);this.o[a]=b;M(this.G).na(b)};
m.ij=function(a){this.i=null;a&&(a=x(a),this.o[a]&&(M(this.G).ma(this.o[a]),delete this.o[a]))};m.setMap=function(a){this.G.setMap(a);Sj.prototype.setMap.call(this,a)};m.Qo=function(a){this.hj(a.element)};m.Ro=function(a){this.ij(a.element)};m.Oo=function(a){var b=tj(a.map,a.pixel,function(a){return a},void 0);if(b){var c=!1;this.b.forEach(function(a){x(a)==x(b)&&(c=!0)});c||(b=null)}return b?(this.f=a.coordinate,this.i=b,a=this.i.getGeometry(),void 0!==a&&(this.C=AB(a)),!0):!1};
function AB(a){a instanceof ye?a=a.ag():a instanceof Ti?a=a.Kc():(a=a.I(),a=tb(a));return a}m.Po=function(a){this.B||(this.B=!0,F(this,new bB("modifystart",this.b,a)));var b=this.i.getGeometry(),c=this.C[0],d=this.C[1],e=this.f[0]-c,f=this.f[1]-d,g=a.coordinate[0]-c,h=a.coordinate[1]-d;this.f[0]=a.coordinate[0];this.f[1]=a.coordinate[1];b.rotate(-(Math.atan2(f,e)-Math.atan2(h,g)),[c,d])};m.To=function(){this.B&&(F(this,new kn("rotateend",{feature:this.i})),this.B=!1,this.setActive(!1));return!1};
m.So=function(a){27===a.keyCode&&this.setActive(!1)};function BB(a){Sj.call(this,{Za:CB,mb:DB,Ni:EB,ab:FB});a=a?a:{};this.b=null;this.i=void 0!==a.features?a.features:null;if(a.layers)if("function"===typeof a.layers)var b=a.layers;else{var c=a.layers;b=function(a){return Pd(c,a)}}else b=xb;this.U=b;this.N=a.Pb?a.Pb:0;this.f=null;D(this,Ya("active"),this.G,this)}u(BB,Sj);
function CB(a){this.f=GB(this,a.pixel,a.map);if(!this.b&&this.f){this.b=a.coordinate;EB.call(this,a);var b=this.i||new Ih([this.f]);F(this,new HB("translatestart",b,a.coordinate));return!0}return!1}function FB(a){if(this.b){this.b=null;EB.call(this,a);var b=this.i||new Ih([this.f]);F(this,new HB("translateend",b,a.coordinate));return!0}return!1}
function DB(a){if(this.b){a=a.coordinate;var b=a[0]-this.b[0],c=a[1]-this.b[1],d=this.i||new Ih([this.f]);d.forEach(function(a){var d=a.getGeometry();d.translate(b,c);a.setGeometry(d)});this.b=a;F(this,new HB("translating",d,a))}}function EB(a){var b=a.map.pa;GB(this,a.pixel,a.map)?(b.classList.remove(this.b?"ol-grab":"ol-grabbing"),b.classList.add(this.b?"ol-grabbing":"ol-grab")):b.classList.remove("ol-grab","ol-grabbing")}
function GB(a,b,c){return tj(c,b,function(a){if(!this.i||Pd(this.i.b,a))return a}.bind(a),{Ui:a.U,Pb:a.N})}BB.prototype.setMap=function(a){var b=this.getMap();Sj.prototype.setMap.call(this,a);IB(this,b)};BB.prototype.G=function(){IB(this,null)};function IB(a,b){var c=a.getMap();a=a.getActive();c&&a||(c=c||b)&&c.pa.classList.remove("ol-grab","ol-grabbing")}function HB(a,b,c){Pa.call(this,a);this.features=b;this.coordinate=c}u(HB,Pa);function JB(a){this.ia=[];this.u={};this.B=null;this.W=void 0!==a.features?a.features:null;this.C=new sm({Yb:!1});this.F=new Hh({source:this.C,style:a.style,Wb:!0,Xb:!0});this.o={};BB.call(this,a)}u(JB,BB);m=JB.prototype;m.setActive=function(a){this.B&&(A(this.B),this.B=null);BB.prototype.setActive.call(this,a);a&&(this.B=D(document,"keyup",this.Xo,this));KB(this)};m.setMap=function(a){this.getMap()&&this.F.setMap(null);BB.prototype.setMap.call(this,a);a&&this.F.setMap(a);KB(this)};
function KB(a){var b=a.getMap(),c=a.getActive(),d=a.W,e=a.ia;b&&c&&d?(d.forEach(a.jj,a),e.push(D(d,"add",a.Uo,a),D(d,"remove",a.Vo,a))):(b&&(Xg(b).style.cursor="default"),e.forEach(A),e.length=0,d.forEach(a.kj,a))}m.Uo=function(a){this.jj(a.element)};m.Vo=function(a){this.kj(a.element)};m.jj=function(a){var b=x(a),c=a.getGeometry();this.u[b]=D(c,"change",this.Wo.bind(this,a),this);a=LB(c);a=new yd(a);this.o[b]=a;this.C.na(a)};
m.kj=function(a){a=x(a);this.u[a]&&(A(this.u[a]),delete this.u[a],this.C.ma(this.o[a]),delete this.o[a])};m.Wo=function(a,b){b=LB(b.target);a=x(a);this.o[a].setGeometry(b)};function LB(a){if(a instanceof Ti)var b=new Mi(a.Kc(),"XYM");else if(a instanceof ye)var c=Be(a);else a=a.I(),c=tb(a);!b&&c&&(b=new Mi(c));return b}m.Xo=function(a){27===a.keyCode&&this.setActive(!1)};var MB=angular.module("GmfDrawFeatureComponent",[DA.name,HA.name,Rm.name,TA.name,mr.name,Qz.name]);ym.requires.push(MB.name);MB.c=function(){return{controller:"GmfDrawfeatureController as efCtrl",scope:{active:"=gmfDrawfeatureActive",map:"<gmfDrawfeatureMap",showMeasure:"=?gmfDrawfeatureShowmeasure"},bindToController:!0,templateUrl:"gmf/drawing/drawFeatureComponent.html"}};MB.directive("gmfDrawfeature",MB.c);
function NB(a,b,c,d,e,f){var g=this;void 0===this.active&&(this.active=!1);this.drawActive=!1;this.drawToolActivate=new Oz(this,"drawActive");this.mapSelectActive=!0;this.u=null;this.mapSelectToolActivate=new Oz(this,"mapSelectActive");this.J=a;this.C=b;this.i=d;this.features=e;this.B=f;this.selectedFeature=null;this.selectedFeatures=new Ih;this.b=new Ih;this.g=new wB({features:this.selectedFeatures,style:d.Qc(!1)});this.b.push(this.g);this.c=null;this.modifyToolActivate=new Oz(this.g,"active");this.j=
new JB({features:this.selectedFeatures,style:new H({text:new ep({text:"\uf047",font:"normal 18px FontAwesome",fill:new rd({color:"#7a7a7a"})})})});this.b.push(this.j);this.f=new zB({features:this.selectedFeatures,style:new H({text:new ep({text:"\uf01e",font:"normal 18px FontAwesome",fill:new rd({color:"#7a7a7a"})})})});this.b.push(this.f);OB(this);this.rotateToolActivate=new Oz(this.f,"active");this.translateToolActivate=new Oz(this.j,"active");this.v=[];this.o=!1;a.$watch(function(){return g.active},
this.K.bind(this));a.$watch(function(){return g.drawActive},function(a){a&&(g.selectedFeature=null)});a.$watch(function(){return g.selectedFeature},function(a,b){g.selectedFeatures.clear();b&&(g.i.setStyle(b),PB(g));a?(g.i.setStyle(a,!0),g.selectedFeatures.push(a),QB(g),g.o&&(g.i.Ij(a,g.map),g.o=!1)):g.c&&(g.map.Ha.remove(g.c),g.c=null)});a.$watch(function(){return g.mapSelectActive},this.Nm.bind(this));this.nameProperty="n";this.ba=c}NB.$inject="$scope $timeout gettextCatalog ngeoFeatureHelper ngeoFeatures ngeoToolActivateMgr".split(" ");
function OB(a){a.b.forEach(function(a){a.setActive(!1);yu(a)})}function QB(a){a.b.forEach(function(a){qj(this.map,a)},a)}function PB(a){a.b.forEach(function(a){this.map.xa.remove(a)},a)}
NB.prototype.K=function(a){var b=this.v,c=["draw-",x(this)].join("-"),d=["other-",x(this)].join("-"),e=this.B;a?(b.push(D(this.features,"add",this.Lm,this),D(this.features,"remove",this.Mm,this)),b.push(D(this.j,"translateend",this.Qm,this)),b.push(D(this.f,"rotateend",this.Pm,this)),e.ta(c,this.drawToolActivate,!1),e.ta(c,this.mapSelectToolActivate,!0),e.ta(d,this.drawToolActivate,!1),e.ta(d,this.modifyToolActivate,!0),e.ta(d,this.translateToolActivate,!1),e.ta(d,this.rotateToolActivate,!1),this.mapSelectActive=
!0,this.g.setActive(!0)):(b.forEach(A),b.length=0,e.Ma(c,this.drawToolActivate),e.Ma(c,this.mapSelectToolActivate),e.Ma(d,this.drawToolActivate),e.Ma(d,this.modifyToolActivate),e.Ma(d,this.translateToolActivate),e.Ma(d,this.rotateToolActivate),this.drawActive=!1,this.g.setActive(!1),this.mapSelectActive=!1,this.selectedFeature=null,this.c&&(this.map.Ha.remove(this.c),this.c=null))};NB.prototype.Iq=function(a){this.o=!0;this.selectedFeature=a;this.drawActive=!1};
NB.prototype.selectFeatureFromList=NB.prototype.Iq;NB.prototype.gm=function(){return this.features.b};NB.prototype.getFeaturesArray=NB.prototype.gm;NB.prototype.xl=function(){var a=this.ba.getString("Do you really want to delete all the features?");confirm(a)&&this.features.clear()};NB.prototype.clearFeatures=NB.prototype.xl;NB.prototype.ma=function(a){var b=this.ba.getString("Do you really want to delete the selected feature?");confirm(b)&&this.features.remove(a)};NB.prototype.removeFeature=NB.prototype.ma;
m=NB.prototype;m.Lm=function(a){var b=this;this.C(function(){b.selectedFeature=a.element;b.drawActive=!1;b.J.$apply()})};m.Mm=function(){this.selectedFeature=null};
m.Nm=function(a){var b=this.map.pa;a?(D(this.map,"click",this.vi,this),D(b,"contextmenu",this.qg,this),D(b,"touchstart",this.Mi,this),D(b,"touchmove",this.qe,this),D(b,"touchend",this.qe,this)):(La(this.map,"click",this.vi,this),La(b,"contextmenu",this.qg,this),La(b,"touchstart",this.Mi,this),La(b,"touchmove",this.qe,this),La(b,"touchend",this.qe,this))};
m.vi=function(a){var b=this;a=(a=tj(this.map,a.pixel,function(a){var c=!1;Pd(b.features.b,a)&&(c=a);return c},{Pb:5}))?a:null;a!==this.selectedFeature&&(this.selectedFeature=a,this.J.$apply())};m.Mi=function(a){var b=this;this.u=setTimeout(function(){b.qg(a)},500)};m.qe=function(){clearTimeout(this.u)};
m.qg=function(a){var b=this,c=this.ba,d=Rh(this.map,a),e=this.map.Ca(d);if(d=(d=tj(this.map,d,function(a){var c=!1;Pd(b.features.b,a)&&(c=a);return c},{Pb:7}))?d:null){var f=[],g=this.i.getType(d);if("Circle"==g||"LineString"==g||"Polygon"==g||"Rectangle"==g)f=f.concat([{cls:"fa fa-arrows",label:c.getString("Move"),name:"move"},{cls:"fa fa-rotate-right",label:c.getString("Rotate"),name:"rotate"}]);f=f.concat([{cls:"fa fa-trash-o",label:c.getString("Delete"),name:"delete"}]);this.c=new GA({actions:f});
D(this.c,"actionclick",this.Om,this);this.map.Ha.push(this.c);this.c.open(e);a.preventDefault();a.stopPropagation()}d!==this.selectedFeature&&(this.g.setActive(!0),this.selectedFeature=d,this.J.$apply())};m.Om=function(a){a=a.detail.action;switch(a){case "delete":this.ma(this.selectedFeature);this.J.$apply();break;case "move":this.j.setActive(!0);this.J.$apply();break;case "rotate":this.f.setActive(!0);this.J.$apply();break;default:console.log("FIXME - support: "+a)}};
m.Qm=function(){this.j.setActive(!1);this.J.$apply()};m.Pm=function(){this.f.setActive(!1);this.J.$apply()};MB.controller("GmfDrawfeatureController",NB);function RB(a,b){this.b=a;this.c=b}RB.$inject=["$http","gmfLayersUrl"];RB.prototype.Yf=function(a,b){a=xh(this.c+"/"+a.join(","),{bbox:b.join(",")});return this.b.get(a).then(this.g.bind(this))};RB.prototype.getFeaturesInExtent=RB.prototype.Yf;RB.prototype.g=function(a){return(new Uw).gb(a.data)};RB.prototype.Si=function(a,b){a=this.c+"/"+a;b=(new Uw).Md(b);return this.b.post(a,b,{headers:{"Content-Type":"application/json"},withCredentials:!0})};RB.prototype.insertFeatures=RB.prototype.Si;
RB.prototype.yk=function(a,b){a=this.c+"/"+a.toString()+"/"+b.f;b=(new Uw).hh(b);return this.b.put(a,b,{headers:{"Content-Type":"application/json"},withCredentials:!0})};RB.prototype.updateFeature=RB.prototype.yk;RB.prototype.Vh=function(a,b){return this.b.delete(this.c+"/"+a.toString()+"/"+b.f,{headers:{"Content-Type":"application/json"},withCredentials:!0})};RB.prototype.deleteFeature=RB.prototype.Vh;var SB=angular.module("gmfEditFeature",[]);SB.service("gmfEditFeature",RB);ym.requires.push(SB.name);function TB(){}u(TB,ot);TB.prototype.b=function(a){return ot.prototype.b.call(this,a)};TB.prototype.g=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};
TB.prototype.c=function(a){var b=a.getElementsByTagName("element");b.length||(b=a.getElementsByTagName("xsd:element"));a=[];for(var c,d=0,e=b.length;d<e;d++){c=b[d];var f=c.getAttribute("name"),g=c.getAttribute("alias"),h=c.getAttribute("nillable");f={name:f,alias:g,required:!(!0===h||"true"===h)};if(g=c.getAttribute("type"))Lx(f,g)||UB(f,g);else if(g=c.getElementsByTagName("enumeration"),g.length||(g=c.getElementsByTagName("xsd:enumeration")),g.length){f.type="select";c=[];h=0;for(var k=g.length;h<
k;h++)c.push(g[h].getAttribute("value"));f.choices=c}else g=c.getElementsByTagName("restriction"),g.length||(g=c.getElementsByTagName("xsd:restriction")),g.length&&g[0]&&(UB(f,g[0].getAttribute("base")),g=c.getElementsByTagName("maxLength"),g.length||(g=c.getElementsByTagName("xsd:maxLength")),g.length&&g[0]&&(f.maxLength=Number(g[0].getAttribute("value"))));(c=f.type?f:null)&&a.push(c)}return a};
function UB(a,b){"xsd:boolean"===b?a.type="boolean":"xsd:date"===b?a.type="date":"xsd:dateTime"===b?a.type="datetime":"xsd:time"===b?a.type="time":"xsd:decimal"===b?(a.type="number",a.numType=VB):"xsd:integer"===b?(a.type="number",a.numType=WB):"xsd:string"===b&&(a.type="text")}var VB="float",WB="integer";va("ngeo.format.XSDAttribute.NumberType",{FLOAT:VB,INTEGER:WB});function XB(a,b){this.g=a;this.b=b;this.c={}}XB.$inject=["$http","gmfLayersUrl"];XB.prototype.kd=function(a){this.c[a]||(this.c[a]=this.g.get(this.b+"/"+a+"/md.xsd").then(this.Ki.bind(this)));return this.c[a]};XB.prototype.getAttributes=XB.prototype.kd;XB.prototype.Ki=function(a){return(new TB).b(a.data)};XB.prototype.handleGetAttributes_=XB.prototype.Ki;var YB=angular.module("gmfXSDAttributes",[]);YB.service("gmfXSDAttributes",XB);ym.requires.push(YB.name);var ZB=angular.module("ngeoDateTimePicker",["gettext"]);ZB.c=function(){return{restrict:"A",controller:$B,bindToController:!0,scope:{options:"<ngeoDatetimepickerOptions"}}};ZB.directive("ngeoDatetimepicker",ZB.c);function $B(a,b){this.c=a;this.ba=b}$B.$inject=["$element","gettextCatalog"];$B.prototype.$onInit=function(){var a=this.ba.getCurrentLanguage();$.datetimepicker.setLocale(a);"string"===typeof this.options&&(this.options=angular.fromJson(this.options));this.c.datetimepicker(this.options)};
ZB.controller("ngeoDateTimePickerController",$B);var aC=angular.module("ngeoAttributes",[gn.name]);S.requires.push(aC.name);aC.c={controller:"ngeoAttributesController as attrCtrl",bindings:{attributes:"=ngeoAttributesAttributes",disabled:"<ngeoAttributesDisabled",feature:"=ngeoAttributesFeature"},require:{form:"^"},templateUrl:function(){return"ngeo/editing/attributescomponent.html"}};aC.component("ngeoAttributes",aC.c);function bC(a,b){this.disabled=!1;this.J=a;this.b=b;this.c=!1}bC.$inject=["$scope","ngeoEventHelper"];
bC.prototype.$onInit=function(){this.properties=this.feature.Sa();var a=x(this);this.b.Jb(a,D(this.feature,"propertychange",this.g,this))};bC.prototype.hn=function(a){this.c=!0;this.feature.set(a,this.properties[a]);this.c=!1};bC.prototype.handleInputChange=bC.prototype.hn;bC.prototype.$onDestroy=function(){var a=x(this);this.b.Ec(a)};bC.prototype.g=function(a){this.c||(this.properties[a.key]=a.target.get(a.key),this.J.$apply())};aC.controller("ngeoAttributesController",bC);var cC=angular.module("ngeoCreatefeature",[gn.name,hn.name]);S.requires.push(cC.name);cC.b=function(){return{controller:"ngeoCreatefeatureController",bindToController:!0,scope:{active:"=ngeoCreatefeatureActive",features:"=ngeoCreatefeatureFeatures",geomType:"=ngeoCreatefeatureGeomType",map:"=ngeoCreatefeatureMap"}}};cC.directive("ngeoCreatefeature",cC.b);
function dC(a,b,c,d,e,f){var g=this;this.ba=a;this.c=b;this.f=c;this.J=d;this.j=e;this.g=f;d.$watch(function(){return g.active},function(a){g.b.setActive(a)})}dC.$inject="gettextCatalog $compile $filter $scope $timeout ngeoEventHelper".split(" ");
dC.prototype.$onInit=function(){this.active=!0===this.active;var a=this.ba;if("Point"===this.geomType||"MultiPoint"===this.geomType)var b=new Gn({type:"Point"});else if("LineString"===this.geomType||"MultiLineString"===this.geomType)b=a.getString("Click to start drawing length"),a=a.getString("Click to continue drawing<br/>Double-click or click last point to finish"),b=new RA(this.f("ngeoUnitPrefix"),{style:new H,startMsg:this.c("<div translate>"+b+"</div>")(this.J)[0],continueMsg:this.c("<div translate>"+
a+"</div>")(this.J)[0]});else if("Polygon"===this.geomType||"MultiPolygon"===this.geomType)b=a.getString("Click to start drawing area"),a=a.getString("Click to continue drawing<br/>Double-click or click starting point to finish"),b=new OA(this.f("ngeoUnitPrefix"),{style:new H,startMsg:this.c("<div translate>"+b+"</div>")(this.J)[0],continueMsg:this.c("<div translate>"+a+"</div>")(this.J)[0]});b.setActive(this.active);this.b=b;qj(this.map,b);a=x(this);b instanceof Gn?this.g.Jb(a,D(b,"drawend",this.sg,
this)):(b instanceof RA||b instanceof OA)&&this.g.Jb(a,D(b,"measureend",this.sg,this))};
dC.prototype.sg=function(a){var b;a.feature?b=a.feature:b=a.detail.feature;a=b.getGeometry();b=a.getType();if(this.geomType.indexOf("Multi")!=b.indexOf("Multi")){var c=a;if(c instanceof Mi)b=a=new Am([]),b.D?Rd(b.D,c.D):b.D=c.D.slice(),b.c();else if(c instanceof ye)b=a=new Cm([]),b.D?Rd(b.D,c.D.slice()):b.D=c.D.slice(),b.b.push(b.D.length),b.c();else if(c instanceof Ti){b=a=new Gm([]);if(b.D){var d=b.D.length;Rd(b.D,c.D);c=c.Wa().slice();var e;var f=0;for(e=c.length;f<e;++f)c[f]+=d}else b.D=c.D.slice(),
c=c.Wa().slice(),b.f.push();b.f.push(c);b.c()}else a=c}a=new yd(a);this.features instanceof Ih?this.features.push(a):this.features.na(a)};dC.prototype.handleDrawEnd_=dC.prototype.sg;dC.prototype.$onDestroy=function(){var a=this;this.j(function(){var b=x(a);a.g.Ec(b);a.b.setActive(!1);a.map.xa.remove(a.b)},0)};cC.controller("ngeoCreatefeatureController",dC);var eC=angular.module("GmfEditingFeatureComponent",[SB.name,Fz.name,YB.name,aC.name,cC.name,bu.name,yx.name,Rm.name,gn.name,mr.name,Qz.name]);ym.requires.push(eC.name);eC.c=function(){return{controller:"GmfEditfeatureController as efCtrl",scope:{dirty:"=gmfEditfeatureDirty",editableTreeCtrl:"=gmfEditfeatureEditabletreectrl",map:"<gmfEditfeatureMap",state:"=gmfEditfeatureState",tolerance:"<?gmfEditfeatureTolerance",vectorLayer:"<gmfEditfeatureVector"},bindToController:!0,templateUrl:"gmf/editing/editFeatureComponent.html"}};
eC.directive("gmfEditfeature",eC.c);
function fC(a,b,c,d,e,f,g,h,k,l,n,p){var q=this;this.G=a;this.T=b;this.J=c;this.u=d;this.ba=e;this.i=f;this.C=g;this.F=h;this.K=k;this.S=l;this.N=p;this.c=null;this.pending=this.unsavedModificationsModalShown=!1;this.active=!0;this.createActive=!1;this.createToolActivate=new Oz(this,"createActive");this.mapSelectActive=!0;this.mapSelectToolActivate=new Oz(this,"mapSelectActive");this.feature=null;this.J.$watch(function(){return q.feature},this.xi.bind(this));this.featureId=void 0;this.b=new Ih;this.o=
new GA({actions:[{cls:"fa fa-arrows",label:e.getString("Move"),name:"move"},{cls:"fa fa-rotate-right",label:e.getString("Rotate"),name:"rotate"}]});this.Y=[];this.attributes=null;this.showServerError=!1;this.serverErrorType=this.serverErrorMessage=null}fC.$inject="$element $q $scope $timeout gettextCatalog gmfEditFeature gmfSnapping gmfXSDAttributes ngeoEventHelper ngeoFeatureHelper ngeoLayerHelper ngeoToolActivateMgr".split(" ");
fC.prototype.$onInit=function(){var a=this;this.dirty=!0===this.dirty;this.g=this.editableTreeCtrl.node;this.features=M(this.vectorLayer).o;this.tolerance=void 0!==this.tolerance?this.tolerance:10;this.B=hw(this.editableTreeCtrl);this.v=new UA({zf:Om,features:this.features,style:this.S.Qc(!1)});this.b.push(this.v);this.f=new zB({features:this.features,style:new H({text:new ep({text:"\uf01e",font:"normal 18px FontAwesome",fill:new rd({color:"#7a7a7a"})})})});this.b.push(this.f);this.j=new JB({features:this.features,
style:new H({text:new ep({text:"\uf047",font:"normal 18px FontAwesome",fill:new rd({color:"#7a7a7a"})})})});this.b.push(this.j);gC(this);this.modifyToolActivate=new Oz(this.v,"active");this.rotateToolActivate=new Oz(this.f,"active");this.translateToolActivate=new Oz(this.j,"active");this.map.Ha.push(this.o);this.J.$watch(function(){return a.createActive},function(b){b&&a.C.Kf()});this.J.$on("$destroy",this.Sm.bind(this));var b=x(this);this.K.Jb(b,D(this.features,"add",this.Tm,this));this.J.$watch(function(){return a.mapSelectActive},
this.Ci.bind(this));this.J.$watch(function(){return a.state},function(b){var c=hC;b===c.fl?a.sf().then(function(){a.state=c.el}):b===c.Sk&&a.sf().then(function(){a.state=c.Rk})});this.J.$watch(function(){return a.unsavedModificationsModalShown},function(b,d){d&&!b&&(a.state=iC)});this.F.kd(this.g.id).then(this.Jq.bind(this));jC(this,!0)};
fC.prototype.save=function(){var a=this,b=this.feature.clone();Bd(b,this.feature.f);var c=this.featureId;this.pending=!0;for(var d=new DateFormatter,e=t(this.attributes),f=e.next();!f.done;f=e.next())if(f=f.value,f.format)if(this.feature.get(f.name)){var g=this.feature.get(f.name);g=d.parseDate(g,f.format);var h="Y-m-d\\TH:i:s";"date"===f.type?h="Y-m-d":"time"===f.type?h="H:i:s":"datetime"===f.type&&g.setMinutes(g.getMinutes()+g.getTimezoneOffset());b.set(f.name,d.formatDate(g,h))}else b.set(f.name,
null);(c?this.i.yk(this.g.id,b):this.i.Si(this.g.id,[b])).then(function(b){a.dirty=!1;a.pending=!1;b=(new Uw).gb(b.data);b.length&&(Bd(a.feature,b[0].f),au(a.B));a.c&&a.c.resolve()},function(b){a.showServerError=!0;a.pending=!1;a.serverErrorType="error type : "+b.data.error_type;a.serverErrorMessage="error message : "+b.data.message})};fC.prototype.save=fC.prototype.save;
fC.prototype.cancel=function(){this.dirty=!1;this.feature=null;this.features.clear();this.o.close();this.unsavedModificationsModalShown=!1};fC.prototype.cancel=fC.prototype.cancel;fC.prototype.sf=function(){var a=this;return kC(this).then(function(){a.cancel()})};fC.prototype.confirmCancel=fC.prototype.sf;function kC(a,b){a.c=a.T.defer();a.feature&&a.dirty?(a.unsavedModificationsModalShown=!0,b&&a.J.$apply()):a.c.resolve();return a.c.promise}fC.prototype.Cl=function(){this.cancel();this.c.resolve()};
fC.prototype.continueWithoutSaving=fC.prototype.Cl;fC.prototype.delete=function(){var a=this,b=this.ba.getString("Do you really want to delete the selected feature?");confirm(b)&&(this.pending=!0,this.i.Vh(this.g.id,this.feature).then(function(){a.dirty=!1;a.pending=!1;au(a.B);a.cancel()},function(b){a.showServerError=!0;a.pending=!1;a.serverErrorType="error type : "+b.data.error_type;a.serverErrorMessage="error message : "+b.data.message}))};fC.prototype["delete"]=fC.prototype.delete;
fC.prototype.submit=function(){var a=this;this.u(function(){a.G.find('input[type="submit"]').click()},0)};fC.prototype.submit=fC.prototype.submit;m=fC.prototype;
m.Jq=function(a){this.attributes=a;a=t(a);for(var b=a.next();!b.done;b=a.next())b=b.value,"date"==b.type?(b.format="Y-m-d",b.mask="9999-19-39"):"time"==b.type?(b.format="H:i",b.mask="29:59"):"datetime"==b.type&&(b.format="Y-m-d H:i",b.mask="9999-19-39 29:59");a=this.attributes;b=null;for(var c=0,d=a.length;c<d;c++)if("geometry"===a[c].type){b=a[c];break}(a=b)&&a.geomType&&(this.geomType=a.geomType)};
m.Tm=function(a){var b=this;this.feature=null;this.u(function(){for(var c=a.element,d=new DateFormatter,e=t(b.attributes),f=e.next();!f.done;f=e.next())if(f=f.value,f.format)if(c.get(f.name)){if("datetime"===f.type){var g=new Date(c.get(f.name));g.setMinutes(g.getMinutes()-g.getTimezoneOffset())}else{g="";"date"===f.type?g="Y-m-d":"time"===f.type&&(g="H:i:s");var h=c.get(f.name);g=d.parseDate(h,g)}c.set(f.name,d.formatDate(g,f.format))}else c.set(f.name,null);b.feature=c;b.createActive=!1;c.f||(b.dirty=
!0);b.J.$apply()},0)};
function jC(a,b){var c=a.Y,d=["create-",x(a)].join("-"),e=["other-",x(a)].join("-"),f=a.N;b?(c.push(D(a.o,"actionclick",a.Vm,a)),c.push(D(a.j,"translateend",a.Xm,a)),c.push(D(a.f,"rotateend",a.Wm,a)),f.ta(d,a.createToolActivate,!1),f.ta(d,a.mapSelectToolActivate,!0),f.ta(e,a.createToolActivate,!1),f.ta(e,a.modifyToolActivate,!0),f.ta(e,a.translateToolActivate,!1),f.ta(e,a.rotateToolActivate,!1)):(c.forEach(A),c.length=0,f.Ma(d,a.createToolActivate),f.Ma(d,a.mapSelectToolActivate),f.Ma(e,a.createToolActivate),
f.Ma(e,a.modifyToolActivate),f.Ma(e,a.translateToolActivate),f.Ma(e,a.rotateToolActivate),a.createActive=!1,a.cancel());a.v.setActive(b);a.mapSelectActive=b;a.editableTreeCtrl.properties.editing=b}m.Ci=function(a){var b=this.map.pa;a?(D(this.map,"click",this.Ai,this),D(b,"contextmenu",this.Bi,this)):(La(this.map,"click",this.Ai,this),La(b,"contextmenu",this.Bi,this))};
m.Ai=function(a){var b=this,c=a.coordinate;tj(this.map,a.pixel,function(a){var c=!1;Pd(b.features.b,a)&&(c=a);return c},{Pb:5})||kC(this,!0).then(function(){var a=N(b.map).V()*b.tolerance;a=cb([c[0],c[1],c[0],c[1]],a);b.i.Yf([b.g.id],a).then(b.Um.bind(b));b.cancel();b.pending=!0})};
m.Bi=function(a){var b=this,c=Rh(this.map,a),d=this.map.Ca(c);if(c=(c=tj(this.map,c,function(a){var c=!1;Pd(b.features.b,a)&&(c=a);return c},{Pb:7}))?c:null)c=this.S.getType(c),"Polygon"!==c&&"MultiPolygon"!==c&&"LineString"!==c&&"MultiLineString"!==c||this.o.open(d),a.preventDefault(),a.stopPropagation()};m.Um=function(a){var b=this;this.pending=!1;this.u(function(){if(a.length){var c=a[0];b.feature=c;b.features.push(c)}},0)};function gC(a){a.b.forEach(function(a){a.setActive(!1);yu(a)})}
function lC(a){a.b.forEach(function(a){qj(this.map,a)},a)}function mC(a){a.b.forEach(function(a){this.map.xa.remove(a)},a)}m.xi=function(a,b){var c=this;b&&(La(b,"propertychange",this.zi,this),b=b.getGeometry(),La(b,"change",this.yi,this),mC(this));a?(this.featureId=a.f,D(a,"propertychange",this.zi,this),b=a.getGeometry(),D(b,"change",this.yi,this),lC(this),this.C.Kf(),this.featureId&&this.u(function(){c.dirty=!1;c.J.$apply()},0)):this.featureId=void 0};m.zi=function(){this.dirty=!0};
m.yi=function(){this.dirty=!0;this.J.$apply()};m.Vm=function(a){switch(a.detail.action){case "move":this.j.setActive(!0);this.J.$apply();break;case "rotate":this.f.setActive(!0),this.J.$apply()}};m.Xm=function(){this.j.setActive(!1);this.J.$apply()};m.Wm=function(){this.f.setActive(!1);this.J.$apply()};m.Sm=function(){this.features.clear();this.xi(null,this.feature);this.feature=null;var a=x(this);this.K.Ec(a);jC(this,!1);this.Ci(!1);mC(this)};eC.controller("GmfEditfeatureController",fC);
var iC="idle",hC={IDLE:iC,Rk:"deactivate_execute",Sk:"deactivate_pending",el:"stop_editing_execute",fl:"stop_editing_pending"};var nC=angular.module("GmfEditingFeatureSelectorComponent",[eC.name,gv.name,xu.name]);ym.requires.push(nC.name);nC.c=function(){return{controller:"GmfEditfeatureselectorController as efsCtrl",scope:{active:"=gmfEditfeatureselectorActive",map:"<gmfEditfeatureselectorMap",tolerance:"<?gmfEditfeatureselectorTolerance",vectorLayer:"<gmfEditfeatureselectorVector"},bindToController:!0,templateUrl:"gmf/editing/editFeatureSelectorComponent.html"}};nC.directive("gmfEditfeatureselector",nC.c);
function oC(a,b,c,d){var e=this;this.active=!0===this.active;a.$watch(function(){return e.active},this.c.bind(this));this.J=a;this.$timeout_=b;this.aa=d;this.g=a.$watchCollection(function(){if(d.rootCtrl)return d.rootCtrl.children},function(a){var b=this;this.$timeout_(function(){if(a){var c=b.editableTreeCtrls;c.length=0;b.aa.rootCtrl.La(function(a){a.node.editable&&c.push(a)})}},0)}.bind(this));this.dirty=!1;this.editableTreeCtrls=[];this.selectedEditableTreeCtrl=null;a.$watch(function(){return e.selectedEditableTreeCtrl},
function(){e.dirty=!1;e.state=iC});this.state=iC;a.$watch(function(){return e.state},function(a){if("stop_editing_execute"===a||"deactivate_execute"===a)e.selectedEditableTreeCtrl=null;"deactivate_execute"===a&&(e.active=!1)});a.$on("$destroy",this.b.bind(this))}oC.$inject=["$scope","$timeout","gmfThemes","gmfTreeManager"];oC.prototype.pk=function(){this.state="stop_editing_pending"};oC.prototype.stopEditing=oC.prototype.pk;
oC.prototype.c=function(a){var b=this;!a&&this.dirty&&this.$timeout_(function(){b.active=!0;b.pk()})};oC.prototype.b=function(){this.g()};nC.controller("GmfEditfeatureselectorController",oC);function pC(a,b){this.g=a;this.b=b;this.c={}}function qC(a,b,c){var d=b.id+"_"+c;b=b.name;a.c[d]||(a.c[d]=a.g.get(a.b+"/"+b+"/values/"+c).then(a.Ji.bind(a)));return a.c[d]}pC.prototype.Ji=function(a){return a.data.items};pC.prototype.handleGetAttributeValues_=pC.prototype.Ji;pC.$inject=["$http","gmfLayersUrl"];var rC=angular.module("gmfEnumerateAttribute",[]);rC.service("gmfEnumerateAttribute",pC);ym.requires.push(rC.name);function sC(a,b,c){this.b=a;this.g=b;this.c=c}sC.prototype.ub=function(a){return this.c.ub(a)};sC.prototype.getDataSource=sC.prototype.ub;
sC.prototype.Mj=function(a){var b=this,c=this.b.defer();this.c.Wf(a).then(function(d){var e=(a.gmfLayer.metadata||{}).enumeratedAttributes;if(e&&e.length){var f=[],g={};d=t(d);for(var h=d.next();!h.done;g={Ab:g.Ab},h=d.next())g.Ab=h.value,!Pd(e,g.Ab.name)||"select"===g.Ab.type||g.Ab.choices&&g.Ab.choices.length||f.push(qC(b.g,a,g.Ab.name).then(function(a){return function(b){b=b.map(function(a){return a.value});a.Ab.type="select";a.Ab.choices=b}}(g)));return b.b.all(f).then(c.resolve(a))}c.resolve(a)});
return c.promise};sC.prototype.prepareFiltrableDataSource=sC.prototype.Mj;aa.Object.defineProperties(sC.prototype,{collection:{configurable:!0,enumerable:!0,get:function(){return this.c.collection}}});sC.$inject=["$q","gmfEnumerateAttribute","ngeoDataSourcesHelper"];var tC=angular.module("gmfDataSourcesHelper",[rC.name]);tC.service("gmfDataSourcesHelper",sC);ym.requires.push(tC.name);function uC(a){var b=this;this.j=a;this.b=null;this.g=[];this.c=!0;try{"localStorage"in window?(window.localStorage.test="",delete window.localStorage.test):this.c=!1}catch(c){console.error(c),this.c=!1}this.f=[];this.j.$watchCollection(function(){return b.items},function(){vC(b)});this.c&&window.localStorage.gmf_savedfilters&&(this.f=JSON.parse(window.localStorage.gmf_savedfilters))}
uC.prototype.wg=function(a,b){for(var c,d=-1,e=0,f=this.f.length;e<f;e++)if(c=this.items[e],c.dataSourceId===b&&c.name===a){d=e;break}return d};uC.prototype.indexOfItem=uC.prototype.wg;uC.prototype.save=function(a){var b=this.wg(a.name,a.dataSourceId);-1!==b?this.items[b]=a:this.items.push(a);this.c&&wC(this)};uC.prototype.save=uC.prototype.save;uC.prototype.remove=function(a){Sd(this.items,a)&&this.c&&wC(this)};uC.prototype.remove=uC.prototype.remove;
function wC(a){window.localStorage.gmf_savedfilters=JSON.stringify(a.items)}function vC(a){a.g.length=0;if(null!==a.b)for(var b=t(a.items),c=b.next();!c.done;c=b.next())c=c.value,c.dataSourceId===a.b&&a.g.push(c)}aa.Object.defineProperties(uC.prototype,{currentDataSourceItems:{configurable:!0,enumerable:!0,get:function(){return this.g}},currentDataSourceId:{configurable:!0,enumerable:!0,set:function(a){this.b=a;vC(this)}},items:{configurable:!0,enumerable:!0,get:function(){return this.f}}});
uC.$inject=["$rootScope"];var xC=angular.module("gmfSavedFilters",[]);ym.requires.push(xC.name);xC.service("gmfSavedFilters",uC);va("gmf.filters.SavedFilters.Item",function(){});var yC=angular.module("ngeoRule",[TA.name,Xx.name,Fw.name,bn.name,mr.name]);S.requires.push(yC.name);
function zC(a,b,c,d,e,f){this.ba=a;this.J=b;this.F=c;this.g=d;this.u=e;this.v=f;b={};this.operators=(b["="]=a.getString("Is equal to"),b[">"]=a.getString("Is greater than"),b[">="]=a.getString("Is greater than or equal to"),b["<"]=a.getString("Is lesser than"),b["<="]=a.getString("Is lesser than or equal to"),b["!="]=a.getString("Is not equal to"),b["~"]=a.getString("Contains"),b.contains=a.getString("Contains"),b.intersects=a.getString("Intersects"),b.within=a.getString("Is inside of"),b[">="]=a.getString("Begins at"),
b[Px]=a.getString("During"),b["<="]=a.getString("Ends at"),b["="]=a.getString("Is equal to"),b);this.timeRangeMode={widget:"datepicker",maxValue:AC(),minValue:AC(6048E5),maxDefValue:null,minDefValue:null,mode:"range",interval:[0,1,0,0]};this.timeValueMode={widget:"datepicker",maxValue:AC(),minValue:AC(),maxDefValue:null,minDefValue:null,mode:"value",interval:[0,1,0,0]};this.c=[];this.drawActive=!1;this.drawToolActivate=new Oz(this,"drawActive");this.drawnFeatures=new Ih;this.b=null;this.selectedFeatures=
new Ih;this.f=new Ih;this.o=new wB({features:this.selectedFeatures,style:d.Qc(!1)});this.f.push(this.o);this.j=new zB({features:this.selectedFeatures,style:new H({text:new ep({text:"\uf01e",font:"normal 18px FontAwesome",fill:new rd({color:"#7a7a7a"})})})});this.f.push(this.j);this.i=new JB({features:this.selectedFeatures,style:new H({text:new ep({text:"\uf047",font:"normal 18px FontAwesome",fill:new rd({color:"#7a7a7a"})})})});this.f.push(this.i);this.S=[];BC(this);this.modifyToolActivate=new Oz(this.o,
"active");this.rotateToolActivate=new Oz(this.j,"active");this.translateToolActivate=new Oz(this.i,"active");this.geomType=null}
zC.prototype.$onInit=function(){var a=this;this.clone=this.u.Hh(this.rule);this.K=new Oz(this.rule,"active");this.v.ta(this.toolGroup,this.K);this.J.$watch(function(){return a.rule.active},this.B.bind(this));"date"===this.clone.type||"datetime"===this.clone.type?(this.c.push(this.J.$watch(function(){return a.clone.getExpression()},function(b){b=null===b?AC():b;a.timeValueMode.minValue=b})),this.c.push(this.J.$watch(function(){return a.clone.lowerBoundary},function(b){b=null===b?AC(6048E5):b;a.timeRangeMode.minValue=
b})),this.c.push(this.J.$watch(function(){return a.clone.upperBoundary},function(b){b=null===b?AC():b;a.timeRangeMode.maxValue=b}))):"geometry"===this.clone.type&&(this.c.push(this.J.$watch(function(){return a.clone.operator},function(b){b&&"contains"===b&&(b=a.clone,b.feature.getGeometry()&&(b=a.g.getType(b.feature),Pd(["Circle","Polygon","Rectangle"],b)||a.clone.setExpression(null)))})),this.c.push(this.J.$watch(function(){return a.clone.expression},function(b){b?a.geomType=a.g.getType(a.clone.feature):
a.geomType=null})),this.c.push(this.J.$watch(function(){var b=null!==a.clone.getExpression(),c=!0===a.rule.active,d=a.o.getActive()||a.j.getActive()||a.i.getActive();return b&&c&&d},function(b){b?a.selectedFeatures.push(a.clone.feature):a.selectedFeatures.clear()})))};zC.prototype.$onDestroy=function(){this.rule.active&&(this.rule.active=!1,this.B(!1,!0));this.v.Ma(this.toolGroup,this.K);for(var a=0,b=this.c.length;a<b;a++)this.c[a]();this.c.length=0;this.clone.destroy()};
zC.prototype.toggle=function(){this.rule.active?this.cancel():this.rule.active=!0};zC.prototype.toggle=zC.prototype.toggle;zC.prototype.apply=function(){this.u.Nf(this.clone,this.rule);this.rule.active=!1};zC.prototype.apply=zC.prototype.apply;zC.prototype.cancel=function(){this.u.Nf(this.rule,this.clone);this.rule.active=!1};zC.prototype.cancel=zC.prototype.cancel;zC.prototype.reset=function(){this.clone.reset();this.rule.reset()};zC.prototype.reset=zC.prototype.reset;
zC.prototype.er=function(a){var b=this.clone,c=b.getExpression()?b.getExpression().split(","):[],d=c.indexOf(a);-1<d?c.splice(d,1):c.push(a);b.setExpression(c.length?c.join(","):null)};zC.prototype.toggleChoiceSelection=zC.prototype.er;zC.prototype.onDateSelected=function(a){this.clone.setExpression(a.start)};zC.prototype.onDateSelected=zC.prototype.onDateSelected;zC.prototype.Mp=function(a){this.clone.lowerBoundary=a.start;this.clone.upperBoundary=a.end};zC.prototype.onDateRangeSelected=zC.prototype.Mp;
function AC(a){var b=new Date;void 0!==a&&b.setTime(b.getTime()-a);return b.toISOString()}zC.prototype.cr=function(a){return(new Date(a)).toLocaleDateString()};zC.prototype.timeToDate=zC.prototype.cr;
zC.prototype.B=function(a,b){if(this.rule instanceof Rx&&this.clone instanceof Rx&&a!==b){b=this.S;var c=["ngeo-rule-",x(this)].join("-"),d=this.v,e=this.rule.feature,f=this.clone.feature,g=this.map.pa;a?(b.push(D(this.drawnFeatures,"add",this.G,this)),b.push(D(g,"contextmenu",this.Y,this)),b.push(D(this.i,"translateend",this.T,this)),b.push(D(this.j,"rotateend",this.N,this)),this.featureOverlay.ma(e),this.featureOverlay.na(f),CC(this),d.ta(c,this.drawToolActivate,!1),d.ta(c,this.modifyToolActivate,
!0),d.ta(c,this.rotateToolActivate,!1),d.ta(c,this.translateToolActivate,!1),this.o.setActive(!0),f.getGeometry()&&this.g.setStyle(f,!0)):(f.setStyle(null),Ua(b),this.drawActive=!1,d.Ma(c,this.drawToolActivate),d.Ma(c,this.modifyToolActivate),d.Ma(c,this.rotateToolActivate),d.Ma(c,this.translateToolActivate),this.o.setActive(!1),DC(this),this.selectedFeatures.get(Lh)&&this.featureOverlay.ma(f),this.featureOverlay.na(e),this.selectedFeatures.clear())}};
function BC(a){a.f.forEach(function(a){a.setActive(!1);yu(a)})}function CC(a){a.f.forEach(function(b){qj(a.map,b)})}function DC(a){a.f.forEach(function(b){a.map.xa.remove(b)})}zC.prototype.G=function(a){var b=this;this.F(function(){var c=b.clone,d=c.feature,e=a.element,f=e.getGeometry();c.geometry=f;b.drawActive=!1;c=b.g.nd(e);b.g.nf(d);Wa(d,c);b.g.setStyle(d,!0);b.J.$apply()})};zC.prototype.um=function(){return this.g.getType(this.rule.feature)};zC.prototype.getRuleGeometryType=zC.prototype.um;
zC.prototype.Y=function(a){var b=this;this.b&&(La(this.b,"actionclick",this.C,this),this.map.Ha.remove(this.b),this.b=null);var c=Rh(this.map,a),d=this.map.Ca(c),e=tj(this.map,c,function(a){var c=!1;Pd(b.selectedFeatures.b,a)&&(c=a);return c});e=e?e:null;c=[];if(e){e=this.g.getType(e);var f=this.ba;"Circle"!=e&&"LineString"!=e&&"Polygon"!=e&&"Rectangle"!=e||c.push({cls:"fa fa-arrows",label:f.getString("Move"),name:"move"});"LineString"!=e&&"Polygon"!=e&&"Rectangle"!=e||c.push({cls:"fa fa-rotate-right",
label:f.getString("Rotate"),name:"rotate"})}c.length&&(this.b=new GA({actions:c}),D(this.b,"actionclick",this.C,this),this.map.Ha.push(this.b),this.b.open(d),a.preventDefault(),a.stopPropagation(),this.J.$apply())};zC.prototype.C=function(a){a=a.detail.action;switch(a){case "move":this.i.setActive(!0);this.J.$apply();break;case "rotate":this.j.setActive(!0);this.J.$apply();break;default:console.log("FIXME - support: "+a)}};zC.prototype.N=function(){this.j.setActive(!1);this.J.$apply()};
zC.prototype.T=function(){this.i.setActive(!1);this.J.$apply()};zC.$inject="gettextCatalog $scope $timeout ngeoFeatureHelper ngeoRuleHelper ngeoToolActivateMgr".split(" ");yC.component("ngeoRule",{bindings:{featureOverlay:"<",map:"<",rule:"<",toolGroup:"<"},controller:zC,templateUrl:function(){return"ngeo/filter/rulecomponent.html"}});var EC=angular.module("ngeoFilter",[Xx.name,yC.name]);S.requires.push(EC.name);EC.component("ngeoFilter",{bindings:{aRuleIsActive:"=",customRules:"<",datasource:"<",directedRules:"<",featureOverlay:"<",map:"<",toolGroup:"<"},controller:"ngeoFilterController",templateUrl:function(){return"ngeo/filter/component.html"}});
function FC(a,b,c,d,e){this.ba=a;this.J=b;this.c=c;this.g=d;this.f=e;this.conditions=[{text:a.getString("All"),value:"&&"},{text:a.getString("At least one"),value:"||"},{text:a.getString("None"),value:"!"}];this.geometryAttributes=[];this.otherAttributes=[];this.b={}}
FC.prototype.$onInit=function(){var a=this;this.J.$watch(function(){return a.aRuleIsActive},this.j.bind(this));for(var b=t(this.datasource.attributes),c=b.next();!c.done;c=b.next())c=c.value,"geometry"===c.type?this.geometryAttributes.push(c):this.otherAttributes.push(c);b=[].concat(this.customRules,this.directedRules);b=t(b);for(c=b.next();!c.done;c=b.next())this.Qg(c.value);this.apply()};FC.prototype.$onDestroy=function(){null!==this.datasource.filterRules&&(this.datasource.filterRules=null);this.featureOverlay.clear()};
FC.prototype.apply=function(){var a=this;this.datasource.filterRules=null;this.c(function(){var b=GC(a);b.length&&(a.datasource.filterRules=b,a.g.clear())})};FC.prototype.apply=FC.prototype.apply;FC.prototype.getData=function(){var a=GC(this);if(a.length){var b=this.datasource,c=this.map,d=N(c).b.c;a=this.f.fd({dataSource:b,filterRules:a,srsName:d});this.g.Qb({dataSources:[b],filter:a,limit:1E3,map:c})}};FC.prototype.getData=FC.prototype.getData;
function GC(a){var b=[];a=[].concat(a.customRules,a.directedRules);a=t(a);for(var c=a.next();!c.done;c=a.next())c=c.value,c.value&&b.push(c);return b}FC.prototype.El=function(a){var b=this.f.fe(a,!0);this.Qg(b);this.customRules.push(b);this.c(function(){b.active=!0},1)};FC.prototype.createAndAddCustomRule=FC.prototype.El;FC.prototype.Kq=function(a){this.datasource.filterCondition!==a.value&&(this.datasource.filterCondition=a.value)};FC.prototype.setCondition=FC.prototype.Kq;
FC.prototype.xq=function(a){var b=this;a.active=!1;this.c(function(){Sd(b.customRules,a);b.xk(a);a.destroy()})};FC.prototype.removeCustomRule=FC.prototype.xq;FC.prototype.Qg=function(a){var b=x(a);this.b[b]=this.J.$watch(function(){return a.active},this.i.bind(this));a instanceof Rx&&this.featureOverlay.na(a.feature)};FC.prototype.registerRule_=FC.prototype.Qg;FC.prototype.xk=function(a){var b=x(a);(0,this.b[b])();delete this.b[b];a instanceof Rx&&this.featureOverlay.ma(a.feature)};
FC.prototype.unregisterRule_=FC.prototype.xk;FC.prototype.i=function(){var a=!1,b=[].concat(this.customRules,this.directedRules);b=t(b);for(var c=b.next();!c.done;c=b.next())if(c.value.active){a=!0;break}this.aRuleIsActive=a};FC.prototype.j=function(){if(!this.aRuleIsActive){var a=[].concat(this.customRules,this.directedRules);a=t(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.active){b.active=!1;break}}};FC.$inject=["gettextCatalog","$scope","$timeout","ngeoMapQuerent","ngeoRuleHelper"];
EC.controller("ngeoFilterController",FC);var HC=angular.module("gmfFilterselector",[xx.name,wr.name,tC.name,Hw.name,Nu.name,yx.name,Xx.name,EC.name,xC.name]);ym.requires.push(HC.name);
function IC(a,b,c,d,e,f,g,h,k,l){var n=this;a.$watch(function(){return n.active},this.Ym.bind(this));this.i=b;this.ba=c;this.gmfDataSourceBeingFiltered=d;a.$watch(function(){return n.gmfDataSourceBeingFiltered.dataSource},this.Dn.bind(this));this.o=e;this.gmfSavedFilters=f;a.$watchCollection(function(){return n.gmfSavedFilters.currentDataSourceItems},function(){0===n.gmfSavedFilters.currentDataSourceItems.length&&n.saveFilterManageModalShown&&(n.saveFilterManageModalShown=!1)});this.gmfUser_=g;a.$watch(function(){return n.gmfUser_.functionalities},
this.gn.bind(this));this.v=h;this.featureOverlay=k.eb();this.c=l;this.aRuleIsActive=!1;this.directedRules=this.customRules=null;this.filtrableDataSources=[];this.b=null;this.f=e.collection;this.u=[];this.readyDataSource=null;this.j={};this.saveFilterSaveModalShown=!1;a.$watch(function(){return n.saveFilterSaveModalShown},function(){n.saveFilterName=""});this.saveFilterName="";this.enableDataSourceRegistration_=this.saveFilterManageModalShown=!1;a.$watch(function(){return n.enableDataSourceRegistration_},
this.en.bind(this));JC(this)}m=IC.prototype;m.gn=function(){var a=this.gmfUser_.functionalities;a&&a.filterable_layers?this.b=a.filterable_layers:this.b=null;a&&a.preset_layer_filter&&a.preset_layer_filter[0]?this.g=a.preset_layer_filter[0]:this.g=void 0;JC(this)};function JC(a){var b=!!a.b;a.enableDataSourceRegistration_!==b&&(a.enableDataSourceRegistration_=b)}m.Ym=function(a){var b=this;a||(this.aRuleIsActive=!1,this.i(function(){b.gmfDataSourceBeingFiltered.dataSource=null}))};
m.en=function(a){var b=this.u;a?(b.push(D(this.f,"add",this.Zm,this),D(this.f,"remove",this.an,this)),this.f.forEach(this.Di,this)):(Ua(b),b.length=0,this.filtrableDataSources.length=0)};m.Zm=function(a){a=a.element;a instanceof Kx&&this.Di(a)};m.an=function(a){a=a.element;a instanceof Kx&&a.filtrable&&(Sd(this.filtrableDataSources,a),this.gmfDataSourceBeingFiltered.dataSource===a&&(this.gmfDataSourceBeingFiltered.dataSource=null))};
m.Di=function(a){if(null===a.filtrable){var b=this.ba,c=[];if(Pd(this.b,a.name)){a.supportsWFS||c.push(b.getString("The data source doesn't support WFS, which is required to fetch the attributes to build the filter rules."));a.ogcLayers&&a.ogcLayers.length?a.ogcLayers[0].queryable||c.push(b.getString("The ogcLayer within the data source must be queryable.")):c.push(b.getString("The data source must have only 1 ogcLayer defined."));var d=!c.length;if(!d){var e=b.getString("The following data source is marked as being filtrable,\n          but is missing some requirements: "),
f=a.name+" ("+a.id+").";b=b.getString("Please, contact your administrator about this.\n          Here are the reasons: ");c.unshift(e+" "+f+" "+b);console.warn(c.join(" "));this.v.notify({msg:c.join(" "),type:Lu})}}else d=!1;a.filtrable=d}a.filtrable&&(this.filtrableDataSources.push(a),void 0!==this.g&&a.name===this.g&&(this.gmfDataSourceBeingFiltered.dataSource=a))};
m.Dn=function(a){var b=this;this.aRuleIsActive=!1;this.readyDataSource=this.directedRules=this.customRules=null;this.gmfSavedFilters.currentDataSourceId=null;a&&(this.active||(this.active=!0),this.o.Mj(a).then(function(a){var c=b.j[a.id]||null;if(!c&&(c={customRules:[],directedRules:[]},b.j[a.id]=c,a.gmfLayer.metadata&&a.gmfLayer.metadata.directedFilterAttributes&&a.gmfLayer.metadata.directedFilterAttributes.length))for(var e=a.gmfLayer.metadata.directedFilterAttributes,f=t(a.attributes),g=f.next();!g.done;g=
f.next())g=g.value,Pd(e,g.name)&&c.directedRules.push(b.c.fe(g));b.customRules=c.customRules;b.directedRules=c.directedRules;b.readyDataSource=a;b.gmfSavedFilters.currentDataSourceId=a.id}))};m.Hq=function(){this.saveFilterSaveModalShown=!0};IC.prototype.saveFilterShowModal=IC.prototype.Hq;
IC.prototype.Gq=function(){var a=this.saveFilterName,b=this.readyDataSource,c=b.id,d=-1!==this.gmfSavedFilters.wg(a,c);b=b.filterCondition;var e=this.ba.getString("A filter with the same name already exists.\n      Do you want to overwrite it?");if(!d||confirm(e))d=this.customRules?this.c.Vg(this.customRules):[],e=this.directedRules?this.c.Vg(this.directedRules):[],this.gmfSavedFilters.save({condition:b,customRules:d,dataSourceId:c,directedRules:e,name:a}),this.saveFilterSaveModalShown=!1};
IC.prototype.saveFilterSave=IC.prototype.Gq;IC.prototype.Dq=function(a){var b=this,c=this.readyDataSource;this.directedRules=this.customRules=null;var d=this.c.vf(a.customRules),e=this.c.vf(a.directedRules);this.i(function(){b.customRules=d;b.directedRules=e;c.filterCondition=a.condition;var f=b.j[c.id]||null;f.customRules=d;f.directedRules=e})};IC.prototype.saveFilterLoadItem=IC.prototype.Dq;IC.prototype.Eq=function(){this.saveFilterManageModalShown=!0};IC.prototype.saveFilterManage=IC.prototype.Eq;
IC.prototype.Fq=function(a){this.gmfSavedFilters.remove(a)};IC.prototype.saveFilterRemoveItem=IC.prototype.Fq;IC.$inject="$scope $timeout gettextCatalog gmfDataSourceBeingFiltered gmfDataSourcesHelper gmfSavedFilters gmfUser ngeoNotification ngeoFeatureOverlayMgr ngeoRuleHelper".split(" ");HC.component("gmfFilterselector",{bindings:{active:"=",map:"<",toolGroup:"<"},controller:IC,templateUrl:function(){return"gmf/filters/filterselectorcomponent.html"}});function KC(a){a=a?a:{};var b=document.createElement("DIV");b.className=void 0!==a.className?a.className:"ol-mouse-position";ah.call(this,{element:b,render:a.render?a.render:LC,target:a.target});D(this,Ya(MC),this.Bn,this);a.Ih&&this.set(NC,a.Ih);a.projection&&this.Gb(a.projection);this.o=void 0!==a.vk?a.vk:"";this.i=b.innerHTML;this.j=this.f=this.b=null}u(KC,ah);function LC(a){a=a.frameState;a?this.b!=a.da.projection&&(this.b=a.da.projection,this.f=null):this.b=null;OC(this,this.j)}m=KC.prototype;
m.Bn=function(){this.f=null};m.qn=function(a){this.j=Rh(this.getMap(),a);OC(this,this.j)};m.rn=function(){OC(this,null);this.j=null};m.setMap=function(a){ah.prototype.setMap.call(this,a);a&&(a=a.pa,this.u.push(D(a,"mousemove",this.qn,this),D(a,"mouseout",this.rn,this)))};m.Gb=function(a){this.set(MC,fc(a))};function OC(a,b){var c=a.o;if(b&&a.b){if(!a.f){var d=a.get(MC);a.f=d?gc(a.b,d):oc}if(b=a.getMap().Ca(b))a.f(b,b),c=(c=a.get(NC))?c(b):b.toString()}a.i&&c==a.i||(a.element.innerHTML=c,a.i=c)}
var MC="projection",NC="coordinateFormat";var PC=angular.module("gmfMapMouseposition",[S.name,hn.name]);ym.requires.push(PC.name);PC.c={controller:"gmfMousepositionController as ctrl",bindings:{map:"<gmfMousepositionMap",projections:"<gmfMousepositionProjections"},templateUrl:function(){return"gmf/map/mousepositionComponent.html"}};PC.component("gmfMouseposition",PC.c);function QC(a,b,c,d){this.g=c;this.ba=d;this.b=a;this.$filter_=b;this.c=null}QC.$inject=["$element","$filter","$scope","gettextCatalog"];
QC.prototype.$onInit=function(){var a=this;this.g.$on("gettextLanguageChanged",function(){RC(a)});RC(this)};function RC(a){null!==a.c&&a.map.controls.remove(a.c);var b=a.ba;a.c=new KC({className:"gmf-mouseposition-control",Ih:function(a){var b=this.projection.filter.split(":"),c=this.$filter_(b.shift());b.unshift(a);return c.apply(this,b)}.bind(a),target:angular.element(".gmf-mouseposition-control-target",a.b)[0],vk:b.getString("Coordinates")});a.Gb(a.projections[0]);a.map.controls.push(a.c)}
QC.prototype.Gb=function(a){this.c.Gb(fc(a.code));this.projection=a};QC.prototype.setProjection=QC.prototype.Gb;PC.controller("gmfMousepositionController",QC);function SC(){this.c=new Uw}var TC={LineString:"LineString",Point:"Point",Polygon:"Polygon",MultiLineString:"LineString",MultiPoint:"Point",MultiPolygon:"Polygon"};function UC(a,b){b=b.va();null!==b&&(b=Cc(b),a.fillColor=Lm(b),a.fillOpacity=b[3])}function VC(a,b){var c=b.va();null!==c&&(c=Cc(c),a.strokeColor=Lm(c),a.strokeOpacity=c[3]);c=b.g;null!==c&&(a.strokeDashstyle=c.join(" "));c=b.c;void 0!==c&&(a.strokeWidth=c);b.f&&(a.strokeLinecap=b.f)};function WC(a,b,c){this.c=a;this.b=b;this.f=c;this.j=new SC;this.g=!0}WC.prototype.cancel=function(a,b){return this.b["delete"](this.c+"/cancel/"+a,void 0!==b?b:{})};WC.prototype.cancel=WC.prototype.cancel;WC.prototype.Qh=function(a,b,c,d,e,f){c={dpi:c,rotation:f.rotation};XC(this,a,b,c);a={map:c};z(a,f);return{attributes:a,format:e,layout:d}};WC.prototype.createSpec=WC.prototype.Qh;
function XC(a,b,c,d){var e=N(b),f=e.getCenter(),g=e.b,h=e.V();e=d.rotation||180*aj(e)/Math.PI;d.center=f;d.projection=g.c;d.rotation=e;d.scale=c;d.layers=[];b=sj(b);a.g=!1!==b.get("printNativeAngle");b=a.f.ie(b);b=b.slice().reverse();b.forEach(function(b){Ne(b)&&YC(a,d.layers,b,h)})}
function YC(a,b,c,d){if(c instanceof Re){if(M(c)instanceof Vt){d=M(c);var e=d.getUrl();if(void 0!==e){c=c.getOpacity();d=d.f;e.startsWith("//")&&(e=window.location.protocol+e);e=new URL(e);var f={TRANSPARENT:!0};if(e.searchParams)for(var g=t(e.searchParams),h=g.next();!h.done;h=g.next())h=h.value,f[h[0]]=h[1];for(var k in d)g=d[k],null!==g&&void 0!==g&&(f[k]=g);delete f.LAYERS;delete f.FORMAT;delete f.SERVERTYPE;delete f.VERSION;c={baseURL:ZC(e.origin+e.pathname),imageFormat:"FORMAT"in d?d.FORMAT:
"image/png",layers:d.LAYERS.split(","),customParams:f,serverType:d.SERVERTYPE,type:"wms",opacity:c,version:d.VERSION,useNativeAngle:a.g};b.push(c)}}}else if(c instanceof Se){if(M(c)instanceof yh){d=M(c);k=d.j;e=d.Pa;f=e.v;a=[];g=0;for(h=f.length;g<h;++g){var l=e.b?e.b[g]:null;a.push({identifier:f[g],scaleDenominator:e.V(g)*Mb(k)/2.8E-4,tileSize:eg(jg(e,g)),topLeftCorner:ig(e,g),matrixSize:[l.ga-l.ea,l.fa-l.ca]})}k=d.f;e=Object.keys(k);c={baseURL:ZC(d.urls[0]),dimensions:e,dimensionParams:k,imageFormat:d.T,
layer:d.la(),matrices:a,matrixSet:d.G,opacity:c.getOpacity(),requestEncoding:d.ia,style:d.getStyle(),type:"WMTS",version:d.za};b.push(c)}}else if(c instanceof Hh){a=a.j;k=M(c).fc();e=[];f={version:2};g=0;for(h=k.length;g<h;++g){l=k[g];var n=null,p=l.Bb();void 0!==p?n=p.call(l,d):(p=c.Bb(),void 0!==p&&(n=p.call(c,l,d)));p=Rw(a.c,l);n=null===n||Array.isArray(n)?n:[n];if(null!==n&&0<n.length)for(var q=!1,r=0,v=n.length;r<v;++r){var w=n[r],C=x(w).toString(),G=w.getGeometry();if(G){var I=l.clone();I.setGeometry(G);
var J=Rw(a.c,I);G=I.getGeometry();e.push(J)}else{J=p;G=l.getGeometry();if(!G)continue;q||(e.push(J),q=!0)}I=G.getType();null===J.properties&&(J.properties={});G="_ngeo_style_"+r;var E=void 0;if(I in TC){var W=TC[I],y="["+G+" = '"+C+"']";if(!(y in f)){I={symbolizers:[]};f[y]=I;var B=w.oa();y=w.Z();var K=w.sa();w=w.Da();"Polygon"===W?null!==B&&(E=I.symbolizers,y={type:"polygon"},UC(y,B),null!==K&&VC(y,K),E.push(y)):"LineString"===W?null!==K&&(E=I.symbolizers,y={type:"line"},VC(y,K),E.push(y)):"Point"===
W&&null!==y&&(K=I.symbolizers,y instanceof qd?(E={type:"point"},E.pointRadius=y.c,B=y.oa(),null!==B&&UC(E,B),y=y.sa(),null!==y&&VC(E,y)):y instanceof Gh?(B=y.b.o,void 0!==B&&(E={type:"point",externalGraphic:B},B=y.getOpacity(),null!==B&&(E.graphicOpacity=B),B=y.ra(),null!==B&&(W=y.g,isNaN(W)&&(W=1),E.graphicWidth=B[0]*W,E.graphicHeight=B[1]*W),y=y.o,isNaN(y)&&(y=0),E.rotation=180*y/Math.PI)):y instanceof od&&(B=y.i,null!==B&&(E={type:"point"},4===B?E.graphicName="square":3===B?E.graphicName="triangle":
5===B?E.graphicName="star":8===B&&(E.graphicName="cross"),B=y.ra(),null!==B&&(E.graphicWidth=B[0],E.graphicHeight=B[1]),B=y.o,isNaN(B)||0===B||(E.rotation=180*B/Math.PI),B=y.getOpacity(),null!==B&&(E.graphicOpacity=B),B=y.sa(),null!==B&&VC(E,B),y=y.oa(),null!==y&&UC(E,y))),void 0!==E&&K.push(E));if(null!==w&&(I=I.symbolizers,E={type:"Text"},y=w.Da(),void 0!==y)){E.label=y;y="c";K="m";B=w.j;if("left"===B||"start"===B)y="l";else if("right"===B||"end"===B)y="r";B=w.o;"bottom"===B?K="l":"top"===B&&(K=
"t");E.labelAlign=""+y+K;y=w.i;void 0!==y&&(E.labelRotation=(180*y/Math.PI).toString(),E.labelAlign="cm");y=w.c;void 0!==y&&(y=y.split(" "),3<=y.length&&(E.fontWeight=y[0],E.fontSize=y[1],E.fontFamily=y.splice(2).join(" ")));y=w.sa();null!==y&&(K=Cc(y.va()),E.haloColor=Lm(K),E.haloOpacity=K[3],y=y.c,void 0!==y&&(E.haloRadius=y/2));y=w.oa();null!==y&&(y=Cc(y.va()),E.fontColor=Lm(y));void 0!==E.labelAlign&&(E.labelXOffset=w.g,E.labelYOffset=-w.f);I.push(E)}}}J.properties[G]=C}}0<e.length&&(c={geoJson:{type:"FeatureCollection",
features:e},opacity:c.getOpacity(),style:f,type:"geojson"},b.push(c))}}function ZC(a){var b=document.createElement("a");b.href=encodeURI(a);return decodeURI(b.href)}WC.prototype.Oh=function(a,b){var c=this.c+"/report."+(a.format||"pdf"),d={headers:{"Content-Type":"application/json; charset=UTF-8"}};z(d,void 0!==b?b:{});return this.b.post(c,a,d)};WC.prototype.createReport=WC.prototype.Oh;WC.prototype.getStatus=function(a,b){return this.b.get(this.c+"/status/"+a+".json",void 0!==b?b:{})};
WC.prototype.getStatus=WC.prototype.getStatus;WC.prototype.si=function(a){return this.c+"/report/"+a};WC.prototype.getReportUrl=WC.prototype.si;function $C(a,b){return function(c){return new WC(c,a,b)}}$C.$inject=["$http","ngeoLayerHelper"];var aD=angular.module("ngeoPrint",[bu.name]);aD.service("ngeoPrintService",WC);aD.factory("ngeoCreatePrint",$C);S.requires.push(aD.name);function bD(){}
bD.prototype.Nh=function(a,b,c){var d=this;return function(e){var f=e.context,g=e.frameState,h=g.da.resolution,k=g.size[0]*g.ja,l=g.size[1]*g.ja;e=[k/2,l/2];var n=a(),p=n[1]*Oc,q=n[0]*Oc;g=b(g);q=q/72/39.37*g/h/2;d.c=n[0]/72/39.37*g/2;h=p/72/39.37*g/h/2;d.b=n[1]/72/39.37*g/2;f.beginPath();f.moveTo(0,0);f.lineTo(k,0);f.lineTo(k,l);f.lineTo(0,l);f.lineTo(0,0);f.closePath();if(c){n=Db(c());k=Math.sqrt(Math.pow(q,2)+Math.pow(h,2));l=Math.atan(h/q)-n;var r=Math.atan(q/h)-n;q=e[0]-Math.cos(l)*k;h=e[1]+
Math.sin(l)*k;n=e[0]+Math.sin(r)*k;p=e[1]+Math.cos(r)*k;g=e[0]+Math.cos(l)*k;l=e[1]-Math.sin(l)*k;var v=e[0]-Math.sin(r)*k;e=e[1]-Math.cos(r)*k;f.moveTo(q,h);f.lineTo(n,p);f.lineTo(g,l);f.lineTo(v,e);f.lineTo(q,h)}else k=e[0]-q,l=e[1]-h,q=e[0]+q,e=e[1]+h,f.moveTo(k,l),f.lineTo(k,e),f.lineTo(q,e),f.lineTo(q,l),f.lineTo(k,l);f.closePath();f.fillStyle="rgba(0, 5, 25, 0.5)";f.fill()}};bD.prototype.createPrintMaskPostcompose=bD.prototype.Nh;
bD.prototype.oi=function(a,b,c,d){a=Math.min(a[0]*b*2834.64/c[0],a[1]*b*2834.64/c[1]);b=-1;c=0;for(var e=d.length;c<e;++c)a>d[c]&&(b=d[c]);return b};bD.prototype.getOptimalScale=bD.prototype.oi;bD.prototype.ni=function(a,b,c){return Math.max(b[0]*c/(2834.64*a[0]),b[1]*c/(2834.64*a[1]))};bD.prototype.getOptimalResolution=bD.prototype.ni;var cD=angular.module("ngeoPrintUtils",[]);cD.service("ngeoPrintUtils",bD);S.requires.push(cD.name);var dD=angular.module("gmfPrintComponent",[xx.name,xu.name,bu.name,Hw.name,mr.name,aD.name,cD.name,nz.name]);ym.requires.push(dD.name);var eD={NOT_IN_USE:"notInUse",PRINTING:"printing",ERROR_ON_REPORT:"errorOnReport",CAPABILITIES_NOT_LOADED:"capabilitiesNotLoaded",ERROR_ON_GETCAPABILITIES:"errorOnGetCapabilities"};va("gmf.print.component.PrintStateEnum",eD);dD.value("gmfPrintState",{state:"capabilitiesNotLoaded"});
dD.value("gmfPrintTemplateUrl",function(a,b){a=b.gmfPrintTemplateurl;return void 0!==a?a:"gmf/print/component.html"});function fD(a,b,c){return c(a,b)}fD.$inject=["$element","$attrs","gmfPrintTemplateUrl"];dD.c={bindings:{map:"<gmfPrintMap",active:"=gmfPrintActive",rotateMask:"<?gmfPrintRotatemask",fieldValues:"<?gmfPrintFieldvalues",hiddenAttributeNames:"<?gmfPrintHiddenattributes",attributesOut:"=?gmfPrintAttributesOut"},controller:"GmfPrintController",templateUrl:fD,transclude:!0};
dD.component("gmfPrint",dD.c);
function gD(a,b,c,d,e,f,g,h,k,l,n,p,q,r,v,w){this.c=v;this.W=r("translate");this.rotateMask=!1;this.fieldValues={};this.N=a;this.C=b;this.$timeout_=c;this.Y=d;this.ba=f;this.g=g;this.Qa=h.la();this.F=k;this.b=l(n);this.Na=q;this.ua=p;this.wa=w;this.T="0";e.has("cacheVersion")&&(this.T=e.get("cacheVersion"));this.scaleInput=!1;e.has("gmfPrintOptions")&&(this.scaleInput=e.get("gmfPrintOptions").scaleInput);this.B=this.u=this.G=this.f=null;this.o="";this.U=[];this.S=[];this.j={};this.v=[];this.layoutInfo=
{};this.rotation=0}
gD.prototype.$onInit=function(){var a=this;this.C.$watch(function(){return a.ua.c.role_id},function(){a.c.state="capabilitiesNotLoaded";a.i=null});this.C.$watch(function(){return a.active},function(b){hD(a,b)});this.N.$on("gmfStartPrint",function(b,d){a.print(""+d)});this.N.$on("gmfCancelPrint",function(){a.cancel()});this.wa.Nc().then(function(b){a.za=b});this.wa.lb().then(function(b){a.ia=b});var b;this.rotateMask&&(b=function(){return a.rotation});this.gd=this.F.Nh(function(){return a.v},this.qa.bind(this),
b)};gD.prototype.qa=function(a){if(-1===this.layoutInfo.scale||Pd(this.layoutInfo.scales,this.layoutInfo.scale))this.layoutInfo.scale=iD(this,a.size,a.da.resolution);return this.layoutInfo.scale};function hD(a,b){b?(a.i||jD(a),a.i.then(function(b){a.active&&(a.c.state="notInUse",kD(a,b),a.cc=a.map.on("postcompose",a.gd),a.rb=a.map.on("pointerdrag",a.jb.bind(a)),a.map.render())},function(){a.c.state="errorOnGetCapabilities";a.i=null})):(Ua(a.cc),Ua(a.rb),a.mg(0),a.map.render())}
function jD(a){var b=a.b;var c={withCredentials:!0,params:{cache_version:a.T}};b=b.b.get(b.c+"/capabilities.json",void 0!==c?c:{withCredentials:!0});a.i=b}function kD(a,b){b=b.data;a.U=b.formats||[];a.S=b.layouts;a.j=b.layouts[0];a.layoutInfo.layouts=[];a.S.forEach(function(b){a.layoutInfo.layouts.push(b.name)});lD(a)}
function lD(a){a.layoutInfo.layout=a.j.name;var b=mD(a,"map").clientInfo;a.v=[b.width,b.height];nD(a);var c=mD(a,"legend");void 0===a.layoutInfo.legend&&(a.layoutInfo.legend=!(void 0!==c?!c:!a.fieldValues.legend));a.layoutInfo.scales=b.scales||[];a.layoutInfo.dpis=b.dpiSuggestions||[];b=a.map.ra();c=N(a.map).V();a.layoutInfo.scale=iD(a,b,c);a.layoutInfo.dpi=a.layoutInfo.dpi&&0<a.layoutInfo.dpis.indexOf(a.layoutInfo.dpi)?a.layoutInfo.dpi:a.layoutInfo.dpis[0];a.layoutInfo.formats={};a.U.forEach(function(b){a.layoutInfo.formats[b]=
!0});a.attributesOut=a.layoutInfo.simpleAttributes;a.map.render()}
function nD(a){var b,c,d,e;a.layoutInfo.simpleAttributes||(a.layoutInfo.simpleAttributes=[]);var f=a.layoutInfo.simpleAttributes,g=f.splice(0,f.length);a.j.attributes.forEach(function(f){if(!f.clientParams){b=""+f.name;var h=f.default;d=void 0!==h&&""!==h?h:a.fieldValues[b];c=""+f.type;switch(c){case "String":e="comments"===b?"textarea":"text";break;case "Boolean":e="checkbox";break;case "Number":e="number";d=parseFloat(d);d=isNaN(d)?0:d;break;default:e=c}g.forEach(function(a){if(a.name===b&&a.type===
e)return d=a.value});a.layoutInfo.simpleAttributes.push({name:b,type:e,value:d})}})}function mD(a,b){var c=null;a.j.attributes.forEach(function(a){if(a.name===b)return c=a});return c}gD.prototype.mg=function(a){void 0!==a&&(a=parseInt(a,10),180<a?a=-180:-180>a&&(a=180),this.rotation=a,this.rotateMask?this.map.render():dj(N(this.map),Db(this.rotation)));return this.rotation};gD.prototype.getSetRotation=gD.prototype.mg;
gD.prototype.jb=function(a){var b=this,c=a.originalEvent,d=N(this.map).getCenter();if(this.active&&c.altKey&&c.shiftKey&&d){var e=Zg(this.map,d);a=a.pixel;if(null===this.B)this.u=null;else{this.$timeout_.cancel(this.B);c=this.u[0]-e[0];d=this.u[1]-e[1];var f=a[0]-e[0];e=a[1]-e[1];var g=Math.sqrt(Math.pow(f,2)+Math.pow(e,2)),h=(c*f+d*e)/(Math.sqrt(Math.pow(c,2)+Math.pow(d,2))*g);h=1>=h?(0<c*e-d*f?1:-1)*Math.acos(h):0;this.mg(this.rotation+Math.round(180*h/Math.PI*(g/200)));this.C.$digest()}this.B=
this.$timeout_(function(){b.B=null},500);this.u=a}};
gD.prototype.print=function(a){if("printing"!==this.c.state){this.f=this.Y.defer();this.c.state="printing";var b=this.map.ra(),c=N(this.map).V()||0,d=iD(this,b,c);b=this.rotateMask?-this.rotation:this.rotation;var e={datasource:oD(this),lang:this.ba.currentLanguage,rotation:b,scale:this.layoutInfo.scale};this.layoutInfo.simpleAttributes&&this.layoutInfo.simpleAttributes.forEach(function(a){e[a.name]=a.value});this.layoutInfo.legend&&null!==pD(this,d)&&(e.legend=pD(this,d));b=new Wl({});b.setView(N(this.map));
for(var f=this.g.ie(sj(this.map)),g=[],h=0,k=f.length;h<k;h++){var l=f[h],n=l.get("metadata");if(n){var p=n.ogcServer;n=n.printLayers||n.layers;if(p&&n){var q=this.za[p];q?l=this.g.Hc(q.url,n,q.imageType,q.type):console.error("Missing ogcServer:",p)}}g.push(l)}vj(b,new mj({layers:g}));a=this.b.Qh(b,d,this.layoutInfo.dpi,this.layoutInfo.layout,a,e);d=[];YC(this.b,d,this.Qa,c);0<d.length&&a.attributes.map.layers.unshift(d[0]);this.b.Oh(a,{timeout:this.f.promise}).then(this.Ea.bind(this),this.K.bind(this));
b.bd(null)}};gD.prototype.print=gD.prototype.print;gD.prototype.cancel=function(){null!==this.f&&this.f.resolve();null!==this.G&&this.$timeout_.cancel(this.G);0<this.o.length&&this.b.cancel(this.o);qD(this)};gD.prototype.cancel=gD.prototype.cancel;function qD(a,b){a.c.state=b||"notInUse";a.o=""}
function oD(a){var b,c,d,e=[];a.Na.sources.forEach(function(a){c=[];d=[];a.features.forEach(function(a,b){var e=ir(a);0===b&&(d=Object.keys(e).map(function(a){return this.W(a)},this));c.push(Object.keys(e).map(function(a){return e[a]}))},this);d.length&&(b={title:this.W(a.label),table:{columns:d,data:c}},e.push(b))},a);return e}function iD(a,b,c){var d=a.layoutInfo.scales.slice();return void 0!==b&&void 0!==c?a.F.oi(b,c,a.v,d.reverse()):a.layoutInfo.scales[0]}
gD.prototype.Ea=function(a){this.o=a=a.data.ref;rD(this,a)};function rD(a,b){a.f=a.Y.defer();a.b.getStatus(b,{timeout:a.f.promise}).then(a.Fa.bind(a,b),a.K.bind(a))}gD.prototype.Fa=function(a,b){var c=this;b=b.data;b.done?"error"!=b.status?(window.location.href=this.b.si(a),qD(this)):(console.error(b.error),this.K()):this.G=this.$timeout_(function(){rD(c,a)},1E3,!1)};gD.prototype.K=function(){qD(this,"errorOnReport")};
function pD(a,b){var c={classes:[]},d,e,f,g,h=a.ba,k=a.g.md(a.map,"data");a.g.ie(k).reverse().forEach(function(k){d=[];if(Ne(k)&&M(k))if(k instanceof Se)f=""+k.get("layerNodeName"),(g=sD(a,f))||(g=a.g.pg(k)),g&&d.push({name:h.getString(f),icons:[g]});else{var l=M(k);e=l.f.LAYERS.split(",");e.forEach(function(c){(g=sD(a,c))||(g=a.g.ne(l.getUrl(),c,b));g&&0!==c.length&&d.push({name:h.getString(c),icons:[g]})})}0<d.length&&c.classes.push({classes:d})});return 0<c.classes.length?c:null}
function sD(a,b){a=nu(a.ia,b);var c;a&&a.children&&(c=pu(a.children,b));if(c&&c.metadata)var d=c.metadata.legendImage;return d}gD.prototype.yb=function(a){var b;this.S.forEach(function(c){if(c.name===a)return b=c,!0});this.j=b;lD(this)};gD.prototype.setLayout=gD.prototype.yb;gD.prototype.Am=function(a){if(void 0!==a){var b=this.map.ra()||[0,0];this.layoutInfo.scale=a;a=this.F.ni(b,this.v,a);a=N(this.map).Aa(a,0,1);cj(N(this.map),a)}return this.layoutInfo.scale};gD.prototype.getSetScale=gD.prototype.Am;
gD.prototype.Lq=function(a){this.layoutInfo.dpi=a};gD.prototype.setDpi=gD.prototype.Lq;gD.prototype.fo=function(a){return this.c.state===eD[a]};gD.prototype.isState=gD.prototype.fo;gD.$inject="$rootScope $scope $timeout $q $injector gettextCatalog ngeoLayerHelper ngeoFeatureOverlayMgr ngeoPrintUtils ngeoCreatePrint gmfPrintUrl gmfAuthenticationService ngeoQueryResult $filter gmfPrintState gmfThemes".split(" ");dD.controller("GmfPrintController",gD);function tD(a){function b(a){a.each(function(a){d3.select(this).selectAll("svg").remove();if(void 0!==a){K=Math.max(this.clientWidth-d.right-d.left,0);J=d3.scaleLinear().range([0,K]);B=Math.max(this.clientHeight-d.top-d.bottom,0);E=d3.scaleLinear().range([B,0]);var e=d3.axisBottom(J),f=d3.axisLeft(E),l;1===k&&(l=d3.area().x(function(a){return J(g(a))}).y0(B).y1(function(a){var b=Object.keys(h)[0];return E(h[b].zExtractor(a))}));I=d3.select(this).selectAll("svg").data([a]);var n=I.enter().append("svg");
I=d3.select(this).selectAll("svg").data([a]);void 0!==p&&n.append("defs").append("style").attr("type","text/css").text(p);n=n.append("g");b.nk([]);n.style("font","11px Arial");1===k&&n.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)");n.insert("g",":first-child").attr("class","grid-y");c||(n.append("g").attr("class","x axis").attr("transform","translate(0,"+B+")"),n.append("text").attr("class","x label").attr("text-anchor","end").attr("x",K-4).attr("y",B-4),n.append("g").attr("class",
"y axis"),n.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(w+" [m]"),n.append("g").attr("class","metas").attr("transform","translate("+(K+3)+", 0)"));n.append("g").attr("class","pois");var q=n.append("g").attr("class","x grid-hover");q.append("svg:line").attr("stroke-dasharray","5,5");q.append("text");n.append("rect").attr("class","overlay").attr("width",K).attr("height",B).style("fill","none").style("pointer-events",
"all");I.attr("width",K+d.left+d.right).attr("height",B+d.top+d.bottom);y=I.select("g").attr("transform","translate("+d.left+","+d.top+")");Na=d3.extent(a,function(a){return g(a)});J.domain(Na);q=function(){var b=[],c;for(c in h){var d=d3.extent(a,function(a){return h[c].zExtractor(a)});b=b.concat(d)}return[Math.min.apply(null,b),Math.max.apply(null,b)]}();E.domain(q);if(void 0!==W)W(J,E,K,B);else{var r=.1*(q[1]-q[0]);E.domain([q[0]-r,q[1]+r])}1===k&&y.select(".area").transition().attr("d",l);for(var L in h)n.append("path").attr("class",
"line "+L).style("stroke",h[L].color||"#F00").style("fill","none"),l=n.append("g").attr("class","y grid-hover "+L),l.append("svg:line").attr("stroke-dasharray","5,5"),l.append("text"),l=d3.line().x(function(a){return J(g(a))}).y(function(a){return E(h[L].zExtractor(a))}),y.select(".line."+L).transition().attr("d",l);2E3<Na[1]?(U=1E3,ca="km"):(U=1,ca="m");c||(e.tickFormat(function(a){return C.xtick(a/U,ca)}),G&&e.tickValues([0,J.domain()[1]]),f.tickFormat(function(a){return C.ytick(a,"m")}),y.select(".x.axis").transition().call(e),
y.select(".x.label").text(v+" ["+ca+"]").style("fill","grey").style("shape-rendering","crispEdges"),10>B/15&&f.ticks(B/15),y.select(".y.axis").transition().call(f));y.select(".grid-y").transition().call(f.tickSize(-K,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);y.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");y.select(".grid-y").select("path").style("stroke","none");y.selectAll(".grid-hover line").style("stroke",
"#222").style("opacity",.8);y.select(".overlay").on("mouseout",function(){b.Fh()}).on("mousemove",function(){var a=d3.mouse(this)[0];a=J.invert(a);b.highlight(a)})}})}var c=void 0!==a.light?a.light:!1,d=c?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},e=void 0!==a.hoverCallback?a.hoverCallback:xa,f=void 0!==a.outCallback?a.outCallback:xa,g=a.distanceExtractor,h=a.linesConfiguration,k=Object.keys(h).length,l=d3.bisector(function(a){return g(a)}).left,n=a.poiExtractor,p=a.styleDefs,
q=void 0!==a.poiLabelAngle?a.poiLabelAngle:-60,r=a.i18n||{},v=r.xAxis||"Distance",w=r.yAxis||"Elevation",C={xhover:function(a,b){return parseFloat(a.toPrecision(3))+" "+b},yhover:function(a){return Math.round(a)+" m"},xtick:function(a){return a},ytick:function(a){return a}};void 0!==a.formatter&&z(C,a.formatter);var G=void 0!==a.lightXAxis?a.lightXAxis:!1,I,J,E,W=a.scaleModifier,y,B,K,U,ca,Na;b.Fh=function(){y.selectAll(".grid-hover").style("display","none");f.call(null)};b.highlight=function(a){var b=
I.datum();a=l(b,a);if(!(a>=b.length)){b=b[a];a=g(b);var c=[],d={};for(n in h){var f=h[n].zExtractor(b);c.push(f);d[n]=f;y.select(".y.grid-hover."+n).style("display","inline").select("line").attr("x1",J(0)).attr("y1",E(f)).attr("x2",K).attr("y2",E(f))}y.select(".x.grid-hover").style("display","inline").select("line").attr("x1",J(a)).attr("y1",B).attr("x2",J(a)).attr("y2",E(Math.max.apply(null,c)));var n=a>Na[1]/2;f=J(a);f+=n?-10:10;y.select(".x.grid-hover text").text(C.xhover(a/U,ca)).style("text-anchor",
n?"end":"start").attr("transform","translate("+f+","+(B-10)+")");1===k&&y.select(".y.grid-hover text").text(C.yhover(c[0],"m")).style("text-anchor",n?"end":"start").attr("transform","translate("+f+","+(E(c[0])-10)+")");e.call(null,b,a/U,ca,d,"m")}};b.nk=function(a){a=void 0!==a?a:[];var b=I.select("g"),d=I.datum();a=b.select(".pois").selectAll(".poi").data(a,function(a){var b=l(d,Math.round(10*n.dist(a))/10,1);if(b=d[b]){var c=[];for(e in h)c.push(h[e].zExtractor(b));var e=Math.max.apply(null,c);
n.z(a,e)}return n.id(a)}).enter().append("g").attr("class","poi");a.append("text").attr("x",c?0:9).attr("dy",".35em").attr("text-anchor",c?"middle":"start");a.append("line").style("shape-rendering","crispEdges");a.style("opacity",0).transition().duration(1E3).delay(100).style("opacity",1);a.selectAll("text").attr("transform",function(a){return c?["translate(",J(n.dist(a)),",",E(n.z(a))-10,")"].join(""):["translate(",J(n.dist(a)),",",E(n.z(a))-20,") rotate(",q,")"].join("")}).text(function(a){return n.sort(a)+
(c?"":" - "+n.title(a))});a.selectAll("line").style("stroke","grey").attr("x1",function(a){return J(n.dist(a))}).attr("y1",function(){return E(E.domain()[0])}).attr("x2",function(a){return J(n.dist(a))}).attr("y2",function(a){return E(n.z(a))});a.exit().remove()};return b}va("ngeo.profile.d3Elevation",tD);var uD=angular.module("ngeoProfile",[dn.name]);S.requires.push(uD.name);
uD.b=function(a){return{restrict:"A",link:function(b,c,d){function e(){void 0!==h&&(g.datum(k).call(h),void 0!==k&&h.nk(l))}var f=d.ngeoProfileOptions,g=d3.select(c[0]),h,k,l;b.$watchCollection(f,function(a){a=z({},a);if(void 0!==a){if(void 0!==a.hoverCallback){var c=a.hoverCallback;a.hoverCallback=function(a){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];c.apply(null,[].concat(qa(d)));b.$applyAsync()}}if(void 0!==a.outCallback){var d=a.outCallback;a.outCallback=function(){d();b.$applyAsync()}}h=
tD(a);e()}});b.$watch(d.ngeoProfile,function(a){k=a;e()});b.$watch(d.ngeoProfilePois,function(a){l=a;e()});b.$watch(d.ngeoProfileHighlight,function(a){void 0!==a&&(0<a?h.highlight(a):h.Fh())});D(window,"resize",a(e,50,!0))}}};uD.b.$inject=["ngeoDebounce"];uD.directive("ngeoProfile",uD.b);var vD=angular.module("gmfProfile",[gA.name,Hw.name,uD.name]);ym.requires.push(vD.name);vD.value("gmfProfileTemplateUrl",function(a,b){a=b.gmfProfileTemplateurl;return void 0!==a?a:"gmf/profile/component.html"});function wD(a,b,c){return c(a,b)}wD.$inject=["$element","$attrs","gmfProfileTemplateUrl"];
vD.c={controller:"GmfProfileController as ctrl",bindings:{active:"=gmfProfileActive",line:"=gmfProfileLine",getMapFn:"&?gmfProfileMap",getLinesConfigurationFn:"&gmfProfileLinesconfiguration",getHoverPointStyleFn:"&?gmfProfileHoverpointstyle",getNbPointsFn:"&?gmfProfileNumberofpoints",getOptionsFn:"&?gmfProfileOptions"},templateUrl:wD};vD.component("gmfProfile",vD.c);
function xD(a,b,c,d,e,f,g,h){var k=this;this.G=a;this.F=b;this.$filter_=d;this.ba=e;this.u=f.eb();this.S=g;this.Y=h;this.g=this.b=null;this.j=[];this.o=100;this.profileData=[];this.currentPoint={coordinate:void 0,distance:void 0,elevations:{},xUnits:void 0,yUnits:void 0};this.profileHighlight=-1;this.c=this.f=null;this.i=new yd;this.u.na(this.i);this.v={xAxis:e.getString("Distance"),yAxis:e.getString("Elevation")};this.profileOptions=null;this.isErrored=this.active=!1;a.$watch(function(){return k.active},
function(a,b){b!==a&&yD(k)});a.$watch(function(){return k.line},function(a,b){b!==a&&(k.isErrored=!1,k.line?(a={type:"LineString",coordinates:k.line.O()},a={layers:k.j.join(","),geom:JSON.stringify(a),nbPoints:k.o},k.F({url:k.S,method:"POST",params:a,paramSerializer:"$httpParamSerializerJQLike",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(k.K.bind(k),k.C.bind(k))):k.profileData=[],k.active=!!k.line)});yD(this)}xD.$inject="$scope $http $element $filter gettextCatalog ngeoFeatureOverlayMgr gmfProfileJsonUrl ngeoCsvDownload".split(" ");
m=xD.prototype;
m.$onInit=function(){this.b=this.getMapFn?this.getMapFn():null;this.o=this.getNbPointsFn?this.getNbPointsFn():100;var a,b=this.getHoverPointStyleFn;b?a=b():a=new H({image:new qd({fill:new rd({color:"#ffffff"}),radius:3})});this.u.setStyle(a);this.g=this.getLinesConfigurationFn();for(var c in this.g)this.j.push(c),this.g[c].zExtractor||(this.g[c].zExtractor=zD(c));this.profileOptions={linesConfiguration:this.g,distanceExtractor:this.B,hoverCallback:this.Qn.bind(this),outCallback:this.Tp.bind(this),i18n:this.v};
if(a=this.getOptionsFn)a=a(),z(this.profileOptions,a)};function yD(a){a.active&&null!==a.b?a.N=D(a.b,"pointermove",a.Pp.bind(a)):Ua(a.N)}m.Pp=function(a){if(!a.dragging&&this.line){var b=this.b;a=b.Ca(Rh(b,a.originalEvent));b=zc(this.line,a);16>Ce(new ye([b,a]))/N(this.b).V()?this.profileHighlight=AD(this,b):this.profileHighlight=-1;this.G.$apply()}};
function AD(a,b){var c,d=0,e=[b[0]-.5,b[1]-.5,b[0]+.5,b[1]+.5];Ae(a.line,function(a,g){c=new ye([a,g]);if(c.nb(e))return c.ha([a,b]),d+=Ce(c);d+=Ce(c)});return d}
m.Qn=function(a,b,c,d,e){a=[a.x,a.y];for(g in d)this.currentPoint.elevations[g]=d[g];this.currentPoint.distance=b;this.currentPoint.xUnits=c;this.currentPoint.yUnits=e;this.currentPoint.coordinate=a;b=new Mi(a);BD(this);this.c=document.createElement("div");this.c.className+="tooltip ngeo-tooltip-measure";this.f=new Qg({element:this.c,offset:[0,-15],Xc:"bottom-center"});this.b.Ha.push(this.f);c=this.c;var f;e=[];var g=this.$filter_("number");e.push(this.v.xAxis+" : "+g(this.currentPoint.distance,"m"===
this.currentPoint.xUnits?0:2)+" "+this.currentPoint.xUnits);for(f in this.currentPoint.elevations)d=this.ba.getString(f),e.push(d+" : "+g(this.currentPoint.elevations[f],0)+" "+this.currentPoint.yUnits);c.innerHTML=e.join("</br>");this.f.set(Ug,a);this.i.setGeometry(b)};m.Tp=function(){this.currentPoint.coordinate=void 0;this.currentPoint.distance=void 0;this.currentPoint.elevations={};this.currentPoint.xUnits=void 0;this.currentPoint.yUnits=void 0;BD(this);this.i.setGeometry(null)};
function BD(a){null!==a.c&&(a.c.parentNode.removeChild(a.c),a.c=null,a.b.Ha.remove(a.f))}m.va=function(a){if(a=this.g[a])return a.color};xD.prototype.getColor=xD.prototype.va;xD.prototype.mm=function(){return this.j.slice(0)};xD.prototype.getLayersNames=xD.prototype.mm;function zD(a){return function(b){return"values"in b&&a in b.values?parseFloat(b.values[a]):0}}xD.prototype.B=function(a){return"dist"in a?a.dist:0};
xD.prototype.K=function(a){a=a.data.profile;a instanceof Array&&(this.profileData=a)};xD.prototype.C=function(){this.isErrored=!0;console.error("Can not get JSON profile.")};
xD.prototype.Bf=function(){if(0!==this.profileData.length){var a=[],b=!1,c=this.profileData[0];"dist"in c&&(a.push({name:"distance"}),b=!0);var d=[],e;for(e in c.values)a.push({name:e}),d.push(e);a.push({name:"x"});a.push({name:"y"});c=this.profileData.map(function(a){var c={};b&&(c.distance=a.dist);d.forEach(function(b){c[b]=a.values[b]});c.x=a.x;c.y=a.y;return c});this.Y.Yg(c,a,"profile.csv")}};xD.prototype.downloadCsv=xD.prototype.Bf;vD.controller("GmfProfileController",xD);var CD=angular.module("gmfDrawProfileLine",[Hw.name]);ym.requires.push(CD.name);CD.b=function(){return{scope:!0,controller:"GmfDrawprofilelineController as ctrl",restrict:"A",bindToController:{getMapFn:"&gmfDrawprofilelineMap",line:"=gmfDrawprofilelineLine",active:"=gmfDrawprofilelineActive",getStyleFn:"&?gmfDrawprofilelineStyle"}}};CD.directive("gmfDrawprofileline",CD.b);
function DD(a,b,c,d){var e=this;this.b=null;this.c=new Ih;b=d.eb();b.rc(this.c);var f;(d=this.getStyleFn)?f=d():f=new H({stroke:new sd({color:"#ffcc33",width:2})});b.setStyle(f);this.interaction=new Gn({type:"LineString",features:this.c});yu(this.interaction);this.interaction.on("change:active",function(){e.interaction.getActive()&&e.Fc()});this.interaction.on("drawend",function(a){e.line=a.feature.getGeometry();c(function(){e.interaction.setActive(!1)},0)});a.$watch(function(){return e.line},function(a){null===
a&&e.Fc()});a.$watch(function(){return e.active},function(a){!1===a&&e.Fc();e.interaction.setActive(e.active)})}DD.$inject=["$scope","$element","$timeout","ngeoFeatureOverlayMgr"];DD.prototype.$onInit=function(){this.b=this.getMapFn();qj(this.b,this.interaction)};DD.prototype.Fc=function(){this.c.clear();this.line=null};CD.controller("GmfDrawprofilelineController",DD);var ED=angular.module("gmfRasterComponent",[aA.name,dn.name]);ym.requires.push(ED.name);
ED.c=function(){return{restrict:"A",controller:"GmfElevationController as ctrl",bindToController:!0,scope:{active:"<gmfElevationActive",elevation:"=gmfElevationElevation",loading:"=?gmfElevationLoading",layer:"<gmfElevationLayer",map:"=gmfElevationMap"},link:function(a){var b=a.ctrl;a.$watch(function(){return b.active},function(a){FD(this,a)}.bind(b));a.$watch(function(){return b.layer},function(a){this.layer=a;this.elevation=null}.bind(b))}}};ED.directive("gmfElevation",ED.c);
function GD(a,b,c){this.j=b;this.f=c;this.c=[];this.J=a;this.loading=this.vg=!1}GD.$inject=["$scope","ngeoDebounce","gmfRaster"];
function FD(a,b){a.elevation=void 0;b?(a.c.push(D(a.map,"pointermove",function(){var a=this;this.J.$apply(function(){a.vg=!0;a.elevation=void 0;a.loading=!1})},a)),a.c.push(D(a.map,"pointermove",a.j(a.i.bind(a),500,!0))),a.c.push(D(a.map.pa,"mouseout",function(){a.J.$apply(function(){a.elevation=void 0;a.vg=!1;a.loading=!1})}))):(a.elevation=void 0,a.c.forEach(A),a.c.length=0)}GD.prototype.i=function(a){this.vg&&(this.loading=!0,this.f.jg(a.coordinate,{layers:this.layer}).then(this.g.bind(this),this.b.bind(this)))};
GD.prototype.g=function(a){this.elevation=a[this.layer];this.loading=!1};GD.prototype.b=function(){console.error("Error on getting the raster.");this.elevation=void 0;this.loading=!1};ED.controller("GmfElevationController",GD);ED.N={controller:"gmfElevationwidgetController as ctrl",bindings:{map:"<gmfElevationwidgetMap",layers:"<gmfElevationwidgetLayers",active:"<gmfElevationwidgetActive"},templateUrl:function(){return"gmf/raster/widgetComponent.html"}};ED.component("gmfElevationwidget",ED.N);
function HD(){}HD.prototype.$onInit=function(){this.selectedElevationLayer=this.layers[0]};ED.controller("gmfElevationwidgetController",HD);function ID(a,b){this.b=a;this.c=b}va("gmf.permalink.ShareService",ID);ID.$inject=["$http","gmfShortenerCreateUrl"];ID.prototype.le=function(a){return this.c?JD(this,{url:a}):{data:{short_url:a},status:200}};ID.prototype.Ug=function(a,b,c){a={url:a,email:b};c&&(a.message=c);return JD(this,a)};function JD(a,b){return a.b.post(a.c,$.param(b),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}var KD=angular.module("gmfShareService",[]);ym.requires.push(KD.name);
KD.service("gmfShareService",ID);var LD=angular.module("",[KD.name]);ym.requires.push(LD.name);LD.c={bindings:{enableEmail:"<gmfShareEmail"},controller:"GmfShareController",templateUrl:function(){return"gmf/permalink/shareComponent.html"}};LD.component("gmfShare",LD.c);function MD(a,b,c,d){this.g=a;this.c=c;this.b=d;this.permalink=b.td();this.showLengthWarning=2083<this.permalink.length||2048<b.getPath();this.errorOnGetShortUrl=this.errorOnsend=this.successfullySent=!1;this.le()}
MD.$inject=["$scope","ngeoLocation","gmfShareService","$q","$attrs"];MD.prototype.le=function(){this.b.when(this.c.le(this.permalink)).then(function(a){this.shortLink=a.data.short_url;this.errorOnGetShortUrl=!1}.bind(this),function(){this.shortLink=this.permalink;this.errorOnGetShortUrl=!0}.bind(this))};MD.prototype.getShortUrl=MD.prototype.le;
MD.prototype.Ug=function(){function a(){this.successfullySent=!0}function b(){this.errorOnsend=!0}this.g.gmfShareForm.$valid&&this.b.when(this.c.Ug(this.permalink,this.email,this.message)).then(a.bind(this),b.bind(this))};MD.prototype.sendShortUrl=MD.prototype.Ug;LD.controller("GmfShareController",MD);ym.value("isDesktop",!0);ym.value("ngeoQueryOptions",{limit:20});ym.value("ngeoMeasurePrecision",3);ym.value("ngeoMeasureDecimals",0);
function ND(a,b,c){var d=this,e={projection:fc("EPSG:"+(a.srid||21781))};z(e,a.mapViewConfig||{});var f=Wz();this.map=new Wl({ja:a.mapPixelRatio,layers:[],view:new Zi(e),controls:a.mapControls||[new bh({target:document.getElementById("scaleline")}),new Bj({Mk:"",Nk:""}),new zj({label:f,Xe:""})],xa:a.mapInteractions||Lk({Jj:!0,zh:!0}),Yi:!0,Zi:!0});this.googleStreetViewActive=this.editFeatureActive=this.modalShareShown=this.toolsActive=this.loginActive=!1;this.googleStreetViewStyle=new H({text:new ep({fill:new rd({color:"#279B61"}),
font:"normal 30px FontAwesome",offsetY:-15,stroke:new sd({color:"#ffffff",width:3}),text:"\uf041"})});this.importDataSourceActive=!1;var g=$("body");g.tooltip({container:"body",trigger:"hover",selector:'[data-toggle="tooltip"]'});g.on("touchstart.detectTouch",function(){g.tooltip("destroy");g.off("touchstart.detectTouch")});e=c.get("ngeoFeatures");this.drawFeatureLayer=c.get("ngeoFeatureOverlayMgr").eb();this.drawFeatureLayer.rc(e);var h=c.get("ngeoFeatureHelper");this.editFeatureVectorLayer=new Hh({source:new sm({wrapX:!1,
features:new Ih}),style:function(a){return h.Mh(a)}});this.editFeatureVectorLayer.setMap(this.map);e=c.get("ngeoToolActivateMgr");e.ta("mapTools",new Oz(this,"editFeatureActive"),!1);e.ta("mapTools",new Oz(this,"googleStreetViewActive"),!1);this.scaleSelectorOptions={dropup:!0};this.profileLine=null;Rz.call(this,a,b,c);b.$watch(function(){return d.gmfUser.username},function(a){null!==a&&d.loginActive&&(d.loginActive=!1)})}u(ND,Rz);va("gmf.AbstractDesktopController",ND);
ND.$inject=["config","$scope","$injector"];ym.controller("AbstractDesktopController",ND);proj4.defs("EPSG:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");Nb(fc("EPSG:2056"),[242E4,103E4,29E5,135E4]);var OD=angular.module("ngeoGooglestreetview",[Hw.name]);S.requires.push(OD.name);function PD(a,b,c){var d=this;b.$watch(function(){return d.active},this.Eo.bind(this));this.J=b;this.c=new yd;this.j=c.eb();this.o=[];this.location=null;this.noDataAtLocation=!1;this.g=new google.maps.StreetViewPanorama(a[0],{pov:{heading:0,pitch:0},visible:!1,zoom:1});this.b=null;this.i=new Mi([0,0]);this.c.setGeometry(this.i);this.u=new google.maps.StreetViewService;this.f=!1}m=PD.prototype;
m.$onInit=function(){var a=this;this.J.$watch(function(){return a.location},this.mn.bind(this));this.J.$watch(function(){var b=null!==a.location;return a.active&&b},this.Cn.bind(this));this.J.$watch(function(){var b=null!==a.location,c=!1===a.noDataAtLocation;return a.active&&b&&c},function(b,c){b!==c&&(a.g.setVisible(b),b?a.b=google.maps.event.addListener(a.g,"position_changed",a.wn.bind(a)):a.b&&(google.maps.event.removeListener(a.b),a.b=null))});this.featureStyle&&this.c.setStyle(this.featureStyle)};
m.Eo=function(a){var b=this.o;a?b.push(D(this.map,"click",this.Fo,this)):(Ua(b),b.length=0)};m.mn=function(a,b){if(!(a===b||Array.isArray(a)&&Array.isArray(b)&&Ud(a,b))&&(this.i.ha(a),a&&!this.f)){b=N(this.map).b;a=pc(a,void 0!==b?b:"EPSG:3857","EPSG:4326");b=a[0];if(-180>b||180<b)a[0]=Eb(b+180,360)-180;this.u.getPanorama({location:{lat:a[1],lng:a[0]},radius:this.radius},this.Jn.bind(this))}};m.Fo=function(a){this.location=a.coordinate;this.J.$apply()};
m.Cn=function(a,b){a!==b&&(a?this.j.na(this.c):this.j.ma(this.c))};m.Jn=function(a,b){var c=this.g;b===google.maps.StreetViewStatus.OK?(this.noDataAtLocation=!1,c.setPosition(a.location.latLng)):this.noDataAtLocation=!0;this.J.$apply()};m.wn=function(){this.f=!0;var a=this.g.getPosition();a=[a.lng(),a.lat()];var b=N(this.map).b;this.location=pc(a,"EPSG:4326",void 0!==b?b:"EPSG:3857");this.J.$apply();this.f=!1};PD.$inject=["$element","$scope","ngeoFeatureOverlayMgr"];
OD.component("ngeoGooglestreetview",{bindings:{active:"<",featureStyle:"<?",map:"<",radius:"<?"},controller:PD,templateUrl:function(){return"ngeo/googlestreetview/component.html"}});function QD(a,b){ND.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],zoom:3,hb:[250,100,50,20,10,5,2,1,.5,.25,.1,.05]}},a,b);this.searchDelay=50;this.searchCoordinatesProjections=["EPSG:21781","EPSG:2056","EPSG:4326"];this.scaleSelectorValues=[25E4,1E5,5E4,2E4,1E4,5E3,2E3,1E3,500,250,100,50];this.elevationLayers=["aster","srtm"];this.selectedElevationLayer=this.elevationLayers[0];this.profileLinesconfiguration={aster:{color:"#0000A0"},srtm:{color:"#00A000"}};this.mousePositionProjections=
[{code:"EPSG:2056",label:"CH1903+ / LV95",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:21781",label:"CH1903 / LV03",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:4326",label:"WGS84",filter:"ngeoDMSCoordinates:2"}];a=b.get("gettextCatalog");a.getString("Add a theme");a.getString("Add a sub theme");a.getString("Add a layer")}u(QD,ND);va("app.desktop.Controller",QD);QD.$inject=["$scope","$injector"];Ex.controller("DesktopController",QD);}).call(window);
//# sourceMappingURL=desktop.js.map
