webpackJsonp([23],{106:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(8)),i=a(r(47)),o=(a(r(22)),a(r(48)));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,r,n,i){this.$rootScope_=e,this.gmfThemes_=t,this.modeFlush=r,this.gmfTreeManager_=n,this.ngeoStateManager_=i,this.themeName_=""};s.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"],s.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"],s.prototype.addTheme=function(e,t){this.modeFlush?(this.ngeoStateManager_.updateState({theme:e.name}),this.setThemeName(e.name),this.gmfTreeManager_.setFirstLevelGroups(e.children)):this.gmfTreeManager_.addFirstLevelGroups(e.children,!1,t)},s.prototype.getThemeName=function(){return this.themeName_},s.prototype.isLoading=function(){return!this.gmfThemes_.loaded},s.prototype.setThemeName=function(e,t){this.themeName_=e,t||this.$rootScope_.$emit(s.EventType.THEME_NAME_SET,e)},s.prototype.removeAll=function(){this.gmfTreeManager_.removeAll()},s.EventType={THEME_NAME_SET:"gmf-thememanager-theme_name_set"},(s.module=angular.module("gmfThemeManager",[i.default.module.name,o.default.module.name])).value("gmfTreeManagerModeFlush",!0),s.module.service("gmfThemeManager",s),n.default.module.requires.push(s.module.name),t.default=s},17:function(e,t,r){"use strict";var n=r(9),i=r(49);const o={readBoolean:function(e){const t=n.default.getAllTextContent(e,!1);return o.readBooleanString(t)},readBooleanString:function(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);return t?void 0!==t[1]||!1:void 0},readDateTime:function(e){const t=n.default.getAllTextContent(e,!1),r=Date.parse(t);return isNaN(r)?void 0:r/1e3},readDecimal:function(e){const t=n.default.getAllTextContent(e,!1);return o.readDecimalString(t)},readDecimalString:function(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);return t?parseFloat(t[1]):void 0},readNonNegativeInteger:function(e){const t=n.default.getAllTextContent(e,!1);return o.readNonNegativeIntegerString(t)},readNonNegativeIntegerString:function(e){const t=/^\s*(\d+)\s*$/.exec(e);return t?parseInt(t[1],10):void 0},readString:function(e){return n.default.getAllTextContent(e,!1).trim()},writeBooleanTextNode:function(e,t){o.writeStringTextNode(e,t?"1":"0")},writeCDATASection:function(e,t){e.appendChild(n.default.DOCUMENT.createCDATASection(t))},writeDateTimeTextNode:function(e,t){const r=new Date(1e3*t),o=r.getUTCFullYear()+"-"+i.default.padNumber(r.getUTCMonth()+1,2)+"-"+i.default.padNumber(r.getUTCDate(),2)+"T"+i.default.padNumber(r.getUTCHours(),2)+":"+i.default.padNumber(r.getUTCMinutes(),2)+":"+i.default.padNumber(r.getUTCSeconds(),2)+"Z";e.appendChild(n.default.DOCUMENT.createTextNode(o))},writeDecimalTextNode:function(e,t){const r=t.toPrecision();e.appendChild(n.default.DOCUMENT.createTextNode(r))},writeNonNegativeIntegerTextNode:function(e,t){const r=t.toString();e.appendChild(n.default.DOCUMENT.createTextNode(r))},writeStringTextNode:function(e,t){e.appendChild(n.default.DOCUMENT.createTextNode(t))}};t.a=o},18:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(5),a=r(15),s=r(14),u=r(10),l=r(44),d=r(98),c=r(52),h=r(65),f=r(176),p=r(102),g=r(93);const _=function(e,t){l.default.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(e,t)};Object(n.inherits)(_,l.default),_.prototype.appendLineString=function(e){this.flatCoordinates?Object(i.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},_.prototype.clone=function(){const e=new _(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),e},_.prototype.closestPointXY=function(e,t,r,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d.a.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d.a.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,n))},_.prototype.getCoordinateAtM=function(e,t,r){if(this.layout!=a.default.XYM&&this.layout!=a.default.XYZM||0===this.flatCoordinates.length)return null;const n=void 0!==t&&t,i=void 0!==r&&r;return f.a.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,n,i)},_.prototype.getCoordinates=function(){return h.a.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},_.prototype.getEnds=function(){return this.ends_},_.prototype.getLineString=function(e){if(e<0||this.ends_.length<=e)return null;const t=new u.default(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e])),t},_.prototype.getLineStrings=function(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,n=[];let i,o,a=0;for(i=0,o=t.length;i<o;++i){const o=t[i],s=new u.default(null);s.setFlatCoordinates(r,e.slice(a,o)),n.push(s),a=o}return n},_.prototype.getFlatMidpoints=function(){const e=[],t=this.flatCoordinates;let r=0;const n=this.ends_,o=this.stride;let a,s;for(a=0,s=n.length;a<s;++a){const s=n[a],u=f.a.lineString(t,r,s,o,.5);Object(i.extend)(e,u),r=s}return e},_.prototype.getSimplifiedGeometryInternal=function(e){const t=[],r=[];t.length=g.a.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r);const n=new _(null);return n.setFlatCoordinates(a.default.XY,t,r),n},_.prototype.getType=function(){return s.default.MULTI_LINE_STRING},_.prototype.intersectsExtent=function(e){return p.a.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,e)},_.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=c.a.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}else this.setFlatCoordinates(a.default.XY,null,this.ends_)},_.prototype.setFlatCoordinates=function(e,t,r){this.setFlatCoordinatesInternal(e,t),this.ends_=r,this.changed()},_.prototype.setLineStrings=function(e){let t=this.getLayout();const r=[],n=[];let o,a;for(o=0,a=e.length;o<a;++o){const a=e[o];0===o&&(t=a.getLayout()),Object(i.extend)(r,a.getFlatCoordinates()),n.push(r.length)}this.setFlatCoordinates(t,r,n)},t.default=_},20:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(5),a=r(15),s=r(14),u=r(12),l=r(44),d=r(52),c=r(65),h=r(34);const f=function(e,t){l.default.call(this),this.setCoordinates(e,t)};Object(n.inherits)(f,l.default),f.prototype.appendPoint=function(e){this.flatCoordinates?Object(i.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},f.prototype.clone=function(){const e=new f(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},f.prototype.closestPointXY=function(e,t,r,n){if(n<Object(o.closestSquaredDistanceXY)(this.getExtent(),e,t))return n;const i=this.flatCoordinates,a=this.stride;let s,u,l;for(s=0,u=i.length;s<u;s+=a){const o=Object(h.squaredDistance)(e,t,i[s],i[s+1]);if(o<n){for(n=o,l=0;l<a;++l)r[l]=i[s+l];r.length=a}}return n},f.prototype.getCoordinates=function(){return c.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},f.prototype.getPoint=function(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(e<0||t<=e)return null;const r=new u.default(null);return r.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride)),r},f.prototype.getPoints=function(){const e=this.flatCoordinates,t=this.layout,r=this.stride,n=[];let i,o;for(i=0,o=e.length;i<o;i+=r){const o=new u.default(null);o.setFlatCoordinates(t,e.slice(i,i+r)),n.push(o)}return n},f.prototype.getType=function(){return s.default.MULTI_POINT},f.prototype.intersectsExtent=function(e){const t=this.flatCoordinates,r=this.stride;let n,i,a,s;for(n=0,i=t.length;n<i;n+=r)if(a=t[n],s=t[n+1],Object(o.containsXY)(e,a,s))return!0;return!1},f.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=d.a.coordinates(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(a.default.XY,null)},f.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},t.default=f},21:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(5),a=r(15),s=r(14),u=r(20),l=r(11),d=r(44),c=r(173),h=r(182),f=r(98),p=r(170),g=r(52),_=r(65),m=r(177),S=r(102),y=r(174),v=r(93);const P=function(e,t){d.default.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(e,t)};Object(n.inherits)(P,d.default),P.prototype.appendPolygon=function(e){let t;if(this.flatCoordinates){const r=this.flatCoordinates.length;let n,o;for(Object(i.extend)(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice(),n=0,o=t.length;n<o;++n)t[n]+=r}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()},P.prototype.clone=function(){const e=new P(null),t=this.endss_.length,r=new Array(t);for(let e=0;e<t;++e)r[e]=this.endss_[e].slice();return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),r),e},P.prototype.closestPointXY=function(e,t,r,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f.a.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f.a.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,n))},P.prototype.containsXY=function(e,t){return p.a.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)},P.prototype.getArea=function(){return c.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},P.prototype.getCoordinates=function(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),y.a.orientLinearRingss(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,_.a.coordinatesss(t,0,this.endss_,this.stride)},P.prototype.getEndss=function(){return this.endss_},P.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=h.a.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=m.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},P.prototype.getInteriorPoints=function(){const e=new u.default(null);return e.setFlatCoordinates(a.default.XYM,this.getFlatInteriorPoints().slice()),e},P.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;y.a.linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=y.a.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},P.prototype.getSimplifiedGeometryInternal=function(e){const t=[],r=[];t.length=v.a.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r);const n=new P(null);return n.setFlatCoordinates(a.default.XY,t,r),n},P.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const r=this.endss_[e-1];t=r[r.length-1]}const r=this.endss_[e].slice(),n=r[r.length-1];if(0!==t){let e,n;for(e=0,n=r.length;e<n;++e)r[e]-=t}const i=new l.default(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t,n),r),i},P.prototype.getPolygons=function(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,n=[];let i,o,a,s,u=0;for(i=0,o=r.length;i<o;++i){const o=r[i].slice(),d=o[o.length-1];if(0!==u)for(a=0,s=o.length;a<s;++a)o[a]-=u;const c=new l.default(null);c.setFlatCoordinates(e,t.slice(u,d),o),n.push(c),u=d}return n},P.prototype.getType=function(){return s.default.MULTI_POLYGON},P.prototype.intersectsExtent=function(e){return S.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)},P.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=g.a.coordinatesss(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{const e=r[r.length-1];this.flatCoordinates.length=0===e.length?0:e[e.length-1]}this.changed()}else this.setFlatCoordinates(a.default.XY,null,this.endss_)},P.prototype.setFlatCoordinates=function(e,t,r){this.setFlatCoordinatesInternal(e,t),this.endss_=r,this.changed()},P.prototype.setPolygons=function(e){let t=this.getLayout();const r=[],n=[];for(let o=0,a=e.length;o<a;++o){const a=e[o];0===o&&(t=a.getLayout());const s=r.length,u=a.getEnds();for(let e=0,t=u.length;e<t;++e)u[e]+=s;Object(i.extend)(r,a.getFlatCoordinates()),n.push(u)}this.setFlatCoordinates(t,r,n)},t.default=P},22:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(2)),i=(c(r(8)),c(r(46))),o=d(r(0)),a=d(r(4)),s=c(r(16)),u=c(r(145)),l=c(r(38));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,r,n,i,o){u.default.call(this),this.addBlankBackgroundLayer_=!0,void 0!==o.addBlankBackgroundLayer&&(this.addBlankBackgroundLayer_=o.addBlankBackgroundLayer),this.$q_=r,this.$http_=e,this.treeUrl_=void 0,t.has("gmfTreeUrl")&&(this.treeUrl_=t.get("gmfTreeUrl")),this.cacheVersion_="0",t.has("cacheVersion")&&(this.cacheVersion_=t.get("cacheVersion")),this.ngeoLocation_=null,t.has("ngeoLocation")&&(this.ngeoLocation_=t.get("ngeoLocation")),this.layerHelper_=n,this.gettextCatalog=i,this.deferred_=r.defer(),this.promise_=this.deferred_.promise,this.loaded=!1,this.bgLayerPromise_=null};h.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions"],h.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions"],o.inherits(h,u.default),h.findGroupByLayerNodeName=function(e,t){for(var r=0,n=e.length;r<n;r++)for(var i=e[r],o=0,a=i.children.length;o<a;o++){var s=i.children[o],u=[];if(h.getFlatNodes(s,u),h.findObjectByName(u,t))return s}return null},h.findGroupByName=function(e,t){for(var r=0,n=e.length;r<n;r++)for(var i=e[r],o=0,a=i.children.length;o<a;o++){var s=i.children[o],u=[];if(h.getFlatInternalNodes(s,u),h.findObjectByName(u,t))return s}return null},h.findObjectByName=function(e,t){return a.find(e,function(e){return e.name===t})},h.findThemeByName=function(e,t){return h.findObjectByName(e,t)},h.getFlatInternalNodes=function(e,t){var r=e.children;if(void 0!==r){t.push(e);for(var n=0;n<r.length;n++)h.getFlatInternalNodes(r[n],t)}},h.getFlatNodes=function(e,t){var r=void 0,n=e.children;if(void 0!==n)for(r=0;r<n.length;r++)h.getFlatNodes(n[r],t);else t.push(e)},h.prototype.getBgLayers=function(e){var t=this,r=this.gettextCatalog;if(this.bgLayerPromise_)return this.bgLayerPromise_;var i=this.$q_,a=this.layerHelper_,u=function(e,t){t.set("label",e.name),t.set("metadata",e.metadata),t.set("dimensions",e.dimensions);var r=[];return function e(t,r){r.push(o.getUid(t)),(t.children||[]).forEach(function(t){e(t,r)})}(e,r),t.set("querySourceIds",r),t},d=function(e,t){if("WMTS"===t.type){var r=t;return n.default.assert(r.url,"Layer URL is required"),a.createWMTSLayerFromCapabilitites(r.url,r.layer||"",t.dimensions).then(u.bind(null,t)).then(null,function(e){var t='Unable to build layer "'+r.layer+'" from WMTSCapabilities: '+r.url+"\n";return t+='OpenLayers error is "'+e.message,console.error(t),i.resolve(void 0)})}if("WMS"===t.type){var o=t;n.default.assert(o.ogcServer,"An OGC server is required");var s=e[o.ogcServer];return n.default.assert(s,"The OGC server was not found"),n.default.assert(s.url,"The server URL is required"),n.default.assert(s.imageType,"The server image type is required"),u(t,a.createBasicWMSLayer(s.url,o.layers||"",s.imageType,s.type,void 0,t.dimensions,s.credential?"use-credentials":"anonymous"))}n.default.fail("Unsupported type: "+t.type)},c=function(e){var t=e.background_layers.map(function(t){var r=t.type;return"WMTS"===r||"WMS"===r?d(e.ogcServers,t):t.children?function(e,t){var r=t.children.map(function(e){return e}).reverse().map(d.bind(null,e));return i.all(r).then(function(e){var r=void 0;e&&(e=e.filter(function(e){return e}),r=new s.default(e));var n=a.createBasicGroup(r);return u(t,n),n})}(e.ogcServers,t):void 0},this);return i.all(t)}.bind(this);return this.bgLayerPromise_=this.promise_.then(c).then(function(e){var n=[];return t.addBlankBackgroundLayer_&&(r.getString("blank"),n.push(new l.default({label:"blank",metadata:{thumbnail:""}}))),e.forEach(function(e){e&&n.push(e)}),n}),this.bgLayerPromise_},h.prototype.getThemeObject=function(e){return this.promise_.then(function(t){return h.findThemeByName(t.themes,e)})},h.prototype.getThemesObject=function(){return this.promise_.then(function(e){return e.themes})},h.prototype.getBackgroundLayersObject=function(){return n.default.assert(null!==this.promise_),this.promise_.then(function(e){return e.background_layers})},h.prototype.getOgcServersObject=function(){return n.default.assert(null!==this.promise_),this.promise_.then(function(e){return e.ogcServers})},h.prototype.hasEditableLayers=function(){return n.default.assert(null!==this.promise_),this.promise_.then(this.hasEditableLayers_.bind(this))},h.prototype.hasEditableLayers_=function(e){var t=this;return e.themes.some(function(e){return e.children.some(t.hasNodeEditableLayers_.bind(t))})},h.prototype.hasNodeEditableLayers_=function(e){if(e.editable)return!0;var t=!1,r=e.children;return r&&r.length&&(t=r.some(this.hasNodeEditableLayers_.bind(this))),t},h.getSnappingConfig=function(e){return e.metadata&&void 0!==e.metadata.snappingConfig?e.metadata.snappingConfig:null},h.getNodeMaxResolution=function(e){var t=e.metadata,r=e.maxResolutionHint;return void 0===r&&void 0!==t&&(r=t.maxResolution),r},h.getNodeMinResolution=function(e){var t=e.metadata,r=e.minResolutionHint;return void 0===r&&void 0!==t&&(r=t.minResolution),r},h.prototype.loadThemes=function(e){var t=this;n.default.assert(this.treeUrl_,"gmfTreeUrl should be defined."),this.loaded&&(this.deferred_=this.$q_.defer(),this.promise_=this.deferred_.promise,this.bgLayerPromise_=null,this.loaded=!1),this.$http_.get(this.treeUrl_,{params:void 0!==e?{role:e,cache_version:this.cacheVersion_}:{cache_version:this.cacheVersion_},cache:!1,withCredentials:!0}).then(function(e){if(0!=e.data.errors.length){var r="The themes contain some errors:\n"+e.data.errors.join("\n");console.error(r),null!==t.ngeoLocation_&&t.ngeoLocation_.hasParam("debug")&&window.alert(r)}t.deferred_.resolve(e.data),t.dispatchEvent("change"),t.loaded=!0},function(e){t.deferred_.reject(e)})},h.NodeType={MIXED_GROUP:"MixedGroup",NOT_MIXED_GROUP:"NotMixedGroup",WMTS:"WMTS",WMS:"WMS"},(h.module=angular.module("gmfThemes",[i.default.module.name])).value("gmfThemesOptions",{}),h.module.service("gmfThemes",h),h.module.requires.push(h.module.name),t.default=h},28:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(2)),i=d(r(1)),o=d(r(87)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0)),s=d(r(3)),u=d(r(32)),l=d(r(71));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t,r){var i=this,d=void 0===r.ngeoLayertreeNotroot;this.isRoot=d;var c=r.ngeoLayertree;this.rootScope_=t,this.properties={},this.state_="off",this.node,d?e.$watch(c,function(e,t){i.node=e}):(this.node=e.$eval(c),n.default.assert(void 0!==this.node));var h=r.ngeoLayertreeMap,f=e.$eval(h);n.default.assert(void 0!==f),this.parent=e.$parent.layertreeCtrl,this.children=[],this.parent&&this.parent.children.push(this),e.$on("$destroy",function(){if(i.parent){var e=i.parent.children.indexOf(i);n.default.assert(e>=0),i.parent.children.splice(e,1)}}),this.uid=a.getUid(this),this.depth=d?0:this.parent.depth+1,e.uid=this.uid,e.depth=this.depth,this.map=f;var p=r.ngeoLayertreeNodelayer;if(void 0===p){var g=r.ngeoLayertreeNodelayerexpr,_=e.$eval(g);n.default.assertString(_),p=_}if(n.default.assert(void 0!==p),this.nodelayerExpr=p,this.layer=null,!d){var m=e.$eval(p,{treeCtrl:this})||null;m&&(n.default.assert(m instanceof l.default||m instanceof u.default),this.layer=m)}this.dataSource_=null,this.layer&&(o.default.layerLoading(this.layer,e),o.default.layer(this.layer),s.default.listen(this.layer,"change:opacity",function(){i.rootScope_.$broadcast("ngeo-layertree-opacity",i)}));var S=r.ngeoLayertreeListeners;if(void 0===S){var y=r.ngeoLayertreeListenersexpr;S=e.$eval(y)}void 0!==S&&n.default.assertString(S),this.listenersExpr=S,S&&e.$eval(S,{treeScope:e,treeCtrl:this}),e.layertreeCtrl=this};c.$inject=["$scope","$rootScope","$attrs"],c.$inject=["$scope","$rootScope","$attrs"],c.prototype.getState=function(){return this.state_},c.prototype.setState=function(e,t){var r=this;if(e!==this.state_){this.setStateInternal_(e),this.parent&&this.parent.refreshState();var n=this.isRoot?this.children:[c.getFirstParentTree(this)];(void 0===t||t)&&n.forEach(function(e){r.rootScope_.$broadcast("ngeo-layertree-state",r,e)})}},c.prototype.setStateInternal_=function(e){this.state_="on"===e?"on":"off",this.children.forEach(function(e){e.setStateInternal_(this.state_)},this)},c.prototype.refreshState=function(){var e=this.getCalculateState();this.state_!==e&&(this.state_=e,this.parent&&this.parent.refreshState())},c.prototype.getCalculateState=function(){if(void 0===this.node.children)return this.state_;var e=void 0,t=void 0;return this.children.some(function(r){if(e=r.getCalculateState(),t&&t!==e)return e="indeterminate";t=e}),e},c.prototype.getSetActive=function(e){var t=this.layer,r=this.map;if(t)return void 0===e?r.getLayers().getArray().indexOf(t)>=0:void(e?r.addLayer(t):r.removeLayer(t))},c.prototype.getDataSource=function(){return this.dataSource_},c.prototype.setDataSource=function(e){this.dataSource_=e},c.getFirstParentTree=function(e){for(var t=e;!t.parent.isRoot;)t=t.parent;return t},c.VisitorDecision={STOP:"STOP",SKIP:"SKIP",DESCEND:"DESCEND"},c.prototype.traverseDepthFirst=function(e){switch(e(this)||c.VisitorDecision.DESCEND){case c.VisitorDecision.STOP:return!0;case c.VisitorDecision.SKIP:return!1;case c.VisitorDecision.DESCEND:for(var t=0;t<this.children.length;++t){if(this.children[t].traverseDepthFirst(e))return!0}return!1;default:n.default.fail("Unhandled case")}},(c.module=angular.module("ngeoLayertreeController",[])).controller("ngeoLayertreeController",c),i.default.module.requires.push(c.module.name),t.default=c},46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(r(2)),i=_(r(1)),o=g(r(4)),a=_(r(86)),s=_(r(32)),u=_(r(122)),l=_(r(38)),d=g(r(6)),c=_(r(61)),h=_(r(69)),f=_(r(114)),p=g(r(54));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var m=function(e,t){this.$q_=e,this.$http_=t};m.$inject=["$q","$http"],m.$inject=["$q","$http"],m.GROUP_KEY="groupName",m.REFRESH_PARAM="random",m.prototype.createBasicWMSLayer=function(e,t,r,n,i,o,a){var s={FORMAT:r,LAYERS:t},l=void 0;i&&(s.TIME=i),n&&(s.SERVERTYPE=n,l=n.replace("qgisserver","qgis"));var d=new c.default({url:e,params:s,serverType:l,crossOrigin:a});return o&&d.updateParams(o),new u.default({source:d})},m.prototype.createBasicWMSLayerFromDataSource=function(e,t){var r=e.wmsUrl;n.default.assert(r);var i=e.getOGCLayerNames().join(","),o=e.ogcServerType,a=e.ogcImageType,s=this.createBasicWMSLayer(r,i,a,o,void 0,void 0,t);return s.setVisible(e.visible),s.set("querySourceIds",[e.id]),s},m.prototype.createWMTSLayerFromCapabilitites=function(e,t,r){var i=new a.default,s=new l.default({preload:1/0}),u=this.$q_;return this.$http_.get(e,{cache:!0}).then(function(a){var l=void 0;if(a.data&&(l=i.read(a.data)),l){var c=f.default.optionsFromCapabilities(l,{crossOrigin:"anonymous",layer:t});n.default.assert(c);var h=new f.default(c);r&&!d.isEmpty(r)&&h.updateDimensions(r),s.setSource(h);var p=l.Contents.Layer,g=o.find(p,function(e,r,n){return e.Identifier==t});return s.set("capabilitiesStyles",g.Style),u.resolve(s)}return u.reject("Failed to get WMTS capabilities from "+e)})},m.prototype.createWMTSLayerFromCapabilititesObj=function(e,t,r){var i=f.default.optionsFromCapabilities(e,{crossOrigin:"anonymous",layer:t.Identifier});n.default.assert(i);var o=new f.default(i);return r&&!d.isEmpty(r)&&o.updateDimensions(r),new l.default({capabilitiesStyles:t.Style,preload:1/0,source:o})},m.prototype.createBasicGroup=function(e){var t=new s.default;return e&&t.setLayers(e),t},m.prototype.getGroupFromMap=function(e,t){var r=void 0;return e.getLayerGroup().getLayers().getArray().some(function(e){return e.get(m.GROUP_KEY)===t&&(r=e,!0)}),r||((r=this.createBasicGroup()).set(m.GROUP_KEY,t),e.addLayer(r)),r},m.prototype.getFlatLayers=function(e){return this.getFlatLayers_(e,[])},m.prototype.getFlatLayers_=function(e,t){e instanceof s.default?e.getLayers().forEach(function(e){this.getFlatLayers_(e,t)},this):t.indexOf(e)<0&&t.push(e);return t},m.prototype.getLayerByName=function(e,t){var r=null;return t.some(function(t){if(t instanceof s.default){var n=t.getLayers().getArray();r=this.getLayerByName(e,n)}else t.get("layerNodeName")===e&&(r=t);return!!r},this),r},m.prototype.getWMTSLegendURL=function(e){var t=void 0,r=e.get("capabilitiesStyles");if(void 0!==r){var n=r[0].legendURL;void 0!==n&&(t=n[0].href)}return t},m.prototype.getWMSLegendURL=function(e,t,r,n){if(e){var i={FORMAT:"image/png",TRANSPARENT:!0,SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"GetLegendGraphic",LAYER:t};return void 0!==r&&(i.SCALE=r),void 0!==n&&(i.RULE=n),p.appendParams(e,i)}},m.prototype.isLayerVisible=function(e,t){if(!e.getVisible())return!1;var r=t.getView().getResolution();return r>e.getMinResolution()&&r<e.getMaxResolution()},m.prototype.refreshWMSLayer=function(e){var t=e.getSource();n.default.assert(t instanceof c.default||t instanceof h.default);var r=t,i=r.getParams();i[m.REFRESH_PARAM]=Math.random(),r.updateParams(i)},m.prototype.updateWMSLayerState=function(e,t,r){if(t.length<=0)e.setVisible(!1);else{e.setVisible(!0);var n=e.getSource();r?n.updateParams({LAYERS:t,TIME:r}):n.updateParams({LAYERS:t})}},m.prototype.getQuerySourceIds=function(e){return e.get("querySourceIds")},(m.module=angular.module("ngeoLayerHelper",[])).service("ngeoLayerHelper",m),i.default.module.requires.push(m.module.name),t.default=m},47:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(8)),i=p(r(22)),o=p(r(2)),a=p(r(28)),s=p(r(59)),u=p(r(95)),l=p(r(48)),d=f(r(4)),c=p(r(3)),h=f(r(6));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e,t,r,n,i,o,a){this.$timeout_=e,this.$injector_=t,this.gettextCatalog_=r,this.layerHelper_=n,this.ngeoNotification_=i,this.gmfThemes_=o,this.root={children:[]},this.rootCtrl=null,this.numberOfGroupsToAddInThisDigestLoop=0,this.groupsToAddInThisDigestLoop_=[],this.promiseForGroupsToAddInThisDigestLoop_=null,this.ngeoStateManager_=a,this.ogcServers_=null,c.default.listen(this.gmfThemes_,"change",this.handleThemesChange_,this)};g.$inject=["$timeout","$injector","gettextCatalog","ngeoLayerHelper","ngeoNotification","gmfThemes","ngeoStateManager"],g.$inject=["$timeout","$injector","gettextCatalog","ngeoLayerHelper","ngeoNotification","gmfThemes","ngeoStateManager"],g.prototype.handleThemesChange_=function(){var e=this;this.gmfThemes_.getOgcServersObject().then(function(t){e.ogcServers_=t}),this.rootCtrl&&this.rootCtrl.children&&this.gmfThemes_.getThemesObject().then(function(t){e.refreshFirstLevelGroups_(t)})},g.prototype.setFirstLevelGroups=function(e){return this.root.children.length=0,this.ngeoStateManager_.deleteParam(n.default.PermalinkParam.TREE_GROUPS),this.addFirstLevelGroups(e)},g.prototype.addFirstLevelGroups=function(e,t,r){var n=this,i=[];return e.slice().reverse().forEach(function(e){n.addFirstLevelGroup_(e)||i.push(e)}),i.length>0&&!r&&this.notifyCantAddGroups_(i),0===i.length},g.prototype.updateTreeGroupsState_=function(e){var t={};t[n.default.PermalinkParam.TREE_GROUPS]=e.map(function(e){return e.name}).join(","),this.ngeoStateManager_.updateState(t),this.$injector_.has("gmfPermalink")&&this.$injector_.get("gmfPermalink").cleanParams(e)},g.prototype.addFirstLevelGroup_=function(e){var t=this,r=!1,n=e.id;return this.root.children.some(function(e){if(n===e.id)return r=!0},this),this.groupsToAddInThisDigestLoop_.some(function(e){if(n===e.id)return r=!0},this),!r&&(this.groupsToAddInThisDigestLoop_.push(e),this.numberOfGroupsToAddInThisDigestLoop=0,null!==this.promiseForGroupsToAddInThisDigestLoop_&&this.$timeout_.cancel(this.promiseForGroupsToAddInThisDigestLoop_),this.promiseForGroupsToAddInThisDigestLoop_=this.$timeout_(function(){t.numberOfGroupsToAddInThisDigestLoop=t.groupsToAddInThisDigestLoop_.length,t.groupsToAddInThisDigestLoop_.forEach(function(e){this.root.children.unshift(e)},t),t.updateTreeGroupsState_(t.root.children),t.groupsToAddInThisDigestLoop_.length=0,t.promiseForGroupsToAddInThisDigestLoop_=null}),!0)},g.prototype.addGroupByName=function(e,t){var r=this;this.gmfThemes_.getThemesObject().then(function(n){var o=i.default.findGroupByName(n,e);o&&r.addFirstLevelGroups([o],t,!1)})},g.prototype.addGroupByLayerName=function(e,t,r){var n=this;this.gmfThemes_.getThemesObject().then(function(o){var s=i.default.findGroupByLayerNodeName(o,e);if(s){var u=n.addFirstLevelGroups([s],t,r);n.$timeout_(function(){var t=n.getTreeCtrlByNodeId(s.id);if(t){var r=void 0;t.traverseDepthFirst(function(t){if(t.node.name===e)return r=t,a.default.VisitorDecision.STOP}),u&&t.setState("off"),r&&r.setState("on")}else console.warn("Tree controller not found, unable to add the group")})}})},g.prototype.removeGroup=function(e){var t=this.root.children,r=0,n=!1;t.some(function(t){if(t.name===e.name)return n=!0;r++}),n&&(t.splice(r,1),this.updateTreeGroupsState_(t))},g.prototype.removeAll=function(){for(;this.root.children.length;)this.removeGroup(this.root.children[0])},g.prototype.cloneGroupNode_=function(e,t){var r=h.assign({},e);return this.toggleNodeCheck_(r,t),r},g.prototype.toggleNodeCheck_=function(e,t){e.children&&e.children.forEach(function(e){e.children?this.toggleNodeCheck_(e,t):e.metadata&&(e.metadata.isChecked=d.includes(t,e.name))},this)},g.prototype.notifyCantAddGroups_=function(e){var t=[],r=this.gettextCatalog_;e.forEach(function(e){t.push(e.name)});var n=t.length<2?r.getString("group is already loaded."):r.getString("groups are already loaded.");this.ngeoNotification_.notify({msg:t.join(", ")+" "+n,type:s.default.Type.INFORMATION})},g.prototype.getTreeCtrlByNodeId=function(e){var t=null;return this.rootCtrl&&this.rootCtrl.traverseDepthFirst&&this.rootCtrl.traverseDepthFirst(function(r){if(r.node.id===e)return t=r,a.default.VisitorDecision.STOP}),t},g.prototype.getOgcServer=function(e){if(e.parent.node.mixed){var t=e.node;return o.default.assert(t.ogcServer),this.ogcServers_[t.ogcServer]}for(var r=e;!r.parent.isRoot;)r=r.parent;var n=r.node;return o.default.assert(n.ogcServer),this.ogcServers_[n.ogcServer]},g.prototype.refreshFirstLevelGroups_=function(e){var t=this,r={};this.rootCtrl.children.map(function(e){var n=e.node.name;r[n]=t.getFirstLevelGroupFullState_(e)});var n=[];this.root.children.map(function(o){var a=o.name,s=i.default.findGroupByName(e,a);if(s){var u=r[a];u&&t.setNodeMetadataFromFullState_(s,u),n.push(s)}}),this.setFirstLevelGroups(n),this.$timeout_(function(){t.updateTreeGroupsState_(t.root.children)})},g.prototype.getFirstLevelGroupFullState_=function(t){var r=this,n={};t.children.map(function(e){n[e.node.name]=r.getFirstLevelGroupFullState_(e)});var i=void 0,o=void 0,a=void 0;if(t.children.length>0){var s=e("#gmf-layertree-layer-group-"+t.uid);s&&(o=s.hasClass("in"))}else{i="on"===(i=t.getState())||"off"!==i&&void 0;var u=e("#gmf-layertree-node-"+t.uid+"-legend");u&&(a=u.is(":visible"))}return{children:n,isChecked:i,isExpanded:o,isLegendExpanded:a}},g.prototype.setNodeMetadataFromFullState_=function(e,t){var r=this;if(!t)return e;e.children&&e.children.map(function(e){r.setNodeMetadataFromFullState_(e,t.children[e.name])});var n=e.metadata;return n.isChecked=t.isChecked,n.isExpanded=t.isExpanded,n.isLegendExpanded=t.isLegendExpanded,e},(g.module=angular.module("gmfTreeManager",[i.default.module.name,a.default.module.name,u.default.module.name,l.default.module.name])).service("gmfTreeManager",g),n.default.module.requires.push(g.module.name),t.default=g}).call(t,r(27))},48:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(2)),i=a(r(1)),o=a(r(70));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){var r=this;this.initialState={},this.ngeoLocation=e,this.usedKeyRegexp=t,this.useLocalStorage_,this.setUseLocalStorage(!1);var i=e.getParamKeys().filter(function(e){return"debug"!=e&&"no_redirect"!=e});if(0===i.length){if(this.useLocalStorage_){var o=function(e){n.default.assert(e),r.usedKeyRegexp.some(function(t){if(e.match(t)){var n=window.localStorage[e];return r.initialState[e]=void 0!==n||null!==n?n:"",!0}})};for(var a in window.localStorage)o(a)}}else i.forEach(function(e){r.usedKeyRegexp.some(function(t){if(e.match(t)){var n=r.ngeoLocation.getParam(e);if(void 0!==n)return r.initialState[e]=n,!0}})})};s.$inject=["ngeoLocation","ngeoUsedKeyRegexp"],s.$inject=["ngeoLocation","ngeoUsedKeyRegexp"],s.prototype.setUseLocalStorage=function(e){if(this.useLocalStorage_=e,this.useLocalStorage_)try{"localStorage"in window?(window.localStorage.test="",delete window.localStorage.test):this.useLocalStorage_=!1}catch(e){console.error(e),this.useLocalStorage_=!1}return this.useLocalStorage_},s.prototype.getInitialValue=function(e){return this.initialState[e]},s.prototype.getInitialStringValue=function(e){var t=this.initialState[e];if(void 0!==t)return t},s.prototype.getInitialNumberValue=function(e){var t=this.initialState[e];if(void 0!==t)return parseFloat(t)},s.prototype.getInitialBooleanValue=function(e){var t=this.initialState[e];if(void 0!==t)return"true"===t},s.prototype.updateState=function(e){if(this.ngeoLocation.updateParams(e),this.useLocalStorage_)for(var t in e){n.default.assert(t);var r=e[t];n.default.assert(void 0!==r),window.localStorage[t]=r}},s.prototype.deleteParam=function(e){this.ngeoLocation.deleteParam(e),this.useLocalStorage_&&delete window.localStorage[e]},(s.module=angular.module("ngeoStateManager",[o.default.module.name])).service("ngeoStateManager",s),s.module.value("ngeoUsedKeyRegexp",[new RegExp(".*")]),i.default.module.requires.push(s.module.name),t.default=s},50:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9);const i=function(){};i.prototype.read=function(e){if(n.default.isDocument(e))return this.readFromDocument(e);if(n.default.isNode(e))return this.readFromNode(e);if("string"==typeof e){const t=n.default.parse(e);return this.readFromDocument(t)}return null},i.prototype.readFromDocument=function(e){},i.prototype.readFromNode=function(e){},t.default=i},519:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(520),r(167);var n=o(r(8)),i=o(r(521));o(r(47));function o(e){return e&&e.__esModule?e:{default:e}}var a={};a.module=angular.module("gmfapp",[n.default.module.name,i.default.name]),a.module.value("gmfTreeUrl","https://geomapfish-demo.camptocamp.net/2.2/wsgi/themes?version=2&background=background"),a.constant("angularLocaleScript","../build/angular-locale_{{locale}}.js"),a.MainController=function(e,t,r){this.filter=function(e){return"Enseignement"!==e.name},this.manager=r,t.loadThemes()},a.MainController.$inject=["$http","gmfThemes","gmfThemeManager"],a.module.controller("MainController",a.MainController),t.default=a},520:function(e,t){},521:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(106)),i=a(r(522)),o=a(r(22));function a(e){return e&&e.__esModule?e:{default:e}}var s=angular.module("gmfThemeModule",[i.default.name,n.default.module.name,o.default.module.name]);t.default=s},522:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(8)),i=s(r(106)),o=s(r(22)),a=s(r(3));function s(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("gmfThemeSelectorComponent",[i.default.module.name,o.default.module.name]);n.default.module.requires.push(u.name),u.component_={bindings:{filter:"<gmfThemeselectorFilter"},controller:"gmfThemeselectorController",templateUrl:function(){return n.default.baseModuleTemplateUrl+"/theme/selectorComponent.html"}},u.component("gmfThemeselector",u.component_),u.Controller_=function(e,t,r){this.gmfThemeManager=t,this.gmfThemes_=r,this.themes,this.filter,this.listenerKeys_=[],this.listenerKeys_.push(a.default.listen(this.gmfThemes_,"change",this.setThemes_,this)),e.$on("$destroy",this.handleDestroy_.bind(this))},u.Controller_.$inject=["$scope","gmfThemeManager","gmfThemes"],u.Controller_.prototype.setThemes_=function(){var e=this;this.gmfThemes_.getThemesObject().then(function(t){e.themes=e.filter?t.filter(e.filter):t})},u.Controller_.prototype.setTheme=function(e,t){e&&this.gmfThemeManager.addTheme(e,t)},u.Controller_.prototype.handleDestroy_=function(){this.listenerKeys_.forEach(a.default.unlistenByKey),this.listenerKeys_.length=0},u.controller("gmfThemeselectorController",u.Controller_),t.default=u},53:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(99)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(5)),o=c(r(10)),a=c(r(20)),s=c(r(18)),u=c(r(21)),l=c(r(12)),d=c(r(11));function c(e){return e&&e.__esModule?e:{default:e}}var h={toMulti:function(e){var t=void 0;return e instanceof l.default?(t=new a.default([])).appendPoint(e):e instanceof o.default?(t=new s.default([])).appendLineString(e):e instanceof d.default?(t=new u.default([])).appendPolygon(e):t=e,t},isSafari:function(){return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")},colorZeroPadding:function(e){return 1==e.length?"0"+e:e},extentToRectangle:function(e){return[i.getTopLeft(e),i.getTopRight(e),i.getBottomRight(e),i.getBottomLeft(e),i.getTopLeft(e)]},rgbArrayToHex:function(e){var t=e[0],r=e[1],n=e[2];if(t!=(255&t)||r!=(255&r)||n!=(255&n))throw Error('"('+t+","+r+","+n+')" is not a valid RGB color');return"#"+h.colorZeroPadding(t.toString(16))+h.colorZeroPadding(r.toString(16))+h.colorZeroPadding(n.toString(16))},decodeQueryString:function(e){var t={};if(e){var r=e.substring(1).split("&"),n=!0,i=!1,o=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,l=u.indexOf("=");if(l>=0){var d=u.substring(0,l),c=u.substring(l+1);t[decodeURIComponent(d)]=decodeURIComponent(c)}else t[u]=""}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}return t},encodeQueryString:function(e){var t=[];for(var r in e){var n=e[r];t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}return t.join("&")},deleteCondition:function(e){return n.default.noModifierKeys(e)&&n.default.singleClick(e)}};t.default=h},59:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};n.prototype.showMessage=function(e){},n.prototype.show=function(e){this.getMessageObjects(e).forEach(this.showMessage,this)},n.prototype.error=function(e){this.show(this.getMessageObjects(e,n.Type.ERROR))},n.prototype.info=function(e){this.show(this.getMessageObjects(e,n.Type.INFORMATION))},n.prototype.success=function(e){this.show(this.getMessageObjects(e,n.Type.SUCCESS))},n.prototype.warn=function(e){this.show(this.getMessageObjects(e,n.Type.WARNING))},n.prototype.getMessageObjects=function(e,t){var r=[],i=null,o=n.Type.INFORMATION;return"string"==typeof e?r.push({msg:e,type:void 0!==t?t:o}):Array.isArray(e)?e.forEach(function(n){"string"==typeof e?i={msg:n,type:void 0!==t?t:o}:(i=n,void 0!==t&&(i.type=t)),r.push(i)},this):(i=e,void 0!==t&&(i.type=t),void 0===i.type&&(i.type=o),r.push(i)),r},n.Type={ERROR:"error",INFORMATION:"information",SUCCESS:"success",WARNING:"warning"},t.default=n},60:function(e,t,r){"use strict";const n={};n.readHref=function(e){return e.getAttributeNS("http://www.w3.org/1999/xlink","href")},t.a=n},61:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66),i=r(0),o=r(171),a=r(156),s=r(3),u=r(25),l=r(5);const d=function(e,t,r,n,i,s){o.a.call(this,e,t,r,a.a.IDLE),this.src_=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.imageListenerKeys_=null,this.state=a.a.IDLE,this.imageLoadFunction_=s};Object(i.inherits)(d,o.a),d.prototype.getImage=function(){return this.image_},d.prototype.handleImageError_=function(){this.state=a.a.ERROR,this.unlistenImage_(),this.changed()},d.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.getHeight)(this.extent)/this.image_.height),this.state=a.a.LOADED,this.unlistenImage_(),this.changed()},d.prototype.load=function(){this.state!=a.a.IDLE&&this.state!=a.a.ERROR||(this.state=a.a.LOADING,this.changed(),this.imageListenerKeys_=[s.default.listenOnce(this.image_,u.a.ERROR,this.handleImageError_,this),s.default.listenOnce(this.image_,u.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},d.prototype.setImage=function(e){this.image_=e},d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.default.unlistenByKey),this.imageListenerKeys_=null};var c=d,h=r(24),f=r(6),p=r(7),g=r(94),_=r(104),m=r(67),S=r(49),y=r(54);const v=function(e){const t=e||{};_.default.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:_.default.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5};Object(i.inherits)(v,_.default),v.GETFEATUREINFO_IMAGE_SIZE_=[101,101],v.prototype.getGetFeatureInfoUrl=function(e,t,r,i){if(void 0===this.url_)return;const o=Object(p.get)(r),a=this.getProjection();a&&a!==o&&(t=g.a.calculateSourceResolution(a,o,e,t),e=Object(p.transform)(e,o,a));const s=Object(l.getForViewAndSize)(e,t,0,v.GETFEATUREINFO_IMAGE_SIZE_),u={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(f.assign)(u,this.params_,i);const d=Math.floor((e[0]-s[0])/t),c=Math.floor((s[3]-e[1])/t);return u[this.v13_?"I":"X"]=d,u[this.v13_?"J":"Y"]=c,this.getRequestUrl_(s,v.GETFEATUREINFO_IMAGE_SIZE_,1,a||o,u)},v.prototype.getParams=function(){return this.params_},v.prototype.getImageInternal=function(e,t,r,i){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);const o=t/r,a=Object(l.getCenter)(e),d=Math.ceil(Object(l.getWidth)(e)/o),h=Math.ceil(Object(l.getHeight)(e)/o),p=Object(l.getForViewAndSize)(a,o,0,[d,h]),g=Math.ceil(this.ratio_*Object(l.getWidth)(e)/o),_=Math.ceil(this.ratio_*Object(l.getHeight)(e)/o),m=Object(l.getForViewAndSize)(a,o,0,[g,_]),S=this.image_;if(S&&this.renderedRevision_==this.getRevision()&&S.getResolution()==t&&S.getPixelRatio()==r&&Object(l.containsExtent)(S.getExtent(),p))return S;const y={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(f.assign)(y,this.params_),this.imageSize_[0]=Math.round(Object(l.getWidth)(m)/o),this.imageSize_[1]=Math.round(Object(l.getHeight)(m)/o);const v=this.getRequestUrl_(m,this.imageSize_,r,i,y);return this.image_=new c(m,t,r,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),s.default.listen(this.image_,u.a.CHANGE,this.handleImageChange,this),this.image_},v.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},v.prototype.getRequestUrl_=function(e,t,r,n,i){if(Object(h.a)(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=r)switch(this.serverType_){case m.a.GEOSERVER:const e=90*r+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+e:i.FORMAT_OPTIONS="dpi:"+e;break;case m.a.MAPSERVER:i.MAP_RESOLUTION=90*r;break;case m.a.CARMENTA_SERVER:case m.a.QGIS:i.DPI=90*r;break;default:Object(h.a)(!1,8)}i.WIDTH=t[0],i.HEIGHT=t[1];const o=n.getAxisOrientation();let a;return a=this.v13_&&"ne"==o.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,i.BBOX=a.join(","),Object(y.appendParams)(this.url_,i)},v.prototype.getUrl=function(){return this.url_},v.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},v.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},v.prototype.updateParams=function(e){Object(f.assign)(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},v.prototype.updateV13_=function(){const e=this.params_.VERSION||n.a;this.v13_=S.default.compareVersions(e,"1.3")>=0};t.default=v},66:function(e,t,r){"use strict";t.a="1.3.0"},67:function(e,t,r){"use strict";t.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},69:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66),i=r(0),o=r(24),a=r(5),s=r(6),u=r(34),l=r(7),d=r(94),c=r(160),h=r(109),f=r(67),p=r(159),g=r(49),_=r(54);const m=function(e){const t=e||{},r=t.params||{},n=!("TRANSPARENT"in r)||r.TRANSPARENT;h.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=r,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=Object(a.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(i.inherits)(m,h.a),m.prototype.getGetFeatureInfoUrl=function(e,t,r,i){const o=Object(l.get)(r),u=this.getProjection();let h=this.getTileGrid();h||(h=this.getTileGridForProjection(o));const f=h.getTileCoordForCoordAndResolution(e,t);if(h.getResolutions().length<=f[0])return;let p=h.getResolution(f[0]),g=h.getTileCoordExtent(f,this.tmpExtent_),_=c.default.toSize(h.getTileSize(f[0]),this.tmpSize);const m=this.gutter_;0!==m&&(_=c.default.buffer(_,m,this.tmpSize),g=Object(a.buffer)(g,p*m,g)),u&&u!==o&&(p=d.a.calculateSourceResolution(u,o,e,p),g=Object(l.transformExtent)(g,o,u),e=Object(l.transform)(e,o,u));const S={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(s.assign)(S,this.params_,i);const y=Math.floor((e[0]-g[0])/p),v=Math.floor((g[3]-e[1])/p);return S[this.v13_?"I":"X"]=y,S[this.v13_?"J":"Y"]=v,this.getRequestUrl_(f,_,g,1,u||o,S)},m.prototype.getGutterInternal=function(){return this.gutter_},m.prototype.getParams=function(){return this.params_},m.prototype.getRequestUrl_=function(e,t,r,n,i,a){const s=this.urls;if(!s)return;if(a.WIDTH=t[0],a.HEIGHT=t[1],a[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=n)switch(this.serverType_){case f.a.GEOSERVER:const e=90*n+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+e:a.FORMAT_OPTIONS="dpi:"+e;break;case f.a.MAPSERVER:a.MAP_RESOLUTION=90*n;break;case f.a.CARMENTA_SERVER:case f.a.QGIS:a.DPI=90*n;break;default:Object(o.a)(!1,52)}const l=i.getAxisOrientation(),d=r;if(this.v13_&&"ne"==l.substr(0,2)){let e;e=r[0],d[0]=r[1],d[1]=e,e=r[2],d[2]=r[3],d[3]=e}let c;if(a.BBOX=d.join(","),1==s.length)c=s[0];else{c=s[Object(u.modulo)(p.a.hash(e),s.length)]}return Object(_.appendParams)(c,a)},m.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},m.prototype.getKeyForParams_=function(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")},m.prototype.fixedTileUrlFunction=function(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);const o=i.getResolution(e[0]);let u=i.getTileCoordExtent(e,this.tmpExtent_),l=c.default.toSize(i.getTileSize(e[0]),this.tmpSize);const d=this.gutter_;0!==d&&(l=c.default.buffer(l,d,this.tmpSize),u=Object(a.buffer)(u,o*d,u)),1!=t&&(l=c.default.scale(l,t,this.tmpSize));const h={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(s.assign)(h,this.params_),this.getRequestUrl_(e,l,u,t,r,h)},m.prototype.updateParams=function(e){Object(s.assign)(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},m.prototype.updateV13_=function(){const e=this.params_.VERSION||n.a;this.v13_=g.default.compareVersions(e,"1.3")>=0},t.default=m},70:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(2)),i=a(r(1)),o=a(r(53));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){this.history_=t,this.schema_=e.protocol.substring(0,e.protocol.length-1),this.domain_=e.hostname,this.port_=e.port?parseInt(e.port,10):void 0,this.path_=e.pathname,this.queryData_=o.default.decodeQueryString(e.search),this.fragment_=o.default.decodeQueryString(e.hash)};s.replaceState=function(e,t){try{e.replaceState(null,"",t)}catch(e){}},s.prototype.getPath=function(){return this.path_},s.prototype.getUriString=function(){var e=[];this.schema_&&e.push(this.schema_,":"),(this.domain_||"file"===this.schema_)&&(e.push("//"),e.push(this.domain_),void 0!==this.port_&&e.push(":",String(this.port_))),this.path_&&(this.domain_&&"/"!==this.path_.charAt(0)&&e.push("/"),e.push(this.path_));var t=o.default.encodeQueryString(this.queryData_);t.length>0&&e.push("?",t);var r=o.default.encodeQueryString(this.fragment_);return r.length>0&&e.push("#",r),e.join("")},s.prototype.hasParam=function(e){return e in this.queryData_},s.prototype.hasFragmentParam=function(e){return e in this.fragment_},s.prototype.getParam=function(e){return this.queryData_[e]},s.prototype.getFragmentParam=function(e){return this.fragment_[e]},s.prototype.getParamAsInt=function(e){var t=this.getParam(e);if(void 0!==t){n.default.assertString(t);var r=parseInt(t,10);return isNaN(r)?void 0:r}},s.prototype.getParamAsFloat=function(e){var t=this.getParam(e);if(void 0!==t){n.default.assertString(t);var r=parseFloat(t);return isNaN(r)?void 0:r}},s.prototype.getFragmentParamAsInt=function(e){var t=this.getFragmentParam(e);if(void 0!==t){n.default.assertString(t);var r=parseInt(t,10);return isNaN(r)?void 0:r}},s.prototype.getParamKeys=function(){var e=[];for(var t in this.queryData_)e.push(t);return e},s.prototype.getFragmentParamKeys=function(){var e=[];for(var t in this.fragment_)e.push(t);return e},s.prototype.getParamKeysWithPrefix=function(e){var t=[];for(var r in this.queryData_)0==r.indexOf(e)&&t.push(r);return t},s.prototype.getFragmentParamKeysWithPrefix=function(e){var t=[];for(var r in this.fragment_)0==r.indexOf(e)&&t.push(r);return t},s.prototype.updateParams=function(e){for(var t in e)this.queryData_[t]=e[t]},s.prototype.updateFragmentParams=function(e){for(var t in e)this.fragment_[t]=e[t]},s.prototype.deleteParam=function(e){delete this.queryData_[e]},s.prototype.deleteFragmentParam=function(e){delete this.fragment_[e]},s.prototype.refresh=function(){s.replaceState(this.history_,this.getUriString())},s.prototype.setPath=function(e){this.path_=e},(s.LocationFactory=function(e,t){var r=t.history,n=new s(t.location,t.history),i=n.getUriString();return e.$watch(function(){var t=n.getUriString();i!==t&&e.$evalAsync(function(){i=t,void 0!==r&&void 0!==r.replaceState&&s.replaceState(r,t),e.$broadcast("ngeoLocationChange")})}),n}).$inject=["$rootScope","$window"],(s.MockProvider=function(e){e.$get=function(){return{absUrl:function(){return""},hash:function(e){return void 0!==e?this:""},host:function(){return""},path:function(e){return void 0!==e?this:""},port:function(){return 0},protocol:function(){return""},replace:function(){},search:function(e,t){return void 0!==e?this:{}},url:function(e){return""}}}}).$inject=["$locationProvider"],(s.module=angular.module("ngeoLocation",[])).factory("ngeoLocation",s.LocationFactory),i.default.module.requires.push(s.module.name),t.default=s},86:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(5),o=r(60),a=r(50),s=r(17),u=r(9);const l=function(){a.default.call(this)};Object(n.inherits)(l,a.default),l.prototype.readFromDocument=function(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},l.prototype.readFromNode=function(e){const t=u.default.pushParseAndPop({},l.PARSERS_,e,[]);return t||null},l.readAddress_=function(e,t){return u.default.pushParseAndPop({},l.ADDRESS_PARSERS_,e,t)},l.readAllowedValues_=function(e,t){return u.default.pushParseAndPop({},l.ALLOWED_VALUES_PARSERS_,e,t)},l.readConstraint_=function(e,t){const r=e.getAttribute("name");if(r)return u.default.pushParseAndPop({name:r},l.CONSTRAINT_PARSERS_,e,t)},l.readContactInfo_=function(e,t){return u.default.pushParseAndPop({},l.CONTACT_INFO_PARSERS_,e,t)},l.readDcp_=function(e,t){return u.default.pushParseAndPop({},l.DCP_PARSERS_,e,t)},l.readGet_=function(e,t){const r=o.a.readHref(e);if(r)return u.default.pushParseAndPop({href:r},l.REQUEST_METHOD_PARSERS_,e,t)},l.readHttp_=function(e,t){return u.default.pushParseAndPop({},l.HTTP_PARSERS_,e,t)},l.readOperation_=function(e,t){const r=e.getAttribute("name"),n=u.default.pushParseAndPop({},l.OPERATION_PARSERS_,e,t);n&&(t[t.length-1][r]=n)},l.readOperationsMetadata_=function(e,t){return u.default.pushParseAndPop({},l.OPERATIONS_METADATA_PARSERS_,e,t)},l.readPhone_=function(e,t){return u.default.pushParseAndPop({},l.PHONE_PARSERS_,e,t)},l.readServiceIdentification_=function(e,t){return u.default.pushParseAndPop({},l.SERVICE_IDENTIFICATION_PARSERS_,e,t)},l.readServiceContact_=function(e,t){return u.default.pushParseAndPop({},l.SERVICE_CONTACT_PARSERS_,e,t)},l.readServiceProvider_=function(e,t){return u.default.pushParseAndPop({},l.SERVICE_PROVIDER_PARSERS_,e,t)},l.readValue_=function(e,t){return s.a.readString(e)},l.NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"],l.PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{ServiceIdentification:u.default.makeObjectPropertySetter(l.readServiceIdentification_),ServiceProvider:u.default.makeObjectPropertySetter(l.readServiceProvider_),OperationsMetadata:u.default.makeObjectPropertySetter(l.readOperationsMetadata_)}),l.ADDRESS_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{DeliveryPoint:u.default.makeObjectPropertySetter(s.a.readString),City:u.default.makeObjectPropertySetter(s.a.readString),AdministrativeArea:u.default.makeObjectPropertySetter(s.a.readString),PostalCode:u.default.makeObjectPropertySetter(s.a.readString),Country:u.default.makeObjectPropertySetter(s.a.readString),ElectronicMailAddress:u.default.makeObjectPropertySetter(s.a.readString)}),l.ALLOWED_VALUES_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{Value:u.default.makeObjectPropertyPusher(l.readValue_)}),l.CONSTRAINT_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{AllowedValues:u.default.makeObjectPropertySetter(l.readAllowedValues_)}),l.CONTACT_INFO_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{Phone:u.default.makeObjectPropertySetter(l.readPhone_),Address:u.default.makeObjectPropertySetter(l.readAddress_)}),l.DCP_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{HTTP:u.default.makeObjectPropertySetter(l.readHttp_)}),l.HTTP_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{Get:u.default.makeObjectPropertyPusher(l.readGet_),Post:void 0}),l.OPERATION_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{DCP:u.default.makeObjectPropertySetter(l.readDcp_)}),l.OPERATIONS_METADATA_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{Operation:l.readOperation_}),l.PHONE_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{Voice:u.default.makeObjectPropertySetter(s.a.readString),Facsimile:u.default.makeObjectPropertySetter(s.a.readString)}),l.REQUEST_METHOD_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{Constraint:u.default.makeObjectPropertyPusher(l.readConstraint_)}),l.SERVICE_CONTACT_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{IndividualName:u.default.makeObjectPropertySetter(s.a.readString),PositionName:u.default.makeObjectPropertySetter(s.a.readString),ContactInfo:u.default.makeObjectPropertySetter(l.readContactInfo_)}),l.SERVICE_IDENTIFICATION_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{Abstract:u.default.makeObjectPropertySetter(s.a.readString),AccessConstraints:u.default.makeObjectPropertySetter(s.a.readString),Fees:u.default.makeObjectPropertySetter(s.a.readString),Title:u.default.makeObjectPropertySetter(s.a.readString),ServiceTypeVersion:u.default.makeObjectPropertySetter(s.a.readString),ServiceType:u.default.makeObjectPropertySetter(s.a.readString)}),l.SERVICE_PROVIDER_PARSERS_=u.default.makeStructureNS(l.NAMESPACE_URIS_,{ProviderName:u.default.makeObjectPropertySetter(s.a.readString),ProviderSite:u.default.makeObjectPropertySetter(o.a.readHref),ServiceContact:u.default.makeObjectPropertySetter(l.readServiceContact_)});var d=l;const c=function(){a.default.call(this),this.owsParser_=new d};Object(n.inherits)(c,a.default),c.prototype.read,c.prototype.readFromDocument=function(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},c.prototype.readFromNode=function(e){const t=e.getAttribute("version").trim();let r=this.owsParser_.readFromNode(e);return r?(r.version=t,(r=u.default.pushParseAndPop(r,c.PARSERS_,e,[]))||null):null},c.readContents_=function(e,t){return u.default.pushParseAndPop({},c.CONTENTS_PARSERS_,e,t)},c.readLayer_=function(e,t){return u.default.pushParseAndPop({},c.LAYER_PARSERS_,e,t)},c.readTileMatrixSet_=function(e,t){return u.default.pushParseAndPop({},c.TMS_PARSERS_,e,t)},c.readStyle_=function(e,t){const r=u.default.pushParseAndPop({},c.STYLE_PARSERS_,e,t);if(!r)return;const n="true"===e.getAttribute("isDefault");return r.isDefault=n,r},c.readTileMatrixSetLink_=function(e,t){return u.default.pushParseAndPop({},c.TMS_LINKS_PARSERS_,e,t)},c.readDimensions_=function(e,t){return u.default.pushParseAndPop({},c.DIMENSION_PARSERS_,e,t)},c.readResourceUrl_=function(e,t){const r=e.getAttribute("format"),n=e.getAttribute("template"),i=e.getAttribute("resourceType"),o={};return r&&(o.format=r),n&&(o.template=n),i&&(o.resourceType=i),o},c.readWgs84BoundingBox_=function(e,t){const r=u.default.pushParseAndPop([],c.WGS84_BBOX_READERS_,e,t);if(2==r.length)return Object(i.boundingExtent)(r)},c.readLegendUrl_=function(e,t){const r={};return r.format=e.getAttribute("format"),r.href=o.a.readHref(e),r},c.readCoordinates_=function(e,t){const r=s.a.readString(e).split(" ");if(!r||2!=r.length)return;const n=+r[0],i=+r[1];return isNaN(n)||isNaN(i)?void 0:[n,i]},c.readTileMatrix_=function(e,t){return u.default.pushParseAndPop({},c.TM_PARSERS_,e,t)},c.readTileMatrixLimitsList_=function(e,t){return u.default.pushParseAndPop([],c.TMS_LIMITS_LIST_PARSERS_,e,t)},c.readTileMatrixLimits_=function(e,t){return u.default.pushParseAndPop({},c.TMS_LIMITS_PARSERS_,e,t)},c.NAMESPACE_URIS_=[null,"http://www.opengis.net/wmts/1.0"],c.OWS_NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"],c.PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{Contents:u.default.makeObjectPropertySetter(c.readContents_)}),c.CONTENTS_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{Layer:u.default.makeObjectPropertyPusher(c.readLayer_),TileMatrixSet:u.default.makeObjectPropertyPusher(c.readTileMatrixSet_)}),c.LAYER_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{Style:u.default.makeObjectPropertyPusher(c.readStyle_),Format:u.default.makeObjectPropertyPusher(s.a.readString),TileMatrixSetLink:u.default.makeObjectPropertyPusher(c.readTileMatrixSetLink_),Dimension:u.default.makeObjectPropertyPusher(c.readDimensions_),ResourceURL:u.default.makeObjectPropertyPusher(c.readResourceUrl_)},u.default.makeStructureNS(c.OWS_NAMESPACE_URIS_,{Title:u.default.makeObjectPropertySetter(s.a.readString),Abstract:u.default.makeObjectPropertySetter(s.a.readString),WGS84BoundingBox:u.default.makeObjectPropertySetter(c.readWgs84BoundingBox_),Identifier:u.default.makeObjectPropertySetter(s.a.readString)})),c.STYLE_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{LegendURL:u.default.makeObjectPropertyPusher(c.readLegendUrl_)},u.default.makeStructureNS(c.OWS_NAMESPACE_URIS_,{Title:u.default.makeObjectPropertySetter(s.a.readString),Identifier:u.default.makeObjectPropertySetter(s.a.readString)})),c.TMS_LINKS_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{TileMatrixSet:u.default.makeObjectPropertySetter(s.a.readString),TileMatrixSetLimits:u.default.makeObjectPropertySetter(c.readTileMatrixLimitsList_)}),c.TMS_LIMITS_LIST_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{TileMatrixLimits:u.default.makeArrayPusher(c.readTileMatrixLimits_)}),c.TMS_LIMITS_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{TileMatrix:u.default.makeObjectPropertySetter(s.a.readString),MinTileRow:u.default.makeObjectPropertySetter(s.a.readNonNegativeInteger),MaxTileRow:u.default.makeObjectPropertySetter(s.a.readNonNegativeInteger),MinTileCol:u.default.makeObjectPropertySetter(s.a.readNonNegativeInteger),MaxTileCol:u.default.makeObjectPropertySetter(s.a.readNonNegativeInteger)}),c.DIMENSION_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{Default:u.default.makeObjectPropertySetter(s.a.readString),Value:u.default.makeObjectPropertyPusher(s.a.readString)},u.default.makeStructureNS(c.OWS_NAMESPACE_URIS_,{Identifier:u.default.makeObjectPropertySetter(s.a.readString)})),c.WGS84_BBOX_READERS_=u.default.makeStructureNS(c.OWS_NAMESPACE_URIS_,{LowerCorner:u.default.makeArrayPusher(c.readCoordinates_),UpperCorner:u.default.makeArrayPusher(c.readCoordinates_)}),c.TMS_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{WellKnownScaleSet:u.default.makeObjectPropertySetter(s.a.readString),TileMatrix:u.default.makeObjectPropertyPusher(c.readTileMatrix_)},u.default.makeStructureNS(c.OWS_NAMESPACE_URIS_,{SupportedCRS:u.default.makeObjectPropertySetter(s.a.readString),Identifier:u.default.makeObjectPropertySetter(s.a.readString)})),c.TM_PARSERS_=u.default.makeStructureNS(c.NAMESPACE_URIS_,{TopLeftCorner:u.default.makeObjectPropertySetter(c.readCoordinates_),ScaleDenominator:u.default.makeObjectPropertySetter(s.a.readDecimal),TileWidth:u.default.makeObjectPropertySetter(s.a.readNonNegativeInteger),TileHeight:u.default.makeObjectPropertySetter(s.a.readNonNegativeInteger),MatrixWidth:u.default.makeObjectPropertySetter(s.a.readNonNegativeInteger),MatrixHeight:u.default.makeObjectPropertySetter(s.a.readNonNegativeInteger)},u.default.makeStructureNS(c.OWS_NAMESPACE_URIS_,{Identifier:u.default.makeObjectPropertySetter(s.a.readString)}));t.default=c},87:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(2)),i=(d(r(1)),d(r(111))),o=d(r(172)),a=d(r(32)),s=d(r(71)),u=d(r(104)),l=d(r(180));function d(e){return e&&e.__esModule?e:{default:e}}var c={interaction:function(e){n.default.assertInstanceof(e,i.default),Object.defineProperty(e,"active",{get:function(){return e.getActive()},set:function(t){e.setActive(t)}})},layer:function(e){n.default.assertInstanceof(e,o.default),Object.defineProperty(e,"visible",{configurable:!0,get:function(){return e.getVisible()},set:function(t){e.setVisible(t)}}),Object.defineProperty(e,"opacity",{configurable:!0,get:function(){return e.getOpacity()},set:function(t){e.setOpacity(t)}})},layerLoading:function(e,t){var r=void 0,i=null,o=null,d=function e(t){var r=t.get("load_count");var n=t.get("parent_group");t.set("load_count",++r,!0);n&&e(n)},c=function e(t){var r=t.get("load_count");var n=t.get("parent_group");t.set("load_count",--r,!0);n&&e(n)};if(e.set("load_count",0,!0),e instanceof a.default&&e.getLayers().on("add",function(t){t.element.set("parent_group",e)}),e instanceof s.default){if(null===(r=e.getSource()))return;r instanceof l.default?(i=["tileloadstart"],o=["tileloadend","tileloaderror"]):r instanceof u.default?(i=["imageloadstart"],o=["imageloadend","imageloaderror"]):n.default.fail("unsupported source type"),r.on(i,function(){d(e),t.$applyAsync()}),r.on(o,function(){c(e),t.$applyAsync()})}Object.defineProperty(e,"loading",{configurable:!0,get:function(){return e.get("load_count")>0}})}};t.default=c},95:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(2)),i=s(r(1)),o=s(r(59)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){o.default.call(this),this.timeout_=e;var t=angular.element('<div class="ngeo-notification"></div>');angular.element(document.body).append(t),this.container_=t,this.cache_={}};u.$inject=["$timeout"],u.$inject=["$timeout"],a.inherits(u,o.default),u.DEFAULT_DELAY_=7e3,u.prototype.notify=function(e){this.show(e)},u.prototype.clear=function(){for(var e in this.cache_)this.clearMessageByCacheItem_(this.cache_[parseInt(e,10)])},u.prototype.showMessage=function(e){var t=this,r=e.type;n.default.assertString(r,"Type should be set.");var i=["alert","fade"];switch(r){case o.default.Type.ERROR:i.push("alert-danger");break;case o.default.Type.INFORMATION:i.push("alert-info");break;case o.default.Type.SUCCESS:i.push("alert-success");break;case o.default.Type.WARNING:i.push("alert-warning")}var s=angular.element('<div class="'+i.join(" ")+'"></div>');(e.target?angular.element(e.target):this.container_).append(s),s.html(e.msg).addClass("in");var l=void 0!==e.delay?e.delay:u.DEFAULT_DELAY_,d={el:s},c=a.getUid(s);d.promise=this.timeout_(function(){s.alert("close"),delete t.cache_[c]},l),this.cache_[c]=d},u.prototype.clearMessageByCacheItem_=function(e){var t=e.el,r=e.promise,n=a.getUid(t);t.alert("close"),this.timeout_.cancel(r),delete this.cache_[n]},(u.module=angular.module("ngeoNotification",[])).service("ngeoNotification",u),i.default.module.requires.push(u.module.name),t.default=u}},[519]);
//# sourceMappingURL=themeselector.fadc35a15fe380ebca29.js.map