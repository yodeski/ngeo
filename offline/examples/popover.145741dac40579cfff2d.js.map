{"version":3,"sources":["webpack:///./examples/popover.js","webpack:///./src/message/popoverComponent.js"],"names":["__webpack_require__","exports","module","angular","ngeoBase","name","ngeoMessagePopoverComponent","_index","requires","push","component_","restrict","scope","controller","link","elem","attrs","ngeoPopoverCtrl","anchorElm","on","data","click","bodyElm","show","shown","popover","container","html","content","placement","$","dismissPopover","$on","unbind","anchorComponent","require","contentComponent","hide","PopoverController_","$scope","onMouseDown","clickEvent","this","target","parent","find","length","undefined","element","bind","off","prototype","directive"],"mappings":"gJAKAA,EAAA,KACAA,EAAA,IACA,QAAAA,EAAA,QAGAA,EAAA,yDAPA,IAAMC,KAWNA,EAAQC,OAASC,QAAQD,OAAO,OAC9BE,UAASF,OAAOG,KAChBC,UAA4BD,iBAIfJ,sHCjBf,MAAAM,EAAAP,EAAA,uCAKA,IAAMC,EAAUE,QAAQD,OAAO,kBAE/BE,UAASF,OAAOM,SAASC,KAAKR,EAAQI,MAqBtCJ,EAAQS,WAAa,WACnB,OACEC,SAAU,IACVC,OAAO,EACPC,WAAY,uCACZC,KAAM,SAACF,EAAOG,EAAMC,EAAOC,GACzBA,EAAgBC,UAAUC,GAAG,oBAAqB,WAIhCF,EAAgBC,UAAUE,KAAK,cAC/C,QAAmBC,OAAQ,IAG7BJ,EAAgBC,UAAUC,GAAG,sBAAuB,WAClDF,EAAgBK,QAAQC,OACxBN,EAAgBO,OAAQ,IAG1BP,EAAgBC,UAAUO,SACxBC,UAAW,OACXC,MAAM,EACNC,QAASX,EAAgBK,QACzBO,UAAWb,EAAA,sBAAiC,UAG1CA,EAAA,oBACFc,EAAEd,EAAA,oBAA6BG,GAAG,SAAU,WAC1CF,EAAgBc,mBAIpBnB,EAAMoB,IAAI,WAAY,WACpBf,EAAgBC,UAAUO,QAAQ,WAClCR,EAAgBC,UAAUe,OAAO,uBACjChB,EAAgBC,UAAUe,OAAO,0BAYzChC,EAAQiC,gBAAkB,WACxB,OACEvB,SAAU,IACVwB,QAAS,gBACTrB,KAAM,SAACF,EAAOG,EAAMC,EAAOC,GACzBA,EAAgBC,UAAYH,KAWlCd,EAAQmC,iBAAmB,WACzB,OACEzB,SAAU,IACVwB,QAAS,gBACTrB,KAAM,SAACF,EAAOG,EAAMC,EAAOC,GACzBA,EAAgBK,QAAUP,EAC1BA,EAAKsB,UAeXpC,EAAQqC,mBAAqB,SAASC,GAoBpC,SAASC,EAAYC,GACfC,KAAKxB,UAAU,KAAOuB,EAAWE,QACnCD,KAAKpB,QAAQsB,SAAS,KAAOH,EAAWE,OACiB,IAAzDD,KAAKpB,QAAQsB,SAASC,KAAKJ,EAAWE,QAAQG,QAAgBJ,KAAKlB,OACnEkB,KAAKX,iBAlBTW,KAAKlB,OAAQ,EAMbkB,KAAKxB,eAAY6B,EAMjBL,KAAKpB,aAAUyB,EAUf5C,QAAQ6C,QAAQ,QAAQ7B,GAAG,YAAaqB,EAAYS,KAAKP,OAEzDH,EAAOP,IAAI,WAAY,WACrB7B,QAAQ6C,QAAQ,QAAQE,IAAI,YAAaV,MA/B7CvC,EAAQqC,sCAwCRrC,EAAQqC,mBAAmBa,UAAUpB,eAAiB,WACpDW,KAAKlB,OAAQ,EACbkB,KAAKxB,UAAUO,QAAQ,SAIzBxB,EAAQY,WAAW,wBAAyBZ,EAAQqC,oBACpDrC,EAAQmD,UAAU,cAAenD,EAAQS,YACzCT,EAAQmD,UAAU,oBAAqBnD,EAAQiC,iBAC/CjC,EAAQmD,UAAU,qBAAsBnD,EAAQmC,4BAGjCnC","file":"popover.145741dac40579cfff2d.js","sourcesContent":["/**\n * @module app.popover\n */\nconst exports = {};\n\nimport './popover.css';\nimport './common_dependencies.js';\nimport ngeoBase from 'ngeo/index.js';\n\n/** @suppress {extraRequire} */\nimport ngeoMessagePopoverComponent from 'ngeo/message/popoverComponent.js';\n\n\n/** @type {!angular.Module} **/\nexports.module = angular.module('app', [\n  ngeoBase.module.name,\n  ngeoMessagePopoverComponent.name,\n]);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/popover.js","/**\n * @module ngeo.message.popoverComponent\n */\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @type {angular.Module}\n */\nconst exports = angular.module('ngeoPopover', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * Provides a directive used to display a Bootstrap popover.\n *\n *<div ngeo-popover>\n *  <a ngeo-popover-anchor class=\"btn btn-info\">anchor 1</a>\n *  <div ngeo-popover-content>\n *    <ul>\n *      <li>action 1:\n *        <input type=\"range\"/>\n *      </li>\n *    </ul>\n *  </div>\n *</div>\n * @ngdoc directive\n * @ngInject\n * @ngname ngeoPopover\n * @return {angular.Directive} The Directive Definition Object.\n */\nexports.component_ = function() {\n  return {\n    restrict: 'A',\n    scope: true,\n    controller: 'NgeoPopoverController as popoverCtrl',\n    link: (scope, elem, attrs, ngeoPopoverCtrl) => {\n      ngeoPopoverCtrl.anchorElm.on('hidden.bs.popover', () => {\n        /**\n         * @type {{inState : Object}}\n         */\n        const popover = ngeoPopoverCtrl.anchorElm.data('bs.popover');\n        popover['inState'].click = false;\n      });\n\n      ngeoPopoverCtrl.anchorElm.on('inserted.bs.popover', () => {\n        ngeoPopoverCtrl.bodyElm.show();\n        ngeoPopoverCtrl.shown = true;\n      });\n\n      ngeoPopoverCtrl.anchorElm.popover({\n        container: 'body',\n        html: true,\n        content: ngeoPopoverCtrl.bodyElm,\n        placement: attrs['ngeoPopoverPlacement'] || 'right'\n      });\n\n      if (attrs['ngeoPopoverDismiss']) {\n        $(attrs['ngeoPopoverDismiss']).on('scroll', () => {\n          ngeoPopoverCtrl.dismissPopover();\n        });\n      }\n\n      scope.$on('$destroy', () => {\n        ngeoPopoverCtrl.anchorElm.popover('destroy');\n        ngeoPopoverCtrl.anchorElm.unbind('inserted.bs.popover');\n        ngeoPopoverCtrl.anchorElm.unbind('hidden.bs.popover');\n      });\n    }\n  };\n};\n\n/**\n * @ngdoc directive\n * @ngInject\n * @ngname ngeoPopoverAnchor\n * @return {angular.Directive} The Directive Definition Object\n */\nexports.anchorComponent = function() {\n  return {\n    restrict: 'A',\n    require: '^^ngeoPopover',\n    link: (scope, elem, attrs, ngeoPopoverCtrl) => {\n      ngeoPopoverCtrl.anchorElm = elem;\n    }\n  };\n};\n\n/**\n * @ngdoc directive\n * @ngInject\n * @ngname ngeoPopoverContent\n * @return {angular.Directive} The Directive Definition Object\n */\nexports.contentComponent = function() {\n  return {\n    restrict: 'A',\n    require: '^^ngeoPopover',\n    link: (scope, elem, attrs, ngeoPopoverCtrl) => {\n      ngeoPopoverCtrl.bodyElm = elem;\n      elem.hide();\n    }\n  };\n};\n\n/**\n * The controller for the 'popover' directive.\n * @constructor\n * @private\n * @struct\n * @ngInject\n * @ngdoc controller\n * @ngname NgeoPopoverController\n * @param {angular.Scope} $scope Scope.\n */\nexports.PopoverController_ = function($scope) {\n  /**\n   * The state of the popover (displayed or not)\n   * @type {boolean}\n   * @export\n   */\n  this.shown = false;\n\n  /**\n   * @type {angular.JQLite|undefined}\n   * @export\n   */\n  this.anchorElm = undefined;\n\n  /**\n   * @type {angular.JQLite|undefined}\n   * @export\n   */\n  this.bodyElm = undefined;\n\n  function onMouseDown(clickEvent) {\n    if (this.anchorElm[0] !== clickEvent.target &&\n      this.bodyElm.parent()[0] !== clickEvent.target &\n      this.bodyElm.parent().find(clickEvent.target).length === 0 && this.shown) {\n      this.dismissPopover();\n    }\n  }\n\n  angular.element('body').on('mousedown', onMouseDown.bind(this));\n\n  $scope.$on('$destroy', () => {\n    angular.element('body').off('mousedown', onMouseDown);\n  });\n};\n\n\n/**\n * Dissmiss popover function\n * @export\n */\nexports.PopoverController_.prototype.dismissPopover = function() {\n  this.shown = false;\n  this.anchorElm.popover('hide');\n};\n\n\nexports.controller('NgeoPopoverController', exports.PopoverController_);\nexports.directive('ngeoPopover', exports.component_);\nexports.directive('ngeoPopoverAnchor', exports.anchorComponent);\nexports.directive('ngeoPopoverContent', exports.contentComponent);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/message/popoverComponent.js"],"sourceRoot":""}